import{s as n}from"./main-DImAfqRi.js";async function i(e){try{console.log(`Getting tax settings for company: ${e}`);const{data:t,error:r}=await n.from("tax_settings").select("*").eq("company_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching tax settings:",r),new Error(`Failed to fetch tax settings: ${r.message}`);if(!t||t.length===0){console.log(`No tax settings found for company ${e}, creating default...`);const{data:s,error:a}=await n.from("tax_settings").insert({company_id:e,tax_type:"split",tax_inclusive:!1,cess_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(a)throw console.error("Error creating default tax settings:",a),new Error(`Failed to create default tax settings: ${a.message}`);return s}return t.length>1&&console.warn(`Multiple tax settings found for company ${e}, using the most recent one`),t[0]}catch(t){throw console.error("Error in getTaxSettingsSafe:",t),t}}export{i as getTaxSettingsSafe};
