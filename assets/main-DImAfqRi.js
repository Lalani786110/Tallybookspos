function iR(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function My(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var a=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return r[n]}})}),e}var dw={exports:{}},qm={},fw={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function Gz(){if(tE)return sn;tE=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function h(H){return H===null||typeof H!="object"?null:(H=f&&H[f]||H["@@iterator"],typeof H=="function"?H:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function m(H,L,K){this.props=H,this.context=L,this.refs=y,this.updater=K||p}m.prototype.isReactComponent={},m.prototype.setState=function(H,L){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,L,"setState")},m.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function v(){}v.prototype=m.prototype;function b(H,L,K){this.props=H,this.context=L,this.refs=y,this.updater=K||p}var x=b.prototype=new v;x.constructor=b,g(x,m.prototype),x.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,I={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function O(H,L,K){var Y,Z={},V=null,ee=null;if(L!=null)for(Y in L.ref!==void 0&&(ee=L.ref),L.key!==void 0&&(V=""+L.key),L)_.call(L,Y)&&!A.hasOwnProperty(Y)&&(Z[Y]=L[Y]);var B=arguments.length-2;if(B===1)Z.children=K;else if(1<B){for(var F=Array(B),X=0;X<B;X++)F[X]=arguments[X+2];Z.children=F}if(H&&H.defaultProps)for(Y in B=H.defaultProps,B)Z[Y]===void 0&&(Z[Y]=B[Y]);return{$$typeof:r,type:H,key:V,ref:ee,props:Z,_owner:I.current}}function M(H,L){return{$$typeof:r,type:H.type,key:L,ref:H.ref,props:H.props,_owner:H._owner}}function z(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function U(H){var L={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(K){return L[K]})}var D=/\/+/g;function T(H,L){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):L.toString(36)}function R(H,L,K,Y,Z){var V=typeof H;(V==="undefined"||V==="boolean")&&(H=null);var ee=!1;if(H===null)ee=!0;else switch(V){case"string":case"number":ee=!0;break;case"object":switch(H.$$typeof){case r:case t:ee=!0}}if(ee)return ee=H,Z=Z(ee),H=Y===""?"."+T(ee,0):Y,S(Z)?(K="",H!=null&&(K=H.replace(D,"$&/")+"/"),R(Z,L,K,"",function(X){return X})):Z!=null&&(z(Z)&&(Z=M(Z,K+(!Z.key||ee&&ee.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+H)),L.push(Z)),1;if(ee=0,Y=Y===""?".":Y+":",S(H))for(var B=0;B<H.length;B++){V=H[B];var F=Y+T(V,B);ee+=R(V,L,K,F,Z)}else if(F=h(H),typeof F=="function")for(H=F.call(H),B=0;!(V=H.next()).done;)V=V.value,F=Y+T(V,B++),ee+=R(V,L,K,F,Z);else if(V==="object")throw L=String(H),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return ee}function C(H,L,K){if(H==null)return H;var Y=[],Z=0;return R(H,Y,"","",function(V){return L.call(K,V,Z++)}),Y}function N(H){if(H._status===-1){var L=H._result;L=L(),L.then(function(K){(H._status===0||H._status===-1)&&(H._status=1,H._result=K)},function(K){(H._status===0||H._status===-1)&&(H._status=2,H._result=K)}),H._status===-1&&(H._status=0,H._result=L)}if(H._status===1)return H._result.default;throw H._result}var E={current:null},k={transition:null},P={ReactCurrentDispatcher:E,ReactCurrentBatchConfig:k,ReactCurrentOwner:I};function q(){throw Error("act(...) is not supported in production builds of React.")}return sn.Children={map:C,forEach:function(H,L,K){C(H,function(){L.apply(this,arguments)},K)},count:function(H){var L=0;return C(H,function(){L++}),L},toArray:function(H){return C(H,function(L){return L})||[]},only:function(H){if(!z(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},sn.Component=m,sn.Fragment=e,sn.Profiler=a,sn.PureComponent=b,sn.StrictMode=n,sn.Suspense=l,sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,sn.act=q,sn.cloneElement=function(H,L,K){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Y=g({},H.props),Z=H.key,V=H.ref,ee=H._owner;if(L!=null){if(L.ref!==void 0&&(V=L.ref,ee=I.current),L.key!==void 0&&(Z=""+L.key),H.type&&H.type.defaultProps)var B=H.type.defaultProps;for(F in L)_.call(L,F)&&!A.hasOwnProperty(F)&&(Y[F]=L[F]===void 0&&B!==void 0?B[F]:L[F])}var F=arguments.length-2;if(F===1)Y.children=K;else if(1<F){B=Array(F);for(var X=0;X<F;X++)B[X]=arguments[X+2];Y.children=B}return{$$typeof:r,type:H.type,key:Z,ref:V,props:Y,_owner:ee}},sn.createContext=function(H){return H={$$typeof:s,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},sn.createElement=O,sn.createFactory=function(H){var L=O.bind(null,H);return L.type=H,L},sn.createRef=function(){return{current:null}},sn.forwardRef=function(H){return{$$typeof:o,render:H}},sn.isValidElement=z,sn.lazy=function(H){return{$$typeof:u,_payload:{_status:-1,_result:H},_init:N}},sn.memo=function(H,L){return{$$typeof:c,type:H,compare:L===void 0?null:L}},sn.startTransition=function(H){var L=k.transition;k.transition={};try{H()}finally{k.transition=L}},sn.unstable_act=q,sn.useCallback=function(H,L){return E.current.useCallback(H,L)},sn.useContext=function(H){return E.current.useContext(H)},sn.useDebugValue=function(){},sn.useDeferredValue=function(H){return E.current.useDeferredValue(H)},sn.useEffect=function(H,L){return E.current.useEffect(H,L)},sn.useId=function(){return E.current.useId()},sn.useImperativeHandle=function(H,L,K){return E.current.useImperativeHandle(H,L,K)},sn.useInsertionEffect=function(H,L){return E.current.useInsertionEffect(H,L)},sn.useLayoutEffect=function(H,L){return E.current.useLayoutEffect(H,L)},sn.useMemo=function(H,L){return E.current.useMemo(H,L)},sn.useReducer=function(H,L,K){return E.current.useReducer(H,L,K)},sn.useRef=function(H){return E.current.useRef(H)},sn.useState=function(H){return E.current.useState(H)},sn.useSyncExternalStore=function(H,L,K){return E.current.useSyncExternalStore(H,L,K)},sn.useTransition=function(){return E.current.useTransition()},sn.version="18.3.1",sn}var rE;function X8(){return rE||(rE=1,fw.exports=Gz()),fw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function Kz(){if(nE)return qm;nE=1;var r=X8(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,c){var u,f={},h=null,p=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)n.call(l,u)&&!i.hasOwnProperty(u)&&(f[u]=l[u]);if(o&&o.defaultProps)for(u in l=o.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:t,type:o,key:h,ref:p,props:f,_owner:a.current}}return qm.Fragment=e,qm.jsx=s,qm.jsxs=s,qm}var aE;function Xz(){return aE||(aE=1,dw.exports=Kz()),dw.exports}var d=Xz(),ie=X8();const Je=In(ie),Yz=iR({__proto__:null,default:Je},[ie]);var O1={},hw={exports:{}},lo={},pw={exports:{}},mw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function Jz(){return iE||(iE=1,(function(r){function t(k,P){var q=k.length;k.push(P);e:for(;0<q;){var H=q-1>>>1,L=k[H];if(0<a(L,P))k[H]=P,k[q]=L,q=H;else break e}}function e(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var P=k[0],q=k.pop();if(q!==P){k[0]=q;e:for(var H=0,L=k.length,K=L>>>1;H<K;){var Y=2*(H+1)-1,Z=k[Y],V=Y+1,ee=k[V];if(0>a(Z,q))V<L&&0>a(ee,Z)?(k[H]=ee,k[V]=q,H=V):(k[H]=Z,k[Y]=q,H=Y);else if(V<L&&0>a(ee,q))k[H]=ee,k[V]=q,H=V;else break e}}return P}function a(k,P){var q=k.sortIndex-P.sortIndex;return q!==0?q:k.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,f=null,h=3,p=!1,g=!1,y=!1,m=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var P=e(c);P!==null;){if(P.callback===null)n(c);else if(P.startTime<=k)n(c),P.sortIndex=P.expirationTime,t(l,P);else break;P=e(c)}}function S(k){if(y=!1,x(k),!g)if(e(l)!==null)g=!0,N(_);else{var P=e(c);P!==null&&E(S,P.startTime-k)}}function _(k,P){g=!1,y&&(y=!1,v(O),O=-1),p=!0;var q=h;try{for(x(P),f=e(l);f!==null&&(!(f.expirationTime>P)||k&&!U());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var L=H(f.expirationTime<=P);P=r.unstable_now(),typeof L=="function"?f.callback=L:f===e(l)&&n(l),x(P)}else n(l);f=e(l)}if(f!==null)var K=!0;else{var Y=e(c);Y!==null&&E(S,Y.startTime-P),K=!1}return K}finally{f=null,h=q,p=!1}}var I=!1,A=null,O=-1,M=5,z=-1;function U(){return!(r.unstable_now()-z<M)}function D(){if(A!==null){var k=r.unstable_now();z=k;var P=!0;try{P=A(!0,k)}finally{P?T():(I=!1,A=null)}}else I=!1}var T;if(typeof b=="function")T=function(){b(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,C=R.port2;R.port1.onmessage=D,T=function(){C.postMessage(null)}}else T=function(){m(D,0)};function N(k){A=k,I||(I=!0,T())}function E(k,P){O=m(function(){k(r.unstable_now())},P)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,N(_))},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return h},r.unstable_getFirstCallbackNode=function(){return e(l)},r.unstable_next=function(k){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var q=h;h=P;try{return k()}finally{h=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(k,P){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var q=h;h=k;try{return P()}finally{h=q}},r.unstable_scheduleCallback=function(k,P,q){var H=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?H+q:H):q=H,k){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=q+L,k={id:u++,callback:P,priorityLevel:k,startTime:q,expirationTime:L,sortIndex:-1},q>H?(k.sortIndex=q,t(c,k),e(l)===null&&k===e(c)&&(y?(v(O),O=-1):y=!0,E(S,q-H))):(k.sortIndex=L,t(l,k),g||p||(g=!0,N(_))),k},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(k){var P=h;return function(){var q=h;h=P;try{return k.apply(this,arguments)}finally{h=q}}}})(mw)),mw}var sE;function Zz(){return sE||(sE=1,pw.exports=Jz()),pw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function Qz(){if(oE)return lo;oE=1;var r=X8(),t=Zz();function e(w){for(var j="https://reactjs.org/docs/error-decoder.html?invariant="+w,W=1;W<arguments.length;W++)j+="&args[]="+encodeURIComponent(arguments[W]);return"Minified React error #"+w+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(w,j){s(w,j),s(w+"Capture",j)}function s(w,j){for(a[w]=j,w=0;w<j.length;w++)n.add(j[w])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function h(w){return l.call(f,w)?!0:l.call(u,w)?!1:c.test(w)?f[w]=!0:(u[w]=!0,!1)}function p(w,j,W,J){if(W!==null&&W.type===0)return!1;switch(typeof j){case"function":case"symbol":return!0;case"boolean":return J?!1:W!==null?!W.acceptsBooleans:(w=w.toLowerCase().slice(0,5),w!=="data-"&&w!=="aria-");default:return!1}}function g(w,j,W,J){if(j===null||typeof j>"u"||p(w,j,W,J))return!0;if(J)return!1;if(W!==null)switch(W.type){case 3:return!j;case 4:return j===!1;case 5:return isNaN(j);case 6:return isNaN(j)||1>j}return!1}function y(w,j,W,J,ne,de,_e){this.acceptsBooleans=j===2||j===3||j===4,this.attributeName=J,this.attributeNamespace=ne,this.mustUseProperty=W,this.propertyName=w,this.type=j,this.sanitizeURL=de,this.removeEmptyString=_e}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(w){m[w]=new y(w,0,!1,w,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(w){var j=w[0];m[j]=new y(j,1,!1,w[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(w){m[w]=new y(w,2,!1,w.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(w){m[w]=new y(w,2,!1,w,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(w){m[w]=new y(w,3,!1,w.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(w){m[w]=new y(w,3,!0,w,null,!1,!1)}),["capture","download"].forEach(function(w){m[w]=new y(w,4,!1,w,null,!1,!1)}),["cols","rows","size","span"].forEach(function(w){m[w]=new y(w,6,!1,w,null,!1,!1)}),["rowSpan","start"].forEach(function(w){m[w]=new y(w,5,!1,w.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(w){return w[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(w){var j=w.replace(v,b);m[j]=new y(j,1,!1,w,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(w){var j=w.replace(v,b);m[j]=new y(j,1,!1,w,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(w){var j=w.replace(v,b);m[j]=new y(j,1,!1,w,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(w){m[w]=new y(w,1,!1,w.toLowerCase(),null,!1,!1)}),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(w){m[w]=new y(w,1,!1,w.toLowerCase(),null,!0,!0)});function x(w,j,W,J){var ne=m.hasOwnProperty(j)?m[j]:null;(ne!==null?ne.type!==0:J||!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(g(j,W,ne,J)&&(W=null),J||ne===null?h(j)&&(W===null?w.removeAttribute(j):w.setAttribute(j,""+W)):ne.mustUseProperty?w[ne.propertyName]=W===null?ne.type===3?!1:"":W:(j=ne.attributeName,J=ne.attributeNamespace,W===null?w.removeAttribute(j):(ne=ne.type,W=ne===3||ne===4&&W===!0?"":""+W,J?w.setAttributeNS(J,j,W):w.setAttribute(j,W))))}var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),I=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),U=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),k=Symbol.iterator;function P(w){return w===null||typeof w!="object"?null:(w=k&&w[k]||w["@@iterator"],typeof w=="function"?w:null)}var q=Object.assign,H;function L(w){if(H===void 0)try{throw Error()}catch(W){var j=W.stack.trim().match(/\n( *(at )?)/);H=j&&j[1]||""}return`
`+H+w}var K=!1;function Y(w,j){if(!w||K)return"";K=!0;var W=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(j)if(j=function(){throw Error()},Object.defineProperty(j.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(j,[])}catch(Nt){var J=Nt}Reflect.construct(w,[],j)}else{try{j.call()}catch(Nt){J=Nt}w.call(j.prototype)}else{try{throw Error()}catch(Nt){J=Nt}w()}}catch(Nt){if(Nt&&J&&typeof Nt.stack=="string"){for(var ne=Nt.stack.split(`
`),de=J.stack.split(`
`),_e=ne.length-1,ze=de.length-1;1<=_e&&0<=ze&&ne[_e]!==de[ze];)ze--;for(;1<=_e&&0<=ze;_e--,ze--)if(ne[_e]!==de[ze]){if(_e!==1||ze!==1)do if(_e--,ze--,0>ze||ne[_e]!==de[ze]){var Ze=`
`+ne[_e].replace(" at new "," at ");return w.displayName&&Ze.includes("<anonymous>")&&(Ze=Ze.replace("<anonymous>",w.displayName)),Ze}while(1<=_e&&0<=ze);break}}}finally{K=!1,Error.prepareStackTrace=W}return(w=w?w.displayName||w.name:"")?L(w):""}function Z(w){switch(w.tag){case 5:return L(w.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return w=Y(w.type,!1),w;case 11:return w=Y(w.type.render,!1),w;case 1:return w=Y(w.type,!0),w;default:return""}}function V(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case A:return"Fragment";case I:return"Portal";case M:return"Profiler";case O:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case U:return(w.displayName||"Context")+".Consumer";case z:return(w._context.displayName||"Context")+".Provider";case D:var j=w.render;return w=w.displayName,w||(w=j.displayName||j.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case C:return j=w.displayName||null,j!==null?j:V(w.type)||"Memo";case N:j=w._payload,w=w._init;try{return V(w(j))}catch{}}return null}function ee(w){var j=w.type;switch(w.tag){case 24:return"Cache";case 9:return(j.displayName||"Context")+".Consumer";case 10:return(j._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=j.render,w=w.displayName||w.name||"",j.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return j;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(j);case 8:return j===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof j=="function")return j.displayName||j.name||null;if(typeof j=="string")return j}return null}function B(w){switch(typeof w){case"boolean":case"number":case"string":case"undefined":return w;case"object":return w;default:return""}}function F(w){var j=w.type;return(w=w.nodeName)&&w.toLowerCase()==="input"&&(j==="checkbox"||j==="radio")}function X(w){var j=F(w)?"checked":"value",W=Object.getOwnPropertyDescriptor(w.constructor.prototype,j),J=""+w[j];if(!w.hasOwnProperty(j)&&typeof W<"u"&&typeof W.get=="function"&&typeof W.set=="function"){var ne=W.get,de=W.set;return Object.defineProperty(w,j,{configurable:!0,get:function(){return ne.call(this)},set:function(_e){J=""+_e,de.call(this,_e)}}),Object.defineProperty(w,j,{enumerable:W.enumerable}),{getValue:function(){return J},setValue:function(_e){J=""+_e},stopTracking:function(){w._valueTracker=null,delete w[j]}}}}function te(w){w._valueTracker||(w._valueTracker=X(w))}function se(w){if(!w)return!1;var j=w._valueTracker;if(!j)return!0;var W=j.getValue(),J="";return w&&(J=F(w)?w.checked?"true":"false":w.value),w=J,w!==W?(j.setValue(w),!0):!1}function ce(w){if(w=w||(typeof document<"u"?document:void 0),typeof w>"u")return null;try{return w.activeElement||w.body}catch{return w.body}}function ue(w,j){var W=j.checked;return q({},j,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:W??w._wrapperState.initialChecked})}function oe(w,j){var W=j.defaultValue==null?"":j.defaultValue,J=j.checked!=null?j.checked:j.defaultChecked;W=B(j.value!=null?j.value:W),w._wrapperState={initialChecked:J,initialValue:W,controlled:j.type==="checkbox"||j.type==="radio"?j.checked!=null:j.value!=null}}function le(w,j){j=j.checked,j!=null&&x(w,"checked",j,!1)}function pe(w,j){le(w,j);var W=B(j.value),J=j.type;if(W!=null)J==="number"?(W===0&&w.value===""||w.value!=W)&&(w.value=""+W):w.value!==""+W&&(w.value=""+W);else if(J==="submit"||J==="reset"){w.removeAttribute("value");return}j.hasOwnProperty("value")?be(w,j.type,W):j.hasOwnProperty("defaultValue")&&be(w,j.type,B(j.defaultValue)),j.checked==null&&j.defaultChecked!=null&&(w.defaultChecked=!!j.defaultChecked)}function ye(w,j,W){if(j.hasOwnProperty("value")||j.hasOwnProperty("defaultValue")){var J=j.type;if(!(J!=="submit"&&J!=="reset"||j.value!==void 0&&j.value!==null))return;j=""+w._wrapperState.initialValue,W||j===w.value||(w.value=j),w.defaultValue=j}W=w.name,W!==""&&(w.name=""),w.defaultChecked=!!w._wrapperState.initialChecked,W!==""&&(w.name=W)}function be(w,j,W){(j!=="number"||ce(w.ownerDocument)!==w)&&(W==null?w.defaultValue=""+w._wrapperState.initialValue:w.defaultValue!==""+W&&(w.defaultValue=""+W))}var Ie=Array.isArray;function Oe(w,j,W,J){if(w=w.options,j){j={};for(var ne=0;ne<W.length;ne++)j["$"+W[ne]]=!0;for(W=0;W<w.length;W++)ne=j.hasOwnProperty("$"+w[W].value),w[W].selected!==ne&&(w[W].selected=ne),ne&&J&&(w[W].defaultSelected=!0)}else{for(W=""+B(W),j=null,ne=0;ne<w.length;ne++){if(w[ne].value===W){w[ne].selected=!0,J&&(w[ne].defaultSelected=!0);return}j!==null||w[ne].disabled||(j=w[ne])}j!==null&&(j.selected=!0)}}function Me(w,j){if(j.dangerouslySetInnerHTML!=null)throw Error(e(91));return q({},j,{value:void 0,defaultValue:void 0,children:""+w._wrapperState.initialValue})}function Re(w,j){var W=j.value;if(W==null){if(W=j.children,j=j.defaultValue,W!=null){if(j!=null)throw Error(e(92));if(Ie(W)){if(1<W.length)throw Error(e(93));W=W[0]}j=W}j==null&&(j=""),W=j}w._wrapperState={initialValue:B(W)}}function He(w,j){var W=B(j.value),J=B(j.defaultValue);W!=null&&(W=""+W,W!==w.value&&(w.value=W),j.defaultValue==null&&w.defaultValue!==W&&(w.defaultValue=W)),J!=null&&(w.defaultValue=""+J)}function qe(w){var j=w.textContent;j===w._wrapperState.initialValue&&j!==""&&j!==null&&(w.value=j)}function ct(w){switch(w){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(w,j){return w==null||w==="http://www.w3.org/1999/xhtml"?ct(j):w==="http://www.w3.org/2000/svg"&&j==="foreignObject"?"http://www.w3.org/1999/xhtml":w}var St,Rt=(function(w){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(j,W,J,ne){MSApp.execUnsafeLocalFunction(function(){return w(j,W,J,ne)})}:w})(function(w,j){if(w.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in w)w.innerHTML=j;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+j.valueOf().toString()+"</svg>",j=St.firstChild;w.firstChild;)w.removeChild(w.firstChild);for(;j.firstChild;)w.appendChild(j.firstChild)}});function Ft(w,j){if(j){var W=w.firstChild;if(W&&W===w.lastChild&&W.nodeType===3){W.nodeValue=j;return}}w.textContent=j}var ot={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kt=["Webkit","ms","Moz","O"];Object.keys(ot).forEach(function(w){Kt.forEach(function(j){j=j+w.charAt(0).toUpperCase()+w.substring(1),ot[j]=ot[w]})});function Pt(w,j,W){return j==null||typeof j=="boolean"||j===""?"":W||typeof j!="number"||j===0||ot.hasOwnProperty(w)&&ot[w]?(""+j).trim():j+"px"}function Ee(w,j){w=w.style;for(var W in j)if(j.hasOwnProperty(W)){var J=W.indexOf("--")===0,ne=Pt(W,j[W],J);W==="float"&&(W="cssFloat"),J?w.setProperty(W,ne):w[W]=ne}}var We=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(w,j){if(j){if(We[w]&&(j.children!=null||j.dangerouslySetInnerHTML!=null))throw Error(e(137,w));if(j.dangerouslySetInnerHTML!=null){if(j.children!=null)throw Error(e(60));if(typeof j.dangerouslySetInnerHTML!="object"||!("__html"in j.dangerouslySetInnerHTML))throw Error(e(61))}if(j.style!=null&&typeof j.style!="object")throw Error(e(62))}}function wt(w,j){if(w.indexOf("-")===-1)return typeof j.is=="string";switch(w){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bt=null;function dr(w){return w=w.target||w.srcElement||window,w.correspondingUseElement&&(w=w.correspondingUseElement),w.nodeType===3?w.parentNode:w}var Xt=null,pr=null,vr=null;function rr(w){if(w=Od(w)){if(typeof Xt!="function")throw Error(e(280));var j=w.stateNode;j&&(j=Hf(j),Xt(w.stateNode,w.type,j))}}function Zt(w){pr?vr?vr.push(w):vr=[w]:pr=w}function lr(){if(pr){var w=pr,j=vr;if(vr=pr=null,rr(w),j)for(w=0;w<j.length;w++)rr(j[w])}}function fr(w,j){return w(j)}function xr(){}var Ue=!1;function et(w,j,W){if(Ue)return w(j,W);Ue=!0;try{return fr(w,j,W)}finally{Ue=!1,(pr!==null||vr!==null)&&(xr(),lr())}}function ht(w,j){var W=w.stateNode;if(W===null)return null;var J=Hf(W);if(J===null)return null;W=J[j];e:switch(j){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(J=!J.disabled)||(w=w.type,J=!(w==="button"||w==="input"||w==="select"||w==="textarea")),w=!J;break e;default:w=!1}if(w)return null;if(W&&typeof W!="function")throw Error(e(231,j,typeof W));return W}var kt=!1;if(o)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){kt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{kt=!1}function Be(w,j,W,J,ne,de,_e,ze,Ze){var Nt=Array.prototype.slice.call(arguments,3);try{j.apply(W,Nt)}catch(Gt){this.onError(Gt)}}var Ve=!1,pt=null,he=!1,xe=null,me={onError:function(w){Ve=!0,pt=w}};function Se(w,j,W,J,ne,de,_e,ze,Ze){Ve=!1,pt=null,Be.apply(me,arguments)}function ke(w,j,W,J,ne,de,_e,ze,Ze){if(Se.apply(this,arguments),Ve){if(Ve){var Nt=pt;Ve=!1,pt=null}else throw Error(e(198));he||(he=!0,xe=Nt)}}function Te(w){var j=w,W=w;if(w.alternate)for(;j.return;)j=j.return;else{w=j;do j=w,(j.flags&4098)!==0&&(W=j.return),w=j.return;while(w)}return j.tag===3?W:null}function Ge(w){if(w.tag===13){var j=w.memoizedState;if(j===null&&(w=w.alternate,w!==null&&(j=w.memoizedState)),j!==null)return j.dehydrated}return null}function nt(w){if(Te(w)!==w)throw Error(e(188))}function Ke(w){var j=w.alternate;if(!j){if(j=Te(w),j===null)throw Error(e(188));return j!==w?null:w}for(var W=w,J=j;;){var ne=W.return;if(ne===null)break;var de=ne.alternate;if(de===null){if(J=ne.return,J!==null){W=J;continue}break}if(ne.child===de.child){for(de=ne.child;de;){if(de===W)return nt(ne),w;if(de===J)return nt(ne),j;de=de.sibling}throw Error(e(188))}if(W.return!==J.return)W=ne,J=de;else{for(var _e=!1,ze=ne.child;ze;){if(ze===W){_e=!0,W=ne,J=de;break}if(ze===J){_e=!0,J=ne,W=de;break}ze=ze.sibling}if(!_e){for(ze=de.child;ze;){if(ze===W){_e=!0,W=de,J=ne;break}if(ze===J){_e=!0,J=de,W=ne;break}ze=ze.sibling}if(!_e)throw Error(e(189))}}if(W.alternate!==J)throw Error(e(190))}if(W.tag!==3)throw Error(e(188));return W.stateNode.current===W?w:j}function it(w){return w=Ke(w),w!==null?st(w):null}function st(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var j=st(w);if(j!==null)return j;w=w.sibling}return null}var Mt=t.unstable_scheduleCallback,$t=t.unstable_cancelCallback,er=t.unstable_shouldYield,je=t.unstable_requestPaint,Le=t.unstable_now,vt=t.unstable_getCurrentPriorityLevel,Et=t.unstable_ImmediatePriority,Qt=t.unstable_UserBlockingPriority,Ut=t.unstable_NormalPriority,Yt=t.unstable_LowPriority,Ur=t.unstable_IdlePriority,Tr=null,Sr=null;function mr(w){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Tr,w,void 0,(w.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:An,Ir=Math.log,cn=Math.LN2;function An(w){return w>>>=0,w===0?32:31-(Ir(w)/cn|0)|0}var Un=64,Yn=4194304;function Ia(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function ua(w,j){var W=w.pendingLanes;if(W===0)return 0;var J=0,ne=w.suspendedLanes,de=w.pingedLanes,_e=W&268435455;if(_e!==0){var ze=_e&~ne;ze!==0?J=Ia(ze):(de&=_e,de!==0&&(J=Ia(de)))}else _e=W&~ne,_e!==0?J=Ia(_e):de!==0&&(J=Ia(de));if(J===0)return 0;if(j!==0&&j!==J&&(j&ne)===0&&(ne=J&-J,de=j&-j,ne>=de||ne===16&&(de&4194240)!==0))return j;if((J&4)!==0&&(J|=W&16),j=w.entangledLanes,j!==0)for(w=w.entanglements,j&=J;0<j;)W=31-Pr(j),ne=1<<W,J|=w[W],j&=~ne;return J}function As(w,j){switch(w){case 1:case 2:case 4:return j+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return j+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ba(w,j){for(var W=w.suspendedLanes,J=w.pingedLanes,ne=w.expirationTimes,de=w.pendingLanes;0<de;){var _e=31-Pr(de),ze=1<<_e,Ze=ne[_e];Ze===-1?((ze&W)===0||(ze&J)!==0)&&(ne[_e]=As(ze,j)):Ze<=j&&(w.expiredLanes|=ze),de&=~ze}}function rs(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function an(){var w=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),w}function Jr(w){for(var j=[],W=0;31>W;W++)j.push(w);return j}function ti(w,j,W){w.pendingLanes|=j,j!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,j=31-Pr(j),w[j]=W}function wo(w,j){var W=w.pendingLanes&~j;w.pendingLanes=j,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=j,w.mutableReadLanes&=j,w.entangledLanes&=j,j=w.entanglements;var J=w.eventTimes;for(w=w.expirationTimes;0<W;){var ne=31-Pr(W),de=1<<ne;j[ne]=0,J[ne]=-1,w[ne]=-1,W&=~de}}function _o(w,j){var W=w.entangledLanes|=j;for(w=w.entanglements;W;){var J=31-Pr(W),ne=1<<J;ne&j|w[J]&j&&(w[J]|=j),W&=~ne}}var Hr=0;function gi(w){return w&=-w,1<w?4<w?(w&268435455)!==0?16:536870912:4:1}var Ts,So,wl,ri,yi,No=!1,Ks=[],Mn=null,Ii=null,vi=null,Mr=new Map,Xs=new Map,Mi=[],Ho="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tf(w,j){switch(w){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Mr.delete(j.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(j.pointerId)}}function uc(w,j,W,J,ne,de){return w===null||w.nativeEvent!==de?(w={blockedOn:j,domEventName:W,eventSystemFlags:J,nativeEvent:de,targetContainers:[ne]},j!==null&&(j=Od(j),j!==null&&So(j)),w):(w.eventSystemFlags|=J,j=w.targetContainers,ne!==null&&j.indexOf(ne)===-1&&j.push(ne),w)}function ld(w,j,W,J,ne){switch(j){case"focusin":return Mn=uc(Mn,w,j,W,J,ne),!0;case"dragenter":return Ii=uc(Ii,w,j,W,J,ne),!0;case"mouseover":return vi=uc(vi,w,j,W,J,ne),!0;case"pointerover":var de=ne.pointerId;return Mr.set(de,uc(Mr.get(de)||null,w,j,W,J,ne)),!0;case"gotpointercapture":return de=ne.pointerId,Xs.set(de,uc(Xs.get(de)||null,w,j,W,J,ne)),!0}return!1}function cd(w){var j=wc(w.target);if(j!==null){var W=Te(j);if(W!==null){if(j=W.tag,j===13){if(j=Ge(W),j!==null){w.blockedOn=j,yi(w.priority,function(){wl(W)});return}}else if(j===3&&W.stateNode.current.memoizedState.isDehydrated){w.blockedOn=W.tag===3?W.stateNode.containerInfo:null;return}}}w.blockedOn=null}function ud(w){if(w.blockedOn!==null)return!1;for(var j=w.targetContainers;0<j.length;){var W=fd(w.domEventName,w.eventSystemFlags,j[0],w.nativeEvent);if(W===null){W=w.nativeEvent;var J=new W.constructor(W.type,W);Bt=J,W.target.dispatchEvent(J),Bt=null}else return j=Od(W),j!==null&&So(j),w.blockedOn=W,!1;j.shift()}return!0}function n0(w,j,W){ud(w)&&W.delete(j)}function Sm(){No=!1,Mn!==null&&ud(Mn)&&(Mn=null),Ii!==null&&ud(Ii)&&(Ii=null),vi!==null&&ud(vi)&&(vi=null),Mr.forEach(n0),Xs.forEach(n0)}function _l(w,j){w.blockedOn===j&&(w.blockedOn=null,No||(No=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Sm)))}function jo(w){function j(ne){return _l(ne,w)}if(0<Ks.length){_l(Ks[0],w);for(var W=1;W<Ks.length;W++){var J=Ks[W];J.blockedOn===w&&(J.blockedOn=null)}}for(Mn!==null&&_l(Mn,w),Ii!==null&&_l(Ii,w),vi!==null&&_l(vi,w),Mr.forEach(j),Xs.forEach(j),W=0;W<Mi.length;W++)J=Mi[W],J.blockedOn===w&&(J.blockedOn=null);for(;0<Mi.length&&(W=Mi[0],W.blockedOn===null);)cd(W),W.blockedOn===null&&Mi.shift()}var Cs=S.ReactCurrentBatchConfig,dd=!0;function tu(w,j,W,J){var ne=Hr,de=Cs.transition;Cs.transition=null;try{Hr=1,dc(w,j,W,J)}finally{Hr=ne,Cs.transition=de}}function Cf(w,j,W,J){var ne=Hr,de=Cs.transition;Cs.transition=null;try{Hr=4,dc(w,j,W,J)}finally{Hr=ne,Cs.transition=de}}function dc(w,j,W,J){if(dd){var ne=fd(w,j,W,J);if(ne===null)qf(w,j,J,ru,W),Tf(w,J);else if(ld(ne,w,j,W,J))J.stopPropagation();else if(Tf(w,J),j&4&&-1<Ho.indexOf(w)){for(;ne!==null;){var de=Od(ne);if(de!==null&&Ts(de),de=fd(w,j,W,J),de===null&&qf(w,j,J,ru,W),de===ne)break;ne=de}ne!==null&&J.stopPropagation()}else qf(w,j,J,null,W)}}var ru=null;function fd(w,j,W,J){if(ru=null,w=dr(J),w=wc(w),w!==null)if(j=Te(w),j===null)w=null;else if(W=j.tag,W===13){if(w=Ge(j),w!==null)return w;w=null}else if(W===3){if(j.stateNode.current.memoizedState.isDehydrated)return j.tag===3?j.stateNode.containerInfo:null;w=null}else j!==w&&(w=null);return ru=w,null}function Pf(w){switch(w){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vt()){case Et:return 1;case Qt:return 4;case Ut:case Yt:return 16;case Ur:return 536870912;default:return 16}default:return 16}}var ko=null,Ys=null,Js=null;function a0(){if(Js)return Js;var w,j=Ys,W=j.length,J,ne="value"in ko?ko.value:ko.textContent,de=ne.length;for(w=0;w<W&&j[w]===ne[w];w++);var _e=W-w;for(J=1;J<=_e&&j[W-J]===ne[de-J];J++);return Js=ne.slice(w,1<J?1-J:void 0)}function Eo(w){var j=w.keyCode;return"charCode"in w?(w=w.charCode,w===0&&j===13&&(w=13)):w=j,w===10&&(w=13),32<=w||w===13?w:0}function ns(){return!0}function hd(){return!1}function Ma(w){function j(W,J,ne,de,_e){this._reactName=W,this._targetInst=ne,this.type=J,this.nativeEvent=de,this.target=_e,this.currentTarget=null;for(var ze in w)w.hasOwnProperty(ze)&&(W=w[ze],this[ze]=W?W(de):de[ze]);return this.isDefaultPrevented=(de.defaultPrevented!=null?de.defaultPrevented:de.returnValue===!1)?ns:hd,this.isPropagationStopped=hd,this}return q(j.prototype,{preventDefault:function(){this.defaultPrevented=!0;var W=this.nativeEvent;W&&(W.preventDefault?W.preventDefault():typeof W.returnValue!="unknown"&&(W.returnValue=!1),this.isDefaultPrevented=ns)},stopPropagation:function(){var W=this.nativeEvent;W&&(W.stopPropagation?W.stopPropagation():typeof W.cancelBubble!="unknown"&&(W.cancelBubble=!0),this.isPropagationStopped=ns)},persist:function(){},isPersistent:ns}),j}var fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(w){return w.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=Ma(fc),nu=q({},fc,{view:0,detail:0}),Of=Ma(nu),au,pd,Vo,pc=q({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cr,button:0,buttons:0,relatedTarget:function(w){return w.relatedTarget===void 0?w.fromElement===w.srcElement?w.toElement:w.fromElement:w.relatedTarget},movementX:function(w){return"movementX"in w?w.movementX:(w!==Vo&&(Vo&&w.type==="mousemove"?(au=w.screenX-Vo.screenX,pd=w.screenY-Vo.screenY):pd=au=0,Vo=w),au)},movementY:function(w){return"movementY"in w?w.movementY:pd}}),md=Ma(pc),i0=q({},pc,{dataTransfer:0}),Nm=Ma(i0),gd=q({},nu,{relatedTarget:0}),Sl=Ma(gd),If=q({},fc,{animationName:0,elapsedTime:0,pseudoElement:0}),mc=Ma(If),Mf=q({},fc,{clipboardData:function(w){return"clipboardData"in w?w.clipboardData:window.clipboardData}}),re=Ma(Mf),ve=q({},fc,{data:0}),$e=Ma(ve),Xe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ht(w){var j=this.nativeEvent;return j.getModifierState?j.getModifierState(w):(w=At[w])?!!j[w]:!1}function cr(){return Ht}var Cr=q({},nu,{key:function(w){if(w.key){var j=Xe[w.key]||w.key;if(j!=="Unidentified")return j}return w.type==="keypress"?(w=Eo(w),w===13?"Enter":String.fromCharCode(w)):w.type==="keydown"||w.type==="keyup"?mt[w.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cr,charCode:function(w){return w.type==="keypress"?Eo(w):0},keyCode:function(w){return w.type==="keydown"||w.type==="keyup"?w.keyCode:0},which:function(w){return w.type==="keypress"?Eo(w):w.type==="keydown"||w.type==="keyup"?w.keyCode:0}}),Kr=Ma(Cr),Gr=q({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),on=Ma(Gr),ra=q({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cr}),da=Ma(ra),Sa=q({},fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),bi=Ma(Sa),za=q({},pc,{deltaX:function(w){return"deltaX"in w?w.deltaX:"wheelDeltaX"in w?-w.wheelDeltaX:0},deltaY:function(w){return"deltaY"in w?w.deltaY:"wheelDeltaY"in w?-w.wheelDeltaY:"wheelDelta"in w?-w.wheelDelta:0},deltaZ:0,deltaMode:0}),Ao=Ma(za),Ps=[9,13,27,32],Zs=o&&"CompositionEvent"in window,gc=null;o&&"documentMode"in document&&(gc=document.documentMode);var Rf=o&&"TextEvent"in window&&!gc,yd=o&&(!Zs||gc&&8<gc&&11>=gc),iu=" ",vd=!1;function bd(w,j){switch(w){case"keyup":return Ps.indexOf(j.keyCode)!==-1;case"keydown":return j.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function su(w){return w=w.detail,typeof w=="object"&&"data"in w?w.data:null}var fa=!1;function xd(w,j){switch(w){case"compositionend":return su(j);case"keypress":return j.which!==32?null:(vd=!0,iu);case"textInput":return w=j.data,w===iu&&vd?null:w;default:return null}}function wd(w,j){if(fa)return w==="compositionend"||!Zs&&bd(w,j)?(w=a0(),Js=Ys=ko=null,fa=!1,w):null;switch(w){case"paste":return null;case"keypress":if(!(j.ctrlKey||j.altKey||j.metaKey)||j.ctrlKey&&j.altKey){if(j.char&&1<j.char.length)return j.char;if(j.which)return String.fromCharCode(j.which)}return null;case"compositionend":return yd&&j.locale!=="ko"?null:j.data;default:return null}}var _d={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(w){var j=w&&w.nodeName&&w.nodeName.toLowerCase();return j==="input"?!!_d[w.type]:j==="textarea"}function Ri(w,j,W,J){Zt(J),j=c0(j,"onChange"),0<j.length&&(W=new hc("onChange","change",null,W,J),w.push({event:W,listeners:j}))}var ou=null,Nl=null;function s0(w){$f(w,0)}function Fi(w){var j=gu(w);if(se(j))return w}function Nd(w,j){if(w==="change")return j}var Ff=!1;if(o){var jd;if(o){var Go="oninput"in document;if(!Go){var yc=document.createElement("div");yc.setAttribute("oninput","return;"),Go=typeof yc.oninput=="function"}jd=Go}else jd=!1;Ff=jd&&(!document.documentMode||9<document.documentMode)}function Di(){ou&&(ou.detachEvent("onpropertychange",xi),Nl=ou=null)}function xi(w){if(w.propertyName==="value"&&Fi(Nl)){var j=[];Ri(j,Nl,w,dr(w)),et(s0,j)}}function vc(w,j,W){w==="focusin"?(Di(),ou=j,Nl=W,ou.attachEvent("onpropertychange",xi)):w==="focusout"&&Di()}function jl(w){if(w==="selectionchange"||w==="keyup"||w==="keydown")return Fi(Nl)}function kl(w,j){if(w==="click")return Fi(j)}function kd(w,j){if(w==="input"||w==="change")return Fi(j)}function El(w,j){return w===j&&(w!==0||1/w===1/j)||w!==w&&j!==j}var gn=typeof Object.is=="function"?Object.is:El;function Al(w,j){if(gn(w,j))return!0;if(typeof w!="object"||w===null||typeof j!="object"||j===null)return!1;var W=Object.keys(w),J=Object.keys(j);if(W.length!==J.length)return!1;for(J=0;J<W.length;J++){var ne=W[J];if(!l.call(j,ne)||!gn(w[ne],j[ne]))return!1}return!0}function wi(w){for(;w&&w.firstChild;)w=w.firstChild;return w}function Os(w,j){var W=wi(w);w=0;for(var J;W;){if(W.nodeType===3){if(J=w+W.textContent.length,w<=j&&J>=j)return{node:W,offset:j-w};w=J}e:{for(;W;){if(W.nextSibling){W=W.nextSibling;break e}W=W.parentNode}W=void 0}W=wi(W)}}function lu(w,j){return w&&j?w===j?!0:w&&w.nodeType===3?!1:j&&j.nodeType===3?lu(w,j.parentNode):"contains"in w?w.contains(j):w.compareDocumentPosition?!!(w.compareDocumentPosition(j)&16):!1:!1}function Df(){for(var w=window,j=ce();j instanceof w.HTMLIFrameElement;){try{var W=typeof j.contentWindow.location.href=="string"}catch{W=!1}if(W)w=j.contentWindow;else break;j=ce(w.document)}return j}function cu(w){var j=w&&w.nodeName&&w.nodeName.toLowerCase();return j&&(j==="input"&&(w.type==="text"||w.type==="search"||w.type==="tel"||w.type==="url"||w.type==="password")||j==="textarea"||w.contentEditable==="true")}function uu(w){var j=Df(),W=w.focusedElem,J=w.selectionRange;if(j!==W&&W&&W.ownerDocument&&lu(W.ownerDocument.documentElement,W)){if(J!==null&&cu(W)){if(j=J.start,w=J.end,w===void 0&&(w=j),"selectionStart"in W)W.selectionStart=j,W.selectionEnd=Math.min(w,W.value.length);else if(w=(j=W.ownerDocument||document)&&j.defaultView||window,w.getSelection){w=w.getSelection();var ne=W.textContent.length,de=Math.min(J.start,ne);J=J.end===void 0?de:Math.min(J.end,ne),!w.extend&&de>J&&(ne=J,J=de,de=ne),ne=Os(W,de);var _e=Os(W,J);ne&&_e&&(w.rangeCount!==1||w.anchorNode!==ne.node||w.anchorOffset!==ne.offset||w.focusNode!==_e.node||w.focusOffset!==_e.offset)&&(j=j.createRange(),j.setStart(ne.node,ne.offset),w.removeAllRanges(),de>J?(w.addRange(j),w.extend(_e.node,_e.offset)):(j.setEnd(_e.node,_e.offset),w.addRange(j)))}}for(j=[],w=W;w=w.parentNode;)w.nodeType===1&&j.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<j.length;W++)w=j[W],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}var du=o&&"documentMode"in document&&11>=document.documentMode,Is=null,Tl=null,Ko=null,Cl=!1;function Pl(w,j,W){var J=W.window===W?W.document:W.nodeType===9?W:W.ownerDocument;Cl||Is==null||Is!==ce(J)||(J=Is,"selectionStart"in J&&cu(J)?J={start:J.selectionStart,end:J.selectionEnd}:(J=(J.ownerDocument&&J.ownerDocument.defaultView||window).getSelection(),J={anchorNode:J.anchorNode,anchorOffset:J.anchorOffset,focusNode:J.focusNode,focusOffset:J.focusOffset}),Ko&&Al(Ko,J)||(Ko=J,J=c0(Tl,"onSelect"),0<J.length&&(j=new hc("onSelect","select",null,j,W),w.push({event:j,listeners:J}),j.target=Is)))}function bc(w,j){var W={};return W[w.toLowerCase()]=j.toLowerCase(),W["Webkit"+w]="webkit"+j,W["Moz"+w]="moz"+j,W}var ni={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},as={},Rn={};o&&(Rn=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Sn(w){if(as[w])return as[w];if(!ni[w])return w;var j=ni[w],W;for(W in j)if(j.hasOwnProperty(W)&&W in Rn)return as[w]=j[W];return w}var ha=Sn("animationend"),Na=Sn("animationiteration"),Xo=Sn("animationstart"),Ed=Sn("transitionend"),fu=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yo(w,j){fu.set(w,j),i(j,[w])}for(var Ad=0;Ad<Lf.length;Ad++){var Li=Lf[Ad],Qs=Li.toLowerCase(),o0=Li[0].toUpperCase()+Li.slice(1);Yo(Qs,"on"+o0)}Yo(ha,"onAnimationEnd"),Yo(Na,"onAnimationIteration"),Yo(Xo,"onAnimationStart"),Yo("dblclick","onDoubleClick"),Yo("focusin","onFocus"),Yo("focusout","onBlur"),Yo(Ed,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zy=new Set("cancel close invalid load scroll toggle".split(" ").concat(xc));function Bf(w,j,W){var J=w.type||"unknown-event";w.currentTarget=W,ke(J,j,void 0,w),w.currentTarget=null}function $f(w,j){j=(j&4)!==0;for(var W=0;W<w.length;W++){var J=w[W],ne=J.event;J=J.listeners;e:{var de=void 0;if(j)for(var _e=J.length-1;0<=_e;_e--){var ze=J[_e],Ze=ze.instance,Nt=ze.currentTarget;if(ze=ze.listener,Ze!==de&&ne.isPropagationStopped())break e;Bf(ne,ze,Nt),de=Ze}else for(_e=0;_e<J.length;_e++){if(ze=J[_e],Ze=ze.instance,Nt=ze.currentTarget,ze=ze.listener,Ze!==de&&ne.isPropagationStopped())break e;Bf(ne,ze,Nt),de=Ze}}}if(he)throw w=xe,he=!1,xe=null,w}function Fn(w,j){var W=j[ss];W===void 0&&(W=j[ss]=new Set);var J=w+"__bubble";W.has(J)||(Uf(j,w,2,!1),W.add(J))}function l0(w,j,W){var J=0;j&&(J|=4),Uf(W,w,J,j)}var Td="_reactListening"+Math.random().toString(36).slice(2);function hu(w){if(!w[Td]){w[Td]=!0,n.forEach(function(W){W!=="selectionchange"&&(Zy.has(W)||l0(W,!1,w),l0(W,!0,w))});var j=w.nodeType===9?w:w.ownerDocument;j===null||j[Td]||(j[Td]=!0,l0("selectionchange",!1,j))}}function Uf(w,j,W,J){switch(Pf(j)){case 1:var ne=tu;break;case 4:ne=Cf;break;default:ne=dc}W=ne.bind(null,j,W,w),ne=void 0,!kt||j!=="touchstart"&&j!=="touchmove"&&j!=="wheel"||(ne=!0),J?ne!==void 0?w.addEventListener(j,W,{capture:!0,passive:ne}):w.addEventListener(j,W,!0):ne!==void 0?w.addEventListener(j,W,{passive:ne}):w.addEventListener(j,W,!1)}function qf(w,j,W,J,ne){var de=J;if((j&1)===0&&(j&2)===0&&J!==null)e:for(;;){if(J===null)return;var _e=J.tag;if(_e===3||_e===4){var ze=J.stateNode.containerInfo;if(ze===ne||ze.nodeType===8&&ze.parentNode===ne)break;if(_e===4)for(_e=J.return;_e!==null;){var Ze=_e.tag;if((Ze===3||Ze===4)&&(Ze=_e.stateNode.containerInfo,Ze===ne||Ze.nodeType===8&&Ze.parentNode===ne))return;_e=_e.return}for(;ze!==null;){if(_e=wc(ze),_e===null)return;if(Ze=_e.tag,Ze===5||Ze===6){J=de=_e;continue e}ze=ze.parentNode}}J=J.return}et(function(){var Nt=de,Gt=dr(W),Jt=[];e:{var Vt=fu.get(w);if(Vt!==void 0){var hr=hc,wr=w;switch(w){case"keypress":if(Eo(W)===0)break e;case"keydown":case"keyup":hr=Kr;break;case"focusin":wr="focus",hr=Sl;break;case"focusout":wr="blur",hr=Sl;break;case"beforeblur":case"afterblur":hr=Sl;break;case"click":if(W.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":hr=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":hr=Nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":hr=da;break;case ha:case Na:case Xo:hr=mc;break;case Ed:hr=bi;break;case"scroll":hr=Of;break;case"wheel":hr=Ao;break;case"copy":case"cut":case"paste":hr=re;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":hr=on}var Nr=(j&4)!==0,La=!Nr&&w==="scroll",bt=Nr?Vt!==null?Vt+"Capture":null:Vt;Nr=[];for(var at=Nt,_t;at!==null;){_t=at;var nr=_t.stateNode;if(_t.tag===5&&nr!==null&&(_t=nr,bt!==null&&(nr=ht(at,bt),nr!=null&&Nr.push(zf(at,nr,_t)))),La)break;at=at.return}0<Nr.length&&(Vt=new hr(Vt,wr,null,W,Gt),Jt.push({event:Vt,listeners:Nr}))}}if((j&7)===0){e:{if(Vt=w==="mouseover"||w==="pointerover",hr=w==="mouseout"||w==="pointerout",Vt&&W!==Bt&&(wr=W.relatedTarget||W.fromElement)&&(wc(wr)||wr[_i]))break e;if((hr||Vt)&&(Vt=Gt.window===Gt?Gt:(Vt=Gt.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,hr?(wr=W.relatedTarget||W.toElement,hr=Nt,wr=wr?wc(wr):null,wr!==null&&(La=Te(wr),wr!==La||wr.tag!==5&&wr.tag!==6)&&(wr=null)):(hr=null,wr=Nt),hr!==wr)){if(Nr=md,nr="onMouseLeave",bt="onMouseEnter",at="mouse",(w==="pointerout"||w==="pointerover")&&(Nr=on,nr="onPointerLeave",bt="onPointerEnter",at="pointer"),La=hr==null?Vt:gu(hr),_t=wr==null?Vt:gu(wr),Vt=new Nr(nr,at+"leave",hr,W,Gt),Vt.target=La,Vt.relatedTarget=_t,nr=null,wc(Gt)===Nt&&(Nr=new Nr(bt,at+"enter",wr,W,Gt),Nr.target=_t,Nr.relatedTarget=La,nr=Nr),La=nr,hr&&wr)t:{for(Nr=hr,bt=wr,at=0,_t=Nr;_t;_t=pu(_t))at++;for(_t=0,nr=bt;nr;nr=pu(nr))_t++;for(;0<at-_t;)Nr=pu(Nr),at--;for(;0<_t-at;)bt=pu(bt),_t--;for(;at--;){if(Nr===bt||bt!==null&&Nr===bt.alternate)break t;Nr=pu(Nr),bt=pu(bt)}Nr=null}else Nr=null;hr!==null&&Qy(Jt,Vt,hr,Nr,!1),wr!==null&&La!==null&&Qy(Jt,La,wr,Nr,!0)}}e:{if(Vt=Nt?gu(Nt):window,hr=Vt.nodeName&&Vt.nodeName.toLowerCase(),hr==="select"||hr==="input"&&Vt.type==="file")var kr=Nd;else if(Sd(Vt))if(Ff)kr=kd;else{kr=jl;var Dr=vc}else(hr=Vt.nodeName)&&hr.toLowerCase()==="input"&&(Vt.type==="checkbox"||Vt.type==="radio")&&(kr=kl);if(kr&&(kr=kr(w,Nt))){Ri(Jt,kr,W,Gt);break e}Dr&&Dr(w,Vt,Nt),w==="focusout"&&(Dr=Vt._wrapperState)&&Dr.controlled&&Vt.type==="number"&&be(Vt,"number",Vt.value)}switch(Dr=Nt?gu(Nt):window,w){case"focusin":(Sd(Dr)||Dr.contentEditable==="true")&&(Is=Dr,Tl=Nt,Ko=null);break;case"focusout":Ko=Tl=Is=null;break;case"mousedown":Cl=!0;break;case"contextmenu":case"mouseup":case"dragend":Cl=!1,Pl(Jt,W,Gt);break;case"selectionchange":if(du)break;case"keydown":case"keyup":Pl(Jt,W,Gt)}var Lr;if(Zs)e:{switch(w){case"compositionstart":var Vr="onCompositionStart";break e;case"compositionend":Vr="onCompositionEnd";break e;case"compositionupdate":Vr="onCompositionUpdate";break e}Vr=void 0}else fa?bd(w,W)&&(Vr="onCompositionEnd"):w==="keydown"&&W.keyCode===229&&(Vr="onCompositionStart");Vr&&(yd&&W.locale!=="ko"&&(fa||Vr!=="onCompositionStart"?Vr==="onCompositionEnd"&&fa&&(Lr=a0()):(ko=Gt,Ys="value"in ko?ko.value:ko.textContent,fa=!0)),Dr=c0(Nt,Vr),0<Dr.length&&(Vr=new $e(Vr,w,null,W,Gt),Jt.push({event:Vr,listeners:Dr}),Lr?Vr.data=Lr:(Lr=su(W),Lr!==null&&(Vr.data=Lr)))),(Lr=Rf?xd(w,W):wd(w,W))&&(Nt=c0(Nt,"onBeforeInput"),0<Nt.length&&(Gt=new $e("onBeforeInput","beforeinput",null,W,Gt),Jt.push({event:Gt,listeners:Nt}),Gt.data=Lr))}$f(Jt,j)})}function zf(w,j,W){return{instance:w,listener:j,currentTarget:W}}function c0(w,j){for(var W=j+"Capture",J=[];w!==null;){var ne=w,de=ne.stateNode;ne.tag===5&&de!==null&&(ne=de,de=ht(w,W),de!=null&&J.unshift(zf(w,de,ne)),de=ht(w,j),de!=null&&J.push(zf(w,de,ne))),w=w.return}return J}function pu(w){if(w===null)return null;do w=w.return;while(w&&w.tag!==5);return w||null}function Qy(w,j,W,J,ne){for(var de=j._reactName,_e=[];W!==null&&W!==J;){var ze=W,Ze=ze.alternate,Nt=ze.stateNode;if(Ze!==null&&Ze===J)break;ze.tag===5&&Nt!==null&&(ze=Nt,ne?(Ze=ht(W,de),Ze!=null&&_e.unshift(zf(W,Ze,ze))):ne||(Ze=ht(W,de),Ze!=null&&_e.push(zf(W,Ze,ze)))),W=W.return}_e.length!==0&&w.push({event:j,listeners:_e})}var j2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function e1(w){return(typeof w=="string"?w:""+w).replace(j2,`
`).replace(k2,"")}function u0(w,j,W){if(j=e1(j),e1(w)!==j&&W)throw Error(e(425))}function Cd(){}var Wf=null,mu=null;function jm(w,j){return w==="textarea"||w==="noscript"||typeof j.children=="string"||typeof j.children=="number"||typeof j.dangerouslySetInnerHTML=="object"&&j.dangerouslySetInnerHTML!==null&&j.dangerouslySetInnerHTML.__html!=null}var km=typeof setTimeout=="function"?setTimeout:void 0,t1=typeof clearTimeout=="function"?clearTimeout:void 0,r1=typeof Promise=="function"?Promise:void 0,E2=typeof queueMicrotask=="function"?queueMicrotask:typeof r1<"u"?function(w){return r1.resolve(null).then(w).catch(A2)}:km;function A2(w){setTimeout(function(){throw w})}function Em(w,j){var W=j,J=0;do{var ne=W.nextSibling;if(w.removeChild(W),ne&&ne.nodeType===8)if(W=ne.data,W==="/$"){if(J===0){w.removeChild(ne),jo(j);return}J--}else W!=="$"&&W!=="$?"&&W!=="$!"||J++;W=ne}while(W);jo(j)}function Bi(w){for(;w!=null;w=w.nextSibling){var j=w.nodeType;if(j===1||j===3)break;if(j===8){if(j=w.data,j==="$"||j==="$!"||j==="$?")break;if(j==="/$")return null}}return w}function eo(w){w=w.previousSibling;for(var j=0;w;){if(w.nodeType===8){var W=w.data;if(W==="$"||W==="$!"||W==="$?"){if(j===0)return w;j--}else W==="/$"&&j++}w=w.previousSibling}return null}var is=Math.random().toString(36).slice(2),Jo="__reactFiber$"+is,Pd="__reactProps$"+is,_i="__reactContainer$"+is,ss="__reactEvents$"+is,T2="__reactListeners$"+is,C2="__reactHandles$"+is;function wc(w){var j=w[Jo];if(j)return j;for(var W=w.parentNode;W;){if(j=W[_i]||W[Jo]){if(W=j.alternate,j.child!==null||W!==null&&W.child!==null)for(w=eo(w);w!==null;){if(W=w[Jo])return W;w=eo(w)}return j}w=W,W=w.parentNode}return null}function Od(w){return w=w[Jo]||w[_i],!w||w.tag!==5&&w.tag!==6&&w.tag!==13&&w.tag!==3?null:w}function gu(w){if(w.tag===5||w.tag===6)return w.stateNode;throw Error(e(33))}function Hf(w){return w[Pd]||null}var Am=[],Ol=-1;function To(w){return{current:w}}function Nn(w){0>Ol||(w.current=Am[Ol],Am[Ol]=null,Ol--)}function Tn(w,j){Ol++,Am[Ol]=w.current,w.current=j}var _c={},ai=To(_c),os=To(!1),yu=_c;function Id(w,j){var W=w.type.contextTypes;if(!W)return _c;var J=w.stateNode;if(J&&J.__reactInternalMemoizedUnmaskedChildContext===j)return J.__reactInternalMemoizedMaskedChildContext;var ne={},de;for(de in W)ne[de]=j[de];return J&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=j,w.__reactInternalMemoizedMaskedChildContext=ne),ne}function ls(w){return w=w.childContextTypes,w!=null}function d0(){Nn(os),Nn(ai)}function n1(w,j,W){if(ai.current!==_c)throw Error(e(168));Tn(ai,j),Tn(os,W)}function Tm(w,j,W){var J=w.stateNode;if(j=j.childContextTypes,typeof J.getChildContext!="function")return W;J=J.getChildContext();for(var ne in J)if(!(ne in j))throw Error(e(108,ee(w)||"Unknown",ne));return q({},W,J)}function vu(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||_c,yu=ai.current,Tn(ai,w),Tn(os,os.current),!0}function a1(w,j,W){var J=w.stateNode;if(!J)throw Error(e(169));W?(w=Tm(w,j,yu),J.__reactInternalMemoizedMergedChildContext=w,Nn(os),Nn(ai),Tn(ai,w)):Nn(os),Tn(os,W)}var Il=null,Vf=!1,G=!1;function Q(w){Il===null?Il=[w]:Il.push(w)}function ae(w){Vf=!0,Q(w)}function fe(){if(!G&&Il!==null){G=!0;var w=0,j=Hr;try{var W=Il;for(Hr=1;w<W.length;w++){var J=W[w];do J=J(!0);while(J!==null)}Il=null,Vf=!1}catch(ne){throw Il!==null&&(Il=Il.slice(w+1)),Mt(Et,fe),ne}finally{Hr=j,G=!1}}return null}var ge=[],we=0,Ne=null,Ae=0,Pe=[],Fe=0,Ye=null,gt=1,yt="";function dt(w,j){ge[we++]=Ae,ge[we++]=Ne,Ne=w,Ae=j}function Lt(w,j,W){Pe[Fe++]=gt,Pe[Fe++]=yt,Pe[Fe++]=Ye,Ye=w;var J=gt;w=yt;var ne=32-Pr(J)-1;J&=~(1<<ne),W+=1;var de=32-Pr(j)+ne;if(30<de){var _e=ne-ne%5;de=(J&(1<<_e)-1).toString(32),J>>=_e,ne-=_e,gt=1<<32-Pr(j)+ne|W<<ne|J,yt=de+w}else gt=1<<de|W<<ne|J,yt=w}function jt(w){w.return!==null&&(dt(w,1),Lt(w,1,0))}function tt(w){for(;w===Ne;)Ne=ge[--we],ge[we]=null,Ae=ge[--we],ge[we]=null;for(;w===Ye;)Ye=Pe[--Fe],Pe[Fe]=null,yt=Pe[--Fe],Pe[Fe]=null,gt=Pe[--Fe],Pe[Fe]=null}var rt=null,Ct=null,Tt=!1,Ot=null;function ur(w,j){var W=nl(5,null,null,0);W.elementType="DELETED",W.stateNode=j,W.return=w,j=w.deletions,j===null?(w.deletions=[W],w.flags|=16):j.push(W)}function sr(w,j){switch(w.tag){case 5:var W=w.type;return j=j.nodeType!==1||W.toLowerCase()!==j.nodeName.toLowerCase()?null:j,j!==null?(w.stateNode=j,rt=w,Ct=Bi(j.firstChild),!0):!1;case 6:return j=w.pendingProps===""||j.nodeType!==3?null:j,j!==null?(w.stateNode=j,rt=w,Ct=null,!0):!1;case 13:return j=j.nodeType!==8?null:j,j!==null?(W=Ye!==null?{id:gt,overflow:yt}:null,w.memoizedState={dehydrated:j,treeContext:W,retryLane:1073741824},W=nl(18,null,null,0),W.stateNode=j,W.return=w,w.child=W,rt=w,Ct=null,!0):!1;default:return!1}}function Or(w){return(w.mode&1)!==0&&(w.flags&128)===0}function or(w){if(Tt){var j=Ct;if(j){var W=j;if(!sr(w,j)){if(Or(w))throw Error(e(418));j=Bi(W.nextSibling);var J=rt;j&&sr(w,j)?ur(J,W):(w.flags=w.flags&-4097|2,Tt=!1,rt=w)}}else{if(Or(w))throw Error(e(418));w.flags=w.flags&-4097|2,Tt=!1,rt=w}}}function fn(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;rt=w}function hn(w){if(w!==rt)return!1;if(!Tt)return fn(w),Tt=!0,!1;var j;if((j=w.tag!==3)&&!(j=w.tag!==5)&&(j=w.type,j=j!=="head"&&j!=="body"&&!jm(w.type,w.memoizedProps)),j&&(j=Ct)){if(Or(w))throw un(),Error(e(418));for(;j;)ur(w,j),j=Bi(j.nextSibling)}if(fn(w),w.tag===13){if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(e(317));e:{for(w=w.nextSibling,j=0;w;){if(w.nodeType===8){var W=w.data;if(W==="/$"){if(j===0){Ct=Bi(w.nextSibling);break e}j--}else W!=="$"&&W!=="$!"&&W!=="$?"||j++}w=w.nextSibling}Ct=null}}else Ct=rt?Bi(w.stateNode.nextSibling):null;return!0}function un(){for(var w=Ct;w;)w=Bi(w.nextSibling)}function Yr(){Ct=rt=null,Tt=!1}function jn(w){Ot===null?Ot=[w]:Ot.push(w)}var Cn=S.ReactCurrentBatchConfig;function Wr(w,j,W){if(w=W.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(W._owner){if(W=W._owner,W){if(W.tag!==1)throw Error(e(309));var J=W.stateNode}if(!J)throw Error(e(147,w));var ne=J,de=""+w;return j!==null&&j.ref!==null&&typeof j.ref=="function"&&j.ref._stringRef===de?j.ref:(j=function(_e){var ze=ne.refs;_e===null?delete ze[de]:ze[de]=_e},j._stringRef=de,j)}if(typeof w!="string")throw Error(e(284));if(!W._owner)throw Error(e(290,w))}return w}function na(w,j){throw w=Object.prototype.toString.call(j),Error(e(31,w==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":w))}function $i(w){var j=w._init;return j(w._payload)}function xa(w){function j(bt,at){if(w){var _t=bt.deletions;_t===null?(bt.deletions=[at],bt.flags|=16):_t.push(at)}}function W(bt,at){if(!w)return null;for(;at!==null;)j(bt,at),at=at.sibling;return null}function J(bt,at){for(bt=new Map;at!==null;)at.key!==null?bt.set(at.key,at):bt.set(at.index,at),at=at.sibling;return bt}function ne(bt,at){return bt=Hd(bt,at),bt.index=0,bt.sibling=null,bt}function de(bt,at,_t){return bt.index=_t,w?(_t=bt.alternate,_t!==null?(_t=_t.index,_t<at?(bt.flags|=2,at):_t):(bt.flags|=2,at)):(bt.flags|=1048576,at)}function _e(bt){return w&&bt.alternate===null&&(bt.flags|=2),bt}function ze(bt,at,_t,nr){return at===null||at.tag!==6?(at=iw(_t,bt.mode,nr),at.return=bt,at):(at=ne(at,_t),at.return=bt,at)}function Ze(bt,at,_t,nr){var kr=_t.type;return kr===A?Gt(bt,at,_t.props.children,nr,_t.key):at!==null&&(at.elementType===kr||typeof kr=="object"&&kr!==null&&kr.$$typeof===N&&$i(kr)===at.type)?(nr=ne(at,_t.props),nr.ref=Wr(bt,at,_t),nr.return=bt,nr):(nr=N1(_t.type,_t.key,_t.props,null,bt.mode,nr),nr.ref=Wr(bt,at,_t),nr.return=bt,nr)}function Nt(bt,at,_t,nr){return at===null||at.tag!==4||at.stateNode.containerInfo!==_t.containerInfo||at.stateNode.implementation!==_t.implementation?(at=sw(_t,bt.mode,nr),at.return=bt,at):(at=ne(at,_t.children||[]),at.return=bt,at)}function Gt(bt,at,_t,nr,kr){return at===null||at.tag!==7?(at=eh(_t,bt.mode,nr,kr),at.return=bt,at):(at=ne(at,_t),at.return=bt,at)}function Jt(bt,at,_t){if(typeof at=="string"&&at!==""||typeof at=="number")return at=iw(""+at,bt.mode,_t),at.return=bt,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case _:return _t=N1(at.type,at.key,at.props,null,bt.mode,_t),_t.ref=Wr(bt,null,at),_t.return=bt,_t;case I:return at=sw(at,bt.mode,_t),at.return=bt,at;case N:var nr=at._init;return Jt(bt,nr(at._payload),_t)}if(Ie(at)||P(at))return at=eh(at,bt.mode,_t,null),at.return=bt,at;na(bt,at)}return null}function Vt(bt,at,_t,nr){var kr=at!==null?at.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number")return kr!==null?null:ze(bt,at,""+_t,nr);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case _:return _t.key===kr?Ze(bt,at,_t,nr):null;case I:return _t.key===kr?Nt(bt,at,_t,nr):null;case N:return kr=_t._init,Vt(bt,at,kr(_t._payload),nr)}if(Ie(_t)||P(_t))return kr!==null?null:Gt(bt,at,_t,nr,null);na(bt,_t)}return null}function hr(bt,at,_t,nr,kr){if(typeof nr=="string"&&nr!==""||typeof nr=="number")return bt=bt.get(_t)||null,ze(at,bt,""+nr,kr);if(typeof nr=="object"&&nr!==null){switch(nr.$$typeof){case _:return bt=bt.get(nr.key===null?_t:nr.key)||null,Ze(at,bt,nr,kr);case I:return bt=bt.get(nr.key===null?_t:nr.key)||null,Nt(at,bt,nr,kr);case N:var Dr=nr._init;return hr(bt,at,_t,Dr(nr._payload),kr)}if(Ie(nr)||P(nr))return bt=bt.get(_t)||null,Gt(at,bt,nr,kr,null);na(at,nr)}return null}function wr(bt,at,_t,nr){for(var kr=null,Dr=null,Lr=at,Vr=at=0,ki=null;Lr!==null&&Vr<_t.length;Vr++){Lr.index>Vr?(ki=Lr,Lr=null):ki=Lr.sibling;var xn=Vt(bt,Lr,_t[Vr],nr);if(xn===null){Lr===null&&(Lr=ki);break}w&&Lr&&xn.alternate===null&&j(bt,Lr),at=de(xn,at,Vr),Dr===null?kr=xn:Dr.sibling=xn,Dr=xn,Lr=ki}if(Vr===_t.length)return W(bt,Lr),Tt&&dt(bt,Vr),kr;if(Lr===null){for(;Vr<_t.length;Vr++)Lr=Jt(bt,_t[Vr],nr),Lr!==null&&(at=de(Lr,at,Vr),Dr===null?kr=Lr:Dr.sibling=Lr,Dr=Lr);return Tt&&dt(bt,Vr),kr}for(Lr=J(bt,Lr);Vr<_t.length;Vr++)ki=hr(Lr,bt,Vr,_t[Vr],nr),ki!==null&&(w&&ki.alternate!==null&&Lr.delete(ki.key===null?Vr:ki.key),at=de(ki,at,Vr),Dr===null?kr=ki:Dr.sibling=ki,Dr=ki);return w&&Lr.forEach(function(Vd){return j(bt,Vd)}),Tt&&dt(bt,Vr),kr}function Nr(bt,at,_t,nr){var kr=P(_t);if(typeof kr!="function")throw Error(e(150));if(_t=kr.call(_t),_t==null)throw Error(e(151));for(var Dr=kr=null,Lr=at,Vr=at=0,ki=null,xn=_t.next();Lr!==null&&!xn.done;Vr++,xn=_t.next()){Lr.index>Vr?(ki=Lr,Lr=null):ki=Lr.sibling;var Vd=Vt(bt,Lr,xn.value,nr);if(Vd===null){Lr===null&&(Lr=ki);break}w&&Lr&&Vd.alternate===null&&j(bt,Lr),at=de(Vd,at,Vr),Dr===null?kr=Vd:Dr.sibling=Vd,Dr=Vd,Lr=ki}if(xn.done)return W(bt,Lr),Tt&&dt(bt,Vr),kr;if(Lr===null){for(;!xn.done;Vr++,xn=_t.next())xn=Jt(bt,xn.value,nr),xn!==null&&(at=de(xn,at,Vr),Dr===null?kr=xn:Dr.sibling=xn,Dr=xn);return Tt&&dt(bt,Vr),kr}for(Lr=J(bt,Lr);!xn.done;Vr++,xn=_t.next())xn=hr(Lr,bt,Vr,xn.value,nr),xn!==null&&(w&&xn.alternate!==null&&Lr.delete(xn.key===null?Vr:xn.key),at=de(xn,at,Vr),Dr===null?kr=xn:Dr.sibling=xn,Dr=xn);return w&&Lr.forEach(function(Vz){return j(bt,Vz)}),Tt&&dt(bt,Vr),kr}function La(bt,at,_t,nr){if(typeof _t=="object"&&_t!==null&&_t.type===A&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case _:e:{for(var kr=_t.key,Dr=at;Dr!==null;){if(Dr.key===kr){if(kr=_t.type,kr===A){if(Dr.tag===7){W(bt,Dr.sibling),at=ne(Dr,_t.props.children),at.return=bt,bt=at;break e}}else if(Dr.elementType===kr||typeof kr=="object"&&kr!==null&&kr.$$typeof===N&&$i(kr)===Dr.type){W(bt,Dr.sibling),at=ne(Dr,_t.props),at.ref=Wr(bt,Dr,_t),at.return=bt,bt=at;break e}W(bt,Dr);break}else j(bt,Dr);Dr=Dr.sibling}_t.type===A?(at=eh(_t.props.children,bt.mode,nr,_t.key),at.return=bt,bt=at):(nr=N1(_t.type,_t.key,_t.props,null,bt.mode,nr),nr.ref=Wr(bt,at,_t),nr.return=bt,bt=nr)}return _e(bt);case I:e:{for(Dr=_t.key;at!==null;){if(at.key===Dr)if(at.tag===4&&at.stateNode.containerInfo===_t.containerInfo&&at.stateNode.implementation===_t.implementation){W(bt,at.sibling),at=ne(at,_t.children||[]),at.return=bt,bt=at;break e}else{W(bt,at);break}else j(bt,at);at=at.sibling}at=sw(_t,bt.mode,nr),at.return=bt,bt=at}return _e(bt);case N:return Dr=_t._init,La(bt,at,Dr(_t._payload),nr)}if(Ie(_t))return wr(bt,at,_t,nr);if(P(_t))return Nr(bt,at,_t,nr);na(bt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"?(_t=""+_t,at!==null&&at.tag===6?(W(bt,at.sibling),at=ne(at,_t),at.return=bt,bt=at):(W(bt,at),at=iw(_t,bt.mode,nr),at.return=bt,bt=at),_e(bt)):W(bt,at)}return La}var Ra=xa(!0),vn=xa(!1),Si=To(null),Ni=null,aa=null,Fa=null;function ii(){Fa=aa=Ni=null}function cs(w){var j=Si.current;Nn(Si),w._currentValue=j}function to(w,j,W){for(;w!==null;){var J=w.alternate;if((w.childLanes&j)!==j?(w.childLanes|=j,J!==null&&(J.childLanes|=j)):J!==null&&(J.childLanes&j)!==j&&(J.childLanes|=j),w===W)break;w=w.return}}function ia(w,j){Ni=w,Fa=aa=null,w=w.dependencies,w!==null&&w.firstContext!==null&&((w.lanes&j)!==0&&(io=!0),w.firstContext=null)}function ja(w){var j=w._currentValue;if(Fa!==w)if(w={context:w,memoizedValue:j,next:null},aa===null){if(Ni===null)throw Error(e(308));aa=w,Ni.dependencies={lanes:0,firstContext:w}}else aa=aa.next=w;return j}var Ms=null;function Sc(w){Ms===null?Ms=[w]:Ms.push(w)}function Ml(w,j,W,J){var ne=j.interleaved;return ne===null?(W.next=W,Sc(j)):(W.next=ne.next,ne.next=W),j.interleaved=W,bn(w,J)}function bn(w,j){w.lanes|=j;var W=w.alternate;for(W!==null&&(W.lanes|=j),W=w,w=w.return;w!==null;)w.childLanes|=j,W=w.alternate,W!==null&&(W.childLanes|=j),W=w,w=w.return;return W.tag===3?W.stateNode:null}var Zo=!1;function f0(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cm(w,j){w=w.updateQueue,j.updateQueue===w&&(j.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function ro(w,j){return{eventTime:w,lane:j,tag:0,payload:null,callback:null,next:null}}function no(w,j,W){var J=w.updateQueue;if(J===null)return null;if(J=J.shared,(yn&2)!==0){var ne=J.pending;return ne===null?j.next=j:(j.next=ne.next,ne.next=j),J.pending=j,bn(w,W)}return ne=J.interleaved,ne===null?(j.next=j,Sc(J)):(j.next=ne.next,ne.next=j),J.interleaved=j,bn(w,W)}function bu(w,j,W){if(j=j.updateQueue,j!==null&&(j=j.shared,(W&4194240)!==0)){var J=j.lanes;J&=w.pendingLanes,W|=J,j.lanes=W,_o(w,W)}}function ao(w,j){var W=w.updateQueue,J=w.alternate;if(J!==null&&(J=J.updateQueue,W===J)){var ne=null,de=null;if(W=W.firstBaseUpdate,W!==null){do{var _e={eventTime:W.eventTime,lane:W.lane,tag:W.tag,payload:W.payload,callback:W.callback,next:null};de===null?ne=de=_e:de=de.next=_e,W=W.next}while(W!==null);de===null?ne=de=j:de=de.next=j}else ne=de=j;W={baseState:J.baseState,firstBaseUpdate:ne,lastBaseUpdate:de,shared:J.shared,effects:J.effects},w.updateQueue=W;return}w=W.lastBaseUpdate,w===null?W.firstBaseUpdate=j:w.next=j,W.lastBaseUpdate=j}function Rl(w,j,W,J){var ne=w.updateQueue;Zo=!1;var de=ne.firstBaseUpdate,_e=ne.lastBaseUpdate,ze=ne.shared.pending;if(ze!==null){ne.shared.pending=null;var Ze=ze,Nt=Ze.next;Ze.next=null,_e===null?de=Nt:_e.next=Nt,_e=Ze;var Gt=w.alternate;Gt!==null&&(Gt=Gt.updateQueue,ze=Gt.lastBaseUpdate,ze!==_e&&(ze===null?Gt.firstBaseUpdate=Nt:ze.next=Nt,Gt.lastBaseUpdate=Ze))}if(de!==null){var Jt=ne.baseState;_e=0,Gt=Nt=Ze=null,ze=de;do{var Vt=ze.lane,hr=ze.eventTime;if((J&Vt)===Vt){Gt!==null&&(Gt=Gt.next={eventTime:hr,lane:0,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null});e:{var wr=w,Nr=ze;switch(Vt=j,hr=W,Nr.tag){case 1:if(wr=Nr.payload,typeof wr=="function"){Jt=wr.call(hr,Jt,Vt);break e}Jt=wr;break e;case 3:wr.flags=wr.flags&-65537|128;case 0:if(wr=Nr.payload,Vt=typeof wr=="function"?wr.call(hr,Jt,Vt):wr,Vt==null)break e;Jt=q({},Jt,Vt);break e;case 2:Zo=!0}}ze.callback!==null&&ze.lane!==0&&(w.flags|=64,Vt=ne.effects,Vt===null?ne.effects=[ze]:Vt.push(ze))}else hr={eventTime:hr,lane:Vt,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null},Gt===null?(Nt=Gt=hr,Ze=Jt):Gt=Gt.next=hr,_e|=Vt;if(ze=ze.next,ze===null){if(ze=ne.shared.pending,ze===null)break;Vt=ze,ze=Vt.next,Vt.next=null,ne.lastBaseUpdate=Vt,ne.shared.pending=null}}while(!0);if(Gt===null&&(Ze=Jt),ne.baseState=Ze,ne.firstBaseUpdate=Nt,ne.lastBaseUpdate=Gt,j=ne.shared.interleaved,j!==null){ne=j;do _e|=ne.lane,ne=ne.next;while(ne!==j)}else de===null&&(ne.shared.lanes=0);Yf|=_e,w.lanes=_e,w.memoizedState=Jt}}function xu(w,j,W){if(w=j.effects,j.effects=null,w!==null)for(j=0;j<w.length;j++){var J=w[j],ne=J.callback;if(ne!==null){if(J.callback=null,J=W,typeof ne!="function")throw Error(e(191,ne));ne.call(J)}}}var Md={},Rs=To(Md),Rd=To(Md),Nc=To(Md);function Fl(w){if(w===Md)throw Error(e(174));return w}function Fd(w,j){switch(Tn(Nc,j),Tn(Rd,w),Tn(Rs,Md),w=j.nodeType,w){case 9:case 11:j=(j=j.documentElement)?j.namespaceURI:ft(null,"");break;default:w=w===8?j.parentNode:j,j=w.namespaceURI||null,w=w.tagName,j=ft(j,w)}Nn(Rs),Tn(Rs,j)}function Qo(){Nn(Rs),Nn(Rd),Nn(Nc)}function i1(w){Fl(Nc.current);var j=Fl(Rs.current),W=ft(j,w.type);j!==W&&(Tn(Rd,w),Tn(Rs,W))}function Pm(w){Rd.current===w&&(Nn(Rs),Nn(Rd))}var Vn=To(0);function Co(w){for(var j=w;j!==null;){if(j.tag===13){var W=j.memoizedState;if(W!==null&&(W=W.dehydrated,W===null||W.data==="$?"||W.data==="$!"))return j}else if(j.tag===19&&j.memoizedProps.revealOrder!==void 0){if((j.flags&128)!==0)return j}else if(j.child!==null){j.child.return=j,j=j.child;continue}if(j===w)break;for(;j.sibling===null;){if(j.return===null||j.return===w)return null;j=j.return}j.sibling.return=j.return,j=j.sibling}return null}var Om=[];function Im(){for(var w=0;w<Om.length;w++)Om[w]._workInProgressVersionPrimary=null;Om.length=0}var h0=S.ReactCurrentDispatcher,p0=S.ReactCurrentBatchConfig,el=0,Jn=null,ka=null,wa=null,Dd=!1,Dl=!1,Ld=0,P2=0;function Da(){throw Error(e(321))}function m0(w,j){if(j===null)return!1;for(var W=0;W<j.length&&W<w.length;W++)if(!gn(w[W],j[W]))return!1;return!0}function Gf(w,j,W,J,ne,de){if(el=de,Jn=j,j.memoizedState=null,j.updateQueue=null,j.lanes=0,h0.current=w===null||w.memoizedState===null?vz:bz,w=W(J,ne),Dl){de=0;do{if(Dl=!1,Ld=0,25<=de)throw Error(e(301));de+=1,wa=ka=null,j.updateQueue=null,h0.current=xz,w=W(J,ne)}while(Dl)}if(h0.current=u1,j=ka!==null&&ka.next!==null,el=0,wa=ka=Jn=null,Dd=!1,j)throw Error(e(300));return w}function tl(){var w=Ld!==0;return Ld=0,w}function Po(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wa===null?Jn.memoizedState=wa=w:wa=wa.next=w,wa}function Fs(){if(ka===null){var w=Jn.alternate;w=w!==null?w.memoizedState:null}else w=ka.next;var j=wa===null?Jn.memoizedState:wa.next;if(j!==null)wa=j,ka=w;else{if(w===null)throw Error(e(310));ka=w,w={memoizedState:ka.memoizedState,baseState:ka.baseState,baseQueue:ka.baseQueue,queue:ka.queue,next:null},wa===null?Jn.memoizedState=wa=w:wa=wa.next=w}return wa}function Kf(w,j){return typeof j=="function"?j(w):j}function g0(w){var j=Fs(),W=j.queue;if(W===null)throw Error(e(311));W.lastRenderedReducer=w;var J=ka,ne=J.baseQueue,de=W.pending;if(de!==null){if(ne!==null){var _e=ne.next;ne.next=de.next,de.next=_e}J.baseQueue=ne=de,W.pending=null}if(ne!==null){de=ne.next,J=J.baseState;var ze=_e=null,Ze=null,Nt=de;do{var Gt=Nt.lane;if((el&Gt)===Gt)Ze!==null&&(Ze=Ze.next={lane:0,action:Nt.action,hasEagerState:Nt.hasEagerState,eagerState:Nt.eagerState,next:null}),J=Nt.hasEagerState?Nt.eagerState:w(J,Nt.action);else{var Jt={lane:Gt,action:Nt.action,hasEagerState:Nt.hasEagerState,eagerState:Nt.eagerState,next:null};Ze===null?(ze=Ze=Jt,_e=J):Ze=Ze.next=Jt,Jn.lanes|=Gt,Yf|=Gt}Nt=Nt.next}while(Nt!==null&&Nt!==de);Ze===null?_e=J:Ze.next=ze,gn(J,j.memoizedState)||(io=!0),j.memoizedState=J,j.baseState=_e,j.baseQueue=Ze,W.lastRenderedState=J}if(w=W.interleaved,w!==null){ne=w;do de=ne.lane,Jn.lanes|=de,Yf|=de,ne=ne.next;while(ne!==w)}else ne===null&&(W.lanes=0);return[j.memoizedState,W.dispatch]}function jc(w){var j=Fs(),W=j.queue;if(W===null)throw Error(e(311));W.lastRenderedReducer=w;var J=W.dispatch,ne=W.pending,de=j.memoizedState;if(ne!==null){W.pending=null;var _e=ne=ne.next;do de=w(de,_e.action),_e=_e.next;while(_e!==ne);gn(de,j.memoizedState)||(io=!0),j.memoizedState=de,j.baseQueue===null&&(j.baseState=de),W.lastRenderedState=de}return[de,J]}function s1(){}function Mm(w,j){var W=Jn,J=Fs(),ne=j(),de=!gn(J.memoizedState,ne);if(de&&(J.memoizedState=ne,io=!0),J=J.queue,b0(l1.bind(null,W,J,w),[w]),J.getSnapshot!==j||de||wa!==null&&wa.memoizedState.tag&1){if(W.flags|=2048,Ds(9,Rm.bind(null,W,J,ne,j),void 0,null),ji===null)throw Error(e(349));(el&30)!==0||o1(W,j,ne)}return ne}function o1(w,j,W){w.flags|=16384,w={getSnapshot:j,value:W},j=Jn.updateQueue,j===null?(j={lastEffect:null,stores:null},Jn.updateQueue=j,j.stores=[w]):(W=j.stores,W===null?j.stores=[w]:W.push(w))}function Rm(w,j,W,J){j.value=W,j.getSnapshot=J,Bd(j)&&y0(w)}function l1(w,j,W){return W(function(){Bd(j)&&y0(w)})}function Bd(w){var j=w.getSnapshot;w=w.value;try{var W=j();return!gn(w,W)}catch{return!0}}function y0(w){var j=bn(w,1);j!==null&&ql(j,w,1,-1)}function Xf(w){var j=Po();return typeof w=="function"&&(w=w()),j.memoizedState=j.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:w},j.queue=w,w=w.dispatch=yz.bind(null,Jn,w),[j.memoizedState,w]}function Ds(w,j,W,J){return w={tag:w,create:j,destroy:W,deps:J,next:null},j=Jn.updateQueue,j===null?(j={lastEffect:null,stores:null},Jn.updateQueue=j,j.lastEffect=w.next=w):(W=j.lastEffect,W===null?j.lastEffect=w.next=w:(J=W.next,W.next=w,w.next=J,j.lastEffect=w)),w}function Ll(){return Fs().memoizedState}function Oo(w,j,W,J){var ne=Po();Jn.flags|=w,ne.memoizedState=Ds(1|j,W,void 0,J===void 0?null:J)}function wu(w,j,W,J){var ne=Fs();J=J===void 0?null:J;var de=void 0;if(ka!==null){var _e=ka.memoizedState;if(de=_e.destroy,J!==null&&m0(J,_e.deps)){ne.memoizedState=Ds(j,W,de,J);return}}Jn.flags|=w,ne.memoizedState=Ds(1|j,W,de,J)}function v0(w,j){return Oo(8390656,8,w,j)}function b0(w,j){return wu(2048,8,w,j)}function c1(w,j){return wu(4,2,w,j)}function x0(w,j){return wu(4,4,w,j)}function w0(w,j){if(typeof j=="function")return w=w(),j(w),function(){j(null)};if(j!=null)return w=w(),j.current=w,function(){j.current=null}}function Qj(w,j,W){return W=W!=null?W.concat([w]):null,wu(4,4,w0.bind(null,j,w),W)}function O2(){}function ek(w,j){var W=Fs();j=j===void 0?null:j;var J=W.memoizedState;return J!==null&&j!==null&&m0(j,J[1])?J[0]:(W.memoizedState=[w,j],w)}function tk(w,j){var W=Fs();j=j===void 0?null:j;var J=W.memoizedState;return J!==null&&j!==null&&m0(j,J[1])?J[0]:(w=w(),W.memoizedState=[w,j],w)}function rk(w,j,W){return(el&21)===0?(w.baseState&&(w.baseState=!1,io=!0),w.memoizedState=W):(gn(W,j)||(W=an(),Jn.lanes|=W,Yf|=W,w.baseState=!0),j)}function mz(w,j){var W=Hr;Hr=W!==0&&4>W?W:4,w(!0);var J=p0.transition;p0.transition={};try{w(!1),j()}finally{Hr=W,p0.transition=J}}function nk(){return Fs().memoizedState}function gz(w,j,W){var J=zd(w);if(W={lane:J,action:W,hasEagerState:!1,eagerState:null,next:null},ak(w))ik(j,W);else if(W=Ml(w,j,W,J),W!==null){var ne=Bs();ql(W,w,J,ne),sk(W,j,J)}}function yz(w,j,W){var J=zd(w),ne={lane:J,action:W,hasEagerState:!1,eagerState:null,next:null};if(ak(w))ik(j,ne);else{var de=w.alternate;if(w.lanes===0&&(de===null||de.lanes===0)&&(de=j.lastRenderedReducer,de!==null))try{var _e=j.lastRenderedState,ze=de(_e,W);if(ne.hasEagerState=!0,ne.eagerState=ze,gn(ze,_e)){var Ze=j.interleaved;Ze===null?(ne.next=ne,Sc(j)):(ne.next=Ze.next,Ze.next=ne),j.interleaved=ne;return}}catch{}finally{}W=Ml(w,j,ne,J),W!==null&&(ne=Bs(),ql(W,w,J,ne),sk(W,j,J))}}function ak(w){var j=w.alternate;return w===Jn||j!==null&&j===Jn}function ik(w,j){Dl=Dd=!0;var W=w.pending;W===null?j.next=j:(j.next=W.next,W.next=j),w.pending=j}function sk(w,j,W){if((W&4194240)!==0){var J=j.lanes;J&=w.pendingLanes,W|=J,j.lanes=W,_o(w,W)}}var u1={readContext:ja,useCallback:Da,useContext:Da,useEffect:Da,useImperativeHandle:Da,useInsertionEffect:Da,useLayoutEffect:Da,useMemo:Da,useReducer:Da,useRef:Da,useState:Da,useDebugValue:Da,useDeferredValue:Da,useTransition:Da,useMutableSource:Da,useSyncExternalStore:Da,useId:Da,unstable_isNewReconciler:!1},vz={readContext:ja,useCallback:function(w,j){return Po().memoizedState=[w,j===void 0?null:j],w},useContext:ja,useEffect:v0,useImperativeHandle:function(w,j,W){return W=W!=null?W.concat([w]):null,Oo(4194308,4,w0.bind(null,j,w),W)},useLayoutEffect:function(w,j){return Oo(4194308,4,w,j)},useInsertionEffect:function(w,j){return Oo(4,2,w,j)},useMemo:function(w,j){var W=Po();return j=j===void 0?null:j,w=w(),W.memoizedState=[w,j],w},useReducer:function(w,j,W){var J=Po();return j=W!==void 0?W(j):j,J.memoizedState=J.baseState=j,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:j},J.queue=w,w=w.dispatch=gz.bind(null,Jn,w),[J.memoizedState,w]},useRef:function(w){var j=Po();return w={current:w},j.memoizedState=w},useState:Xf,useDebugValue:O2,useDeferredValue:function(w){return Po().memoizedState=w},useTransition:function(){var w=Xf(!1),j=w[0];return w=mz.bind(null,w[1]),Po().memoizedState=w,[j,w]},useMutableSource:function(){},useSyncExternalStore:function(w,j,W){var J=Jn,ne=Po();if(Tt){if(W===void 0)throw Error(e(407));W=W()}else{if(W=j(),ji===null)throw Error(e(349));(el&30)!==0||o1(J,j,W)}ne.memoizedState=W;var de={value:W,getSnapshot:j};return ne.queue=de,v0(l1.bind(null,J,de,w),[w]),J.flags|=2048,Ds(9,Rm.bind(null,J,de,W,j),void 0,null),W},useId:function(){var w=Po(),j=ji.identifierPrefix;if(Tt){var W=yt,J=gt;W=(J&~(1<<32-Pr(J)-1)).toString(32)+W,j=":"+j+"R"+W,W=Ld++,0<W&&(j+="H"+W.toString(32)),j+=":"}else W=P2++,j=":"+j+"r"+W.toString(32)+":";return w.memoizedState=j},unstable_isNewReconciler:!1},bz={readContext:ja,useCallback:ek,useContext:ja,useEffect:b0,useImperativeHandle:Qj,useInsertionEffect:c1,useLayoutEffect:x0,useMemo:tk,useReducer:g0,useRef:Ll,useState:function(){return g0(Kf)},useDebugValue:O2,useDeferredValue:function(w){var j=Fs();return rk(j,ka.memoizedState,w)},useTransition:function(){var w=g0(Kf)[0],j=Fs().memoizedState;return[w,j]},useMutableSource:s1,useSyncExternalStore:Mm,useId:nk,unstable_isNewReconciler:!1},xz={readContext:ja,useCallback:ek,useContext:ja,useEffect:b0,useImperativeHandle:Qj,useInsertionEffect:c1,useLayoutEffect:x0,useMemo:tk,useReducer:jc,useRef:Ll,useState:function(){return jc(Kf)},useDebugValue:O2,useDeferredValue:function(w){var j=Fs();return ka===null?j.memoizedState=w:rk(j,ka.memoizedState,w)},useTransition:function(){var w=jc(Kf)[0],j=Fs().memoizedState;return[w,j]},useMutableSource:s1,useSyncExternalStore:Mm,useId:nk,unstable_isNewReconciler:!1};function Bl(w,j){if(w&&w.defaultProps){j=q({},j),w=w.defaultProps;for(var W in w)j[W]===void 0&&(j[W]=w[W]);return j}return j}function I2(w,j,W,J){j=w.memoizedState,W=W(J,j),W=W==null?j:q({},j,W),w.memoizedState=W,w.lanes===0&&(w.updateQueue.baseState=W)}var d1={isMounted:function(w){return(w=w._reactInternals)?Te(w)===w:!1},enqueueSetState:function(w,j,W){w=w._reactInternals;var J=Bs(),ne=zd(w),de=ro(J,ne);de.payload=j,W!=null&&(de.callback=W),j=no(w,de,ne),j!==null&&(ql(j,w,ne,J),bu(j,w,ne))},enqueueReplaceState:function(w,j,W){w=w._reactInternals;var J=Bs(),ne=zd(w),de=ro(J,ne);de.tag=1,de.payload=j,W!=null&&(de.callback=W),j=no(w,de,ne),j!==null&&(ql(j,w,ne,J),bu(j,w,ne))},enqueueForceUpdate:function(w,j){w=w._reactInternals;var W=Bs(),J=zd(w),ne=ro(W,J);ne.tag=2,j!=null&&(ne.callback=j),j=no(w,ne,J),j!==null&&(ql(j,w,J,W),bu(j,w,J))}};function ok(w,j,W,J,ne,de,_e){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(J,de,_e):j.prototype&&j.prototype.isPureReactComponent?!Al(W,J)||!Al(ne,de):!0}function lk(w,j,W){var J=!1,ne=_c,de=j.contextType;return typeof de=="object"&&de!==null?de=ja(de):(ne=ls(j)?yu:ai.current,J=j.contextTypes,de=(J=J!=null)?Id(w,ne):_c),j=new j(W,de),w.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=d1,w.stateNode=j,j._reactInternals=w,J&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=ne,w.__reactInternalMemoizedMaskedChildContext=de),j}function ck(w,j,W,J){w=j.state,typeof j.componentWillReceiveProps=="function"&&j.componentWillReceiveProps(W,J),typeof j.UNSAFE_componentWillReceiveProps=="function"&&j.UNSAFE_componentWillReceiveProps(W,J),j.state!==w&&d1.enqueueReplaceState(j,j.state,null)}function M2(w,j,W,J){var ne=w.stateNode;ne.props=W,ne.state=w.memoizedState,ne.refs={},f0(w);var de=j.contextType;typeof de=="object"&&de!==null?ne.context=ja(de):(de=ls(j)?yu:ai.current,ne.context=Id(w,de)),ne.state=w.memoizedState,de=j.getDerivedStateFromProps,typeof de=="function"&&(I2(w,j,de,W),ne.state=w.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof ne.getSnapshotBeforeUpdate=="function"||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(j=ne.state,typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount(),j!==ne.state&&d1.enqueueReplaceState(ne,ne.state,null),Rl(w,W,ne,J),ne.state=w.memoizedState),typeof ne.componentDidMount=="function"&&(w.flags|=4194308)}function _0(w,j){try{var W="",J=j;do W+=Z(J),J=J.return;while(J);var ne=W}catch(de){ne=`
Error generating stack: `+de.message+`
`+de.stack}return{value:w,source:j,stack:ne,digest:null}}function R2(w,j,W){return{value:w,source:null,stack:W??null,digest:j??null}}function F2(w,j){try{console.error(j.value)}catch(W){setTimeout(function(){throw W})}}var wz=typeof WeakMap=="function"?WeakMap:Map;function uk(w,j,W){W=ro(-1,W),W.tag=3,W.payload={element:null};var J=j.value;return W.callback=function(){v1||(v1=!0,J2=J),F2(w,j)},W}function dk(w,j,W){W=ro(-1,W),W.tag=3;var J=w.type.getDerivedStateFromError;if(typeof J=="function"){var ne=j.value;W.payload=function(){return J(ne)},W.callback=function(){F2(w,j)}}var de=w.stateNode;return de!==null&&typeof de.componentDidCatch=="function"&&(W.callback=function(){F2(w,j),typeof J!="function"&&(Ud===null?Ud=new Set([this]):Ud.add(this));var _e=j.stack;this.componentDidCatch(j.value,{componentStack:_e!==null?_e:""})}),W}function fk(w,j,W){var J=w.pingCache;if(J===null){J=w.pingCache=new wz;var ne=new Set;J.set(j,ne)}else ne=J.get(j),ne===void 0&&(ne=new Set,J.set(j,ne));ne.has(W)||(ne.add(W),w=Rz.bind(null,w,j,W),j.then(w,w))}function hk(w){do{var j;if((j=w.tag===13)&&(j=w.memoizedState,j=j!==null?j.dehydrated!==null:!0),j)return w;w=w.return}while(w!==null);return null}function pk(w,j,W,J,ne){return(w.mode&1)===0?(w===j?w.flags|=65536:(w.flags|=128,W.flags|=131072,W.flags&=-52805,W.tag===1&&(W.alternate===null?W.tag=17:(j=ro(-1,1),j.tag=2,no(W,j,1))),W.lanes|=1),w):(w.flags|=65536,w.lanes=ne,w)}var _z=S.ReactCurrentOwner,io=!1;function Ls(w,j,W,J){j.child=w===null?vn(j,null,W,J):Ra(j,w.child,W,J)}function mk(w,j,W,J,ne){W=W.render;var de=j.ref;return ia(j,ne),J=Gf(w,j,W,J,de,ne),W=tl(),w!==null&&!io?(j.updateQueue=w.updateQueue,j.flags&=-2053,w.lanes&=~ne,_u(w,j,ne)):(Tt&&W&&jt(j),j.flags|=1,Ls(w,j,J,ne),j.child)}function gk(w,j,W,J,ne){if(w===null){var de=W.type;return typeof de=="function"&&!aw(de)&&de.defaultProps===void 0&&W.compare===null&&W.defaultProps===void 0?(j.tag=15,j.type=de,yk(w,j,de,J,ne)):(w=N1(W.type,null,J,j,j.mode,ne),w.ref=j.ref,w.return=j,j.child=w)}if(de=w.child,(w.lanes&ne)===0){var _e=de.memoizedProps;if(W=W.compare,W=W!==null?W:Al,W(_e,J)&&w.ref===j.ref)return _u(w,j,ne)}return j.flags|=1,w=Hd(de,J),w.ref=j.ref,w.return=j,j.child=w}function yk(w,j,W,J,ne){if(w!==null){var de=w.memoizedProps;if(Al(de,J)&&w.ref===j.ref)if(io=!1,j.pendingProps=J=de,(w.lanes&ne)!==0)(w.flags&131072)!==0&&(io=!0);else return j.lanes=w.lanes,_u(w,j,ne)}return D2(w,j,W,J,ne)}function vk(w,j,W){var J=j.pendingProps,ne=J.children,de=w!==null?w.memoizedState:null;if(J.mode==="hidden")if((j.mode&1)===0)j.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn(N0,Io),Io|=W;else{if((W&1073741824)===0)return w=de!==null?de.baseLanes|W:W,j.lanes=j.childLanes=1073741824,j.memoizedState={baseLanes:w,cachePool:null,transitions:null},j.updateQueue=null,Tn(N0,Io),Io|=w,null;j.memoizedState={baseLanes:0,cachePool:null,transitions:null},J=de!==null?de.baseLanes:W,Tn(N0,Io),Io|=J}else de!==null?(J=de.baseLanes|W,j.memoizedState=null):J=W,Tn(N0,Io),Io|=J;return Ls(w,j,ne,W),j.child}function bk(w,j){var W=j.ref;(w===null&&W!==null||w!==null&&w.ref!==W)&&(j.flags|=512,j.flags|=2097152)}function D2(w,j,W,J,ne){var de=ls(W)?yu:ai.current;return de=Id(j,de),ia(j,ne),W=Gf(w,j,W,J,de,ne),J=tl(),w!==null&&!io?(j.updateQueue=w.updateQueue,j.flags&=-2053,w.lanes&=~ne,_u(w,j,ne)):(Tt&&J&&jt(j),j.flags|=1,Ls(w,j,W,ne),j.child)}function xk(w,j,W,J,ne){if(ls(W)){var de=!0;vu(j)}else de=!1;if(ia(j,ne),j.stateNode===null)h1(w,j),lk(j,W,J),M2(j,W,J,ne),J=!0;else if(w===null){var _e=j.stateNode,ze=j.memoizedProps;_e.props=ze;var Ze=_e.context,Nt=W.contextType;typeof Nt=="object"&&Nt!==null?Nt=ja(Nt):(Nt=ls(W)?yu:ai.current,Nt=Id(j,Nt));var Gt=W.getDerivedStateFromProps,Jt=typeof Gt=="function"||typeof _e.getSnapshotBeforeUpdate=="function";Jt||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(ze!==J||Ze!==Nt)&&ck(j,_e,J,Nt),Zo=!1;var Vt=j.memoizedState;_e.state=Vt,Rl(j,J,_e,ne),Ze=j.memoizedState,ze!==J||Vt!==Ze||os.current||Zo?(typeof Gt=="function"&&(I2(j,W,Gt,J),Ze=j.memoizedState),(ze=Zo||ok(j,W,ze,J,Vt,Ze,Nt))?(Jt||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(j.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(j.flags|=4194308),j.memoizedProps=J,j.memoizedState=Ze),_e.props=J,_e.state=Ze,_e.context=Nt,J=ze):(typeof _e.componentDidMount=="function"&&(j.flags|=4194308),J=!1)}else{_e=j.stateNode,Cm(w,j),ze=j.memoizedProps,Nt=j.type===j.elementType?ze:Bl(j.type,ze),_e.props=Nt,Jt=j.pendingProps,Vt=_e.context,Ze=W.contextType,typeof Ze=="object"&&Ze!==null?Ze=ja(Ze):(Ze=ls(W)?yu:ai.current,Ze=Id(j,Ze));var hr=W.getDerivedStateFromProps;(Gt=typeof hr=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(ze!==Jt||Vt!==Ze)&&ck(j,_e,J,Ze),Zo=!1,Vt=j.memoizedState,_e.state=Vt,Rl(j,J,_e,ne);var wr=j.memoizedState;ze!==Jt||Vt!==wr||os.current||Zo?(typeof hr=="function"&&(I2(j,W,hr,J),wr=j.memoizedState),(Nt=Zo||ok(j,W,Nt,J,Vt,wr,Ze)||!1)?(Gt||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(J,wr,Ze),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(J,wr,Ze)),typeof _e.componentDidUpdate=="function"&&(j.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(j.flags|=1024)):(typeof _e.componentDidUpdate!="function"||ze===w.memoizedProps&&Vt===w.memoizedState||(j.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||ze===w.memoizedProps&&Vt===w.memoizedState||(j.flags|=1024),j.memoizedProps=J,j.memoizedState=wr),_e.props=J,_e.state=wr,_e.context=Ze,J=Nt):(typeof _e.componentDidUpdate!="function"||ze===w.memoizedProps&&Vt===w.memoizedState||(j.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||ze===w.memoizedProps&&Vt===w.memoizedState||(j.flags|=1024),J=!1)}return L2(w,j,W,J,de,ne)}function L2(w,j,W,J,ne,de){bk(w,j);var _e=(j.flags&128)!==0;if(!J&&!_e)return ne&&a1(j,W,!1),_u(w,j,de);J=j.stateNode,_z.current=j;var ze=_e&&typeof W.getDerivedStateFromError!="function"?null:J.render();return j.flags|=1,w!==null&&_e?(j.child=Ra(j,w.child,null,de),j.child=Ra(j,null,ze,de)):Ls(w,j,ze,de),j.memoizedState=J.state,ne&&a1(j,W,!0),j.child}function wk(w){var j=w.stateNode;j.pendingContext?n1(w,j.pendingContext,j.pendingContext!==j.context):j.context&&n1(w,j.context,!1),Fd(w,j.containerInfo)}function _k(w,j,W,J,ne){return Yr(),jn(ne),j.flags|=256,Ls(w,j,W,J),j.child}var B2={dehydrated:null,treeContext:null,retryLane:0};function $2(w){return{baseLanes:w,cachePool:null,transitions:null}}function Sk(w,j,W){var J=j.pendingProps,ne=Vn.current,de=!1,_e=(j.flags&128)!==0,ze;if((ze=_e)||(ze=w!==null&&w.memoizedState===null?!1:(ne&2)!==0),ze?(de=!0,j.flags&=-129):(w===null||w.memoizedState!==null)&&(ne|=1),Tn(Vn,ne&1),w===null)return or(j),w=j.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?((j.mode&1)===0?j.lanes=1:w.data==="$!"?j.lanes=8:j.lanes=1073741824,null):(_e=J.children,w=J.fallback,de?(J=j.mode,de=j.child,_e={mode:"hidden",children:_e},(J&1)===0&&de!==null?(de.childLanes=0,de.pendingProps=_e):de=j1(_e,J,0,null),w=eh(w,J,W,null),de.return=j,w.return=j,de.sibling=w,j.child=de,j.child.memoizedState=$2(W),j.memoizedState=B2,w):U2(j,_e));if(ne=w.memoizedState,ne!==null&&(ze=ne.dehydrated,ze!==null))return Sz(w,j,_e,J,ze,ne,W);if(de){de=J.fallback,_e=j.mode,ne=w.child,ze=ne.sibling;var Ze={mode:"hidden",children:J.children};return(_e&1)===0&&j.child!==ne?(J=j.child,J.childLanes=0,J.pendingProps=Ze,j.deletions=null):(J=Hd(ne,Ze),J.subtreeFlags=ne.subtreeFlags&14680064),ze!==null?de=Hd(ze,de):(de=eh(de,_e,W,null),de.flags|=2),de.return=j,J.return=j,J.sibling=de,j.child=J,J=de,de=j.child,_e=w.child.memoizedState,_e=_e===null?$2(W):{baseLanes:_e.baseLanes|W,cachePool:null,transitions:_e.transitions},de.memoizedState=_e,de.childLanes=w.childLanes&~W,j.memoizedState=B2,J}return de=w.child,w=de.sibling,J=Hd(de,{mode:"visible",children:J.children}),(j.mode&1)===0&&(J.lanes=W),J.return=j,J.sibling=null,w!==null&&(W=j.deletions,W===null?(j.deletions=[w],j.flags|=16):W.push(w)),j.child=J,j.memoizedState=null,J}function U2(w,j){return j=j1({mode:"visible",children:j},w.mode,0,null),j.return=w,w.child=j}function f1(w,j,W,J){return J!==null&&jn(J),Ra(j,w.child,null,W),w=U2(j,j.pendingProps.children),w.flags|=2,j.memoizedState=null,w}function Sz(w,j,W,J,ne,de,_e){if(W)return j.flags&256?(j.flags&=-257,J=R2(Error(e(422))),f1(w,j,_e,J)):j.memoizedState!==null?(j.child=w.child,j.flags|=128,null):(de=J.fallback,ne=j.mode,J=j1({mode:"visible",children:J.children},ne,0,null),de=eh(de,ne,_e,null),de.flags|=2,J.return=j,de.return=j,J.sibling=de,j.child=J,(j.mode&1)!==0&&Ra(j,w.child,null,_e),j.child.memoizedState=$2(_e),j.memoizedState=B2,de);if((j.mode&1)===0)return f1(w,j,_e,null);if(ne.data==="$!"){if(J=ne.nextSibling&&ne.nextSibling.dataset,J)var ze=J.dgst;return J=ze,de=Error(e(419)),J=R2(de,J,void 0),f1(w,j,_e,J)}if(ze=(_e&w.childLanes)!==0,io||ze){if(J=ji,J!==null){switch(_e&-_e){case 4:ne=2;break;case 16:ne=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ne=32;break;case 536870912:ne=268435456;break;default:ne=0}ne=(ne&(J.suspendedLanes|_e))!==0?0:ne,ne!==0&&ne!==de.retryLane&&(de.retryLane=ne,bn(w,ne),ql(J,w,ne,-1))}return nw(),J=R2(Error(e(421))),f1(w,j,_e,J)}return ne.data==="$?"?(j.flags|=128,j.child=w.child,j=Fz.bind(null,w),ne._reactRetry=j,null):(w=de.treeContext,Ct=Bi(ne.nextSibling),rt=j,Tt=!0,Ot=null,w!==null&&(Pe[Fe++]=gt,Pe[Fe++]=yt,Pe[Fe++]=Ye,gt=w.id,yt=w.overflow,Ye=j),j=U2(j,J.children),j.flags|=4096,j)}function Nk(w,j,W){w.lanes|=j;var J=w.alternate;J!==null&&(J.lanes|=j),to(w.return,j,W)}function q2(w,j,W,J,ne){var de=w.memoizedState;de===null?w.memoizedState={isBackwards:j,rendering:null,renderingStartTime:0,last:J,tail:W,tailMode:ne}:(de.isBackwards=j,de.rendering=null,de.renderingStartTime=0,de.last=J,de.tail=W,de.tailMode=ne)}function jk(w,j,W){var J=j.pendingProps,ne=J.revealOrder,de=J.tail;if(Ls(w,j,J.children,W),J=Vn.current,(J&2)!==0)J=J&1|2,j.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=j.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&Nk(w,W,j);else if(w.tag===19)Nk(w,W,j);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===j)break e;for(;w.sibling===null;){if(w.return===null||w.return===j)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}J&=1}if(Tn(Vn,J),(j.mode&1)===0)j.memoizedState=null;else switch(ne){case"forwards":for(W=j.child,ne=null;W!==null;)w=W.alternate,w!==null&&Co(w)===null&&(ne=W),W=W.sibling;W=ne,W===null?(ne=j.child,j.child=null):(ne=W.sibling,W.sibling=null),q2(j,!1,ne,W,de);break;case"backwards":for(W=null,ne=j.child,j.child=null;ne!==null;){if(w=ne.alternate,w!==null&&Co(w)===null){j.child=ne;break}w=ne.sibling,ne.sibling=W,W=ne,ne=w}q2(j,!0,W,null,de);break;case"together":q2(j,!1,null,null,void 0);break;default:j.memoizedState=null}return j.child}function h1(w,j){(j.mode&1)===0&&w!==null&&(w.alternate=null,j.alternate=null,j.flags|=2)}function _u(w,j,W){if(w!==null&&(j.dependencies=w.dependencies),Yf|=j.lanes,(W&j.childLanes)===0)return null;if(w!==null&&j.child!==w.child)throw Error(e(153));if(j.child!==null){for(w=j.child,W=Hd(w,w.pendingProps),j.child=W,W.return=j;w.sibling!==null;)w=w.sibling,W=W.sibling=Hd(w,w.pendingProps),W.return=j;W.sibling=null}return j.child}function Nz(w,j,W){switch(j.tag){case 3:wk(j),Yr();break;case 5:i1(j);break;case 1:ls(j.type)&&vu(j);break;case 4:Fd(j,j.stateNode.containerInfo);break;case 10:var J=j.type._context,ne=j.memoizedProps.value;Tn(Si,J._currentValue),J._currentValue=ne;break;case 13:if(J=j.memoizedState,J!==null)return J.dehydrated!==null?(Tn(Vn,Vn.current&1),j.flags|=128,null):(W&j.child.childLanes)!==0?Sk(w,j,W):(Tn(Vn,Vn.current&1),w=_u(w,j,W),w!==null?w.sibling:null);Tn(Vn,Vn.current&1);break;case 19:if(J=(W&j.childLanes)!==0,(w.flags&128)!==0){if(J)return jk(w,j,W);j.flags|=128}if(ne=j.memoizedState,ne!==null&&(ne.rendering=null,ne.tail=null,ne.lastEffect=null),Tn(Vn,Vn.current),J)break;return null;case 22:case 23:return j.lanes=0,vk(w,j,W)}return _u(w,j,W)}var kk,z2,Ek,Ak;kk=function(w,j){for(var W=j.child;W!==null;){if(W.tag===5||W.tag===6)w.appendChild(W.stateNode);else if(W.tag!==4&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===j)break;for(;W.sibling===null;){if(W.return===null||W.return===j)return;W=W.return}W.sibling.return=W.return,W=W.sibling}},z2=function(){},Ek=function(w,j,W,J){var ne=w.memoizedProps;if(ne!==J){w=j.stateNode,Fl(Rs.current);var de=null;switch(W){case"input":ne=ue(w,ne),J=ue(w,J),de=[];break;case"select":ne=q({},ne,{value:void 0}),J=q({},J,{value:void 0}),de=[];break;case"textarea":ne=Me(w,ne),J=Me(w,J),de=[];break;default:typeof ne.onClick!="function"&&typeof J.onClick=="function"&&(w.onclick=Cd)}ut(W,J);var _e;W=null;for(Nt in ne)if(!J.hasOwnProperty(Nt)&&ne.hasOwnProperty(Nt)&&ne[Nt]!=null)if(Nt==="style"){var ze=ne[Nt];for(_e in ze)ze.hasOwnProperty(_e)&&(W||(W={}),W[_e]="")}else Nt!=="dangerouslySetInnerHTML"&&Nt!=="children"&&Nt!=="suppressContentEditableWarning"&&Nt!=="suppressHydrationWarning"&&Nt!=="autoFocus"&&(a.hasOwnProperty(Nt)?de||(de=[]):(de=de||[]).push(Nt,null));for(Nt in J){var Ze=J[Nt];if(ze=ne!=null?ne[Nt]:void 0,J.hasOwnProperty(Nt)&&Ze!==ze&&(Ze!=null||ze!=null))if(Nt==="style")if(ze){for(_e in ze)!ze.hasOwnProperty(_e)||Ze&&Ze.hasOwnProperty(_e)||(W||(W={}),W[_e]="");for(_e in Ze)Ze.hasOwnProperty(_e)&&ze[_e]!==Ze[_e]&&(W||(W={}),W[_e]=Ze[_e])}else W||(de||(de=[]),de.push(Nt,W)),W=Ze;else Nt==="dangerouslySetInnerHTML"?(Ze=Ze?Ze.__html:void 0,ze=ze?ze.__html:void 0,Ze!=null&&ze!==Ze&&(de=de||[]).push(Nt,Ze)):Nt==="children"?typeof Ze!="string"&&typeof Ze!="number"||(de=de||[]).push(Nt,""+Ze):Nt!=="suppressContentEditableWarning"&&Nt!=="suppressHydrationWarning"&&(a.hasOwnProperty(Nt)?(Ze!=null&&Nt==="onScroll"&&Fn("scroll",w),de||ze===Ze||(de=[])):(de=de||[]).push(Nt,Ze))}W&&(de=de||[]).push("style",W);var Nt=de;(j.updateQueue=Nt)&&(j.flags|=4)}},Ak=function(w,j,W,J){W!==J&&(j.flags|=4)};function Fm(w,j){if(!Tt)switch(w.tailMode){case"hidden":j=w.tail;for(var W=null;j!==null;)j.alternate!==null&&(W=j),j=j.sibling;W===null?w.tail=null:W.sibling=null;break;case"collapsed":W=w.tail;for(var J=null;W!==null;)W.alternate!==null&&(J=W),W=W.sibling;J===null?j||w.tail===null?w.tail=null:w.tail.sibling=null:J.sibling=null}}function us(w){var j=w.alternate!==null&&w.alternate.child===w.child,W=0,J=0;if(j)for(var ne=w.child;ne!==null;)W|=ne.lanes|ne.childLanes,J|=ne.subtreeFlags&14680064,J|=ne.flags&14680064,ne.return=w,ne=ne.sibling;else for(ne=w.child;ne!==null;)W|=ne.lanes|ne.childLanes,J|=ne.subtreeFlags,J|=ne.flags,ne.return=w,ne=ne.sibling;return w.subtreeFlags|=J,w.childLanes=W,j}function jz(w,j,W){var J=j.pendingProps;switch(tt(j),j.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(j),null;case 1:return ls(j.type)&&d0(),us(j),null;case 3:return J=j.stateNode,Qo(),Nn(os),Nn(ai),Im(),J.pendingContext&&(J.context=J.pendingContext,J.pendingContext=null),(w===null||w.child===null)&&(hn(j)?j.flags|=4:w===null||w.memoizedState.isDehydrated&&(j.flags&256)===0||(j.flags|=1024,Ot!==null&&(ew(Ot),Ot=null))),z2(w,j),us(j),null;case 5:Pm(j);var ne=Fl(Nc.current);if(W=j.type,w!==null&&j.stateNode!=null)Ek(w,j,W,J,ne),w.ref!==j.ref&&(j.flags|=512,j.flags|=2097152);else{if(!J){if(j.stateNode===null)throw Error(e(166));return us(j),null}if(w=Fl(Rs.current),hn(j)){J=j.stateNode,W=j.type;var de=j.memoizedProps;switch(J[Jo]=j,J[Pd]=de,w=(j.mode&1)!==0,W){case"dialog":Fn("cancel",J),Fn("close",J);break;case"iframe":case"object":case"embed":Fn("load",J);break;case"video":case"audio":for(ne=0;ne<xc.length;ne++)Fn(xc[ne],J);break;case"source":Fn("error",J);break;case"img":case"image":case"link":Fn("error",J),Fn("load",J);break;case"details":Fn("toggle",J);break;case"input":oe(J,de),Fn("invalid",J);break;case"select":J._wrapperState={wasMultiple:!!de.multiple},Fn("invalid",J);break;case"textarea":Re(J,de),Fn("invalid",J)}ut(W,de),ne=null;for(var _e in de)if(de.hasOwnProperty(_e)){var ze=de[_e];_e==="children"?typeof ze=="string"?J.textContent!==ze&&(de.suppressHydrationWarning!==!0&&u0(J.textContent,ze,w),ne=["children",ze]):typeof ze=="number"&&J.textContent!==""+ze&&(de.suppressHydrationWarning!==!0&&u0(J.textContent,ze,w),ne=["children",""+ze]):a.hasOwnProperty(_e)&&ze!=null&&_e==="onScroll"&&Fn("scroll",J)}switch(W){case"input":te(J),ye(J,de,!0);break;case"textarea":te(J),qe(J);break;case"select":case"option":break;default:typeof de.onClick=="function"&&(J.onclick=Cd)}J=ne,j.updateQueue=J,J!==null&&(j.flags|=4)}else{_e=ne.nodeType===9?ne:ne.ownerDocument,w==="http://www.w3.org/1999/xhtml"&&(w=ct(W)),w==="http://www.w3.org/1999/xhtml"?W==="script"?(w=_e.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild)):typeof J.is=="string"?w=_e.createElement(W,{is:J.is}):(w=_e.createElement(W),W==="select"&&(_e=w,J.multiple?_e.multiple=!0:J.size&&(_e.size=J.size))):w=_e.createElementNS(w,W),w[Jo]=j,w[Pd]=J,kk(w,j,!1,!1),j.stateNode=w;e:{switch(_e=wt(W,J),W){case"dialog":Fn("cancel",w),Fn("close",w),ne=J;break;case"iframe":case"object":case"embed":Fn("load",w),ne=J;break;case"video":case"audio":for(ne=0;ne<xc.length;ne++)Fn(xc[ne],w);ne=J;break;case"source":Fn("error",w),ne=J;break;case"img":case"image":case"link":Fn("error",w),Fn("load",w),ne=J;break;case"details":Fn("toggle",w),ne=J;break;case"input":oe(w,J),ne=ue(w,J),Fn("invalid",w);break;case"option":ne=J;break;case"select":w._wrapperState={wasMultiple:!!J.multiple},ne=q({},J,{value:void 0}),Fn("invalid",w);break;case"textarea":Re(w,J),ne=Me(w,J),Fn("invalid",w);break;default:ne=J}ut(W,ne),ze=ne;for(de in ze)if(ze.hasOwnProperty(de)){var Ze=ze[de];de==="style"?Ee(w,Ze):de==="dangerouslySetInnerHTML"?(Ze=Ze?Ze.__html:void 0,Ze!=null&&Rt(w,Ze)):de==="children"?typeof Ze=="string"?(W!=="textarea"||Ze!=="")&&Ft(w,Ze):typeof Ze=="number"&&Ft(w,""+Ze):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(a.hasOwnProperty(de)?Ze!=null&&de==="onScroll"&&Fn("scroll",w):Ze!=null&&x(w,de,Ze,_e))}switch(W){case"input":te(w),ye(w,J,!1);break;case"textarea":te(w),qe(w);break;case"option":J.value!=null&&w.setAttribute("value",""+B(J.value));break;case"select":w.multiple=!!J.multiple,de=J.value,de!=null?Oe(w,!!J.multiple,de,!1):J.defaultValue!=null&&Oe(w,!!J.multiple,J.defaultValue,!0);break;default:typeof ne.onClick=="function"&&(w.onclick=Cd)}switch(W){case"button":case"input":case"select":case"textarea":J=!!J.autoFocus;break e;case"img":J=!0;break e;default:J=!1}}J&&(j.flags|=4)}j.ref!==null&&(j.flags|=512,j.flags|=2097152)}return us(j),null;case 6:if(w&&j.stateNode!=null)Ak(w,j,w.memoizedProps,J);else{if(typeof J!="string"&&j.stateNode===null)throw Error(e(166));if(W=Fl(Nc.current),Fl(Rs.current),hn(j)){if(J=j.stateNode,W=j.memoizedProps,J[Jo]=j,(de=J.nodeValue!==W)&&(w=rt,w!==null))switch(w.tag){case 3:u0(J.nodeValue,W,(w.mode&1)!==0);break;case 5:w.memoizedProps.suppressHydrationWarning!==!0&&u0(J.nodeValue,W,(w.mode&1)!==0)}de&&(j.flags|=4)}else J=(W.nodeType===9?W:W.ownerDocument).createTextNode(J),J[Jo]=j,j.stateNode=J}return us(j),null;case 13:if(Nn(Vn),J=j.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(Tt&&Ct!==null&&(j.mode&1)!==0&&(j.flags&128)===0)un(),Yr(),j.flags|=98560,de=!1;else if(de=hn(j),J!==null&&J.dehydrated!==null){if(w===null){if(!de)throw Error(e(318));if(de=j.memoizedState,de=de!==null?de.dehydrated:null,!de)throw Error(e(317));de[Jo]=j}else Yr(),(j.flags&128)===0&&(j.memoizedState=null),j.flags|=4;us(j),de=!1}else Ot!==null&&(ew(Ot),Ot=null),de=!0;if(!de)return j.flags&65536?j:null}return(j.flags&128)!==0?(j.lanes=W,j):(J=J!==null,J!==(w!==null&&w.memoizedState!==null)&&J&&(j.child.flags|=8192,(j.mode&1)!==0&&(w===null||(Vn.current&1)!==0?si===0&&(si=3):nw())),j.updateQueue!==null&&(j.flags|=4),us(j),null);case 4:return Qo(),z2(w,j),w===null&&hu(j.stateNode.containerInfo),us(j),null;case 10:return cs(j.type._context),us(j),null;case 17:return ls(j.type)&&d0(),us(j),null;case 19:if(Nn(Vn),de=j.memoizedState,de===null)return us(j),null;if(J=(j.flags&128)!==0,_e=de.rendering,_e===null)if(J)Fm(de,!1);else{if(si!==0||w!==null&&(w.flags&128)!==0)for(w=j.child;w!==null;){if(_e=Co(w),_e!==null){for(j.flags|=128,Fm(de,!1),J=_e.updateQueue,J!==null&&(j.updateQueue=J,j.flags|=4),j.subtreeFlags=0,J=W,W=j.child;W!==null;)de=W,w=J,de.flags&=14680066,_e=de.alternate,_e===null?(de.childLanes=0,de.lanes=w,de.child=null,de.subtreeFlags=0,de.memoizedProps=null,de.memoizedState=null,de.updateQueue=null,de.dependencies=null,de.stateNode=null):(de.childLanes=_e.childLanes,de.lanes=_e.lanes,de.child=_e.child,de.subtreeFlags=0,de.deletions=null,de.memoizedProps=_e.memoizedProps,de.memoizedState=_e.memoizedState,de.updateQueue=_e.updateQueue,de.type=_e.type,w=_e.dependencies,de.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),W=W.sibling;return Tn(Vn,Vn.current&1|2),j.child}w=w.sibling}de.tail!==null&&Le()>j0&&(j.flags|=128,J=!0,Fm(de,!1),j.lanes=4194304)}else{if(!J)if(w=Co(_e),w!==null){if(j.flags|=128,J=!0,W=w.updateQueue,W!==null&&(j.updateQueue=W,j.flags|=4),Fm(de,!0),de.tail===null&&de.tailMode==="hidden"&&!_e.alternate&&!Tt)return us(j),null}else 2*Le()-de.renderingStartTime>j0&&W!==1073741824&&(j.flags|=128,J=!0,Fm(de,!1),j.lanes=4194304);de.isBackwards?(_e.sibling=j.child,j.child=_e):(W=de.last,W!==null?W.sibling=_e:j.child=_e,de.last=_e)}return de.tail!==null?(j=de.tail,de.rendering=j,de.tail=j.sibling,de.renderingStartTime=Le(),j.sibling=null,W=Vn.current,Tn(Vn,J?W&1|2:W&1),j):(us(j),null);case 22:case 23:return rw(),J=j.memoizedState!==null,w!==null&&w.memoizedState!==null!==J&&(j.flags|=8192),J&&(j.mode&1)!==0?(Io&1073741824)!==0&&(us(j),j.subtreeFlags&6&&(j.flags|=8192)):us(j),null;case 24:return null;case 25:return null}throw Error(e(156,j.tag))}function kz(w,j){switch(tt(j),j.tag){case 1:return ls(j.type)&&d0(),w=j.flags,w&65536?(j.flags=w&-65537|128,j):null;case 3:return Qo(),Nn(os),Nn(ai),Im(),w=j.flags,(w&65536)!==0&&(w&128)===0?(j.flags=w&-65537|128,j):null;case 5:return Pm(j),null;case 13:if(Nn(Vn),w=j.memoizedState,w!==null&&w.dehydrated!==null){if(j.alternate===null)throw Error(e(340));Yr()}return w=j.flags,w&65536?(j.flags=w&-65537|128,j):null;case 19:return Nn(Vn),null;case 4:return Qo(),null;case 10:return cs(j.type._context),null;case 22:case 23:return rw(),null;case 24:return null;default:return null}}var p1=!1,ds=!1,Ez=typeof WeakSet=="function"?WeakSet:Set,gr=null;function S0(w,j){var W=w.ref;if(W!==null)if(typeof W=="function")try{W(null)}catch(J){Ea(w,j,J)}else W.current=null}function W2(w,j,W){try{W()}catch(J){Ea(w,j,J)}}var Tk=!1;function Az(w,j){if(Wf=dd,w=Df(),cu(w)){if("selectionStart"in w)var W={start:w.selectionStart,end:w.selectionEnd};else e:{W=(W=w.ownerDocument)&&W.defaultView||window;var J=W.getSelection&&W.getSelection();if(J&&J.rangeCount!==0){W=J.anchorNode;var ne=J.anchorOffset,de=J.focusNode;J=J.focusOffset;try{W.nodeType,de.nodeType}catch{W=null;break e}var _e=0,ze=-1,Ze=-1,Nt=0,Gt=0,Jt=w,Vt=null;t:for(;;){for(var hr;Jt!==W||ne!==0&&Jt.nodeType!==3||(ze=_e+ne),Jt!==de||J!==0&&Jt.nodeType!==3||(Ze=_e+J),Jt.nodeType===3&&(_e+=Jt.nodeValue.length),(hr=Jt.firstChild)!==null;)Vt=Jt,Jt=hr;for(;;){if(Jt===w)break t;if(Vt===W&&++Nt===ne&&(ze=_e),Vt===de&&++Gt===J&&(Ze=_e),(hr=Jt.nextSibling)!==null)break;Jt=Vt,Vt=Jt.parentNode}Jt=hr}W=ze===-1||Ze===-1?null:{start:ze,end:Ze}}else W=null}W=W||{start:0,end:0}}else W=null;for(mu={focusedElem:w,selectionRange:W},dd=!1,gr=j;gr!==null;)if(j=gr,w=j.child,(j.subtreeFlags&1028)!==0&&w!==null)w.return=j,gr=w;else for(;gr!==null;){j=gr;try{var wr=j.alternate;if((j.flags&1024)!==0)switch(j.tag){case 0:case 11:case 15:break;case 1:if(wr!==null){var Nr=wr.memoizedProps,La=wr.memoizedState,bt=j.stateNode,at=bt.getSnapshotBeforeUpdate(j.elementType===j.type?Nr:Bl(j.type,Nr),La);bt.__reactInternalSnapshotBeforeUpdate=at}break;case 3:var _t=j.stateNode.containerInfo;_t.nodeType===1?_t.textContent="":_t.nodeType===9&&_t.documentElement&&_t.removeChild(_t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(nr){Ea(j,j.return,nr)}if(w=j.sibling,w!==null){w.return=j.return,gr=w;break}gr=j.return}return wr=Tk,Tk=!1,wr}function Dm(w,j,W){var J=j.updateQueue;if(J=J!==null?J.lastEffect:null,J!==null){var ne=J=J.next;do{if((ne.tag&w)===w){var de=ne.destroy;ne.destroy=void 0,de!==void 0&&W2(j,W,de)}ne=ne.next}while(ne!==J)}}function m1(w,j){if(j=j.updateQueue,j=j!==null?j.lastEffect:null,j!==null){var W=j=j.next;do{if((W.tag&w)===w){var J=W.create;W.destroy=J()}W=W.next}while(W!==j)}}function H2(w){var j=w.ref;if(j!==null){var W=w.stateNode;switch(w.tag){case 5:w=W;break;default:w=W}typeof j=="function"?j(w):j.current=w}}function Ck(w){var j=w.alternate;j!==null&&(w.alternate=null,Ck(j)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(j=w.stateNode,j!==null&&(delete j[Jo],delete j[Pd],delete j[ss],delete j[T2],delete j[C2])),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function Pk(w){return w.tag===5||w.tag===3||w.tag===4}function Ok(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||Pk(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function V2(w,j,W){var J=w.tag;if(J===5||J===6)w=w.stateNode,j?W.nodeType===8?W.parentNode.insertBefore(w,j):W.insertBefore(w,j):(W.nodeType===8?(j=W.parentNode,j.insertBefore(w,W)):(j=W,j.appendChild(w)),W=W._reactRootContainer,W!=null||j.onclick!==null||(j.onclick=Cd));else if(J!==4&&(w=w.child,w!==null))for(V2(w,j,W),w=w.sibling;w!==null;)V2(w,j,W),w=w.sibling}function G2(w,j,W){var J=w.tag;if(J===5||J===6)w=w.stateNode,j?W.insertBefore(w,j):W.appendChild(w);else if(J!==4&&(w=w.child,w!==null))for(G2(w,j,W),w=w.sibling;w!==null;)G2(w,j,W),w=w.sibling}var Ui=null,$l=!1;function $d(w,j,W){for(W=W.child;W!==null;)Ik(w,j,W),W=W.sibling}function Ik(w,j,W){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Tr,W)}catch{}switch(W.tag){case 5:ds||S0(W,j);case 6:var J=Ui,ne=$l;Ui=null,$d(w,j,W),Ui=J,$l=ne,Ui!==null&&($l?(w=Ui,W=W.stateNode,w.nodeType===8?w.parentNode.removeChild(W):w.removeChild(W)):Ui.removeChild(W.stateNode));break;case 18:Ui!==null&&($l?(w=Ui,W=W.stateNode,w.nodeType===8?Em(w.parentNode,W):w.nodeType===1&&Em(w,W),jo(w)):Em(Ui,W.stateNode));break;case 4:J=Ui,ne=$l,Ui=W.stateNode.containerInfo,$l=!0,$d(w,j,W),Ui=J,$l=ne;break;case 0:case 11:case 14:case 15:if(!ds&&(J=W.updateQueue,J!==null&&(J=J.lastEffect,J!==null))){ne=J=J.next;do{var de=ne,_e=de.destroy;de=de.tag,_e!==void 0&&((de&2)!==0||(de&4)!==0)&&W2(W,j,_e),ne=ne.next}while(ne!==J)}$d(w,j,W);break;case 1:if(!ds&&(S0(W,j),J=W.stateNode,typeof J.componentWillUnmount=="function"))try{J.props=W.memoizedProps,J.state=W.memoizedState,J.componentWillUnmount()}catch(ze){Ea(W,j,ze)}$d(w,j,W);break;case 21:$d(w,j,W);break;case 22:W.mode&1?(ds=(J=ds)||W.memoizedState!==null,$d(w,j,W),ds=J):$d(w,j,W);break;default:$d(w,j,W)}}function Mk(w){var j=w.updateQueue;if(j!==null){w.updateQueue=null;var W=w.stateNode;W===null&&(W=w.stateNode=new Ez),j.forEach(function(J){var ne=Dz.bind(null,w,J);W.has(J)||(W.add(J),J.then(ne,ne))})}}function Ul(w,j){var W=j.deletions;if(W!==null)for(var J=0;J<W.length;J++){var ne=W[J];try{var de=w,_e=j,ze=_e;e:for(;ze!==null;){switch(ze.tag){case 5:Ui=ze.stateNode,$l=!1;break e;case 3:Ui=ze.stateNode.containerInfo,$l=!0;break e;case 4:Ui=ze.stateNode.containerInfo,$l=!0;break e}ze=ze.return}if(Ui===null)throw Error(e(160));Ik(de,_e,ne),Ui=null,$l=!1;var Ze=ne.alternate;Ze!==null&&(Ze.return=null),ne.return=null}catch(Nt){Ea(ne,j,Nt)}}if(j.subtreeFlags&12854)for(j=j.child;j!==null;)Rk(j,w),j=j.sibling}function Rk(w,j){var W=w.alternate,J=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:if(Ul(j,w),kc(w),J&4){try{Dm(3,w,w.return),m1(3,w)}catch(Nr){Ea(w,w.return,Nr)}try{Dm(5,w,w.return)}catch(Nr){Ea(w,w.return,Nr)}}break;case 1:Ul(j,w),kc(w),J&512&&W!==null&&S0(W,W.return);break;case 5:if(Ul(j,w),kc(w),J&512&&W!==null&&S0(W,W.return),w.flags&32){var ne=w.stateNode;try{Ft(ne,"")}catch(Nr){Ea(w,w.return,Nr)}}if(J&4&&(ne=w.stateNode,ne!=null)){var de=w.memoizedProps,_e=W!==null?W.memoizedProps:de,ze=w.type,Ze=w.updateQueue;if(w.updateQueue=null,Ze!==null)try{ze==="input"&&de.type==="radio"&&de.name!=null&&le(ne,de),wt(ze,_e);var Nt=wt(ze,de);for(_e=0;_e<Ze.length;_e+=2){var Gt=Ze[_e],Jt=Ze[_e+1];Gt==="style"?Ee(ne,Jt):Gt==="dangerouslySetInnerHTML"?Rt(ne,Jt):Gt==="children"?Ft(ne,Jt):x(ne,Gt,Jt,Nt)}switch(ze){case"input":pe(ne,de);break;case"textarea":He(ne,de);break;case"select":var Vt=ne._wrapperState.wasMultiple;ne._wrapperState.wasMultiple=!!de.multiple;var hr=de.value;hr!=null?Oe(ne,!!de.multiple,hr,!1):Vt!==!!de.multiple&&(de.defaultValue!=null?Oe(ne,!!de.multiple,de.defaultValue,!0):Oe(ne,!!de.multiple,de.multiple?[]:"",!1))}ne[Pd]=de}catch(Nr){Ea(w,w.return,Nr)}}break;case 6:if(Ul(j,w),kc(w),J&4){if(w.stateNode===null)throw Error(e(162));ne=w.stateNode,de=w.memoizedProps;try{ne.nodeValue=de}catch(Nr){Ea(w,w.return,Nr)}}break;case 3:if(Ul(j,w),kc(w),J&4&&W!==null&&W.memoizedState.isDehydrated)try{jo(j.containerInfo)}catch(Nr){Ea(w,w.return,Nr)}break;case 4:Ul(j,w),kc(w);break;case 13:Ul(j,w),kc(w),ne=w.child,ne.flags&8192&&(de=ne.memoizedState!==null,ne.stateNode.isHidden=de,!de||ne.alternate!==null&&ne.alternate.memoizedState!==null||(Y2=Le())),J&4&&Mk(w);break;case 22:if(Gt=W!==null&&W.memoizedState!==null,w.mode&1?(ds=(Nt=ds)||Gt,Ul(j,w),ds=Nt):Ul(j,w),kc(w),J&8192){if(Nt=w.memoizedState!==null,(w.stateNode.isHidden=Nt)&&!Gt&&(w.mode&1)!==0)for(gr=w,Gt=w.child;Gt!==null;){for(Jt=gr=Gt;gr!==null;){switch(Vt=gr,hr=Vt.child,Vt.tag){case 0:case 11:case 14:case 15:Dm(4,Vt,Vt.return);break;case 1:S0(Vt,Vt.return);var wr=Vt.stateNode;if(typeof wr.componentWillUnmount=="function"){J=Vt,W=Vt.return;try{j=J,wr.props=j.memoizedProps,wr.state=j.memoizedState,wr.componentWillUnmount()}catch(Nr){Ea(J,W,Nr)}}break;case 5:S0(Vt,Vt.return);break;case 22:if(Vt.memoizedState!==null){Lk(Jt);continue}}hr!==null?(hr.return=Vt,gr=hr):Lk(Jt)}Gt=Gt.sibling}e:for(Gt=null,Jt=w;;){if(Jt.tag===5){if(Gt===null){Gt=Jt;try{ne=Jt.stateNode,Nt?(de=ne.style,typeof de.setProperty=="function"?de.setProperty("display","none","important"):de.display="none"):(ze=Jt.stateNode,Ze=Jt.memoizedProps.style,_e=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null,ze.style.display=Pt("display",_e))}catch(Nr){Ea(w,w.return,Nr)}}}else if(Jt.tag===6){if(Gt===null)try{Jt.stateNode.nodeValue=Nt?"":Jt.memoizedProps}catch(Nr){Ea(w,w.return,Nr)}}else if((Jt.tag!==22&&Jt.tag!==23||Jt.memoizedState===null||Jt===w)&&Jt.child!==null){Jt.child.return=Jt,Jt=Jt.child;continue}if(Jt===w)break e;for(;Jt.sibling===null;){if(Jt.return===null||Jt.return===w)break e;Gt===Jt&&(Gt=null),Jt=Jt.return}Gt===Jt&&(Gt=null),Jt.sibling.return=Jt.return,Jt=Jt.sibling}}break;case 19:Ul(j,w),kc(w),J&4&&Mk(w);break;case 21:break;default:Ul(j,w),kc(w)}}function kc(w){var j=w.flags;if(j&2){try{e:{for(var W=w.return;W!==null;){if(Pk(W)){var J=W;break e}W=W.return}throw Error(e(160))}switch(J.tag){case 5:var ne=J.stateNode;J.flags&32&&(Ft(ne,""),J.flags&=-33);var de=Ok(w);G2(w,de,ne);break;case 3:case 4:var _e=J.stateNode.containerInfo,ze=Ok(w);V2(w,ze,_e);break;default:throw Error(e(161))}}catch(Ze){Ea(w,w.return,Ze)}w.flags&=-3}j&4096&&(w.flags&=-4097)}function Tz(w,j,W){gr=w,Fk(w)}function Fk(w,j,W){for(var J=(w.mode&1)!==0;gr!==null;){var ne=gr,de=ne.child;if(ne.tag===22&&J){var _e=ne.memoizedState!==null||p1;if(!_e){var ze=ne.alternate,Ze=ze!==null&&ze.memoizedState!==null||ds;ze=p1;var Nt=ds;if(p1=_e,(ds=Ze)&&!Nt)for(gr=ne;gr!==null;)_e=gr,Ze=_e.child,_e.tag===22&&_e.memoizedState!==null?Bk(ne):Ze!==null?(Ze.return=_e,gr=Ze):Bk(ne);for(;de!==null;)gr=de,Fk(de),de=de.sibling;gr=ne,p1=ze,ds=Nt}Dk(w)}else(ne.subtreeFlags&8772)!==0&&de!==null?(de.return=ne,gr=de):Dk(w)}}function Dk(w){for(;gr!==null;){var j=gr;if((j.flags&8772)!==0){var W=j.alternate;try{if((j.flags&8772)!==0)switch(j.tag){case 0:case 11:case 15:ds||m1(5,j);break;case 1:var J=j.stateNode;if(j.flags&4&&!ds)if(W===null)J.componentDidMount();else{var ne=j.elementType===j.type?W.memoizedProps:Bl(j.type,W.memoizedProps);J.componentDidUpdate(ne,W.memoizedState,J.__reactInternalSnapshotBeforeUpdate)}var de=j.updateQueue;de!==null&&xu(j,de,J);break;case 3:var _e=j.updateQueue;if(_e!==null){if(W=null,j.child!==null)switch(j.child.tag){case 5:W=j.child.stateNode;break;case 1:W=j.child.stateNode}xu(j,_e,W)}break;case 5:var ze=j.stateNode;if(W===null&&j.flags&4){W=ze;var Ze=j.memoizedProps;switch(j.type){case"button":case"input":case"select":case"textarea":Ze.autoFocus&&W.focus();break;case"img":Ze.src&&(W.src=Ze.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(j.memoizedState===null){var Nt=j.alternate;if(Nt!==null){var Gt=Nt.memoizedState;if(Gt!==null){var Jt=Gt.dehydrated;Jt!==null&&jo(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}ds||j.flags&512&&H2(j)}catch(Vt){Ea(j,j.return,Vt)}}if(j===w){gr=null;break}if(W=j.sibling,W!==null){W.return=j.return,gr=W;break}gr=j.return}}function Lk(w){for(;gr!==null;){var j=gr;if(j===w){gr=null;break}var W=j.sibling;if(W!==null){W.return=j.return,gr=W;break}gr=j.return}}function Bk(w){for(;gr!==null;){var j=gr;try{switch(j.tag){case 0:case 11:case 15:var W=j.return;try{m1(4,j)}catch(Ze){Ea(j,W,Ze)}break;case 1:var J=j.stateNode;if(typeof J.componentDidMount=="function"){var ne=j.return;try{J.componentDidMount()}catch(Ze){Ea(j,ne,Ze)}}var de=j.return;try{H2(j)}catch(Ze){Ea(j,de,Ze)}break;case 5:var _e=j.return;try{H2(j)}catch(Ze){Ea(j,_e,Ze)}}}catch(Ze){Ea(j,j.return,Ze)}if(j===w){gr=null;break}var ze=j.sibling;if(ze!==null){ze.return=j.return,gr=ze;break}gr=j.return}}var Cz=Math.ceil,g1=S.ReactCurrentDispatcher,K2=S.ReactCurrentOwner,rl=S.ReactCurrentBatchConfig,yn=0,ji=null,Wa=null,qi=0,Io=0,N0=To(0),si=0,Lm=null,Yf=0,y1=0,X2=0,Bm=null,so=null,Y2=0,j0=1/0,Su=null,v1=!1,J2=null,Ud=null,b1=!1,qd=null,x1=0,$m=0,Z2=null,w1=-1,_1=0;function Bs(){return(yn&6)!==0?Le():w1!==-1?w1:w1=Le()}function zd(w){return(w.mode&1)===0?1:(yn&2)!==0&&qi!==0?qi&-qi:Cn.transition!==null?(_1===0&&(_1=an()),_1):(w=Hr,w!==0||(w=window.event,w=w===void 0?16:Pf(w.type)),w)}function ql(w,j,W,J){if(50<$m)throw $m=0,Z2=null,Error(e(185));ti(w,W,J),((yn&2)===0||w!==ji)&&(w===ji&&((yn&2)===0&&(y1|=W),si===4&&Wd(w,qi)),oo(w,J),W===1&&yn===0&&(j.mode&1)===0&&(j0=Le()+500,Vf&&fe()))}function oo(w,j){var W=w.callbackNode;ba(w,j);var J=ua(w,w===ji?qi:0);if(J===0)W!==null&&$t(W),w.callbackNode=null,w.callbackPriority=0;else if(j=J&-J,w.callbackPriority!==j){if(W!=null&&$t(W),j===1)w.tag===0?ae(Uk.bind(null,w)):Q(Uk.bind(null,w)),E2(function(){(yn&6)===0&&fe()}),W=null;else{switch(gi(J)){case 1:W=Et;break;case 4:W=Qt;break;case 16:W=Ut;break;case 536870912:W=Ur;break;default:W=Ut}W=Xk(W,$k.bind(null,w))}w.callbackPriority=j,w.callbackNode=W}}function $k(w,j){if(w1=-1,_1=0,(yn&6)!==0)throw Error(e(327));var W=w.callbackNode;if(k0()&&w.callbackNode!==W)return null;var J=ua(w,w===ji?qi:0);if(J===0)return null;if((J&30)!==0||(J&w.expiredLanes)!==0||j)j=S1(w,J);else{j=J;var ne=yn;yn|=2;var de=zk();(ji!==w||qi!==j)&&(Su=null,j0=Le()+500,Zf(w,j));do try{Iz();break}catch(ze){qk(w,ze)}while(!0);ii(),g1.current=de,yn=ne,Wa!==null?j=0:(ji=null,qi=0,j=si)}if(j!==0){if(j===2&&(ne=rs(w),ne!==0&&(J=ne,j=Q2(w,ne))),j===1)throw W=Lm,Zf(w,0),Wd(w,J),oo(w,Le()),W;if(j===6)Wd(w,J);else{if(ne=w.current.alternate,(J&30)===0&&!Pz(ne)&&(j=S1(w,J),j===2&&(de=rs(w),de!==0&&(J=de,j=Q2(w,de))),j===1))throw W=Lm,Zf(w,0),Wd(w,J),oo(w,Le()),W;switch(w.finishedWork=ne,w.finishedLanes=J,j){case 0:case 1:throw Error(e(345));case 2:Qf(w,so,Su);break;case 3:if(Wd(w,J),(J&130023424)===J&&(j=Y2+500-Le(),10<j)){if(ua(w,0)!==0)break;if(ne=w.suspendedLanes,(ne&J)!==J){Bs(),w.pingedLanes|=w.suspendedLanes&ne;break}w.timeoutHandle=km(Qf.bind(null,w,so,Su),j);break}Qf(w,so,Su);break;case 4:if(Wd(w,J),(J&4194240)===J)break;for(j=w.eventTimes,ne=-1;0<J;){var _e=31-Pr(J);de=1<<_e,_e=j[_e],_e>ne&&(ne=_e),J&=~de}if(J=ne,J=Le()-J,J=(120>J?120:480>J?480:1080>J?1080:1920>J?1920:3e3>J?3e3:4320>J?4320:1960*Cz(J/1960))-J,10<J){w.timeoutHandle=km(Qf.bind(null,w,so,Su),J);break}Qf(w,so,Su);break;case 5:Qf(w,so,Su);break;default:throw Error(e(329))}}}return oo(w,Le()),w.callbackNode===W?$k.bind(null,w):null}function Q2(w,j){var W=Bm;return w.current.memoizedState.isDehydrated&&(Zf(w,j).flags|=256),w=S1(w,j),w!==2&&(j=so,so=W,j!==null&&ew(j)),w}function ew(w){so===null?so=w:so.push.apply(so,w)}function Pz(w){for(var j=w;;){if(j.flags&16384){var W=j.updateQueue;if(W!==null&&(W=W.stores,W!==null))for(var J=0;J<W.length;J++){var ne=W[J],de=ne.getSnapshot;ne=ne.value;try{if(!gn(de(),ne))return!1}catch{return!1}}}if(W=j.child,j.subtreeFlags&16384&&W!==null)W.return=j,j=W;else{if(j===w)break;for(;j.sibling===null;){if(j.return===null||j.return===w)return!0;j=j.return}j.sibling.return=j.return,j=j.sibling}}return!0}function Wd(w,j){for(j&=~X2,j&=~y1,w.suspendedLanes|=j,w.pingedLanes&=~j,w=w.expirationTimes;0<j;){var W=31-Pr(j),J=1<<W;w[W]=-1,j&=~J}}function Uk(w){if((yn&6)!==0)throw Error(e(327));k0();var j=ua(w,0);if((j&1)===0)return oo(w,Le()),null;var W=S1(w,j);if(w.tag!==0&&W===2){var J=rs(w);J!==0&&(j=J,W=Q2(w,J))}if(W===1)throw W=Lm,Zf(w,0),Wd(w,j),oo(w,Le()),W;if(W===6)throw Error(e(345));return w.finishedWork=w.current.alternate,w.finishedLanes=j,Qf(w,so,Su),oo(w,Le()),null}function tw(w,j){var W=yn;yn|=1;try{return w(j)}finally{yn=W,yn===0&&(j0=Le()+500,Vf&&fe())}}function Jf(w){qd!==null&&qd.tag===0&&(yn&6)===0&&k0();var j=yn;yn|=1;var W=rl.transition,J=Hr;try{if(rl.transition=null,Hr=1,w)return w()}finally{Hr=J,rl.transition=W,yn=j,(yn&6)===0&&fe()}}function rw(){Io=N0.current,Nn(N0)}function Zf(w,j){w.finishedWork=null,w.finishedLanes=0;var W=w.timeoutHandle;if(W!==-1&&(w.timeoutHandle=-1,t1(W)),Wa!==null)for(W=Wa.return;W!==null;){var J=W;switch(tt(J),J.tag){case 1:J=J.type.childContextTypes,J!=null&&d0();break;case 3:Qo(),Nn(os),Nn(ai),Im();break;case 5:Pm(J);break;case 4:Qo();break;case 13:Nn(Vn);break;case 19:Nn(Vn);break;case 10:cs(J.type._context);break;case 22:case 23:rw()}W=W.return}if(ji=w,Wa=w=Hd(w.current,null),qi=Io=j,si=0,Lm=null,X2=y1=Yf=0,so=Bm=null,Ms!==null){for(j=0;j<Ms.length;j++)if(W=Ms[j],J=W.interleaved,J!==null){W.interleaved=null;var ne=J.next,de=W.pending;if(de!==null){var _e=de.next;de.next=ne,J.next=_e}W.pending=J}Ms=null}return w}function qk(w,j){do{var W=Wa;try{if(ii(),h0.current=u1,Dd){for(var J=Jn.memoizedState;J!==null;){var ne=J.queue;ne!==null&&(ne.pending=null),J=J.next}Dd=!1}if(el=0,wa=ka=Jn=null,Dl=!1,Ld=0,K2.current=null,W===null||W.return===null){si=1,Lm=j,Wa=null;break}e:{var de=w,_e=W.return,ze=W,Ze=j;if(j=qi,ze.flags|=32768,Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Nt=Ze,Gt=ze,Jt=Gt.tag;if((Gt.mode&1)===0&&(Jt===0||Jt===11||Jt===15)){var Vt=Gt.alternate;Vt?(Gt.updateQueue=Vt.updateQueue,Gt.memoizedState=Vt.memoizedState,Gt.lanes=Vt.lanes):(Gt.updateQueue=null,Gt.memoizedState=null)}var hr=hk(_e);if(hr!==null){hr.flags&=-257,pk(hr,_e,ze,de,j),hr.mode&1&&fk(de,Nt,j),j=hr,Ze=Nt;var wr=j.updateQueue;if(wr===null){var Nr=new Set;Nr.add(Ze),j.updateQueue=Nr}else wr.add(Ze);break e}else{if((j&1)===0){fk(de,Nt,j),nw();break e}Ze=Error(e(426))}}else if(Tt&&ze.mode&1){var La=hk(_e);if(La!==null){(La.flags&65536)===0&&(La.flags|=256),pk(La,_e,ze,de,j),jn(_0(Ze,ze));break e}}de=Ze=_0(Ze,ze),si!==4&&(si=2),Bm===null?Bm=[de]:Bm.push(de),de=_e;do{switch(de.tag){case 3:de.flags|=65536,j&=-j,de.lanes|=j;var bt=uk(de,Ze,j);ao(de,bt);break e;case 1:ze=Ze;var at=de.type,_t=de.stateNode;if((de.flags&128)===0&&(typeof at.getDerivedStateFromError=="function"||_t!==null&&typeof _t.componentDidCatch=="function"&&(Ud===null||!Ud.has(_t)))){de.flags|=65536,j&=-j,de.lanes|=j;var nr=dk(de,ze,j);ao(de,nr);break e}}de=de.return}while(de!==null)}Hk(W)}catch(kr){j=kr,Wa===W&&W!==null&&(Wa=W=W.return);continue}break}while(!0)}function zk(){var w=g1.current;return g1.current=u1,w===null?u1:w}function nw(){(si===0||si===3||si===2)&&(si=4),ji===null||(Yf&268435455)===0&&(y1&268435455)===0||Wd(ji,qi)}function S1(w,j){var W=yn;yn|=2;var J=zk();(ji!==w||qi!==j)&&(Su=null,Zf(w,j));do try{Oz();break}catch(ne){qk(w,ne)}while(!0);if(ii(),yn=W,g1.current=J,Wa!==null)throw Error(e(261));return ji=null,qi=0,si}function Oz(){for(;Wa!==null;)Wk(Wa)}function Iz(){for(;Wa!==null&&!er();)Wk(Wa)}function Wk(w){var j=Kk(w.alternate,w,Io);w.memoizedProps=w.pendingProps,j===null?Hk(w):Wa=j,K2.current=null}function Hk(w){var j=w;do{var W=j.alternate;if(w=j.return,(j.flags&32768)===0){if(W=jz(W,j,Io),W!==null){Wa=W;return}}else{if(W=kz(W,j),W!==null){W.flags&=32767,Wa=W;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{si=6,Wa=null;return}}if(j=j.sibling,j!==null){Wa=j;return}Wa=j=w}while(j!==null);si===0&&(si=5)}function Qf(w,j,W){var J=Hr,ne=rl.transition;try{rl.transition=null,Hr=1,Mz(w,j,W,J)}finally{rl.transition=ne,Hr=J}return null}function Mz(w,j,W,J){do k0();while(qd!==null);if((yn&6)!==0)throw Error(e(327));W=w.finishedWork;var ne=w.finishedLanes;if(W===null)return null;if(w.finishedWork=null,w.finishedLanes=0,W===w.current)throw Error(e(177));w.callbackNode=null,w.callbackPriority=0;var de=W.lanes|W.childLanes;if(wo(w,de),w===ji&&(Wa=ji=null,qi=0),(W.subtreeFlags&2064)===0&&(W.flags&2064)===0||b1||(b1=!0,Xk(Ut,function(){return k0(),null})),de=(W.flags&15990)!==0,(W.subtreeFlags&15990)!==0||de){de=rl.transition,rl.transition=null;var _e=Hr;Hr=1;var ze=yn;yn|=4,K2.current=null,Az(w,W),Rk(W,w),uu(mu),dd=!!Wf,mu=Wf=null,w.current=W,Tz(W),je(),yn=ze,Hr=_e,rl.transition=de}else w.current=W;if(b1&&(b1=!1,qd=w,x1=ne),de=w.pendingLanes,de===0&&(Ud=null),mr(W.stateNode),oo(w,Le()),j!==null)for(J=w.onRecoverableError,W=0;W<j.length;W++)ne=j[W],J(ne.value,{componentStack:ne.stack,digest:ne.digest});if(v1)throw v1=!1,w=J2,J2=null,w;return(x1&1)!==0&&w.tag!==0&&k0(),de=w.pendingLanes,(de&1)!==0?w===Z2?$m++:($m=0,Z2=w):$m=0,fe(),null}function k0(){if(qd!==null){var w=gi(x1),j=rl.transition,W=Hr;try{if(rl.transition=null,Hr=16>w?16:w,qd===null)var J=!1;else{if(w=qd,qd=null,x1=0,(yn&6)!==0)throw Error(e(331));var ne=yn;for(yn|=4,gr=w.current;gr!==null;){var de=gr,_e=de.child;if((gr.flags&16)!==0){var ze=de.deletions;if(ze!==null){for(var Ze=0;Ze<ze.length;Ze++){var Nt=ze[Ze];for(gr=Nt;gr!==null;){var Gt=gr;switch(Gt.tag){case 0:case 11:case 15:Dm(8,Gt,de)}var Jt=Gt.child;if(Jt!==null)Jt.return=Gt,gr=Jt;else for(;gr!==null;){Gt=gr;var Vt=Gt.sibling,hr=Gt.return;if(Ck(Gt),Gt===Nt){gr=null;break}if(Vt!==null){Vt.return=hr,gr=Vt;break}gr=hr}}}var wr=de.alternate;if(wr!==null){var Nr=wr.child;if(Nr!==null){wr.child=null;do{var La=Nr.sibling;Nr.sibling=null,Nr=La}while(Nr!==null)}}gr=de}}if((de.subtreeFlags&2064)!==0&&_e!==null)_e.return=de,gr=_e;else e:for(;gr!==null;){if(de=gr,(de.flags&2048)!==0)switch(de.tag){case 0:case 11:case 15:Dm(9,de,de.return)}var bt=de.sibling;if(bt!==null){bt.return=de.return,gr=bt;break e}gr=de.return}}var at=w.current;for(gr=at;gr!==null;){_e=gr;var _t=_e.child;if((_e.subtreeFlags&2064)!==0&&_t!==null)_t.return=_e,gr=_t;else e:for(_e=at;gr!==null;){if(ze=gr,(ze.flags&2048)!==0)try{switch(ze.tag){case 0:case 11:case 15:m1(9,ze)}}catch(kr){Ea(ze,ze.return,kr)}if(ze===_e){gr=null;break e}var nr=ze.sibling;if(nr!==null){nr.return=ze.return,gr=nr;break e}gr=ze.return}}if(yn=ne,fe(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Tr,w)}catch{}J=!0}return J}finally{Hr=W,rl.transition=j}}return!1}function Vk(w,j,W){j=_0(W,j),j=uk(w,j,1),w=no(w,j,1),j=Bs(),w!==null&&(ti(w,1,j),oo(w,j))}function Ea(w,j,W){if(w.tag===3)Vk(w,w,W);else for(;j!==null;){if(j.tag===3){Vk(j,w,W);break}else if(j.tag===1){var J=j.stateNode;if(typeof j.type.getDerivedStateFromError=="function"||typeof J.componentDidCatch=="function"&&(Ud===null||!Ud.has(J))){w=_0(W,w),w=dk(j,w,1),j=no(j,w,1),w=Bs(),j!==null&&(ti(j,1,w),oo(j,w));break}}j=j.return}}function Rz(w,j,W){var J=w.pingCache;J!==null&&J.delete(j),j=Bs(),w.pingedLanes|=w.suspendedLanes&W,ji===w&&(qi&W)===W&&(si===4||si===3&&(qi&130023424)===qi&&500>Le()-Y2?Zf(w,0):X2|=W),oo(w,j)}function Gk(w,j){j===0&&((w.mode&1)===0?j=1:(j=Yn,Yn<<=1,(Yn&130023424)===0&&(Yn=4194304)));var W=Bs();w=bn(w,j),w!==null&&(ti(w,j,W),oo(w,W))}function Fz(w){var j=w.memoizedState,W=0;j!==null&&(W=j.retryLane),Gk(w,W)}function Dz(w,j){var W=0;switch(w.tag){case 13:var J=w.stateNode,ne=w.memoizedState;ne!==null&&(W=ne.retryLane);break;case 19:J=w.stateNode;break;default:throw Error(e(314))}J!==null&&J.delete(j),Gk(w,W)}var Kk;Kk=function(w,j,W){if(w!==null)if(w.memoizedProps!==j.pendingProps||os.current)io=!0;else{if((w.lanes&W)===0&&(j.flags&128)===0)return io=!1,Nz(w,j,W);io=(w.flags&131072)!==0}else io=!1,Tt&&(j.flags&1048576)!==0&&Lt(j,Ae,j.index);switch(j.lanes=0,j.tag){case 2:var J=j.type;h1(w,j),w=j.pendingProps;var ne=Id(j,ai.current);ia(j,W),ne=Gf(null,j,J,w,ne,W);var de=tl();return j.flags|=1,typeof ne=="object"&&ne!==null&&typeof ne.render=="function"&&ne.$$typeof===void 0?(j.tag=1,j.memoizedState=null,j.updateQueue=null,ls(J)?(de=!0,vu(j)):de=!1,j.memoizedState=ne.state!==null&&ne.state!==void 0?ne.state:null,f0(j),ne.updater=d1,j.stateNode=ne,ne._reactInternals=j,M2(j,J,w,W),j=L2(null,j,J,!0,de,W)):(j.tag=0,Tt&&de&&jt(j),Ls(null,j,ne,W),j=j.child),j;case 16:J=j.elementType;e:{switch(h1(w,j),w=j.pendingProps,ne=J._init,J=ne(J._payload),j.type=J,ne=j.tag=Bz(J),w=Bl(J,w),ne){case 0:j=D2(null,j,J,w,W);break e;case 1:j=xk(null,j,J,w,W);break e;case 11:j=mk(null,j,J,w,W);break e;case 14:j=gk(null,j,J,Bl(J.type,w),W);break e}throw Error(e(306,J,""))}return j;case 0:return J=j.type,ne=j.pendingProps,ne=j.elementType===J?ne:Bl(J,ne),D2(w,j,J,ne,W);case 1:return J=j.type,ne=j.pendingProps,ne=j.elementType===J?ne:Bl(J,ne),xk(w,j,J,ne,W);case 3:e:{if(wk(j),w===null)throw Error(e(387));J=j.pendingProps,de=j.memoizedState,ne=de.element,Cm(w,j),Rl(j,J,null,W);var _e=j.memoizedState;if(J=_e.element,de.isDehydrated)if(de={element:J,isDehydrated:!1,cache:_e.cache,pendingSuspenseBoundaries:_e.pendingSuspenseBoundaries,transitions:_e.transitions},j.updateQueue.baseState=de,j.memoizedState=de,j.flags&256){ne=_0(Error(e(423)),j),j=_k(w,j,J,W,ne);break e}else if(J!==ne){ne=_0(Error(e(424)),j),j=_k(w,j,J,W,ne);break e}else for(Ct=Bi(j.stateNode.containerInfo.firstChild),rt=j,Tt=!0,Ot=null,W=vn(j,null,J,W),j.child=W;W;)W.flags=W.flags&-3|4096,W=W.sibling;else{if(Yr(),J===ne){j=_u(w,j,W);break e}Ls(w,j,J,W)}j=j.child}return j;case 5:return i1(j),w===null&&or(j),J=j.type,ne=j.pendingProps,de=w!==null?w.memoizedProps:null,_e=ne.children,jm(J,ne)?_e=null:de!==null&&jm(J,de)&&(j.flags|=32),bk(w,j),Ls(w,j,_e,W),j.child;case 6:return w===null&&or(j),null;case 13:return Sk(w,j,W);case 4:return Fd(j,j.stateNode.containerInfo),J=j.pendingProps,w===null?j.child=Ra(j,null,J,W):Ls(w,j,J,W),j.child;case 11:return J=j.type,ne=j.pendingProps,ne=j.elementType===J?ne:Bl(J,ne),mk(w,j,J,ne,W);case 7:return Ls(w,j,j.pendingProps,W),j.child;case 8:return Ls(w,j,j.pendingProps.children,W),j.child;case 12:return Ls(w,j,j.pendingProps.children,W),j.child;case 10:e:{if(J=j.type._context,ne=j.pendingProps,de=j.memoizedProps,_e=ne.value,Tn(Si,J._currentValue),J._currentValue=_e,de!==null)if(gn(de.value,_e)){if(de.children===ne.children&&!os.current){j=_u(w,j,W);break e}}else for(de=j.child,de!==null&&(de.return=j);de!==null;){var ze=de.dependencies;if(ze!==null){_e=de.child;for(var Ze=ze.firstContext;Ze!==null;){if(Ze.context===J){if(de.tag===1){Ze=ro(-1,W&-W),Ze.tag=2;var Nt=de.updateQueue;if(Nt!==null){Nt=Nt.shared;var Gt=Nt.pending;Gt===null?Ze.next=Ze:(Ze.next=Gt.next,Gt.next=Ze),Nt.pending=Ze}}de.lanes|=W,Ze=de.alternate,Ze!==null&&(Ze.lanes|=W),to(de.return,W,j),ze.lanes|=W;break}Ze=Ze.next}}else if(de.tag===10)_e=de.type===j.type?null:de.child;else if(de.tag===18){if(_e=de.return,_e===null)throw Error(e(341));_e.lanes|=W,ze=_e.alternate,ze!==null&&(ze.lanes|=W),to(_e,W,j),_e=de.sibling}else _e=de.child;if(_e!==null)_e.return=de;else for(_e=de;_e!==null;){if(_e===j){_e=null;break}if(de=_e.sibling,de!==null){de.return=_e.return,_e=de;break}_e=_e.return}de=_e}Ls(w,j,ne.children,W),j=j.child}return j;case 9:return ne=j.type,J=j.pendingProps.children,ia(j,W),ne=ja(ne),J=J(ne),j.flags|=1,Ls(w,j,J,W),j.child;case 14:return J=j.type,ne=Bl(J,j.pendingProps),ne=Bl(J.type,ne),gk(w,j,J,ne,W);case 15:return yk(w,j,j.type,j.pendingProps,W);case 17:return J=j.type,ne=j.pendingProps,ne=j.elementType===J?ne:Bl(J,ne),h1(w,j),j.tag=1,ls(J)?(w=!0,vu(j)):w=!1,ia(j,W),lk(j,J,ne),M2(j,J,ne,W),L2(null,j,J,!0,w,W);case 19:return jk(w,j,W);case 22:return vk(w,j,W)}throw Error(e(156,j.tag))};function Xk(w,j){return Mt(w,j)}function Lz(w,j,W,J){this.tag=w,this.key=W,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=j,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=J,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(w,j,W,J){return new Lz(w,j,W,J)}function aw(w){return w=w.prototype,!(!w||!w.isReactComponent)}function Bz(w){if(typeof w=="function")return aw(w)?1:0;if(w!=null){if(w=w.$$typeof,w===D)return 11;if(w===C)return 14}return 2}function Hd(w,j){var W=w.alternate;return W===null?(W=nl(w.tag,j,w.key,w.mode),W.elementType=w.elementType,W.type=w.type,W.stateNode=w.stateNode,W.alternate=w,w.alternate=W):(W.pendingProps=j,W.type=w.type,W.flags=0,W.subtreeFlags=0,W.deletions=null),W.flags=w.flags&14680064,W.childLanes=w.childLanes,W.lanes=w.lanes,W.child=w.child,W.memoizedProps=w.memoizedProps,W.memoizedState=w.memoizedState,W.updateQueue=w.updateQueue,j=w.dependencies,W.dependencies=j===null?null:{lanes:j.lanes,firstContext:j.firstContext},W.sibling=w.sibling,W.index=w.index,W.ref=w.ref,W}function N1(w,j,W,J,ne,de){var _e=2;if(J=w,typeof w=="function")aw(w)&&(_e=1);else if(typeof w=="string")_e=5;else e:switch(w){case A:return eh(W.children,ne,de,j);case O:_e=8,ne|=8;break;case M:return w=nl(12,W,j,ne|2),w.elementType=M,w.lanes=de,w;case T:return w=nl(13,W,j,ne),w.elementType=T,w.lanes=de,w;case R:return w=nl(19,W,j,ne),w.elementType=R,w.lanes=de,w;case E:return j1(W,ne,de,j);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case z:_e=10;break e;case U:_e=9;break e;case D:_e=11;break e;case C:_e=14;break e;case N:_e=16,J=null;break e}throw Error(e(130,w==null?w:typeof w,""))}return j=nl(_e,W,j,ne),j.elementType=w,j.type=J,j.lanes=de,j}function eh(w,j,W,J){return w=nl(7,w,J,j),w.lanes=W,w}function j1(w,j,W,J){return w=nl(22,w,J,j),w.elementType=E,w.lanes=W,w.stateNode={isHidden:!1},w}function iw(w,j,W){return w=nl(6,w,null,j),w.lanes=W,w}function sw(w,j,W){return j=nl(4,w.children!==null?w.children:[],w.key,j),j.lanes=W,j.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},j}function $z(w,j,W,J,ne){this.tag=j,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jr(0),this.expirationTimes=Jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.identifierPrefix=J,this.onRecoverableError=ne,this.mutableSourceEagerHydrationData=null}function ow(w,j,W,J,ne,de,_e,ze,Ze){return w=new $z(w,j,W,ze,Ze),j===1?(j=1,de===!0&&(j|=8)):j=0,de=nl(3,null,null,j),w.current=de,de.stateNode=w,de.memoizedState={element:J,isDehydrated:W,cache:null,transitions:null,pendingSuspenseBoundaries:null},f0(de),w}function Uz(w,j,W){var J=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:J==null?null:""+J,children:w,containerInfo:j,implementation:W}}function Yk(w){if(!w)return _c;w=w._reactInternals;e:{if(Te(w)!==w||w.tag!==1)throw Error(e(170));var j=w;do{switch(j.tag){case 3:j=j.stateNode.context;break e;case 1:if(ls(j.type)){j=j.stateNode.__reactInternalMemoizedMergedChildContext;break e}}j=j.return}while(j!==null);throw Error(e(171))}if(w.tag===1){var W=w.type;if(ls(W))return Tm(w,W,j)}return j}function Jk(w,j,W,J,ne,de,_e,ze,Ze){return w=ow(W,J,!0,w,ne,de,_e,ze,Ze),w.context=Yk(null),W=w.current,J=Bs(),ne=zd(W),de=ro(J,ne),de.callback=j??null,no(W,de,ne),w.current.lanes=ne,ti(w,ne,J),oo(w,J),w}function k1(w,j,W,J){var ne=j.current,de=Bs(),_e=zd(ne);return W=Yk(W),j.context===null?j.context=W:j.pendingContext=W,j=ro(de,_e),j.payload={element:w},J=J===void 0?null:J,J!==null&&(j.callback=J),w=no(ne,j,_e),w!==null&&(ql(w,ne,_e,de),bu(w,ne,_e)),_e}function E1(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return w.child.stateNode;default:return w.child.stateNode}}function Zk(w,j){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var W=w.retryLane;w.retryLane=W!==0&&W<j?W:j}}function lw(w,j){Zk(w,j),(w=w.alternate)&&Zk(w,j)}function qz(){return null}var Qk=typeof reportError=="function"?reportError:function(w){console.error(w)};function cw(w){this._internalRoot=w}A1.prototype.render=cw.prototype.render=function(w){var j=this._internalRoot;if(j===null)throw Error(e(409));k1(w,j,null,null)},A1.prototype.unmount=cw.prototype.unmount=function(){var w=this._internalRoot;if(w!==null){this._internalRoot=null;var j=w.containerInfo;Jf(function(){k1(null,w,null,null)}),j[_i]=null}};function A1(w){this._internalRoot=w}A1.prototype.unstable_scheduleHydration=function(w){if(w){var j=ri();w={blockedOn:null,target:w,priority:j};for(var W=0;W<Mi.length&&j!==0&&j<Mi[W].priority;W++);Mi.splice(W,0,w),W===0&&cd(w)}};function uw(w){return!(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)}function T1(w){return!(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11&&(w.nodeType!==8||w.nodeValue!==" react-mount-point-unstable "))}function eE(){}function zz(w,j,W,J,ne){if(ne){if(typeof J=="function"){var de=J;J=function(){var Nt=E1(_e);de.call(Nt)}}var _e=Jk(j,J,w,0,null,!1,!1,"",eE);return w._reactRootContainer=_e,w[_i]=_e.current,hu(w.nodeType===8?w.parentNode:w),Jf(),_e}for(;ne=w.lastChild;)w.removeChild(ne);if(typeof J=="function"){var ze=J;J=function(){var Nt=E1(Ze);ze.call(Nt)}}var Ze=ow(w,0,!1,null,null,!1,!1,"",eE);return w._reactRootContainer=Ze,w[_i]=Ze.current,hu(w.nodeType===8?w.parentNode:w),Jf(function(){k1(j,Ze,W,J)}),Ze}function C1(w,j,W,J,ne){var de=W._reactRootContainer;if(de){var _e=de;if(typeof ne=="function"){var ze=ne;ne=function(){var Ze=E1(_e);ze.call(Ze)}}k1(j,_e,w,ne)}else _e=zz(W,j,w,ne,J);return E1(_e)}Ts=function(w){switch(w.tag){case 3:var j=w.stateNode;if(j.current.memoizedState.isDehydrated){var W=Ia(j.pendingLanes);W!==0&&(_o(j,W|1),oo(j,Le()),(yn&6)===0&&(j0=Le()+500,fe()))}break;case 13:Jf(function(){var J=bn(w,1);if(J!==null){var ne=Bs();ql(J,w,1,ne)}}),lw(w,1)}},So=function(w){if(w.tag===13){var j=bn(w,134217728);if(j!==null){var W=Bs();ql(j,w,134217728,W)}lw(w,134217728)}},wl=function(w){if(w.tag===13){var j=zd(w),W=bn(w,j);if(W!==null){var J=Bs();ql(W,w,j,J)}lw(w,j)}},ri=function(){return Hr},yi=function(w,j){var W=Hr;try{return Hr=w,j()}finally{Hr=W}},Xt=function(w,j,W){switch(j){case"input":if(pe(w,W),j=W.name,W.type==="radio"&&j!=null){for(W=w;W.parentNode;)W=W.parentNode;for(W=W.querySelectorAll("input[name="+JSON.stringify(""+j)+'][type="radio"]'),j=0;j<W.length;j++){var J=W[j];if(J!==w&&J.form===w.form){var ne=Hf(J);if(!ne)throw Error(e(90));se(J),pe(J,ne)}}}break;case"textarea":He(w,W);break;case"select":j=W.value,j!=null&&Oe(w,!!W.multiple,j,!1)}},fr=tw,xr=Jf;var Wz={usingClientEntryPoint:!1,Events:[Od,gu,Hf,Zt,lr,tw]},Um={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hz={bundleType:Um.bundleType,version:Um.version,rendererPackageName:Um.rendererPackageName,rendererConfig:Um.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(w){return w=it(w),w===null?null:w.stateNode},findFiberByHostInstance:Um.findFiberByHostInstance||qz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var P1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!P1.isDisabled&&P1.supportsFiber)try{Tr=P1.inject(Hz),Sr=P1}catch{}}return lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wz,lo.createPortal=function(w,j){var W=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uw(j))throw Error(e(200));return Uz(w,j,null,W)},lo.createRoot=function(w,j){if(!uw(w))throw Error(e(299));var W=!1,J="",ne=Qk;return j!=null&&(j.unstable_strictMode===!0&&(W=!0),j.identifierPrefix!==void 0&&(J=j.identifierPrefix),j.onRecoverableError!==void 0&&(ne=j.onRecoverableError)),j=ow(w,1,!1,null,null,W,!1,J,ne),w[_i]=j.current,hu(w.nodeType===8?w.parentNode:w),new cw(j)},lo.findDOMNode=function(w){if(w==null)return null;if(w.nodeType===1)return w;var j=w._reactInternals;if(j===void 0)throw typeof w.render=="function"?Error(e(188)):(w=Object.keys(w).join(","),Error(e(268,w)));return w=it(j),w=w===null?null:w.stateNode,w},lo.flushSync=function(w){return Jf(w)},lo.hydrate=function(w,j,W){if(!T1(j))throw Error(e(200));return C1(null,w,j,!0,W)},lo.hydrateRoot=function(w,j,W){if(!uw(w))throw Error(e(405));var J=W!=null&&W.hydratedSources||null,ne=!1,de="",_e=Qk;if(W!=null&&(W.unstable_strictMode===!0&&(ne=!0),W.identifierPrefix!==void 0&&(de=W.identifierPrefix),W.onRecoverableError!==void 0&&(_e=W.onRecoverableError)),j=Jk(j,null,w,1,W??null,ne,!1,de,_e),w[_i]=j.current,hu(w),J)for(w=0;w<J.length;w++)W=J[w],ne=W._getVersion,ne=ne(W._source),j.mutableSourceEagerHydrationData==null?j.mutableSourceEagerHydrationData=[W,ne]:j.mutableSourceEagerHydrationData.push(W,ne);return new A1(j)},lo.render=function(w,j,W){if(!T1(j))throw Error(e(200));return C1(null,w,j,!1,W)},lo.unmountComponentAtNode=function(w){if(!T1(w))throw Error(e(40));return w._reactRootContainer?(Jf(function(){C1(null,null,w,!1,function(){w._reactRootContainer=null,w[_i]=null})}),!0):!1},lo.unstable_batchedUpdates=tw,lo.unstable_renderSubtreeIntoContainer=function(w,j,W,J){if(!T1(W))throw Error(e(200));if(w==null||w._reactInternals===void 0)throw Error(e(38));return C1(w,j,W,!1,J)},lo.version="18.3.1-next-f1338f8080-20240426",lo}var lE;function sR(){if(lE)return hw.exports;lE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),hw.exports=Qz(),hw.exports}var cE;function eW(){if(cE)return O1;cE=1;var r=sR();return O1.createRoot=r.createRoot,O1.hydrateRoot=r.hydrateRoot,O1}var tW=eW();sR();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fg(){return Fg=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Fg.apply(this,arguments)}var of;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(of||(of={}));const uE="popstate";function rW(r){r===void 0&&(r={});function t(n,a){let{pathname:i,search:s,hash:o}=n.location;return MS("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:Cv(a)}return aW(t,e,null,r)}function qa(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Y8(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nW(){return Math.random().toString(36).substr(2,8)}function dE(r,t){return{usr:r.state,key:r.key,idx:t}}function MS(r,t,e,n){return e===void 0&&(e=null),Fg({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?im(t):t,{state:e,key:t&&t.key||n||nW()})}function Cv(r){let{pathname:t="/",search:e="",hash:n=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function im(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function aW(r,t,e,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o=of.Pop,l=null,c=u();c==null&&(c=0,s.replaceState(Fg({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function f(){o=of.Pop;let m=u(),v=m==null?null:m-c;c=m,l&&l({action:o,location:y.location,delta:v})}function h(m,v){o=of.Push;let b=MS(y.location,m,v);c=u()+1;let x=dE(b,c),S=y.createHref(b);try{s.pushState(x,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(S)}i&&l&&l({action:o,location:y.location,delta:1})}function p(m,v){o=of.Replace;let b=MS(y.location,m,v);c=u();let x=dE(b,c),S=y.createHref(b);s.replaceState(x,"",S),i&&l&&l({action:o,location:y.location,delta:0})}function g(m){let v=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof m=="string"?m:Cv(m);return b=b.replace(/ $/,"%20"),qa(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let y={get action(){return o},get location(){return r(a,s)},listen(m){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(uE,f),l=m,()=>{a.removeEventListener(uE,f),l=null}},createHref(m){return t(a,m)},createURL:g,encodeLocation(m){let v=g(m);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(m){return s.go(m)}};return y}var fE;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(fE||(fE={}));function iW(r,t,e){return e===void 0&&(e="/"),sW(r,t,e)}function sW(r,t,e,n){let a=typeof t=="string"?im(t):t,i=J8(a.pathname||"/",e);if(i==null)return null;let s=oR(r);oW(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=bW(i);o=gW(s[l],c)}return o}function oR(r,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let a=(i,s,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(qa(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ff([n,l.relativePath]),u=e.concat(l);i.children&&i.children.length>0&&(qa(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),oR(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:pW(c,i.index),routesMeta:u})};return r.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,s);else for(let l of lR(i.path))a(i,s,l)}),t}function lR(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),i=e.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=lR(n.join("/")),o=[];return o.push(...s.map(l=>l===""?i:[i,l].join("/"))),a&&o.push(...s),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function oW(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:mW(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const lW=/^:[\w-]+$/,cW=3,uW=2,dW=1,fW=10,hW=-2,hE=r=>r==="*";function pW(r,t){let e=r.split("/"),n=e.length;return e.some(hE)&&(n+=hW),t&&(n+=uW),e.filter(a=>!hE(a)).reduce((a,i)=>a+(lW.test(i)?cW:i===""?dW:fW),n)}function mW(r,t){return r.length===t.length&&r.slice(0,-1).every((n,a)=>n===t[a])?r[r.length-1]-t[t.length-1]:0}function gW(r,t,e){let{routesMeta:n}=r,a={},i="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=yW({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:ff([i,f.pathname]),pathnameBase:NW(ff([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=ff([i,f.pathnameBase]))}return s}function yW(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=vW(r.path,r.caseSensitive,r.end),a=t.match(e);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((c,u,f)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let y=o[f]||"";s=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[f];return p&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:s,pattern:r}}function vW(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),Y8(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function bW(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Y8(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function J8(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}const xW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wW=r=>xW.test(r);function _W(r,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:a=""}=typeof r=="string"?im(r):r,i;if(e)if(wW(e))i=e;else{if(e.includes("//")){let s=e;e=e.replace(/\/\/+/g,"/"),Y8(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+e))}e.startsWith("/")?i=pE(e.substring(1),"/"):i=pE(e,t)}else i=t;return{pathname:i,search:jW(n),hash:kW(a)}}function pE(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function gw(r,t,e,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SW(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Z8(r,t){let e=SW(r);return t?e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function Q8(r,t,e,n){n===void 0&&(n=!1);let a;typeof r=="string"?a=im(r):(a=Fg({},r),qa(!a.pathname||!a.pathname.includes("?"),gw("?","pathname","search",a)),qa(!a.pathname||!a.pathname.includes("#"),gw("#","pathname","hash",a)),qa(!a.search||!a.search.includes("#"),gw("#","search","hash",a)));let i=r===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=e;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?t[f]:"/"}let l=_W(a,o),c=s&&s!=="/"&&s.endsWith("/"),u=(i||s===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ff=r=>r.join("/").replace(/\/\/+/g,"/"),NW=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),jW=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,kW=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function EW(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const cR=["post","put","patch","delete"];new Set(cR);const AW=["get",...cR];new Set(AW);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dg(){return Dg=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Dg.apply(this,arguments)}const eN=ie.createContext(null),TW=ie.createContext(null),xf=ie.createContext(null),yx=ie.createContext(null),wf=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),uR=ie.createContext(null);function CW(r,t){let{relative:e}=t===void 0?{}:t;sm()||qa(!1);let{basename:n,navigator:a}=ie.useContext(xf),{hash:i,pathname:s,search:o}=fR(r,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:ff([n,s])),a.createHref({pathname:l,search:o,hash:i})}function sm(){return ie.useContext(yx)!=null}function vl(){return sm()||qa(!1),ie.useContext(yx).location}function dR(r){ie.useContext(xf).static||ie.useLayoutEffect(r)}function pi(){let{isDataRoute:r}=ie.useContext(wf);return r?zW():PW()}function PW(){sm()||qa(!1);let r=ie.useContext(eN),{basename:t,future:e,navigator:n}=ie.useContext(xf),{matches:a}=ie.useContext(wf),{pathname:i}=vl(),s=JSON.stringify(Z8(a,e.v7_relativeSplatPath)),o=ie.useRef(!1);return dR(()=>{o.current=!0}),ie.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=Q8(c,JSON.parse(s),i,u.relative==="path");r==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ff([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,s,i,r])}function fR(r,t){let{relative:e}=t===void 0?{}:t,{future:n}=ie.useContext(xf),{matches:a}=ie.useContext(wf),{pathname:i}=vl(),s=JSON.stringify(Z8(a,n.v7_relativeSplatPath));return ie.useMemo(()=>Q8(r,JSON.parse(s),i,e==="path"),[r,s,i,e])}function OW(r,t){return IW(r,t)}function IW(r,t,e,n){sm()||qa(!1);let{navigator:a}=ie.useContext(xf),{matches:i}=ie.useContext(wf),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=vl(),u;if(t){var f;let m=typeof t=="string"?im(t):t;l==="/"||(f=m.pathname)!=null&&f.startsWith(l)||qa(!1),u=m}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let m=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let g=iW(r,{pathname:p}),y=LW(g&&g.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:ff([l,a.encodeLocation?a.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:ff([l,a.encodeLocation?a.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,e,n);return t&&y?ie.createElement(yx.Provider,{value:{location:Dg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:of.Pop}},y):y}function MW(){let r=qW(),t=EW(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},t),e?ie.createElement("pre",{style:a},e):null,null)}const RW=ie.createElement(MW,null);class FW extends ie.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?ie.createElement(wf.Provider,{value:this.props.routeContext},ie.createElement(uR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DW(r){let{routeContext:t,match:e,children:n}=r,a=ie.useContext(eN);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(wf.Provider,{value:t},n)}function LW(r,t,e,n){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),r==null){var i;if(!e)return null;if(e.errors)r=e.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let s=r,o=(a=e)==null?void 0:a.errors;if(o!=null){let u=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);u>=0||qa(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(e&&n&&n.v7_partialHydration)for(let u=0;u<s.length;u++){let f=s[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:h,errors:p}=e,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,f,h)=>{let p,g=!1,y=null,m=null;e&&(p=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||RW,l&&(c<0&&h===0?(WW("route-fallback"),g=!0,m=null):c===h&&(g=!0,m=f.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,h+1)),b=()=>{let x;return p?x=y:g?x=m:f.route.Component?x=ie.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=u,ie.createElement(DW,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:e!=null},children:x})};return e&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?ie.createElement(FW,{location:e.location,revalidation:e.revalidation,component:y,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var hR=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(hR||{}),pR=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(pR||{});function BW(r){let t=ie.useContext(eN);return t||qa(!1),t}function $W(r){let t=ie.useContext(TW);return t||qa(!1),t}function UW(r){let t=ie.useContext(wf);return t||qa(!1),t}function mR(r){let t=UW(),e=t.matches[t.matches.length-1];return e.route.id||qa(!1),e.route.id}function qW(){var r;let t=ie.useContext(uR),e=$W(),n=mR();return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function zW(){let{router:r}=BW(hR.UseNavigateStable),t=mR(pR.UseNavigateStable),e=ie.useRef(!1);return dR(()=>{e.current=!0}),ie.useCallback(function(a,i){i===void 0&&(i={}),e.current&&(typeof a=="number"?r.navigate(a):r.navigate(a,Dg({fromRouteId:t},i)))},[r,t])}const mE={};function WW(r,t,e){mE[r]||(mE[r]=!0)}function HW(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Gi(r){let{to:t,replace:e,state:n,relative:a}=r;sm()||qa(!1);let{future:i,static:s}=ie.useContext(xf),{matches:o}=ie.useContext(wf),{pathname:l}=vl(),c=pi(),u=Q8(t,Z8(o,i.v7_relativeSplatPath),l,a==="path"),f=JSON.stringify(u);return ie.useEffect(()=>c(JSON.parse(f),{replace:e,state:n,relative:a}),[c,f,a,e,n]),null}function pn(r){qa(!1)}function VW(r){let{basename:t="/",children:e=null,location:n,navigationType:a=of.Pop,navigator:i,static:s=!1,future:o}=r;sm()&&qa(!1);let l=t.replace(/^\/*/,"/"),c=ie.useMemo(()=>({basename:l,navigator:i,static:s,future:Dg({v7_relativeSplatPath:!1},o)}),[l,o,i,s]);typeof n=="string"&&(n=im(n));let{pathname:u="/",search:f="",hash:h="",state:p=null,key:g="default"}=n,y=ie.useMemo(()=>{let m=J8(u,l);return m==null?null:{location:{pathname:m,search:f,hash:h,state:p,key:g},navigationType:a}},[l,u,f,h,p,g,a]);return y==null?null:ie.createElement(xf.Provider,{value:c},ie.createElement(yx.Provider,{children:e,value:y}))}function GW(r){let{children:t,location:e}=r;return OW(RS(t),e)}new Promise(()=>{});function RS(r,t){t===void 0&&(t=[]);let e=[];return ie.Children.forEach(r,(n,a)=>{if(!ie.isValidElement(n))return;let i=[...t,a];if(n.type===ie.Fragment){e.push.apply(e,RS(n.props.children,i));return}n.type!==pn&&qa(!1),!n.props.index||!n.props.children||qa(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=RS(n.props.children,i)),e.push(s)}),e}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function FS(){return FS=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},FS.apply(this,arguments)}function KW(r,t){if(r==null)return{};var e={},n=Object.keys(r),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(e[a]=r[a]);return e}function XW(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function YW(r,t){return r.button===0&&(!t||t==="_self")&&!XW(r)}const JW=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ZW="6";try{window.__reactRouterVersion=ZW}catch{}const QW="startTransition",gE=Yz[QW];function eH(r){let{basename:t,children:e,future:n,window:a}=r,i=ie.useRef();i.current==null&&(i.current=rW({window:a,v5Compat:!0}));let s=i.current,[o,l]=ie.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},u=ie.useCallback(f=>{c&&gE?gE(()=>l(f)):l(f)},[l,c]);return ie.useLayoutEffect(()=>s.listen(u),[s,u]),ie.useEffect(()=>HW(n),[n]),ie.createElement(VW,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,future:n})}const tH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oa=ie.forwardRef(function(t,e){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:o,target:l,to:c,preventScrollReset:u,viewTransition:f}=t,h=KW(t,JW),{basename:p}=ie.useContext(xf),g,y=!1;if(typeof c=="string"&&rH.test(c)&&(g=c,tH))try{let x=new URL(window.location.href),S=c.startsWith("//")?new URL(x.protocol+c):new URL(c),_=J8(S.pathname,p);S.origin===x.origin&&_!=null?c=_+S.search+S.hash:y=!0}catch{}let m=CW(c,{relative:a}),v=nH(c,{replace:s,state:o,target:l,preventScrollReset:u,relative:a,viewTransition:f});function b(x){n&&n(x),x.defaultPrevented||v(x)}return ie.createElement("a",FS({},h,{href:g||m,onClick:y||i?n:b,ref:e,target:l}))});var yE;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(yE||(yE={}));var vE;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(vE||(vE={}));function nH(r,t){let{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}=t===void 0?{}:t,l=pi(),c=vl(),u=fR(r,{relative:s});return ie.useCallback(f=>{if(YW(f,e)){f.preventDefault();let h=n!==void 0?n:Cv(c)===Cv(u);l(r,{replace:h,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,u,n,a,e,r,i,s,o])}let aH={data:""},iH=r=>{if(typeof window=="object"){let t=(r?r.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(r||document.head).appendChild(t),t.firstChild}return r||aH},sH=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,oH=/\/\*[^]*?\*\/|  +/g,bE=/\n+/g,rf=(r,t)=>{let e="",n="",a="";for(let i in r){let s=r[i];i[0]=="@"?i[1]=="i"?e=i+" "+s+";":n+=i[1]=="f"?rf(s,i):i+"{"+rf(s,i[1]=="k"?"":t)+"}":typeof s=="object"?n+=rf(s,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):i):s!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=rf.p?rf.p(i,s):i+":"+s+";")}return e+(t&&a?t+"{"+a+"}":a)+n},Nu={},gR=r=>{if(typeof r=="object"){let t="";for(let e in r)t+=e+gR(r[e]);return t}return r},lH=(r,t,e,n,a)=>{let i=gR(r),s=Nu[i]||(Nu[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Nu[s]){let l=i!==r?r:(c=>{let u,f,h=[{}];for(;u=sH.exec(c.replace(oH,""));)u[4]?h.shift():u[3]?(f=u[3].replace(bE," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][u[1]]=u[2].replace(bE," ").trim();return h[0]})(r);Nu[s]=rf(a?{["@keyframes "+s]:l}:l,e?"":"."+s)}let o=e&&Nu.g?Nu.g:null;return e&&(Nu.g=Nu[s]),((l,c,u,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Nu[s],t,n,o),s},cH=(r,t,e)=>r.reduce((n,a,i)=>{let s=t[i];if(s&&s.call){let o=s(e),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":rf(o,""):o===!1?"":o}return n+a+(s??"")},"");function vx(r){let t=this||{},e=r.call?r(t.p):r;return lH(e.unshift?e.raw?cH(e,[].slice.call(arguments,1),t.p):e.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):e,iH(t.target),t.g,t.o,t.k)}let yR,DS,LS;vx.bind({g:1});let Ku=vx.bind({k:1});function uH(r,t,e,n){rf.p=t,yR=r,DS=e,LS=n}function _f(r,t){let e=this||{};return function(){let n=arguments;function a(i,s){let o=Object.assign({},i),l=o.className||a.className;e.p=Object.assign({theme:DS&&DS()},o),e.o=/ *go\d+/.test(l),o.className=vx.apply(e,n)+(l?" "+l:"");let c=r;return r[0]&&(c=o.as||r,delete o.as),LS&&c[0]&&LS(o),yR(c,o)}return a}}var dH=r=>typeof r=="function",Pv=(r,t)=>dH(r)?r(t):r,fH=(()=>{let r=0;return()=>(++r).toString()})(),vR=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");r=!t||t.matches}return r}})(),hH=20,tN="default",bR=(r,t)=>{let{toastLimit:e}=r.settings;switch(t.type){case 0:return{...r,toasts:[t.toast,...r.toasts].slice(0,e)};case 1:return{...r,toasts:r.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return bR(r,{type:r.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...r,toasts:r.toasts.map(s=>s.id===a||a===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...r,pausedAt:t.time};case 6:let i=t.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},bv=[],xR={toasts:[],pausedAt:void 0,settings:{toastLimit:hH}},Fc={},wR=(r,t=tN)=>{Fc[t]=bR(Fc[t]||xR,r),bv.forEach(([e,n])=>{e===t&&n(Fc[t])})},_R=r=>Object.keys(Fc).forEach(t=>wR(r,t)),pH=r=>Object.keys(Fc).find(t=>Fc[t].toasts.some(e=>e.id===r)),bx=(r=tN)=>t=>{wR(t,r)},mH={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gH=(r={},t=tN)=>{let[e,n]=ie.useState(Fc[t]||xR),a=ie.useRef(Fc[t]);ie.useEffect(()=>(a.current!==Fc[t]&&n(Fc[t]),bv.push([t,n]),()=>{let s=bv.findIndex(([o])=>o===t);s>-1&&bv.splice(s,1)}),[t]);let i=e.toasts.map(s=>{var o,l,c;return{...r,...r[s.type],...s,removeDelay:s.removeDelay||((o=r[s.type])==null?void 0:o.removeDelay)||(r==null?void 0:r.removeDelay),duration:s.duration||((l=r[s.type])==null?void 0:l.duration)||(r==null?void 0:r.duration)||mH[s.type],style:{...r.style,...(c=r[s.type])==null?void 0:c.style,...s.style}}});return{...e,toasts:i}},yH=(r,t="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...e,id:(e==null?void 0:e.id)||fH()}),Ry=r=>(t,e)=>{let n=yH(t,r,e);return bx(n.toasterId||pH(n.id))({type:2,toast:n}),n.id},ci=(r,t)=>Ry("blank")(r,t);ci.error=Ry("error");ci.success=Ry("success");ci.loading=Ry("loading");ci.custom=Ry("custom");ci.dismiss=(r,t)=>{let e={type:3,toastId:r};t?bx(t)(e):_R(e)};ci.dismissAll=r=>ci.dismiss(void 0,r);ci.remove=(r,t)=>{let e={type:4,toastId:r};t?bx(t)(e):_R(e)};ci.removeAll=r=>ci.remove(void 0,r);ci.promise=(r,t,e)=>{let n=ci.loading(t.loading,{...e,...e==null?void 0:e.loading});return typeof r=="function"&&(r=r()),r.then(a=>{let i=t.success?Pv(t.success,a):void 0;return i?ci.success(i,{id:n,...e,...e==null?void 0:e.success}):ci.dismiss(n),a}).catch(a=>{let i=t.error?Pv(t.error,a):void 0;i?ci.error(i,{id:n,...e,...e==null?void 0:e.error}):ci.dismiss(n)}),r};var vH=1e3,bH=(r,t="default")=>{let{toasts:e,pausedAt:n}=gH(r,t),a=ie.useRef(new Map).current,i=ie.useCallback((f,h=vH)=>{if(a.has(f))return;let p=setTimeout(()=>{a.delete(f),s({type:4,toastId:f})},h);a.set(f,p)},[]);ie.useEffect(()=>{if(n)return;let f=Date.now(),h=e.map(p=>{if(p.duration===1/0)return;let g=(p.duration||0)+p.pauseDuration-(f-p.createdAt);if(g<0){p.visible&&ci.dismiss(p.id);return}return setTimeout(()=>ci.dismiss(p.id,t),g)});return()=>{h.forEach(p=>p&&clearTimeout(p))}},[e,n,t]);let s=ie.useCallback(bx(t),[t]),o=ie.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=ie.useCallback((f,h)=>{s({type:1,toast:{id:f,height:h}})},[s]),c=ie.useCallback(()=>{n&&s({type:6,time:Date.now()})},[n,s]),u=ie.useCallback((f,h)=>{let{reverseOrder:p=!1,gutter:g=8,defaultPosition:y}=h||{},m=e.filter(x=>(x.position||y)===(f.position||y)&&x.height),v=m.findIndex(x=>x.id===f.id),b=m.filter((x,S)=>S<v&&x.visible).length;return m.filter(x=>x.visible).slice(...p?[b+1]:[0,b]).reduce((x,S)=>x+(S.height||0)+g,0)},[e]);return ie.useEffect(()=>{e.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let h=a.get(f.id);h&&(clearTimeout(h),a.delete(f.id))}})},[e,i]),{toasts:e,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:u}}},xH=Ku`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wH=Ku`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_H=Ku`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,SH=_f("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xH} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wH} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_H} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,NH=Ku`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jH=_f("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${NH} 1s linear infinite;
`,kH=Ku`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,EH=Ku`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,AH=_f("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kH} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${EH} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,TH=_f("div")`
  position: absolute;
`,CH=_f("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,PH=Ku`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OH=_f("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${PH} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,IH=({toast:r})=>{let{icon:t,type:e,iconTheme:n}=r;return t!==void 0?typeof t=="string"?ie.createElement(OH,null,t):t:e==="blank"?null:ie.createElement(CH,null,ie.createElement(jH,{...n}),e!=="loading"&&ie.createElement(TH,null,e==="error"?ie.createElement(SH,{...n}):ie.createElement(AH,{...n})))},MH=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,RH=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,FH="0%{opacity:0;} 100%{opacity:1;}",DH="0%{opacity:1;} 100%{opacity:0;}",LH=_f("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,BH=_f("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$H=(r,t)=>{let e=r.includes("top")?1:-1,[n,a]=vR()?[FH,DH]:[MH(e),RH(e)];return{animation:t?`${Ku(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ku(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},UH=ie.memo(({toast:r,position:t,style:e,children:n})=>{let a=r.height?$H(r.position||t||"top-center",r.visible):{opacity:0},i=ie.createElement(IH,{toast:r}),s=ie.createElement(BH,{...r.ariaProps},Pv(r.message,r));return ie.createElement(LH,{className:r.className,style:{...a,...e,...r.style}},typeof n=="function"?n({icon:i,message:s}):ie.createElement(ie.Fragment,null,i,s))});uH(ie.createElement);var qH=({id:r,className:t,style:e,onHeightUpdate:n,children:a})=>{let i=ie.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;n(r,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[r,n]);return ie.createElement("div",{ref:i,className:t,style:e},a)},zH=(r,t)=>{let e=r.includes("top"),n=e?{top:0}:{bottom:0},a=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vR()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(e?1:-1)}px)`,...n,...a}},WH=vx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,I1=16,HH=({reverseOrder:r,position:t="top-center",toastOptions:e,gutter:n,children:a,toasterId:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:c}=bH(e,i);return ie.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:I1,left:I1,right:I1,bottom:I1,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let f=u.position||t,h=c.calculateOffset(u,{reverseOrder:r,gutter:n,defaultPosition:t}),p=zH(f,h);return ie.createElement(qH,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?WH:"",style:p},u.type==="custom"?Pv(u.message,u):a?a(u):ie.createElement(UH,{toast:u,position:f}))}))},Ce=ci,ju={},M1={},BS=function(r,t){return BS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},BS(r,t)};function SR(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");BS(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ov=function(){return Ov=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ov.apply(this,arguments)};function om(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function NR(r,t,e,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var o=r.length-1;o>=0;o--)(s=r[o])&&(i=(a<3?s(i):a>3?s(t,e,i):s(t,e))||i);return a>3&&i&&Object.defineProperty(t,e,i),i}function jR(r,t){return function(e,n){t(e,n,r)}}function kR(r,t,e,n,a,i){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var o=n.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&r?n.static?r:r.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),f,h=!1,p=e.length-1;p>=0;p--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(v){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(v||null))};var m=(0,e[p])(o==="accessor"?{get:u.get,set:u.set}:u[l],g);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=s(m.get))&&(u.get=f),(f=s(m.set))&&(u.set=f),(f=s(m.init))&&a.unshift(f)}else(f=s(m))&&(o==="field"?a.unshift(f):u[l]=f)}c&&Object.defineProperty(c,n.name,u),h=!0}function ER(r,t,e){for(var n=arguments.length>2,a=0;a<t.length;a++)e=n?t[a].call(r,e):t[a].call(r);return n?e:void 0}function AR(r){return typeof r=="symbol"?r:"".concat(r)}function TR(r,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function CR(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function br(r,t,e,n){function a(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(f){s(f)}}function l(u){try{c(n.throw(u))}catch(f){s(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,t||[])).next())})}function PR(r,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(e=0)),e;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,a=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){e.label=c[1];break}if(c[0]===6&&e.label<i[1]){e.label=i[1],i=c;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(c);break}i[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var xx=Object.create?(function(r,t,e,n){n===void 0&&(n=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,n,a)}):(function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]});function OR(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&xx(t,r,e)}function Iv(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rN(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return i}function IR(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(rN(arguments[t]));return r}function MR(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),a=0,t=0;t<e;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function RR(r,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return r.concat(i||Array.prototype.slice.call(t))}function _p(r){return this instanceof _p?(this.v=r,this):new _p(r)}function FR(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(p){return function(g){return Promise.resolve(g).then(p,f)}}function o(p,g){n[p]&&(a[p]=function(y){return new Promise(function(m,v){i.push([p,y,m,v])>1||l(p,y)})},g&&(a[p]=g(a[p])))}function l(p,g){try{c(n[p](g))}catch(y){h(i[0][3],y)}}function c(p){p.value instanceof _p?Promise.resolve(p.value.v).then(u,f):h(i[0][2],p)}function u(p){l("next",p)}function f(p){l("throw",p)}function h(p,g){p(g),i.shift(),i.length&&l(i[0][0],i[0][1])}}function DR(r){var t,e;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=r[a]?function(s){return(e=!e)?{value:_p(r[a](s)),done:!1}:i?i(s):s}:i}}function LR(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof Iv=="function"?Iv(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=r[i]&&function(s){return new Promise(function(o,l){s=r[i](s),a(o,l,s.done,s.value)})}}function a(i,s,o,l){Promise.resolve(l).then(function(c){i({value:c,done:o})},s)}}function BR(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}var VH=Object.create?(function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}):function(r,t){r.default=t},$S=function(r){return $S=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},$S(r)};function $R(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e=$S(r),n=0;n<e.length;n++)e[n]!=="default"&&xx(t,r,e[n]);return VH(t,r),t}function UR(r){return r&&r.__esModule?r:{default:r}}function qR(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function zR(r,t,e,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!a:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(r,e):a?a.value=e:t.set(r,e),e}function WR(r,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?t===r:r.has(t)}function HR(r,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],e&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),r.stack.push({value:t,dispose:n,async:e})}else e&&r.stack.push({async:!0});return t}var GH=typeof SuppressedError=="function"?SuppressedError:function(r,t,e){var n=new Error(e);return n.name="SuppressedError",n.error=r,n.suppressed=t,n};function VR(r){function t(i){r.error=r.hasError?new GH(i,r.error,"An error was suppressed during disposal."):i,r.hasError=!0}var e,n=0;function a(){for(;e=r.stack.pop();)try{if(!e.async&&n===1)return n=0,r.stack.push(e),Promise.resolve().then(a);if(e.dispose){var i=e.dispose.call(e.value);if(e.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return a()}function GR(r,t){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?e:a+i+"."+s.toLowerCase()+"js"}):r}const KH={__extends:SR,__assign:Ov,__rest:om,__decorate:NR,__param:jR,__esDecorate:kR,__runInitializers:ER,__propKey:AR,__setFunctionName:TR,__metadata:CR,__awaiter:br,__generator:PR,__createBinding:xx,__exportStar:OR,__values:Iv,__read:rN,__spread:IR,__spreadArrays:MR,__spreadArray:RR,__await:_p,__asyncGenerator:FR,__asyncDelegator:DR,__asyncValues:LR,__makeTemplateObject:BR,__importStar:$R,__importDefault:UR,__classPrivateFieldGet:qR,__classPrivateFieldSet:zR,__classPrivateFieldIn:WR,__addDisposableResource:HR,__disposeResources:VR,__rewriteRelativeImportExtension:GR},XH=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:HR,get __assign(){return Ov},__asyncDelegator:DR,__asyncGenerator:FR,__asyncValues:LR,__await:_p,__awaiter:br,__classPrivateFieldGet:qR,__classPrivateFieldIn:WR,__classPrivateFieldSet:zR,__createBinding:xx,__decorate:NR,__disposeResources:VR,__esDecorate:kR,__exportStar:OR,__extends:SR,__generator:PR,__importDefault:UR,__importStar:$R,__makeTemplateObject:BR,__metadata:CR,__param:jR,__propKey:AR,__read:rN,__rest:om,__rewriteRelativeImportExtension:GR,__runInitializers:ER,__setFunctionName:TR,__spread:IR,__spreadArray:RR,__spreadArrays:MR,__values:Iv,default:KH},Symbol.toStringTag,{value:"Module"})),YH=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);let wx=class extends Error{constructor(t,e="FunctionsError",n){super(t),this.name=e,this.context=n}},KR=class extends wx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},US=class extends wx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},qS=class extends wx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Mv;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Mv||(Mv={}));class JH{constructor(t,{headers:e={},customFetch:n,region:a=Mv.Any}={}){this.url=t,this.headers=e,this.region=a,this.fetch=YH(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return br(this,arguments,void 0,function*(e,n={}){var a;let i,s;try{const{headers:o,method:l,body:c,signal:u,timeout:f}=n;let h={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${e}`);p&&p!=="any"&&(h["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let y;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(h["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(h["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let m=u;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),u?(m=s.signal,u.addEventListener("abort",()=>s.abort())):m=s.signal);const v=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:y,signal:m}).catch(_=>{throw new KR(_)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new US(v);if(!v.ok)throw new qS(v);let x=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return x==="application/json"?S=yield v.json():x==="application/octet-stream"||x==="application/pdf"?S=yield v.blob():x==="text/event-stream"?S=v:x==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof qS||o instanceof US?o.context:void 0}}finally{i&&clearTimeout(i)}})}}const ZH=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Mv},FunctionsClient:JH,FunctionsError:wx,FunctionsFetchError:KR,FunctionsHttpError:qS,FunctionsRelayError:US},Symbol.toStringTag,{value:"Module"})),XR=My(ZH);var fs={};const lm=My(XH);var R1={},F1={},D1={},L1={},B1={},$1={},xE;function YR(){if(xE)return $1;xE=1,Object.defineProperty($1,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return $1.default=r,$1}var wE;function JR(){if(wE)return B1;wE=1,Object.defineProperty(B1,"__esModule",{value:!0});const t=lm.__importDefault(YR());let e=class{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,f,h;let p=null,g=null,y=null,m=l.status,v=l.statusText;if(l.ok){if(this.method!=="HEAD"){const _=await l.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=_:g=JSON.parse(_))}const x=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&S&&S.length>1&&(y=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,m=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const x=await l.text();try{p=JSON.parse(x),Array.isArray(p)&&l.status===404&&(g=[],p=null,m=200,v="OK")}catch{l.status===404&&x===""?(m=204,v="No Content"):p={message:x}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,m=200,v="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:g,count:y,status:m,statusText:v}});return this.shouldThrowOnError||(o=o.catch(l=>{var c,u,f,h,p,g;let y="";const m=l==null?void 0:l.cause;if(m){const v=(c=m==null?void 0:m.message)!==null&&c!==void 0?c:"",b=(u=m==null?void 0:m.code)!==null&&u!==void 0?u:"";y=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,y+=`

Caused by: ${(h=m==null?void 0:m.name)!==null&&h!==void 0?h:"Error"}: ${v}`,b&&(y+=` (${b})`),m!=null&&m.stack&&(y+=`
${m.stack}`)}else y=(p=l==null?void 0:l.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"FetchError"}: ${l==null?void 0:l.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}};return B1.default=e,B1}var _E;function ZR(){if(_E)return L1;_E=1,Object.defineProperty(L1,"__esModule",{value:!0});const t=lm.__importDefault(JR());let e=class extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this.url.searchParams.set(c,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var u;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return L1.default=e,L1}var SE;function nN(){if(SE)return D1;SE=1,Object.defineProperty(D1,"__esModule",{value:!0});const t=lm.__importDefault(ZR()),e=new RegExp("[,()]");let n=class extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}regexMatch(i,s){return this.url.searchParams.append(i,`match.${s}`),this}regexIMatch(i,s){return this.url.searchParams.append(i,`imatch.${s}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}isDistinct(i,s){return this.url.searchParams.append(i,`isdistinct.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(l=>typeof l=="string"&&e.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}};return D1.default=n,D1}var NE;function QR(){if(NE)return F1;NE=1,Object.defineProperty(F1,"__esModule",{value:!0});const t=lm.__importDefault(nN());let e=class{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=o}select(a,i){const{head:s=!1,count:o}=i??{},l=s?"HEAD":"GET";let c=!1;const u=(a??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var o;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const c=a.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(a,{count:i}={}){var s;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return F1.default=e,F1}var jE;function QH(){if(jE)return R1;jE=1,Object.defineProperty(R1,"__esModule",{value:!0});const r=lm,t=r.__importDefault(QR()),e=r.__importDefault(nN());let n=class eF{constructor(i,{headers:s={},schema:o,fetch:l}={}){this.url=i,this.headers=new Headers(s),this.schemaName=o,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new eF(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:o=!1,get:l=!1,count:c}={}){var u;let f;const h=new URL(`${this.url}/rpc/${i}`);let p;o||l?(f=o?"HEAD":"GET",Object.entries(s).filter(([y,m])=>m!==void 0).map(([y,m])=>[y,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([y,m])=>{h.searchParams.append(y,m)})):(f="POST",p=s);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new e.default({method:f,url:h,headers:g,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return R1.default=n,R1}var kE;function tF(){if(kE)return fs;kE=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.PostgrestError=fs.PostgrestBuilder=fs.PostgrestTransformBuilder=fs.PostgrestFilterBuilder=fs.PostgrestQueryBuilder=fs.PostgrestClient=void 0;const r=lm,t=r.__importDefault(QH());fs.PostgrestClient=t.default;const e=r.__importDefault(QR());fs.PostgrestQueryBuilder=e.default;const n=r.__importDefault(nN());fs.PostgrestFilterBuilder=n.default;const a=r.__importDefault(ZR());fs.PostgrestTransformBuilder=a.default;const i=r.__importDefault(JR());fs.PostgrestBuilder=i.default;const s=r.__importDefault(YR());return fs.PostgrestError=s.default,fs.default={PostgrestClient:t.default,PostgrestQueryBuilder:e.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:s.default},fs}class rF{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const n=e.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const n=this.getWebSocketConstructor();return new n(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const eV="2.86.2",tV=`realtime-js/${eV}`,nF="1.0.0",rV="2.0.0",EE=nF,zS=1e4,nV=1e3,aV=100;var ph;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ph||(ph={}));var Va;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Va||(Va={}));var Jl;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Jl||(Jl={}));var WS;(function(r){r.websocket="websocket"})(WS||(WS={}));var mh;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(mh||(mh={}));class iV{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,e){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,n;const a=(n=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var e,n;const a=(n=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,e,n){var a,i;const s=t.topic,o=(a=t.ref)!==null&&a!==void 0?a:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+s.length+c.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let g=new DataView(p),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,l.length),g.setUint8(y++,o.length),g.setUint8(y++,s.length),g.setUint8(y++,c.length),g.setUint8(y++,f.length),g.setUint8(y++,e),Array.from(l,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(s,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(c,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(f,v=>g.setUint8(y++,v.charCodeAt(0)));var m=new Uint8Array(p.byteLength+n.byteLength);return m.set(new Uint8Array(p),0),m.set(new Uint8Array(n),p.byteLength),m.buffer}decode(t,e){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return e(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,o,l]=n;return e({join_ref:a,ref:i,topic:s,event:o,payload:l})}return e({})}_binaryDecode(t){const e=new DataView(t),n=e.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,a)}}_decodeUserBroadcast(t,e,n){const a=e.getUint8(1),i=e.getUint8(2),s=e.getUint8(3),o=e.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(t.slice(l,l+a));l=l+a;const u=n.decode(t.slice(l,l+i));l=l+i;const f=n.decode(t.slice(l,l+s));l=l+s;const h=t.slice(l,t.byteLength),p=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST_EVENT,event:u,payload:p};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(t,e){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>e.includes(n)))}}class aF{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qn;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Qn||(Qn={}));const AE=(r,t,e={})=>{var n;const a=(n=e.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=sV(s,r,t,a),i),{}):{}},sV=(r,t,e,n)=>{const a=t.find(o=>o.name===r),i=a==null?void 0:a.type,s=e[r];return i&&!n.includes(i)?iF(i,s):HS(s)},iF=(r,t)=>{if(r.charAt(0)==="_"){const e=r.slice(1,r.length);return uV(t,e)}switch(r){case Qn.bool:return oV(t);case Qn.float4:case Qn.float8:case Qn.int2:case Qn.int4:case Qn.int8:case Qn.numeric:case Qn.oid:return lV(t);case Qn.json:case Qn.jsonb:return cV(t);case Qn.timestamp:return dV(t);case Qn.abstime:case Qn.date:case Qn.daterange:case Qn.int4range:case Qn.int8range:case Qn.money:case Qn.reltime:case Qn.text:case Qn.time:case Qn.timestamptz:case Qn.timetz:case Qn.tsrange:case Qn.tstzrange:return HS(t);default:return HS(t)}},HS=r=>r,oV=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},lV=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},cV=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},uV=(r,t)=>{if(typeof r!="string")return r;const e=r.length-1,n=r[e];if(r[0]==="{"&&n==="}"){let i;const s=r.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>iF(t,o))}return r},dV=r=>typeof r=="string"?r.replace(" ","T"):r,sF=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class yw{constructor(t,e,n={},a=zS){this.channel=t,this.event=e,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var VS;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(VS||(VS={}));let oF=class xv{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xv.syncState(this.state,a,i,s),this.pendingDiffs.forEach(l=>{this.state=xv.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=xv.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,n,a){const i=this.cloneDeep(t),s=this.transformState(e),o={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const f=i[c];if(f){const h=u.map(m=>m.presence_ref),p=f.map(m=>m.presence_ref),g=u.filter(m=>p.indexOf(m.presence_ref)<0),y=f.filter(m=>h.indexOf(m.presence_ref)<0);g.length>0&&(o[c]=g),y.length>0&&(l[c]=y)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:l},n,a)}static syncDiff(t,e,n,a){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,l)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),u.length>0){const f=t[o].map(p=>p.presence_ref),h=u.filter(p=>f.indexOf(p.presence_ref)<0);t[o].unshift(...h)}n(o,u,l)}),this.map(s,(o,l)=>{let c=t[o];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),t[o]=c,a(o,c,l),c.length===0&&delete t[o]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(n=>e(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,n)=>{const a=t[n];return"metas"in a?e[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[n]=a,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var GS;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(GS||(GS={}));var ep;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ep||(ep={}));var Pc;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Pc||(Pc={}));const fV=Va;let lF=class cF{constructor(t,e={config:{}},n){var a,i;if(this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=Va.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new yw(this,Jl.join,this.params,this.timeout),this.rejoinTimer=new aF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Va.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Va.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Va.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Va.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Va.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jl.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new oF(this),this.broadcastEndpointURL=sF(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Va.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[ep.PRESENCE]&&this.bindings[ep.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Pc.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Pc.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){t==null||t(Pc.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,m=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,v=[];for(let b=0;b<m;b++){const x=y[b],{filter:{event:S,schema:_,table:I,filter:A}}=x,O=p&&p[b];if(O&&O.event===S&&O.schema===_&&O.table===I&&O.filter===A)v.push(Object.assign(Object.assign({},x),{id:O.id}));else{this.unsubscribe(),this.state=Va.errored,t==null||t(Pc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Pc.SUBSCRIBED);return}}).receive("error",p=>{this.state=Va.errored,t==null||t(Pc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Pc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,n){return this.state===Va.joined&&t===ep.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,n)}async httpSend(t,e,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,e={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=e.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,l;const c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Va.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jl.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new yw(this,Jl.leave,{},t),n.receive("ok",()=>{e(),a("ok")}).receive("timeout",()=>{e(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Va.closed,this.bindings={}}async _fetchWithTimeout(t,e,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:a.signal}));return clearTimeout(i),s}_push(t,e,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new yw(this,t,e,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>aV){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Jl;if(n&&[o,l,c,u].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,e,n);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var g,y,m;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(y=p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(p=>{var g,y,m,v,b,x;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const S=p.id,_=(g=p.filter)===null||g===void 0?void 0:g.event;return S&&((y=e.ids)===null||y===void 0?void 0:y.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((m=e.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const S=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((x=e==null?void 0:e.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:y,table:m,commit_timestamp:v,type:b,errors:x}=g;h=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:v,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===Va.closed}_isJoined(){return this.state===Va.joined}_isJoining(){return this.state===Va.joining}_isLeaving(){return this.state===Va.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,n){const a=t.toLocaleLowerCase(),i={type:a,filter:e,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,e){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&cF.isEqual(a.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jl.close,{},t)}_onError(t){this._on(Jl.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Va.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=AE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=AE(t.columns,t.old_record)),e}};const vw=()=>{},U1={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hV=[1e3,2e3,5e3,1e4],pV=1e4,mV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let gV=class{constructor(t,e){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zS,this.transport=null,this.heartbeatIntervalMs=U1.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vw,this.ref=0,this.reconnectTimer=null,this.vsn=EE,this.logger=vw,this.conn=null,this.sendBuffer=[],this.serializer=new iV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=e==null?void 0:e.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${WS.websocket}`,this.httpEndpoint=sF(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rF.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ph.connecting:return mh.Connecting;case ph.open:return mh.Open;case ph.closing:return mh.Closing;default:return mh.Closed}}isConnected(){return this.connectionState()===mh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new lF(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){const{topic:e,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${e} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(nV,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},U1.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=e,o=s?`(${s})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${a} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(a,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ph.open||this.conn.readyState===ph.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jl.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(e);return`${t}${n}${a}`}_workerObjectUrl(t){let e;if(t)e=t;else{const n=new Blob([mV],{type:"application/javascript"});e=URL.createObjectURL(n)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(n=>{const a={access_token:e,version:tV};e&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Jl.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(e)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new aF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},U1.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,n,a,i,s,o,l,c,u,f,h,p;switch(this.transport=(e=t==null?void 0:t.transport)!==null&&e!==void 0?e:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:zS,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:U1.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:vw,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:EE,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(g=>hV[g-1]||pV),this.vsn){case nF:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:((g,y)=>y(JSON.stringify(g))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:((g,y)=>y(JSON.parse(g)));break;case rV:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}};const yV=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:fV,get REALTIME_LISTEN_TYPES(){return ep},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return GS},get REALTIME_PRESENCE_LISTEN_EVENTS(){return VS},get REALTIME_SUBSCRIBE_STATES(){return Pc},RealtimeChannel:lF,RealtimeClient:gV,RealtimePresence:oF,WebSocketFactory:rF},Symbol.toStringTag,{value:"Module"})),uF=My(yV);class Fy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pa(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class dF extends Fy{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rv extends Fy{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const aN=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),vV=()=>Response,KS=r=>{if(Array.isArray(r))return r.map(e=>KS(e));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([e,n])=>{const a=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=KS(n)}),t},bV=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},xV=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r),bw=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},wV=(r,t,e)=>br(void 0,void 0,void 0,function*(){const n=yield vV();r instanceof n&&!(e!=null&&e.noResolveJson)?r.json().then(a=>{const i=r.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new dF(bw(a),i,s))}).catch(a=>{t(new Rv(bw(a),a))}):t(new Rv(bw(r),r))}),_V=(r,t,e,n)=>{const a={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"||!n?a:(bV(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),e))};function Dy(r,t,e,n,a,i){return br(this,void 0,void 0,function*(){return new Promise((s,o)=>{r(e,_V(t,n,a,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>wV(l,o,n))})})}function Lg(r,t,e,n){return br(this,void 0,void 0,function*(){return Dy(r,"GET",t,e,n)})}function Xl(r,t,e,n,a){return br(this,void 0,void 0,function*(){return Dy(r,"POST",t,n,a,e)})}function XS(r,t,e,n,a){return br(this,void 0,void 0,function*(){return Dy(r,"PUT",t,n,a,e)})}function SV(r,t,e,n){return br(this,void 0,void 0,function*(){return Dy(r,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),n)})}function iN(r,t,e,n,a){return br(this,void 0,void 0,function*(){return Dy(r,"DELETE",t,n,a,e)})}class NV{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return br(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pa(t))return{data:null,error:t};throw t}})}}var fF;class jV{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[fF]="BlobDownloadBuilder",this.promise=null}asStream(){return new NV(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return br(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pa(t))return{data:null,error:t};throw t}})}}fF=Symbol.toStringTag;const kV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},TE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class EV{constructor(t,e={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=aN(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,n,a){return br(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},TE),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),f=yield(t=="PUT"?XS:Xl)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pa(i))return{data:null,error:i};throw i}})}upload(t,e,n){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,n)})}uploadToSignedUrl(t,e,n,a){return br(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:TE.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield XS(this.fetch,o.toString(),l,{headers:u});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(pa(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return br(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const i=yield Xl(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new Fy("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pa(n))return{data:null,error:n};throw n}})}update(t,e,n){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,n)})}move(t,e,n){return br(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pa(a))return{data:null,error:a};throw a}})}copy(t,e,n){return br(this,void 0,void 0,function*(){try{return{data:{path:(yield Xl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pa(a))return{data:null,error:a};throw a}})}createSignedUrl(t,e,n){return br(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Xl(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pa(a))return{data:null,error:a};throw a}})}createSignedUrls(t,e,n){return br(this,void 0,void 0,function*(){try{const a=yield Xl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pa(a))return{data:null,error:a};throw a}})}download(t,e){const a=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),l=()=>Lg(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new jV(l,this.shouldThrowOnError)}info(t){return br(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const n=yield Lg(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:KS(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pa(n))return{data:null,error:n};throw n}})}exists(t){return br(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield SV(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pa(n)&&n instanceof Rv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,e){const n=this._getFinalPath(t),a=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&a.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&a.push(l);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(t){return br(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}list(t,e,n){return br(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},kV),e),{prefix:t||""});return{data:yield Xl(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pa(a))return{data:null,error:a};throw a}})}listV2(t,e){return br(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Xl(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pa(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const hF="2.86.2",pF={"X-Client-Info":`storage-js/${hF}`};class AV{constructor(t,e={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pF),e),this.fetch=aN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return br(this,void 0,void 0,function*(){try{const e=this.listBucketOptionsToQueryString(t);return{data:yield Lg(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}getBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield Lg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}createBucket(t){return br(this,arguments,void 0,function*(e,n={public:!1}){try{return{data:yield Xl(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pa(a))return{data:null,error:a};throw a}})}updateBucket(t,e){return br(this,void 0,void 0,function*(){try{return{data:yield XS(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pa(n))return{data:null,error:n};throw n}})}emptyBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}deleteBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}}var Bg=class extends Error{constructor(r,t){var e;super(r),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((e=t.icebergType)==null?void 0:e.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function TV(r,t,e){const n=new URL(t,r);if(e)for(const[a,i]of Object.entries(e))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function CV(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function PV(r){const t=r.fetchImpl??globalThis.fetch;return{async request({method:e,path:n,query:a,body:i,headers:s}){const o=TV(r.baseUrl,n,a),l=await CV(r.auth),c=await t(o,{method:e,headers:{...i?{"Content-Type":"application/json"}:{},...l,...s},body:i?JSON.stringify(i):void 0}),u=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),h=f&&u?JSON.parse(u):u;if(!c.ok){const p=f?h:void 0,g=p==null?void 0:p.error;throw new Bg((g==null?void 0:g.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:p})}return{status:c.status,headers:c.headers,data:h}}}}function q1(r){return r.join("")}var OV=class{constructor(r,t=""){this.client=r,this.prefix=t}async listNamespaces(r){const t=r?{parent:q1(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(r,t){const e={namespace:r.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${q1(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${q1(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${q1(r.namespace)}`}),!0}catch(t){if(t instanceof Bg&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(r,t){try{return await this.createNamespace(r,t)}catch(e){if(e instanceof Bg&&e.status===409)return;throw e}}};function E0(r){return r.join("")}var IV=class{constructor(r,t="",e){this.client=r,this.prefix=t,this.accessDelegation=e}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${E0(r.namespace)}/tables`})).data.identifiers}async createTable(r,t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${E0(r.namespace)}/tables`,body:t,headers:e})).data.metadata}async updateTable(r,t){const e=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${E0(r.namespace)}/tables/${r.name}`,body:t});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}}async dropTable(r,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${E0(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(r){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${E0(r.namespace)}/tables/${r.name}`,headers:t})).data.metadata}async tableExists(r){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${E0(r.namespace)}/tables/${r.name}`,headers:t}),!0}catch(e){if(e instanceof Bg&&e.status===404)return!1;throw e}}async createTableIfNotExists(r,t){try{return await this.createTable(r,t)}catch(e){if(e instanceof Bg&&e.status===409)return await this.loadTable({namespace:r.namespace,name:t.name});throw e}}},MV=class{constructor(r){var n;let t="v1";r.catalogName&&(t+=`/${r.catalogName}`);const e=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=PV({baseUrl:e,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new OV(this.client,t),this.tableOps=new IV(this.client,t,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,t){return this.namespaceOps.createNamespace(r,t)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,t){return this.tableOps.createTable(r,t)}async updateTable(r,t){return this.tableOps.updateTable(r,t)}async dropTable(r,t){await this.tableOps.dropTable(r,t)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,t){return this.namespaceOps.createNamespaceIfNotExists(r,t)}async createTableIfNotExists(r,t){return this.tableOps.createTableIfNotExists(r,t)}};class mF{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pF),e),this.fetch=aN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}listBuckets(t){return br(this,void 0,void 0,function*(){try{const e=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&e.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&e.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&e.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&e.set("sortOrder",t.sortOrder),t!=null&&t.search&&e.set("search",t.search);const n=e.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Lg(this.fetch,a,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}deleteBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pa(e))return{data:null,error:e};throw e}})}from(t){if(!xV(t))throw new Fy("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new MV({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>br(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const sN={"X-Client-Info":`storage-js/${hF}`,"Content-Type":"application/json"};class oN extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function mo(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class wv extends oN{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gF extends oN{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}var YS;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(YS||(YS={}));const _x=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),RV=()=>Response,yF=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},FV=r=>Array.from(new Float32Array(r)),DV=(r,t)=>{if(t!==void 0&&r.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${r.float32.length}`)},CE=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),LV=(r,t,e)=>br(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(e!=null&&e.noResolveJson)){const a=r.status||500,i=r;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new wv(CE(s),a,o))}).catch(()=>{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new wv(o,a,s))});else{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new wv(o,a,s))}}else t(new gF(CE(r),r))}),BV=(r,t,e,n)=>{const a={method:r,headers:(t==null?void 0:t.headers)||{}};return n?(yF(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),e)):a};function $V(r,t,e,n,a,i){return br(this,void 0,void 0,function*(){return new Promise((s,o)=>{r(e,BV(t,n,a,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>LV(l,o,n))})})}function Uo(r,t,e,n,a){return br(this,void 0,void 0,function*(){return $V(r,"POST",t,n,a,e)})}class vF{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sN),e),this.fetch=_x(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return br(this,void 0,void 0,function*(){try{return{data:(yield Uo(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}getIndex(t,e){return br(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mo(n))return{data:null,error:n};throw n}})}listIndexes(t){return br(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return br(this,void 0,void 0,function*(){try{return{data:(yield Uo(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mo(n))return{data:null,error:n};throw n}})}}class bF{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sN),e),this.fetch=_x(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return br(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Uo(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}getVectors(t){return br(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}listVectors(t){return br(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Uo(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}queryVectors(t){return br(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}deleteVectors(t){return br(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Uo(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}}class xF{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sN),e),this.fetch=_x(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return br(this,void 0,void 0,function*(){try{return{data:(yield Uo(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}getBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}listBuckets(){return br(this,arguments,void 0,function*(t={}){try{return{data:yield Uo(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}deleteBucket(t){return br(this,void 0,void 0,function*(){try{return{data:(yield Uo(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mo(e))return{data:null,error:e};throw e}})}}class wF extends xF{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new _F(this.url,this.headers,t,this.fetch)}createBucket(t){const e=Object.create(null,{createBucket:{get:()=>super.createBucket}});return br(this,void 0,void 0,function*(){return e.createBucket.call(this,t)})}getBucket(t){const e=Object.create(null,{getBucket:{get:()=>super.getBucket}});return br(this,void 0,void 0,function*(){return e.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return br(this,arguments,void 0,function*(e={}){return t.listBuckets.call(this,e)})}deleteBucket(t){const e=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return br(this,void 0,void 0,function*(){return e.deleteBucket.call(this,t)})}}class _F extends vF{constructor(t,e,n,a){super(t,e,a),this.vectorBucketName=n}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return br(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return br(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return br(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return br(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new SF(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class SF extends bF{constructor(t,e,n,a,i){super(t,e,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return br(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return br(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return br(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return br(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return br(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class UV extends AV{constructor(t,e={},n,a){super(t,e,n,a)}from(t){return new EV(this.url,this.headers,t,this.fetch)}get vectors(){return new wF(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mF(this.url+"/iceberg",this.headers,this.fetch)}}const qV=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:mF,StorageApiError:dF,StorageClient:UV,StorageError:Fy,StorageUnknownError:Rv,StorageVectorsApiError:wv,StorageVectorsClient:wF,StorageVectorsError:oN,get StorageVectorsErrorCode(){return YS},StorageVectorsUnknownError:gF,VectorBucketApi:xF,VectorBucketScope:_F,VectorDataApi:bF,VectorIndexApi:vF,VectorIndexScope:SF,isPlainObject:yF,isStorageError:pa,isStorageVectorsError:mo,normalizeToFloat32:FV,resolveFetch:_x,resolveResponse:RV,validateVectorDimension:DV},Symbol.toStringTag,{value:"Module"})),zV=My(qV);var xw={},zm={},PE;function WV(){return PE||(PE=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.version=void 0,zm.version="2.86.2"),zm}var OE;function HV(){return OE||(OE=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_REALTIME_OPTIONS=r.DEFAULT_AUTH_OPTIONS=r.DEFAULT_DB_OPTIONS=r.DEFAULT_GLOBAL_OPTIONS=r.DEFAULT_HEADERS=void 0;const t=WV();let e="";typeof Deno<"u"?e="deno":typeof document<"u"?e="web":typeof navigator<"u"&&navigator.product==="ReactNative"?e="react-native":e="node",r.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${e}/${t.version}`},r.DEFAULT_GLOBAL_OPTIONS={headers:r.DEFAULT_HEADERS},r.DEFAULT_DB_OPTIONS={schema:"public"},r.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r.DEFAULT_REALTIME_OPTIONS={}})(xw)),xw}var ww={},IE;function VV(){return IE||(IE=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fetchWithAuth=r.resolveHeadersConstructor=r.resolveFetch=void 0;const t=a=>a?(...i)=>a(...i):(...i)=>fetch(...i);r.resolveFetch=t;const e=()=>Headers;r.resolveHeadersConstructor=e;const n=(a,i,s)=>{const o=(0,r.resolveFetch)(s),l=(0,r.resolveHeadersConstructor)();return async(c,u)=>{var f;const h=(f=await i())!==null&&f!==void 0?f:a;let p=new l(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",a),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),o(c,Object.assign(Object.assign({},u),{headers:p}))}};r.fetchWithAuth=n})(ww)),ww}var ku={},ME;function GV(){if(ME)return ku;ME=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.isBrowser=void 0,ku.uuid=r,ku.ensureTrailingSlash=t,ku.applySettingDefaults=n,ku.validateSupabaseUrl=a;function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var s=Math.random()*16|0,o=i=="x"?s:s&3|8;return o.toString(16)})}function t(i){return i.endsWith("/")?i:i+"/"}const e=()=>typeof window<"u";ku.isBrowser=e;function n(i,s){var o,l;const{db:c,auth:u,realtime:f,global:h}=i,{db:p,auth:g,realtime:y,global:m}=s,v={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},y),f),storage:{},global:Object.assign(Object.assign(Object.assign({},m),h),{headers:Object.assign(Object.assign({},(o=m==null?void 0:m.headers)!==null&&o!==void 0?o:{}),(l=h==null?void 0:h.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return i.accessToken?v.accessToken=i.accessToken:delete v.accessToken,v}function a(i){const s=i==null?void 0:i.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ku}var Wm={};const NF="2.86.2",q0=30*1e3,JS=3,_w=JS*q0,KV="http://localhost:9999",XV="supabase.auth.token",YV={"X-Client-Info":`gotrue-js/${NF}`},ZS="X-Supabase-Api-Version",jF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZV=600*1e3;let Sp=class extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}};function Er(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}let kF=class extends Sp{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}};function EF(r){return Er(r)&&r.name==="AuthApiError"}let nf=class extends Sp{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},rd=class extends Sp{constructor(t,e,n,a){super(t,n,a),this.name=e,this.status=n}},fo=class extends rd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function AF(r){return Er(r)&&r.name==="AuthSessionMissingError"}let sh=class extends rd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ug=class extends rd{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},dg=class extends rd{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function TF(r){return Er(r)&&r.name==="AuthImplicitGrantRedirectError"}let QS=class extends rd{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Fv=class extends rd{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function _v(r){return Er(r)&&r.name==="AuthRetryableFetchError"}let e6=class extends rd{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}};function QV(r){return Er(r)&&r.name==="AuthWeakPasswordError"}let Dv=class extends rd{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Lv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),RE=` 	
\r=`.split(""),eG=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<RE.length;t+=1)r[RE[t].charCodeAt(0)]=-2;for(let t=0;t<Lv.length;t+=1)r[Lv[t].charCodeAt(0)]=t;return r})();function FE(r,t,e){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;e(Lv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;e(Lv[n]),t.queuedBits-=6}}function CF(r,t,e){const n=eG[r];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function DE(r){const t=[],e=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{nG(s,n,e)};for(let s=0;s<r.length;s+=1)CF(r.charCodeAt(s),a,i);return t.join("")}function tG(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function rG(r,t){for(let e=0;e<r.length;e+=1){let n=r.charCodeAt(e);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(r.charCodeAt(e+1)-56320&65535|a)+65536,e+=1}tG(n,t)}}function nG(r,t,e){if(t.utf8seq===0){if(r<=127){e(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function tp(r){const t=[],e={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<r.length;a+=1)CF(r.charCodeAt(a),e,n);return new Uint8Array(t)}function aG(r){const t=[];return rG(r,e=>t.push(e)),new Uint8Array(t)}function bh(r){const t=[],e={queue:0,queuedBits:0},n=a=>{t.push(a)};return r.forEach(a=>FE(a,e,n)),FE(null,e,n),t.join("")}function iG(r){return Math.round(Date.now()/1e3)+r}function sG(){return Symbol("auth-callback")}const Hi=()=>typeof window<"u"&&typeof document<"u",th={tested:!1,writable:!1},PF=()=>{if(!Hi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(th.tested)return th.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),th.tested=!0,th.writable=!0}catch{th.tested=!0,th.writable=!1}return th.writable};function oG(r){const t={},e=new URL(r);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return e.searchParams.forEach((n,a)=>{t[a]=n}),t}const OF=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),lG=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",z0=async(r,t,e)=>{await r.setItem(t,JSON.stringify(e))},rh=async(r,t)=>{const e=await r.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},zi=async(r,t)=>{await r.removeItem(t)};class Sx{constructor(){this.promise=new Sx.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}Sx.promiseConstructor=Promise;function Sw(r){const t=r.split(".");if(t.length!==3)throw new Dv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!JV.test(t[n]))throw new Dv("JWT not in base64url format");return{header:JSON.parse(DE(t[0])),payload:JSON.parse(DE(t[1])),signature:tp(t[2]),raw:{header:t[0],payload:t[1]}}}async function cG(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function uG(r,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await r(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function dG(r){return("0"+r.toString(16)).substr(-2)}function fG(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=e.length;let a="";for(let i=0;i<56;i++)a+=e.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,dG).join("")}async function hG(r){const e=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",e),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function pG(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const e=await hG(r);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function A0(r,t,e=!1){const n=fG();let a=n;e&&(a+="/PASSWORD_RECOVERY"),await z0(r,`${t}-code-verifier`,a);const i=await pG(n);return[i,n===i?"plain":"s256"]}const mG=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gG(r){const t=r.headers.get(ZS);if(!t||!t.match(mG))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function yG(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function vG(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function T0(r){if(!bG.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nw(){const r={};return new Proxy(r,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const n=e.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xG(r,t){return new Proxy(r,{get:(e,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,a)}})}function LE(r){return JSON.parse(JSON.stringify(r))}const oh=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),wG=[502,503,504];async function BE(r){var t;if(!lG(r))throw new Fv(oh(r),0);if(wG.includes(r.status))throw new Fv(oh(r),r.status);let e;try{e=await r.json()}catch(i){throw new nf(oh(i),i)}let n;const a=gG(r);if(a&&a.getTime()>=jF["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?n=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(n=e.error_code),n){if(n==="weak_password")throw new e6(oh(e),r.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new fo}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new e6(oh(e),r.status,e.weak_password.reasons);throw new kF(oh(e),r.status||500,n)}const _G=(r,t,e,n)=>{const a={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),e))};async function $r(r,t,e,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[ZS]||(i[ZS]=jF["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await SG(r,t,e+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function SG(r,t,e,n,a,i){const s=_G(t,n,a,i);let o;try{o=await r(e,Object.assign({},s))}catch(l){throw console.error(l),new Fv(oh(l),0)}if(o.ok||await BE(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await BE(l)}}function Gl(r){var t;let e=null;kG(r)&&(e=Object.assign({},r),r.expires_at||(e.expires_at=iG(r.expires_in)));const n=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:e,user:n},error:null}}function $E(r){const t=Gl(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((e,n)=>e&&typeof n=="string",!0)&&(t.data.weak_password=r.weak_password),t}function af(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function NG(r){return{data:r,error:null}}function jG(r){const{action_link:t,email_otp:e,hashed_token:n,redirect_to:a,verification_type:i}=r,s=om(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:e,hashed_token:n,redirect_to:a,verification_type:i},l=Object.assign({},s);return{data:{properties:o,user:l},error:null}}function UE(r){return r}function kG(r){return r.access_token&&r.refresh_token&&r.expires_in}const Sv=["global","local","others"];let lN=class{constructor({url:t="",headers:e={},fetch:n}){this.url=t,this.headers=e,this.fetch=OF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=Sv[0]){if(Sv.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sv.join(", ")}`);try{return await $r(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Er(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,e={}){try{return await $r(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:af})}catch(n){if(Er(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:e}=t,n=om(t,["options"]),a=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await $r(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:jG,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(Er(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await $r(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:af})}catch(e){if(Er(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,n,a,i,s,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await $r(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:UE});if(u.error)throw u.error;const f=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Er(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){T0(t);try{return await $r(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:af})}catch(e){if(Er(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){T0(t);try{return await $r(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:af})}catch(n){if(Er(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,e=!1){T0(t);try{return await $r(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:af})}catch(n){if(Er(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){T0(t.userId);try{const{data:e,error:n}=await $r(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:e,error:n}}catch(e){if(Er(e))return{data:null,error:e};throw e}}async _deleteFactor(t){T0(t.userId),T0(t.id);try{return{data:await $r(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(Er(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,n,a,i,s,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await $r(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:UE});if(u.error)throw u.error;const f=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Er(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await $r(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(Er(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await $r(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(Er(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await $r(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Er(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await $r(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Er(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await $r(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(Er(e))return{data:null,error:e};throw e}}};function qE(r={}){return{getItem:t=>r[t]||null,setItem:(t,e)=>{r[t]=e},removeItem:t=>{delete r[t]}}}const lh={debug:!!(globalThis&&PF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let IF=class extends cN{};class EG extends cN{}async function MF(r,t,e){lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),lh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await e()}finally{lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(t===0)throw lh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new IF(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(lh.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}const zE={};async function AG(r,t,e){var n;const a=(n=zE[r])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((s,o)=>{setTimeout(()=>{o(new EG(`Acquring process lock with name "${r}" timed out`))},t)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await e());return zE[r]=i.catch(async s=>{if(s&&s.isAcquireTimeout)return await a,null;throw s}),await i}function TG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function RF(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function CG(r){return parseInt(r,16)}function PG(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function OG(r){var t;const{chainId:e,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:l,resources:c,scheme:u,uri:f,version:h}=r;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const p=RF(r.address),g=u?`${u}://${n}`:n,y=r.statement?`${r.statement}
`:"",m=`${g} wants you to sign in with your Ethereum account:
${p}

${y}`;let v=`URI: ${f}
Version: ${h}
Chain ID: ${e}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(v+=`
Expiration Time: ${a.toISOString()}`),o&&(v+=`
Not Before: ${o.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const x of c){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);b+=`
- ${x}`}v+=b}return`${m}
${v}`}class Ka extends Error{constructor({message:t,code:e,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=e}}class Bv extends Ka{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function IG({error:r,options:t}){var e,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ka({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((e=i.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new Ka({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ka({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ka({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Ka({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Ka({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Ka({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Ka({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(FF(s)){if(i.rp.id!==s)return new Ka({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ka({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ka({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Ka({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ka({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function MG({error:r,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ka({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Ka({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(FF(n)){if(e.rpId!==n)return new Ka({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ka({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Ka({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ka({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class RG{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const FG=new RG;function DG(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:e,excludeCredentials:n}=r,a=om(r,["challenge","user","excludeCredentials"]),i=tp(t).buffer,s=Object.assign(Object.assign({},e),{id:tp(e.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:tp(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function LG(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:e}=r,n=om(r,["challenge","allowCredentials"]),a=tp(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const o=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},o),{id:tp(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function BG(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const e=r;return{id:r.id,rawId:r.id,response:{attestationObject:bh(new Uint8Array(r.response.attestationObject)),clientDataJSON:bh(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function $G(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const e=r,n=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:bh(new Uint8Array(a.authenticatorData)),clientDataJSON:bh(new Uint8Array(a.clientDataJSON)),signature:bh(new Uint8Array(a.signature)),userHandle:a.userHandle?bh(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function FF(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function WE(){var r,t;return!!(Hi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function UG(r){try{const t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Bv("Browser returned unexpected credential type",t)}:{data:null,error:new Bv("Empty credential response",t)}}catch(t){return{data:null,error:IG({error:t,options:r})}}}async function qG(r){try{const t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Bv("Browser returned unexpected credential type",t)}:{data:null,error:new Bv("Empty credential response",t)}}catch(t){return{data:null,error:MG({error:t,options:r})}}}const zG={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},WG={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $v(...r){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),e=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of r)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(e(s))n[i]=s;else if(t(s)){const o=n[i];t(o)?n[i]=$v(o,s):n[i]=$v(s)}else n[i]=s}return n}function HG(r,t){return $v(zG,r,t||{})}function VG(r,t){return $v(WG,r,t||{})}class GG{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:n,signal:a},i){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!s)return{data:null,error:o};const l=a??FG.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:c}=s.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(s.webauthn.type){case"create":{const c=HG(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:f}=await UG({publicKey:c,signal:l});return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const c=VG(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:f}=await qG(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(s){return Er(s)?{data:null,error:s}:{data:null,error:new nf("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:e,webauthn:n}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!e)return{data:null,error:new Sp("rpId is required for WebAuthn authentication")};try{if(!WE())return{data:null,error:new nf("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:o};const{webauthn:l}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:l.type,rpId:e,rpOrigins:n,credential_response:l.credential_response}})}catch(s){return Er(s)?{data:null,error:s}:{data:null,error:new nf("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!e)return{data:null,error:new Sp("rpId is required for WebAuthn registration")};try{if(!WE())return{data:null,error:new nf("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:e,rpOrigins:n},signal:a},{create:i});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:e,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(s){return Er(s)?{data:null,error:s}:{data:null,error:new nf("Unexpected error in register",s)}}}}TG();const KG={url:KV,storageKey:XV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function HE(r,t,e){return await e()}const C0={};let uN=class t6{get jwks(){var t,e;return(e=(t=C0[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){C0[this.storageKey]=Object.assign(Object.assign({},C0[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=C0[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){C0[this.storageKey]=Object.assign(Object.assign({},C0[this.storageKey]),{cachedAt:t})}constructor(t){var e,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},KG),t);if(this.storageKey=i.storageKey,this.instanceID=(e=t6.nextInstanceID[this.storageKey])!==null&&e!==void 0?e:0,t6.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Hi()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new lN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=OF(i.fetch),this.lock=i.lock||HE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Hi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=MF:this.lock=HE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GG(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:PF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=qE(this.memoryStorage)),Hi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${NF}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let e={},n="none";if(Hi()&&(e=oG(window.location.href),this._isImplicitGrantCallback(e)?n="implicit":await this._isPKCECallback(e)&&(n="pkce")),Hi()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(e,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),TF(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Er(e)?this._returnResult({error:e}):this._returnResult({error:new nf("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,n,a;try{const i=await $r(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Gl}),{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Er(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var e,n,a;try{let i;if("email"in t){const{email:u,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await A0(this.storage,this.storageKey)),i=await $r(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(e=h==null?void 0:h.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:Gl})}else if("phone"in t){const{phone:u,password:f,options:h}=t;i=await $r(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Gl})}else throw new ug("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return await zi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let e;if("email"in t){const{email:i,password:s,options:o}=t;e=await $r(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:$E})}else if("phone"in t){const{phone:i,password:s,options:o}=t;e=await $r(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:$E})}else throw new ug("You must provide either an email or phone number and a password");const{data:n,error:a}=e;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new sh;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(e){if(Er(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(t){var e,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;switch(e){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}}async signInWithEthereum(t){var e,n,a,i,s,o,l,c,u,f,h;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:y,wallet:m,statement:v,options:b}=t;let x;if(Hi())if(typeof m=="object")x=m;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")x=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=m}const S=new URL((e=b==null?void 0:b.url)!==null&&e!==void 0?e:window.location.href),_=await x.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=RF(_[0]);let A=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const M=await x.request({method:"eth_chainId"});A=CG(M)}const O={domain:S.host,address:I,statement:v,uri:S.href,version:"1",chainId:A,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=OG(O),g=await x.request({method:"personal_sign",params:[PG(p),I]})}try{const{data:y,error:m}=await $r(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Gl});if(m)throw m;if(!y||!y.session||!y.user){const v=new sh;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:m})}catch(y){if(Er(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var e,n,a,i,s,o,l,c,u,f,h,p;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:m,wallet:v,statement:b,options:x}=t;let S;if(Hi())if(typeof v=="object")S=v;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))S=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const _=new URL((e=x==null?void 0:x.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in S&&S.signIn){const I=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let A;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")A=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)A=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)g=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),y=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const I=await S.signMessage(new TextEncoder().encode(g),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=I}}try{const{data:m,error:v}=await $r(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:bh(y)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Gl});if(v)throw v;if(!m||!m.session||!m.user){const b=new sh;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:v})}catch(m){if(Er(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(t){const e=await rh(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(e??"").split("/");try{const{data:i,error:s}=await $r(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Gl});if(await zi(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const o=new sh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:e,provider:n,token:a,access_token:i,nonce:s}=t,o=await $r(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Gl}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new sh;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(e){if(Er(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(t){var e,n,a,i,s;try{if("email"in t){const{email:o,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await A0(this.storage,this.storageKey));const{error:f}=await $r(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(e=l==null?void 0:l.data)!==null&&e!==void 0?e:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:u}=await $r(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=l==null?void 0:l.data)!==null&&a!==void 0?a:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new ug("You must provide either an email or phone number.")}catch(o){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var e,n;try{let a,i;"options"in t&&(a=(e=t.options)===null||e===void 0?void 0:e.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await $r(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Gl});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,c=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(Er(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var e,n,a,i,s;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await A0(this.storage,this.storageKey));const c=await $r(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:NG});return!((i=c.data)===null||i===void 0)&&i.url&&Hi()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:n}=t;if(n)throw n;if(!e)throw new fo;const{error:a}=await $r(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Er(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await $r(this.fetch,"POST",e,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await $r(this.fetch,"POST",e,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new ug("You must provide either an email or phone number and a type")}catch(e){if(Er(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await e()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=e();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await rh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<_w:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await rh(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=Nw()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=xG(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const e=await this._acquireLock(-1,async()=>await this._getUser());return e.data.user&&(this.suppressGetSessionWarning=!0),e}async _getUser(t){try{return t?await $r(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:af}):await this._useSession(async e=>{var n,a,i;const{data:s,error:o}=e;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fo}:await $r(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:af})})}catch(e){if(Er(e))return AF(e)&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new fo;const s=a.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await A0(this.storage,this.storageKey));const{data:c,error:u}=await $r(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:s.access_token,xform:af});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new fo;const e=Date.now()/1e3;let n=e,a=!0,i=null;const{payload:s}=Sw(t.access_token);if(s.exp&&(n=s.exp,a=n<=e),a){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-e,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(e){if(Er(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var n;if(!t){const{data:s,error:o}=e;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new fo;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(Er(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(t,e){try{if(!Hi())throw new dg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new dg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new QS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dg("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new QS("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:l,token_type:c}=t;if(!i||!o||!s||!c)throw new dg("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let h=u+f;l&&(h=parseInt(l));const p=h-u;p*1e3<=q0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:y,error:m}=await this._getUser(i);if(m)throw m;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(Er(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await rh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var n;const{data:a,error:i}=e;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(EF(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const e=sG(),n={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async e=>{var n,a;try{const{data:{session:i},error:s}=e;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,e={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await A0(this.storage,this.storageKey,!0));try{return await $r(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(i){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:e,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var e;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,l,c,u;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $r(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Hi()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Er(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async e=>{var n;try{const{error:a,data:{session:i}}=e;if(a)throw a;const{options:s,provider:o,token:l,access_token:c,nonce:u}=t,f=await $r(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Gl}),{data:h,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new sh}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(a){if(await zi(this.storage,`${this.storageKey}-code-verifier`),Er(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async e=>{var n,a;const{data:i,error:s}=e;if(s)throw s;return await $r(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const n=Date.now();return await uG(async a=>(a>0&&await cG(200*Math.pow(2,a-1)),this._debug(e,"refreshing attempt",a),await $r(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Gl})),(a,i)=>{const s=200*Math.pow(2,a);return i&&_v(i)&&Date.now()+s-n<q0})}catch(n){if(this._debug(e,"error",n),Er(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",n),Hi()&&!e.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await rh(this.storage,this.storageKey);if(a&&this.userStorage){let s=await rh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await z0(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:Nw()}else if(a&&!a.user&&!a.user){const s=await rh(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await zi(this.storage,this.storageKey+"-user"),await z0(this.storage,this.storageKey,a)):a.user=Nw()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((e=a.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<_w;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${_w}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),_v(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var e,n;if(!t)throw new fo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Sx;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new fo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),Er(i)){const s={data:null,error:i};return _v(i)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,e,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",e,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:e});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,e)}catch(l){i.push(l)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await zi(this.storage,`${this.storageKey}-code-verifier`);const e=Object.assign({},t),n=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&e.user&&await z0(this.userStorage,this.storageKey+"-user",{user:e.user});const a=Object.assign({},e);delete a.user;const i=LE(a);await z0(this.storage,this.storageKey,i)}else{const a=LE(e);await z0(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await zi(this.storage,this.storageKey),await zi(this.storage,this.storageKey+"-code-verifier"),await zi(this.storage,this.storageKey+"-user"),this.userStorage&&await zi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Hi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),q0);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/q0);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${q0}ms, refresh threshold is ${JS} ticks`),a<=JS&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof cN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,n){const a=[`provider=${encodeURIComponent(e)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await A0(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var n;const{data:a,error:i}=e;return i?this._returnResult({data:null,error:i}):await $r(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(t){try{return await this._useSession(async e=>{var n,a;const{data:i,error:s}=e;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await $r(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((a=l==null?void 0:l.totp)===null||a===void 0)&&a.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var n;const{data:a,error:i}=e;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?BG(t.webauthn.credential_response):$G(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await $r(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var n;const{data:a,error:i}=e;if(i)return this._returnResult({data:null,error:i});const s=await $r(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:DG(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:LG(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(t){const{data:e,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){var t;const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=e==null?void 0:e.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,e;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Sw(n.access_token);let s=null;i.aal&&(s=i.aal);let o=s;((e=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&e!==void 0?e:[]).length>0&&(o="aal2");const c=i.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async e=>{const{data:{session:n},error:a}=e;return a?this._returnResult({data:null,error:a}):n?await $r(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new fo})})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(t,e){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new fo});const s=await $r(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Hi()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(Er(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,e){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new fo});const s=await $r(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Hi()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(Er(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:e},error:n}=t;return n?this._returnResult({data:null,error:n}):e?await $r(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:e.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new fo})})}catch(t){if(Er(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async e=>{const{data:{session:n},error:a}=e;return a?this._returnResult({data:null,error:a}):n?(await $r(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fo})})}catch(e){if(Er(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(t,e={keys:[]}){let n=e.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+ZV>a)return n;const{data:i,error:s}=await $r(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,e={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});n=p.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:l}}=Sw(n);e!=null&&e.allowExpired||yG(i.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,e!=null&&e.keys?{keys:e.keys}:e==null?void 0:e.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:s},error:null}}const u=vG(a.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,aG(`${o}.${l}`)))throw new Dv("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(Er(n))return this._returnResult({data:null,error:n});throw n}}};uN.nextInstanceID={};const XG=lN,YG=uN,JG=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:XG,AuthApiError:kF,AuthClient:YG,AuthError:Sp,AuthImplicitGrantRedirectError:dg,AuthInvalidCredentialsError:ug,AuthInvalidJwtError:Dv,AuthInvalidTokenResponseError:sh,AuthPKCEGrantCodeExchangeError:QS,AuthRetryableFetchError:Fv,AuthSessionMissingError:fo,AuthUnknownError:nf,AuthWeakPasswordError:e6,CustomAuthError:rd,GoTrueAdminApi:lN,GoTrueClient:uN,NavigatorLockAcquireTimeoutError:IF,SIGN_OUT_SCOPES:Sv,isAuthApiError:EF,isAuthError:Er,isAuthImplicitGrantRedirectError:TF,isAuthRetryableFetchError:_v,isAuthSessionMissingError:AF,isAuthWeakPasswordError:QV,lockInternals:lh,navigatorLock:MF,processLock:AG},Symbol.toStringTag,{value:"Module"})),DF=My(JG);var VE;function ZG(){if(VE)return Wm;VE=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.SupabaseAuthClient=void 0;const r=DF;let t=class extends r.AuthClient{constructor(n){super(n)}};return Wm.SupabaseAuthClient=t,Wm}var GE;function KE(){if(GE)return M1;GE=1,Object.defineProperty(M1,"__esModule",{value:!0});const r=XR,t=tF(),e=uF,n=zV,a=HV(),i=VV(),s=GV(),o=ZG();class l{constructor(u,f,h){var p,g,y;this.supabaseUrl=u,this.supabaseKey=f;const m=(0,s.validateSupabaseUrl)(u);if(!f)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const v=`sb-${m.hostname.split(".")[0]}-auth-token`,b={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:v}),global:a.DEFAULT_GLOBAL_OPTIONS},x=(0,s.applySettingDefaults)(h??{},b);this.storageKey=(p=x.auth.storageKey)!==null&&p!==void 0?p:"",this.headers=(g=x.global.headers)!==null&&g!==void 0?g:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(S,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((y=x.auth)!==null&&y!==void 0?y:{},this.headers,x.global.fetch),this.fetch=(0,i.fetchWithAuth)(f,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new t.PostgrestClient(new URL("rest/v1",m).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new n.StorageClient(this.storageUrl.href,this.headers,this.fetch,h==null?void 0:h.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new r.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(u){return this.rest.from(u)}schema(u){return this.rest.schema(u)}rpc(u,f={},h={head:!1,get:!1,count:void 0}){return this.rest.rpc(u,f,h)}channel(u,f={config:{}}){return this.realtime.channel(u,f)}getChannels(){return this.realtime.getChannels()}removeChannel(u){return this.realtime.removeChannel(u)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var u,f;if(this.accessToken)return await this.accessToken();const{data:h}=await this.auth.getSession();return(f=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:u,persistSession:f,detectSessionInUrl:h,storage:p,userStorage:g,storageKey:y,flowType:m,lock:v,debug:b,throwOnError:x},S,_){const I={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},I),S),storageKey:y,autoRefreshToken:u,persistSession:f,detectSessionInUrl:h,storage:p,userStorage:g,flowType:m,lock:v,debug:b,throwOnError:x,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(u){return new e.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},u),{params:Object.assign({apikey:this.supabaseKey},u==null?void 0:u.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((f,h)=>{this._handleTokenChanged(f,"CLIENT",h==null?void 0:h.access_token)})}_handleTokenChanged(u,f,h){(u==="TOKEN_REFRESHED"||u==="SIGNED_IN")&&this.changedAccessToken!==h?(this.changedAccessToken=h,this.realtime.setAuth(h)):u==="SIGNED_OUT"&&(this.realtime.setAuth(),f=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return M1.default=l,M1}var XE;function QG(){return XE||(XE=1,(function(r){var t=ju&&ju.__createBinding||(Object.create?(function(u,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(u,p,g)}):(function(u,f,h,p){p===void 0&&(p=h),u[p]=f[h]})),e=ju&&ju.__exportStar||function(u,f){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,u,h)},n=ju&&ju.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.createClient=r.SupabaseClient=r.FunctionRegion=r.FunctionsError=r.FunctionsRelayError=r.FunctionsFetchError=r.FunctionsHttpError=r.PostgrestError=void 0;const a=n(KE());e(DF,r);var i=tF();Object.defineProperty(r,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var s=XR;Object.defineProperty(r,"FunctionsHttpError",{enumerable:!0,get:function(){return s.FunctionsHttpError}}),Object.defineProperty(r,"FunctionsFetchError",{enumerable:!0,get:function(){return s.FunctionsFetchError}}),Object.defineProperty(r,"FunctionsRelayError",{enumerable:!0,get:function(){return s.FunctionsRelayError}}),Object.defineProperty(r,"FunctionsError",{enumerable:!0,get:function(){return s.FunctionsError}}),Object.defineProperty(r,"FunctionRegion",{enumerable:!0,get:function(){return s.FunctionRegion}}),e(uF,r);var o=KE();Object.defineProperty(r,"SupabaseClient",{enumerable:!0,get:function(){return n(o).default}});const l=(u,f,h)=>new a.default(u,f,h);r.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const f=u.match(/^v(\d+)\./);return f?parseInt(f[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ju)),ju}var LF=QG();const BF=In(LF),eK=iR({__proto__:null,default:BF},[LF]),{PostgrestError:k_e,FunctionsHttpError:E_e,FunctionsFetchError:A_e,FunctionsRelayError:T_e,FunctionsError:C_e,FunctionRegion:P_e,SupabaseClient:O_e,createClient:dN,GoTrueAdminApi:I_e,GoTrueClient:M_e,AuthAdminApi:R_e,AuthClient:F_e,navigatorLock:D_e,NavigatorLockAcquireTimeoutError:L_e,lockInternals:B_e,processLock:$_e,SIGN_OUT_SCOPES:U_e,AuthError:q_e,AuthApiError:z_e,AuthUnknownError:W_e,CustomAuthError:H_e,AuthSessionMissingError:V_e,AuthInvalidTokenResponseError:G_e,AuthInvalidCredentialsError:K_e,AuthImplicitGrantRedirectError:X_e,AuthPKCEGrantCodeExchangeError:Y_e,AuthRetryableFetchError:J_e,AuthWeakPasswordError:Z_e,AuthInvalidJwtError:Q_e,isAuthError:e5e,isAuthApiError:t5e,isAuthSessionMissingError:r5e,isAuthImplicitGrantRedirectError:n5e,isAuthRetryableFetchError:a5e,isAuthWeakPasswordError:i5e,RealtimePresence:s5e,RealtimeChannel:o5e,RealtimeClient:l5e,REALTIME_LISTEN_TYPES:c5e,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:u5e,REALTIME_PRESENCE_LISTEN_EVENTS:d5e,REALTIME_SUBSCRIBE_STATES:f5e,REALTIME_CHANNEL_STATES:h5e}=BF||eK,tK="https://pdxyqlxbucoghoetyzmv.supabase.co",rK="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc",uo=!1;let YE=!0,JE=0,ZE=0,jw=!1,QE=0;function $F(){return console.log(` [${new Date().toISOString()}] Creating new Supabase client instance`),dN(tK,rK,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{fetch:(...t)=>{const e=t[1]||{},n=new Promise((i,s)=>{setTimeout(()=>s(new Error("Request timeout")),15e3)}),a=fetch(t[0],e).then(i=>(i.ok,i)).catch(i=>{throw i});return Promise.race([a,n])}}})}let ch=$F();async function nK(){if(jw)return!1;const r=Date.now();if(r-JE<3e4||r-QE<1e4)return!1;JE=r,QE=r,ZE++,jw=!0;try{ch=$F();let t=!1;try{await new Promise(n=>setTimeout(n,100));const{error:e}=await ch.from("products").select("id").limit(1);e||(t=!0)}catch{}if(!t)try{const{data:e}=await ch.auth.getSession();if(e.session){const{error:n}=await ch.auth.refreshSession();if(!n){const{error:a}=await ch.from("products").select("id").limit(1);a||(t=!0)}}}catch{}if(!t)try{const{error:e}=await ch.from("companies").select("id").limit(1);e||(t=!0)}catch{}return YE=t,t&&(ZE=0),t}catch{return YE=!1,!1}finally{jw=!1}}const fg=ch;async function UF(r,t,e){try{const{data:n,error:a}=await De.from("products").select("stock").eq("id",r).eq("company_id",e).maybeSingle();if(a)return console.error("Error getting current product stock:",a),{success:!1,error:`Failed to get current product stock: ${a.message}`};if(n==null)return console.error("No product found with id and companyId:",r,e),{success:!1,error:"Product not found or no data returned for product."};const i=n.stock||0,s=Math.max(0,i+t);console.log(`Updating product ${r} stock: ${i} ${t>=0?"+":"-"} ${Math.abs(t)} = ${s}`);const{data:o,error:l}=await De.from("products").update({stock:s,updated_at:new Date().toISOString()}).eq("id",r).eq("company_id",e).select().single();return l?(console.error("Error updating product stock:",l),{success:!1,error:`Failed to update product stock: ${l.message}`}):o?(console.log("Product stock updated successfully:",o),{success:!0,updatedProduct:o}):(console.error("No product data returned after stock update for product ID:",r),{success:!1,error:"Failed to update product stock: No data returned"})}catch(n){return console.error("Error in updateProductStock:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred during stock update"}}}const De=fg;async function aK(r){try{const{data:t,error:e}=await De.from("tax_rates").select("*");if(e)return console.error("Error checking tax rates:",e),!1;if(!t||t.length===0){const i=[{rate:0,description:"GST Exempt"},{rate:5,description:"GST 5%"},{rate:18,description:"GST 18%"},{rate:28,description:"GST 28%"}],{error:s}=await De.from("tax_rates").insert(i);if(s)return console.error("Error inserting default tax rates:",s),!1}const{data:n,error:a}=await De.from("tax_settings").select("*").eq("company_id",r);if(a)return console.error("Error checking tax settings:",a),!1;if(!n||n.length===0){const i={company_id:r,tax_type:"split",tax_inclusive:!1,cess_enabled:!1},{error:s}=await De.from("tax_settings").insert(i);if(s)return console.error("Error inserting default tax settings:",s),!1}return!0}catch(t){return console.error("Error initializing tax settings:",t),!1}}async function iK(r){try{const{data:{user:t},error:e}=await De.auth.getUser();if(e)return console.error("Error getting current user:",e),{success:!1,error:`Failed to get current user: ${e.message}`};if(!t)return console.error("No authenticated user found"),{success:!1,error:"User not authenticated"};let n=r.companyId;if(!n){console.log("No company ID provided, getting default company for user");const{data:S,error:_}=await De.from("company_users").select("company_id, role").eq("user_id",t.id).eq("is_active",!0).order("role",{ascending:!0});if(_)return console.error("Error getting company users:",_),{success:!1,error:`Failed to get company users: ${_.message}`};if(!S||S.length===0)return console.error("No active companies found for user"),{success:!1,error:"No active companies found for user"};n=S[0].company_id}console.log("Using company ID for sale:",n);const{data:a,error:i}=await De.from("tax_settings").select("*").eq("company_id",n).single();if(i)return console.error("Error getting tax settings:",i),{success:!1,error:`Failed to get tax settings: ${i.message}`};if(!a)return console.error("No tax settings found"),{success:!1,error:"No tax settings found"};const{data:s,error:o}=await De.from("tax_rates").select("*");if(o)return console.error("Error getting tax rates:",o),{success:!1,error:`Failed to get tax rates: ${o.message}`};if(!s)return console.error("No tax rates found"),{success:!1,error:"No tax rates found"};const l=s.reduce((S,_)=>(S[_.id]=_,S),{}),c=r.taxInclusive??a.tax_inclusive;let u=r.cgst||0,f=r.sgst||0,h=r.igst||0,p=r.cess||0,g=0,y=0,m=0;!r.cgst&&!r.sgst&&!r.igst&&(a.tax_type==="split"?(u=r.tax/2,f=r.tax/2,g=u/r.subtotal*100,y=g):(h=r.tax,m=h/r.subtotal*100)),console.log("GST components:",{cgst:u,sgst:f,igst:h,cess:p}),a.cess_enabled&&r.items.some(_=>{if(!_.taxRateId)return console.log("Item has no taxRateId:",_.name),!1;const I=l[_.taxRateId];return I?I.rate===28:(console.log("No tax rate found for ID:",_.taxRateId),!1)})&&(p=r.subtotal*.01,console.log("CESS applied:",p));let v="";try{const{data:S,error:_}=await De.from("company_settings").select("invoice_prefix").eq("company_id",n).single(),I=(S==null?void 0:S.invoice_prefix)||"INV",{data:A,error:O}=await De.rpc("get_next_invoice_number",{p_company_id:n,p_prefix:I});if(O)throw console.error("Error calling get_next_invoice_number:",O),new Error(`Failed to generate invoice number: ${O.message}`);if(!A)throw new Error("No invoice number returned from database function");v=A,console.log("Generated invoice number:",v)}catch(S){console.error("Error generating invoice number:",S),v=`INV-${Date.now()}-${Math.random().toString(36).substring(7)}`,console.warn("Using fallback invoice number:",v)}const{data:b,error:x}=await De.from("sales").insert({customer_id:r.customerId,customer_name:r.customerName,customer_gst:r.customerGst,customer_address:r.customerAddress,customer_phone:r.customerPhone,customer_email:r.customerEmail,company_id:n,subtotal:r.subtotal,tax:r.tax,total:r.total,payment_method:r.paymentMethod,tax_type:a.tax_type,tax_inclusive:c,cgst:u,sgst:f,igst:h,cess:p,cgst_rate:g,sgst_rate:y,igst_rate:m,cash_received:r.cashReceived,change_amount:r.change,invoice_number:v,user_id:t.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(x)return console.error("Error creating sale:",x),{success:!1,error:`Failed to create sale record: ${x.message}`};if(!b)return console.error("No sale record returned after insert"),{success:!1,error:"Failed to create sale record"};console.log("Sale record created:",b),console.log("Creating sale items for sale ID:",b.id);for(const S of r.items){const _=S.quantity,I=S.price,A=I*_,O=S.discount_amount||0,M=A-O,z=S.taxAmount||0,U=c?M:M+z,D=S.discount_percentage||0,{error:T}=await De.from("sale_items").insert({sale_id:b.id,product_id:S.id,quantity:_,price:I,total:M,tax_rate_id:S.taxRateId,tax_amount:z,discount_amount:O,discount_percentage:D,net_amount:U,gross_amount:A,company_id:n});if(T)return console.error("Error creating sale item:",T),{success:!1,error:`Failed to create sale item: ${T.message}`};if(!n)return console.error("Company ID is undefined, cannot update product stock"),{success:!1,error:"Company ID is required to update product stock"};const{success:R,error:C}=await UF(S.id,-S.quantity,n);if(!R)return console.error("Error updating product stock:",C),{success:!1,error:C||"Failed to update product stock"};console.log("Product stock updated successfully for sale")}return{success:!0,saleId:b.id}}catch(t){return console.error("Error in processSale:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}}const sK=r=>{try{localStorage.setItem("auth_user_email",r),console.log("Session info stored")}catch(t){console.error("Failed to store session info:",t)}},kw=async()=>{try{console.log("Attempting to recover session...");const{data:r,error:t}=await De.auth.refreshSession();return t?(console.error("Session recovery failed:",t),!1):r.session?(console.log("Session recovered successfully"),!0):!1}catch(r){return console.error("Error during session recovery:",r),!1}},qF=ie.createContext(void 0),oK=({children:r})=>{const[t,e]=ie.useState(null),[n,a]=ie.useState(null),[i,s]=ie.useState(!0),[o,l]=ie.useState(!1),c=ie.useRef(null),u=ie.useRef(0),f=ie.useRef(null),h=(_,I=1e3)=>{f.current&&clearTimeout(f.current),f.current=setTimeout(_,I)};ie.useEffect(()=>{(async()=>{try{const{data:{session:I}}=await De.auth.getSession();if(I!=null&&I.user)e(I.user),a(I),p(I.user);else if(console.log("No active session found, attempting recovery..."),await kw()){const{data:{session:O}}=await De.auth.getSession();O!=null&&O.user?(e(O.user),a(O),p(O.user)):(e(null),a(null))}else e(null),a(null)}catch(I){console.error("Error getting session:",I),e(null),a(null)}finally{s(!1)}})();const{data:{subscription:_}}=De.auth.onAuthStateChange((I,A)=>{console.log("Auth state changed:",I,A?"Session exists":"No session"),I==="SIGNED_IN"&&(A!=null&&A.user)?(console.log("User signed in:",A.user.id),e(A.user),a(A),s(!1),p(A.user)):I==="SIGNED_OUT"?(console.log("User signed out"),e(null),a(null),s(!1)):I==="TOKEN_REFRESHED"&&(A!=null&&A.user)?(console.log("Token refreshed for user:",A.user.id),e(A.user),a(A)):h(()=>{A!=null&&A.user?(console.log("User authenticated:",A.user.id),e(A.user),a(A)):(console.log("No authenticated user"),e(null),a(null)),s(!1)},300)});return c.current=window.setInterval(async()=>{try{const I=Date.now();if(I-u.current<3e4)return;u.current=I;const{data:A}=await De.auth.getSession();if(A.session){const O=A.session.expires_at;if(O){const M=new Date(O*1e3),z=new Date(Date.now()+300*1e3);M<z&&(console.log("Session about to expire, refreshing..."),await g())}}}catch(I){console.error("Error checking session:",I)}},600*1e3),()=>{_.unsubscribe(),c.current&&clearInterval(c.current),f.current&&clearTimeout(f.current)}},[]);const p=async _=>{var I;try{const{error:A}=await De.from("auth_users").select("id").limit(1);if(A){console.error("Auth users table not ready:",A);return}const{data:O,error:M}=await De.from("auth_users").select("*").eq("id",_.id).single();if(M&&M.code!=="PGRST116")throw M;const z={id:_.id,display_name:_.user_metadata.display_name||((I=_.email)==null?void 0:I.split("@")[0])||"User",avatar_url:_.user_metadata.avatar_url||null};let U;if(O){const{error:D}=await De.from("auth_users").update(z).eq("id",_.id).select().single();U=D}else{const{error:D}=await De.from("auth_users").insert([z]).select().single();U=D}U&&(console.error("Profile operation error:",U),U.code!=="42P01"&&Ce.error("Failed to update profile"))}catch(A){console.error("Profile update error:",A),A instanceof Error&&!A.message.includes('relation "auth_users" does not exist')&&Ce.error("Failed to update profile")}},g=async()=>{try{const{data:_,error:I}=await De.auth.refreshSession();return I?(console.error("Error refreshing session:",I),I.message.includes("JWT expired")||I.message.includes("No active session found")||I.message.includes("Invalid JWT")?(console.log("Session expired or invalid, attempting recovery..."),await kw()):!1):_.session?(e(_.session.user),a(_.session),!0):(console.log("No session after refresh, attempting recovery..."),await kw())}catch(_){return console.error("Error in refreshSession:",_),!1}},y=async()=>{try{await De.auth.signOut(),e(null),a(null),Ce.success("Signed out successfully")}catch(_){console.error("Error signing out:",_),Ce.error("Failed to sign out")}},m=async(_,I,A=!1)=>{try{let O;A?O=await De.auth.verifyOtp({email:_,token:I,type:"magiclink"}):O=await De.auth.signInWithPassword({email:_,password:I});const{data:M,error:z}=O;return z?(console.error("Login error:",z),Ce.error(z.message||"Failed to login"),!1):M!=null&&M.user?(e(M.user),a(M.session),Ce.success("Logged in successfully"),!0):!1}catch(O){return console.error("Login error:",O),Ce.error("An unexpected error occurred during login"),!1}},v=async(_,I,A)=>{try{const{error:O}=await De.auth.verifyOtp({email:_,token:I,type:"recovery"});if(O)return{success:!1,message:O.message||"Invalid or expired token"};const{error:M}=await De.auth.updateUser({password:A});return M?{success:!1,message:M.message||"Failed to update password"}:(Ce.success("Credentials updated successfully"),{success:!0})}catch(O){return console.error("Error updating credentials:",O),{success:!1,message:O instanceof Error?O.message:"An unexpected error occurred"}}},b=async()=>{if(t)try{const{data:_,error:I}=await De.auth.getUser();if(I){console.error("Error refreshing user:",I);return}_.user&&e(_.user)}catch(_){console.error("Error in refreshUser:",_)}},x=async()=>{if(!t)return!1;try{const{data:_,error:I}=await De.from("user_preferences").select("onboarding_completed").eq("user_id",t.id).single();if(I){if(I.code==="PGRST116"){console.log("No user preferences found, creating default entry...");const{error:O}=await De.from("user_preferences").insert({user_id:t.id,onboarding_completed:!1});return O?(console.error("Error inserting default user preferences:",O),Ce.error("Failed to initialize user preferences"),!1):(l(!0),!0)}return console.error("Error checking first login status:",I),!1}const A=!_||_.onboarding_completed!==!0;return l(A),A}catch(_){return console.error("Error in checkFirstLogin:",_),!1}};ie.useEffect(()=>{t?x():l(!1)},[t]);const S={user:t,session:n,isAuthenticated:!!t,isLoading:i,isFirstLogin:o,signOut:y,refreshSession:g,refreshUser:b,login:m,updateCredentials:v,checkFirstLogin:x};return d.jsx(qF.Provider,{value:S,children:r})},Jc=()=>{const r=ie.useContext(qF);return r===void 0?(console.warn("useAuth called outside of AuthProvider, returning default context"),{user:null,session:null,isAuthenticated:!1,isLoading:!0,isFirstLogin:!1,signOut:async()=>{},refreshSession:async()=>!1,refreshUser:async()=>{},login:async()=>!1,updateCredentials:async()=>({success:!1}),checkFirstLogin:async()=>!1}):r},lK="https://graph.facebook.com/v17.0";async function Wh(r){try{const{data:t,error:e}=await De.from("whatsapp_settings").select("*").eq("company_id",r).single();return e?(console.error("Error fetching WhatsApp settings:",e),null):t}catch(t){return console.error("Error in getWhatsAppSettings:",t),null}}async function zF(r){try{const{error:t}=await De.from("whatsapp_settings").upsert(r,{onConflict:"company_id"});return t?(console.error("Error saving WhatsApp settings:",t),!1):!0}catch(t){return console.error("Error in saveWhatsAppSettings:",t),!1}}async function WF(r,t){var e;try{console.log(" Saving WhatsApp template:",{templateId:r.id,templateName:r.name,companyId:t,category:r.category,language:r.language,componentsCount:(e=r.components)==null?void 0:e.length});const{id:n,...a}=r,i={...a,company_id:t,updated_at:new Date().toISOString(),created_at:new Date().toISOString()};console.log(" Template data to save:",JSON.stringify(i,null,2));const{data:s,error:o}=await De.from("whatsapp_templates").upsert(i,{onConflict:"name,company_id"});return o?(console.error(" Error saving WhatsApp template:",{error:o,message:o.message,details:o.details,hint:o.hint,code:o.code}),!1):(console.log(" WhatsApp template saved successfully:",s),!0)}catch(n){return console.error(" Exception in saveWhatsAppTemplate:",n),n instanceof Error&&(console.error("Error message:",n.message),console.error("Error stack:",n.stack)),!1}}async function HF(r,t){try{const{data:e,error:n}=await De.from("whatsapp_templates").select("*").eq("name",r).eq("company_id",t).single();return n?(console.error("Error fetching WhatsApp template:",n),null):e}catch(e){return console.error("Error in getWhatsAppTemplate:",e),null}}async function Ly(r,t,e,n){var a,i,s,o,l;try{let c=r.replace(/[\s\-\(\)]/g,"");c=c.replace(/^\+/,""),c.match(/^[1-9]\d{10,14}$/)||c.match(/^\d{10}$/)&&(c="91"+c),console.log(" Sending WhatsApp message:",{originalPhone:r,formattedPhone:c,phoneNumberId:n,messageType:t.type,hasAccessToken:!!e,accessTokenLength:e==null?void 0:e.length});const u=`${lK}/${n}/messages`,h={messaging_product:"whatsapp",...{...t,to:c}};console.log(" WhatsApp API Request:",{url:u,payload:JSON.stringify(h,null,2)});const p=await fetch(u,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(h)}),g=await p.json();if(console.log(" WhatsApp API Response:",{status:p.status,ok:p.ok,result:JSON.stringify(g,null,2)}),!p.ok){console.error(" WhatsApp API error:",g);let y="Failed to send WhatsApp message";return(a=g==null?void 0:g.error)!=null&&a.message&&(y=g.error.message,y.includes("not in allowed list")||y.includes("not whitelisted")?y+=". In development mode, recipient phone numbers must be added to your Meta Business Manager allowed list. Please check your WhatsApp settings.":y.includes("Invalid parameter")?y+=". Please check that the phone number is in the correct format (e.g., 919876543210 for India).":y.includes("Access token")?y+=". Your access token may be expired or invalid. Please update your WhatsApp settings.":y.includes("Phone number ID")&&(y+=". The Phone Number ID in your settings may be incorrect.")),{success:!1,error:y}}return console.log(" WhatsApp message sent successfully:",{messageId:(s=(i=g==null?void 0:g.messages)==null?void 0:i[0])==null?void 0:s.id,to:c}),{success:!0,messageId:(l=(o=g==null?void 0:g.messages)==null?void 0:o[0])==null?void 0:l.id}}catch(c){return console.error(" Error sending WhatsApp message:",c),{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}}async function VF(r,t){try{const e=r.replace(/^\+/,"");return await Ly(e,{to:e,type:"template",template:{name:"hello_world",language:{code:"en_US"}}},t.access_token,t.phone_number_id||t.business_number)}catch(e){return console.error("Error sending test message:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}function fN(r,t){let e="";if(r.taxType==="split"){const a=r.cgst||r.tax/2,i=r.sgst||r.tax/2;e=`CGST: ${a.toFixed(2)}
SGST: ${i.toFixed(2)}`}else r.taxType==="integrated"&&(e=`Total GST: ${(r.igst||r.tax).toFixed(2)}`);r.cess&&r.cess>0&&(e+=`
CESS: ${r.cess.toFixed(2)}`);const n=` *Invoice from ${t.business_name}*

 *Invoice Details:*
Invoice No: ${r.invoice_number||r.invoiceNumber||"N/A"}
Date: ${new Date(r.created_at||r.createdAt||new Date).toLocaleDateString("en-IN")}
Time: ${new Date(r.created_at||r.createdAt||new Date).toLocaleTimeString("en-IN")}

 *Amount Breakdown:*
Subtotal: ${(r.subtotal||0).toFixed(2)}
${r.totalDiscount>0?`Discount: -${r.totalDiscount.toFixed(2)}
`:""}${e?e+`
`:""}*Total Amount: ${(r.total||0).toFixed(2)}*

${r.customerPaid?`Paid: ${r.customerPaid.toFixed(2)}
`:""}${r.changeReturned?`Change: ${r.changeReturned.toFixed(2)}
`:""}
Thank you for your business! 

${t.footer_message||"Visit us again!"}`;return{to:r.customer_phone||r.customerPhone,type:"text",text:{body:n}}}function GF(r,t){var n;const e=` Payment Received! 
  
Dear ${r.customer_name},

We've received your payment of ${(n=r.amount)==null?void 0:n.toFixed(2)} on ${new Date(r.payment_date).toLocaleDateString()}.

Transaction ID: ${r.transaction_id}
Payment Method: ${r.payment_method}

Thank you for your payment!

${t.footer_message||""}`;return{to:r.customer_phone,type:"text",text:{body:e}}}function KF(r,t){const e=` Happy Birthday ${r.name}! 
  
Dear ${r.name},

${t.business_name} wishes you a very Happy Birthday!

As a token of our appreciation, here's a special birthday coupon for you:

Coupon Code: BDAY${r.id.substring(0,6).toUpperCase()}
Discount: ${r.birthday_discount||10}%
Valid Till: ${new Date(Date.now()+6048e5).toLocaleDateString()}

Enjoy your special day with our gift!

${t.footer_message||""}`;return{to:r.phone,type:"text",text:{body:e}}}async function XF(r,t){return[{type:"low_selling_items",subject:"Clearance Sale on Selected Items",message:"We have exciting clearance deals on selected items. Visit us today!",suggested_action:"Send discount offer to customers who purchased similar items"},{type:"customer_recommendation",subject:"Personalized Recommendations",message:"Based on your previous purchases, we think you'll love these new arrivals!",suggested_action:"Send personalized recommendations to loyal customers"},{type:"birthday_reminder",subject:"Upcoming Birthday",message:"Just a reminder that a customer's birthday is coming up soon.",suggested_action:"Prepare birthday coupon for customer"},{type:"inactive_customer",subject:"We Miss You!",message:"It's been a while since we saw you. Here's a special offer to welcome you back!",suggested_action:"Send reactivation campaign to inactive customers"},{type:"purchase_created",subject:"New Supplier Order",message:"We've placed a new order with you. Please confirm receipt and estimated delivery time.",suggested_action:"Send notification to suppliers about new orders"},{type:"customer_created",subject:"Welcome New Customer",message:"Welcome a new customer with a special first-time buyer offer.",suggested_action:"Send welcome message with discount to new customers"}]}async function YF(r){try{const t=new Date,e=new Date(t);e.setDate(e.getDate()+1);const n=`${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,a=`${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,{data:i,error:s}=await De.from("customers").select("id, name, phone, date_of_birth").eq("company_id",r).not("date_of_birth","is",null).or(`date_of_birth.like.%-${n},date_of_birth.like.%-${a}`);if(s){console.error("Error fetching customers with upcoming birthdays:",s);return}if(!await Wh(r)){console.error("WhatsApp settings not configured for company:",r);return}for(const l of i||[])if(l.phone)try{await nD("customer_birthday",{customer_id:l.id,customer_phone:l.phone,customer_name:l.name,date_of_birth:l.date_of_birth},r),console.log(`Birthday message sent to customer ${l.name}`)}catch(c){console.error(`Failed to send birthday message to customer ${l.name}:`,c)}}catch(t){console.error("Error checking customer birthdays:",t)}}function JF(r,t){var n;const e=` Monthly Sales Summary 
  
${t.business_name} - ${new Date(r.month).toLocaleDateString("en-US",{month:"long",year:"numeric"})}

Total Sales: ${(n=r.total_sales)==null?void 0:n.toFixed(2)}
Total Transactions: ${r.total_transactions}
Top Selling Product: ${r.top_product}

Thank you for your continued business!

${t.footer_message||""}`;return{to:r.recipient_phone,type:"text",text:{body:e}}}function ZF(r,t){var n,a,i,s,o;const e=` Daily Closing Summary 
  
${t.business_name} - ${new Date(r.date).toLocaleDateString()}

Opening Balance: ${(n=r.opening_balance)==null?void 0:n.toFixed(2)}
Total Sales: ${(a=r.total_sales)==null?void 0:a.toFixed(2)}
Cash In: ${(i=r.cash_in)==null?void 0:i.toFixed(2)}
Cash Out: ${(s=r.cash_out)==null?void 0:s.toFixed(2)}
Closing Balance: ${(o=r.closing_balance)==null?void 0:o.toFixed(2)}

Have a great evening!

${t.footer_message||""}`;return{to:r.recipient_phone,type:"text",text:{body:e}}}function QF(r,t){var n;const e=` New Purchase Order 
  
Dear ${r.creditor_name},

We've placed a new purchase order with your company.

Total Amount: ${(n=r.total_amount)==null?void 0:n.toFixed(2)}
Payment Method: ${r.payment_method}

Thank you for your continued partnership!

${t.footer_message||""}`;return{to:r.creditor_phone,type:"text",text:{body:e}}}function eD(r,t){const e=` Welcome to ${t.business_name}! 
  
Dear ${r.customer_name},

Welcome to our store! We're excited to have you as our customer.

As a welcome gift, here's a special coupon for your first purchase:
Coupon Code: WELCOME10
Discount: 10% off your first order

We look forward to serving you!

${t.footer_message||""}`;return{to:r.customer_phone,type:"text",text:{body:e}}}async function tD(r,t){var e,n,a,i,s,o,l,c;try{const u=await Wh(t);if(!(u!=null&&u.gemini_api_key))throw new Error("Gemini API key not configured. Please add your API key in WhatsApp Settings.");const{data:f}=await De.from("companies").select("name, address_city, address_state").eq("id",t).single(),h=`You are a professional marketing assistant for ${(f==null?void 0:f.name)||"a business"}${f!=null&&f.address_city?` located in ${f.address_city}${f!=null&&f.address_state?", "+f.address_state:""}`:""}. Generate a WhatsApp marketing message that is:
- Professional and engaging
- Concise (under 300 characters)
- Includes appropriate emojis
- Has a clear call-to-action
- Suitable for WhatsApp business messaging

User request: ${r}`,p=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${u.gemini_api_key}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:h}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]})});if(!p.ok){const m=await p.json();throw console.error("Gemini API error:",m),p.status===400&&((n=(e=m.error)==null?void 0:e.message)!=null&&n.includes("API key"))?new Error("Invalid Gemini API key. Please check your API key in WhatsApp Settings."):new Error(`Gemini API error: ${((a=m.error)==null?void 0:a.message)||"Unknown error"}`)}const y=(c=(l=(o=(s=(i=(await p.json()).candidates)==null?void 0:i[0])==null?void 0:s.content)==null?void 0:o.parts)==null?void 0:l[0])==null?void 0:c.text;if(!y)throw new Error("No response generated from Gemini AI");return y.trim()}catch(u){throw console.error("Error generating AI message:",u),u instanceof Error?u:new Error("Failed to generate AI message. Please try again.")}}async function rD(r,t,e=!1,n="a4"){try{const a=await Wh(t);if(!a)return{success:!1,error:"WhatsApp settings not configured"};if(!a.auto_send_enabled)return console.log("WhatsApp auto-send is disabled"),{success:!1,error:"Auto-send is disabled"};const i=r.customer_phone||r.customerPhone;if(!i)return{success:!1,error:"Customer phone number not available"};const s=fN(r,a),o=await Ly(i,s,a.access_token,a.phone_number_id||a.business_number);return o.success?(await De.from("whatsapp_messages").insert({company_id:t,customer_id:r.customer_id||r.customerId,message_type:"sales_invoice",message_content:JSON.stringify(s),status:"sent",sent_at:new Date().toISOString(),metadata:JSON.stringify({invoice_number:r.invoice_number||r.invoiceNumber,invoice_amount:r.total,pdf_format:e?n:null})}),{success:!0}):{success:!1,error:o.error}}catch(a){return console.error("Error sending sales invoice:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function nD(r,t,e){try{const n=await Wh(e);if(!n)return{success:!1,error:"WhatsApp settings not configured"};let a=null;switch(r){case"new_sale":a=fN(t,n);break;case"payment_received":a=GF(t,n);break;case"customer_created":a=eD(t,n);break;case"customer_birthday":a=KF(t,n);break;case"monthly_sales_summary":a=JF(t,n);break;case"daily_closing_summary":a=ZF(t,n);break;case"purchase_created":a=QF(t,n);break;default:return{success:!1,error:"Unsupported event type"}}if(!a)return{success:!1,error:"Failed to generate message"};const i=await Ly(a.to,a,n.access_token,n.phone_number_id||n.business_number);return i.success?(await De.from("whatsapp_messages").insert({company_id:e,customer_id:t.customer_id||null,message_type:r,message_content:JSON.stringify(a),status:"sent",sent_at:new Date().toISOString()}),{success:!0}):{success:!1,error:i.error}}catch(n){return console.error("Error triggering event message:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}const rp=Object.freeze(Object.defineProperty({__proto__:null,checkCustomerBirthdays:YF,generateAISuggestions:XF,generateBirthdayWishMessage:KF,generateCustomAIMessage:tD,generateCustomerCreatedMessage:eD,generateDailyClosingSummaryMessage:ZF,generateMonthlySalesSummaryMessage:JF,generatePaymentReceiptMessage:GF,generatePurchaseCreatedMessage:QF,generateSalesInvoiceMessage:fN,getWhatsAppSettings:Wh,getWhatsAppTemplate:HF,saveWhatsAppSettings:zF,saveWhatsAppTemplate:WF,sendSalesInvoice:rD,sendTestMessage:VF,sendWhatsAppMessage:Ly,triggerEventMessage:nD},Symbol.toStringTag,{value:"Module"})),aD=ie.createContext(void 0),cK=({children:r})=>{const{user:t,isAuthenticated:e}=Jc(),[n,a]=ie.useState([]),[i,s]=ie.useState([]),[o,l]=ie.useState(null),[c,u]=ie.useState(!0),[f,h]=ie.useState(null),[p,g]=ie.useState(!1);ie.useEffect(()=>{if(!(o!=null&&o.id))return;const S=async()=>{const I=localStorage.getItem(`lastBirthdayCheck_${o.id}`),A=new Date().toDateString();if(!I||I!==A){console.log(`Checking for customer birthdays for company ${o.id}...`);try{await YF(o.id),localStorage.setItem(`lastBirthdayCheck_${o.id}`,A)}catch(O){console.error("Error checking customer birthdays:",O)}}};S();const _=setInterval(S,1440*60*1e3);return()=>clearInterval(_)},[o]);const y=async()=>{var S,_,I,A,O,M;if(!e||!t){a([]),s([]),l(null),g(!1),u(!1);return}u(!0),h(null);try{const{data:z,error:U}=await De.from("company_users").select("company_id, role").eq("user_id",t.id).eq("is_active",!0);if(U){console.error("Error fetching company links:",U);const L=(S=t==null?void 0:t.user_metadata)==null?void 0:S.role,K=localStorage.getItem(`needsCompanySetup_${t==null?void 0:t.id}`)==="true";if(L==="admin"||K){console.info("Admin first-time login detected, skipping company fetch error"),a([]),s([]),l(null),g(!0),u(!1);return}throw Ce.error("Failed to load companies"),U}const D=(z||[]).map(L=>L.company_id).filter(L=>!!L),T=(_=t==null?void 0:t.user_metadata)==null?void 0:_.role,R=(z||[]).some(L=>L.company_id===null);if(D.length===0&&(T==="admin"||R)){a([]),s([]),l(null),g(!0),console.info("Admin user with no companies detected");return}else g(!1);if(D.length===0){a([]),s([]),l(null),localStorage.removeItem("selectedCompanyId"),((I=t==null?void 0:t.user_metadata)==null?void 0:I.role)==="admin"&&g(!0);return}const{data:C,error:N}=await De.from("companies").select("*").in("id",D).eq("is_active",!0);if(N){console.error("Error fetching companies by IDs:",N);const L=(A=t==null?void 0:t.user_metadata)==null?void 0:A.role,K=localStorage.getItem(`needsCompanySetup_${t==null?void 0:t.id}`)==="true";if(L==="admin"||K){console.info("Admin first-time login detected, skipping companies fetch error"),a([]),s([]),l(null),g(!0),u(!1);return}throw Ce.error("Failed to load companies"),N}const{data:E,error:k}=await De.from("company_users").select("company_id, role").in("company_id",D).eq("is_active",!0);k&&console.error("Error fetching roles for companies:",k);const P=new Map;(E||[]).forEach(L=>{P.has(L.company_id)||P.set(L.company_id,new Set),P.get(L.company_id).add(L.role)});const q=new Map;(z||[]).forEach(L=>{L.company_id&&q.set(L.company_id,L.role)});const H=(C||[]).map(L=>{const K=Array.from(P.get(L.id)||[]),Y=K.includes("manager")&&K.includes("cashier")&&K.includes("salesperson");return{...L,role:q.get(L.id)||void 0,has_all_roles:Y,assigned_roles:K}});if(a(H),s(H),g(!1),!o&&H.length>0){const L=localStorage.getItem("selectedCompanyId");if(L){const K=H.find(Y=>Y.id===L);K&&l(K)}}else if(H.length===0)if(l(null),localStorage.removeItem("selectedCompanyId"),H.length>0)Ce.error("Please ensure your company has all required roles assigned");else{const L=(O=t==null?void 0:t.user_metadata)==null?void 0:O.role,K=localStorage.getItem(`needsCompanySetup_${t==null?void 0:t.id}`)==="true";L==="admin"||K?console.info("No companies yet; awaiting admin first-time setup."):Ce.error("No companies available. Please contact your administrator.")}else if(o)if(!H.some(K=>K.id===o.id))H.length>0?(l(H[0]),localStorage.setItem("selectedCompanyId",H[0].id),Ce.error(`${o.name} is missing required roles and can't be operated`)):(l(null),localStorage.removeItem("selectedCompanyId"),Ce.error("No companies have all required roles assigned"));else{const K=H.find(Y=>Y.id===o.id);K&&l(K)}}catch(z){console.error("Error fetching companies:",z);const U=(M=t==null?void 0:t.user_metadata)==null?void 0:M.role,D=localStorage.getItem(`needsCompanySetup_${t==null?void 0:t.id}`)==="true";if(U==="admin"||D)console.info("Admin first-time login detected, suppressing fetch error"),h(null),a([]),s([]),l(null),g(!0);else{const T=z instanceof Error?z.message:"Failed to fetch companies";h(T),Ce.error(T)}}finally{u(!1)}};ie.useEffect(()=>{const S=setTimeout(()=>{y()},200);return()=>clearTimeout(S)},[e,t]);const x={companies:n,operableCompanies:i,selectedCompany:o,setSelectedCompany:S=>{l(S),S?localStorage.setItem("selectedCompanyId",S.id):localStorage.removeItem("selectedCompanyId")},loading:c,error:f,fetchCompanies:y,addCompany:async S=>{if(!e||!t)throw new Error("User not authenticated");u(!0),h(null);try{const{data:_,error:I}=await De.rpc("create_company_and_link_admin",{company_name:S.name||"",p_legal_name:S.legal_name||"",p_tax_number:S.tax_number||"",p_email:S.email||"",p_phone:S.phone||"",p_website:S.website||"",p_business_type:S.business_type||null,p_logo_url:S.logo_url||null,p_address_street:S.address_street||"",p_address_city:S.address_city||"",p_address_state:S.address_state||"",p_address_postal_code:S.address_postal_code||"",p_address_country:S.address_country||""});if(I)throw I;if(!_)throw new Error("No company ID returned from RPC");const{data:A,error:O}=await De.from("companies").select("*").eq("id",_).single();if(O)throw O;if(!A)throw new Error("Could not fetch newly created company");const M={...A,role:"owner"};return await y(),M}catch(_){const I=(_==null?void 0:_.message)||JSON.stringify(_)||"Failed to add company";throw h(I),Ce.error(`Failed to add company: ${I}`),_}finally{u(!1)}},addCompanyToState:S=>{a(_=>_.find(A=>A.id===S.id)?_:[..._,S]),s(_=>_.find(A=>A.id===S.id)?_:[..._,S]),l(S),localStorage.setItem("selectedCompanyId",S.id)},refresh:y,isAdminWithNoCompanies:p};return d.jsx(aD.Provider,{value:x,children:r})},ln=()=>{const r=ie.useContext(aD);if(r===void 0)throw new Error("useCompanyContext must be used within a CompanyProvider");return r},uK=ln,Gd={owner:{dashboard:{view:!0,create:!0,edit:!0,delete:!0},products:{view:!0,create:!0,edit:!0,delete:!0},sales:{view:!0,create:!0,edit:!0,delete:!0},customers:{view:!0,create:!0,edit:!0,delete:!0},purchase:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},gst:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0}},admin:{dashboard:{view:!0,create:!0,edit:!0,delete:!0},products:{view:!0,create:!0,edit:!0,delete:!0},sales:{view:!0,create:!0,edit:!0,delete:!0},customers:{view:!0,create:!0,edit:!0,delete:!0},purchase:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},gst:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0}},manager:{dashboard:{view:!0,create:!0,edit:!0,delete:!0},products:{view:!0,create:!0,edit:!0,delete:!0},sales:{view:!0,create:!0,edit:!0,delete:!0},customers:{view:!0,create:!0,edit:!0,delete:!0},purchase:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},gst:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0}},cashier:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},products:{view:!0,create:!1,edit:!1,delete:!1},sales:{view:!0,create:!0,edit:!0,delete:!0},customers:{view:!0,create:!1,edit:!1,delete:!1},purchase:{view:!1,create:!1,edit:!1,delete:!1},reports:{view:!1,create:!1,edit:!1,delete:!1},gst:{view:!1,create:!1,edit:!1,delete:!1},users:{view:!1,create:!1,edit:!1,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1}},salesperson:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},products:{view:!0,create:!1,edit:!1,delete:!1},sales:{view:!0,create:!0,edit:!1,delete:!1},customers:{view:!0,create:!1,edit:!1,delete:!1},purchase:{view:!1,create:!1,edit:!1,delete:!1},reports:{view:!1,create:!1,edit:!1,delete:!1},gst:{view:!1,create:!1,edit:!1,delete:!1},users:{view:!1,create:!1,edit:!1,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1}},staff:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},products:{view:!0,create:!1,edit:!1,delete:!1},sales:{view:!0,create:!1,edit:!1,delete:!1},customers:{view:!0,create:!1,edit:!1,delete:!1},purchase:{view:!1,create:!1,edit:!1,delete:!1},reports:{view:!1,create:!1,edit:!1,delete:!1},gst:{view:!1,create:!1,edit:!1,delete:!1},users:{view:!1,create:!1,edit:!1,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1}}},iD=ie.createContext(void 0),dK=({children:r})=>{const t=Jc(),{selectedCompany:e}=ln(),[n,a]=ie.useState(null),[i,s]=ie.useState(null),[o,l]=ie.useState(!0),{user:c,isAuthenticated:u}=t||{user:null,isAuthenticated:!1};ie.useEffect(()=>{(!u||!c)&&localStorage.removeItem("demoRole")},[u,c]);const f=async()=>{var m,v,b,x;if(t!=null&&t.isLoading)return;const y=window.location.pathname==="/role-selection"?localStorage.getItem("demoRole"):null;if(y&&Object.keys(Gd).includes(y)){console.log("Using demo role:",y),a(y),s(Gd[y]),l(!1);return}if(!u||!c){a(null),s(null),l(!1);return}if(!e){try{const{data:S}=await De.auth.getUser(),_=(v=(m=S.user)==null?void 0:m.user_metadata)==null?void 0:v.role;if(_&&Object.keys(Gd).includes(_)){a(_),s(Gd[_]),l(!1);return}}catch(S){console.error("Error getting user metadata:",S)}a(null),s(null),l(!1);return}l(!0);try{const{data:S,error:_}=await De.from("company_users").select("role").eq("user_id",c.id).eq("company_id",e.id).eq("is_active",!0).single();if(_){console.error("Error fetching user role:",_);try{const{data:A}=await De.auth.getUser(),O=(x=(b=A.user)==null?void 0:b.user_metadata)==null?void 0:x.role;if(O&&Object.keys(Gd).includes(O)){console.log("Using fallback role from user metadata:",O),a(O),s(Gd[O]),l(!1);return}}catch(A){console.error("Error getting user metadata:",A)}console.log("No role found, assigning admin role as default");let I=e==null?void 0:e.id;if(!I){const{data:A,error:O}=await De.from("companies").select("id").eq("is_active",!0).limit(1);if(O&&console.error("Error fetching companies:",O),A&&A.length>0)I=A[0].id;else{const{data:M,error:z}=await De.from("companies").insert({name:"Default Company",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();z?console.error("Error creating default company:",z):I=M.id}}if(I){const{error:A}=await De.from("company_users").insert({user_id:c.id,company_id:I,role:"admin",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(A){console.warn("Failed to insert user record, trying update:",A);const{error:M}=await De.from("company_users").update({role:"admin",is_active:!0,updated_at:new Date().toISOString()}).eq("user_id",c.id);M&&console.error("Error updating user record:",M)}const{error:O}=await De.auth.updateUser({data:{role:"admin"}});O&&console.error("Error updating user metadata:",O),a("admin"),s(Gd.admin),l(!1);return}_.code!=="PGRST116"?Ce.error("Failed to retrieve user role - please contact your manager"):window.location.pathname!=="/login"&&Ce.error("No role assigned for this company - please contact your manager"),a(null),s(null);return}if(S){const I=S.role;a(I),s(Gd[I])}else a(null),s(null)}catch(S){console.error("Error in fetchUserRole:",S),Ce.error("An error occurred while fetching user role"),a(null),s(null)}finally{l(!1)}},h=async()=>{var g;try{const{data:{user:y}}=await De.auth.getUser();if(!y){a(null);return}const{data:m,error:v}=await De.from("company_users").select("role").eq("user_id",y.id).single();if(v&&console.error("Error fetching role from company_users:",v),m!=null&&m.role){a(m.role);return}const b=(g=y.user_metadata)==null?void 0:g.role;if(b&&fK(b)){a(b);return}console.log("No role found during refresh, assigning admin role as default");const{data:x,error:S}=await De.from("companies").select("id").eq("is_active",!0).limit(1);S&&console.error("Error fetching companies:",S);let _;if(x&&x.length>0)_=x[0].id;else{const{data:I,error:A}=await De.from("companies").insert({name:"Default Company",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();A?console.error("Error creating default company:",A):_=I.id}if(_){const{error:I}=await De.from("company_users").insert({user_id:y.id,company_id:_,role:"admin",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(I){console.warn("Failed to insert user record, trying update:",I);const{error:O}=await De.from("company_users").update({role:"admin",is_active:!0,updated_at:new Date().toISOString()}).eq("user_id",y.id);O&&console.error("Error updating user record:",O)}const{error:A}=await De.auth.updateUser({data:{role:"admin"}});A&&console.error("Error updating user metadata:",A),a("admin");return}a(null)}catch(y){console.error("Error refreshing user role:",y),a(null)}},p=(g,y="view")=>i?i[g][y]:!1;return ie.useEffect(()=>{if(t!=null&&t.isLoading){l(!0);return}f()},[u,c,e,t==null?void 0:t.isLoading]),d.jsx(iD.Provider,{value:{userRole:n,permissions:i,isRoleLoading:o,hasPermission:p,refreshUserRole:h},children:r})},ts=()=>{const r=ie.useContext(iD);if(r===void 0)throw new Error("useRole must be used within a RoleProvider");return r},fK=r=>["owner","admin","manager","cashier","salesperson","staff"].includes(r);let Ew=!1,Aw=null,eA=0,W0=0;const hK=3;function pK(){if(Ew)return console.log("Connection manager already initialized"),()=>{};console.log("Initializing connection manager"),Ew=!0,Aw=setInterval(async()=>{await Tw()},300*1e3);const r=()=>{document.visibilityState==="visible"&&(console.log("Page became visible, checking connection health"),setTimeout(()=>{Tw()},1e3))};document.addEventListener("visibilitychange",r);const t=async()=>{console.log("Network came online, checking connection"),await Tw()},e=()=>{console.log("Network went offline"),W0++};return window.addEventListener("online",t),window.addEventListener("offline",e),()=>{Aw&&clearInterval(Aw),document.removeEventListener("visibilitychange",r),window.removeEventListener("online",t),window.removeEventListener("offline",e),Ew=!1}}async function Tw(){const r=Date.now();if(!(r-eA<3e4)){eA=r;try{console.log("Checking connection health...");const{error:t}=await De.from("products").select("id").limit(1);t?(W0++,console.error("Connection health check failed:",t),W0>=hK&&(console.log("Multiple connection failures detected, attempting reconnection"),await nK(),W0=0)):(W0=0,console.log("Connection health check passed"))}catch(t){W0++,console.error("Connection health check error:",t)}}}/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sD=(...r)=>r.filter((t,e,n)=>!!t&&n.indexOf(t)===e).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=ie.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...o},l)=>ie.createElement("svg",{ref:l,...gK,width:t,height:t,stroke:r,strokeWidth:n?Number(e)*24/Number(t):e,className:sD("lucide",a),...o},[...s.map(([c,u])=>ie.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=(r,t)=>{const e=ie.forwardRef(({className:n,...a},i)=>ie.createElement(yK,{ref:i,iconNode:t,className:sD(`lucide-${mK(r)}`,n),...a}));return e.displayName=`${r}`,e};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=ar("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=ar("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ar("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=ar("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=ar("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=ar("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ar("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ar("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=ar("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=ar("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ar("ChartColumnIncreasing",[["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=ar("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ar("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=ar("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=ar("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ar("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=ar("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=ar("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=ar("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ar("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=ar("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=ar("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=ar("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=ar("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=ar("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=ar("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=ar("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ar("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=ar("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=ar("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ar("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=ar("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=ar("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=ar("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=ar("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ar("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=ar("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=ar("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=ar("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=ar("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=ar("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=ar("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ar("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=ar("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ar("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=ar("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=ar("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=ar("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=ar("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ar("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=ar("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=ar("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ar("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=ar("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ar("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=ar("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=ar("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=ar("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ar("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ar("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ar("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=ar("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ar("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=ar("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ar("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=ar("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=ar("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=ar("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=ar("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ar("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=ar("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=ar("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ar("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=ar("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=ar("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=ar("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ar("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=ar("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=ar("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=ar("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=ar("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ar("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=ar("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=ar("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=ar("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ar("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ar("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ar("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=ar("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wD=ie.createContext(void 0),PK=({children:r})=>{const[t,e]=ie.useState(()=>localStorage.getItem("theme")||"dark");ie.useEffect(()=>{localStorage.setItem("theme",t)},[t]);const n=()=>{e(a=>a==="light"?"dark":"light")};return d.jsx(wD.Provider,{value:{theme:t,toggleTheme:n},children:r})},zr=()=>{const r=ie.useContext(wD);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},lt=Je.forwardRef(({children:r,variant:t="primary",size:e="md",isLoading:n=!1,leftIcon:a,rightIcon:i,disabled:s,fullWidth:o=!1,androidRipple:l=!0,iconOnly:c=!1,className:u="",...f},h)=>{const p="inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",g={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 active:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500 active:bg-gray-400 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-900",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 active:bg-red-800",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 focus:ring-gray-500 active:bg-gray-200 dark:active:bg-gray-700"},y={sm:c?"text-sm p-2 md:p-1.5":"text-sm px-3 py-2 md:py-1.5",md:c?"text-base p-2.5 md:p-2":"text-base px-4 py-2.5 md:py-2",lg:c?"text-lg p-3 md:p-3":"text-lg px-5 py-3 md:px-6"},m=o?"w-full":"",v=l?"android-ripple":"";return d.jsxs("button",{ref:h,className:`${p} ${g[t]} ${y[e]} ${m} ${v} ${u}`,disabled:n||s,...f,children:[n&&d.jsx(mN,{className:"w-4 h-4 mr-2 animate-spin","aria-hidden":"true"}),!n&&a&&d.jsx("span",{className:"mr-2 flex-shrink-0",children:a}),r&&!c&&d.jsx("span",{className:"truncate",children:r}),r&&c&&d.jsx("span",{children:r}),!r&&c&&d.jsx("span",{children:""}),!n&&i&&d.jsx("span",{className:"ml-2 flex-shrink-0",children:i})]})});lt.displayName="Button";const Tx=({phoneNumber:r,messageType:t,messageData:e,companyId:n,customerId:a,className:i="",variant:s="primary",size:o="md",iconOnly:l=!1})=>{const{theme:c}=zr(),[u,f]=ie.useState(!1),h=async()=>{if(!r){Ce.error("Customer phone number not available");return}if(!n){Ce.error("Company not selected");return}f(!0);try{const y=await Wh(n);if(!y){Ce.error("WhatsApp not configured. Please configure WhatsApp settings first.",{duration:5e3}),setTimeout(()=>{window.location.href="/whatsapp-settings"},2e3),f(!1);return}let m={};switch(t){case"sales_invoice":let b="";if((e==null?void 0:e.taxType)==="split"){const S=(e==null?void 0:e.cgst)||(e==null?void 0:e.tax)/2||0,_=(e==null?void 0:e.sgst)||(e==null?void 0:e.tax)/2||0;b=`CGST: ${S.toFixed(2)}
SGST: ${_.toFixed(2)}`}else(e==null?void 0:e.taxType)==="integrated"&&(b=`IGST: ${((e==null?void 0:e.igst)||(e==null?void 0:e.tax)||0).toFixed(2)}`);e!=null&&e.cess&&e.cess>0&&(b+=`
CESS: ${e.cess.toFixed(2)}`);const x=` *Invoice from ${y.business_name}*

 *Invoice Details:*
Invoice No: ${(e==null?void 0:e.invoice_number)||(e==null?void 0:e.invoiceNumber)||"N/A"}
Date: ${new Date((e==null?void 0:e.created_at)||(e==null?void 0:e.createdAt)||new Date).toLocaleDateString("en-IN")}
Time: ${new Date((e==null?void 0:e.created_at)||(e==null?void 0:e.createdAt)||new Date).toLocaleTimeString("en-IN")}

 *Amount Breakdown:*
Subtotal: ${((e==null?void 0:e.subtotal)||0).toFixed(2)}
${(e==null?void 0:e.totalDiscount)>0?`Discount: -${e.totalDiscount.toFixed(2)}
`:""}${b?b+`
`:""}*Total Amount: ${((e==null?void 0:e.total)||0).toFixed(2)}*

${e!=null&&e.customerPaid?`Paid: ${e.customerPaid.toFixed(2)}
`:""}${e!=null&&e.changeReturned?`Change: ${e.changeReturned.toFixed(2)}
`:""}Thank you for your business! 

${y.footer_message||"Visit us again!"}`;m={to:r,type:"text",text:{body:x}};break;case"payment_receipt":m={to:r,type:"text",text:{body:`Payment received! Thank you for your payment of ${((e==null?void 0:e.amount)||0).toFixed(2)}.`}};break;default:m={to:r,type:"text",text:{body:"Hello from our store!"}}}const v=await Ly(r,m,y.access_token,y.phone_number_id||y.business_number);if(v.success){Ce.success("Message sent successfully!");try{const b={company_id:n,customer_id:a,message_type:t,message_content:JSON.stringify(m),status:"sent",sent_at:new Date().toISOString()};await De.from("whatsapp_messages").insert(b)}catch(b){console.error("Error logging WhatsApp message:",b)}}else{let b=v.error||"Failed to send message";b.includes("not in allowed list")||b.includes("not whitelisted")?(b="Recipient phone number not in allowed list. In development mode, customer phone numbers must be added to your Meta Business Manager allowed list.",Ce.error(b,{duration:1e4,icon:""})):Ce.error(b)}}catch(y){console.error("Error sending WhatsApp message:",y),Ce.error("Failed to send WhatsApp message")}finally{f(!1)}},p={sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},g=o==="sm"?14:o==="lg"?20:16;return d.jsx(lt,{variant:s,onClick:h,disabled:u,className:`${i} ${p[o]} flex items-center`,children:u?d.jsxs(d.Fragment,{children:[d.jsx(mN,{className:"mr-2 animate-spin",size:g}),l?null:"Sending..."]}):d.jsxs(d.Fragment,{children:[d.jsx(By,{className:"mr-2",size:g}),l?null:t==="sales_invoice"?"Send Invoice via WhatsApp":t==="payment_receipt"?"Send Payment Receipt":"Send WhatsApp Message"]})})};function qg(r,t={}){const[e,n]=ie.useState([]),[a,i]=ie.useState(!0),[s,o]=ie.useState(null),l=ie.useMemo(()=>t.filters?t.filters.map(p=>`${p.column}${p.operator}${p.value}`).join("|"):"",[t.filters]),c=ie.useCallback(async()=>{try{let p=De.from(r).select(t.select||"*");t.filters&&t.filters.forEach(v=>{p=p.filter(v.column,v.operator,v.value)});const{data:g,error:y}=await p;if(y)throw y;if(!g){n([]);return}const m=g.map(v=>Object.entries(v).reduce((x,[S,_])=>{const I=S.replace(/_([a-z])/g,(A,O)=>O.toUpperCase());return S==="image_url"?x.imageUrl=_:S==="company_id"?x.companyId=_:x[I]=_,x},{}));n(m)}catch(p){o(p instanceof Error?p:new Error("Unknown error occurred"))}finally{i(!1)}},[r,t.select,l]);return ie.useEffect(()=>{if(c(),t.realtime){console.log(`Setting up real-time subscription for ${r}`);const p=`realtime:${r}:${l||"all"}`,g=De.channel(p);let y;return t.filters&&t.filters.length>0&&(y=t.filters.map(m=>`${m.column}=eq.${m.value}`).join(",")),console.log("Realtime subscription filters:",y),g.on("postgres_changes",{event:"*",schema:"public",table:r,filter:y},m=>{switch(console.log(`Real-time update received for ${r}:`,m),m.eventType){case"INSERT":const v=Object.entries(m.new).reduce((x,[S,_])=>{const I=S.replace(/_([a-z])/g,(A,O)=>O.toUpperCase());return S==="image_url"?x.imageUrl=_:S==="company_id"?x.companyId=_:x[I]=_,x},{});n(x=>[...x,v]);break;case"UPDATE":const b=Object.entries(m.new).reduce((x,[S,_])=>{const I=S.replace(/_([a-z])/g,(A,O)=>O.toUpperCase());return S==="image_url"?x.imageUrl=_:S==="company_id"?x.companyId=_:x[I]=_,x},{});n(x=>x.map(S=>S.id===b.id?{...S,...b}:S));break;case"DELETE":n(x=>x.filter(S=>S.id!==m.old.id));break}}).subscribe(),()=>{console.log(`Unsubscribing from real-time updates for ${r}`),De.removeChannel(g)}}},[c,r,l,t.filters,t.realtime]),{data:e,loading:a,error:s,add:async p=>{try{const g=Object.entries(p).reduce((x,[S,_])=>{const I=S.replace(/[A-Z]/g,A=>`_${A.toLowerCase()}`);return S==="imageUrl"?x.image_url=_:S==="companyId"?x.company_id=_:S==="taxRateId"?x.tax_rate_id=_:S==="taxType"?x.tax_type=_:S==="taxInclusive"?x.tax_inclusive=_:S==="hsnCode"?x.hsn_code=_:S==="createdAt"?x.created_at=_:S==="updatedAt"?x.updated_at=_:x[I]=_,x},{}),y=await De.from(r).insert(g).select().single(),m=y.data,v=y.error;if(v)throw console.error("Database error:",v),v.code==="23505"&&v.message.includes("products_sku_key")?new Error("A product with this SKU already exists. Please use a unique SKU."):new Error(v.message||"Failed to add");if(!m)throw new Error("No data returned after insert");return Ce.success("Added successfully"),Object.entries(m).reduce((x,[S,_])=>{const I=S.replace(/_([a-z])/g,(A,O)=>O.toUpperCase());return S==="image_url"?x.imageUrl=_:S==="company_id"?x.companyId=_:x[I]=_,x},{}).id}catch(g){throw console.error("Add error:",g),Ce.error(g instanceof Error?g.message:"Failed to add"),g instanceof Error?g:new Error("Failed to add")}},update:async(p,g)=>{try{const y=Object.entries(g).reduce((b,[x,S])=>{const _=x.replace(/[A-Z]/g,I=>`_${I.toLowerCase()}`);return x==="imageUrl"?b.image_url=S:x==="companyId"?b.company_id=S:b[_]=S,b},{}),v=(await De.from(r).update(y).eq("id",p)).error;if(v)throw console.error("Database update error:",v),v.code==="23505"&&v.message.includes("products_sku_key")?new Error("A product with this SKU already exists. Please use a unique SKU."):v;Ce.success("Updated successfully")}catch(y){throw Ce.error("Failed to update"),y instanceof Error?y:new Error("Failed to update")}},remove:async p=>{try{const y=(await De.from(r).delete().eq("id",p)).error;if(y)throw y;Ce.success("Deleted successfully")}catch(g){throw Ce.error("Failed to delete"),g instanceof Error?g:new Error("Failed to delete")}}}}function Qe(r){if(r==null||r==="")return 0;if(typeof r=="number")return r;if(typeof r=="string"){const e=r.replace(/[^0-9.-]/g,""),n=parseFloat(e);return isNaN(n)?0:n}const t=Number(r);return isNaN(t)?0:t}function gh(r){const t=Qe(r);return Math.floor(t)}function OK(r){if(!r)return null;try{if(r instanceof Date)return r.toISOString();if(typeof r=="string"){const t=new Date(r);if(!isNaN(t.getTime()))return t.toISOString();const e=r.split("/");if(e.length===3){const n=parseInt(e[0],10),a=parseInt(e[1],10)-1,i=parseInt(e[2],10),s=new Date(i,a,n);if(!isNaN(s.getTime()))return s.toISOString()}}if(typeof r=="number"){const t=new Date(r);if(!isNaN(t.getTime()))return t.toISOString()}return null}catch(t){return console.error("Error converting date to ISO format:",t),null}}function ul(r){return r===""||r===void 0||r===null?null:r}const IK="modulepreload",MK=function(r){return"/"+r},nA={},yo=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let s=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=s(e.map(c=>{if(c=MK(c),c in nA)return;nA[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":IK,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function $n(r){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(r)}var Ss=Uint8Array,zo=Uint16Array,xN=Int32Array,Cx=new Ss([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Px=new Ss([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i6=new Ss([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_D=function(r,t){for(var e=new zo(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var a=new xN(e[30]),n=1;n<30;++n)for(var i=e[n];i<e[n+1];++i)a[i]=i-e[n]<<5|n;return{b:e,r:a}},SD=_D(Cx,2),ND=SD.b,s6=SD.r;ND[28]=258,s6[258]=28;var jD=_D(Px,0),RK=jD.b,aA=jD.r,o6=new zo(32768);for(var oa=0;oa<32768;++oa){var Kd=(oa&43690)>>1|(oa&21845)<<1;Kd=(Kd&52428)>>2|(Kd&13107)<<2,Kd=(Kd&61680)>>4|(Kd&3855)<<4,o6[oa]=((Kd&65280)>>8|(Kd&255)<<8)>>1}var qc=(function(r,t,e){for(var n=r.length,a=0,i=new zo(t);a<n;++a)r[a]&&++i[r[a]-1];var s=new zo(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var o;if(e){o=new zo(1<<t);var l=15-t;for(a=0;a<n;++a)if(r[a])for(var c=a<<4|r[a],u=t-r[a],f=s[r[a]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)o[o6[f]>>l]=c}else for(o=new zo(n),a=0;a<n;++a)r[a]&&(o[a]=o6[s[r[a]-1]++]>>15-r[a]);return o}),mf=new Ss(288);for(var oa=0;oa<144;++oa)mf[oa]=8;for(var oa=144;oa<256;++oa)mf[oa]=9;for(var oa=256;oa<280;++oa)mf[oa]=7;for(var oa=280;oa<288;++oa)mf[oa]=8;var zg=new Ss(32);for(var oa=0;oa<32;++oa)zg[oa]=5;var FK=qc(mf,9,0),DK=qc(mf,9,1),LK=qc(zg,5,0),BK=qc(zg,5,1),Ow=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},zl=function(r,t,e){var n=t/8|0;return(r[n]|r[n+1]<<8)>>(t&7)&e},Iw=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},wN=function(r){return(r+7)/8|0},kD=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new Ss(r.subarray(t,e))},$K=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Yl=function(r,t,e){var n=new Error(t||$K[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Yl),!e)throw n;return n},UK=function(r,t,e,n){var a=r.length,i=0;if(!a||t.f&&!t.l)return e||new Ss(0);var s=!e,o=s||t.i!=2,l=t.i;s&&(e=new Ss(a*3));var c=function(te){var se=e.length;if(te>se){var ce=new Ss(Math.max(se*2,te));ce.set(e),e=ce}},u=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,y=t.m,m=t.n,v=a*8;do{if(!p){u=zl(r,f,1);var b=zl(r,f+1,3);if(f+=3,b)if(b==1)p=DK,g=BK,y=9,m=5;else if(b==2){var I=zl(r,f,31)+257,A=zl(r,f+10,15)+4,O=I+zl(r,f+5,31)+1;f+=14;for(var M=new Ss(O),z=new Ss(19),U=0;U<A;++U)z[i6[U]]=zl(r,f+U*3,7);f+=A*3;for(var D=Ow(z),T=(1<<D)-1,R=qc(z,D,1),U=0;U<O;){var C=R[zl(r,f,T)];f+=C&15;var x=C>>4;if(x<16)M[U++]=x;else{var N=0,E=0;for(x==16?(E=3+zl(r,f,3),f+=2,N=M[U-1]):x==17?(E=3+zl(r,f,7),f+=3):x==18&&(E=11+zl(r,f,127),f+=7);E--;)M[U++]=N}}var k=M.subarray(0,I),P=M.subarray(I);y=Ow(k),m=Ow(P),p=qc(k,y,1),g=qc(P,m,1)}else Yl(1);else{var x=wN(f)+4,S=r[x-4]|r[x-3]<<8,_=x+S;if(_>a){l&&Yl(0);break}o&&c(h+S),e.set(r.subarray(x,_),h),t.b=h+=S,t.p=f=_*8,t.f=u;continue}if(f>v){l&&Yl(0);break}}o&&c(h+131072);for(var q=(1<<y)-1,H=(1<<m)-1,L=f;;L=f){var N=p[Iw(r,f)&q],K=N>>4;if(f+=N&15,f>v){l&&Yl(0);break}if(N||Yl(2),K<256)e[h++]=K;else if(K==256){L=f,p=null;break}else{var Y=K-254;if(K>264){var U=K-257,Z=Cx[U];Y=zl(r,f,(1<<Z)-1)+ND[U],f+=Z}var V=g[Iw(r,f)&H],ee=V>>4;V||Yl(3),f+=V&15;var P=RK[ee];if(ee>3){var Z=Px[ee];P+=Iw(r,f)&(1<<Z)-1,f+=Z}if(f>v){l&&Yl(0);break}o&&c(h+131072);var B=h+Y;if(h<P){var F=i-P,X=Math.min(P,B);for(F+h<0&&Yl(3);h<X;++h)e[h]=n[F+h]}for(;h<B;++h)e[h]=e[h-P]}}t.l=p,t.p=L,t.b=h,t.f=u,p&&(u=1,t.m=y,t.d=g,t.n=m)}while(!u);return h!=e.length&&s?kD(e,0,h):e.subarray(0,h)},Eu=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},Vm=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},Mw=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var a=e.length,i=e.slice();if(!a)return{t:AD,l:0};if(a==1){var s=new Ss(e[0].s+1);return s[e[0].s]=1,{t:s,l:1}}e.sort(function(_,I){return _.f-I.f}),e.push({s:-1,f:25001});var o=e[0],l=e[1],c=0,u=1,f=2;for(e[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=e[e[c].f<e[f].f?c++:f++],l=e[c!=u&&e[c].f<e[f].f?c++:f++],e[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var p=new zo(h+1),g=l6(e[u-1],p,0);if(g>t){var n=0,y=0,m=g-t,v=1<<m;for(i.sort(function(I,A){return p[A.s]-p[I.s]||I.f-A.f});n<a;++n){var b=i[n].s;if(p[b]>t)y+=v-(1<<g-p[b]),p[b]=t;else break}for(y>>=m;y>0;){var x=i[n].s;p[x]<t?y-=1<<t-p[x]++-1:++n}for(;n>=0&&y;--n){var S=i[n].s;p[S]==t&&(--p[S],++y)}g=t}return{t:new Ss(p),l:g}},l6=function(r,t,e){return r.s==-1?Math.max(l6(r.l,t,e+1),l6(r.r,t,e+1)):t[r.s]=e},iA=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new zo(++t),n=0,a=r[0],i=1,s=function(l){e[n++]=l},o=1;o<=t;++o)if(r[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=r[o]}return{c:e.subarray(0,n),n:t}},Gm=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},ED=function(r,t,e){var n=e.length,a=wN(t+2);r[a]=n&255,r[a+1]=n>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var i=0;i<n;++i)r[a+i+4]=e[i];return(a+4+n)*8},sA=function(r,t,e,n,a,i,s,o,l,c,u){Eu(t,u++,e),++a[256];for(var f=Mw(a,15),h=f.t,p=f.l,g=Mw(i,15),y=g.t,m=g.l,v=iA(h),b=v.c,x=v.n,S=iA(y),_=S.c,I=S.n,A=new zo(19),O=0;O<b.length;++O)++A[b[O]&31];for(var O=0;O<_.length;++O)++A[_[O]&31];for(var M=Mw(A,7),z=M.t,U=M.l,D=19;D>4&&!z[i6[D-1]];--D);var T=c+5<<3,R=Gm(a,mf)+Gm(i,zg)+s,C=Gm(a,h)+Gm(i,y)+s+14+3*D+Gm(A,z)+2*A[16]+3*A[17]+7*A[18];if(l>=0&&T<=R&&T<=C)return ED(t,u,r.subarray(l,l+c));var N,E,k,P;if(Eu(t,u,1+(C<R)),u+=2,C<R){N=qc(h,p,0),E=h,k=qc(y,m,0),P=y;var q=qc(z,U,0);Eu(t,u,x-257),Eu(t,u+5,I-1),Eu(t,u+10,D-4),u+=14;for(var O=0;O<D;++O)Eu(t,u+3*O,z[i6[O]]);u+=3*D;for(var H=[b,_],L=0;L<2;++L)for(var K=H[L],O=0;O<K.length;++O){var Y=K[O]&31;Eu(t,u,q[Y]),u+=z[Y],Y>15&&(Eu(t,u,K[O]>>5&127),u+=K[O]>>12)}}else N=FK,E=mf,k=LK,P=zg;for(var O=0;O<o;++O){var Z=n[O];if(Z>255){var Y=Z>>18&31;Vm(t,u,N[Y+257]),u+=E[Y+257],Y>7&&(Eu(t,u,Z>>23&31),u+=Cx[Y]);var V=Z&31;Vm(t,u,k[V]),u+=P[V],V>3&&(Vm(t,u,Z>>5&8191),u+=Px[V])}else Vm(t,u,N[Z]),u+=E[Z]}return Vm(t,u,N[256]),u+E[256]},qK=new xN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AD=new Ss(0),zK=function(r,t,e,n,a,i){var s=i.z||r.length,o=new Ss(n+s+5*(1+Math.ceil(s/7e3))+a),l=o.subarray(n,o.length-a),c=i.l,u=(i.r||0)&7;if(t){u&&(l[0]=i.r>>3);for(var f=qK[t-1],h=f>>13,p=f&8191,g=(1<<e)-1,y=i.p||new zo(32768),m=i.h||new zo(g+1),v=Math.ceil(e/3),b=2*v,x=function(ue){return(r[ue]^r[ue+1]<<v^r[ue+2]<<b)&g},S=new xN(25e3),_=new zo(288),I=new zo(32),A=0,O=0,M=i.i||0,z=0,U=i.w||0,D=0;M+2<s;++M){var T=x(M),R=M&32767,C=m[T];if(y[R]=C,m[T]=R,U<=M){var N=s-M;if((A>7e3||z>24576)&&(N>423||!c)){u=sA(r,l,0,S,_,I,O,z,D,M-D,u),z=A=O=0,D=M;for(var E=0;E<286;++E)_[E]=0;for(var E=0;E<30;++E)I[E]=0}var k=2,P=0,q=p,H=R-C&32767;if(N>2&&T==x(M-H))for(var L=Math.min(h,N)-1,K=Math.min(32767,M),Y=Math.min(258,N);H<=K&&--q&&R!=C;){if(r[M+k]==r[M+k-H]){for(var Z=0;Z<Y&&r[M+Z]==r[M+Z-H];++Z);if(Z>k){if(k=Z,P=H,Z>L)break;for(var V=Math.min(H,Z-2),ee=0,E=0;E<V;++E){var B=M-H+E&32767,F=y[B],X=B-F&32767;X>ee&&(ee=X,C=B)}}}R=C,C=y[R],H+=R-C&32767}if(P){S[z++]=268435456|s6[k]<<18|aA[P];var te=s6[k]&31,se=aA[P]&31;O+=Cx[te]+Px[se],++_[257+te],++I[se],U=M+k,++A}else S[z++]=r[M],++_[r[M]]}}for(M=Math.max(M,U);M<s;++M)S[z++]=r[M],++_[r[M]];u=sA(r,l,c,S,_,I,O,z,D,M-D,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=m,i.p=y,i.i=M,i.w=U)}else{for(var M=i.w||0;M<s+c;M+=65535){var ce=M+65535;ce>=s&&(l[u/8|0]=c,ce=s),u=ED(l,u+1,r.subarray(M,ce))}i.i=s}return kD(o,0,n+wN(u)+a)},TD=function(){var r=1,t=0;return{p:function(e){for(var n=r,a=t,i=e.length|0,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=e[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}r=n,t=a},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},WK=function(r,t,e,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new Ss(i.length+r.length);s.set(i),s.set(r,i.length),r=s,a.w=i.length}return zK(r,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,a)},CD=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},HK=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var a=TD();a.p(t.dictionary),CD(r,2,a.d())}},VK=function(r,t){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Yl(6,"invalid zlib data"),(r[1]>>5&1)==1&&Yl(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function c6(r,t){t||(t={});var e=TD();e.p(r);var n=WK(r,t,t.dictionary?6:2,4);return HK(n,t),CD(n,n.length-4,e.d()),n}function GK(r,t){return UK(r.subarray(VK(r),-4),{i:2},t,t)}var KK=typeof TextDecoder<"u"&&new TextDecoder,XK=0;try{KK.decode(AD,{stream:!0}),XK=1}catch{}var qr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Rw(){qr.console&&typeof qr.console.log=="function"&&qr.console.log.apply(qr.console,arguments)}var Gn={log:Rw,warn:function(r){qr.console&&(typeof qr.console.warn=="function"?qr.console.warn.apply(qr.console,arguments):Rw.call(null,arguments))},error:function(r){qr.console&&(typeof qr.console.error=="function"?qr.console.error.apply(qr.console,arguments):Rw(r))}};function Fw(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){uh(n.response,t,e)},n.onerror=function(){Gn.error("could not download file")},n.send()}function oA(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function W1(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var _g,u6,uh=qr.saveAs||((typeof window>"u"?"undefined":$n(window))!=="object"||window!==qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=qr.URL||qr.webkitURL,a=document.createElement("a");t=t||r.name||"download",a.download=t,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?oA(a.href)?Fw(r,t,e):W1(a,a.target="_blank"):W1(a)):(a.href=n.createObjectURL(r),setTimeout((function(){n.revokeObjectURL(a.href)}),4e4),setTimeout((function(){W1(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(oA(r))Fw(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout((function(){W1(n)}))}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:$n(i)!=="object"&&(Gn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Fw(r,t,e);var a=r.type==="application/octet-stream",i=/constructor/i.test(qr.HTMLElement)||qr.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":$n(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(r)}else{var l=qr.URL||qr.webkitURL,c=l.createObjectURL(r);n?n.location=c:location.href=c,n=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function PD(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<e.length;n++){var a=e[n].re,i=e[n].process,s=a.exec(r);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Dw(r,t){var e=r[0],n=r[1],a=r[2],i=r[3];e=hs(e,n,a,i,t[0],7,-680876936),i=hs(i,e,n,a,t[1],12,-389564586),a=hs(a,i,e,n,t[2],17,606105819),n=hs(n,a,i,e,t[3],22,-1044525330),e=hs(e,n,a,i,t[4],7,-176418897),i=hs(i,e,n,a,t[5],12,1200080426),a=hs(a,i,e,n,t[6],17,-1473231341),n=hs(n,a,i,e,t[7],22,-45705983),e=hs(e,n,a,i,t[8],7,1770035416),i=hs(i,e,n,a,t[9],12,-1958414417),a=hs(a,i,e,n,t[10],17,-42063),n=hs(n,a,i,e,t[11],22,-1990404162),e=hs(e,n,a,i,t[12],7,1804603682),i=hs(i,e,n,a,t[13],12,-40341101),a=hs(a,i,e,n,t[14],17,-1502002290),e=ps(e,n=hs(n,a,i,e,t[15],22,1236535329),a,i,t[1],5,-165796510),i=ps(i,e,n,a,t[6],9,-1069501632),a=ps(a,i,e,n,t[11],14,643717713),n=ps(n,a,i,e,t[0],20,-373897302),e=ps(e,n,a,i,t[5],5,-701558691),i=ps(i,e,n,a,t[10],9,38016083),a=ps(a,i,e,n,t[15],14,-660478335),n=ps(n,a,i,e,t[4],20,-405537848),e=ps(e,n,a,i,t[9],5,568446438),i=ps(i,e,n,a,t[14],9,-1019803690),a=ps(a,i,e,n,t[3],14,-187363961),n=ps(n,a,i,e,t[8],20,1163531501),e=ps(e,n,a,i,t[13],5,-1444681467),i=ps(i,e,n,a,t[2],9,-51403784),a=ps(a,i,e,n,t[7],14,1735328473),e=ms(e,n=ps(n,a,i,e,t[12],20,-1926607734),a,i,t[5],4,-378558),i=ms(i,e,n,a,t[8],11,-2022574463),a=ms(a,i,e,n,t[11],16,1839030562),n=ms(n,a,i,e,t[14],23,-35309556),e=ms(e,n,a,i,t[1],4,-1530992060),i=ms(i,e,n,a,t[4],11,1272893353),a=ms(a,i,e,n,t[7],16,-155497632),n=ms(n,a,i,e,t[10],23,-1094730640),e=ms(e,n,a,i,t[13],4,681279174),i=ms(i,e,n,a,t[0],11,-358537222),a=ms(a,i,e,n,t[3],16,-722521979),n=ms(n,a,i,e,t[6],23,76029189),e=ms(e,n,a,i,t[9],4,-640364487),i=ms(i,e,n,a,t[12],11,-421815835),a=ms(a,i,e,n,t[15],16,530742520),e=gs(e,n=ms(n,a,i,e,t[2],23,-995338651),a,i,t[0],6,-198630844),i=gs(i,e,n,a,t[7],10,1126891415),a=gs(a,i,e,n,t[14],15,-1416354905),n=gs(n,a,i,e,t[5],21,-57434055),e=gs(e,n,a,i,t[12],6,1700485571),i=gs(i,e,n,a,t[3],10,-1894986606),a=gs(a,i,e,n,t[10],15,-1051523),n=gs(n,a,i,e,t[1],21,-2054922799),e=gs(e,n,a,i,t[8],6,1873313359),i=gs(i,e,n,a,t[15],10,-30611744),a=gs(a,i,e,n,t[6],15,-1560198380),n=gs(n,a,i,e,t[13],21,1309151649),e=gs(e,n,a,i,t[4],6,-145523070),i=gs(i,e,n,a,t[11],10,-1120210379),a=gs(a,i,e,n,t[2],15,718787259),n=gs(n,a,i,e,t[9],21,-343485551),r[0]=lf(e,r[0]),r[1]=lf(n,r[1]),r[2]=lf(a,r[2]),r[3]=lf(i,r[3])}function Ox(r,t,e,n,a,i){return t=lf(lf(t,r),lf(n,i)),lf(t<<a|t>>>32-a,e)}function hs(r,t,e,n,a,i,s){return Ox(t&e|~t&n,r,t,a,i,s)}function ps(r,t,e,n,a,i,s){return Ox(t&n|e&~n,r,t,a,i,s)}function ms(r,t,e,n,a,i,s){return Ox(t^e^n,r,t,a,i,s)}function gs(r,t,e,n,a,i,s){return Ox(e^(t|~n),r,t,a,i,s)}function OD(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Dw(n,YK(r.substring(t-64,t)));r=r.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Dw(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*e,Dw(n,a),n}function YK(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}_g=qr.atob.bind(qr),u6=qr.btoa.bind(qr);var lA="0123456789abcdef".split("");function JK(r){for(var t="",e=0;e<4;e++)t+=lA[r>>8*e+4&15]+lA[r>>8*e&15];return t}function ZK(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function d6(r){return OD(r).map(ZK).join("")}var QK=(function(r){for(var t=0;t<r.length;t++)r[t]=JK(r[t]);return r.join("")})(OD("hello"))!="5d41402abc4b2a76b9719d911017c592";function lf(r,t){if(QK){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function f6(r,t){var e,n,a,i;if(r!==e){for(var s=(a=r,i=1+(256/r.length>>0),new Array(i+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}e=r,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(l=0;l<f;l++)p=(p+(u=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=u,s=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(l)^s);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var cA={print:4,modify:8,copy:16,"annot-forms":32};function H0(r,t,e,n){this.v=1,this.r=2;var a=192;r.forEach((function(o){if(cA.perm!==void 0)throw new Error("Invalid permission: "+o);a+=cA[o]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),s=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=d6(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=f6(this.encryptionKey,this.padding)}function V0(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var a=r.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=r[n]}return t}function uA(r){if($n(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,a){if(a=a||!1,typeof e!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!a],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[e]){var s=t[e][i];try{s[0].apply(r,n)}catch(o){qr.console&&Gn.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Vv(r){if(!(this instanceof Vv))return new Vv(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function ID(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function yh(r,t,e,n,a){if(!(this instanceof yh))return new yh(r,t,e,n,a);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,ID.call(this,n,a)}function Y0(r,t,e,n,a){if(!(this instanceof Y0))return new Y0(r,t,e,n,a);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,ID.call(this,n,a)}function Fr(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,l=16,c="S",u=null;$n(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,a=r.format||a,i=r.compress||r.compressPdf||i,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),s=r.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",e=(""+(e||"P")).toLowerCase();var f=r.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=uA;var g="1.3",y=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(re){g=re};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return m};var v=p.__private__.getPageFormat=function(re){return m[re]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},x=b.COMPAT;function S(){this.saveGraphicsState(),le(new ht(ot,0,0,-ot,0,mc()*ot).toString()+" cm"),this.setFontSize(this.getFontSize()/ot),c="n",x=b.ADVANCED}function _(){this.restoreGraphicsState(),c="S",x=b.COMPAT}var I=p.__private__.combineFontStyleAndFontWeight=function(re,ve){if(re=="bold"&&ve=="normal"||re=="bold"&&ve==400||re=="normal"&&ve=="italic"||re=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&(re=ve==400||ve==="normal"?re==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||re!=="normal"?(ve==700?"bold":ve)+""+re:"bold"),re};p.advancedAPI=function(re){var ve=x===b.COMPAT;return ve&&S.call(this),typeof re!="function"||(re(this),ve&&_.call(this)),this},p.compatAPI=function(re){var ve=x===b.ADVANCED;return ve&&_.call(this),typeof re!="function"||(re(this),ve&&S.call(this)),this},p.isAdvancedAPI=function(){return x===b.ADVANCED};var A,O=function(re){if(x!==b.ADVANCED)throw new Error(re+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=p.roundToPrecision=p.__private__.roundToPrecision=function(re,ve){var $e=t||ve;if(isNaN(re)||isNaN($e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return re.toFixed($e).replace(/0+$/,"")};A=p.hpf=p.__private__.hpf=typeof l=="number"?function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return M(re,l)}:l==="smart"?function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return M(re,re>-1&&re<1?16:5)}:function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return M(re,16)};var z=p.f2=p.__private__.f2=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.f2");return M(re,2)},U=p.__private__.f3=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.f3");return M(re,3)},D=p.scale=p.__private__.scale=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.scale");return x===b.COMPAT?re*ot:x===b.ADVANCED?re:void 0},T=function(re){return x===b.COMPAT?mc()-re:x===b.ADVANCED?re:void 0},R=function(re){return D(T(re))};p.__private__.setPrecision=p.setPrecision=function(re){typeof parseInt(re,10)=="number"&&(t=parseInt(re,10))};var C,N="00000000000000000000000000000000",E=p.__private__.getFileId=function(){return N},k=p.__private__.setFileId=function(re){return N=re!==void 0&&/^[a-fA-F0-9]{32}$/.test(re)?re.toUpperCase():N.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),u!==null&&(Mn=new H0(u.userPermissions,u.userPassword,u.ownerPassword,N)),N};p.setFileId=function(re){return k(re),this},p.getFileId=function(){return E()};var P=p.__private__.convertDateToPDFDate=function(re){var ve=re.getTimezoneOffset(),$e=ve<0?"+":"-",Xe=Math.floor(Math.abs(ve/60)),mt=Math.abs(ve%60),At=[$e,Y(Xe),"'",Y(mt),"'"].join("");return["D:",re.getFullYear(),Y(re.getMonth()+1),Y(re.getDate()),Y(re.getHours()),Y(re.getMinutes()),Y(re.getSeconds()),At].join("")},q=p.__private__.convertPDFDateToDate=function(re){var ve=parseInt(re.substr(2,4),10),$e=parseInt(re.substr(6,2),10)-1,Xe=parseInt(re.substr(8,2),10),mt=parseInt(re.substr(10,2),10),At=parseInt(re.substr(12,2),10),Ht=parseInt(re.substr(14,2),10);return new Date(ve,$e,Xe,mt,At,Ht,0)},H=p.__private__.setCreationDate=function(re){var ve;if(re===void 0&&(re=new Date),re instanceof Date)ve=P(re);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(re))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=re}return C=ve},L=p.__private__.getCreationDate=function(re){var ve=C;return re==="jsDate"&&(ve=q(C)),ve};p.setCreationDate=function(re){return H(re),this},p.getCreationDate=function(re){return L(re)};var K,Y=p.__private__.padd2=function(re){return("0"+parseInt(re)).slice(-2)},Z=p.__private__.padd2Hex=function(re){return("00"+(re=re.toString())).substr(re.length)},V=0,ee=[],B=[],F=0,X=[],te=[],se=!1,ce=B,ue=function(){V=0,F=0,B=[],ee=[],X=[],me=pt(),Se=pt()};p.__private__.setCustomOutputDestination=function(re){se=!0,ce=re};var oe=function(re){se||(ce=re)};p.__private__.resetCustomOutputDestination=function(){se=!1,ce=B};var le=p.__private__.out=function(re){return re=re.toString(),F+=re.length+1,ce.push(re),ce},pe=p.__private__.write=function(re){return le(arguments.length===1?re.toString():Array.prototype.join.call(arguments," "))},ye=p.__private__.getArrayBuffer=function(re){for(var ve=re.length,$e=new ArrayBuffer(ve),Xe=new Uint8Array($e);ve--;)Xe[ve]=re.charCodeAt(ve);return $e},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return be};var Ie=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(re){return Ie=x===b.ADVANCED?re/ot:re,this};var Oe,Me=p.__private__.getFontSize=p.getFontSize=function(){return x===b.COMPAT?Ie:Ie*ot},Re=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(re){return Re=re,this},p.__private__.getR2L=p.getR2L=function(){return Re};var He,qe=p.__private__.setZoomMode=function(re){var ve=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(re))Oe=re;else if(isNaN(re)){if(ve.indexOf(re)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+re+'" is not recognized.');Oe=re}else Oe=parseInt(re,10)};p.__private__.getZoomMode=function(){return Oe};var ct,ft=p.__private__.setPageMode=function(re){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(re)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+re+'" is not recognized.');He=re};p.__private__.getPageMode=function(){return He};var St=p.__private__.setLayoutMode=function(re){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(re)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+re+'" is not recognized.');ct=re};p.__private__.getLayoutMode=function(){return ct},p.__private__.setDisplayMode=p.setDisplayMode=function(re,ve,$e){return qe(re),St(ve),ft($e),this};var Rt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(re){if(Object.keys(Rt).indexOf(re)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rt[re]},p.__private__.getDocumentProperties=function(){return Rt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(re){for(var ve in Rt)Rt.hasOwnProperty(ve)&&re[ve]&&(Rt[ve]=re[ve]);return this},p.__private__.setDocumentProperty=function(re,ve){if(Object.keys(Rt).indexOf(re)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rt[re]=ve};var Ft,ot,Kt,Pt,Ee,We={},ut={},wt=[],Bt={},dr={},Xt={},pr={},vr=null,rr=0,Zt=[],lr=new uA(p),fr=r.hotfixes||[],xr={},Ue={},et=[],ht=function re(ve,$e,Xe,mt,At,Ht){if(!(this instanceof re))return new re(ve,$e,Xe,mt,At,Ht);isNaN(ve)&&(ve=1),isNaN($e)&&($e=0),isNaN(Xe)&&(Xe=0),isNaN(mt)&&(mt=1),isNaN(At)&&(At=0),isNaN(Ht)&&(Ht=0),this._matrix=[ve,$e,Xe,mt,At,Ht]};Object.defineProperty(ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(re){this._matrix[0]=re}}),Object.defineProperty(ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(re){this._matrix[1]=re}}),Object.defineProperty(ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(re){this._matrix[2]=re}}),Object.defineProperty(ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(re){this._matrix[3]=re}}),Object.defineProperty(ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(re){this._matrix[4]=re}}),Object.defineProperty(ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(re){this._matrix[5]=re}}),Object.defineProperty(ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(re){this._matrix[0]=re}}),Object.defineProperty(ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(re){this._matrix[1]=re}}),Object.defineProperty(ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(re){this._matrix[2]=re}}),Object.defineProperty(ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(re){this._matrix[3]=re}}),Object.defineProperty(ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(re){this._matrix[4]=re}}),Object.defineProperty(ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(re){this._matrix[5]=re}}),Object.defineProperty(ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ht.prototype.join=function(re){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(re)},ht.prototype.multiply=function(re){var ve=re.sx*this.sx+re.shy*this.shx,$e=re.sx*this.shy+re.shy*this.sy,Xe=re.shx*this.sx+re.sy*this.shx,mt=re.shx*this.shy+re.sy*this.sy,At=re.tx*this.sx+re.ty*this.shx+this.tx,Ht=re.tx*this.shy+re.ty*this.sy+this.ty;return new ht(ve,$e,Xe,mt,At,Ht)},ht.prototype.decompose=function(){var re=this.sx,ve=this.shy,$e=this.shx,Xe=this.sy,mt=this.tx,At=this.ty,Ht=Math.sqrt(re*re+ve*ve),cr=(re/=Ht)*$e+(ve/=Ht)*Xe;$e-=re*cr,Xe-=ve*cr;var Cr=Math.sqrt($e*$e+Xe*Xe);return cr/=Cr,re*(Xe/=Cr)<ve*($e/=Cr)&&(re=-re,ve=-ve,cr=-cr,Ht=-Ht),{scale:new ht(Ht,0,0,Cr,0,0),translate:new ht(1,0,0,1,mt,At),rotate:new ht(re,ve,-ve,re,0,0),skew:new ht(1,0,cr,1,0,0)}},ht.prototype.toString=function(re){return this.join(" ")},ht.prototype.inversed=function(){var re=this.sx,ve=this.shy,$e=this.shx,Xe=this.sy,mt=this.tx,At=this.ty,Ht=1/(re*Xe-ve*$e),cr=Xe*Ht,Cr=-ve*Ht,Kr=-$e*Ht,Gr=re*Ht;return new ht(cr,Cr,Kr,Gr,-cr*mt-Kr*At,-Cr*mt-Gr*At)},ht.prototype.applyToPoint=function(re){var ve=re.x*this.sx+re.y*this.shx+this.tx,$e=re.x*this.shy+re.y*this.sy+this.ty;return new Vo(ve,$e)},ht.prototype.applyToRectangle=function(re){var ve=this.applyToPoint(re),$e=this.applyToPoint(new Vo(re.x+re.w,re.y+re.h));return new pc(ve.x,ve.y,$e.x-ve.x,$e.y-ve.y)},ht.prototype.clone=function(){var re=this.sx,ve=this.shy,$e=this.shx,Xe=this.sy,mt=this.tx,At=this.ty;return new ht(re,ve,$e,Xe,mt,At)},p.Matrix=ht;var kt=p.matrixMult=function(re,ve){return ve.multiply(re)},Wt=new ht(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Wt;var Be=function(re,ve){if(!dr[re]){var $e=(ve instanceof yh?"Sh":"P")+(Object.keys(Bt).length+1).toString(10);ve.id=$e,dr[re]=$e,Bt[$e]=ve,lr.publish("addPattern",ve)}};p.ShadingPattern=yh,p.TilingPattern=Y0,p.addShadingPattern=function(re,ve){return O("addShadingPattern()"),Be(re,ve),this},p.beginTilingPattern=function(re){O("beginTilingPattern()"),i0(re.boundingBox[0],re.boundingBox[1],re.boundingBox[2]-re.boundingBox[0],re.boundingBox[3]-re.boundingBox[1],re.matrix)},p.endTilingPattern=function(re,ve){O("endTilingPattern()"),ve.stream=te[K].join(`
`),Be(re,ve),lr.publish("endTilingPattern",ve),et.pop().restore()};var Ve=p.__private__.newObject=function(){var re=pt();return he(re,!0),re},pt=p.__private__.newObjectDeferred=function(){return V++,ee[V]=function(){return F},V},he=function(re,ve){return ve=typeof ve=="boolean"&&ve,ee[re]=F,ve&&le(re+" 0 obj"),re},xe=p.__private__.newAdditionalObject=function(){var re={objId:pt(),content:""};return X.push(re),re},me=pt(),Se=pt(),ke=p.__private__.decodeColorString=function(re){var ve=re.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length===5&&(ve[4]==="k"||ve[4]==="K")&&(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var $e=parseFloat(ve[0]);ve=[$e,$e,$e,"r"]}for(var Xe="#",mt=0;mt<3;mt++)Xe+=("0"+Math.floor(255*parseFloat(ve[mt])).toString(16)).slice(-2);return Xe},Te=p.__private__.encodeColorString=function(re){var ve;typeof re=="string"&&(re={ch1:re});var $e=re.ch1,Xe=re.ch2,mt=re.ch3,At=re.ch4,Ht=re.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof $e=="string"&&$e.charAt(0)!=="#"){var cr=new PD($e);if(cr.ok)$e=cr.toHex();else if(!/^\d*\.?\d*$/.test($e))throw new Error('Invalid color "'+$e+'" passed to jsPDF.encodeColorString.')}if(typeof $e=="string"&&/^#[0-9A-Fa-f]{3}$/.test($e)&&($e="#"+$e[1]+$e[1]+$e[2]+$e[2]+$e[3]+$e[3]),typeof $e=="string"&&/^#[0-9A-Fa-f]{6}$/.test($e)){var Cr=parseInt($e.substr(1),16);$e=Cr>>16&255,Xe=Cr>>8&255,mt=255&Cr}if(Xe===void 0||At===void 0&&$e===Xe&&Xe===mt)if(typeof $e=="string")ve=$e+" "+Ht[0];else switch(re.precision){case 2:ve=z($e/255)+" "+Ht[0];break;case 3:default:ve=U($e/255)+" "+Ht[0]}else if(At===void 0||$n(At)==="object"){if(At&&!isNaN(At.a)&&At.a===0)return ve=["1.","1.","1.",Ht[1]].join(" ");if(typeof $e=="string")ve=[$e,Xe,mt,Ht[1]].join(" ");else switch(re.precision){case 2:ve=[z($e/255),z(Xe/255),z(mt/255),Ht[1]].join(" ");break;default:case 3:ve=[U($e/255),U(Xe/255),U(mt/255),Ht[1]].join(" ")}}else if(typeof $e=="string")ve=[$e,Xe,mt,At,Ht[2]].join(" ");else switch(re.precision){case 2:ve=[z($e),z(Xe),z(mt),z(At),Ht[2]].join(" ");break;case 3:default:ve=[U($e),U(Xe),U(mt),U(At),Ht[2]].join(" ")}return ve},Ge=p.__private__.getFilters=function(){return s},nt=p.__private__.putStream=function(re){var ve=(re=re||{}).data||"",$e=re.filters||Ge(),Xe=re.alreadyAppliedFilters||[],mt=re.addLength1||!1,At=ve.length,Ht=re.objectId,cr=function(bi){return bi};if(u!==null&&Ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(cr=Mn.encryptor(Ht,0));var Cr={};$e===!0&&($e=["FlateEncode"]);var Kr=re.additionalKeyValues||[],Gr=(Cr=Fr.API.processDataByFilters!==void 0?Fr.API.processDataByFilters(ve,$e):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(Xe)?Xe.join(" "):Xe.toString());if(Cr.data.length!==0&&(Kr.push({key:"Length",value:Cr.data.length}),mt===!0&&Kr.push({key:"Length1",value:At})),Gr.length!=0)if(Gr.split("/").length-1==1)Kr.push({key:"Filter",value:Gr});else{Kr.push({key:"Filter",value:"["+Gr+"]"});for(var on=0;on<Kr.length;on+=1)if(Kr[on].key==="DecodeParms"){for(var ra=[],da=0;da<Cr.reverseChain.split("/").length-1;da+=1)ra.push("null");ra.push(Kr[on].value),Kr[on].value="["+ra.join(" ")+"]"}}le("<<");for(var Sa=0;Sa<Kr.length;Sa++)le("/"+Kr[Sa].key+" "+Kr[Sa].value);le(">>"),Cr.data.length!==0&&(le("stream"),le(cr(Cr.data)),le("endstream"))},Ke=p.__private__.putPage=function(re){var ve=re.number,$e=re.data,Xe=re.objId,mt=re.contentsObjId;he(Xe,!0),le("<</Type /Page"),le("/Parent "+re.rootDictionaryObjId+" 0 R"),le("/Resources "+re.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(A(re.mediaBox.bottomLeftX))+" "+parseFloat(A(re.mediaBox.bottomLeftY))+" "+A(re.mediaBox.topRightX)+" "+A(re.mediaBox.topRightY)+"]"),re.cropBox!==null&&le("/CropBox ["+A(re.cropBox.bottomLeftX)+" "+A(re.cropBox.bottomLeftY)+" "+A(re.cropBox.topRightX)+" "+A(re.cropBox.topRightY)+"]"),re.bleedBox!==null&&le("/BleedBox ["+A(re.bleedBox.bottomLeftX)+" "+A(re.bleedBox.bottomLeftY)+" "+A(re.bleedBox.topRightX)+" "+A(re.bleedBox.topRightY)+"]"),re.trimBox!==null&&le("/TrimBox ["+A(re.trimBox.bottomLeftX)+" "+A(re.trimBox.bottomLeftY)+" "+A(re.trimBox.topRightX)+" "+A(re.trimBox.topRightY)+"]"),re.artBox!==null&&le("/ArtBox ["+A(re.artBox.bottomLeftX)+" "+A(re.artBox.bottomLeftY)+" "+A(re.artBox.topRightX)+" "+A(re.artBox.topRightY)+"]"),typeof re.userUnit=="number"&&re.userUnit!==1&&le("/UserUnit "+re.userUnit),lr.publish("putPage",{objId:Xe,pageContext:Zt[ve],pageNumber:ve,page:$e}),le("/Contents "+mt+" 0 R"),le(">>"),le("endobj");var At=$e.join(`
`);return x===b.ADVANCED&&(At+=`
Q`),he(mt,!0),nt({data:At,filters:Ge(),objectId:mt}),le("endobj"),Xe},it=p.__private__.putPages=function(){var re,ve,$e=[];for(re=1;re<=rr;re++)Zt[re].objId=pt(),Zt[re].contentsObjId=pt();for(re=1;re<=rr;re++)$e.push(Ke({number:re,data:te[re],objId:Zt[re].objId,contentsObjId:Zt[re].contentsObjId,mediaBox:Zt[re].mediaBox,cropBox:Zt[re].cropBox,bleedBox:Zt[re].bleedBox,trimBox:Zt[re].trimBox,artBox:Zt[re].artBox,userUnit:Zt[re].userUnit,rootDictionaryObjId:me,resourceDictionaryObjId:Se}));he(me,!0),le("<</Type /Pages");var Xe="/Kids [";for(ve=0;ve<rr;ve++)Xe+=$e[ve]+" 0 R ";le(Xe+"]"),le("/Count "+rr),le(">>"),le("endobj"),lr.publish("postPutPages")},st=function(re){lr.publish("putFont",{font:re,out:le,newObject:Ve,putStream:nt}),re.isAlreadyPutted!==!0&&(re.objectNumber=Ve(),le("<<"),le("/Type /Font"),le("/BaseFont /"+V0(re.postScriptName)),le("/Subtype /Type1"),typeof re.encoding=="string"&&le("/Encoding /"+re.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Mt=function(){for(var re in We)We.hasOwnProperty(re)&&(f===!1||f===!0&&h.hasOwnProperty(re))&&st(We[re])},$t=function(re){re.objectNumber=Ve();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[A(re.x),A(re.y),A(re.x+re.width),A(re.y+re.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+re.matrix.toString()+"]"});var $e=re.pages[1].join(`
`);nt({data:$e,additionalKeyValues:ve,objectId:re.objectNumber}),le("endobj")},er=function(){for(var re in xr)xr.hasOwnProperty(re)&&$t(xr[re])},je=function(re,ve){var $e,Xe=[],mt=1/(ve-1);for($e=0;$e<1;$e+=mt)Xe.push($e);if(Xe.push(1),re[0].offset!=0){var At={offset:0,color:re[0].color};re.unshift(At)}if(re[re.length-1].offset!=1){var Ht={offset:1,color:re[re.length-1].color};re.push(Ht)}for(var cr="",Cr=0,Kr=0;Kr<Xe.length;Kr++){for($e=Xe[Kr];$e>re[Cr+1].offset;)Cr++;var Gr=re[Cr].offset,on=($e-Gr)/(re[Cr+1].offset-Gr),ra=re[Cr].color,da=re[Cr+1].color;cr+=Z(Math.round((1-on)*ra[0]+on*da[0]).toString(16))+Z(Math.round((1-on)*ra[1]+on*da[1]).toString(16))+Z(Math.round((1-on)*ra[2]+on*da[2]).toString(16))}return cr.trim()},Le=function(re,ve){ve||(ve=21);var $e=Ve(),Xe=je(re.colors,ve),mt=[];mt.push({key:"FunctionType",value:"0"}),mt.push({key:"Domain",value:"[0.0 1.0]"}),mt.push({key:"Size",value:"["+ve+"]"}),mt.push({key:"BitsPerSample",value:"8"}),mt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:Xe,additionalKeyValues:mt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:$e}),le("endobj"),re.objectNumber=Ve(),le("<< /ShadingType "+re.type),le("/ColorSpace /DeviceRGB");var At="/Coords ["+A(parseFloat(re.coords[0]))+" "+A(parseFloat(re.coords[1]))+" ";re.type===2?At+=A(parseFloat(re.coords[2]))+" "+A(parseFloat(re.coords[3])):At+=A(parseFloat(re.coords[2]))+" "+A(parseFloat(re.coords[3]))+" "+A(parseFloat(re.coords[4]))+" "+A(parseFloat(re.coords[5])),le(At+="]"),re.matrix&&le("/Matrix ["+re.matrix.toString()+"]"),le("/Function "+$e+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},vt=function(re,ve){var $e=pt(),Xe=Ve();ve.push({resourcesOid:$e,objectOid:Xe}),re.objectNumber=Xe;var mt=[];mt.push({key:"Type",value:"/Pattern"}),mt.push({key:"PatternType",value:"1"}),mt.push({key:"PaintType",value:"1"}),mt.push({key:"TilingType",value:"1"}),mt.push({key:"BBox",value:"["+re.boundingBox.map(A).join(" ")+"]"}),mt.push({key:"XStep",value:A(re.xStep)}),mt.push({key:"YStep",value:A(re.yStep)}),mt.push({key:"Resources",value:$e+" 0 R"}),re.matrix&&mt.push({key:"Matrix",value:"["+re.matrix.toString()+"]"}),nt({data:re.stream,additionalKeyValues:mt,objectId:re.objectNumber}),le("endobj")},Et=function(re){var ve;for(ve in Bt)Bt.hasOwnProperty(ve)&&(Bt[ve]instanceof yh?Le(Bt[ve]):Bt[ve]instanceof Y0&&vt(Bt[ve],re))},Qt=function(re){for(var ve in re.objectNumber=Ve(),le("<<"),re)switch(ve){case"opacity":le("/ca "+z(re[ve]));break;case"stroke-opacity":le("/CA "+z(re[ve]))}le(">>"),le("endobj")},Ut=function(){var re;for(re in Xt)Xt.hasOwnProperty(re)&&Qt(Xt[re])},Yt=function(){for(var re in le("/XObject <<"),xr)xr.hasOwnProperty(re)&&xr[re].objectNumber>=0&&le("/"+re+" "+xr[re].objectNumber+" 0 R");lr.publish("putXobjectDict"),le(">>")},Ur=function(){Mn.oid=Ve(),le("<<"),le("/Filter /Standard"),le("/V "+Mn.v),le("/R "+Mn.r),le("/U <"+Mn.toHexString(Mn.U)+">"),le("/O <"+Mn.toHexString(Mn.O)+">"),le("/P "+Mn.P),le(">>"),le("endobj")},Tr=function(){for(var re in le("/Font <<"),We)We.hasOwnProperty(re)&&(f===!1||f===!0&&h.hasOwnProperty(re))&&le("/"+re+" "+We[re].objectNumber+" 0 R");le(">>")},Sr=function(){if(Object.keys(Bt).length>0){for(var re in le("/Shading <<"),Bt)Bt.hasOwnProperty(re)&&Bt[re]instanceof yh&&Bt[re].objectNumber>=0&&le("/"+re+" "+Bt[re].objectNumber+" 0 R");lr.publish("putShadingPatternDict"),le(">>")}},mr=function(re){if(Object.keys(Bt).length>0){for(var ve in le("/Pattern <<"),Bt)Bt.hasOwnProperty(ve)&&Bt[ve]instanceof p.TilingPattern&&Bt[ve].objectNumber>=0&&Bt[ve].objectNumber<re&&le("/"+ve+" "+Bt[ve].objectNumber+" 0 R");lr.publish("putTilingPatternDict"),le(">>")}},Pr=function(){if(Object.keys(Xt).length>0){var re;for(re in le("/ExtGState <<"),Xt)Xt.hasOwnProperty(re)&&Xt[re].objectNumber>=0&&le("/"+re+" "+Xt[re].objectNumber+" 0 R");lr.publish("putGStateDict"),le(">>")}},Ir=function(re){he(re.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Tr(),Sr(),mr(re.objectOid),Pr(),Yt(),le(">>"),le("endobj")},cn=function(){var re=[];Mt(),Ut(),er(),Et(re),lr.publish("putResources"),re.forEach(Ir),Ir({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),lr.publish("postPutResources")},An=function(){lr.publish("putAdditionalObjects");for(var re=0;re<X.length;re++){var ve=X[re];he(ve.objId,!0),le(ve.content),le("endobj")}lr.publish("postPutAdditionalObjects")},Un=function(re){ut[re.fontName]=ut[re.fontName]||{},ut[re.fontName][re.fontStyle]=re.id},Yn=function(re,ve,$e,Xe,mt){var At={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:re,fontName:ve,fontStyle:$e,encoding:Xe,isStandardFont:mt||!1,metadata:{}};return lr.publish("addFont",{font:At,instance:this}),We[At.id]=At,Un(At),At.id},Ia=function(re){for(var ve=0,$e=be.length;ve<$e;ve++){var Xe=Yn.call(this,re[ve][0],re[ve][1],re[ve][2],be[ve][3],!0);f===!1&&(h[Xe]=!0);var mt=re[ve][0].split("-");Un({id:Xe,fontName:mt[0],fontStyle:mt[1]||""})}lr.publish("addFonts",{fonts:We,dictionary:ut})},ua=function(re){return re.foo=function(){try{return re.apply(this,arguments)}catch(Xe){var ve=Xe.stack||"";~ve.indexOf(" at ")&&(ve=ve.split(" at ")[1]);var $e="Error in function "+ve.split(`
`)[0].split("<")[0]+": "+Xe.message;if(!qr.console)throw new Error($e);qr.console.error($e,Xe),qr.alert&&alert($e)}},re.foo.bar=re,re.foo},As=function(re,ve){var $e,Xe,mt,At,Ht,cr,Cr,Kr,Gr;if(mt=(ve=ve||{}).sourceEncoding||"Unicode",Ht=ve.outputEncoding,(ve.autoencode||Ht)&&We[Ft].metadata&&We[Ft].metadata[mt]&&We[Ft].metadata[mt].encoding&&(At=We[Ft].metadata[mt].encoding,!Ht&&We[Ft].encoding&&(Ht=We[Ft].encoding),!Ht&&At.codePages&&(Ht=At.codePages[0]),typeof Ht=="string"&&(Ht=At[Ht]),Ht)){for(Cr=!1,cr=[],$e=0,Xe=re.length;$e<Xe;$e++)(Kr=Ht[re.charCodeAt($e)])?cr.push(String.fromCharCode(Kr)):cr.push(re[$e]),cr[$e].charCodeAt(0)>>8&&(Cr=!0);re=cr.join("")}for($e=re.length;Cr===void 0&&$e!==0;)re.charCodeAt($e-1)>>8&&(Cr=!0),$e--;if(!Cr)return re;for(cr=ve.noBOM?[]:[254,255],$e=0,Xe=re.length;$e<Xe;$e++){if((Gr=(Kr=re.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");cr.push(Gr),cr.push(Kr-(Gr<<8))}return String.fromCharCode.apply(void 0,cr)},ba=p.__private__.pdfEscape=p.pdfEscape=function(re,ve){return As(re,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rs=p.__private__.beginPage=function(re){te[++rr]=[],Zt[rr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(re[0]),topRightY:Number(re[1])}},ti(rr),oe(te[K])},an=function(re,ve){var $e,Xe,mt;switch(e=ve||e,typeof re=="string"&&($e=v(re.toLowerCase()),Array.isArray($e)&&(Xe=$e[0],mt=$e[1])),Array.isArray(re)&&(Xe=re[0]*ot,mt=re[1]*ot),isNaN(Xe)&&(Xe=a[0],mt=a[1]),(Xe>14400||mt>14400)&&(Gn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Xe=Math.min(14400,Xe),mt=Math.min(14400,mt)),a=[Xe,mt],e.substr(0,1)){case"l":mt>Xe&&(a=[mt,Xe]);break;case"p":Xe>mt&&(a=[mt,Xe])}rs(a),ru(Cf),le(ns),Of!==0&&le(Of+" J"),au!==0&&le(au+" j"),lr.publish("addPage",{pageNumber:rr})},Jr=function(re){re>0&&re<=rr&&(te.splice(re,1),Zt.splice(re,1),rr--,K>rr&&(K=rr),this.setPage(K))},ti=function(re){re>0&&re<=rr&&(K=re)},wo=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return te.length-1},_o=function(re,ve,$e){var Xe,mt=void 0;return $e=$e||{},re=re!==void 0?re:We[Ft].fontName,ve=ve!==void 0?ve:We[Ft].fontStyle,Xe=re.toLowerCase(),ut[Xe]!==void 0&&ut[Xe][ve]!==void 0?mt=ut[Xe][ve]:ut[re]!==void 0&&ut[re][ve]!==void 0?mt=ut[re][ve]:$e.disableWarning===!1&&Gn.warn("Unable to look up font label for font '"+re+"', '"+ve+"'. Refer to getFontList() for available fonts."),mt||$e.noFallback||(mt=ut.times[ve])==null&&(mt=ut.times.normal),mt},Hr=p.__private__.putInfo=function(){var re=Ve(),ve=function(Xe){return Xe};for(var $e in u!==null&&(ve=Mn.encryptor(re,0)),le("<<"),le("/Producer ("+ba(ve("jsPDF "+Fr.version))+")"),Rt)Rt.hasOwnProperty($e)&&Rt[$e]&&le("/"+$e.substr(0,1).toUpperCase()+$e.substr(1)+" ("+ba(ve(Rt[$e]))+")");le("/CreationDate ("+ba(ve(C))+")"),le(">>"),le("endobj")},gi=p.__private__.putCatalog=function(re){var ve=(re=re||{}).rootDictionaryObjId||me;switch(Ve(),le("<<"),le("/Type /Catalog"),le("/Pages "+ve+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var $e=""+Oe;$e.substr($e.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&le("/OpenAction [3 0 R /XYZ null null "+z(Oe)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}He&&le("/PageMode /"+He),lr.publish("putCatalog"),le(">>"),le("endobj")},Ts=p.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(V+1)),le("/Root "+V+" 0 R"),le("/Info "+(V-1)+" 0 R"),u!==null&&le("/Encrypt "+Mn.oid+" 0 R"),le("/ID [ <"+N+"> <"+N+"> ]"),le(">>")},So=p.__private__.putHeader=function(){le("%PDF-"+g),le("%")},wl=p.__private__.putXRef=function(){var re="0000000000";le("xref"),le("0 "+(V+1)),le("0000000000 65535 f ");for(var ve=1;ve<=V;ve++)typeof ee[ve]=="function"?le((re+ee[ve]()).slice(-10)+" 00000 n "):ee[ve]!==void 0?le((re+ee[ve]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},ri=p.__private__.buildDocument=function(){ue(),oe(B),lr.publish("buildDocument"),So(),it(),An(),cn(),u!==null&&Ur(),Hr(),gi();var re=F;return wl(),Ts(),le("startxref"),le(""+re),le("%%EOF"),oe(te[K]),B.join(`
`)},yi=p.__private__.getBlob=function(re){return new Blob([ye(re)],{type:"application/pdf"})},No=p.output=p.__private__.output=ua((function(re,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",re){case void 0:return ri();case"save":p.save(ve.filename);break;case"arraybuffer":return ye(ri());case"blob":return yi(ri());case"bloburi":case"bloburl":if(qr.URL!==void 0&&typeof qr.URL.createObjectURL=="function")return qr.URL&&qr.URL.createObjectURL(yi(ri()))||void 0;Gn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var $e="",Xe=ri();try{$e=u6(Xe)}catch{$e=u6(unescape(encodeURIComponent(Xe)))}return"data:application/pdf;filename="+ve.filename+";base64,"+$e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qr)==="[object Window]"){var mt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",At=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(mt=ve.pdfObjectUrl,At="");var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+mt+'"'+At+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",cr=qr.open();return cr!==null&&cr.document.write(Ht),cr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qr)==="[object Window]"){var Cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',Kr=qr.open();if(Kr!==null){Kr.document.write(Cr);var Gr=this;Kr.document.documentElement.querySelector("#pdfViewer").onload=function(){Kr.document.title=ve.filename,Kr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Gr.output("bloburl"))}}return Kr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var on='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',ra=qr.open();if(ra!==null&&(ra.document.write(on),ra.document.title=ve.filename),ra||typeof safari>"u")return ra;break;case"datauri":case"dataurl":return qr.document.location.href=this.output("datauristring",ve);default:return null}})),Ks=function(re){return Array.isArray(fr)===!0&&fr.indexOf(re)>-1};switch(n){case"pt":ot=1;break;case"mm":ot=72/25.4;break;case"cm":ot=72/2.54;break;case"in":ot=72;break;case"px":ot=Ks("px_scaling")==1?.75:96/72;break;case"pc":case"em":ot=12;break;case"ex":ot=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ot=n}var Mn=null;H(),k();var Ii=function(re){return u!==null?Mn.encryptor(re,0):function(ve){return ve}},vi=p.__private__.getPageInfo=p.getPageInfo=function(re){if(isNaN(re)||re%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[re].objId,pageNumber:re,pageContext:Zt[re]}},Mr=p.__private__.getPageInfoByObjId=function(re){if(isNaN(re)||re%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in Zt)if(Zt[ve].objId===re)break;return vi(ve)},Xs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Zt[K].objId,pageNumber:K,pageContext:Zt[K]}};p.addPage=function(){return an.apply(this,arguments),this},p.setPage=function(){return ti.apply(this,arguments),oe.call(this,te[K]),this},p.insertPage=function(re){return this.addPage(),this.movePage(K,re),this},p.movePage=function(re,ve){var $e,Xe;if(re>ve){$e=te[re],Xe=Zt[re];for(var mt=re;mt>ve;mt--)te[mt]=te[mt-1],Zt[mt]=Zt[mt-1];te[ve]=$e,Zt[ve]=Xe,this.setPage(ve)}else if(re<ve){$e=te[re],Xe=Zt[re];for(var At=re;At<ve;At++)te[At]=te[At+1],Zt[At]=Zt[At+1];te[ve]=$e,Zt[ve]=Xe,this.setPage(ve)}return this},p.deletePage=function(){return Jr.apply(this,arguments),this},p.__private__.text=p.text=function(re,ve,$e,Xe,mt){var At,Ht,cr,Cr,Kr,Gr,on,ra,da,Sa=(Xe=Xe||{}).scope||this;if(typeof re=="number"&&typeof ve=="number"&&(typeof $e=="string"||Array.isArray($e))){var bi=$e;$e=ve,ve=re,re=bi}if(arguments[3]instanceof ht?(O("The transform parameter of text() with a Matrix value"),da=mt):(cr=arguments[4],Cr=arguments[5],$n(on=arguments[3])==="object"&&on!==null||(typeof cr=="string"&&(Cr=cr,cr=null),typeof on=="string"&&(Cr=on,on=null),typeof on=="number"&&(cr=on,on=null),Xe={flags:on,angle:cr,align:Cr})),isNaN(ve)||isNaN($e)||re==null)throw new Error("Invalid arguments passed to jsPDF.text");if(re.length===0)return Sa;var za="",Ao=!1,Ps=typeof Xe.lineHeightFactor=="number"?Xe.lineHeightFactor:tu,Zs=Sa.internal.scaleFactor;function gc(Rn){return Rn=Rn.split("	").join(Array(Xe.TabLen||9).join(" ")),ba(Rn,on)}function Rf(Rn){for(var Sn,ha=Rn.concat(),Na=[],Xo=ha.length;Xo--;)typeof(Sn=ha.shift())=="string"?Na.push(Sn):Array.isArray(Rn)&&(Sn.length===1||Sn[1]===void 0&&Sn[2]===void 0)?Na.push(Sn[0]):Na.push([Sn[0],Sn[1],Sn[2]]);return Na}function yd(Rn,Sn){var ha;if(typeof Rn=="string")ha=Sn(Rn)[0];else if(Array.isArray(Rn)){for(var Na,Xo,Ed=Rn.concat(),fu=[],Lf=Ed.length;Lf--;)typeof(Na=Ed.shift())=="string"?fu.push(Sn(Na)[0]):Array.isArray(Na)&&typeof Na[0]=="string"&&(Xo=Sn(Na[0],Na[1],Na[2]),fu.push([Xo[0],Xo[1],Xo[2]]));ha=fu}return ha}var iu=!1,vd=!0;if(typeof re=="string")iu=!0;else if(Array.isArray(re)){var bd=re.concat();Ht=[];for(var su,fa=bd.length;fa--;)(typeof(su=bd.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(vd=!1);iu=vd}if(iu===!1)throw new Error('Type of text must be string or Array. "'+re+'" is not recognized.');typeof re=="string"&&(re=re.match(/[\r?\n]/)?re.split(/\r\n|\r|\n/g):[re]);var xd=Ie/Sa.internal.scaleFactor,wd=xd*(Ps-1);switch(Xe.baseline){case"bottom":$e-=wd;break;case"top":$e+=xd-wd;break;case"hanging":$e+=xd-2*wd;break;case"middle":$e+=xd/2-wd}if((Gr=Xe.maxWidth||0)>0&&(typeof re=="string"?re=Sa.splitTextToSize(re,Gr):Object.prototype.toString.call(re)==="[object Array]"&&(re=re.reduce((function(Rn,Sn){return Rn.concat(Sa.splitTextToSize(Sn,Gr))}),[]))),At={text:re,x:ve,y:$e,options:Xe,mutex:{pdfEscape:ba,activeFontKey:Ft,fonts:We,activeFontSize:Ie}},lr.publish("preProcessText",At),re=At.text,cr=(Xe=At.options).angle,!(da instanceof ht)&&cr&&typeof cr=="number"){cr*=Math.PI/180,Xe.rotationDirection===0&&(cr=-cr),x===b.ADVANCED&&(cr=-cr);var _d=Math.cos(cr),Sd=Math.sin(cr);da=new ht(_d,Sd,-Sd,_d,0,0)}else cr&&cr instanceof ht&&(da=cr);x!==b.ADVANCED||da||(da=Wt),(Kr=Xe.charSpace||hc)!==void 0&&(za+=A(D(Kr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ra=Xe.horizontalScale)!==void 0&&(za+=A(100*ra)+` Tz
`),Xe.lang;var Ri=-1,ou=Xe.renderingMode!==void 0?Xe.renderingMode:Xe.stroke,Nl=Sa.internal.getCurrentPageInfo().pageContext;switch(ou){case 0:case!1:case"fill":Ri=0;break;case 1:case!0:case"stroke":Ri=1;break;case 2:case"fillThenStroke":Ri=2;break;case 3:case"invisible":Ri=3;break;case 4:case"fillAndAddForClipping":Ri=4;break;case 5:case"strokeAndAddPathForClipping":Ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ri=6;break;case 7:case"addToPathForClipping":Ri=7}var s0=Nl.usedRenderingMode!==void 0?Nl.usedRenderingMode:-1;Ri!==-1?za+=Ri+` Tr
`:s0!==-1&&(za+=`0 Tr
`),Ri!==-1&&(Nl.usedRenderingMode=Ri),Cr=Xe.align||"left";var Fi,Nd=Ie*Ps,Ff=Sa.internal.pageSize.getWidth(),jd=We[Ft];Kr=Xe.charSpace||hc,Gr=Xe.maxWidth||0,on=Object.assign({autoencode:!0,noBOM:!0},Xe.flags);var Go=[],yc=function(Rn){return Sa.getStringUnitWidth(Rn,{font:jd,charSpace:Kr,fontSize:Ie,doKerning:!1})*Ie/Zs};if(Object.prototype.toString.call(re)==="[object Array]"){var Di;Ht=Rf(re),Cr!=="left"&&(Fi=Ht.map(yc));var xi,vc=0;if(Cr==="right"){ve-=Fi[0],re=[],fa=Ht.length;for(var jl=0;jl<fa;jl++)jl===0?(xi=Ys(ve),Di=Js($e)):(xi=D(vc-Fi[jl]),Di=-Nd),re.push([Ht[jl],xi,Di]),vc=Fi[jl]}else if(Cr==="center"){ve-=Fi[0]/2,re=[],fa=Ht.length;for(var kl=0;kl<fa;kl++)kl===0?(xi=Ys(ve),Di=Js($e)):(xi=D((vc-Fi[kl])/2),Di=-Nd),re.push([Ht[kl],xi,Di]),vc=Fi[kl]}else if(Cr==="left"){re=[],fa=Ht.length;for(var kd=0;kd<fa;kd++)re.push(Ht[kd])}else if(Cr==="justify"&&jd.encoding==="Identity-H"){re=[],fa=Ht.length,Gr=Gr!==0?Gr:Ff;for(var El=0,gn=0;gn<fa;gn++)if(Di=gn===0?Js($e):-Nd,xi=gn===0?Ys(ve):El,gn<fa-1){var Al=D((Gr-Fi[gn])/(Ht[gn].split(" ").length-1)),wi=Ht[gn].split(" ");re.push([wi[0]+" ",xi,Di]),El=0;for(var Os=1;Os<wi.length;Os++){var lu=(yc(wi[Os-1]+" "+wi[Os])-yc(wi[Os]))*Zs+Al;Os==wi.length-1?re.push([wi[Os],lu,0]):re.push([wi[Os]+" ",lu,0]),El-=lu}}else re.push([Ht[gn],xi,Di]);re.push(["",El,0])}else{if(Cr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(re=[],fa=Ht.length,Gr=Gr!==0?Gr:Ff,gn=0;gn<fa;gn++)Di=gn===0?Js($e):-Nd,xi=gn===0?Ys(ve):0,gn<fa-1?Go.push(A(D((Gr-Fi[gn])/(Ht[gn].split(" ").length-1)))):Go.push(0),re.push([Ht[gn],xi,Di])}}var Df=typeof Xe.R2L=="boolean"?Xe.R2L:Re;Df===!0&&(re=yd(re,(function(Rn,Sn,ha){return[Rn.split("").reverse().join(""),Sn,ha]}))),At={text:re,x:ve,y:$e,options:Xe,mutex:{pdfEscape:ba,activeFontKey:Ft,fonts:We,activeFontSize:Ie}},lr.publish("postProcessText",At),re=At.text,Ao=At.mutex.isHex||!1;var cu=We[Ft].encoding;cu!=="WinAnsiEncoding"&&cu!=="StandardEncoding"||(re=yd(re,(function(Rn,Sn,ha){return[gc(Rn),Sn,ha]}))),Ht=Rf(re),re=[];for(var uu,du,Is,Tl=0,Ko=1,Cl=Array.isArray(Ht[0])?Ko:Tl,Pl="",bc=function(Rn,Sn,ha){var Na="";return ha instanceof ht?(ha=typeof Xe.angle=="number"?kt(ha,new ht(1,0,0,1,Rn,Sn)):kt(new ht(1,0,0,1,Rn,Sn),ha),x===b.ADVANCED&&(ha=kt(new ht(1,0,0,-1,0,0),ha)),Na=ha.join(" ")+` Tm
`):Na=A(Rn)+" "+A(Sn)+` Td
`,Na},ni=0;ni<Ht.length;ni++){switch(Pl="",Cl){case Ko:Is=(Ao?"<":"(")+Ht[ni][0]+(Ao?">":")"),uu=parseFloat(Ht[ni][1]),du=parseFloat(Ht[ni][2]);break;case Tl:Is=(Ao?"<":"(")+Ht[ni]+(Ao?">":")"),uu=Ys(ve),du=Js($e)}Go!==void 0&&Go[ni]!==void 0&&(Pl=Go[ni]+` Tw
`),ni===0?re.push(Pl+bc(uu,du,da)+Is):Cl===Tl?re.push(Pl+Is):Cl===Ko&&re.push(Pl+bc(uu,du,da)+Is)}re=Cl===Tl?re.join(` Tj
T* `):re.join(` Tj
`),re+=` Tj
`;var as=`BT
/`;return as+=Ft+" "+Ie+` Tf
`,as+=A(Ie*Ps)+` TL
`,as+=Ma+`
`,as+=za,as+=re,le(as+="ET"),h[Ft]=!0,Sa};var Mi=p.__private__.clip=p.clip=function(re){return le(re==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Mi("evenodd")},p.__private__.discardPath=p.discardPath=function(){return le("n"),this};var Ho=p.__private__.isValidStyle=function(re){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(re)!==-1&&(ve=!0),ve};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(re){return Ho(re)&&(c=re),this};var Tf=p.__private__.getStyle=p.getStyle=function(re){var ve=c;switch(re){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=re}return ve},uc=p.close=function(){return le("h"),this};p.stroke=function(){return le("S"),this},p.fill=function(re){return ld("f",re),this},p.fillEvenOdd=function(re){return ld("f*",re),this},p.fillStroke=function(re){return ld("B",re),this},p.fillStrokeEvenOdd=function(re){return ld("B*",re),this};var ld=function(re,ve){$n(ve)==="object"?n0(ve,re):le(re)},cd=function(re){re===null||x===b.ADVANCED&&re===void 0||(re=Tf(re),le(re))};function ud(re,ve,$e,Xe,mt){var At=new Y0(ve||this.boundingBox,$e||this.xStep,Xe||this.yStep,this.gState,mt||this.matrix);At.stream=this.stream;var Ht=re+"$$"+this.cloneIndex+++"$$";return Be(Ht,At),At}var n0=function(re,ve){var $e=dr[re.key],Xe=Bt[$e];if(Xe instanceof yh)le("q"),le(Sm(ve)),Xe.gState&&p.setGState(Xe.gState),le(re.matrix.toString()+" cm"),le("/"+$e+" sh"),le("Q");else if(Xe instanceof Y0){var mt=new ht(1,0,0,-1,0,mc());re.matrix&&(mt=mt.multiply(re.matrix||Wt),$e=ud.call(Xe,re.key,re.boundingBox,re.xStep,re.yStep,mt).id),le("q"),le("/Pattern cs"),le("/"+$e+" scn"),Xe.gState&&p.setGState(Xe.gState),le(ve),le("Q")}},Sm=function(re){switch(re){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_l=p.moveTo=function(re,ve){return le(A(D(re))+" "+A(R(ve))+" m"),this},jo=p.lineTo=function(re,ve){return le(A(D(re))+" "+A(R(ve))+" l"),this},Cs=p.curveTo=function(re,ve,$e,Xe,mt,At){return le([A(D(re)),A(R(ve)),A(D($e)),A(R(Xe)),A(D(mt)),A(R(At)),"c"].join(" ")),this};p.__private__.line=p.line=function(re,ve,$e,Xe,mt){if(isNaN(re)||isNaN(ve)||isNaN($e)||isNaN(Xe)||!Ho(mt))throw new Error("Invalid arguments passed to jsPDF.line");return x===b.COMPAT?this.lines([[$e-re,Xe-ve]],re,ve,[1,1],mt||"S"):this.lines([[$e-re,Xe-ve]],re,ve,[1,1]).stroke()},p.__private__.lines=p.lines=function(re,ve,$e,Xe,mt,At){var Ht,cr,Cr,Kr,Gr,on,ra,da,Sa,bi,za,Ao;if(typeof re=="number"&&(Ao=$e,$e=ve,ve=re,re=Ao),Xe=Xe||[1,1],At=At||!1,isNaN(ve)||isNaN($e)||!Array.isArray(re)||!Array.isArray(Xe)||!Ho(mt)||typeof At!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_l(ve,$e),Ht=Xe[0],cr=Xe[1],Kr=re.length,bi=ve,za=$e,Cr=0;Cr<Kr;Cr++)(Gr=re[Cr]).length===2?(bi=Gr[0]*Ht+bi,za=Gr[1]*cr+za,jo(bi,za)):(on=Gr[0]*Ht+bi,ra=Gr[1]*cr+za,da=Gr[2]*Ht+bi,Sa=Gr[3]*cr+za,bi=Gr[4]*Ht+bi,za=Gr[5]*cr+za,Cs(on,ra,da,Sa,bi,za));return At&&uc(),cd(mt),this},p.path=function(re){for(var ve=0;ve<re.length;ve++){var $e=re[ve],Xe=$e.c;switch($e.op){case"m":_l(Xe[0],Xe[1]);break;case"l":jo(Xe[0],Xe[1]);break;case"c":Cs.apply(this,Xe);break;case"h":uc()}}return this},p.__private__.rect=p.rect=function(re,ve,$e,Xe,mt){if(isNaN(re)||isNaN(ve)||isNaN($e)||isNaN(Xe)||!Ho(mt))throw new Error("Invalid arguments passed to jsPDF.rect");return x===b.COMPAT&&(Xe=-Xe),le([A(D(re)),A(R(ve)),A(D($e)),A(D(Xe)),"re"].join(" ")),cd(mt),this},p.__private__.triangle=p.triangle=function(re,ve,$e,Xe,mt,At,Ht){if(isNaN(re)||isNaN(ve)||isNaN($e)||isNaN(Xe)||isNaN(mt)||isNaN(At)||!Ho(Ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[$e-re,Xe-ve],[mt-$e,At-Xe],[re-mt,ve-At]],re,ve,[1,1],Ht,!0),this},p.__private__.roundedRect=p.roundedRect=function(re,ve,$e,Xe,mt,At,Ht){if(isNaN(re)||isNaN(ve)||isNaN($e)||isNaN(Xe)||isNaN(mt)||isNaN(At)||!Ho(Ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var cr=4/3*(Math.SQRT2-1);return mt=Math.min(mt,.5*$e),At=Math.min(At,.5*Xe),this.lines([[$e-2*mt,0],[mt*cr,0,mt,At-At*cr,mt,At],[0,Xe-2*At],[0,At*cr,-mt*cr,At,-mt,At],[2*mt-$e,0],[-mt*cr,0,-mt,-At*cr,-mt,-At],[0,2*At-Xe],[0,-At*cr,mt*cr,-At,mt,-At]],re+mt,ve,[1,1],Ht,!0),this},p.__private__.ellipse=p.ellipse=function(re,ve,$e,Xe,mt){if(isNaN(re)||isNaN(ve)||isNaN($e)||isNaN(Xe)||!Ho(mt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var At=4/3*(Math.SQRT2-1)*$e,Ht=4/3*(Math.SQRT2-1)*Xe;return _l(re+$e,ve),Cs(re+$e,ve-Ht,re+At,ve-Xe,re,ve-Xe),Cs(re-At,ve-Xe,re-$e,ve-Ht,re-$e,ve),Cs(re-$e,ve+Ht,re-At,ve+Xe,re,ve+Xe),Cs(re+At,ve+Xe,re+$e,ve+Ht,re+$e,ve),cd(mt),this},p.__private__.circle=p.circle=function(re,ve,$e,Xe){if(isNaN(re)||isNaN(ve)||isNaN($e)||!Ho(Xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(re,ve,$e,$e,Xe)},p.setFont=function(re,ve,$e){return $e&&(ve=I(ve,$e)),Ft=_o(re,ve,{disableWarning:!1}),this};var dd=p.__private__.getFont=p.getFont=function(){return We[_o.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var re,ve,$e={};for(re in ut)if(ut.hasOwnProperty(re))for(ve in $e[re]=[],ut[re])ut[re].hasOwnProperty(ve)&&$e[re].push(ve);return $e},p.addFont=function(re,ve,$e,Xe,mt){var At=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&At.indexOf(arguments[3])!==-1?mt=arguments[3]:arguments[3]&&At.indexOf(arguments[3])==-1&&($e=I($e,Xe)),mt=mt||"Identity-H",Yn.call(this,re,ve,$e,mt)};var tu,Cf=r.lineWidth||.200025,dc=p.__private__.getLineWidth=p.getLineWidth=function(){return Cf},ru=p.__private__.setLineWidth=p.setLineWidth=function(re){return Cf=re,le(A(D(re))+" w"),this};p.__private__.setLineDash=Fr.API.setLineDash=Fr.API.setLineDashPattern=function(re,ve){if(re=re||[],ve=ve||0,isNaN(ve)||!Array.isArray(re))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return re=re.map((function($e){return A(D($e))})).join(" "),ve=A(D(ve)),le("["+re+"] "+ve+" d"),this};var fd=p.__private__.getLineHeight=p.getLineHeight=function(){return Ie*tu};p.__private__.getLineHeight=p.getLineHeight=function(){return Ie*tu};var Pf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(re){return typeof(re=re||1.15)=="number"&&(tu=re),this},ko=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return tu};Pf(r.lineHeight);var Ys=p.__private__.getHorizontalCoordinate=function(re){return D(re)},Js=p.__private__.getVerticalCoordinate=function(re){return x===b.ADVANCED?re:Zt[K].mediaBox.topRightY-Zt[K].mediaBox.bottomLeftY-D(re)},a0=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(re){return A(Ys(re))},Eo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(re){return A(Js(re))},ns=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ke(ns)},p.__private__.setStrokeColor=p.setDrawColor=function(re,ve,$e,Xe){return ns=Te({ch1:re,ch2:ve,ch3:$e,ch4:Xe,pdfColorType:"draw",precision:2}),le(ns),this};var hd=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ke(hd)},p.__private__.setFillColor=p.setFillColor=function(re,ve,$e,Xe){return hd=Te({ch1:re,ch2:ve,ch3:$e,ch4:Xe,pdfColorType:"fill",precision:2}),le(hd),this};var Ma=r.textColor||"0 g",fc=p.__private__.getTextColor=p.getTextColor=function(){return ke(Ma)};p.__private__.setTextColor=p.setTextColor=function(re,ve,$e,Xe){return Ma=Te({ch1:re,ch2:ve,ch3:$e,ch4:Xe,pdfColorType:"text",precision:3}),this};var hc=r.charSpace,nu=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(hc||0)};p.__private__.setCharSpace=p.setCharSpace=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hc=re,this};var Of=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(re){var ve=p.CapJoinStyles[re];if(ve===void 0)throw new Error("Line cap style of '"+re+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Of=ve,le(ve+" J"),this};var au=0;p.__private__.setLineJoin=p.setLineJoin=function(re){var ve=p.CapJoinStyles[re];if(ve===void 0)throw new Error("Line join style of '"+re+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return au=ve,le(ve+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(re){if(re=re||0,isNaN(re))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(A(D(re))+" M"),this},p.GState=Vv,p.setGState=function(re){(re=typeof re=="string"?Xt[pr[re]]:pd(null,re)).equals(vr)||(le("/"+re.id+" gs"),vr=re)};var pd=function(re,ve){if(!re||!pr[re]){var $e=!1;for(var Xe in Xt)if(Xt.hasOwnProperty(Xe)&&Xt[Xe].equals(ve)){$e=!0;break}if($e)ve=Xt[Xe];else{var mt="GS"+(Object.keys(Xt).length+1).toString(10);Xt[mt]=ve,ve.id=mt}return re&&(pr[re]=ve.id),lr.publish("addGState",ve),ve}};p.addGState=function(re,ve){return pd(re,ve),this},p.saveGraphicsState=function(){return le("q"),wt.push({key:Ft,size:Ie,color:Ma}),this},p.restoreGraphicsState=function(){le("Q");var re=wt.pop();return Ft=re.key,Ie=re.size,Ma=re.color,vr=null,this},p.setCurrentTransformationMatrix=function(re){return le(re.toString()+" cm"),this},p.comment=function(re){return le("#"+re),this};var Vo=function(re,ve){var $e=re||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $e},set:function(At){isNaN(At)||($e=parseFloat(At))}});var Xe=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Xe},set:function(At){isNaN(At)||(Xe=parseFloat(At))}});var mt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return mt},set:function(At){mt=At.toString()}}),this},pc=function(re,ve,$e,Xe){Vo.call(this,re,ve),this.type="rect";var mt=$e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return mt},set:function(Ht){isNaN(Ht)||(mt=parseFloat(Ht))}});var At=Xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return At},set:function(Ht){isNaN(Ht)||(At=parseFloat(Ht))}}),this},md=function(){this.page=rr,this.currentPage=K,this.pages=te.slice(0),this.pagesContext=Zt.slice(0),this.x=Kt,this.y=Pt,this.matrix=Ee,this.width=Sl(K),this.height=mc(K),this.outputDestination=ce,this.id="",this.objectNumber=-1};md.prototype.restore=function(){rr=this.page,K=this.currentPage,Zt=this.pagesContext,te=this.pages,Kt=this.x,Pt=this.y,Ee=this.matrix,If(K,this.width),Mf(K,this.height),ce=this.outputDestination};var i0=function(re,ve,$e,Xe,mt){et.push(new md),rr=K=0,te=[],Kt=re,Pt=ve,Ee=mt,rs([$e,Xe])},Nm=function(re){if(Ue[re])et.pop().restore();else{var ve=new md,$e="Xo"+(Object.keys(xr).length+1).toString(10);ve.id=$e,Ue[re]=$e,xr[$e]=ve,lr.publish("addFormObject",ve),et.pop().restore()}};for(var gd in p.beginFormObject=function(re,ve,$e,Xe,mt){return i0(re,ve,$e,Xe,mt),this},p.endFormObject=function(re){return Nm(re),this},p.doFormObject=function(re,ve){var $e=xr[Ue[re]];return le("q"),le(ve.toString()+" cm"),le("/"+$e.id+" Do"),le("Q"),this},p.getFormObject=function(re){var ve=xr[Ue[re]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},p.save=function(re,ve){return re=re||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?(uh(yi(ri()),re),typeof uh.unload=="function"&&qr.setTimeout&&setTimeout(uh.unload,911),this):new Promise((function($e,Xe){try{var mt=uh(yi(ri()),re);typeof uh.unload=="function"&&qr.setTimeout&&setTimeout(uh.unload,911),$e(mt)}catch(At){Xe(At.message)}}))},Fr.API)Fr.API.hasOwnProperty(gd)&&(gd==="events"&&Fr.API.events.length?(function(re,ve){var $e,Xe,mt;for(mt=ve.length-1;mt!==-1;mt--)$e=ve[mt][0],Xe=ve[mt][1],re.subscribe.apply(re,[$e].concat(typeof Xe=="function"?[Xe]:Xe))})(lr,Fr.API.events):p[gd]=Fr.API[gd]);var Sl=p.getPageWidth=function(re){return(Zt[re=re||K].mediaBox.topRightX-Zt[re].mediaBox.bottomLeftX)/ot},If=p.setPageWidth=function(re,ve){Zt[re].mediaBox.topRightX=ve*ot+Zt[re].mediaBox.bottomLeftX},mc=p.getPageHeight=function(re){return(Zt[re=re||K].mediaBox.topRightY-Zt[re].mediaBox.bottomLeftY)/ot},Mf=p.setPageHeight=function(re,ve){Zt[re].mediaBox.topRightY=ve*ot+Zt[re].mediaBox.bottomLeftY};return p.internal={pdfEscape:ba,getStyle:Tf,getFont:dd,getFontSize:Me,getCharSpace:nu,getTextColor:fc,getLineHeight:fd,getLineHeightFactor:ko,getLineWidth:dc,write:pe,getHorizontalCoordinate:Ys,getVerticalCoordinate:Js,getCoordinateString:a0,getVerticalCoordinateString:Eo,collections:{},newObject:Ve,newAdditionalObject:xe,newObjectDeferred:pt,newObjectDeferredBegin:he,getFilters:Ge,putStream:nt,events:lr,scaleFactor:ot,pageSize:{getWidth:function(){return Sl(K)},setWidth:function(re){If(K,re)},getHeight:function(){return mc(K)},setHeight:function(re){Mf(K,re)}},encryptionOptions:u,encryption:Mn,getEncryptor:Ii,output:No,getNumberOfPages:wo,pages:te,out:le,f2:z,f3:U,getPageInfo:vi,getPageInfoByObjId:Mr,getCurrentPageInfo:Xs,getPDFVersion:y,Point:Vo,Rectangle:pc,Matrix:ht,hasHotfix:Ks},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Sl(K)},set:function(re){If(K,re)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return mc(K)},set:function(re){Mf(K,re)},enumerable:!0,configurable:!0}),Ia.call(p,be),Ft="F1",an(a,e),lr.publish("initialized"),p}H0.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},H0.prototype.toHexString=function(r){return r.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},H0.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},H0.prototype.processOwnerPassword=function(r,t){return f6(d6(t).substr(0,5),r)},H0.prototype.encryptor=function(r,t){var e=d6(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return f6(e,n)}},Vv.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||$n(r)!==$n(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},Fr.API={events:[]},Fr.version="2.5.2";var Ta=Fr.API,_N=1,Hh=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},P0=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xr=function(r){return r.toFixed(2)},Xd=function(r){return r.toFixed(5)};Ta.__acroform__={};var bo=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},dA=function(r){return r*_N},Ac=function(r){var t=new RD,e=_r.internal.getHeight(r)||0,n=_r.internal.getWidth(r)||0;return t.BBox=[0,0,Number(Xr(n)),Number(Xr(e))],t},eX=Ta.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<t},tX=Ta.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<t)},rX=Ta.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(r&1<<t)==0?0:1},Ba=Ta.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rX(r,t-1)},$a=Ta.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return eX(r,t-1)},Ua=Ta.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tX(r,t-1)},nX=Ta.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=r[0],i=r[1],s=r[2],o=r[3],l={};return l.lowerLeft_X=e(a)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=e(a+s)||0,l.upperRight_Y=n(i)||0,[Number(Xr(l.lowerLeft_X)),Number(Xr(l.lowerLeft_Y)),Number(Xr(l.upperRight_X)),Number(Xr(l.upperRight_Y))]},aX=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=h6(r,e),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+a+" "+Xr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ac(r);return i.scope=r.scope,i.stream=t.join(`
`),i}},h6=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=r.multiline?a.map((function(U){return U.split(`
`)})):a.map((function(U){return[U]}));var i=e,s=_r.internal.getHeight(r)||0;s=s<0?-s:s;var o=_r.internal.getWidth(r)||0;o=o<0?-o:o;var l=function(U,D,T){if(U+1<a.length){var R=D+" "+a[U+1][0];return H1(R,r,T).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,f=H1("3",r,i).height,h=r.multiline?s-i:(s-f)/2,p=h+=2,g=0,y=0,m=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+H1(t,r,i=12).width+", FieldWidth:"+o+`
`;break}for(var v="",b=0,x=0;x<a.length;x++)if(a.hasOwnProperty(x)){var S=!1;if(a[x].length!==1&&m!==a[x].length-1){if((f+2)*(b+2)+2>s)continue e;v+=a[x][m],S=!0,y=x,x--}else{v=(v+=a[x][m]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var _=parseInt(x),I=l(_,v,i),A=x>=a.length-1;if(I&&!A){v+=" ",m=0;continue}if(I||A){if(A)y=_;else if(r.multiline&&(f+2)*(b+2)+2>s)continue e}else{if(!r.multiline||(f+2)*(b+2)+2>s)continue e;y=_}}for(var O="",M=g;M<=y;M++){var z=a[M];if(r.multiline){if(M===y){O+=z[m]+" ",m=(m+1)%z.length;continue}if(M===g){O+=z[z.length-1]+" ";continue}}O+=z[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,u=H1(O,r,i).width,r.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}t+=Xr(c)+" "+Xr(p)+` Td
`,t+="("+Hh(O)+`) Tj
`,t+=-Xr(c)+` 0 Td
`,p=-(i+2),u=0,g=S?y:y+1,b++,v=""}break}return n.text=t,n.fontSize=i,n},H1=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:a}},iX={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},sX=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find((function(n){return n.type===e.type&&n.object===e.object}))===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},oX=function(r,t){for(var e in r)if(r.hasOwnProperty(e)){var n=e,a=r[e];t.internal.newObjectDeferredBegin(a.objId,!0),$n(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete r[n]}},lX=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(oc.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(iX)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_N=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new FD,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",(function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)})),r.internal.events.subscribe("buildDocument",(function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&sX(i,e)}})(r)})),r.internal.events.subscribe("putCatalog",(function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)})),r.internal.events.subscribe("postPutPages",(function(e){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=nX(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=_r.createDefaultAppearanceStream(o),$n(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=aX(o);l.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var g=p[s];typeof g=="function"&&(g=g.call(a,o)),f+="/"+s+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+s+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}i&&oX(a.internal.acroformPlugin.xForms,a)})(e,r)})),r.internal.acroformPlugin.isInitialized=!0}},MD=Ta.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(s){return s};if(Array.isArray(r)){for(var a="[",i=0;i<r.length;i++)switch(i!==0&&(a+=" "),$n(r[i])){case"boolean":case"number":case"object":a+=r[i].toString();break;case"string":r[i].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),a+="("+Hh(n(r[i].toString()))+")"):a+=r[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Lw=function(r,t,e){var n=function(a){return a};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),r="("+Hh(n(r))+")"},Dc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Dc.prototype.toString=function(){return this.objId+" 0 R"},Dc.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Dc.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],a=this[n];a&&(Array.isArray(a)?r.push({key:n,value:MD(a,this.objId,this.scope)}):a instanceof Dc?(a.scope=this.scope,r.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:n,value:a}))}return r};var RD=function(){Dc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};bo(RD,Dc);var FD=function(){Dc.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Hh(e(r))+")"}},set:function(e){r=e}})};bo(FD,Dc);var oc=function r(){Dc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ba(t,3)},set:function(v){v?this.F=$a(t,3):this.F=Ua(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');e=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Gv)return;i="FieldObject"+r.FieldNum++}var v=function(b){return b};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Hh(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(v){s=v}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/_N:c},set:function(v){c=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Gv||this instanceof Ah))return Lw(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ai?h:Lw(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof Ai?v:v.substr(0,1)==="("?P0(v.substr(1,v.length-2)):P0(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ai?P0(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof Ai?"/"+v:v}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ai?p:Lw(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof Ai?v:v.substr(0,1)==="("?P0(v.substr(1,v.length-2)):P0(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ai?P0(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof Ai?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(v){v=!!v,y=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(v){g=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,1)},set:function(v){v?this.Ff=$a(this.Ff,1):this.Ff=Ua(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,2)},set:function(v){v?this.Ff=$a(this.Ff,2):this.Ff=Ua(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,3)},set:function(v){v?this.Ff=$a(this.Ff,3):this.Ff=Ua(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(m!==null)return m},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');m=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(m){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:m=2;break;case"center":case 1:m=1;break;case"left":case 0:default:m=0}}})};bo(oc,Dc);var np=function(){oc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return MD(t,this.objId,this.scope)},set:function(e){var n,a;a=[],typeof(n=e)=="string"&&(a=(function(i,s,o){o||(o=1);for(var l,c=[];l=s.exec(i);)c.push(l[o]);return c})(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,18)},set:function(e){e?this.Ff=$a(this.Ff,18):this.Ff=Ua(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=$a(this.Ff,19):this.Ff=Ua(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,20)},set:function(e){e?(this.Ff=$a(this.Ff,20),t.sort()):this.Ff=Ua(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,22)},set:function(e){e?this.Ff=$a(this.Ff,22):this.Ff=Ua(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,23)},set:function(e){e?this.Ff=$a(this.Ff,23):this.Ff=Ua(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,27)},set:function(e){e?this.Ff=$a(this.Ff,27):this.Ff=Ua(this.Ff,27)}}),this.hasAppearanceStream=!1};bo(np,oc);var ap=function(){np.call(this),this.fontName="helvetica",this.combo=!1};bo(ap,np);var ip=function(){ap.call(this),this.combo=!0};bo(ip,ap);var Nv=function(){ip.call(this),this.edit=!0};bo(Nv,ip);var Ai=function(){oc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,15)},set:function(e){e?this.Ff=$a(this.Ff,15):this.Ff=Ua(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,16)},set:function(e){e?this.Ff=$a(this.Ff,16):this.Ff=Ua(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,17)},set:function(e){e?this.Ff=$a(this.Ff,17):this.Ff=Ua(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,26)},set:function(e){e?this.Ff=$a(this.Ff,26):this.Ff=Ua(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(i){return i};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Hh(e(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(e){$n(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};bo(Ai,oc);var jv=function(){Ai.call(this),this.pushButton=!0};bo(jv,Ai);var sp=function(){Ai.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};bo(sp,Ai);var Gv=function(){var r,t;oc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+Hh(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){$n(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(a){e="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_r.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bo(Gv,oc),sp.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},sp.prototype.createOption=function(r){var t=new Gv;return t.Parent=this,t.optionName=r,this.Kids.push(t),cX.call(this.scope,t),t};var kv=function(){Ai.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_r.CheckBox.createAppearanceStream()};bo(kv,Ai);var Ah=function(){oc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,13)},set:function(t){t?this.Ff=$a(this.Ff,13):this.Ff=Ua(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,21)},set:function(t){t?this.Ff=$a(this.Ff,21):this.Ff=Ua(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,23)},set:function(t){t?this.Ff=$a(this.Ff,23):this.Ff=Ua(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,24)},set:function(t){t?this.Ff=$a(this.Ff,24):this.Ff=Ua(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,25)},set:function(t){t?this.Ff=$a(this.Ff,25):this.Ff=Ua(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,26)},set:function(t){t?this.Ff=$a(this.Ff,26):this.Ff=Ua(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bo(Ah,oc);var Ev=function(){Ah.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ba(this.Ff,14)},set:function(r){r?this.Ff=$a(this.Ff,14):this.Ff=Ua(this.Ff,14)}}),this.password=!0};bo(Ev,Ah);var _r={CheckBox:{createAppearanceStream:function(){return{N:{On:_r.CheckBox.YesNormal},D:{On:_r.CheckBox.YesPushDown,Off:_r.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=Ac(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),i=h6(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+Xr(_r.internal.getWidth(r))+" "+Xr(_r.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+Xr(i.fontSize)+" Tf "+a),e.push("BT"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=Ac(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),a=[],i=_r.internal.getHeight(r),s=_r.internal.getWidth(r),o=h6(r,r.caption);return a.push("1 g"),a.push("0 0 "+Xr(s)+" "+Xr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Xr(s-1)+" "+Xr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+e+" "+Xr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(r){var t=Ac(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Xr(_r.internal.getWidth(r))+" "+Xr(_r.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:_r.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=_r.RadioButton.Circle.YesNormal,t.D[r]=_r.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=Ac(r);t.scope=r.scope;var e=[],n=_r.internal.getWidth(r)<=_r.internal.getHeight(r)?_r.internal.getWidth(r)/4:_r.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=_r.internal.Bezier_C,i=Number((n*a).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Xd(_r.internal.getWidth(r)/2)+" "+Xd(_r.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),e.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),e.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),e.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Ac(r);t.scope=r.scope;var e=[],n=_r.internal.getWidth(r)<=_r.internal.getHeight(r)?_r.internal.getWidth(r)/4:_r.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*_r.internal.Bezier_C).toFixed(5)),s=Number((n*_r.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Xd(_r.internal.getWidth(r)/2)+" "+Xd(_r.internal.getHeight(r)/2)+" cm"),e.push(a+" 0 m"),e.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),e.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),e.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),e.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Xd(_r.internal.getWidth(r)/2)+" "+Xd(_r.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=Ac(r);t.scope=r.scope;var e=[],n=_r.internal.getWidth(r)<=_r.internal.getHeight(r)?_r.internal.getWidth(r)/4:_r.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*_r.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Xd(_r.internal.getWidth(r)/2)+" "+Xd(_r.internal.getHeight(r)/2)+" cm"),e.push(a+" 0 m"),e.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),e.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),e.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),e.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:_r.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=_r.RadioButton.Cross.YesNormal,t.D[r]=_r.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=Ac(r);t.scope=r.scope;var e=[],n=_r.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+Xr(_r.internal.getWidth(r)-2)+" "+Xr(_r.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(Xr(n.x1.x)+" "+Xr(n.x1.y)+" m"),e.push(Xr(n.x2.x)+" "+Xr(n.x2.y)+" l"),e.push(Xr(n.x4.x)+" "+Xr(n.x4.y)+" m"),e.push(Xr(n.x3.x)+" "+Xr(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Ac(r);t.scope=r.scope;var e=_r.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Xr(_r.internal.getWidth(r))+" "+Xr(_r.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Xr(_r.internal.getWidth(r)-2)+" "+Xr(_r.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Xr(e.x1.x)+" "+Xr(e.x1.y)+" m"),n.push(Xr(e.x2.x)+" "+Xr(e.x2.y)+" l"),n.push(Xr(e.x4.x)+" "+Xr(e.x4.y)+" m"),n.push(Xr(e.x3.x)+" "+Xr(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=Ac(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Xr(_r.internal.getWidth(r))+" "+Xr(_r.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};_r.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=_r.internal.getWidth(r),e=_r.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},_r.internal.getWidth=function(r){var t=0;return $n(r)==="object"&&(t=dA(r.Rect[2])),t},_r.internal.getHeight=function(r){var t=0;return $n(r)==="object"&&(t=dA(r.Rect[3])),t};var cX=Ta.addField=function(r){if(lX(this,r),!(r instanceof oc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ta.AcroFormChoiceField=np,Ta.AcroFormListBox=ap,Ta.AcroFormComboBox=ip,Ta.AcroFormEditBox=Nv,Ta.AcroFormButton=Ai,Ta.AcroFormPushButton=jv,Ta.AcroFormRadioButton=sp,Ta.AcroFormCheckBox=kv,Ta.AcroFormTextField=Ah,Ta.AcroFormPasswordField=Ev,Ta.AcroFormAppearance=_r,Ta.AcroForm={ChoiceField:np,ListBox:ap,ComboBox:ip,EditBox:Nv,Button:Ai,PushButton:jv,RadioButton:sp,CheckBox:kv,TextField:Ah,PasswordField:Ev,Appearance:_r},Fr.AcroForm={ChoiceField:np,ListBox:ap,ComboBox:ip,EditBox:Nv,Button:Ai,PushButton:jv,RadioButton:sp,CheckBox:kv,TextField:Ah,PasswordField:Ev,Appearance:_r};Fr.AcroForm;function DD(r){return r.reduce((function(t,e,n){return t[e]=n,t}),{})}(function(r){r.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(U,D){var T,R,C,N,E,k=t;if((D=D||t)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(I(U))for(E in e)for(C=e[E],T=0;T<C.length;T+=1){for(N=!0,R=0;R<C[T].length;R+=1)if(C[T][R]!==void 0&&C[T][R]!==U[R]){N=!1;break}if(N===!0){k=E;break}}else for(E in e)for(C=e[E],T=0;T<C.length;T+=1){for(N=!0,R=0;R<C[T].length;R+=1)if(C[T][R]!==void 0&&C[T][R]!==U.charCodeAt(R)){N=!1;break}if(N===!0){k=E;break}}return k===t&&D!==t&&(k=D),k},a=function U(D){for(var T=this.internal.write,R=this.internal.putStream,C=(0,this.internal.getFilters)();C.indexOf("FlateEncode")!==-1;)C.splice(C.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var N=[];if(N.push({key:"Type",value:"/XObject"}),N.push({key:"Subtype",value:"/Image"}),N.push({key:"Width",value:D.width}),N.push({key:"Height",value:D.height}),D.colorSpace===m.INDEXED?N.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(N.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===m.DEVICE_CMYK&&N.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),N.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&N.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var E="",k=0,P=D.transparency.length;k<P;k++)E+=D.transparency[k]+" "+D.transparency[k]+" ";N.push({key:"Mask",value:"["+E+"]"})}D.sMask!==void 0&&N.push({key:"SMask",value:D.objectId+1+" 0 R"});var q=D.filter!==void 0?["/"+D.filter]:void 0;if(R({data:D.data,additionalKeyValues:N,alreadyAppliedFilters:q,objectId:D.objectId}),T("endobj"),"sMask"in D&&D.sMask!==void 0){var H="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,L={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:H,data:D.sMask};"filter"in D&&(L.filter=D.filter),U.call(this,L)}if(D.colorSpace===m.INDEXED){var K=this.internal.newObject();R({data:O(new Uint8Array(D.palette)),objectId:K}),T("endobj")}},i=function(){var U=this.internal.collections.addImage_images;for(var D in U)a.call(this,U[D])},s=function(){var U,D=this.internal.collections.addImage_images,T=this.internal.write;for(var R in D)T("/I"+(U=D[R]).index,U.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var U=this.internal.collections.addImage_images;return o.call(this),U},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(U){return typeof r["process"+U.toUpperCase()]=="function"},f=function(U){return $n(U)==="object"&&U.nodeType===1},h=function(U,D){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var T=""+U.getAttribute("src");if(T.indexOf("data:image/")===0)return _g(unescape(T).split("base64,").pop());var R=r.loadFile(T,!0);if(R!==void 0)return R}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var C;switch(D){case"PNG":C="image/png";break;case"WEBP":C="image/webp";break;case"JPEG":case"JPG":default:C="image/jpeg"}return _g(U.toDataURL(C,1).split("base64,").pop())}},p=function(U){var D=this.internal.collections.addImage_images;if(D){for(var T in D)if(U===D[T].alias)return D[T]}},g=function(U,D,T){return U||D||(U=-96,D=-96),U<0&&(U=-1*T.width*72/U/this.internal.scaleFactor),D<0&&(D=-1*T.height*72/D/this.internal.scaleFactor),U===0&&(U=D*T.width/T.height),D===0&&(D=U*T.height/T.width),[U,D]},y=function(U,D,T,R,C,N){var E=g.call(this,T,R,C),k=this.internal.getCoordinateString,P=this.internal.getVerticalCoordinateString,q=l.call(this);if(T=E[0],R=E[1],q[C.index]=C,N){N*=Math.PI/180;var H=Math.cos(N),L=Math.sin(N),K=function(Z){return Z.toFixed(4)},Y=[K(H),K(L),K(-1*L),K(H),0,0,"cm"]}this.internal.write("q"),N?(this.internal.write([1,"0","0",1,k(U),P(D+R),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([k(T),"0","0",k(R),"0","0","cm"].join(" "))):this.internal.write([k(T),"0","0",k(R),k(U),P(D+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+C.index+" Do"),this.internal.write("Q")},m=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=r.__addimage__.sHashCode=function(U){var D,T,R=0;if(typeof U=="string")for(T=U.length,D=0;D<T;D++)R=(R<<5)-R+U.charCodeAt(D),R|=0;else if(I(U))for(T=U.byteLength/2,D=0;D<T;D++)R=(R<<5)-R+U[D],R|=0;return R},x=r.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var D=!0;return U.length===0&&(D=!1),U.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(D=!1),D},S=r.__addimage__.extractImageFromDataUrl=function(U){var D=(U=U||"").split("base64,"),T=null;if(D.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(R)&&(T={mimeType:R[1],charset:R[2],data:D[1]})}return T},_=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(U){return _()&&U instanceof ArrayBuffer};var I=r.__addimage__.isArrayBufferView=function(U){return _()&&typeof Uint32Array<"u"&&(U instanceof Int8Array||U instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array)},A=r.__addimage__.binaryStringToUint8Array=function(U){for(var D=U.length,T=new Uint8Array(D),R=0;R<D;R++)T[R]=U.charCodeAt(R);return T},O=r.__addimage__.arrayBufferToBinaryString=function(U){for(var D="",T=I(U)?U:new Uint8Array(U),R=0;R<T.length;R+=8192)D+=String.fromCharCode.apply(null,T.subarray(R,R+8192));return D};r.addImage=function(){var U,D,T,R,C,N,E,k,P;if(typeof arguments[1]=="number"?(D=t,T=arguments[1],R=arguments[2],C=arguments[3],N=arguments[4],E=arguments[5],k=arguments[6],P=arguments[7]):(D=arguments[1],T=arguments[2],R=arguments[3],C=arguments[4],N=arguments[5],E=arguments[6],k=arguments[7],P=arguments[8]),$n(U=arguments[0])==="object"&&!f(U)&&"imageData"in U){var q=U;U=q.imageData,D=q.format||D||t,T=q.x||T||0,R=q.y||R||0,C=q.w||q.width||C,N=q.h||q.height||N,E=q.alias||E,k=q.compression||k,P=q.rotation||q.angle||P}var H=this.internal.getFilters();if(k===void 0&&H.indexOf("FlateEncode")!==-1&&(k="SLOW"),isNaN(T)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var L=M.call(this,U,D,E,k);return y.call(this,T,R,C,N,L,P),this};var M=function(U,D,T,R){var C,N,E;if(typeof U=="string"&&n(U)===t){U=unescape(U);var k=z(U,!1);(k!==""||(k=r.loadFile(U,!0))!==void 0)&&(U=k)}if(f(U)&&(U=h(U,D)),D=n(U,D),!u(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((E=T)==null||E.length===0)&&(T=(function(P){return typeof P=="string"||I(P)?b(P):I(P.data)?b(P.data):null})(U)),(C=p.call(this,T))||(_()&&(U instanceof Uint8Array||D==="RGBA"||(N=U,U=A(U))),C=this["process"+D.toUpperCase()](U,c.call(this),T,(function(P){return P&&typeof P=="string"&&(P=P.toUpperCase()),P in r.image_compression?P:v.NONE})(R),N)),!C)throw new Error("An unknown error occurred whilst processing the image.");return C},z=r.__addimage__.convertBase64ToBinaryString=function(U,D){var T;D=typeof D!="boolean"||D;var R,C="";if(typeof U=="string"){R=(T=S(U))!==null?T.data:U;try{C=_g(R)}catch(N){if(D)throw x(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+N.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return C};r.getImageProperties=function(U){var D,T,R="";if(f(U)&&(U=h(U)),typeof U=="string"&&n(U)===t&&((R=z(U,!1))===""&&(R=r.loadFile(U)||""),U=R),T=n(U),!u(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!_()||U instanceof Uint8Array||(U=A(U)),!(D=this["process"+T.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=T,D}})(Fr.API),(function(r){var t=function(e){if(e!==void 0&&e!="")return!0};Fr.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,a,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,u=!1,f=0;f<c.length&&!u;f++)switch((n=c[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){n=c[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(y.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(v(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+p(v(b))+") >>",y.content=i;var x=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(y.objId,"0 R",m.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var _=this.annotations._nameMap[n.options.name];n.options.pageNumber=_.page,n.options.top=_.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,a,i,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(e),y:c(n),w:l(e+a),h:c(n+i)},options:s,type:"link"})},r.textWithLink=function(e,n,a,i){var s,o,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(e,o).length;s=Math.ceil(c*u)}else o=l,s=c;return this.text(e,n,a,i),a+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,a-c,o,s,i),l},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}})(Fr.API),(function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var i=r.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},s=r.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=r.__arabicParser__.isArabicEndLetter=function(y){return s(y)&&i(y)&&t[y.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(y){return s(y)&&a.indexOf(y.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return s(y)&&i(y)&&t[y.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(y){return s(y)&&i(y)&&t[y.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(y){return s(y)&&i(y)&&t[y.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(y){return s(y)&&i(y)&&t[y.charCodeAt(0)].length==4},f=r.__arabicParser__.resolveLigatures=function(y){var m=0,v=e,b="",x=0;for(m=0;m<y.length;m+=1)v[y.charCodeAt(m)]!==void 0?(x++,typeof(v=v[y.charCodeAt(m)])=="number"&&(b+=String.fromCharCode(v),v=e,x=0),m===y.length-1&&(v=e,b+=y.charAt(m-(x-1)),m-=x-1,x=0)):(v=e,b+=y.charAt(m-x),m-=x,x=0);return b};r.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var h=r.__arabicParser__.getCorrectForm=function(y,m,v){return s(y)?i(y)===!1?-1:!c(y)||!s(m)&&!s(v)||!s(v)&&o(m)||o(y)&&!s(m)||o(y)&&l(m)||o(y)&&o(m)?0:u(y)&&s(m)&&!o(m)&&s(v)&&c(v)?3:o(y)||!s(v)?1:2:-1},p=function(y){var m=0,v=0,b=0,x="",S="",_="",I=(y=y||"").split("\\s+"),A=[];for(m=0;m<I.length;m+=1){for(A.push(""),v=0;v<I[m].length;v+=1)x=I[m][v],S=I[m][v-1],_=I[m][v+1],s(x)?(b=h(x,S,_),A[m]+=b!==-1?String.fromCharCode(t[x.charCodeAt(0)][b]):x):A[m]+=x;A[m]=f(A[m])}return A.join(" ")},g=r.__arabicParser__.processArabic=r.processArabic=function(){var y,m=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(m)){var b=0;for(v=[],b=0;b<m.length;b+=1)Array.isArray(m[b])?v.push([p(m[b][0]),m[b][1],m[b][2]]):v.push([p(m[b])]);y=v}else y=p(m);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};r.events.push(["preProcessText",g])})(Fr.API),Fr.API.autoPrint=function(r){var t;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))}return this},(function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(o){e=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var a;if((e=e||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Fr.API),(function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(y){g=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,p=0,g=0,y=0,m=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce((function(x,S){return x.concat(m.splitTextToSize(S,v))}),[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)p<(y=this.getStringUnitWidth(l[b],{font:f})*u)&&(p=y);return p!==0&&(g=l.length),{w:p/=h,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=r.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,u,f,h){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,g,y,m,v=[],b=[],x=[],S={},_={},I=[],A=[],O=(h=h||{}).autoSize||!1,M=h.printHeaders!==!1,z=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,U=h.margins||Object.assign({width:this.getPageWidth()},t),D=typeof h.padding=="number"?h.padding:3,T=h.headerBackgroundColor||"#c8c8c8",R=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=R,this.setFontSize(z),f==null)b=v=Object.keys(u[0]),x=v.map((function(){return"left"}));else if(Array.isArray(f)&&$n(f[0])==="object")for(v=f.map((function(q){return q.name})),b=f.map((function(q){return q.prompt||q.name||""})),x=f.map((function(q){return q.align||"left"})),p=0;p<f.length;p+=1)_[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(b=v=f,x=v.map((function(){return"left"})));if(O||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<v.length;p+=1){for(S[m=v[p]]=u.map((function(q){return q[m]})),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=S[m],this.setFont(void 0,"normal"),y=0;y<g.length;y+=1)I.push(this.getTextDimensions(g[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[m]=Math.max.apply(null,I)+D+D,I=[]}if(M){var C={};for(p=0;p<v.length;p+=1)C[v[p]]={},C[v[p]].text=b[p],C[v[p]].align=x[p];var N=o.call(this,C,_);A=v.map((function(q){return new i(l,c,_[q],N,C[q].text,void 0,C[q].align)})),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var E=f.reduce((function(q,H){return q[H.name]=H.align,q}),{});for(p=0;p<u.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:u[p]},this);var k=o.call(this,u[p],_);for(y=0;y<v.length;y+=1){var P=u[p][v[y]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:y,data:P},this),s.call(this,new i(l,c,_[v[y]],k,P,p+2,E[v[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map((function(p){var g=l[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,c[p]-u-u)}),this).map((function(p){return this.getLineHeightFactor()*p.length*f/h+u+u}),this).reduce((function(p,g){return Math.max(p,g)}),0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),e=!1}})(Fr.API);var LD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},BD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],p6=DD(BD),$D=[100,200,300,400,500,600,700,800,900],uX=DD($D);function m6(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=(function(i){return LD[i=i||"normal"]?i:"normal"})(r.style),n=(function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}})(r.weight),a=(function(i){return typeof p6[i=i||"normal"]=="number"?i:"normal"})(r.stretch);return{family:t,style:e,weight:n,stretch:a,src:r.src||[],ref:r.ref||{name:t,style:[a,e,n].join(" ")}}}function fA(r,t,e,n){var a;for(a=e;a>=0&&a<t.length;a+=n)if(r[t[a]])return r[t[a]];for(a=e;a>=0&&a<t.length;a-=n)if(r[t[a]])return r[t[a]]}var dX={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pA(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function fX(r,t,e){for(var n=(e=e||{}).defaultFontFamily||"times",a=Object.assign({},dX,e.genericFontFamilies||{}),i=null,s=null,o=0;o<t.length;++o)if(a[(i=m6(t[o])).family]&&(i.family=a[i.family]),r.hasOwnProperty(i.family)){s=r[i.family];break}if(!(s=s||r[n]))throw new Error("Could not find a font-family for the rule '"+pA(i)+"' and default family '"+n+"'.");if(s=(function(l,c){if(c[l])return c[l];var u=p6[l],f=u<=p6.normal?-1:1,h=fA(c,BD,u,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h})(i.stretch,s),s=(function(l,c){if(c[l])return c[l];for(var u=LD[l],f=0;f<u.length;++f)if(c[u[f]])return c[u[f]];throw new Error("Could not find a matching font-style for "+l)})(i.style,s),!(s=(function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=uX[l],f=fA(c,$D,u,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f})(i.weight,s)))throw new Error("Failed to resolve a font for the rule '"+pA(i)+"'.");return s}function mA(r){return r.trimLeft()}function hX(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function pX(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var V1,gA,yA,Bw=["times"];(function(r){var t,e,n,a,i,s,o,l,c,u=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new s,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new s,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=L;Object.defineProperty(this,"pdf",{get:function(){return K}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(oe){Y=!!oe}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(oe){Z=!!oe}});var V=0;Object.defineProperty(this,"posX",{get:function(){return V},set:function(oe){isNaN(oe)||(V=oe)}});var ee=0;Object.defineProperty(this,"posY",{get:function(){return ee},set:function(oe){isNaN(oe)||(ee=oe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(oe){var le;typeof oe=="number"?le=[oe,oe,oe,oe]:((le=new Array(4))[0]=oe[0],le[1]=oe.length>=2?oe[1]:le[0],le[2]=oe.length>=3?oe[2]:le[0],le[3]=oe.length>=4?oe[3]:le[1]),c.margin=le}});var B=!1;Object.defineProperty(this,"autoPaging",{get:function(){return B},set:function(oe){B=oe}});var F=0;Object.defineProperty(this,"lastBreak",{get:function(){return F},set:function(oe){F=oe}});var X=[];Object.defineProperty(this,"pageBreaks",{get:function(){return X},set:function(oe){X=oe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(oe){oe instanceof u&&(c=oe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(oe){c.path=oe}});var te=[];Object.defineProperty(this,"ctxStack",{get:function(){return te},set:function(oe){te=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var le;le=h(oe),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var le=h(oe);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var se=null;function ce(oe,le){if(se===null){var pe=(function(ye){var be=[];return Object.keys(ye).forEach((function(Ie){ye[Ie].forEach((function(Oe){var Me=null;switch(Oe){case"bold":Me={family:Ie,weight:"bold"};break;case"italic":Me={family:Ie,style:"italic"};break;case"bolditalic":Me={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Ie}}Me!==null&&(Me.ref={name:Ie,style:Oe},be.push(Me))}))})),be})(oe.getFontList());se=(function(ye){for(var be={},Ie=0;Ie<ye.length;++Ie){var Oe=m6(ye[Ie]),Me=Oe.family,Re=Oe.stretch,He=Oe.style,qe=Oe.weight;be[Me]=be[Me]||{},be[Me][Re]=be[Me][Re]||{},be[Me][Re][He]=be[Me][Re][He]||{},be[Me][Re][He][qe]=Oe}return be})(pe.concat(le))}return se}var ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return ue},set:function(oe){se=null,ue=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var le;if(this.ctx.font=oe,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var pe=le[1],ye=(le[2],le[3]),be=le[4],Ie=(le[5],le[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(Oe==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var Me=(function(Rt){var Ft,ot,Kt=[],Pt=Rt.trim();if(Pt==="")return Bw;if(Pt in hA)return[hA[Pt]];for(;Pt!=="";){switch(ot=null,Ft=(Pt=mA(Pt)).charAt(0)){case'"':case"'":ot=hX(Pt.substring(1),Ft);break;default:ot=pX(Pt)}if(ot===null||(Kt.push(ot[0]),(Pt=mA(ot[1]))!==""&&Pt.charAt(0)!==","))return Bw;Pt=Pt.replace(/^,/,"")}return Kt})(Ie);if(this.fontFaces){var Re=fX(ce(this.pdf,this.fontFaces),Me.map((function(Rt){return{family:Rt,stretch:"normal",weight:ye,style:pe}})));this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var He="";(ye==="bold"||parseInt(ye,10)>=700||pe==="bold")&&(He="bold"),pe==="italic"&&(He+="italic"),He.length===0&&(He="normal");for(var qe="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<Me.length;ft++){if(this.pdf.internal.getFont(Me[ft],He,{noFallback:!0,disableWarning:!0})!==void 0){qe=Me[ft];break}if(He==="bolditalic"&&this.pdf.internal.getFont(Me[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=Me[ft],He="bold";else if(this.pdf.internal.getFont(Me[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=Me[ft],He="normal";break}}if(qe===""){for(var St=0;St<Me.length;St++)if(ct[Me[St]]){qe=ct[Me[St]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,He)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,K){if(isNaN(L)||isNaN(K))throw Gn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new s(L,K));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new s(L,K)},f.prototype.closePath=function(){var L=new s(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&$n(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){L=new s(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(L.x,L.y)},f.prototype.lineTo=function(L,K){if(isNaN(L)||isNaN(K))throw Gn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new s(L,K));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new s(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,K,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(L)||isNaN(K))throw Gn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var V=this.ctx.transform.applyToPoint(new s(Y,Z)),ee=this.ctx.transform.applyToPoint(new s(L,K));this.path.push({type:"qct",x1:ee.x,y1:ee.y,x:V.x,y:V.y}),this.ctx.lastPoint=new s(V.x,V.y)},f.prototype.bezierCurveTo=function(L,K,Y,Z,V,ee){if(isNaN(V)||isNaN(ee)||isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z))throw Gn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var B=this.ctx.transform.applyToPoint(new s(V,ee)),F=this.ctx.transform.applyToPoint(new s(L,K)),X=this.ctx.transform.applyToPoint(new s(Y,Z));this.path.push({type:"bct",x1:F.x,y1:F.y,x2:X.x,y2:X.y,x:B.x,y:B.y}),this.ctx.lastPoint=new s(B.x,B.y)},f.prototype.arc=function(L,K,Y,Z,V,ee){if(isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z)||isNaN(V))throw Gn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ee=!!ee,!this.ctx.transform.isIdentity){var B=this.ctx.transform.applyToPoint(new s(L,K));L=B.x,K=B.y;var F=this.ctx.transform.applyToPoint(new s(0,Y)),X=this.ctx.transform.applyToPoint(new s(0,0));Y=Math.sqrt(Math.pow(F.x-X.x,2)+Math.pow(F.y-X.y,2))}Math.abs(V-Z)>=2*Math.PI&&(Z=0,V=2*Math.PI),this.path.push({type:"arc",x:L,y:K,radius:Y,startAngle:Z,endAngle:V,counterclockwise:ee})},f.prototype.arcTo=function(L,K,Y,Z,V){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,K,Y,Z){if(isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z))throw Gn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,K),this.lineTo(L+Y,K),this.lineTo(L+Y,K+Z),this.lineTo(L,K+Z),this.lineTo(L,K),this.lineTo(L+Y,K),this.lineTo(L,K)},f.prototype.fillRect=function(L,K,Y,Z){if(isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z))throw Gn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var V={};this.lineCap!=="butt"&&(V.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(V.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,K,Y,Z),this.fill(),V.hasOwnProperty("lineCap")&&(this.lineCap=V.lineCap),V.hasOwnProperty("lineJoin")&&(this.lineJoin=V.lineJoin)}},f.prototype.strokeRect=function(L,K,Y,Z){if(isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z))throw Gn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,K,Y,Z),this.stroke())},f.prototype.clearRect=function(L,K,Y,Z){if(isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z))throw Gn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,K,Y,Z))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(K),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var K,Y,Z,V;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))K=0,Y=0,Z=0,V=0;else{var ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(ee!==null)K=parseInt(ee[1]),Y=parseInt(ee[2]),Z=parseInt(ee[3]),V=1;else if((ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)K=parseInt(ee[1]),Y=parseInt(ee[2]),Z=parseInt(ee[3]),V=parseFloat(ee[4]);else{if(V=1,typeof L=="string"&&L.charAt(0)!=="#"){var B=new PD(L);L=B.ok?B.toHex():"#000000"}L.length===4?(K=L.substring(1,2),K+=K,Y=L.substring(2,3),Y+=Y,Z=L.substring(3,4),Z+=Z):(K=L.substring(1,3),Y=L.substring(3,5),Z=L.substring(5,7)),K=parseInt(K,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:K,g:Y,b:Z,a:V,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,K,Y,Z){if(isNaN(K)||isNaN(Y)||typeof L!="string")throw Gn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!p.call(this)){var V=k(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;D.call(this,{text:L,x:K,y:Y,scale:ee,angle:V,align:this.textAlign,maxWidth:Z})}},f.prototype.strokeText=function(L,K,Y,Z){if(isNaN(K)||isNaN(Y)||typeof L!="string")throw Gn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){Z=isNaN(Z)?void 0:Z;var V=k(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;D.call(this,{text:L,x:K,y:Y,scale:ee,renderingMode:"stroke",angle:V,align:this.textAlign,maxWidth:Z})}},f.prototype.measureText=function(L){if(typeof L!="string")throw Gn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Y=this.pdf.internal.scaleFactor,Z=K.internal.getFontSize(),V=K.getStringUnitWidth(L)*Z/K.internal.scaleFactor,ee=function(B){var F=(B=B||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return F}}),this};return new ee({width:V*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(L,K){if(isNaN(L)||isNaN(K))throw Gn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(L,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(L){if(isNaN(L))throw Gn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(L,K){if(isNaN(L)||isNaN(K))throw Gn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,L,K);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(L,K,Y,Z,V,ee){if(isNaN(L)||isNaN(K)||isNaN(Y)||isNaN(Z)||isNaN(V)||isNaN(ee))throw Gn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var B=new l(L,K,Y,Z,V,ee);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.setTransform=function(L,K,Y,Z,V,ee){L=isNaN(L)?1:L,K=isNaN(K)?0:K,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,V=isNaN(V)?0:V,ee=isNaN(ee)?0:ee,this.ctx.transform=new l(L,K,Y,Z,V,ee)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,K,Y,Z,V,ee,B,F,X){var te=this.pdf.getImageProperties(L),se=1,ce=1,ue=1,oe=1;Z!==void 0&&F!==void 0&&(ue=F/Z,oe=X/V,se=te.width/Z*F/Z,ce=te.height/V*X/V),ee===void 0&&(ee=K,B=Y,K=0,Y=0),Z!==void 0&&F===void 0&&(F=Z,X=V),Z===void 0&&F===void 0&&(F=te.width,X=te.height);for(var le,pe=this.ctx.transform.decompose(),ye=k(pe.rotate.shx),be=new l,Ie=(be=(be=(be=be.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale)).applyToRectangle(new o(ee-K*ue,B-Y*oe,Z*se,V*ce)),Oe=m.call(this,Ie),Me=[],Re=0;Re<Oe.length;Re+=1)Me.indexOf(Oe[Re])===-1&&Me.push(Oe[Re]);if(x(Me),this.autoPaging)for(var He=Me[0],qe=Me[Me.length-1],ct=He;ct<qe+1;ct++){this.pdf.setPage(ct);var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=ct===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=ct===1?0:Rt+(ct-2)*Ft;if(this.ctx.clip_path.length!==0){var Kt=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(le,this.posX+this.margin[3],-ot+St+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=Kt}var Pt=JSON.parse(JSON.stringify(Ie));Pt=b([Pt],this.posX+this.margin[3],-ot+St+this.ctx.prevPageLastElemOffset)[0];var Ee=(ct>He||ct<qe)&&y.call(this);Ee&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Ft,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,ye),Ee&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,ye)};var m=function(L,K,Y){var Z=[];K=K||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var V=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":Z.push(Math.floor((L.y+V)/Y)+1);break;case"arc":Z.push(Math.floor((L.y+V-L.radius)/Y)+1),Z.push(Math.floor((L.y+V+L.radius)/Y)+1);break;case"qct":var ee=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);Z.push(Math.floor((ee.y+V)/Y)+1),Z.push(Math.floor((ee.y+ee.h+V)/Y)+1);break;case"bct":var B=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);Z.push(Math.floor((B.y+V)/Y)+1),Z.push(Math.floor((B.y+B.h+V)/Y)+1);break;case"rect":Z.push(Math.floor((L.y+V)/Y)+1),Z.push(Math.floor((L.y+L.h+V)/Y)+1)}for(var F=0;F<Z.length;F+=1)for(;this.pdf.internal.getNumberOfPages()<Z[F];)v.call(this);return Z},v=function(){var L=this.fillStyle,K=this.strokeStyle,Y=this.font,Z=this.lineCap,V=this.lineWidth,ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=K,this.font=Y,this.lineCap=Z,this.lineWidth=V,this.lineJoin=ee},b=function(L,K,Y){for(var Z=0;Z<L.length;Z++)switch(L[Z].type){case"bct":L[Z].x2+=K,L[Z].y2+=Y;case"qct":L[Z].x1+=K,L[Z].y1+=Y;case"mt":case"lt":case"arc":default:L[Z].x+=K,L[Z].y+=Y}return L},x=function(L){return L.sort((function(K,Y){return K-Y}))},S=function(L,K){for(var Y,Z,V=this.fillStyle,ee=this.strokeStyle,B=this.lineCap,F=this.lineWidth,X=Math.abs(F*this.ctx.transform.scaleX),te=this.lineJoin,se=JSON.parse(JSON.stringify(this.path)),ce=JSON.parse(JSON.stringify(this.path)),ue=[],oe=0;oe<ce.length;oe++)if(ce[oe].x!==void 0)for(var le=m.call(this,ce[oe]),pe=0;pe<le.length;pe+=1)ue.indexOf(le[pe])===-1&&ue.push(le[pe]);for(var ye=0;ye<ue.length;ye++)for(;this.pdf.internal.getNumberOfPages()<ue[ye];)v.call(this);if(x(ue),this.autoPaging)for(var be=ue[0],Ie=ue[ue.length-1],Oe=be;Oe<Ie+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=V,this.strokeStyle=ee,this.lineCap=B,this.lineWidth=X,this.lineJoin=te;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=Oe===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Oe===1?0:He+(Oe-2)*qe;if(this.ctx.clip_path.length!==0){var ft=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Y,this.posX+this.margin[3],-ct+Re+this.ctx.prevPageLastElemOffset),_.call(this,L,!0),this.path=ft}if(Z=JSON.parse(JSON.stringify(se)),this.path=b(Z,this.posX+this.margin[3],-ct+Re+this.ctx.prevPageLastElemOffset),K===!1||Oe===0){var St=(Oe>be||Oe<Ie)&&y.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,qe,null).clip().discardPath()),_.call(this,L,K),St&&this.pdf.restoreGraphicsState()}this.lineWidth=F}else this.lineWidth=X,_.call(this,L,K),this.lineWidth=F;this.path=se},_=function(L,K){if((L!=="stroke"||K||!g.call(this))&&(L==="stroke"||K||!p.call(this))){for(var Y,Z,V=[],ee=this.path,B=0;B<ee.length;B++){var F=ee[B];switch(F.type){case"begin":V.push({begin:!0});break;case"close":V.push({close:!0});break;case"mt":V.push({start:F,deltas:[],abs:[]});break;case"lt":var X=V.length;if(ee[B-1]&&!isNaN(ee[B-1].x)&&(Y=[F.x-ee[B-1].x,F.y-ee[B-1].y],X>0)){for(;X>=0;X--)if(V[X-1].close!==!0&&V[X-1].begin!==!0){V[X-1].deltas.push(Y),V[X-1].abs.push(F);break}}break;case"bct":Y=[F.x1-ee[B-1].x,F.y1-ee[B-1].y,F.x2-ee[B-1].x,F.y2-ee[B-1].y,F.x-ee[B-1].x,F.y-ee[B-1].y],V[V.length-1].deltas.push(Y);break;case"qct":var te=ee[B-1].x+2/3*(F.x1-ee[B-1].x),se=ee[B-1].y+2/3*(F.y1-ee[B-1].y),ce=F.x+2/3*(F.x1-F.x),ue=F.y+2/3*(F.y1-F.y),oe=F.x,le=F.y;Y=[te-ee[B-1].x,se-ee[B-1].y,ce-ee[B-1].x,ue-ee[B-1].y,oe-ee[B-1].x,le-ee[B-1].y],V[V.length-1].deltas.push(Y);break;case"arc":V.push({deltas:[],abs:[],arc:!0}),Array.isArray(V[V.length-1].abs)&&V[V.length-1].abs.push(F)}}Z=K?null:L==="stroke"?"stroke":"fill";for(var pe=!1,ye=0;ye<V.length;ye++)if(V[ye].arc)for(var be=V[ye].abs,Ie=0;Ie<be.length;Ie++){var Oe=be[Ie];Oe.type==="arc"?O.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,K,!pe):T.call(this,Oe.x,Oe.y),pe=!0}else if(V[ye].close===!0)this.pdf.internal.out("h"),pe=!1;else if(V[ye].begin!==!0){var Me=V[ye].start.x,Re=V[ye].start.y;R.call(this,V[ye].deltas,Me,Re),pe=!0}Z&&M.call(this,Z),K&&z.call(this)}},I=function(L){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-Y;case"top":return L+K-Y;case"hanging":return L+K-2*Y;case"middle":return L+K/2-Y;case"ideographic":return L;case"alphabetic":default:return L}},A=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(K,Y){this.colorStops.push([K,Y])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(L,K,Y,Z,V,ee,B,F,X){for(var te=N.call(this,Y,Z,V,ee),se=0;se<te.length;se++){var ce=te[se];se===0&&(X?U.call(this,ce.x1+L,ce.y1+K):T.call(this,ce.x1+L,ce.y1+K)),C.call(this,L,K,ce.x2,ce.y2,ce.x3,ce.y3,ce.x4,ce.y4)}F?z.call(this):M.call(this,B)},M=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(L,K){this.pdf.internal.out(e(L)+" "+n(K)+" m")},D=function(L){var K;switch(L.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var Y=this.pdf.getTextDimensions(L.text),Z=I.call(this,L.y),V=A.call(this,Z)-Y.h,ee=this.ctx.transform.applyToPoint(new s(L.x,Z)),B=this.ctx.transform.decompose(),F=new l;F=(F=(F=F.multiply(B.translate)).multiply(B.skew)).multiply(B.scale);for(var X,te,se,ce=this.ctx.transform.applyToRectangle(new o(L.x,Z,Y.w,Y.h)),ue=F.applyToRectangle(new o(L.x,V,Y.w,Y.h)),oe=m.call(this,ue),le=[],pe=0;pe<oe.length;pe+=1)le.indexOf(oe[pe])===-1&&le.push(oe[pe]);if(x(le),this.autoPaging)for(var ye=le[0],be=le[le.length-1],Ie=ye;Ie<be+1;Ie++){this.pdf.setPage(Ie);var Oe=Ie===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],He=Re-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],ct=qe-this.margin[3],ft=Ie===1?0:Me+(Ie-2)*He;if(this.ctx.clip_path.length!==0){var St=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(X,this.posX+this.margin[3],-1*ft+Oe),_.call(this,"fill",!0),this.path=St}var Rt=b([JSON.parse(JSON.stringify(ue))],this.posX+this.margin[3],-ft+Oe+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*L.scale),se=this.lineWidth,this.lineWidth=se*L.scale);var Ft=this.autoPaging!=="text";if(Ft||Rt.y+Rt.h<=Re){if(Ft||Rt.y>=Oe&&Rt.x<=qe){var ot=Ft?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||qe-Rt.x)[0],Kt=b([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-ft+Oe+this.ctx.prevPageLastElemOffset)[0],Pt=Ft&&(Ie>ye||Ie<be)&&y.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,He,null).clip().discardPath()),this.pdf.text(ot,Kt.x,Kt.y,{angle:L.angle,align:K,renderingMode:L.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else Rt.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-Rt.y);L.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=se)}else L.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*L.scale),se=this.lineWidth,this.lineWidth=se*L.scale),this.pdf.text(L.text,ee.x+this.posX,ee.y+this.posY,{angle:L.angle,align:K,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=se)},T=function(L,K,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(e(L+Y)+" "+n(K+Z)+" l")},R=function(L,K,Y){return this.pdf.lines(L,K,Y,null,null)},C=function(L,K,Y,Z,V,ee,B,F){this.pdf.internal.out([t(a(Y+L)),t(i(Z+K)),t(a(V+L)),t(i(ee+K)),t(a(B+L)),t(i(F+K)),"c"].join(" "))},N=function(L,K,Y,Z){for(var V=2*Math.PI,ee=Math.PI/2;K>Y;)K-=V;var B=Math.abs(Y-K);B<V&&Z&&(B=V-B);for(var F=[],X=Z?-1:1,te=K;B>1e-5;){var se=te+X*Math.min(B,ee);F.push(E.call(this,L,te,se)),B-=Math.abs(se-te),te=se}return F},E=function(L,K,Y){var Z=(Y-K)/2,V=L*Math.cos(Z),ee=L*Math.sin(Z),B=V,F=-ee,X=B*B+F*F,te=X+B*V+F*ee,se=4/3*(Math.sqrt(2*X*te)-te)/(B*ee-F*V),ce=B-se*F,ue=F+se*B,oe=ce,le=-ue,pe=Z+K,ye=Math.cos(pe),be=Math.sin(pe);return{x1:L*Math.cos(K),y1:L*Math.sin(K),x2:ce*ye-ue*be,y2:ce*be+ue*ye,x3:oe*ye-le*be,y3:oe*be+le*ye,x4:L*Math.cos(Y),y4:L*Math.sin(Y)}},k=function(L){return 180*L/Math.PI},P=function(L,K,Y,Z,V,ee){var B=L+.5*(Y-L),F=K+.5*(Z-K),X=V+.5*(Y-V),te=ee+.5*(Z-ee),se=Math.min(L,V,B,X),ce=Math.max(L,V,B,X),ue=Math.min(K,ee,F,te),oe=Math.max(K,ee,F,te);return new o(se,ue,ce-se,oe-ue)},q=function(L,K,Y,Z,V,ee,B,F){var X,te,se,ce,ue,oe,le,pe,ye,be,Ie,Oe,Me,Re,He=Y-L,qe=Z-K,ct=V-Y,ft=ee-Z,St=B-V,Rt=F-ee;for(te=0;te<41;te++)ye=(le=(se=L+(X=te/40)*He)+X*((ue=Y+X*ct)-se))+X*(ue+X*(V+X*St-ue)-le),be=(pe=(ce=K+X*qe)+X*((oe=Z+X*ft)-ce))+X*(oe+X*(ee+X*Rt-oe)-pe),te==0?(Ie=ye,Oe=be,Me=ye,Re=be):(Ie=Math.min(Ie,ye),Oe=Math.min(Oe,be),Me=Math.max(Me,ye),Re=Math.max(Re,be));return new o(Math.round(Ie),Math.round(Oe),Math.round(Me-Ie),Math.round(Re-Oe))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,K,Y=(L=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:K}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Fr.API),(function(r){var t=function(i){var s,o,l,c,u,f,h,p,g,y;for(o=[],l=0,c=(i+=s="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(f=(u=((u=((u=((u=(u-(y=u%85))/85)-(g=u%85))/85)-(p=u%85))/85)-(h=u%85))/85)%85,o.push(f+33,h+33,p+33,g+33,y+33)):o.push(122);return(function(m,v){for(var b=v;b>0;b--)m.pop()})(o,s.length),String.fromCharCode.apply(String,o)+"~>"},e=function(i){var s,o,l,c,u,f=String,h="length",p=255,g="charCodeAt",y="slice",m="replace";for(i[y](-2),i=i[y](0,-2)[m](/\s/g,"")[m]("z","!!!!!"),l=[],c=0,u=(i+=s="uuuuu"[y](i[h]%5||5))[h];u>c;c+=5)o=52200625*(i[g](c)-33)+614125*(i[g](c+1)-33)+7225*(i[g](c+2)-33)+85*(i[g](c+3)-33)+(i[g](c+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return(function(v,b){for(var x=b;x>0;x--)v.pop()})(l,s[h]),f.fromCharCode.apply(f,l)},n=function(i){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),s.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},a=function(i){for(var s=new Uint8Array(i.length),o=i.length;o--;)s[o]=i.charCodeAt(o);return i=(s=c6(s)).reduce((function(l,c){return l+String.fromCharCode(c)}),"")};r.processDataByFilters=function(i,s){var o=0,l=i||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map((function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(Fr.API),(function(r){r.loadFile=function(t,e,n){return(function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=(function(l,c,u){var f=new XMLHttpRequest,h=0,p=function(g){var y=g.length,m=[],v=String.fromCharCode;for(h=0;h<y;h+=1)m.push(v(255&g.charCodeAt(h)));return m.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?u(p(this.responseText)):u(void 0)}),f.send(null),c&&f.status===200)return p(f.responseText)})(a,i,s)}catch{}return o})(t,e,n)},r.loadImageFile=r.loadFile})(Fr.API),(function(r){function t(){return(qr.html2canvas?Promise.resolve(qr.html2canvas):yo(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))})).then((function(s){return s.default?s.default:s}))}function e(){return(qr.DOMPurify?Promise.resolve(qr.DOMPurify):yo(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load dompurify: "+s))})).then((function(s){return s.default?s.default:s}))}var n=function(s){var o=$n(s);return o==="undefined"?"undefined":o==="string"||s instanceof String?"string":o==="number"||s instanceof Number?"number":o==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(s,o){var l=document.createElement(s);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},i=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(s,o){return s.__proto__=o||i.prototype,s},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(s,o){return this.then((function(){switch(o=o||(function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(s)){case"string":return this.then(e).then((function(l){return this.set({src:a("div",{innerHTML:s,dompurify:l})})}));case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=(function l(c,u){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",(function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft}),!0)),f})(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then((function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)})).then((function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then((function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var p=c[h],g=p.src.find((function(y){return y.format==="truetype"}));g&&l.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)})).then((function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(s,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,o):this.outputPdf(s,o)},i.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(s,o)}))},i.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}}))},i.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(s){if(n(s)!=="object")return this;var o=Object.keys(s||{}).map((function(l){if(l in i.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}}),this);return this.then((function(){return this.thenList(o)}))},i.prototype.get=function(s,o){return this.then((function(){var l=s in i.template.prop?this.prop[s]:this.opt[s];return o?o(l):l}))},i.prototype.setMargin=function(s){return this.then((function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s})).then(this.setPageSize)},i.prototype.setPageSize=function(s){function o(l,c){return Math.floor(l*c/72*96)}return this.then((function(){(s=s||Fr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s}))},i.prototype.setProgress=function(s,o,l,c){return s!=null&&(this.progress.val=s),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(s,o,l,c){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,(function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,(function(f){return l.updateProgress(null,c),f})).then(c,u).then((function(f){return l.updateProgress(1),f}))}))},i.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,s,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},i.prototype.thenList=function(s){var o=this;return s.forEach((function(l){o=o.thenCore(l)})),o},i.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return i.convert(o,this)},i.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},i.prototype.error=function(s){return this.then((function(){throw new Error(s)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Fr.getPageSize=function(s,o,l){if($n(s)==="object"){var c=s;s=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var u,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,g=0,y=0;if(h.hasOwnProperty(f))g=h[f][1]/u,y=h[f][0]/u;else try{g=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",y>g&&(p=y,y=g,g=p);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",g>y&&(p=y,y=g,g=p)}return{width:y,height:g,unit:o,k:u,orientation:s}},r.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(m6):null;var l=new i(o);return o.worker?l:l.from(s).doCallback()}})(Fr.API),Fr.API.addJS=function(r){return yA=r,this.internal.events.subscribe("postPutResources",(function(){V1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(V1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+yA+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){V1!==void 0&&gA!==void 0&&this.internal.out("/Names <</JavaScript "+V1+" 0 R>>")})),this},(function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=e.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],o=n.exec(s);if(o!=null){var l=o[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var f=e.internal.newObject();u.push(f);var h=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<u.length;i++)e.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=e.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(Fr.API),(function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,a,i,s,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=(function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,y={width:0,height:0,numcomponents:1},m=4;m<g;m+=2){if(m+=p,t.indexOf(f.charCodeAt(m+1))!==-1){h=256*f.charCodeAt(m+5)+f.charCodeAt(m+6),y={width:256*f.charCodeAt(m+7)+f.charCodeAt(m+8),height:h,numcomponents:f.charCodeAt(m+9)};break}p=256*f.charCodeAt(m+2)+f.charCodeAt(m+3)}return y})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:e,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:a}}return u}})(Fr.API);var O0,G1,vA,bA,xA,mX=(function(){var r,t,e;function n(i){var s,o,l,c,u,f,h,p,g,y,m,v,b,x;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(s=this.readUInt32(),g=(function(){var S,_;for(_=[],S=0;S<4;++S)_.push(String.fromCharCode(this.data[this.pos++]));return _}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*u/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,s-=4),i=(f!=null?f.data:void 0)||this.imgData,v=0;0<=s?v<s:v>s;0<=s?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(b=0;0<=y?b<y:b>y;0<=y?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":h=(m=this.read(s)).indexOf(0),p=String.fromCharCode.apply(String,m.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,m.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var s,o;for(o=[],s=0;0<=i?s<i:s>i;0<=i?++s:--s)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,h,p,g){var y,m,v,b,x,S,_,I,A,O,M,z,U,D,T,R,C,N,E,k,P,q=Math.ceil((c.width-f)/p),H=Math.ceil((c.height-h)/g),L=c.width==q&&c.height==H;for(D=s*q,z=L?o:new Uint8Array(D*H),S=i.length,U=0,m=0;U<H&&l<S;){switch(i[l++]){case 0:for(b=C=0;C<D;b=C+=1)z[m++]=i[l++];break;case 1:for(b=N=0;N<D;b=N+=1)y=i[l++],x=b<s?0:z[m-s],z[m++]=(y+x)%256;break;case 2:for(b=E=0;E<D;b=E+=1)y=i[l++],v=(b-b%s)/s,T=U&&z[(U-1)*D+v*s+b%s],z[m++]=(T+y)%256;break;case 3:for(b=k=0;k<D;b=k+=1)y=i[l++],v=(b-b%s)/s,x=b<s?0:z[m-s],T=U&&z[(U-1)*D+v*s+b%s],z[m++]=(y+Math.floor((x+T)/2))%256;break;case 4:for(b=P=0;P<D;b=P+=1)y=i[l++],v=(b-b%s)/s,x=b<s?0:z[m-s],U===0?T=R=0:(T=z[(U-1)*D+v*s+b%s],R=v&&z[(U-1)*D+(v-1)*s+b%s]),_=x+T-R,I=Math.abs(_-x),O=Math.abs(_-T),M=Math.abs(_-R),A=I<=O&&I<=M?x:O<=M?T:R,z[m++]=(y+A)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!L){var K=((h+U*g)*c.width+f)*s,Y=U*D;for(b=0;b<q;b+=1){for(var Z=0;Z<s;Z+=1)o[K++]=z[Y++];K+=(p-1)*s}}U++}}return i=GK(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},n.prototype.decodePalette=function(){var i,s,o,l,c,u,f,h,p;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,i=0,s=f=0,h=o.length;f<h;s=f+=3)c[l++]=o[s],c[l++]=o[s+1],c[l++]=o[s+2],c[l++]=(p=u[i++])!=null?p:255;return c},n.prototype.copyToImageData=function(i,s){var o,l,c,u,f,h,p,g,y,m,v;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(c=i.data||i).length,f=y||s,u=h=0,l===1)for(;u<g;)p=y?4*s[u/4]:h,m=f[p++],c[u++]=m,c[u++]=m,c[u++]=m,c[u++]=o?f[p++]:255,h=p;else for(;u<g;)p=y?4*s[u/4]:h,c[u++]=f[p++],c[u++]=f[p++],c[u++]=f[p++],c[u++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(qr)==="[object Window]"){try{t=qr.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),r=function(i){var s;if(a()===!0)return e.width=i.width,e.height=i.height,e.clearRect(0,0,i.width,i.height),e.putImageData(i,0,0),(s=new Image).src=t.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var s,o,l,c,u,f,h,p;if(this.animation){for(p=[],o=u=0,f=(h=this.animation.frames).length;u<f;o=++u)s=h[o],l=i.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,p.push(s.image=r(l));return p}},n.prototype.renderFrame=function(i,s){var o,l,c;return o=(l=this.animation.frames)[s],c=l[s-1],s===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var s,o,l,c,u,f,h=this;return o=0,f=this.animation,c=f.numFrames,l=f.frames,u=f.numPlays,(s=function(){var p,g;if(p=o++%c,g=l[p],h.renderFrame(i,p),c>1&&o/c<u)return h.animation._timeout=setTimeout(s,g.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var s,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,s=i.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},n})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function gX(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,a=r[t++],i=a>>7,s=1<<(7&a)+1;r[t++],r[t++];var o=null,l=null;i&&(o=t,l=s,t+=3*s);var c=!0,u=[],f=0,h=null,p=0,g=null;for(this.width=e,this.height=n;c&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,g=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((U=r[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=r[t++];f=r[t++]|r[t++]<<8,h=r[t++],(1&y)==0&&(h=null),p=y>>2&7,t++;break;case 254:for(;;){if(!((U=r[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var m=r[t++]|r[t++]<<8,v=r[t++]|r[t++]<<8,b=r[t++]|r[t++]<<8,x=r[t++]|r[t++]<<8,S=r[t++],_=S>>6&1,I=1<<(7&S)+1,A=o,O=l,M=!1;S>>7&&(M=!0,A=t,O=I,t+=3*I);var z=t;for(t++;;){var U;if(!((U=r[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}u.push({x:m,y:v,width:b,height:x,has_local_palette:M,palette_offset:A,palette_size:O,data_offset:z,data_length:t-z,transparent_index:h,interlaced:!!_,delay:f,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(D){if(D<0||D>=u.length)throw new Error("Frame index out of range.");return u[D]},this.decodeAndBlitFrameBGRA=function(D,T){var R=this.frameInfo(D),C=R.width*R.height,N=new Uint8Array(C);wA(r,R.data_offset,N,C);var E=R.palette_offset,k=R.transparent_index;k===null&&(k=256);var P=R.width,q=e-P,H=P,L=4*(R.y*e+R.x),K=4*((R.y+R.height)*e+R.x),Y=L,Z=4*q;R.interlaced===!0&&(Z+=4*e*7);for(var V=8,ee=0,B=N.length;ee<B;++ee){var F=N[ee];if(H===0&&(H=P,(Y+=Z)>=K&&(Z=4*q+4*e*(V-1),Y=L+(P+q)*(V<<1),V>>=1)),F===k)Y+=4;else{var X=r[E+3*F],te=r[E+3*F+1],se=r[E+3*F+2];T[Y++]=se,T[Y++]=te,T[Y++]=X,T[Y++]=255}--H}},this.decodeAndBlitFrameRGBA=function(D,T){var R=this.frameInfo(D),C=R.width*R.height,N=new Uint8Array(C);wA(r,R.data_offset,N,C);var E=R.palette_offset,k=R.transparent_index;k===null&&(k=256);var P=R.width,q=e-P,H=P,L=4*(R.y*e+R.x),K=4*((R.y+R.height)*e+R.x),Y=L,Z=4*q;R.interlaced===!0&&(Z+=4*e*7);for(var V=8,ee=0,B=N.length;ee<B;++ee){var F=N[ee];if(H===0&&(H=P,(Y+=Z)>=K&&(Z=4*q+4*e*(V-1),Y=L+(P+q)*(V<<1),V>>=1)),F===k)Y+=4;else{var X=r[E+3*F],te=r[E+3*F+1],se=r[E+3*F+2];T[Y++]=X,T[Y++]=te,T[Y++]=se,T[Y++]=255}--H}}}function wA(r,t,e,n){for(var a=r[t++],i=1<<a,s=i+1,o=s+1,l=a+1,c=(1<<l)-1,u=0,f=0,h=0,p=r[t++],g=new Int32Array(4096),y=null;;){for(;u<16&&p!==0;)f|=r[t++]<<u,u+=8,p===1?p=r[t++]:--p;if(u<l)break;var m=f&c;if(f>>=l,u-=l,m!==i){if(m===s)break;for(var v=m<o?m:y,b=0,x=v;x>i;)x=g[x]>>8,++b;var S=x;if(h+b+(v!==m?1:0)>n)return void Gn.log("Warning, gif stream longer than expected.");e[h++]=S;var _=h+=b;for(v!==m&&(e[h++]=S),x=v;b--;)x=g[x],e[--_]=255&x,x>>=8;y!==null&&o<4096&&(g[o++]=y<<8|S,o>=c+1&&l<12&&(++l,c=c<<1|1)),y=m}else o=s+1,c=(1<<(l=a+1))-1,y=null}return h!==n&&Gn.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $w(r){var t,e,n,a,i,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),y=[],m=0,v=7,b=new Array(64),x=new Array(64),S=new Array(64),_=new Array(256),I=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function N(L,K){for(var Y=0,Z=0,V=new Array,ee=1;ee<=16;ee++){for(var B=1;B<=L[ee];B++)V[K[Z]]=[],V[K[Z]][0]=Y,V[K[Z]][1]=ee,Z++,Y++;Y*=2}return V}function E(L){for(var K=L[0],Y=L[1]-1;Y>=0;)K&1<<Y&&(m|=1<<v),Y--,--v<0&&(m==255?(k(255),k(0)):k(m),v=7,m=0)}function k(L){y.push(L)}function P(L){k(L>>8&255),k(255&L)}function q(L,K,Y,Z,V){for(var ee,B=V[0],F=V[240],X=(function(be,Ie){var Oe,Me,Re,He,qe,ct,ft,St,Rt,Ft,ot=0;for(Rt=0;Rt<8;++Rt){Oe=be[ot],Me=be[ot+1],Re=be[ot+2],He=be[ot+3],qe=be[ot+4],ct=be[ot+5],ft=be[ot+6];var Kt=Oe+(St=be[ot+7]),Pt=Oe-St,Ee=Me+ft,We=Me-ft,ut=Re+ct,wt=Re-ct,Bt=He+qe,dr=He-qe,Xt=Kt+Bt,pr=Kt-Bt,vr=Ee+ut,rr=Ee-ut;be[ot]=Xt+vr,be[ot+4]=Xt-vr;var Zt=.707106781*(rr+pr);be[ot+2]=pr+Zt,be[ot+6]=pr-Zt;var lr=.382683433*((Xt=dr+wt)-(rr=We+Pt)),fr=.5411961*Xt+lr,xr=1.306562965*rr+lr,Ue=.707106781*(vr=wt+We),et=Pt+Ue,ht=Pt-Ue;be[ot+5]=ht+fr,be[ot+3]=ht-fr,be[ot+1]=et+xr,be[ot+7]=et-xr,ot+=8}for(ot=0,Rt=0;Rt<8;++Rt){Oe=be[ot],Me=be[ot+8],Re=be[ot+16],He=be[ot+24],qe=be[ot+32],ct=be[ot+40],ft=be[ot+48];var kt=Oe+(St=be[ot+56]),Wt=Oe-St,Be=Me+ft,Ve=Me-ft,pt=Re+ct,he=Re-ct,xe=He+qe,me=He-qe,Se=kt+xe,ke=kt-xe,Te=Be+pt,Ge=Be-pt;be[ot]=Se+Te,be[ot+32]=Se-Te;var nt=.707106781*(Ge+ke);be[ot+16]=ke+nt,be[ot+48]=ke-nt;var Ke=.382683433*((Se=me+he)-(Ge=Ve+Wt)),it=.5411961*Se+Ke,st=1.306562965*Ge+Ke,Mt=.707106781*(Te=he+Ve),$t=Wt+Mt,er=Wt-Mt;be[ot+40]=er+it,be[ot+24]=er-it,be[ot+8]=$t+st,be[ot+56]=$t-st,ot++}for(Rt=0;Rt<64;++Rt)Ft=be[Rt]*Ie[Rt],p[Rt]=Ft>0?Ft+.5|0:Ft-.5|0;return p})(L,K),te=0;te<64;++te)g[A[te]]=X[te];var se=g[0]-Y;Y=g[0],se==0?E(Z[0]):(E(Z[h[ee=32767+se]]),E(f[ee]));for(var ce=63;ce>0&&g[ce]==0;)ce--;if(ce==0)return E(B),Y;for(var ue,oe=1;oe<=ce;){for(var le=oe;g[oe]==0&&oe<=ce;)++oe;var pe=oe-le;if(pe>=16){ue=pe>>4;for(var ye=1;ye<=ue;++ye)E(F);pe&=15}ee=32767+g[oe],E(V[(pe<<4)+h[ee]]),E(f[ee]),oe++}return ce!=63&&E(B),Y}function H(L){L=Math.min(Math.max(L,1),100),i!=L&&((function(K){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var V=s((Y[Z]*K+50)/100);V=Math.min(Math.max(V,1),255),o[A[Z]]=V}for(var ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],B=0;B<64;B++){var F=s((ee[B]*K+50)/100);F=Math.min(Math.max(F,1),255),l[A[B]]=F}for(var X=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],te=0,se=0;se<8;se++)for(var ce=0;ce<8;ce++)c[te]=1/(o[A[te]]*X[se]*X[ce]*8),u[te]=1/(l[A[te]]*X[se]*X[ce]*8),te++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,K){K&&H(K),y=new Array,m=0,v=7,P(65496),P(65504),P(16),k(74),k(70),k(73),k(70),k(0),k(1),k(1),k(0),P(1),P(1),k(0),k(0),(function(){P(65499),P(132),k(0);for(var Me=0;Me<64;Me++)k(o[Me]);k(1);for(var Re=0;Re<64;Re++)k(l[Re])})(),(function(Me,Re){P(65472),P(17),k(8),P(Re),P(Me),k(3),k(1),k(17),k(0),k(2),k(17),k(1),k(3),k(17),k(1)})(L.width,L.height),(function(){P(65476),P(418),k(0);for(var Me=0;Me<16;Me++)k(O[Me+1]);for(var Re=0;Re<=11;Re++)k(M[Re]);k(16);for(var He=0;He<16;He++)k(z[He+1]);for(var qe=0;qe<=161;qe++)k(U[qe]);k(1);for(var ct=0;ct<16;ct++)k(D[ct+1]);for(var ft=0;ft<=11;ft++)k(T[ft]);k(17);for(var St=0;St<16;St++)k(R[St+1]);for(var Rt=0;Rt<=161;Rt++)k(C[Rt])})(),P(65498),P(12),k(3),k(1),k(0),k(2),k(17),k(3),k(17),k(0),k(63),k(0);var Y=0,Z=0,V=0;m=0,v=7,this.encode.displayName="_encode_";for(var ee,B,F,X,te,se,ce,ue,oe,le=L.data,pe=L.width,ye=L.height,be=4*pe,Ie=0;Ie<ye;){for(ee=0;ee<be;){for(te=be*Ie+ee,ce=-1,ue=0,oe=0;oe<64;oe++)se=te+(ue=oe>>3)*be+(ce=4*(7&oe)),Ie+ue>=ye&&(se-=be*(Ie+1+ue-ye)),ee+ce>=be&&(se-=ee+ce-be+4),B=le[se++],F=le[se++],X=le[se++],b[oe]=(I[B]+I[F+256>>0]+I[X+512>>0]>>16)-128,x[oe]=(I[B+768>>0]+I[F+1024>>0]+I[X+1280>>0]>>16)-128,S[oe]=(I[B+1280>>0]+I[F+1536>>0]+I[X+1792>>0]>>16)-128;Y=q(b,c,Y,t,n),Z=q(x,u,Z,e,a),V=q(S,u,V,e,a),ee+=32}Ie+=8}if(v>=0){var Oe=[];Oe[1]=v+1,Oe[0]=(1<<v+1)-1,E(Oe)}return P(65497),new Uint8Array(y)},r=r||50,(function(){for(var L=String.fromCharCode,K=0;K<256;K++)_[K]=L(K)})(),t=N(O,M),e=N(D,T),n=N(z,U),a=N(R,C),(function(){for(var L=1,K=2,Y=1;Y<=15;Y++){for(var Z=L;Z<K;Z++)h[32767+Z]=Y,f[32767+Z]=[],f[32767+Z][1]=Y,f[32767+Z][0]=Z;for(var V=-(K-1);V<=-L;V++)h[32767+V]=Y,f[32767+V]=[],f[32767+V][1]=Y,f[32767+V][0]=K-1+V;L<<=1,K<<=1}})(),(function(){for(var L=0;L<256;L++)I[L]=19595*L,I[L+256>>0]=38470*L,I[L+512>>0]=7471*L+32768,I[L+768>>0]=-11059*L,I[L+1024>>0]=-21709*L,I[L+1280>>0]=32768*L+8421375,I[L+1536>>0]=-27439*L,I[L+1792>>0]=-5329*L})(),H(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wl(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _A(r){function t(O){if(!O)throw Error("assert :P")}function e(O,M,z){for(var U=0;4>U;U++)if(O[M+U]!=z.charCodeAt(U))return!0;return!1}function n(O,M,z,U,D){for(var T=0;T<D;T++)O[M+T]=z[U+T]}function a(O,M,z,U){for(var D=0;D<U;D++)O[M+D]=z}function i(O){return new Int32Array(O)}function s(O,M){for(var z=[],U=0;U<O;U++)z.push(new M);return z}function o(O,M){var z=[];return(function U(D,T,R){for(var C=R[T],N=0;N<C&&(D.push(R.length>T+1?[]:new M),!(R.length<T+1));N++)U(D[N],T+1,R)})(z,0,O),z}var l=function(){var O=this;function M(G,Q){for(var ae=1<<Q-1>>>0;G&ae;)ae>>>=1;return ae?(G&ae-1)+ae:G}function z(G,Q,ae,fe,ge){t(!(fe%ae));do G[Q+(fe-=ae)]=ge;while(0<fe)}function U(G,Q,ae,fe,ge){if(t(2328>=ge),512>=ge)var we=i(512);else if((we=i(ge))==null)return 0;return(function(Ne,Ae,Pe,Fe,Ye,gt){var yt,dt,Lt=Ae,jt=1<<Pe,tt=i(16),rt=i(16);for(t(Ye!=0),t(Fe!=null),t(Ne!=null),t(0<Pe),dt=0;dt<Ye;++dt){if(15<Fe[dt])return 0;++tt[Fe[dt]]}if(tt[0]==Ye)return 0;for(rt[1]=0,yt=1;15>yt;++yt){if(tt[yt]>1<<yt)return 0;rt[yt+1]=rt[yt]+tt[yt]}for(dt=0;dt<Ye;++dt)yt=Fe[dt],0<Fe[dt]&&(gt[rt[yt]++]=dt);if(rt[15]==1)return(Fe=new D).g=0,Fe.value=gt[0],z(Ne,Lt,1,jt,Fe),jt;var Ct,Tt=-1,Ot=jt-1,ur=0,sr=1,Or=1,or=1<<Pe;for(dt=0,yt=1,Ye=2;yt<=Pe;++yt,Ye<<=1){if(sr+=Or<<=1,0>(Or-=tt[yt]))return 0;for(;0<tt[yt];--tt[yt])(Fe=new D).g=yt,Fe.value=gt[dt++],z(Ne,Lt+ur,Ye,or,Fe),ur=M(ur,yt)}for(yt=Pe+1,Ye=2;15>=yt;++yt,Ye<<=1){if(sr+=Or<<=1,0>(Or-=tt[yt]))return 0;for(;0<tt[yt];--tt[yt]){if(Fe=new D,(ur&Ot)!=Tt){for(Lt+=or,Ct=1<<(Tt=yt)-Pe;15>Tt&&!(0>=(Ct-=tt[Tt]));)++Tt,Ct<<=1;jt+=or=1<<(Ct=Tt-Pe),Ne[Ae+(Tt=ur&Ot)].g=Ct+Pe,Ne[Ae+Tt].value=Lt-Ae-Tt}Fe.g=yt-Pe,Fe.value=gt[dt++],z(Ne,Lt+(ur>>Pe),Ye,or,Fe),ur=M(ur,yt)}}return sr!=2*rt[15]-1?0:jt})(G,Q,ae,fe,ge,we)}function D(){this.value=this.g=0}function T(){this.value=this.g=0}function R(){this.G=s(5,D),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(fa,T)}function C(G,Q,ae,fe){t(G!=null),t(Q!=null),t(2147483648>fe),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=Q,G.pa=ae,G.Jd=Q,G.Yc=ae+fe,G.Zc=4<=fe?ae+fe-4+1:ae,ee(G)}function N(G,Q){for(var ae=0;0<Q--;)ae|=F(G,128)<<Q;return ae}function E(G,Q){var ae=N(G,Q);return B(G)?-ae:ae}function k(G,Q,ae,fe){var ge,we=0;for(t(G!=null),t(Q!=null),t(4294967288>fe),G.Sb=fe,G.Ra=0,G.u=0,G.h=0,4<fe&&(fe=4),ge=0;ge<fe;++ge)we+=Q[ae+ge]<<8*ge;G.Ra=we,G.bb=fe,G.oa=Q,G.pa=ae}function P(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<_d-8>>>0,++G.bb,G.u-=8;Y(G)&&(G.h=1,G.u=0)}function q(G,Q){if(t(0<=Q),!G.h&&Q<=wd){var ae=K(G)&xd[Q];return G.u+=Q,P(G),ae}return G.h=1,G.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(G){return G.Ra>>>(G.u&_d-1)>>>0}function Y(G){return t(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>_d}function Z(G,Q){G.u=Q,G.h=Y(G)}function V(G){G.u>=Sd&&(t(G.u>=Sd),P(G))}function ee(G){t(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(t(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function B(G){return N(G,1)}function F(G,Q){var ae=G.Ca;0>G.b&&ee(G);var fe=G.b,ge=ae*Q>>>8,we=(G.I>>>fe>ge)+0;for(we?(ae-=ge,G.I-=ge+1<<fe>>>0):ae=ge+1,fe=ae,ge=0;256<=fe;)ge+=8,fe>>=8;return fe=7^ge+Ri[fe],G.b-=fe,G.Ca=(ae<<fe)-1,we}function X(G,Q,ae){G[Q+0]=ae>>24&255,G[Q+1]=ae>>16&255,G[Q+2]=ae>>8&255,G[Q+3]=ae>>0&255}function te(G,Q){return G[Q+0]<<0|G[Q+1]<<8}function se(G,Q){return te(G,Q)|G[Q+2]<<16}function ce(G,Q){return te(G,Q)|te(G,Q+2)<<16}function ue(G,Q){var ae=1<<Q;return t(G!=null),t(0<Q),G.X=i(ae),G.X==null?0:(G.Mb=32-Q,G.Xa=Q,1)}function oe(G,Q){t(G!=null),t(Q!=null),t(G.Xa==Q.Xa),n(Q.X,0,G.X,0,1<<Q.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function pe(G,Q,ae,fe){t(ae!=null),t(fe!=null);var ge=ae[0],we=fe[0];return ge==0&&(ge=(G*we+Q/2)/Q),we==0&&(we=(Q*ge+G/2)/G),0>=ge||0>=we?0:(ae[0]=ge,fe[0]=we,1)}function ye(G,Q){return G+(1<<Q)-1>>>Q}function be(G,Q){return((4278255360&G)+(4278255360&Q)>>>0&4278255360)+((16711935&G)+(16711935&Q)>>>0&16711935)>>>0}function Ie(G,Q){O[Q]=function(ae,fe,ge,we,Ne,Ae,Pe){var Fe;for(Fe=0;Fe<Ne;++Fe){var Ye=O[G](Ae[Pe+Fe-1],ge,we+Fe);Ae[Pe+Fe]=be(ae[fe+Fe],Ye)}}}function Oe(){this.ud=this.hd=this.jd=0}function Me(G,Q){return((4278124286&(G^Q))>>>1)+(G&Q)>>>0}function Re(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function He(G,Q){return Re(G+(G-Q+.5>>1))}function qe(G,Q,ae){return Math.abs(Q-ae)-Math.abs(G-ae)}function ct(G,Q,ae,fe,ge,we,Ne){for(fe=we[Ne-1],ae=0;ae<ge;++ae)we[Ne+ae]=fe=be(G[Q+ae],fe)}function ft(G,Q,ae,fe,ge){var we;for(we=0;we<ae;++we){var Ne=G[Q+we],Ae=Ne>>8&255,Pe=16711935&(Pe=(Pe=16711935&Ne)+((Ae<<16)+Ae));fe[ge+we]=(4278255360&Ne)+Pe>>>0}}function St(G,Q){Q.jd=G>>0&255,Q.hd=G>>8&255,Q.ud=G>>16&255}function Rt(G,Q,ae,fe,ge,we){var Ne;for(Ne=0;Ne<fe;++Ne){var Ae=Q[ae+Ne],Pe=Ae>>>8,Fe=Ae,Ye=255&(Ye=(Ye=Ae>>>16)+((G.jd<<24>>24)*(Pe<<24>>24)>>>5));Fe=255&(Fe=(Fe=Fe+((G.hd<<24>>24)*(Pe<<24>>24)>>>5))+((G.ud<<24>>24)*(Ye<<24>>24)>>>5)),ge[we+Ne]=(4278255360&Ae)+(Ye<<16)+Fe}}function Ft(G,Q,ae,fe,ge){O[Q]=function(we,Ne,Ae,Pe,Fe,Ye,gt,yt,dt){for(Pe=gt;Pe<yt;++Pe)for(gt=0;gt<dt;++gt)Fe[Ye++]=ge(Ae[fe(we[Ne++])])},O[G]=function(we,Ne,Ae,Pe,Fe,Ye,gt){var yt=8>>we.b,dt=we.Ea,Lt=we.K[0],jt=we.w;if(8>yt)for(we=(1<<we.b)-1,jt=(1<<yt)-1;Ne<Ae;++Ne){var tt,rt=0;for(tt=0;tt<dt;++tt)tt&we||(rt=fe(Pe[Fe++])),Ye[gt++]=ge(Lt[rt&jt]),rt>>=yt}else O["VP8LMapColor"+ae](Pe,Fe,Lt,jt,Ye,gt,Ne,Ae,dt)}}function ot(G,Q,ae,fe,ge){for(ae=Q+ae;Q<ae;){var we=G[Q++];fe[ge++]=we>>16&255,fe[ge++]=we>>8&255,fe[ge++]=we>>0&255}}function Kt(G,Q,ae,fe,ge){for(ae=Q+ae;Q<ae;){var we=G[Q++];fe[ge++]=we>>16&255,fe[ge++]=we>>8&255,fe[ge++]=we>>0&255,fe[ge++]=we>>24&255}}function Pt(G,Q,ae,fe,ge){for(ae=Q+ae;Q<ae;){var we=(Ne=G[Q++])>>16&240|Ne>>12&15,Ne=Ne>>0&240|Ne>>28&15;fe[ge++]=we,fe[ge++]=Ne}}function Ee(G,Q,ae,fe,ge){for(ae=Q+ae;Q<ae;){var we=(Ne=G[Q++])>>16&248|Ne>>13&7,Ne=Ne>>5&224|Ne>>3&31;fe[ge++]=we,fe[ge++]=Ne}}function We(G,Q,ae,fe,ge){for(ae=Q+ae;Q<ae;){var we=G[Q++];fe[ge++]=we>>0&255,fe[ge++]=we>>8&255,fe[ge++]=we>>16&255}}function ut(G,Q,ae,fe,ge,we){if(we==0)for(ae=Q+ae;Q<ae;)X(fe,((we=G[Q++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),ge+=32;else n(fe,ge,G,Q,ae)}function wt(G,Q){O[Q][0]=O[G+"0"],O[Q][1]=O[G+"1"],O[Q][2]=O[G+"2"],O[Q][3]=O[G+"3"],O[Q][4]=O[G+"4"],O[Q][5]=O[G+"5"],O[Q][6]=O[G+"6"],O[Q][7]=O[G+"7"],O[Q][8]=O[G+"8"],O[Q][9]=O[G+"9"],O[Q][10]=O[G+"10"],O[Q][11]=O[G+"11"],O[Q][12]=O[G+"12"],O[Q][13]=O[G+"13"],O[Q][14]=O[G+"0"],O[Q][15]=O[G+"0"]}function Bt(G){return G==Td||G==hu||G==Uf||G==qf}function dr(){this.eb=[],this.size=this.A=this.fb=0}function Xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dr,this.f.kb=new Xt,this.sd=null}function vr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zt(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function lr(G,Q){var ae=G.T,fe=Q.ba.f.RGBA,ge=fe.eb,we=fe.fb+G.ka*fe.A,Ne=ss[Q.ba.S],Ae=G.y,Pe=G.O,Fe=G.f,Ye=G.N,gt=G.ea,yt=G.W,dt=Q.cc,Lt=Q.dc,jt=Q.Mc,tt=Q.Nc,rt=G.ka,Ct=G.ka+G.T,Tt=G.U,Ot=Tt+1>>1;for(rt==0?Ne(Ae,Pe,null,null,Fe,Ye,gt,yt,Fe,Ye,gt,yt,ge,we,null,null,Tt):(Ne(Q.ec,Q.fc,Ae,Pe,dt,Lt,jt,tt,Fe,Ye,gt,yt,ge,we-fe.A,ge,we,Tt),++ae);rt+2<Ct;rt+=2)dt=Fe,Lt=Ye,jt=gt,tt=yt,Ye+=G.Rc,yt+=G.Rc,we+=2*fe.A,Ne(Ae,(Pe+=2*G.fa)-G.fa,Ae,Pe,dt,Lt,jt,tt,Fe,Ye,gt,yt,ge,we-fe.A,ge,we,Tt);return Pe+=G.fa,G.j+Ct<G.o?(n(Q.ec,Q.fc,Ae,Pe,Tt),n(Q.cc,Q.dc,Fe,Ye,Ot),n(Q.Mc,Q.Nc,gt,yt,Ot),ae--):1&Ct||Ne(Ae,Pe,null,null,Fe,Ye,gt,yt,Fe,Ye,gt,yt,ge,we+fe.A,null,null,Tt),ae}function fr(G,Q,ae){var fe=G.F,ge=[G.J];if(fe!=null){var we=G.U,Ne=Q.ba.S,Ae=Ne==$f||Ne==Uf;Q=Q.ba.f.RGBA;var Pe=[0],Fe=G.ka;Pe[0]=G.T,G.Kb&&(Fe==0?--Pe[0]:(--Fe,ge[0]-=G.width),G.j+G.ka+G.T==G.o&&(Pe[0]=G.o-G.j-Fe));var Ye=Q.eb;Fe=Q.fb+Fe*Q.A,G=Sn(fe,ge[0],G.width,we,Pe,Ye,Fe+(Ae?0:3),Q.A),t(ae==Pe),G&&Bt(Ne)&&as(Ye,Fe,Ae,we,Pe,Q.A)}return 0}function xr(G){var Q=G.ma,ae=Q.ba.S,fe=11>ae,ge=ae==xc||ae==Bf||ae==$f||ae==Fn||ae==12||Bt(ae);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!vd(Q.Oa,G,ge?11:12))return 0;if(ge&&Bt(ae)&&Ht(),G.da)alert("todo:use_scaling");else{if(fe){if(Q.Ib=Zt,G.Kb){if(ae=G.U+1>>1,Q.memory=i(G.U+2*ae),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+G.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ae,Q.Ib=lr,Ht()}}else alert("todo:EmitYUV");ge&&(Q.Jb=fr,fe&&mt())}if(fe&&!ai){for(G=0;256>G;++G)os[G]=89858*(G-128)+To>>Ol,ls[G]=-22014*(G-128)+To,Id[G]=-45773*(G-128),yu[G]=113618*(G-128)+To>>Ol;for(G=Nn;G<Tn;++G)Q=76283*(G-16)+To>>Ol,d0[G-Nn]=Ps(Q,255),n1[G-Nn]=Ps(Q+8>>4,15);ai=1}return 1}function Ue(G){var Q=G.ma,ae=G.U,fe=G.T;return t(!(1&G.ka)),0>=ae||0>=fe?0:(ae=Q.Ib(G,Q),Q.Jb!=null&&Q.Jb(G,Q,ae),Q.Dc+=ae,1)}function et(G){G.ma.memory=null}function ht(G,Q,ae,fe){return q(G,8)!=47?0:(Q[0]=q(G,14)+1,ae[0]=q(G,14)+1,fe[0]=q(G,1),q(G,3)!=0?0:!G.h)}function kt(G,Q){if(4>G)return G+1;var ae=G-2>>1;return(2+(1&G)<<ae)+q(Q,ae)+1}function Wt(G,Q){return 120<Q?Q-120:1<=(ae=((ae=k2[Q-1])>>4)*G+(8-(15&ae)))?ae:1;var ae}function Be(G,Q,ae){var fe=K(ae),ge=G[Q+=255&fe].g-8;return 0<ge&&(Z(ae,ae.u+8),fe=K(ae),Q+=G[Q].value,Q+=fe&(1<<ge)-1),Z(ae,ae.u+G[Q].g),G[Q].value}function Ve(G,Q,ae){return ae.g+=G.g,ae.value+=G.value<<Q>>>0,t(8>=ae.g),G.g}function pt(G,Q,ae){var fe=G.xc;return t((Q=fe==0?0:G.vc[G.md*(ae>>fe)+(Q>>fe)])<G.Wb),G.Ya[Q]}function he(G,Q,ae,fe){var ge=G.ab,we=G.c*Q,Ne=G.C;Q=Ne+Q;var Ae=ae,Pe=fe;for(fe=G.Ta,ae=G.Ua;0<ge--;){var Fe=G.gc[ge],Ye=Ne,gt=Q,yt=Ae,dt=Pe,Lt=(Pe=fe,Ae=ae,Fe.Ea);switch(t(Ye<gt),t(gt<=Fe.nc),Fe.hc){case 2:s0(yt,dt,(gt-Ye)*Lt,Pe,Ae);break;case 0:var jt=Ye,tt=gt,rt=Pe,Ct=Ae,Tt=(or=Fe).Ea;jt==0&&(ou(yt,dt,null,null,1,rt,Ct),ct(yt,dt+1,0,0,Tt-1,rt,Ct+1),dt+=Tt,Ct+=Tt,++jt);for(var Ot=1<<or.b,ur=Ot-1,sr=ye(Tt,or.b),Or=or.K,or=or.w+(jt>>or.b)*sr;jt<tt;){var fn=Or,hn=or,un=1;for(Nl(yt,dt,rt,Ct-Tt,1,rt,Ct);un<Tt;){var Yr=(un&~ur)+Ot;Yr>Tt&&(Yr=Tt),(0,Go[fn[hn++]>>8&15])(yt,dt+ +un,rt,Ct+un-Tt,Yr-un,rt,Ct+un),un=Yr}dt+=Tt,Ct+=Tt,++jt&ur||(or+=sr)}gt!=Fe.nc&&n(Pe,Ae-Lt,Pe,Ae+(gt-Ye-1)*Lt,Lt);break;case 1:for(Lt=yt,tt=dt,Tt=(yt=Fe.Ea)-(Ct=yt&~(rt=(dt=1<<Fe.b)-1)),jt=ye(yt,Fe.b),Ot=Fe.K,Fe=Fe.w+(Ye>>Fe.b)*jt;Ye<gt;){for(ur=Ot,sr=Fe,Or=new Oe,or=tt+Ct,fn=tt+yt;tt<or;)St(ur[sr++],Or),yc(Or,Lt,tt,dt,Pe,Ae),tt+=dt,Ae+=dt;tt<fn&&(St(ur[sr++],Or),yc(Or,Lt,tt,Tt,Pe,Ae),tt+=Tt,Ae+=Tt),++Ye&rt||(Fe+=jt)}break;case 3:if(yt==Pe&&dt==Ae&&0<Fe.b){for(tt=Pe,yt=Lt=Ae+(gt-Ye)*Lt-(Ct=(gt-Ye)*ye(Fe.Ea,Fe.b)),dt=Pe,rt=Ae,jt=[],Ct=(Tt=Ct)-1;0<=Ct;--Ct)jt[Ct]=dt[rt+Ct];for(Ct=Tt-1;0<=Ct;--Ct)tt[yt+Ct]=jt[Ct];Fi(Fe,Ye,gt,Pe,Lt,Pe,Ae)}else Fi(Fe,Ye,gt,yt,dt,Pe,Ae)}Ae=fe,Pe=ae}Pe!=ae&&n(fe,ae,Ae,Pe,we)}function xe(G,Q){var ae=G.V,fe=G.Ba+G.c*G.C,ge=Q-G.C;if(t(Q<=G.l.o),t(16>=ge),0<ge){var we=G.l,Ne=G.Ta,Ae=G.Ua,Pe=we.width;if(he(G,ge,ae,fe),ge=Ae=[Ae],t((ae=G.C)<(fe=Q)),t(we.v<we.va),fe>we.o&&(fe=we.o),ae<we.j){var Fe=we.j-ae;ae=we.j,ge[0]+=Fe*Pe}if(ae>=fe?ae=0:(ge[0]+=4*we.v,we.ka=ae-we.j,we.U=we.va-we.v,we.T=fe-ae,ae=1),ae){if(Ae=Ae[0],11>(ae=G.ca).S){var Ye=ae.f.RGBA,gt=(fe=ae.S,ge=we.U,we=we.T,Fe=Ye.eb,Ye.A),yt=we;for(Ye=Ye.fb+G.Ma*Ye.A;0<yt--;){var dt=Ne,Lt=Ae,jt=ge,tt=Fe,rt=Ye;switch(fe){case o0:Di(dt,Lt,jt,tt,rt);break;case xc:xi(dt,Lt,jt,tt,rt);break;case Td:xi(dt,Lt,jt,tt,rt),as(tt,rt,0,jt,1,0);break;case Zy:kl(dt,Lt,jt,tt,rt);break;case Bf:ut(dt,Lt,jt,tt,rt,1);break;case hu:ut(dt,Lt,jt,tt,rt,1),as(tt,rt,0,jt,1,0);break;case $f:ut(dt,Lt,jt,tt,rt,0);break;case Uf:ut(dt,Lt,jt,tt,rt,0),as(tt,rt,1,jt,1,0);break;case Fn:vc(dt,Lt,jt,tt,rt);break;case qf:vc(dt,Lt,jt,tt,rt),Rn(tt,rt,jt,1,0);break;case l0:jl(dt,Lt,jt,tt,rt);break;default:t(0)}Ae+=Pe,Ye+=gt}G.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");t(G.Ma<=ae.height)}}G.C=Q,t(G.C<=G.i)}function me(G){var Q;if(0<G.ua)return 0;for(Q=0;Q<G.Wb;++Q){var ae=G.Ya[Q].G,fe=G.Ya[Q].H;if(0<ae[1][fe[1]+0].g||0<ae[2][fe[2]+0].g||0<ae[3][fe[3]+0].g)return 0}return 1}function Se(G,Q,ae,fe,ge,we){if(G.Z!=0){var Ne=G.qd,Ae=G.rd;for(t(_i[G.Z]!=null);Q<ae;++Q)_i[G.Z](Ne,Ae,fe,ge,fe,ge,we),Ne=fe,Ae=ge,ge+=we;G.qd=Ne,G.rd=Ae}}function ke(G,Q){var ae=G.l.ma,fe=ae.Z==0||ae.Z==1?G.l.j:G.C;if(fe=G.C<fe?fe:G.C,t(Q<=G.l.o),Q>fe){var ge=G.l.width,we=ae.ca,Ne=ae.tb+ge*fe,Ae=G.V,Pe=G.Ba+G.c*fe,Fe=G.gc;t(G.ab==1),t(Fe[0].hc==3),Ff(Fe[0],fe,Q,Ae,Pe,we,Ne),Se(ae,fe,Q,we,Ne,ge)}G.C=G.Ma=Q}function Te(G,Q,ae,fe,ge,we,Ne){var Ae=G.$/fe,Pe=G.$%fe,Fe=G.m,Ye=G.s,gt=ae+G.$,yt=gt;ge=ae+fe*ge;var dt=ae+fe*we,Lt=280+Ye.ua,jt=G.Pb?Ae:16777216,tt=0<Ye.ua?Ye.Wa:null,rt=Ye.wc,Ct=gt<dt?pt(Ye,Pe,Ae):null;t(G.C<we),t(dt<=ge);var Tt=!1;e:for(;;){for(;Tt||gt<dt;){var Ot=0;if(Ae>=jt){var ur=gt-ae;t((jt=G).Pb),jt.wd=jt.m,jt.xd=ur,0<jt.s.ua&&oe(jt.s.Wa,jt.s.vb),jt=Ae+u0}if(Pe&rt||(Ct=pt(Ye,Pe,Ae)),t(Ct!=null),Ct.Qb&&(Q[gt]=Ct.qb,Tt=!0),!Tt)if(V(Fe),Ct.jc){Ot=Fe,ur=Q;var sr=gt,Or=Ct.pd[K(Ot)&fa-1];t(Ct.jc),256>Or.g?(Z(Ot,Ot.u+Or.g),ur[sr]=Or.value,Ot=0):(Z(Ot,Ot.u+Or.g-256),t(256<=Or.value),Ot=Or.value),Ot==0&&(Tt=!0)}else Ot=Be(Ct.G[0],Ct.H[0],Fe);if(Fe.h)break;if(Tt||256>Ot){if(!Tt)if(Ct.nd)Q[gt]=(Ct.qb|Ot<<8)>>>0;else{if(V(Fe),Tt=Be(Ct.G[1],Ct.H[1],Fe),V(Fe),ur=Be(Ct.G[2],Ct.H[2],Fe),sr=Be(Ct.G[3],Ct.H[3],Fe),Fe.h)break;Q[gt]=(sr<<24|Tt<<16|Ot<<8|ur)>>>0}if(Tt=!1,++gt,++Pe>=fe&&(Pe=0,++Ae,Ne!=null&&Ae<=we&&!(Ae%16)&&Ne(G,Ae),tt!=null))for(;yt<gt;)Ot=Q[yt++],tt.X[(506832829*Ot&4294967295)>>>tt.Mb]=Ot}else if(280>Ot){if(Ot=kt(Ot-256,Fe),ur=Be(Ct.G[4],Ct.H[4],Fe),V(Fe),ur=Wt(fe,ur=kt(ur,Fe)),Fe.h)break;if(gt-ae<ur||ge-gt<Ot)break e;for(sr=0;sr<Ot;++sr)Q[gt+sr]=Q[gt+sr-ur];for(gt+=Ot,Pe+=Ot;Pe>=fe;)Pe-=fe,++Ae,Ne!=null&&Ae<=we&&!(Ae%16)&&Ne(G,Ae);if(t(gt<=ge),Pe&rt&&(Ct=pt(Ye,Pe,Ae)),tt!=null)for(;yt<gt;)Ot=Q[yt++],tt.X[(506832829*Ot&4294967295)>>>tt.Mb]=Ot}else{if(!(Ot<Lt))break e;for(Tt=Ot-280,t(tt!=null);yt<gt;)Ot=Q[yt++],tt.X[(506832829*Ot&4294967295)>>>tt.Mb]=Ot;Ot=gt,t(!(Tt>>>(ur=tt).Xa)),Q[Ot]=ur.X[Tt],Tt=!0}Tt||t(Fe.h==Y(Fe))}if(G.Pb&&Fe.h&&gt<ge)t(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&oe(G.s.vb,G.s.Wa);else{if(Fe.h)break e;Ne!=null&&Ne(G,Ae>we?we:Ae),G.a=0,G.$=gt-ae}return 1}return G.a=3,0}function Ge(G){t(G!=null),G.vc=null,G.yc=null,G.Ya=null;var Q=G.Wa;Q!=null&&(Q.X=null),G.vb=null,t(G!=null)}function nt(){var G=new Nm;return G==null?null:(G.a=0,G.xb=Pd,wt("Predictor","VP8LPredictors"),wt("Predictor","VP8LPredictors_C"),wt("PredictorAdd","VP8LPredictorsAdd"),wt("PredictorAdd","VP8LPredictorsAdd_C"),s0=ft,yc=Rt,Di=ot,xi=Kt,vc=Pt,jl=Ee,kl=We,O.VP8LMapColor32b=Nd,O.VP8LMapColor8b=jd,G)}function Ke(G,Q,ae,fe,ge){var we=1,Ne=[G],Ae=[Q],Pe=fe.m,Fe=fe.s,Ye=null,gt=0;e:for(;;){if(ae)for(;we&&q(Pe,1);){var yt=Ne,dt=Ae,Lt=fe,jt=1,tt=Lt.m,rt=Lt.gc[Lt.ab],Ct=q(tt,2);if(Lt.Oc&1<<Ct)we=0;else{switch(Lt.Oc|=1<<Ct,rt.hc=Ct,rt.Ea=yt[0],rt.nc=dt[0],rt.K=[null],++Lt.ab,t(4>=Lt.ab),Ct){case 0:case 1:rt.b=q(tt,3)+2,jt=Ke(ye(rt.Ea,rt.b),ye(rt.nc,rt.b),0,Lt,rt.K),rt.K=rt.K[0];break;case 3:var Tt,Ot=q(tt,8)+1,ur=16<Ot?0:4<Ot?1:2<Ot?2:3;if(yt[0]=ye(rt.Ea,ur),rt.b=ur,Tt=jt=Ke(Ot,1,0,Lt,rt.K)){var sr,Or=Ot,or=rt,fn=1<<(8>>or.b),hn=i(fn);if(hn==null)Tt=0;else{var un=or.K[0],Yr=or.w;for(hn[0]=or.K[0][0],sr=1;sr<1*Or;++sr)hn[sr]=be(un[Yr+sr],hn[sr-1]);for(;sr<4*fn;++sr)hn[sr]=0;or.K[0]=null,or.K[0]=hn,Tt=1}}jt=Tt;break;case 2:break;default:t(0)}we=jt}}if(Ne=Ne[0],Ae=Ae[0],we&&q(Pe,1)&&!(we=1<=(gt=q(Pe,4))&&11>=gt)){fe.a=3;break e}var jn;if(jn=we)t:{var Cn,Wr,na,$i=fe,xa=Ne,Ra=Ae,vn=gt,Si=ae,Ni=$i.m,aa=$i.s,Fa=[null],ii=1,cs=0,to=e1[vn];r:for(;;){if(Si&&q(Ni,1)){var ia=q(Ni,3)+2,ja=ye(xa,ia),Ms=ye(Ra,ia),Sc=ja*Ms;if(!Ke(ja,Ms,0,$i,Fa))break r;for(Fa=Fa[0],aa.xc=ia,Cn=0;Cn<Sc;++Cn){var Ml=Fa[Cn]>>8&65535;Fa[Cn]=Ml,Ml>=ii&&(ii=Ml+1)}}if(Ni.h)break r;for(Wr=0;5>Wr;++Wr){var bn=pu[Wr];!Wr&&0<vn&&(bn+=1<<vn),cs<bn&&(cs=bn)}var Zo=s(ii*to,D),f0=ii,Cm=s(f0,R);if(Cm==null)var ro=null;else t(65536>=f0),ro=Cm;var no=i(cs);if(ro==null||no==null||Zo==null){$i.a=1;break r}var bu=Zo;for(Cn=na=0;Cn<ii;++Cn){var ao=ro[Cn],Rl=ao.G,xu=ao.H,Md=0,Rs=1,Rd=0;for(Wr=0;5>Wr;++Wr){bn=pu[Wr],Rl[Wr]=bu,xu[Wr]=na,!Wr&&0<vn&&(bn+=1<<vn);a:{var Nc,Fl=bn,Fd=$i,Qo=no,i1=bu,Pm=na,Vn=0,Co=Fd.m,Om=q(Co,1);if(a(Qo,0,0,Fl),Om){var Im=q(Co,1)+1,h0=q(Co,1),p0=q(Co,h0==0?1:8);Qo[p0]=1,Im==2&&(Qo[p0=q(Co,8)]=1);var el=1}else{var Jn=i(19),ka=q(Co,4)+4;if(19<ka){Fd.a=3;var wa=0;break a}for(Nc=0;Nc<ka;++Nc)Jn[j2[Nc]]=q(Co,3);var Dd=void 0,Dl=void 0,Ld=Fd,P2=Jn,Da=Fl,m0=Qo,Gf=0,tl=Ld.m,Po=8,Fs=s(128,D);n:for(;U(Fs,0,7,P2,19);){if(q(tl,1)){var Kf=2+2*q(tl,3);if((Dd=2+q(tl,Kf))>Da)break n}else Dd=Da;for(Dl=0;Dl<Da&&Dd--;){V(tl);var g0=Fs[0+(127&K(tl))];Z(tl,tl.u+g0.g);var jc=g0.value;if(16>jc)m0[Dl++]=jc,jc!=0&&(Po=jc);else{var s1=jc==16,Mm=jc-16,o1=c0[Mm],Rm=q(tl,zf[Mm])+o1;if(Dl+Rm>Da)break n;for(var l1=s1?Po:0;0<Rm--;)m0[Dl++]=l1}}Gf=1;break n}Gf||(Ld.a=3),el=Gf}(el=el&&!Co.h)&&(Vn=U(i1,Pm,8,Qo,Fl)),el&&Vn!=0?wa=Vn:(Fd.a=3,wa=0)}if(wa==0)break r;if(Rs&&Qy[Wr]==1&&(Rs=bu[na].g==0),Md+=bu[na].g,na+=wa,3>=Wr){var Bd,y0=no[0];for(Bd=1;Bd<bn;++Bd)no[Bd]>y0&&(y0=no[Bd]);Rd+=y0}}if(ao.nd=Rs,ao.Qb=0,Rs&&(ao.qb=(Rl[3][xu[3]+0].value<<24|Rl[1][xu[1]+0].value<<16|Rl[2][xu[2]+0].value)>>>0,Md==0&&256>Rl[0][xu[0]+0].value&&(ao.Qb=1,ao.qb+=Rl[0][xu[0]+0].value<<8)),ao.jc=!ao.Qb&&6>Rd,ao.jc){var Xf,Ds=ao;for(Xf=0;Xf<fa;++Xf){var Ll=Xf,Oo=Ds.pd[Ll],wu=Ds.G[0][Ds.H[0]+Ll];256<=wu.value?(Oo.g=wu.g+256,Oo.value=wu.value):(Oo.g=0,Oo.value=0,Ll>>=Ve(wu,8,Oo),Ll>>=Ve(Ds.G[1][Ds.H[1]+Ll],16,Oo),Ll>>=Ve(Ds.G[2][Ds.H[2]+Ll],0,Oo),Ve(Ds.G[3][Ds.H[3]+Ll],24,Oo))}}}aa.vc=Fa,aa.Wb=ii,aa.Ya=ro,aa.yc=Zo,jn=1;break t}jn=0}if(!(we=jn)){fe.a=3;break e}if(0<gt){if(Fe.ua=1<<gt,!ue(Fe.Wa,gt)){fe.a=1,we=0;break e}}else Fe.ua=0;var v0=fe,b0=Ne,c1=Ae,x0=v0.s,w0=x0.xc;if(v0.c=b0,v0.i=c1,x0.md=ye(b0,w0),x0.wc=w0==0?-1:(1<<w0)-1,ae){fe.xb=Jo;break e}if((Ye=i(Ne*Ae))==null){fe.a=1,we=0;break e}we=(we=Te(fe,Ye,0,Ne,Ae,Ae,null))&&!Pe.h;break e}return we?(ge!=null?ge[0]=Ye:(t(Ye==null),t(ae)),fe.$=0,ae||Ge(Fe)):Ge(Fe),we}function it(G,Q){var ae=G.c*G.i,fe=ae+Q+16*Q;return t(G.c<=Q),G.V=i(fe),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+ae+Q,1)}function st(G,Q){var ae=G.C,fe=Q-ae,ge=G.V,we=G.Ba+G.c*ae;for(t(Q<=G.l.o);0<fe;){var Ne=16<fe?16:fe,Ae=G.l.ma,Pe=G.l.width,Fe=Pe*Ne,Ye=Ae.ca,gt=Ae.tb+Pe*ae,yt=G.Ta,dt=G.Ua;he(G,Ne,ge,we),ha(yt,dt,Ye,gt,Fe),Se(Ae,ae,ae+Ne,Ye,gt,Pe),fe-=Ne,ge+=Ne*G.c,ae+=Ne}t(ae==Q),G.C=G.Ma=Q}function Mt(){this.ub=this.yd=this.td=this.Rb=0}function $t(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function er(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function je(){this.Yb=(function(){var G=[];return(function Q(ae,fe,ge){for(var we=ge[fe],Ne=0;Ne<we&&(ae.push(ge.length>fe+1?[]:0),!(ge.length<fe+1));Ne++)Q(ae[Ne],fe+1,ge)})(G,0,[3,11]),G})()}function Le(){this.jb=i(3),this.Wc=o([4,8],je),this.Xc=o([4,17],je)}function vt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Et(){this.ld=this.La=this.dd=this.tc=0}function Qt(){this.Na=this.la=0}function Ut(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Yt(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ur(){this.uc=this.M=this.Nb=0,this.wa=Array(new Et),this.Y=0,this.ya=Array(new Yt),this.aa=0,this.l=new mr}function Tr(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Sr(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new Mt,this.Kc=new $t,this.ed=new vt,this.Qa=new er,this.Ic=this.$c=this.Aa=0,this.D=new Ur,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,H),this.ia=0,this.pb=s(4,Ut),this.Pa=new Le,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tr),this.Hd=0,this.rb=Array(new Qt),this.sb=0,this.wa=Array(new Et),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Yt),this.L=this.aa=0,this.gd=o([4,2],Et),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function mr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pr(){var G=new Sr;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,mu||(mu=Un)),G}function Ir(G,Q,ae){return G.a==0&&(G.a=Q,G.sc=ae,G.cb=0),0}function cn(G,Q,ae){return 3<=ae&&G[Q+0]==157&&G[Q+1]==1&&G[Q+2]==42}function An(G,Q){if(G==null)return 0;if(G.a=0,G.sc="OK",Q==null)return Ir(G,2,"null VP8Io passed to VP8GetHeaders()");var ae=Q.data,fe=Q.w,ge=Q.ha;if(4>ge)return Ir(G,7,"Truncated header.");var we=ae[fe+0]|ae[fe+1]<<8|ae[fe+2]<<16,Ne=G.Od;if(Ne.Rb=!(1&we),Ne.td=we>>1&7,Ne.yd=we>>4&1,Ne.ub=we>>5,3<Ne.td)return Ir(G,3,"Incorrect keyframe parameters.");if(!Ne.yd)return Ir(G,4,"Frame not displayable.");fe+=3,ge-=3;var Ae=G.Kc;if(Ne.Rb){if(7>ge)return Ir(G,7,"cannot parse picture header");if(!cn(ae,fe,ge))return Ir(G,3,"Bad code word");Ae.c=16383&(ae[fe+4]<<8|ae[fe+3]),Ae.Td=ae[fe+4]>>6,Ae.i=16383&(ae[fe+6]<<8|ae[fe+5]),Ae.Ud=ae[fe+6]>>6,fe+=7,ge-=7,G.za=Ae.c+15>>4,G.Ub=Ae.i+15>>4,Q.width=Ae.c,Q.height=Ae.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((we=G.Pa).jb,0,255,we.jb.length),t((we=G.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,a(we.Zb,0,0,we.Zb.length),a(we.Lb,0,0,we.Lb)}if(Ne.ub>ge)return Ir(G,7,"bad partition length");C(we=G.m,ae,fe,Ne.ub),fe+=Ne.ub,ge-=Ne.ub,Ne.Rb&&(Ae.Ld=B(we),Ae.Kd=B(we)),Ae=G.Qa;var Pe,Fe=G.Pa;if(t(we!=null),t(Ae!=null),Ae.Cb=B(we),Ae.Cb){if(Ae.Bb=B(we),B(we)){for(Ae.Fb=B(we),Pe=0;4>Pe;++Pe)Ae.Zb[Pe]=B(we)?E(we,7):0;for(Pe=0;4>Pe;++Pe)Ae.Lb[Pe]=B(we)?E(we,6):0}if(Ae.Bb)for(Pe=0;3>Pe;++Pe)Fe.jb[Pe]=B(we)?N(we,8):255}else Ae.Bb=0;if(we.Ka)return Ir(G,3,"cannot parse segment header");if((Ae=G.ed).zd=B(we),Ae.Tb=N(we,6),Ae.wb=N(we,3),Ae.Pc=B(we),Ae.Pc&&B(we)){for(Fe=0;4>Fe;++Fe)B(we)&&(Ae.vd[Fe]=E(we,6));for(Fe=0;4>Fe;++Fe)B(we)&&(Ae.od[Fe]=E(we,6))}if(G.L=Ae.Tb==0?0:Ae.zd?1:2,we.Ka)return Ir(G,3,"cannot parse filter header");var Ye=ge;if(ge=Pe=fe,fe=Pe+Ye,Ae=Ye,G.Xb=(1<<N(G.m,2))-1,Ye<3*(Fe=G.Xb))ae=7;else{for(Pe+=3*Fe,Ae-=3*Fe,Ye=0;Ye<Fe;++Ye){var gt=ae[ge+0]|ae[ge+1]<<8|ae[ge+2]<<16;gt>Ae&&(gt=Ae),C(G.Jc[+Ye],ae,Pe,gt),Pe+=gt,Ae-=gt,ge+=3}C(G.Jc[+Fe],ae,Pe,Ae),ae=Pe<fe?0:5}if(ae!=0)return Ir(G,ae,"cannot parse partitions");for(ae=N(Pe=G.m,7),ge=B(Pe)?E(Pe,4):0,fe=B(Pe)?E(Pe,4):0,Ae=B(Pe)?E(Pe,4):0,Fe=B(Pe)?E(Pe,4):0,Pe=B(Pe)?E(Pe,4):0,Ye=G.Qa,gt=0;4>gt;++gt){if(Ye.Cb){var yt=Ye.Zb[gt];Ye.Fb||(yt+=ae)}else{if(0<gt){G.pb[gt]=G.pb[0];continue}yt=ae}var dt=G.pb[gt];dt.Sc[0]=Cd[Ps(yt+ge,127)],dt.Sc[1]=Wf[Ps(yt+0,127)],dt.Eb[0]=2*Cd[Ps(yt+fe,127)],dt.Eb[1]=101581*Wf[Ps(yt+Ae,127)]>>16,8>dt.Eb[1]&&(dt.Eb[1]=8),dt.Qc[0]=Cd[Ps(yt+Fe,117)],dt.Qc[1]=Wf[Ps(yt+Pe,127)],dt.lc=yt+Pe}if(!Ne.Rb)return Ir(G,4,"Not a key frame.");for(B(we),Ne=G.Pa,ae=0;4>ae;++ae){for(ge=0;8>ge;++ge)for(fe=0;3>fe;++fe)for(Ae=0;11>Ae;++Ae)Fe=F(we,A2[ae][ge][fe][Ae])?N(we,8):r1[ae][ge][fe][Ae],Ne.Wc[ae][ge].Yb[fe][Ae]=Fe;for(ge=0;17>ge;++ge)Ne.Xc[ae][ge]=Ne.Wc[ae][Em[ge]]}return G.kc=B(we),G.kc&&(G.Bd=N(we,8)),G.cb=1}function Un(G,Q,ae,fe,ge,we,Ne){var Ae=Q[ge].Yb[ae];for(ae=0;16>ge;++ge){if(!F(G,Ae[ae+0]))return ge;for(;!F(G,Ae[ae+1]);)if(Ae=Q[++ge].Yb[0],ae=0,ge==16)return 16;var Pe=Q[ge+1].Yb;if(F(G,Ae[ae+2])){var Fe=G,Ye=0;if(F(Fe,(yt=Ae)[(gt=ae)+3]))if(F(Fe,yt[gt+6])){for(Ae=0,gt=2*(Ye=F(Fe,yt[gt+8]))+(yt=F(Fe,yt[gt+9+Ye])),Ye=0,yt=jm[gt];yt[Ae];++Ae)Ye+=Ye+F(Fe,yt[Ae]);Ye+=3+(8<<gt)}else F(Fe,yt[gt+7])?(Ye=7+2*F(Fe,165),Ye+=F(Fe,145)):Ye=5+F(Fe,159);else Ye=F(Fe,yt[gt+4])?3+F(Fe,yt[gt+5]):2;Ae=Pe[2]}else Ye=1,Ae=Pe[1];Pe=Ne+km[ge],0>(Fe=G).b&&ee(Fe);var gt,yt=Fe.b,dt=(gt=Fe.Ca>>1)-(Fe.I>>yt)>>31;--Fe.b,Fe.Ca+=dt,Fe.Ca|=1,Fe.I-=(gt+1&dt)<<yt,we[Pe]=((Ye^dt)-dt)*fe[(0<ge)+0]}return 16}function Yn(G){var Q=G.rb[G.sb-1];Q.la=0,Q.Na=0,a(G.zc,0,0,G.zc.length),G.ja=0}function Ia(G,Q){if(G==null)return 0;if(Q==null)return Ir(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!An(G,Q))return 0;if(t(G.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(G.L=0);var ae=vu[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=Q.v-ae>>4,G.zb=Q.j-ae>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=Q.o+15+ae>>4,G.Hb=Q.va+15+ae>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var fe=G.ed;for(ae=0;4>ae;++ae){var ge;if(G.Qa.Cb){var we=G.Qa.Lb[ae];G.Qa.Fb||(we+=fe.Tb)}else we=fe.Tb;for(ge=0;1>=ge;++ge){var Ne=G.gd[ae][ge],Ae=we;if(fe.Pc&&(Ae+=fe.vd[0],ge&&(Ae+=fe.od[0])),0<(Ae=0>Ae?0:63<Ae?63:Ae)){var Pe=Ae;0<fe.wb&&(Pe=4<fe.wb?Pe>>2:Pe>>1)>9-fe.wb&&(Pe=9-fe.wb),1>Pe&&(Pe=1),Ne.dd=Pe,Ne.tc=2*Ae+Pe,Ne.ld=40<=Ae?2:15<=Ae?1:0}else Ne.tc=0;Ne.La=ge}}}ae=0}else Ir(G,6,"Frame setup failed"),ae=G.a;if(ae=ae==0){if(ae){G.$c=0,0<G.Aa||(G.Ic=Il);e:{ae=G.Ic,fe=4*(Pe=G.za);var Fe=32*Pe,Ye=Pe+1,gt=0<G.L?Pe*(0<G.Aa?2:1):0,yt=(G.Aa==2?2:1)*Pe;if((Ne=fe+832+(ge=3*(16*ae+vu[G.L])/2*Fe)+(we=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=Ne)ae=0;else{if(Ne>G.Vb){if(G.Vb=0,G.Ec=i(Ne),G.Fc=0,G.Ec==null){ae=Ir(G,1,"no memory during frame initialization.");break e}G.Vb=Ne}Ne=G.Ec,Ae=G.Fc,G.Ac=Ne,G.Bc=Ae,Ae+=fe,G.Gd=s(Fe,Tr),G.Hd=0,G.rb=s(Ye+1,Qt),G.sb=1,G.wa=gt?s(gt,Et):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=Pe),t(!0),G.oc=Ne,G.pc=Ae,Ae+=832,G.ya=s(yt,Yt),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=Pe),G.R=16*Pe,G.B=8*Pe,Pe=(Fe=vu[G.L])*G.R,Fe=Fe/2*G.B,G.sa=Ne,G.ta=Ae+Pe,G.qa=G.sa,G.ra=G.ta+16*ae*G.R+Fe,G.Ha=G.qa,G.Ia=G.ra+8*ae*G.B+Fe,G.$c=0,Ae+=ge,G.mb=we?Ne:null,G.nb=we?Ae:null,t(Ae+we<=G.Fc+G.Vb),Yn(G),a(G.Ac,G.Bc,0,fe),ae=1}}if(ae){if(Q.ka=0,Q.y=G.sa,Q.O=G.ta,Q.f=G.qa,Q.N=G.ra,Q.ea=G.Ha,Q.Vd=G.Ia,Q.fa=G.R,Q.Rc=G.B,Q.F=null,Q.J=0,!Lf){for(ae=-255;255>=ae;++ae)Na[255+ae]=0>ae?-ae:ae;for(ae=-1020;1020>=ae;++ae)Xo[1020+ae]=-128>ae?-128:127<ae?127:ae;for(ae=-112;112>=ae;++ae)Ed[112+ae]=-16>ae?-16:15<ae?15:ae;for(ae=-255;510>=ae;++ae)fu[255+ae]=0>ae?0:255<ae?255:ae;Lf=1}kd=Hr,El=Jr,Al=ti,wi=wo,Os=_o,gn=an,lu=hd,Df=Ma,cu=nu,uu=Of,du=fc,Is=hc,Tl=au,Ko=pd,Cl=ko,Pl=Ys,bc=Js,ni=a0,eo[0]=Ho,eo[1]=Ts,eo[2]=Xs,eo[3]=Mi,eo[4]=Tf,eo[5]=ld,eo[6]=uc,eo[7]=cd,eo[8]=n0,eo[9]=ud,Bi[0]=Ks,Bi[1]=wl,Bi[2]=ri,Bi[3]=yi,Bi[4]=Mn,Bi[5]=Ii,Bi[6]=vi,is[0]=Cs,is[1]=So,is[2]=Sm,is[3]=_l,is[4]=tu,is[5]=dd,is[6]=Cf,ae=1}else ae=0}ae&&(ae=(function(dt,Lt){for(dt.M=0;dt.M<dt.Va;++dt.M){var jt,tt=dt.Jc[dt.M&dt.Xb],rt=dt.m,Ct=dt;for(jt=0;jt<Ct.za;++jt){var Tt=rt,Ot=Ct,ur=Ot.Ac,sr=Ot.Bc+4*jt,Or=Ot.zc,or=Ot.ya[Ot.aa+jt];if(Ot.Qa.Bb?or.$b=F(Tt,Ot.Pa.jb[0])?2+F(Tt,Ot.Pa.jb[2]):F(Tt,Ot.Pa.jb[1]):or.$b=0,Ot.kc&&(or.Ad=F(Tt,Ot.Bd)),or.Za=!F(Tt,145)+0,or.Za){var fn=or.Ob,hn=0;for(Ot=0;4>Ot;++Ot){var un,Yr=Or[0+Ot];for(un=0;4>un;++un){Yr=E2[ur[sr+un]][Yr];for(var jn=t1[F(Tt,Yr[0])];0<jn;)jn=t1[2*jn+F(Tt,Yr[jn])];Yr=-jn,ur[sr+un]=Yr}n(fn,hn,ur,sr,4),hn+=4,Or[0+Ot]=Yr}}else Yr=F(Tt,156)?F(Tt,128)?1:3:F(Tt,163)?2:0,or.Ob[0]=Yr,a(ur,sr,Yr,4),a(Or,0,Yr,4);or.Dd=F(Tt,142)?F(Tt,114)?F(Tt,183)?1:3:2:0}if(Ct.m.Ka)return Ir(dt,7,"Premature end-of-partition0 encountered.");for(;dt.ja<dt.za;++dt.ja){if(Ct=tt,Tt=(rt=dt).rb[rt.sb-1],ur=rt.rb[rt.sb+rt.ja],jt=rt.ya[rt.aa+rt.ja],sr=rt.kc?jt.Ad:0)Tt.la=ur.la=0,jt.Za||(Tt.Na=ur.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var Cn,Wr;if(Tt=ur,ur=Ct,sr=rt.Pa.Xc,Or=rt.ya[rt.aa+rt.ja],or=rt.pb[Or.$b],Ot=Or.ad,fn=0,hn=rt.rb[rt.sb-1],Yr=un=0,a(Ot,fn,0,384),Or.Za)var na=0,$i=sr[3];else{jn=i(16);var xa=Tt.Na+hn.Na;if(xa=mu(ur,sr[1],xa,or.Eb,0,jn,0),Tt.Na=hn.Na=(0<xa)+0,1<xa)kd(jn,0,Ot,fn);else{var Ra=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)Ot[fn+jn]=Ra}na=1,$i=sr[0]}var vn=15&Tt.la,Si=15&hn.la;for(jn=0;4>jn;++jn){var Ni=1&Si;for(Ra=Wr=0;4>Ra;++Ra)vn=vn>>1|(Ni=(xa=mu(ur,$i,xa=Ni+(1&vn),or.Sc,na,Ot,fn))>na)<<7,Wr=Wr<<2|(3<xa?3:1<xa?2:Ot[fn+0]!=0),fn+=16;vn>>=4,Si=Si>>1|Ni<<7,un=(un<<8|Wr)>>>0}for($i=vn,na=Si>>4,Cn=0;4>Cn;Cn+=2){for(Wr=0,vn=Tt.la>>4+Cn,Si=hn.la>>4+Cn,jn=0;2>jn;++jn){for(Ni=1&Si,Ra=0;2>Ra;++Ra)xa=Ni+(1&vn),vn=vn>>1|(Ni=0<(xa=mu(ur,sr[2],xa,or.Qc,0,Ot,fn)))<<3,Wr=Wr<<2|(3<xa?3:1<xa?2:Ot[fn+0]!=0),fn+=16;vn>>=2,Si=Si>>1|Ni<<5}Yr|=Wr<<4*Cn,$i|=vn<<4<<Cn,na|=(240&Si)<<Cn}Tt.la=$i,hn.la=na,Or.Hc=un,Or.Gc=Yr,Or.ia=43690&Yr?0:or.ia,sr=!(un|Yr)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[jt.$b][jt.Za],rt.wa[rt.Y+rt.ja].La|=!sr),Ct.Ka)return Ir(dt,7,"Premature end-of-file encountered.")}if(Yn(dt),rt=Lt,Ct=1,jt=(tt=dt).D,Tt=0<tt.L&&tt.M>=tt.zb&&tt.M<=tt.Va,tt.Aa==0)e:{if(jt.M=tt.M,jt.uc=Tt,yd(tt,jt),Ct=1,jt=(Wr=tt.D).Nb,Tt=(Yr=vu[tt.L])*tt.R,ur=Yr/2*tt.B,jn=16*jt*tt.R,Ra=8*jt*tt.B,sr=tt.sa,Or=tt.ta-Tt+jn,or=tt.qa,Ot=tt.ra-ur+Ra,fn=tt.Ha,hn=tt.Ia-ur+Ra,Si=(vn=Wr.M)==0,un=vn>=tt.Va-1,tt.Aa==2&&yd(tt,Wr),Wr.uc)for(Ni=(xa=tt).D.M,t(xa.D.uc),Wr=xa.yb;Wr<xa.Hb;++Wr){na=Wr,$i=Ni;var aa=(Fa=(bn=xa).D).Nb;Cn=bn.R;var Fa=Fa.wa[Fa.Y+na],ii=bn.sa,cs=bn.ta+16*aa*Cn+16*na,to=Fa.dd,ia=Fa.tc;if(ia!=0)if(t(3<=ia),bn.L==1)0<na&&Pl(ii,cs,Cn,ia+4),Fa.La&&ni(ii,cs,Cn,ia),0<$i&&Cl(ii,cs,Cn,ia+4),Fa.La&&bc(ii,cs,Cn,ia);else{var ja=bn.B,Ms=bn.qa,Sc=bn.ra+8*aa*ja+8*na,Ml=bn.Ha,bn=bn.Ia+8*aa*ja+8*na;aa=Fa.ld,0<na&&(Df(ii,cs,Cn,ia+4,to,aa),uu(Ms,Sc,Ml,bn,ja,ia+4,to,aa)),Fa.La&&(Is(ii,cs,Cn,ia,to,aa),Ko(Ms,Sc,Ml,bn,ja,ia,to,aa)),0<$i&&(lu(ii,cs,Cn,ia+4,to,aa),cu(Ms,Sc,Ml,bn,ja,ia+4,to,aa)),Fa.La&&(du(ii,cs,Cn,ia,to,aa),Tl(Ms,Sc,Ml,bn,ja,ia,to,aa))}}if(tt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Wr=16*vn,vn=16*(vn+1),Si?(rt.y=tt.sa,rt.O=tt.ta+jn,rt.f=tt.qa,rt.N=tt.ra+Ra,rt.ea=tt.Ha,rt.W=tt.Ia+Ra):(Wr-=Yr,rt.y=sr,rt.O=Or,rt.f=or,rt.N=Ot,rt.ea=fn,rt.W=hn),un||(vn-=Yr),vn>rt.o&&(vn=rt.o),rt.F=null,rt.J=null,tt.Fa!=null&&0<tt.Fa.length&&Wr<vn&&(rt.J=Mf(tt,rt,Wr,vn-Wr),rt.F=tt.mb,rt.F==null&&rt.F.length==0)){Ct=Ir(tt,3,"Could not decode alpha data.");break e}Wr<rt.j&&(Yr=rt.j-Wr,Wr=rt.j,t(!(1&Yr)),rt.O+=tt.R*Yr,rt.N+=tt.B*(Yr>>1),rt.W+=tt.B*(Yr>>1),rt.F!=null&&(rt.J+=rt.width*Yr)),Wr<vn&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Wr-rt.j,rt.U=rt.va-rt.v,rt.T=vn-Wr,Ct=rt.put(rt))}jt+1!=tt.Ic||un||(n(tt.sa,tt.ta-Tt,sr,Or+16*tt.R,Tt),n(tt.qa,tt.ra-ur,or,Ot+8*tt.B,ur),n(tt.Ha,tt.Ia-ur,fn,hn+8*tt.B,ur))}if(!Ct)return Ir(dt,6,"Output aborted.")}return 1})(G,Q)),Q.bc!=null&&Q.bc(Q),ae&=1}return ae?(G.cb=0,ae):0}function ua(G,Q,ae,fe,ge){ge=G[Q+ae+32*fe]+(ge>>3),G[Q+ae+32*fe]=-256&ge?0>ge?0:255:ge}function As(G,Q,ae,fe,ge,we){ua(G,Q,0,ae,fe+ge),ua(G,Q,1,ae,fe+we),ua(G,Q,2,ae,fe-we),ua(G,Q,3,ae,fe-ge)}function ba(G){return(20091*G>>16)+G}function rs(G,Q,ae,fe){var ge,we=0,Ne=i(16);for(ge=0;4>ge;++ge){var Ae=G[Q+0]+G[Q+8],Pe=G[Q+0]-G[Q+8],Fe=(35468*G[Q+4]>>16)-ba(G[Q+12]),Ye=ba(G[Q+4])+(35468*G[Q+12]>>16);Ne[we+0]=Ae+Ye,Ne[we+1]=Pe+Fe,Ne[we+2]=Pe-Fe,Ne[we+3]=Ae-Ye,we+=4,Q++}for(ge=we=0;4>ge;++ge)Ae=(G=Ne[we+0]+4)+Ne[we+8],Pe=G-Ne[we+8],Fe=(35468*Ne[we+4]>>16)-ba(Ne[we+12]),ua(ae,fe,0,0,Ae+(Ye=ba(Ne[we+4])+(35468*Ne[we+12]>>16))),ua(ae,fe,1,0,Pe+Fe),ua(ae,fe,2,0,Pe-Fe),ua(ae,fe,3,0,Ae-Ye),we++,fe+=32}function an(G,Q,ae,fe){var ge=G[Q+0]+4,we=35468*G[Q+4]>>16,Ne=ba(G[Q+4]),Ae=35468*G[Q+1]>>16;As(ae,fe,0,ge+Ne,G=ba(G[Q+1]),Ae),As(ae,fe,1,ge+we,G,Ae),As(ae,fe,2,ge-we,G,Ae),As(ae,fe,3,ge-Ne,G,Ae)}function Jr(G,Q,ae,fe,ge){rs(G,Q,ae,fe),ge&&rs(G,Q+16,ae,fe+4)}function ti(G,Q,ae,fe){El(G,Q+0,ae,fe,1),El(G,Q+32,ae,fe+128,1)}function wo(G,Q,ae,fe){var ge;for(G=G[Q+0]+4,ge=0;4>ge;++ge)for(Q=0;4>Q;++Q)ua(ae,fe,Q,ge,G)}function _o(G,Q,ae,fe){G[Q+0]&&wi(G,Q+0,ae,fe),G[Q+16]&&wi(G,Q+16,ae,fe+4),G[Q+32]&&wi(G,Q+32,ae,fe+128),G[Q+48]&&wi(G,Q+48,ae,fe+128+4)}function Hr(G,Q,ae,fe){var ge,we=i(16);for(ge=0;4>ge;++ge){var Ne=G[Q+0+ge]+G[Q+12+ge],Ae=G[Q+4+ge]+G[Q+8+ge],Pe=G[Q+4+ge]-G[Q+8+ge],Fe=G[Q+0+ge]-G[Q+12+ge];we[0+ge]=Ne+Ae,we[8+ge]=Ne-Ae,we[4+ge]=Fe+Pe,we[12+ge]=Fe-Pe}for(ge=0;4>ge;++ge)Ne=(G=we[0+4*ge]+3)+we[3+4*ge],Ae=we[1+4*ge]+we[2+4*ge],Pe=we[1+4*ge]-we[2+4*ge],Fe=G-we[3+4*ge],ae[fe+0]=Ne+Ae>>3,ae[fe+16]=Fe+Pe>>3,ae[fe+32]=Ne-Ae>>3,ae[fe+48]=Fe-Pe>>3,fe+=64}function gi(G,Q,ae){var fe,ge=Q-32,we=Li,Ne=255-G[ge-1];for(fe=0;fe<ae;++fe){var Ae,Pe=we,Fe=Ne+G[Q-1];for(Ae=0;Ae<ae;++Ae)G[Q+Ae]=Pe[Fe+G[ge+Ae]];Q+=32}}function Ts(G,Q){gi(G,Q,4)}function So(G,Q){gi(G,Q,8)}function wl(G,Q){gi(G,Q,16)}function ri(G,Q){var ae;for(ae=0;16>ae;++ae)n(G,Q+32*ae,G,Q-32,16)}function yi(G,Q){var ae;for(ae=16;0<ae;--ae)a(G,Q,G[Q-1],16),Q+=32}function No(G,Q,ae){var fe;for(fe=0;16>fe;++fe)a(Q,ae+32*fe,G,16)}function Ks(G,Q){var ae,fe=16;for(ae=0;16>ae;++ae)fe+=G[Q-1+32*ae]+G[Q+ae-32];No(fe>>5,G,Q)}function Mn(G,Q){var ae,fe=8;for(ae=0;16>ae;++ae)fe+=G[Q-1+32*ae];No(fe>>4,G,Q)}function Ii(G,Q){var ae,fe=8;for(ae=0;16>ae;++ae)fe+=G[Q+ae-32];No(fe>>4,G,Q)}function vi(G,Q){No(128,G,Q)}function Mr(G,Q,ae){return G+2*Q+ae+2>>2}function Xs(G,Q){var ae,fe=Q-32;for(fe=new Uint8Array([Mr(G[fe-1],G[fe+0],G[fe+1]),Mr(G[fe+0],G[fe+1],G[fe+2]),Mr(G[fe+1],G[fe+2],G[fe+3]),Mr(G[fe+2],G[fe+3],G[fe+4])]),ae=0;4>ae;++ae)n(G,Q+32*ae,fe,0,fe.length)}function Mi(G,Q){var ae=G[Q-1],fe=G[Q-1+32],ge=G[Q-1+64],we=G[Q-1+96];X(G,Q+0,16843009*Mr(G[Q-1-32],ae,fe)),X(G,Q+32,16843009*Mr(ae,fe,ge)),X(G,Q+64,16843009*Mr(fe,ge,we)),X(G,Q+96,16843009*Mr(ge,we,we))}function Ho(G,Q){var ae,fe=4;for(ae=0;4>ae;++ae)fe+=G[Q+ae-32]+G[Q-1+32*ae];for(fe>>=3,ae=0;4>ae;++ae)a(G,Q+32*ae,fe,4)}function Tf(G,Q){var ae=G[Q-1+0],fe=G[Q-1+32],ge=G[Q-1+64],we=G[Q-1-32],Ne=G[Q+0-32],Ae=G[Q+1-32],Pe=G[Q+2-32],Fe=G[Q+3-32];G[Q+0+96]=Mr(fe,ge,G[Q-1+96]),G[Q+1+96]=G[Q+0+64]=Mr(ae,fe,ge),G[Q+2+96]=G[Q+1+64]=G[Q+0+32]=Mr(we,ae,fe),G[Q+3+96]=G[Q+2+64]=G[Q+1+32]=G[Q+0+0]=Mr(Ne,we,ae),G[Q+3+64]=G[Q+2+32]=G[Q+1+0]=Mr(Ae,Ne,we),G[Q+3+32]=G[Q+2+0]=Mr(Pe,Ae,Ne),G[Q+3+0]=Mr(Fe,Pe,Ae)}function uc(G,Q){var ae=G[Q+1-32],fe=G[Q+2-32],ge=G[Q+3-32],we=G[Q+4-32],Ne=G[Q+5-32],Ae=G[Q+6-32],Pe=G[Q+7-32];G[Q+0+0]=Mr(G[Q+0-32],ae,fe),G[Q+1+0]=G[Q+0+32]=Mr(ae,fe,ge),G[Q+2+0]=G[Q+1+32]=G[Q+0+64]=Mr(fe,ge,we),G[Q+3+0]=G[Q+2+32]=G[Q+1+64]=G[Q+0+96]=Mr(ge,we,Ne),G[Q+3+32]=G[Q+2+64]=G[Q+1+96]=Mr(we,Ne,Ae),G[Q+3+64]=G[Q+2+96]=Mr(Ne,Ae,Pe),G[Q+3+96]=Mr(Ae,Pe,Pe)}function ld(G,Q){var ae=G[Q-1+0],fe=G[Q-1+32],ge=G[Q-1+64],we=G[Q-1-32],Ne=G[Q+0-32],Ae=G[Q+1-32],Pe=G[Q+2-32],Fe=G[Q+3-32];G[Q+0+0]=G[Q+1+64]=we+Ne+1>>1,G[Q+1+0]=G[Q+2+64]=Ne+Ae+1>>1,G[Q+2+0]=G[Q+3+64]=Ae+Pe+1>>1,G[Q+3+0]=Pe+Fe+1>>1,G[Q+0+96]=Mr(ge,fe,ae),G[Q+0+64]=Mr(fe,ae,we),G[Q+0+32]=G[Q+1+96]=Mr(ae,we,Ne),G[Q+1+32]=G[Q+2+96]=Mr(we,Ne,Ae),G[Q+2+32]=G[Q+3+96]=Mr(Ne,Ae,Pe),G[Q+3+32]=Mr(Ae,Pe,Fe)}function cd(G,Q){var ae=G[Q+0-32],fe=G[Q+1-32],ge=G[Q+2-32],we=G[Q+3-32],Ne=G[Q+4-32],Ae=G[Q+5-32],Pe=G[Q+6-32],Fe=G[Q+7-32];G[Q+0+0]=ae+fe+1>>1,G[Q+1+0]=G[Q+0+64]=fe+ge+1>>1,G[Q+2+0]=G[Q+1+64]=ge+we+1>>1,G[Q+3+0]=G[Q+2+64]=we+Ne+1>>1,G[Q+0+32]=Mr(ae,fe,ge),G[Q+1+32]=G[Q+0+96]=Mr(fe,ge,we),G[Q+2+32]=G[Q+1+96]=Mr(ge,we,Ne),G[Q+3+32]=G[Q+2+96]=Mr(we,Ne,Ae),G[Q+3+64]=Mr(Ne,Ae,Pe),G[Q+3+96]=Mr(Ae,Pe,Fe)}function ud(G,Q){var ae=G[Q-1+0],fe=G[Q-1+32],ge=G[Q-1+64],we=G[Q-1+96];G[Q+0+0]=ae+fe+1>>1,G[Q+2+0]=G[Q+0+32]=fe+ge+1>>1,G[Q+2+32]=G[Q+0+64]=ge+we+1>>1,G[Q+1+0]=Mr(ae,fe,ge),G[Q+3+0]=G[Q+1+32]=Mr(fe,ge,we),G[Q+3+32]=G[Q+1+64]=Mr(ge,we,we),G[Q+3+64]=G[Q+2+64]=G[Q+0+96]=G[Q+1+96]=G[Q+2+96]=G[Q+3+96]=we}function n0(G,Q){var ae=G[Q-1+0],fe=G[Q-1+32],ge=G[Q-1+64],we=G[Q-1+96],Ne=G[Q-1-32],Ae=G[Q+0-32],Pe=G[Q+1-32],Fe=G[Q+2-32];G[Q+0+0]=G[Q+2+32]=ae+Ne+1>>1,G[Q+0+32]=G[Q+2+64]=fe+ae+1>>1,G[Q+0+64]=G[Q+2+96]=ge+fe+1>>1,G[Q+0+96]=we+ge+1>>1,G[Q+3+0]=Mr(Ae,Pe,Fe),G[Q+2+0]=Mr(Ne,Ae,Pe),G[Q+1+0]=G[Q+3+32]=Mr(ae,Ne,Ae),G[Q+1+32]=G[Q+3+64]=Mr(fe,ae,Ne),G[Q+1+64]=G[Q+3+96]=Mr(ge,fe,ae),G[Q+1+96]=Mr(we,ge,fe)}function Sm(G,Q){var ae;for(ae=0;8>ae;++ae)n(G,Q+32*ae,G,Q-32,8)}function _l(G,Q){var ae;for(ae=0;8>ae;++ae)a(G,Q,G[Q-1],8),Q+=32}function jo(G,Q,ae){var fe;for(fe=0;8>fe;++fe)a(Q,ae+32*fe,G,8)}function Cs(G,Q){var ae,fe=8;for(ae=0;8>ae;++ae)fe+=G[Q+ae-32]+G[Q-1+32*ae];jo(fe>>4,G,Q)}function dd(G,Q){var ae,fe=4;for(ae=0;8>ae;++ae)fe+=G[Q+ae-32];jo(fe>>3,G,Q)}function tu(G,Q){var ae,fe=4;for(ae=0;8>ae;++ae)fe+=G[Q-1+32*ae];jo(fe>>3,G,Q)}function Cf(G,Q){jo(128,G,Q)}function dc(G,Q,ae){var fe=G[Q-ae],ge=G[Q+0],we=3*(ge-fe)+Yo[1020+G[Q-2*ae]-G[Q+ae]],Ne=Ad[112+(we+4>>3)];G[Q-ae]=Li[255+fe+Ad[112+(we+3>>3)]],G[Q+0]=Li[255+ge-Ne]}function ru(G,Q,ae,fe){var ge=G[Q+0],we=G[Q+ae];return Qs[255+G[Q-2*ae]-G[Q-ae]]>fe||Qs[255+we-ge]>fe}function fd(G,Q,ae,fe){return 4*Qs[255+G[Q-ae]-G[Q+0]]+Qs[255+G[Q-2*ae]-G[Q+ae]]<=fe}function Pf(G,Q,ae,fe,ge){var we=G[Q-3*ae],Ne=G[Q-2*ae],Ae=G[Q-ae],Pe=G[Q+0],Fe=G[Q+ae],Ye=G[Q+2*ae],gt=G[Q+3*ae];return 4*Qs[255+Ae-Pe]+Qs[255+Ne-Fe]>fe?0:Qs[255+G[Q-4*ae]-we]<=ge&&Qs[255+we-Ne]<=ge&&Qs[255+Ne-Ae]<=ge&&Qs[255+gt-Ye]<=ge&&Qs[255+Ye-Fe]<=ge&&Qs[255+Fe-Pe]<=ge}function ko(G,Q,ae,fe){var ge=2*fe+1;for(fe=0;16>fe;++fe)fd(G,Q+fe,ae,ge)&&dc(G,Q+fe,ae)}function Ys(G,Q,ae,fe){var ge=2*fe+1;for(fe=0;16>fe;++fe)fd(G,Q+fe*ae,1,ge)&&dc(G,Q+fe*ae,1)}function Js(G,Q,ae,fe){var ge;for(ge=3;0<ge;--ge)ko(G,Q+=4*ae,ae,fe)}function a0(G,Q,ae,fe){var ge;for(ge=3;0<ge;--ge)Ys(G,Q+=4,ae,fe)}function Eo(G,Q,ae,fe,ge,we,Ne,Ae){for(we=2*we+1;0<ge--;){if(Pf(G,Q,ae,we,Ne))if(ru(G,Q,ae,Ae))dc(G,Q,ae);else{var Pe=G,Fe=Q,Ye=ae,gt=Pe[Fe-2*Ye],yt=Pe[Fe-Ye],dt=Pe[Fe+0],Lt=Pe[Fe+Ye],jt=Pe[Fe+2*Ye],tt=27*(Ct=Yo[1020+3*(dt-yt)+Yo[1020+gt-Lt]])+63>>7,rt=18*Ct+63>>7,Ct=9*Ct+63>>7;Pe[Fe-3*Ye]=Li[255+Pe[Fe-3*Ye]+Ct],Pe[Fe-2*Ye]=Li[255+gt+rt],Pe[Fe-Ye]=Li[255+yt+tt],Pe[Fe+0]=Li[255+dt-tt],Pe[Fe+Ye]=Li[255+Lt-rt],Pe[Fe+2*Ye]=Li[255+jt-Ct]}Q+=fe}}function ns(G,Q,ae,fe,ge,we,Ne,Ae){for(we=2*we+1;0<ge--;){if(Pf(G,Q,ae,we,Ne))if(ru(G,Q,ae,Ae))dc(G,Q,ae);else{var Pe=G,Fe=Q,Ye=ae,gt=Pe[Fe-Ye],yt=Pe[Fe+0],dt=Pe[Fe+Ye],Lt=Ad[112+((jt=3*(yt-gt))+4>>3)],jt=Ad[112+(jt+3>>3)],tt=Lt+1>>1;Pe[Fe-2*Ye]=Li[255+Pe[Fe-2*Ye]+tt],Pe[Fe-Ye]=Li[255+gt+jt],Pe[Fe+0]=Li[255+yt-Lt],Pe[Fe+Ye]=Li[255+dt-tt]}Q+=fe}}function hd(G,Q,ae,fe,ge,we){Eo(G,Q,ae,1,16,fe,ge,we)}function Ma(G,Q,ae,fe,ge,we){Eo(G,Q,1,ae,16,fe,ge,we)}function fc(G,Q,ae,fe,ge,we){var Ne;for(Ne=3;0<Ne;--Ne)ns(G,Q+=4*ae,ae,1,16,fe,ge,we)}function hc(G,Q,ae,fe,ge,we){var Ne;for(Ne=3;0<Ne;--Ne)ns(G,Q+=4,1,ae,16,fe,ge,we)}function nu(G,Q,ae,fe,ge,we,Ne,Ae){Eo(G,Q,ge,1,8,we,Ne,Ae),Eo(ae,fe,ge,1,8,we,Ne,Ae)}function Of(G,Q,ae,fe,ge,we,Ne,Ae){Eo(G,Q,1,ge,8,we,Ne,Ae),Eo(ae,fe,1,ge,8,we,Ne,Ae)}function au(G,Q,ae,fe,ge,we,Ne,Ae){ns(G,Q+4*ge,ge,1,8,we,Ne,Ae),ns(ae,fe+4*ge,ge,1,8,we,Ne,Ae)}function pd(G,Q,ae,fe,ge,we,Ne,Ae){ns(G,Q+4,1,ge,8,we,Ne,Ae),ns(ae,fe+4,1,ge,8,we,Ne,Ae)}function Vo(){this.ba=new pr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function md(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function i0(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new D}function Nm(){this.xb=this.a=0,this.l=new mr,this.ca=new pr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new i0,this.ab=0,this.gc=s(4,md),this.Oc=0}function gd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Sl(G,Q,ae,fe,ge,we,Ne){for(G=G==null?0:G[Q+0],Q=0;Q<Ne;++Q)ge[we+Q]=G+ae[fe+Q]&255,G=ge[we+Q]}function If(G,Q,ae,fe,ge,we,Ne){var Ae;if(G==null)Sl(null,null,ae,fe,ge,we,Ne);else for(Ae=0;Ae<Ne;++Ae)ge[we+Ae]=G[Q+Ae]+ae[fe+Ae]&255}function mc(G,Q,ae,fe,ge,we,Ne){if(G==null)Sl(null,null,ae,fe,ge,we,Ne);else{var Ae,Pe=G[Q+0],Fe=Pe,Ye=Pe;for(Ae=0;Ae<Ne;++Ae)Fe=Ye+(Pe=G[Q+Ae])-Fe,Ye=ae[fe+Ae]+(-256&Fe?0>Fe?0:255:Fe)&255,Fe=Pe,ge[we+Ae]=Ye}}function Mf(G,Q,ae,fe){var ge=Q.width,we=Q.o;if(t(G!=null&&Q!=null),0>ae||0>=fe||ae+fe>we)return null;if(!G.Cc){if(G.ga==null){var Ne;if(G.ga=new gd,(Ne=G.ga==null)||(Ne=Q.width*Q.o,t(G.Gb.length==0),G.Gb=i(Ne),G.Uc=0,G.Gb==null?Ne=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,Ne=1),Ne=!Ne),!Ne){Ne=G.ga;var Ae=G.Fa,Pe=G.P,Fe=G.qc,Ye=G.mb,gt=G.nb,yt=Pe+1,dt=Fe-1,Lt=Ne.l;if(t(Ae!=null&&Ye!=null&&Q!=null),_i[0]=null,_i[1]=Sl,_i[2]=If,_i[3]=mc,Ne.ca=Ye,Ne.tb=gt,Ne.c=Q.width,Ne.i=Q.height,t(0<Ne.c&&0<Ne.i),1>=Fe)Q=0;else if(Ne.$a=Ae[Pe+0]>>0&3,Ne.Z=Ae[Pe+0]>>2&3,Ne.Lc=Ae[Pe+0]>>4&3,Pe=Ae[Pe+0]>>6&3,0>Ne.$a||1<Ne.$a||4<=Ne.Z||1<Ne.Lc||Pe)Q=0;else if(Lt.put=Ue,Lt.ac=xr,Lt.bc=et,Lt.ma=Ne,Lt.width=Q.width,Lt.height=Q.height,Lt.Da=Q.Da,Lt.v=Q.v,Lt.va=Q.va,Lt.j=Q.j,Lt.o=Q.o,Ne.$a)e:{t(Ne.$a==1),Q=nt();t:for(;;){if(Q==null){Q=0;break e}if(t(Ne!=null),Ne.mc=Q,Q.c=Ne.c,Q.i=Ne.i,Q.l=Ne.l,Q.l.ma=Ne,Q.l.width=Ne.c,Q.l.height=Ne.i,Q.a=0,k(Q.m,Ae,yt,dt),!Ke(Ne.c,Ne.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&me(Q.s)?(Ne.ic=1,Ae=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=i(Ae),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(Ne.ic=0,Q=it(Q,Ne.c)),!Q))break t;Q=1;break e}Ne.mc=null,Q=0}else Q=dt>=Ne.c*Ne.i;Ne=!Q}if(Ne)return null;G.ga.Lc!=1?G.Ga=0:fe=we-ae}t(G.ga!=null),t(ae+fe<=we);e:{if(Q=(Ae=G.ga).c,we=Ae.l.o,Ae.$a==0){if(yt=G.rc,dt=G.Vc,Lt=G.Fa,Pe=G.P+1+ae*Q,Fe=G.mb,Ye=G.nb+ae*Q,t(Pe<=G.P+G.qc),Ae.Z!=0)for(t(_i[Ae.Z]!=null),Ne=0;Ne<fe;++Ne)_i[Ae.Z](yt,dt,Lt,Pe,Fe,Ye,Q),yt=Fe,dt=Ye,Ye+=Q,Pe+=Q;else for(Ne=0;Ne<fe;++Ne)n(Fe,Ye,Lt,Pe,Q),yt=Fe,dt=Ye,Ye+=Q,Pe+=Q;G.rc=yt,G.Vc=dt}else{if(t(Ae.mc!=null),Q=ae+fe,t((Ne=Ae.mc)!=null),t(Q<=Ne.i),Ne.C>=Q)Q=1;else if(Ae.ic||mt(),Ae.ic){Ae=Ne.V,yt=Ne.Ba,dt=Ne.c;var jt=Ne.i,tt=(Lt=1,Pe=Ne.$/dt,Fe=Ne.$%dt,Ye=Ne.m,gt=Ne.s,Ne.$),rt=dt*jt,Ct=dt*Q,Tt=gt.wc,Ot=tt<Ct?pt(gt,Fe,Pe):null;t(tt<=rt),t(Q<=jt),t(me(gt));t:for(;;){for(;!Ye.h&&tt<Ct;){if(Fe&Tt||(Ot=pt(gt,Fe,Pe)),t(Ot!=null),V(Ye),256>(jt=Be(Ot.G[0],Ot.H[0],Ye)))Ae[yt+tt]=jt,++tt,++Fe>=dt&&(Fe=0,++Pe<=Q&&!(Pe%16)&&ke(Ne,Pe));else{if(!(280>jt)){Lt=0;break t}jt=kt(jt-256,Ye);var ur,sr=Be(Ot.G[4],Ot.H[4],Ye);if(V(Ye),!(tt>=(sr=Wt(dt,sr=kt(sr,Ye)))&&rt-tt>=jt)){Lt=0;break t}for(ur=0;ur<jt;++ur)Ae[yt+tt+ur]=Ae[yt+tt+ur-sr];for(tt+=jt,Fe+=jt;Fe>=dt;)Fe-=dt,++Pe<=Q&&!(Pe%16)&&ke(Ne,Pe);tt<Ct&&Fe&Tt&&(Ot=pt(gt,Fe,Pe))}t(Ye.h==Y(Ye))}ke(Ne,Pe>Q?Q:Pe);break t}!Lt||Ye.h&&tt<rt?(Lt=0,Ne.a=Ye.h?5:3):Ne.$=tt,Q=Lt}else Q=Te(Ne,Ne.V,Ne.Ba,Ne.c,Ne.i,Q,st);if(!Q){fe=0;break e}}ae+fe>=we&&(G.Cc=1),fe=1}if(!fe)return null;if(G.Cc&&((fe=G.ga)!=null&&(fe.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+ae*ge}function re(G,Q,ae,fe,ge,we){for(;0<ge--;){var Ne,Ae=G,Pe=Q+(ae?1:0),Fe=G,Ye=Q+(ae?0:3);for(Ne=0;Ne<fe;++Ne){var gt=Fe[Ye+4*Ne];gt!=255&&(gt*=32897,Ae[Pe+4*Ne+0]=Ae[Pe+4*Ne+0]*gt>>23,Ae[Pe+4*Ne+1]=Ae[Pe+4*Ne+1]*gt>>23,Ae[Pe+4*Ne+2]=Ae[Pe+4*Ne+2]*gt>>23)}Q+=we}}function ve(G,Q,ae,fe,ge){for(;0<fe--;){var we;for(we=0;we<ae;++we){var Ne=G[Q+2*we+0],Ae=15&(Fe=G[Q+2*we+1]),Pe=4369*Ae,Fe=(240&Fe|Fe>>4)*Pe>>16;G[Q+2*we+0]=(240&Ne|Ne>>4)*Pe>>16&240|(15&Ne|Ne<<4)*Pe>>16>>4&15,G[Q+2*we+1]=240&Fe|Ae}Q+=ge}}function $e(G,Q,ae,fe,ge,we,Ne,Ae){var Pe,Fe,Ye=255;for(Fe=0;Fe<ge;++Fe){for(Pe=0;Pe<fe;++Pe){var gt=G[Q+Pe];we[Ne+4*Pe]=gt,Ye&=gt}Q+=ae,Ne+=Ae}return Ye!=255}function Xe(G,Q,ae,fe,ge){var we;for(we=0;we<ge;++we)ae[fe+we]=G[Q+we]>>8}function mt(){as=re,Rn=ve,Sn=$e,ha=Xe}function At(G,Q,ae){O[G]=function(fe,ge,we,Ne,Ae,Pe,Fe,Ye,gt,yt,dt,Lt,jt,tt,rt,Ct,Tt){var Ot,ur=Tt-1>>1,sr=Ae[Pe+0]|Fe[Ye+0]<<16,Or=gt[yt+0]|dt[Lt+0]<<16;t(fe!=null);var or=3*sr+Or+131074>>2;for(Q(fe[ge+0],255&or,or>>16,jt,tt),we!=null&&(or=3*Or+sr+131074>>2,Q(we[Ne+0],255&or,or>>16,rt,Ct)),Ot=1;Ot<=ur;++Ot){var fn=Ae[Pe+Ot]|Fe[Ye+Ot]<<16,hn=gt[yt+Ot]|dt[Lt+Ot]<<16,un=sr+fn+Or+hn+524296,Yr=un+2*(fn+Or)>>3;or=Yr+sr>>1,sr=(un=un+2*(sr+hn)>>3)+fn>>1,Q(fe[ge+2*Ot-1],255&or,or>>16,jt,tt+(2*Ot-1)*ae),Q(fe[ge+2*Ot-0],255&sr,sr>>16,jt,tt+(2*Ot-0)*ae),we!=null&&(or=un+Or>>1,sr=Yr+hn>>1,Q(we[Ne+2*Ot-1],255&or,or>>16,rt,Ct+(2*Ot-1)*ae),Q(we[Ne+2*Ot+0],255&sr,sr>>16,rt,Ct+(2*Ot+0)*ae)),sr=fn,Or=hn}1&Tt||(or=3*sr+Or+131074>>2,Q(fe[ge+Tt-1],255&or,or>>16,jt,tt+(Tt-1)*ae),we!=null&&(or=3*Or+sr+131074>>2,Q(we[Ne+Tt-1],255&or,or>>16,rt,Ct+(Tt-1)*ae)))}}function Ht(){ss[o0]=T2,ss[xc]=wc,ss[Zy]=C2,ss[Bf]=Od,ss[$f]=gu,ss[Fn]=Hf,ss[l0]=Am,ss[Td]=wc,ss[hu]=Od,ss[Uf]=gu,ss[qf]=Hf}function cr(G){return G&-16384?0>G?0:255:G>>_c}function Cr(G,Q){return cr((19077*G>>8)+(26149*Q>>8)-14234)}function Kr(G,Q,ae){return cr((19077*G>>8)-(6419*Q>>8)-(13320*ae>>8)+8708)}function Gr(G,Q){return cr((19077*G>>8)+(33050*Q>>8)-17685)}function on(G,Q,ae,fe,ge){fe[ge+0]=Cr(G,ae),fe[ge+1]=Kr(G,Q,ae),fe[ge+2]=Gr(G,Q)}function ra(G,Q,ae,fe,ge){fe[ge+0]=Gr(G,Q),fe[ge+1]=Kr(G,Q,ae),fe[ge+2]=Cr(G,ae)}function da(G,Q,ae,fe,ge){var we=Kr(G,Q,ae);Q=we<<3&224|Gr(G,Q)>>3,fe[ge+0]=248&Cr(G,ae)|we>>5,fe[ge+1]=Q}function Sa(G,Q,ae,fe,ge){var we=240&Gr(G,Q)|15;fe[ge+0]=240&Cr(G,ae)|Kr(G,Q,ae)>>4,fe[ge+1]=we}function bi(G,Q,ae,fe,ge){fe[ge+0]=255,on(G,Q,ae,fe,ge+1)}function za(G,Q,ae,fe,ge){ra(G,Q,ae,fe,ge),fe[ge+3]=255}function Ao(G,Q,ae,fe,ge){on(G,Q,ae,fe,ge),fe[ge+3]=255}function Ps(G,Q){return 0>G?0:G>Q?Q:G}function Zs(G,Q,ae){O[G]=function(fe,ge,we,Ne,Ae,Pe,Fe,Ye,gt){for(var yt=Ye+(-2&gt)*ae;Ye!=yt;)Q(fe[ge+0],we[Ne+0],Ae[Pe+0],Fe,Ye),Q(fe[ge+1],we[Ne+0],Ae[Pe+0],Fe,Ye+ae),ge+=2,++Ne,++Pe,Ye+=2*ae;1&gt&&Q(fe[ge+0],we[Ne+0],Ae[Pe+0],Fe,Ye)}}function gc(G,Q,ae){return ae==0?G==0?Q==0?6:5:Q==0?4:0:ae}function Rf(G,Q,ae,fe,ge){switch(G>>>30){case 3:El(Q,ae,fe,ge,0);break;case 2:gn(Q,ae,fe,ge);break;case 1:wi(Q,ae,fe,ge)}}function yd(G,Q){var ae,fe,ge=Q.M,we=Q.Nb,Ne=G.oc,Ae=G.pc+40,Pe=G.oc,Fe=G.pc+584,Ye=G.oc,gt=G.pc+600;for(ae=0;16>ae;++ae)Ne[Ae+32*ae-1]=129;for(ae=0;8>ae;++ae)Pe[Fe+32*ae-1]=129,Ye[gt+32*ae-1]=129;for(0<ge?Ne[Ae-1-32]=Pe[Fe-1-32]=Ye[gt-1-32]=129:(a(Ne,Ae-32-1,127,21),a(Pe,Fe-32-1,127,9),a(Ye,gt-32-1,127,9)),fe=0;fe<G.za;++fe){var yt=Q.ya[Q.aa+fe];if(0<fe){for(ae=-1;16>ae;++ae)n(Ne,Ae+32*ae-4,Ne,Ae+32*ae+12,4);for(ae=-1;8>ae;++ae)n(Pe,Fe+32*ae-4,Pe,Fe+32*ae+4,4),n(Ye,gt+32*ae-4,Ye,gt+32*ae+4,4)}var dt=G.Gd,Lt=G.Hd+fe,jt=yt.ad,tt=yt.Hc;if(0<ge&&(n(Ne,Ae-32,dt[Lt].y,0,16),n(Pe,Fe-32,dt[Lt].f,0,8),n(Ye,gt-32,dt[Lt].ea,0,8)),yt.Za){var rt=Ne,Ct=Ae-32+16;for(0<ge&&(fe>=G.za-1?a(rt,Ct,dt[Lt].y[15],4):n(rt,Ct,dt[Lt+1].y,0,4)),ae=0;4>ae;ae++)rt[Ct+128+ae]=rt[Ct+256+ae]=rt[Ct+384+ae]=rt[Ct+0+ae];for(ae=0;16>ae;++ae,tt<<=2)rt=Ne,Ct=Ae+Tm[ae],eo[yt.Ob[ae]](rt,Ct),Rf(tt,jt,16*+ae,rt,Ct)}else if(rt=gc(fe,ge,yt.Ob[0]),Bi[rt](Ne,Ae),tt!=0)for(ae=0;16>ae;++ae,tt<<=2)Rf(tt,jt,16*+ae,Ne,Ae+Tm[ae]);for(ae=yt.Gc,rt=gc(fe,ge,yt.Dd),is[rt](Pe,Fe),is[rt](Ye,gt),tt=jt,rt=Pe,Ct=Fe,255&(yt=ae>>0)&&(170&yt?Al(tt,256,rt,Ct):Os(tt,256,rt,Ct)),yt=Ye,tt=gt,255&(ae>>=8)&&(170&ae?Al(jt,320,yt,tt):Os(jt,320,yt,tt)),ge<G.Ub-1&&(n(dt[Lt].y,0,Ne,Ae+480,16),n(dt[Lt].f,0,Pe,Fe+224,8),n(dt[Lt].ea,0,Ye,gt+224,8)),ae=8*we*G.B,dt=G.sa,Lt=G.ta+16*fe+16*we*G.R,jt=G.qa,yt=G.ra+8*fe+ae,tt=G.Ha,rt=G.Ia+8*fe+ae,ae=0;16>ae;++ae)n(dt,Lt+ae*G.R,Ne,Ae+32*ae,16);for(ae=0;8>ae;++ae)n(jt,yt+ae*G.B,Pe,Fe+32*ae,8),n(tt,rt+ae*G.B,Ye,gt+32*ae,8)}}function iu(G,Q,ae,fe,ge,we,Ne,Ae,Pe){var Fe=[0],Ye=[0],gt=0,yt=Pe!=null?Pe.kd:0,dt=Pe??new pc;if(G==null||12>ae)return 7;dt.data=G,dt.w=Q,dt.ha=ae,Q=[Q],ae=[ae],dt.gb=[dt.gb];e:{var Lt=Q,jt=ae,tt=dt.gb;if(t(G!=null),t(jt!=null),t(tt!=null),tt[0]=0,12<=jt[0]&&!e(G,Lt[0],"RIFF")){if(e(G,Lt[0]+8,"WEBP")){tt=3;break e}var rt=ce(G,Lt[0]+4);if(12>rt||4294967286<rt){tt=3;break e}if(yt&&rt>jt[0]-8){tt=7;break e}tt[0]=rt,Lt[0]+=12,jt[0]-=12}tt=0}if(tt!=0)return tt;for(rt=0<dt.gb[0],ae=ae[0];;){e:{var Ct=G;jt=Q,tt=ae;var Tt=Fe,Ot=Ye,ur=Lt=[0];if((or=gt=[gt])[0]=0,8>tt[0])tt=7;else{if(!e(Ct,jt[0],"VP8X")){if(ce(Ct,jt[0]+4)!=10){tt=3;break e}if(18>tt[0]){tt=7;break e}var sr=ce(Ct,jt[0]+8),Or=1+se(Ct,jt[0]+12);if(2147483648<=Or*(Ct=1+se(Ct,jt[0]+15))){tt=3;break e}ur!=null&&(ur[0]=sr),Tt!=null&&(Tt[0]=Or),Ot!=null&&(Ot[0]=Ct),jt[0]+=18,tt[0]-=18,or[0]=1}tt=0}}if(gt=gt[0],Lt=Lt[0],tt!=0)return tt;if(jt=!!(2&Lt),!rt&&gt)return 3;if(we!=null&&(we[0]=!!(16&Lt)),Ne!=null&&(Ne[0]=jt),Ae!=null&&(Ae[0]=0),Ne=Fe[0],Lt=Ye[0],gt&&jt&&Pe==null){tt=0;break}if(4>ae){tt=7;break}if(rt&&gt||!rt&&!gt&&!e(G,Q[0],"ALPH")){ae=[ae],dt.na=[dt.na],dt.P=[dt.P],dt.Sa=[dt.Sa];e:{sr=G,tt=Q,rt=ae;var or=dt.gb;Tt=dt.na,Ot=dt.P,ur=dt.Sa,Or=22,t(sr!=null),t(rt!=null),Ct=tt[0];var fn=rt[0];for(t(Tt!=null),t(ur!=null),Tt[0]=null,Ot[0]=null,ur[0]=0;;){if(tt[0]=Ct,rt[0]=fn,8>fn){tt=7;break e}var hn=ce(sr,Ct+4);if(4294967286<hn){tt=3;break e}var un=8+hn+1&-2;if(Or+=un,0<or&&Or>or){tt=3;break e}if(!e(sr,Ct,"VP8 ")||!e(sr,Ct,"VP8L")){tt=0;break e}if(fn[0]<un){tt=7;break e}e(sr,Ct,"ALPH")||(Tt[0]=sr,Ot[0]=Ct+8,ur[0]=hn),Ct+=un,fn-=un}}if(ae=ae[0],dt.na=dt.na[0],dt.P=dt.P[0],dt.Sa=dt.Sa[0],tt!=0)break}ae=[ae],dt.Ja=[dt.Ja],dt.xa=[dt.xa];e:if(or=G,tt=Q,rt=ae,Tt=dt.gb[0],Ot=dt.Ja,ur=dt.xa,sr=tt[0],Ct=!e(or,sr,"VP8 "),Or=!e(or,sr,"VP8L"),t(or!=null),t(rt!=null),t(Ot!=null),t(ur!=null),8>rt[0])tt=7;else{if(Ct||Or){if(or=ce(or,sr+4),12<=Tt&&or>Tt-12){tt=3;break e}if(yt&&or>rt[0]-8){tt=7;break e}Ot[0]=or,tt[0]+=8,rt[0]-=8,ur[0]=Or}else ur[0]=5<=rt[0]&&or[sr+0]==47&&!(or[sr+4]>>5),Ot[0]=rt[0];tt=0}if(ae=ae[0],dt.Ja=dt.Ja[0],dt.xa=dt.xa[0],Q=Q[0],tt!=0)break;if(4294967286<dt.Ja)return 3;if(Ae==null||jt||(Ae[0]=dt.xa?2:1),Ne=[Ne],Lt=[Lt],dt.xa){if(5>ae){tt=7;break}Ae=Ne,yt=Lt,jt=we,G==null||5>ae?G=0:5<=ae&&G[Q+0]==47&&!(G[Q+4]>>5)?(rt=[0],or=[0],Tt=[0],k(Ot=new L,G,Q,ae),ht(Ot,rt,or,Tt)?(Ae!=null&&(Ae[0]=rt[0]),yt!=null&&(yt[0]=or[0]),jt!=null&&(jt[0]=Tt[0]),G=1):G=0):G=0}else{if(10>ae){tt=7;break}Ae=Lt,G==null||10>ae||!cn(G,Q+3,ae-3)?G=0:(yt=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,jt=16383&(G[Q+7]<<8|G[Q+6]),G=16383&(G[Q+9]<<8|G[Q+8]),1&yt||3<(yt>>1&7)||!(yt>>4&1)||yt>>5>=dt.Ja||!jt||!G?G=0:(Ne&&(Ne[0]=jt),Ae&&(Ae[0]=G),G=1))}if(!G||(Ne=Ne[0],Lt=Lt[0],gt&&(Fe[0]!=Ne||Ye[0]!=Lt)))return 3;Pe!=null&&(Pe[0]=dt,Pe.offset=Q-Pe.w,t(4294967286>Q-Pe.w),t(Pe.offset==Pe.ha-ae));break}return tt==0||tt==7&&gt&&Pe==null?(we!=null&&(we[0]|=dt.na!=null&&0<dt.na.length),fe!=null&&(fe[0]=Ne),ge!=null&&(ge[0]=Lt),0):tt}function vd(G,Q,ae){var fe=Q.width,ge=Q.height,we=0,Ne=0,Ae=fe,Pe=ge;if(Q.Da=G!=null&&0<G.Da,Q.Da&&(Ae=G.cd,Pe=G.bd,we=G.v,Ne=G.j,11>ae||(we&=-2,Ne&=-2),0>we||0>Ne||0>=Ae||0>=Pe||we+Ae>fe||Ne+Pe>ge))return 0;if(Q.v=we,Q.j=Ne,Q.va=we+Ae,Q.o=Ne+Pe,Q.U=Ae,Q.T=Pe,Q.da=G!=null&&0<G.da,Q.da){if(!pe(Ae,Pe,ae=[G.ib],we=[G.hb]))return 0;Q.ib=ae[0],Q.hb=we[0]}return Q.ob=G!=null&&G.ob,Q.Kb=G==null||!G.Sd,Q.da&&(Q.ob=Q.ib<3*fe/4&&Q.hb<3*ge/4,Q.Kb=0),1}function bd(G){if(G==null)return 2;if(11>G.S){var Q=G.f.RGBA;Q.fb+=(G.height-1)*Q.A,Q.A=-Q.A}else Q=G.f.kb,G=G.height,Q.O+=(G-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(G-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(G-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(G-1)*Q.lb,Q.lb=-Q.lb);return 0}function su(G,Q,ae,fe){if(fe==null||0>=G||0>=Q)return 2;if(ae!=null){if(ae.Da){var ge=ae.cd,we=ae.bd,Ne=-2&ae.v,Ae=-2&ae.j;if(0>Ne||0>Ae||0>=ge||0>=we||Ne+ge>G||Ae+we>Q)return 2;G=ge,Q=we}if(ae.da){if(!pe(G,Q,ge=[ae.ib],we=[ae.hb]))return 2;G=ge[0],Q=we[0]}}fe.width=G,fe.height=Q;e:{var Pe=fe.width,Fe=fe.height;if(G=fe.S,0>=Pe||0>=Fe||!(G>=o0&&13>G))G=2;else{if(0>=fe.Rd&&fe.sd==null){Ne=we=ge=Q=0;var Ye=(Ae=Pe*Vf[G])*Fe;if(11>G||(we=(Fe+1)/2*(Q=(Pe+1)/2),G==12&&(Ne=(ge=Pe)*Fe)),(Fe=i(Ye+2*we+Ne))==null){G=1;break e}fe.sd=Fe,11>G?((Pe=fe.f.RGBA).eb=Fe,Pe.fb=0,Pe.A=Ae,Pe.size=Ye):((Pe=fe.f.kb).y=Fe,Pe.O=0,Pe.fa=Ae,Pe.Fd=Ye,Pe.f=Fe,Pe.N=0+Ye,Pe.Ab=Q,Pe.Cd=we,Pe.ea=Fe,Pe.W=0+Ye+we,Pe.Db=Q,Pe.Ed=we,G==12&&(Pe.F=Fe,Pe.J=0+Ye+2*we),Pe.Tc=Ne,Pe.lb=ge)}if(Q=1,ge=fe.S,we=fe.width,Ne=fe.height,ge>=o0&&13>ge)if(11>ge)G=fe.f.RGBA,Q&=(Ae=Math.abs(G.A))*(Ne-1)+we<=G.size,Q&=Ae>=we*Vf[ge],Q&=G.eb!=null;else{G=fe.f.kb,Ae=(we+1)/2,Ye=(Ne+1)/2,Pe=Math.abs(G.fa),Fe=Math.abs(G.Ab);var gt=Math.abs(G.Db),yt=Math.abs(G.lb),dt=yt*(Ne-1)+we;Q&=Pe*(Ne-1)+we<=G.Fd,Q&=Fe*(Ye-1)+Ae<=G.Cd,Q=(Q&=gt*(Ye-1)+Ae<=G.Ed)&Pe>=we&Fe>=Ae&gt>=Ae,Q&=G.y!=null,Q&=G.f!=null,Q&=G.ea!=null,ge==12&&(Q&=yt>=we,Q&=dt<=G.Tc,Q&=G.F!=null)}else Q=0;G=Q?0:2}}return G!=0||ae!=null&&ae.fd&&(G=bd(fe)),G}var fa=64,xd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wd=24,_d=32,Sd=8,Ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(G){return G},O.Predictor2=function(G,Q,ae){return Q[ae+0]},O.Predictor3=function(G,Q,ae){return Q[ae+1]},O.Predictor4=function(G,Q,ae){return Q[ae-1]},O.Predictor5=function(G,Q,ae){return Me(Me(G,Q[ae+1]),Q[ae+0])},O.Predictor6=function(G,Q,ae){return Me(G,Q[ae-1])},O.Predictor7=function(G,Q,ae){return Me(G,Q[ae+0])},O.Predictor8=function(G,Q,ae){return Me(Q[ae-1],Q[ae+0])},O.Predictor9=function(G,Q,ae){return Me(Q[ae+0],Q[ae+1])},O.Predictor10=function(G,Q,ae){return Me(Me(G,Q[ae-1]),Me(Q[ae+0],Q[ae+1]))},O.Predictor11=function(G,Q,ae){var fe=Q[ae+0];return 0>=qe(fe>>24&255,G>>24&255,(Q=Q[ae-1])>>24&255)+qe(fe>>16&255,G>>16&255,Q>>16&255)+qe(fe>>8&255,G>>8&255,Q>>8&255)+qe(255&fe,255&G,255&Q)?fe:G},O.Predictor12=function(G,Q,ae){var fe=Q[ae+0];return(Re((G>>24&255)+(fe>>24&255)-((Q=Q[ae-1])>>24&255))<<24|Re((G>>16&255)+(fe>>16&255)-(Q>>16&255))<<16|Re((G>>8&255)+(fe>>8&255)-(Q>>8&255))<<8|Re((255&G)+(255&fe)-(255&Q)))>>>0},O.Predictor13=function(G,Q,ae){var fe=Q[ae-1];return(He((G=Me(G,Q[ae+0]))>>24&255,fe>>24&255)<<24|He(G>>16&255,fe>>16&255)<<16|He(G>>8&255,fe>>8&255)<<8|He(G>>0&255,fe>>0&255))>>>0};var ou=O.PredictorAdd0;O.PredictorAdd1=ct,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var Nl=O.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",(function(G){return G>>8&255}),(function(G){return G})),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(G){return G}),(function(G){return G>>8&255}));var s0,Fi=O.ColorIndexInverseTransform,Nd=O.MapARGB,Ff=O.VP8LColorIndexInverseTransformAlpha,jd=O.MapAlpha,Go=O.VP8LPredictorsAdd=[];Go.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var yc,Di,xi,vc,jl,kl,kd,El,gn,Al,wi,Os,lu,Df,cu,uu,du,Is,Tl,Ko,Cl,Pl,bc,ni,as,Rn,Sn,ha,Na=i(511),Xo=i(2041),Ed=i(225),fu=i(767),Lf=0,Yo=Xo,Ad=Ed,Li=fu,Qs=Na,o0=0,xc=1,Zy=2,Bf=3,$f=4,Fn=5,l0=6,Td=7,hu=8,Uf=9,qf=10,zf=[2,3,7],c0=[3,3,11],pu=[280,256,256,256,40],Qy=[0,1,1,1,0],j2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],k2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],e1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],u0=8,Cd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Wf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],mu=null,jm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],km=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],t1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],r1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],E2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],A2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Em=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Bi=[],eo=[],is=[],Jo=1,Pd=2,_i=[],ss=[];At("UpsampleRgbLinePair",on,3),At("UpsampleBgrLinePair",ra,3),At("UpsampleRgbaLinePair",Ao,4),At("UpsampleBgraLinePair",za,4),At("UpsampleArgbLinePair",bi,4),At("UpsampleRgba4444LinePair",Sa,2),At("UpsampleRgb565LinePair",da,2);var T2=O.UpsampleRgbLinePair,C2=O.UpsampleBgrLinePair,wc=O.UpsampleRgbaLinePair,Od=O.UpsampleBgraLinePair,gu=O.UpsampleArgbLinePair,Hf=O.UpsampleRgba4444LinePair,Am=O.UpsampleRgb565LinePair,Ol=16,To=1<<Ol-1,Nn=-227,Tn=482,_c=6,ai=0,os=i(256),yu=i(256),Id=i(256),ls=i(256),d0=i(Tn-Nn),n1=i(Tn-Nn);Zs("YuvToRgbRow",on,3),Zs("YuvToBgrRow",ra,3),Zs("YuvToRgbaRow",Ao,4),Zs("YuvToBgraRow",za,4),Zs("YuvToArgbRow",bi,4),Zs("YuvToRgba4444Row",Sa,2),Zs("YuvToRgb565Row",da,2);var Tm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vu=[0,2,8],a1=[8,7,6,4,4,2,2,2,1,1,1,1],Il=1;this.WebPDecodeRGBA=function(G,Q,ae,fe,ge){var we=xc,Ne=new Vo,Ae=new pr;Ne.ba=Ae,Ae.S=we,Ae.width=[Ae.width],Ae.height=[Ae.height];var Pe=Ae.width,Fe=Ae.height,Ye=new vr;if(Ye==null||G==null)var gt=2;else t(Ye!=null),gt=iu(G,Q,ae,Ye.width,Ye.height,Ye.Pd,Ye.Qd,Ye.format,null);if(gt!=0?Pe=0:(Pe!=null&&(Pe[0]=Ye.width[0]),Fe!=null&&(Fe[0]=Ye.height[0]),Pe=1),Pe){Ae.width=Ae.width[0],Ae.height=Ae.height[0],fe!=null&&(fe[0]=Ae.width),ge!=null&&(ge[0]=Ae.height);e:{if(fe=new mr,(ge=new pc).data=G,ge.w=Q,ge.ha=ae,ge.kd=1,Q=[0],t(ge!=null),((G=iu(ge.data,ge.w,ge.ha,null,null,null,Q,null,ge))==0||G==7)&&Q[0]&&(G=4),(Q=G)==0){if(t(Ne!=null),fe.data=ge.data,fe.w=ge.w+ge.offset,fe.ha=ge.ha-ge.offset,fe.put=Ue,fe.ac=xr,fe.bc=et,fe.ma=Ne,ge.xa){if((G=nt())==null){Ne=1;break e}if((function(yt,dt){var Lt=[0],jt=[0],tt=[0];t:for(;;){if(yt==null)return 0;if(dt==null)return yt.a=2,0;if(yt.l=dt,yt.a=0,k(yt.m,dt.data,dt.w,dt.ha),!ht(yt.m,Lt,jt,tt)){yt.a=3;break t}if(yt.xb=Pd,dt.width=Lt[0],dt.height=jt[0],!Ke(Lt[0],jt[0],1,yt,null))break t;return 1}return t(yt.a!=0),0})(G,fe)){if(fe=(Q=su(fe.width,fe.height,Ne.Oa,Ne.ba))==0){t:{fe=G;r:for(;;){if(fe==null){fe=0;break t}if(t(fe.s.yc!=null),t(fe.s.Ya!=null),t(0<fe.s.Wb),t((ae=fe.l)!=null),t((ge=ae.ma)!=null),fe.xb!=0){if(fe.ca=ge.ba,fe.tb=ge.tb,t(fe.ca!=null),!vd(ge.Oa,ae,Bf)){fe.a=2;break r}if(!it(fe,ae.width)||ae.da)break r;if((ae.da||Bt(fe.ca.S))&&mt(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&mt()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!ue(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!Te(fe,fe.V,fe.Ba,fe.c,fe.i,ae.o,xe))break r;ge.Dc=fe.Ma,fe=1;break t}t(fe.a!=0),fe=0}fe=!fe}fe&&(Q=G.a)}else Q=G.a}else{if((G=new Pr)==null){Ne=1;break e}if(G.Fa=ge.na,G.P=ge.P,G.qc=ge.Sa,An(G,fe)){if((Q=su(fe.width,fe.height,Ne.Oa,Ne.ba))==0){if(G.Aa=0,ae=Ne.Oa,t((ge=G)!=null),ae!=null){if(0<(Pe=0>(Pe=ae.Md)?0:100<Pe?255:255*Pe/100)){for(Fe=Ye=0;4>Fe;++Fe)12>(gt=ge.pb[Fe]).lc&&(gt.ia=Pe*a1[0>gt.lc?0:gt.lc]>>3),Ye|=gt.ia;Ye&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=ae.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}Ia(G,fe)||(Q=G.a)}}else Q=G.a}Q==0&&Ne.Oa!=null&&Ne.Oa.fd&&(Q=bd(Ne.ba))}Ne=Q}we=Ne!=0?null:11>we?Ae.f.RGBA.eb:Ae.f.kb.y}else we=null;return we};var Vf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,M){for(var z="",U=0;U<4;U++)z+=String.fromCharCode(O[M++]);return z}function u(O,M){return(O[M+0]<<0|O[M+1]<<8|O[M+2]<<16)>>>0}function f(O,M){return(O[M+0]<<0|O[M+1]<<8|O[M+2]<<16|O[M+3]<<24)>>>0}new l;var h=[0],p=[0],g=[],y=new l,m=r,v=(function(O,M){var z={},U=0,D=!1,T=0,R=0;if(z.frames=[],!(function(K,Y,Z,V){for(var ee=0;ee<V;ee++)if(K[Y+ee]!=Z.charCodeAt(ee))return!0;return!1})(O,M,"RIFF",4)){var C,N;for(f(O,M+=4),M+=8;M<O.length;){var E=c(O,M),k=f(O,M+=4);M+=4;var P=k+(1&k);switch(E){case"VP8 ":case"VP8L":z.frames[U]===void 0&&(z.frames[U]={}),(L=z.frames[U]).src_off=D?R:M-8,L.src_size=T+k+8,U++,D&&(D=!1,T=0,R=0);break;case"VP8X":(L=z.header={}).feature_flags=O[M];var q=M+4;L.canvas_width=1+u(O,q),q+=3,L.canvas_height=1+u(O,q),q+=3;break;case"ALPH":D=!0,T=P+8,R=M-8;break;case"ANIM":(L=z.header).bgcolor=f(O,M),q=M+4,L.loop_count=(C=O)[(N=q)+0]<<0|C[N+1]<<8,q+=2;break;case"ANMF":var H,L;(L=z.frames[U]={}).offset_x=2*u(O,M),M+=3,L.offset_y=2*u(O,M),M+=3,L.width=1+u(O,M),M+=3,L.height=1+u(O,M),M+=3,L.duration=u(O,M),M+=3,H=O[M++],L.dispose=1&H,L.blend=H>>1&1}E!="ANMF"&&(M+=P)}return z}})(m,0);v.response=m,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,x=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],p=[b.canvas_width];for(var S=0;S<x.length&&x[S].blend!=0;S++);}var _=x[0],I=y.WebPDecodeRGBA(m,_.src_off,_.src_size,p,h);_.rgba=I,_.imgwidth=p[0],_.imgheight=h[0];for(var A=0;A<p[0]*h[0]*4;A++)g[A]=I[A];return this.width=p,this.height=h,this.data=g,this}(function(r){var t=function(){return typeof c6=="function"},e=function(h,p,g,y){var m=4,v=s;switch(y){case r.image_compression.FAST:m=1,v=i;break;case r.image_compression.MEDIUM:m=6,v=o;break;case r.image_compression.SLOW:m=9,v=l}h=n(h,p,g,v);var b=c6(h,{level:m});return r.__addimage__.arrayBufferToBinaryString(b)},n=function(h,p,g,y){for(var m,v,b,x=h.length/p,S=new Uint8Array(h.length+x),_=u(),I=0;I<x;I+=1){if(b=I*p,m=h.subarray(b,b+p),y)S.set(y(m,g,v),b+I);else{for(var A,O=_.length,M=[];A<O;A+=1)M[A]=_[A](m,g,v);var z=f(M.concat());S.set(M[z],b+I)}v=m}return S},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},i=function(h,p){var g,y=[],m=h.length;y[0]=1;for(var v=0;v<m;v+=1)g=h[v-p]||0,y[v+1]=h[v]-g+256&255;return y},s=function(h,p,g){var y,m=[],v=h.length;m[0]=2;for(var b=0;b<v;b+=1)y=g&&g[b]||0,m[b+1]=h[b]-y+256&255;return m},o=function(h,p,g){var y,m,v=[],b=h.length;v[0]=3;for(var x=0;x<b;x+=1)y=h[x-p]||0,m=g&&g[x]||0,v[x+1]=h[x]+256-(y+m>>>1)&255;return v},l=function(h,p,g){var y,m,v,b,x=[],S=h.length;x[0]=4;for(var _=0;_<S;_+=1)y=h[_-p]||0,m=g&&g[_]||0,v=g&&g[_-p]||0,b=c(y,m,v),x[_+1]=h[_]-b+256&255;return x},c=function(h,p,g){if(h===p&&p===g)return h;var y=Math.abs(p-g),m=Math.abs(h-g),v=Math.abs(h+p-g-g);return y<=m&&y<=v?h:m<=v?p:g},u=function(){return[a,i,s,o,l]},f=function(h){var p=h.map((function(g){return g.reduce((function(y,m){return y+Math.abs(m)}),0)}));return p.indexOf(Math.min.apply(null,p))};r.processPNG=function(h,p,g,y){var m,v,b,x,S,_,I,A,O,M,z,U,D,T,R,C=this.decode.FLATE_DECODE,N="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new mX(h)).imgData,v=b.bits,m=b.colorSpace,S=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){O=(A=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,z=new Uint8Array(O*b.colors),M=new Uint8Array(O);var E,k=b.pixelBitlength-b.bits;for(T=0,R=0;T<O;T++){for(D=A[T],E=0;E<k;)z[R++]=D>>>E&255,E+=b.bits;M[T]=D>>>E&255}}if(b.bits===16){O=(A=new Uint32Array(b.decodePixels().buffer)).length,z=new Uint8Array(O*(32/b.pixelBitlength)*b.colors),M=new Uint8Array(O*(32/b.pixelBitlength)),U=b.colors>1,T=0,R=0;for(var P=0;T<O;)D=A[T++],z[R++]=D>>>0&255,U&&(z[R++]=D>>>16&255,D=A[T++],z[R++]=D>>>0&255),M[P++]=D>>>16&255;v=8}y!==r.image_compression.NONE&&t()?(h=e(z,b.width*b.colors,b.colors,y),I=e(M,b.width,1,y)):(h=z,I=M,C=void 0)}if(b.colorType===3&&(m=this.color_spaces.INDEXED,_=b.palette,b.transparency.indexed)){var q=b.transparency.indexed,H=0;for(T=0,O=q.length;T<O;++T)H+=q[T];if((H/=255)===O-1&&q.indexOf(0)!==-1)x=[q.indexOf(0)];else if(H!==O){for(A=b.decodePixels(),M=new Uint8Array(A.length),T=0,O=A.length;T<O;T++)M[T]=q[A[T]];I=e(M,b.width,1)}}var L=(function(K){var Y;switch(K){case r.image_compression.FAST:Y=11;break;case r.image_compression.MEDIUM:Y=13;break;case r.image_compression.SLOW:Y=14;break;default:Y=12}return Y})(y);return C===this.decode.FLATE_DECODE&&(N="/Predictor "+L+" "),N+="/Colors "+S+" /BitsPerComponent "+v+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:h,index:p,filter:C,decodeParameters:N,transparency:x,palette:_,sMask:I,predictor:L,width:b.width,height:b.height,bitsPerComponent:v,colorSpace:m}}}})(Fr.API),(function(r){r.processGIF89A=function(t,e,n,a){var i=new gX(t),s=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new $w(100).encode(c,100);return r.processJPEG.call(this,u,e,n,a)},r.processGIF87A=r.processGIF89A})(Fr.API),Wl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:e,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wl.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Gn.log("bit decode error:"+e)}},Wl.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}e!==0&&(this.pos+=4-e)}},Wl.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<r;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Wl.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}r!==0&&(this.pos+=4-r)}},Wl.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=r}},Wl.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&e)/e*255|0,c=(s>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=r}},Wl.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*e;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Wl.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},Wl.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(t,e,n,a){var i=new Wl(t,!1),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new $w(100).encode(l,100);return r.processJPEG.call(this,c,e,n,a)}})(Fr.API),_A.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(t,e,n,a){var i=new _A(t),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new $w(100).encode(l,100);return r.processJPEG.call(this,c,e,n,a)}})(Fr.API),Fr.API.processRGBA=function(r,t,e){for(var n=r.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var u=n[c],f=n[c+1],h=n[c+2],p=n[c+3];i[o++]=u,i[o++]=f,i[o++]=h,s[l++]=p}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Fr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},O0=Fr.API,G1=O0.getCharWidthsArray=function(r,t){var e,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=c.fof?c.fof:1,f=t.doKerning!==!1,h=0,p=r.length,g=0,y=o[0]||l,m=[];for(e=0;e<p;e++)n=r.charCodeAt(e),typeof a.metadata.widthOfString=="function"?m.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(h=f&&$n(c[n])==="object"&&!isNaN(parseInt(c[n][g],10))?c[n][g]/u:0,m.push((o[n]||y)/l+h)),g=n;return m},vA=O0.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return O0.processArabic&&(r=O0.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,a)/e:G1.apply(this,arguments).reduce((function(i,s){return i+s}),0)},bA=function(r,t,e,n){for(var a=[],i=0,s=r.length,o=0;i!==s&&o+t[i]<e;)o+=t[i],i++;a.push(r.slice(0,i));var l=i;for(o=0;i!==s;)o+t[i]>n&&(a.push(r.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&a.push(r.slice(l,i)),a},xA=function(r,t,e){e||(e={});var n,a,i,s,o,l,c,u=[],f=[u],h=e.textIndent||0,p=0,g=0,y=r.split(" "),m=G1.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?y[0].length+2:e.lineIndent||0){var v=Array(l).join(" "),b=[];y.map((function(S){(S=S.split(/\s*\n/)).length>1?b=b.concat(S.map((function(_,I){return(I&&_.length?`
`:"")+_}))):b.push(S[0])})),y=b,l=vA.apply(this,[v,e])}for(i=0,s=y.length;i<s;i++){var x=0;if(n=y[i],l&&n[0]==`
`&&(n=n.substr(1),x=1),h+p+(g=(a=G1.apply(this,[n,e])).reduce((function(S,_){return S+_}),0))>t||x){if(g>t){for(o=bA.apply(this,[n,a,t-(h+p),t]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(u[0]?u[0].length:0)).reduce((function(S,_){return S+_}),0)}else u=[n];f.push(u),h=g+l,p=m}else u.push(n),h+=p+g,p=m}return c=l?function(S,_){return(_?v:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(c)},O0.splitTextToSize=function(r,t,e){var n,a=(e=e||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=e.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(xA.apply(this,[n[o],s,i]));return c},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},n={},a=0;a<t.length;a++)e[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},s=r.__fontmetrics__.compress=function(f){var h,p,g,y,m=["{"];for(var v in f){if(h=f[v],isNaN(parseInt(v,10))?p="'"+v+"'":(v=parseInt(v,10),p=(p=i(v).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=i(h).slice(3),y="-"):(g=i(h).slice(2),y=""),g=y+g.slice(0,-1)+n[g.slice(-1)];else{if($n(h)!=="object")throw new Error("Don't know what to do with value type "+$n(h)+".");g=s(h)}m.push(p+g)}return m.push("}"),m.join("")},o=r.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,y,m={},v=1,b=m,x=[],S="",_="",I=f.length-1,A=1;A<I;A+=1)(y=f[A])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(x.push([b,g]),b={},g=void 0):y=="}"?((p=x.pop())[0][p[1]]=b,g=void 0,b=p[0]):y=="-"?v=-1:g===void 0?e.hasOwnProperty(y)?(S+=e[y],g=parseInt(S,16)*v,v=1,S=""):S+=y:e.hasOwnProperty(y)?(_+=e[y],b[g]=parseInt(_,16)*v,v=1,g=void 0,_=""):_+=y;return m},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(f){var h=f.font,p=u.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=c.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])})(Fr.API),(function(r){var t=function(e){for(var n=e.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=e.charCodeAt(i);return a};r.API.events.push(["addFont",function(e){var n=void 0,a=e.font,i=e.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(_g(o)),s.metadata=r.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])})(Fr),(function(r){function t(){return(qr.canvg?Promise.resolve(qr.canvg):yo(()=>import("./index.es-DvueDMuF.js"),[])).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Fr.API.addSvgAsImage=function(e,n,a,i,s,o,l,c){if(isNaN(n)||isNaN(a))throw Gn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw Gn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=s;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then((function(g){return g.fromString(f,e,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(g){return g.render(h)})).then((function(){p.addImage(u.toDataURL("image/jpeg",1),n,a,i,s,l,c)}))}})(),Fr.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,e);return this},Fr.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,f=0;function h(g,y){var m,v=!1;for(m=0;m<g.length;m+=1)g[m]===y&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)e[o[f]].value=e[o[f]].defaultValue,e[o[f]].explicitSet=!1}if($n(r)==="object"){for(a in r)if(i=r[a],h(o,a)&&i!==void 0){if(e[a].type==="boolean"&&typeof i=="boolean")e[a].value=i;else if(e[a].type==="name"&&h(e[a].valueSet,i))e[a].value=i;else if(e[a].type==="integer"&&Number.isInteger(i))e[a].value=i;else if(e[a].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}e[a].value="["+l.join(" ")+"]"}else e[a].value=e[a].defaultValue;e[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var g,y=[];for(g in e)e[g].explicitSet===!0&&(e[g].type==="name"?y.push("/"+g+" /"+e[g].value):y.push("/"+g+" "+e[g].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},(function(r){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+s.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}})(Fr.API),(function(r){var t=r.API,e=t.pdfEscape16=function(i,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],f=0,h=i.length;f<h;++f){if(o=s.metadata.characterToGlyph(i.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=i.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var s,o,l,c,u,f,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(o=Object.keys(i).sort((function(p,g){return p-g}))).length;f<h;f++)s=o[f],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(c=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var y=c();u({data:p,addLength1:!0,objectId:y}),l("endobj");var m=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+V0(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+V0(o.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+r.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+m+" 0 R"),l("/BaseFont /"+V0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=c();u({data:h,addLength1:!0,objectId:g}),l("endobj");var y=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var m=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+V0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var v=0;v<o.metadata.hmtx.widths.length;v++)o.metadata.hmtx.widths[v]=parseInt(o.metadata.hmtx.widths[v]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+V0(o.fontName)+"/FontDescriptor "+m+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,o=i.text||"",l=i.x,c=i.y,u=i.options||{},f=i.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,y=p,m="",v=0,b="",x=g[y].encoding;if(g[y].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:f};for(b=o,y=p,Array.isArray(o)&&(b=o[0]),v=0;v<b.length;v+=1)g[y].metadata.hasOwnProperty("cmap")&&(s=g[y].metadata.cmap.unicode.codeMap[b[v].charCodeAt(0)]),s||b[v].charCodeAt(0)<256&&g[y].metadata.hasOwnProperty("Unicode")?m+=b[v]:m+="";var S="";return parseInt(y.slice(1))<14||x==="WinAnsiEncoding"?S=h(m,y).split("").map((function(_){return _.charCodeAt(0).toString(16)})).join(""):x==="Identity-H"&&(S=e(m,g[y])),f.isHex=!0,{text:S,x:l,y:c,options:u,mutex:f}};t.events.push(["postProcessText",function(i){var s=i.text||"",o=[],l={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([a(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(a(Object.assign({},l,{text:s[c]})).text);i.text=o}else i.text=a(Object.assign({},l,{text:s})).text}])})(Fr),(function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(Fr.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var a,i,s,o,l,c,u,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,x=0;this.__bidiEngine__={};var S=function(U){var D=U.charCodeAt(),T=D>>8,R=y[T];return R!==void 0?f[256*R+(255&D)]:T===252||T===253?"AL":v.test(T)?"L":T===8?"R":"N"},_=function(U){for(var D,T=0;T<U.length;T++){if((D=S(U.charAt(T)))==="L")return!1;if(D==="R")return!0}return!1},I=function(U,D,T,R){var C,N,E,k,P=D[R];switch(P){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(P="AN");break;case"AL":b=!0,P="R";break;case"WS":P="N";break;case"CS":R<1||R+1>=D.length||(C=T[R-1])!=="EN"&&C!=="AN"||(N=D[R+1])!=="EN"&&N!=="AN"?P="N":b&&(N="AN"),P=N===C?N:"N";break;case"ES":P=(C=R>0?T[R-1]:"B")==="EN"&&R+1<D.length&&D[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&T[R-1]==="EN"){P="EN";break}if(b){P="N";break}for(E=R+1,k=D.length;E<k&&D[E]==="ET";)E++;P=E<k&&D[E]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(k=D.length,E=R+1;E<k&&D[E]==="NSM";)E++;if(E<k){var q=U[R],H=q>=1425&&q<=2303||q===64286;if(C=D[E],H&&(C==="R"||C==="AL")){P="R";break}}}P=R<1||(C=D[R-1])==="B"?"N":T[R-1];break;case"B":b=!1,a=!0,P=x;break;case"S":i=!0,P="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":P="N"}return P},A=function(U,D,T){var R=U.split("");return T&&O(R,T,{hiLevel:x}),R.reverse(),D&&D.reverse(),R.join("")},O=function(U,D,T){var R,C,N,E,k,P=-1,q=U.length,H=0,L=[],K=x?p:h,Y=[];for(b=!1,a=!1,i=!1,C=0;C<q;C++)Y[C]=S(U[C]);for(N=0;N<q;N++){if(k=H,L[N]=I(U,Y,L,N),R=240&(H=K[k][g[L[N]]]),H&=15,D[N]=E=K[H][5],R>0)if(R===16){for(C=P;C<N;C++)D[C]=1;P=-1}else P=-1;if(K[H][6])P===-1&&(P=N);else if(P>-1){for(C=P;C<N;C++)D[C]=E;P=-1}Y[N]==="B"&&(D[N]=0),T.hiLevel|=E}i&&(function(Z,V,ee){for(var B=0;B<ee;B++)if(Z[B]==="S"){V[B]=x;for(var F=B-1;F>=0&&Z[F]==="WS";F--)V[F]=x}})(Y,D,q)},M=function(U,D,T,R,C){if(!(C.hiLevel<U)){if(U===1&&x===1&&!a)return D.reverse(),void(T&&T.reverse());for(var N,E,k,P,q=D.length,H=0;H<q;){if(R[H]>=U){for(k=H+1;k<q&&R[k]>=U;)k++;for(P=H,E=k-1;P<E;P++,E--)N=D[P],D[P]=D[E],D[E]=N,T&&(N=T[P],T[P]=T[E],T[E]=N);H=k}H++}}},z=function(U,D,T){var R=U.split(""),C={hiLevel:x};return T||(T=[]),O(R,T,C),(function(N,E,k){if(k.hiLevel!==0&&u)for(var P,q=0;q<N.length;q++)E[q]===1&&(P=m.indexOf(N[q]))>=0&&(N[q]=m[P+1])})(R,T,C),M(2,R,D,T,C),M(1,R,D,T,C),R.join("")};return this.__bidiEngine__.doBidiReorder=function(U,D,T){if((function(C,N){if(N)for(var E=0;E<C.length;E++)N[E]=E;o===void 0&&(o=_(C)),c===void 0&&(c=_(C))})(U,D),s||!l||c)if(s&&l&&o^c)x=o?1:0,U=A(U,D,T);else if(!s&&l&&c)x=o?1:0,U=z(U,D,T),U=A(U,D);else if(!s||o||l||c){if(s&&!l&&o^c)U=A(U,D),o?(x=0,U=z(U,D,T)):(x=1,U=z(U,D,T),U=A(U,D));else if(s&&o&&!l&&c)x=1,U=z(U,D,T),U=A(U,D);else if(!s&&!l&&o^c){var R=u;o?(x=1,U=z(U,D,T),x=0,u=!1,U=z(U,D,T),u=R):(x=0,U=z(U,D,T),U=A(U,D),x=1,u=!1,U=z(U,D,T),u=R,U=A(U,D))}}else x=0,U=z(U,D,T);else x=o?1:0,U=z(U,D,T);return U},this.__bidiEngine__.setOptions=function(U){U&&(s=U.isInputVisual,l=U.isOutputVisual,o=U.isInputRtl,c=U.isOutputRtl,u=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var a=n.text,i=(n.x,n.y,n.options||{}),s=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,e.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(s=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?s.push([e.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([e.doBidiReorder(a[o])]);n.text=s}else n.text=e.doBidiReorder(a);e.setOptions({isInputVisual:!0})}])})(Fr),Fr.API.TTFFont=(function(){function r(t){var e;if(this.rawData=t,e=this.contents=new gf(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new PX(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new yX(this.contents),this.head=new bX(this),this.name=new NX(this),this.cmap=new UD(this),this.toUnicode={},this.hhea=new xX(this),this.maxp=new jX(this),this.hmtx=new kX(this),this.post=new _X(this),this.os2=new wX(this),this.loca=new CX(this),this.glyf=new EX(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)t=l[s],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(e=a>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var a,i,s,o;for(s=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/e)||0;return s*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r})();var lc,gf=(function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,a;for(a=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)a.push(this.writeByte(t.charCodeAt(e)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,a,i,s,o,l;return t=this.readByte(),e=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*a+16777216*i+65536*s+256*o+l},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)e=t[n],i.push(this.writeByte(e));return i},r})(),yX=(function(){var r;function t(e){var n,a,i;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,a,i,s,o,l,c,u,f,h,p,g,y;for(y in p=Object.keys(e).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),s=Math.floor(f/l),u=16*p-f,(a=new gf).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(s),a.writeShort(u),i=16*p,c=a.pos+i,o=null,g=[],e)for(h=e[y],a.writeString(y),a.writeInt(r(h)),a.writeInt(c),a.writeInt(h.length),g=g.concat(h),y==="head"&&(o=c),c+=h.length;c%4;)g.push(0),c++;return a.write(g),n=2981146554-r(a.data),a.pos=o+8,a.writeUInt32(n),a.data},r=function(e){var n,a,i,s;for(e=qD.call(e);e.length%4;)e.push(0);for(i=new gf(e),a=0,n=0,s=e.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t})(),vX={}.hasOwnProperty,Zc=function(r,t){for(var e in t)vX.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};lc=(function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var bX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new gf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),SA=(function(){function r(t,e){var n,a,i,s,o,l,c,u,f,h,p,g,y,m,v,b,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,i=(function(){var S,_;for(_=[],l=S=0;0<=h?S<h:S>h;l=0<=h?++S:--S)_.push(t.readUInt16());return _})(),t.pos+=2,y=(function(){var S,_;for(_=[],l=S=0;0<=h?S<h:S>h;l=0<=h?++S:--S)_.push(t.readUInt16());return _})(),c=(function(){var S,_;for(_=[],l=S=0;0<=h?S<h:S>h;l=0<=h?++S:--S)_.push(t.readUInt16());return _})(),u=(function(){var S,_;for(_=[],l=S=0;0<=h?S<h:S>h;l=0<=h?++S:--S)_.push(t.readUInt16());return _})(),a=(this.length-t.pos+this.offset)/2,o=(function(){var S,_;for(_=[],l=S=0;0<=a?S<a:S>a;l=0<=a?++S:--S)_.push(t.readUInt16());return _})(),l=v=0,x=i.length;v<x;l=++v)for(m=i[l],n=b=g=y[l];g<=m?b<=m:b>=m;n=g<=m?++b:--b)u[l]===0?s=n+c[l]:(s=o[u[l]/2+(n-g)-(h-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}t.pos=f}return r.encode=function(t,e){var n,a,i,s,o,l,c,u,f,h,p,g,y,m,v,b,x,S,_,I,A,O,M,z,U,D,T,R,C,N,E,k,P,q,H,L,K,Y,Z,V,ee,B,F,X,te,se;switch(R=new gf,s=Object.keys(t).sort((function(ce,ue){return ce-ue})),e){case"macroman":for(y=0,m=(function(){var ce=[];for(g=0;g<256;++g)ce.push(0);return ce})(),b={0:0},i={},C=0,P=s.length;C<P;C++)b[F=t[a=s[C]]]==null&&(b[F]=++y),i[a]={old:t[a],new:b[t[a]]},m[a]=b[t[a]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(m),{charMap:i,subtable:R.data,maxGlyphID:y+1};case"unicode":for(D=[],f=[],x=0,b={},n={},v=c=null,N=0,q=s.length;N<q;N++)b[_=t[a=s[N]]]==null&&(b[_]=++x),n[a]={old:_,new:b[_]},o=b[_]-a,v!=null&&o===c||(v&&f.push(v),D.push(a),c=o),v=a;for(v&&f.push(v),f.push(65535),D.push(65535),z=2*(M=D.length),O=2*Math.pow(Math.log(M)/Math.LN2,2),h=Math.log(O/2)/Math.LN2,A=2*M-O,l=[],I=[],p=[],g=E=0,H=D.length;E<H;g=++E){if(U=D[g],u=f[g],U===65535){l.push(0),I.push(0);break}if(U-(T=n[U].new)>=32768)for(l.push(0),I.push(2*(p.length+M-g)),a=k=U;U<=u?k<=u:k>=u;a=U<=u?++k:--k)p.push(n[a].new);else l.push(T-U),I.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*M+2*p.length),R.writeUInt16(0),R.writeUInt16(z),R.writeUInt16(O),R.writeUInt16(h),R.writeUInt16(A),ee=0,L=f.length;ee<L;ee++)a=f[ee],R.writeUInt16(a);for(R.writeUInt16(0),B=0,K=D.length;B<K;B++)a=D[B],R.writeUInt16(a);for(X=0,Y=l.length;X<Y;X++)o=l[X],R.writeUInt16(o);for(te=0,Z=I.length;te<Z;te++)S=I[te],R.writeUInt16(S);for(se=0,V=p.length;se<V;se++)y=p[se],R.writeUInt16(y);return{charMap:n,subtable:R.data,maxGlyphID:x+1}}},r})(),UD=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,a,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new SA(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var a,i;return n==null&&(n="macroman"),a=SA.encode(e,n),(i=new gf).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t})(),xX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),wX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,a;for(a=[],n=0;n<10;++n)a.push(e.readByte());return a})(),this.charRange=(function(){var n,a;for(a=[],n=0;n<4;++n)a.push(e.readInt());return a})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(e.readInt());return a})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),_X=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="post",t.prototype.parse=function(e){var n,a,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var s;for(a=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return a=e.readUInt16(),this.offsets=e.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t})(),SX=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},NX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="name",t.prototype.parse=function(e){var n,a,i,s,o,l,c,u,f,h,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),l=e.readShort(),a=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=f=0,h=a.length;f<h;s=++f)i=a[s],e.pos=i.offset,u=e.readString(i.length),o=new SX(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),jX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),kX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,a,i,s,o,l,c;for(e.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)f.push(e.readInt16());return f})(),this.widths=(function(){var u,f,h,p;for(p=[],u=0,f=(h=this.metrics).length;u<f;u++)s=h[u],p.push(s.advance);return p}).call(this),a=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(a));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),qD=[].slice,EX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,a,i,s,o,l,c,u,f,h;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,a=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+a,o=(l=new gf(n.read(i))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),f=l.readShort(),this.cache[e]=o===-1?new TX(l,u,h,c,f):new AX(l,o,u,h,c,f),this.cache[e]))},t.prototype.encode=function(e,n,a){var i,s,o,l,c;for(o=[],s=[],l=0,c=n.length;l<c;l++)i=e[n[l]],s.push(o.length),i&&(o=o.concat(i.encode(a)));return s.push(o.length),{table:o,offsets:s}},t})(),AX=(function(){function r(t,e,n,a,i,s){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),TX=(function(){function r(t,e,n,a,i){var s,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new gf(qD.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r})(),CX=(function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return Zc(t,lc),t.prototype.tag="loca",t.prototype.parse=function(e){var n,a;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var a=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<a.length;++o)if(a[o]=i,s<n.length&&n[s]==o){++s,a[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*a.length),f=0;f<a.length;++f)u[4*f+3]=255&a[f],u[4*f+2]=(65280&a[f])>>8,u[4*f+1]=(16711680&a[f])>>16,u[4*f]=(4278190080&a[f])>>24;return u},t})(),PX=(function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,a,i;for(e in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[e],t[e]=a[n];return t},r.prototype.glyphsFor=function(t){var e,n,a,i,s,o,l;for(a={},s=0,o=t.length;s<o;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in e=[],a)(n=a[i])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(i in l=this.glyphsFor(e))n=l[i],a[i]=n;return a},r.prototype.encode=function(t,e){var n,a,i,s,o,l,c,u,f,h,p,g,y,m,v;for(a in n=UD.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),p={0:0},v=n.charMap)p[(l=v[a]).old]=l.new;for(g in h=n.maxGlyphID,s)g in p||(p[g]=h++);return u=(function(b){var x,S;for(x in S={},b)S[b[x]]=x;return S})(p),f=Object.keys(u).sort((function(b,x){return b-x})),y=(function(){var b,x,S;for(S=[],b=0,x=f.length;b<x;b++)o=f[b],S.push(u[o]);return S})(),i=this.font.glyf.encode(s,y,p),c=this.font.loca.encode(i.offsets,y),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},r})();Fr.API.PDFObject=(function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,a,i,s;if(Array.isArray(e))return"["+(function(){var o,l,c;for(c=[],o=0,l=e.length;o<l;o++)n=e[o],c.push(t.convert(n));return c})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(a in i=["<<"],e)s=e[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+e},t})();function zD(r,t,e,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,o=a.internal.getFontSize()/s,l=a.getLineHeightFactor?a.getLineHeightFactor():i,c=o*l,u=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof r=="string"?r.split(u):r,h=f.length||1),e+=o*(2-i),n.valign==="middle"?e-=h/2*c:n.valign==="bottom"&&(e-=h*c),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,e),e+=c;return a}t-=a.getStringUnitWidth(r)*p}return n.halign==="justify"?a.text(r,t,e,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(r,t,e),a}var NA={},op=(function(){function r(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(t,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=t:NA=t},r.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},r.prototype.applyStyles=function(t,e){var n,a,i;e===void 0&&(e=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!e){var u=r.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=r.unifyColor(t.textColor),u&&(a=this.jsPDFDocument).setTextColor.apply(a,u),u=r.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},r.prototype.splitTextToSize=function(t,e,n){return this.jsPDFDocument.splitTextToSize(t,e,n)},r.prototype.rect=function(t,e,n,a,i){return this.jsPDFDocument.rect(t,e,n,a,i)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return NA||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r})(),g6=function(r,t){return g6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},g6(r,t)};function WD(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");g6(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var HD=(function(r){WD(t,r);function t(e){var n=r.call(this)||this;return n._element=e,n}return t})(Array);function OX(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function IX(r){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[r]}function Kv(r,t,e){e.applyStyles(t,!0);var n=Array.isArray(r)?r:[r],a=n.map(function(i){return e.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function VD(r,t,e,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;r.applyStyles({lineWidth:a,lineColor:i});var s=GD(a,!1);s&&r.rect(e.x,e.y,t.getWidth(r.pageSize().width),n.y-e.y,s)}function GD(r,t){var e=r>0,n=t||t===0;return e&&n?"DF":e?"S":n?"F":null}function Ix(r,t){var e,n,a,i;if(r=r||t,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=t}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(e=r.left)!==null&&e!==void 0?e:t,top:(n=r.top)!==null&&n!==void 0?n:t,right:(a=r.right)!==null&&a!==void 0?a:t,bottom:(i=r.bottom)!==null&&i!==void 0?i:t}):(typeof r!="number"&&(r=t),{top:r,right:r,bottom:r,left:r})}function KD(r,t){var e=Ix(t.settings.margin,0);return r.pageSize().width-(e.left+e.right)}function MX(r,t,e,n,a){var i={},s=1.3333333333333333,o=Uw(t,function(x){return a.getComputedStyle(x).backgroundColor});o!=null&&(i.fillColor=o);var l=Uw(t,function(x){return a.getComputedStyle(x).color});l!=null&&(i.textColor=l);var c=FX(n,e);c&&(i.cellPadding=c);var u="borderTopColor",f=s*e,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(i.lineWidth=p)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var g=Uw(t,function(x){return a.getComputedStyle(x)[u]});g!=null&&(i.lineColor=g);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var m=parseInt(n.fontSize||"");isNaN(m)||(i.fontSize=m/s);var v=RX(n);v&&(i.fontStyle=v);var b=(n.fontFamily||"").toLowerCase();return r.indexOf(b)!==-1&&(i.font=b),i}function RX(r){var t="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(t="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(t+="italic"),t}function Uw(r,t){var e=XD(r,t);if(!e)return null;var n=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function XD(r,t){var e=t(r);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?r.parentElement==null?null:XD(r.parentElement,t):e}function FX(r,t){var e=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/t),a=(parseInt(r.lineHeight)-parseInt(r.fontSize))/t/2,i=e.map(function(o){return parseInt(o||"0")/n}),s=Ix(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function YD(r,t,e,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=e.document.querySelector(t):o=t;var l=Object.keys(r.getFontList()),c=r.scaleFactor(),u=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:u,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],y=(s=(i=g==null?void 0:g.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),m=DX(l,c,e,g,n,a);m&&(y==="thead"?u.push(m):y==="tfoot"?h.push(m):f.push(m))}return{head:u,body:f,foot:h}}function DX(r,t,e,n,a,i){for(var s=new HD(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=e.getComputedStyle(l);if(a||c.display!=="none"){var u=void 0;i&&(u=MX(r,l,t,c,e)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:LX(l)})}}var f=e.getComputedStyle(n);if(s.length>0&&(a||f.display!=="none"))return s}function LX(r){var t=r.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),t.innerText||t.textContent||""}function BX(r,t,e){for(var n=0,a=[r,t,e];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Ou(r,t,e,n,a){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(r),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i}function JD(r,t){var e=new op(r),n=e.getDocumentOptions(),a=e.getGlobalOptions();BX(a,n,t);var i=Ou({},a,n,t),s;typeof window<"u"&&(s=window);var o=$X(a,n,t),l=UX(a,n,t),c=qX(e,i),u=WX(e,i,s);return{id:t.tableId,content:u,hooks:l,styles:o,settings:c}}function $X(r,t,e){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var c=r[l],u=t[l],f=e[l];n.columnStyles=Ou({},c,u,f)}else{var h=[r,t,e],p=h.map(function(g){return g[l]||{}});n[l]=Ou({},p[0],p[1],p[2])}},i=0,s=Object.keys(n);i<s.length;i++){var o=s[i];a(o)}return n}function UX(r,t,e){for(var n=[r,t,e],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var o=s[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function qX(r,t){var e,n,a,i,s,o,l,c,u,f,h,p,g=Ix(t.margin,40/r.scaleFactor()),y=(e=zX(r,t.startY))!==null&&e!==void 0?e:g.top,m;t.showFoot===!0?m="everyPage":t.showFoot===!1?m="never":m=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var v;t.showHead===!0?v="everyPage":t.showHead===!1?v="never":v=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,x=t.theme||(b?"plain":"striped"),S=!!t.horizontalPageBreak,_=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:b,theme:x,startY:y,margin:g,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:v,showFoot:m,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:S,horizontalPageBreakRepeat:_,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function zX(r,t){var e=r.getLastAutoTable(),n=r.scaleFactor(),a=r.pageNumber(),i=!1;if(e&&e.startPageNumber){var s=e.startPageNumber+e.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(e==null?void 0:e.finalY)!=null?e.finalY+20/n:null}function WX(r,t,e){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(e){var o=YD(r,t.html,e,s,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||HX(n,a,i);return{columns:l,head:n,body:a,foot:i}}function HX(r,t,e){var n=r[0]||t[0]||e[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(n)?c=a.length:c=i+(l>0?"_".concat(l):"");var u={dataKey:c};a.push(u)}}),a}var y6=(function(){function r(t,e,n){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=n,this.doc=t.getDocument()}return r})(),VX=(function(r){WD(t,r);function t(e,n,a,i,s,o){var l=r.call(this,e,n,o)||this;return l.cell=a,l.row=i,l.column=s,l.section=i.section,l}return t})(y6),GX=(function(){function r(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return r.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,n){return e+n.getMaxCellHeight(t)},0)},r.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,n){return e+n.getMaxCellHeight(t)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(t,e,n,a,i,s){for(var o=0,l=e;o<l.length;o++){var c=l[o],u=new VX(t,this,n,a,i,s),f=c(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},r.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new y6(t,this,e))}},r.prototype.callWillDrawPageHooks=function(t,e){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new y6(t,this,e))}},r.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return e}else{var n=this.settings.margin;return t-n.left-n.right}},r})(),ZD=(function(){function r(t,e,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof HD&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=n,this.cells=a,this.spansMultiplePages=i}return r.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=e.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},r.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(n){var a=e.cells[n.index];return a?a.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},r.prototype.getMinimumRowHeight=function(t,e){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var o=e.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+o;return c>a?c:a},0)},r})(),QD=(function(){function r(t,e,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return r.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");t=this.y+e/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},r.prototype.getContentHeight=function(t,e){e===void 0&&(e=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*e,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},r.prototype.padding=function(t){var e=Ix(this.styles.cellPadding,0);return t==="vertical"?e.top+e.bottom:t==="horizontal"?e.left+e.right:e[t]},r})(),KX=(function(){function r(t,e,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=n}return r.prototype.getMaxCustomCellWidth=function(t){for(var e=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(e=Math.max(e,s.styles.cellWidth))}return e},r})();function XX(r,t){YX(r,t);var e=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,e.push(i)),n+=i.width});var a=t.getWidth(r.pageSize().width)-n;a&&(a=v6(e,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=v6(e,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/r.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),ZX(t),QX(t,r),JX(t)}function YX(r,t){var e=r.scaleFactor(),n=t.settings.horizontalPageBreak,a=KD(r,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(r,u,c,i,l,null);var f=c.padding("horizontal");c.contentWidth=Kv(c.text,c.styles,r)+f;var h=Kv(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,r);if(c.minReadableWidth=h+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>a?(c.minWidth=a,c.wrappedWidth=a):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/e;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=u.cellWidth||u.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function v6(r,t,e){for(var n=t,a=r.reduce(function(p,g){return p+g.wrappedWidth},0),i=0;i<r.length;i++){var s=r[i],o=s.wrappedWidth/a,l=n*o,c=s.width+l,u=e(s),f=c<u?u:c;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=r.filter(function(p){return t<0?p.width>e(p):!0});h.length&&(t=v6(h,t,e))}return t}function JX(r){for(var t={},e=1,n=r.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,o=r.columns;s<o.length;s++){var l=o[s],c=t[l.index];if(e>1)e--,delete i.cells[l.index];else if(c)c.cell.height+=i.height,e=c.cell.colSpan,delete i.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=i.cells[l.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var f=n.length-a,h=u.rowSpan>f?f:u.rowSpan;t[l.index]={cell:u,left:h,row:i}}}}}function ZX(r){for(var t=r.allRows(),e=0;e<t.length;e++)for(var n=t[e],a=null,i=0,s=0,o=0;o<r.columns.length;o++){var l=r.columns[o];if(s-=1,s>1&&r.columns[o+1])i+=l.width,delete n.cells[l.index];else if(a){var c=a;delete n.cells[l.index],a=null,c.width=l.width+i}else{var c=n.cells[l.index];if(!c)continue;if(s=c.colSpan,i=0,c.colSpan>1){a=c,i+=l.width;continue}c.width=l.width+i}}}function QX(r,t){for(var e={count:0,height:0},n=0,a=r.allRows();n<a.length;n++){for(var i=a[n],s=0,o=r.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=jA(c.text,u,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=jA(c.text,u,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var f=c.styles.overflow(c.text,u);typeof f=="string"?c.text=[f]:c.text=f}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=c.contentHeight/c.rowSpan;c.rowSpan>1&&e.count*e.height<h*c.rowSpan?e={height:h,count:c.rowSpan}:e&&e.count>0&&e.height>h&&(h=e.height),h>i.height&&(i.height=h)}}e.count--}}function jA(r,t,e,n,a){return r.map(function(i){return eY(i,t,e,n,a)})}function eY(r,t,e,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Kv(r,e,n))return r;for(;t<Kv(r+a,e,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+a}function eL(r,t){var e=new op(r),n=tY(t,e.scaleFactor()),a=new GX(t,n);return XX(e,a),e.applyStyles(e.userStyles),a}function tY(r,t){var e=r.content,n=nY(e.columns);if(e.head.length===0){var a=kA(n,"head");a&&e.head.push(a)}if(e.foot.length===0){var a=kA(n,"foot");a&&e.foot.push(a)}var i=r.settings.theme,s=r.styles;return{columns:n,head:qw("head",e.head,n,s,i,t),body:qw("body",e.body,n,s,i,t),foot:qw("foot",e.foot,n,s,i,t)}}function qw(r,t,e,n,a,i){var s={},o=t.map(function(l,c){for(var u=0,f={},h=0,p=0,g=0,y=e;g<y.length;g++){var m=y[g];if(s[m.index]==null||s[m.index].left===0)if(p===0){var v=void 0;Array.isArray(l)?v=l[m.index-h-u]:v=l[m.dataKey];var b={};typeof v=="object"&&!Array.isArray(v)&&(b=(v==null?void 0:v.styles)||{});var x=aY(r,m,c,a,n,i,b),S=new QD(v,x,r);f[m.dataKey]=S,f[m.index]=S,p=S.colSpan-1,s[m.index]={left:S.rowSpan-1,times:p}}else p--,h++;else s[m.index].left--,p=s[m.index].times,u++}return new ZD(l,c,r,f)});return o}function kA(r,t){var e={};return r.forEach(function(n){if(n.raw!=null){var a=rY(t,n.raw);a!=null&&(e[n.dataKey]=a)}}),Object.keys(e).length>0?e:null}function rY(r,t){if(r==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(r==="foot"&&typeof t=="object")return t.footer;return null}function nY(r){return r.map(function(t,e){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:e:a=e,new KX(a,t,e)})}function aY(r,t,e,n,a,i,s){var o=IX(n),l;r==="head"?l=a.headStyles:r==="body"?l=a.bodyStyles:r==="foot"&&(l=a.footStyles);var c=Ou({},o.table,o[r],a.styles,l),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=r==="body"?u:{},h=r==="body"&&e%2===0?Ou({},o.alternateRow,a.alternateRowStyles):{},p=OX(i),g=Ou({},p,c,h,f);return Ou(g,s)}function iY(r,t,e){var n;e===void 0&&(e={});var a=KD(r,t),i=new Map,s=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!i.has(p.index)&&(i.set(p.index,!0),s.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var c=!0,u=(n=e==null?void 0:e.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(i.has(u)){u++;continue}var f=t.columns[u].wrappedWidth;if(c||a>=f)c=!1,s.push(u),o.push(t.columns[u]),a-=f;else break;u++}return{colIndexes:s,columns:o,lastIndex:u-1}}function sY(r,t){for(var e=[],n=0;n<t.columns.length;n++){var a=iY(r,t,{start:n});a.columns.length&&(e.push(a),n=a.lastIndex)}return e}function tL(r,t){var e=t.settings,n=e.startY,a=e.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+s;if(e.pageBreak==="avoid"){var l=t.body,c=l.reduce(function(h,p){return h+p.height},0);o+=c}var u=new op(r);(e.pageBreak==="always"||e.startY!=null&&o>u.pageSize().height)&&(nL(u),i.y=a.top),t.callWillDrawPageHooks(u,i);var f=Ou({},i);t.startPageNumber=u.pageNumber(),e.horizontalPageBreak?oY(u,t,f,i):(u.applyStyles(u.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&t.head.forEach(function(h){return Yu(u,t,h,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;Xv(u,t,h,g,f,i,t.columns)}),u.applyStyles(u.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&t.foot.forEach(function(h){return Yu(u,t,h,i,t.columns)})),VD(u,t,f,i),t.callEndPageHooks(u,i),t.finalY=i.y,r.lastAutoTable=t,u.applyStyles(u.userStyles)}function oY(r,t,e,n){var a=sY(r,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(c,u){r.applyStyles(r.userStyles),u>0?Sg(r,t,e,n,c.columns,!0):EA(r,t,n,c.columns),lY(r,t,e,n,c.columns),zw(r,t,n,c.columns)});else for(var s=-1,o=a[0],l=function(){var c=s;if(o){r.applyStyles(r.userStyles);var u=o.columns;s>=0?Sg(r,t,e,n,u,!0):EA(r,t,n,u),c=AA(r,t,s+1,n,u),zw(r,t,n,u)}var f=c-s;a.slice(1).forEach(function(h){r.applyStyles(r.userStyles),Sg(r,t,e,n,h.columns,!0),AA(r,t,s+1,n,h.columns,f),zw(r,t,n,h.columns)}),s=c};s<t.body.length-1;)l()}function EA(r,t,e,n){var a=t.settings;r.applyStyles(r.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Yu(r,t,i,e,n)})}function lY(r,t,e,n,a){r.applyStyles(r.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;Xv(r,t,i,o,e,n,a)})}function AA(r,t,e,n,a,i){r.applyStyles(r.userStyles),i=i??t.body.length;var s=Math.min(e+i,t.body.length),o=-1;return t.body.slice(e,s).forEach(function(l,c){var u=e+c===t.body.length-1,f=rL(r,t,u,n);l.canEntireRowFit(f,a)&&(Yu(r,t,l,n,a),o=e+c)}),o}function zw(r,t,e,n){var a=t.settings;r.applyStyles(r.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Yu(r,t,i,e,n)})}function cY(r,t,e){var n=e.getLineHeight(r.styles.fontSize),a=r.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function uY(r,t,e,n){var a={};r.spansMultiplePages=!0,r.height=0;for(var i=0,s=0,o=e.columns;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new QD(c.raw,c.styles,c.section);u=Ou(u,c),u.text=[];var f=cY(c,t,n);c.text.length>f&&(u.text=c.text.splice(f,c.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(h,p),c.contentHeight>=t&&(c.contentHeight=t,u.styles.minCellHeight-=t),c.contentHeight>r.height&&(r.height=c.contentHeight),u.contentHeight=u.getContentHeight(h,p),u.contentHeight>i&&(i=u.contentHeight),a[l.index]=u}}var g=new ZD(r.raw,-1,r.section,a,!0);g.height=i;for(var y=0,m=e.columns;y<m.length;y++){var l=m[y],u=g.cells[l.index];u&&(u.height=g.height);var c=r.cells[l.index];c&&(c.height=r.height)}return g}function dY(r,t,e,n){var a=r.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,o=a-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,r),c=l<e;if(l>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function Xv(r,t,e,n,a,i,s){var o=rL(r,t,n,i);if(e.canEntireRowFit(o,s))Yu(r,t,e,i,s);else if(dY(r,e,o,t)){var l=uY(e,o,t,r);Yu(r,t,e,i,s),Sg(r,t,a,i,s),Xv(r,t,l,n,a,i,s)}else Sg(r,t,a,i,s),Xv(r,t,e,n,a,i,s)}function Yu(r,t,e,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],l=e.cells[o.index];if(!l){n.x+=o.width;continue}r.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=t.callCellHooks(r,t.hooks.willDrawCell,l,e,o,n);if(c===!1){n.x+=o.width;continue}fY(r,l,n);var u=l.getTextPos();zD(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},r.getDocument()),t.callCellHooks(r,t.hooks.didDrawCell,l,e,o,n),n.x+=o.width}n.y+=e.height}function fY(r,t,e){var n=t.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=GD(n.lineWidth,n.fillColor);a&&r.rect(t.x,e.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(t.x,e.y,t.width,t.height,"F"),hY(r,t,e,n.lineWidth))}function hY(r,t,e,n){var a,i,s,o;n.top&&(a=e.x,i=e.y,s=e.x+t.width,o=e.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,i,s,o)),n.bottom&&(a=e.x,i=e.y+t.height,s=e.x+t.width,o=e.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,i,s,o)),n.left&&(a=e.x,i=e.y,s=e.x,o=e.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,i,s,o)),n.right&&(a=e.x+t.width,i=e.y,s=e.x+t.width,o=e.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,i,s,o));function l(c,u,f,h,p){r.getDocument().setLineWidth(c),r.getDocument().line(u,f,h,p,"S")}}function rL(r,t,e,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&e)&&(a+=t.getFootHeight(t.columns)),r.pageSize().height-n.y-a}function Sg(r,t,e,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),r.applyStyles(r.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return Yu(r,t,o,n,a)}),t.callEndPageHooks(r,n);var s=t.settings.margin;VD(r,t,e,n),nL(r),t.pageNumber++,n.x=s.left,n.y=s.top,e.y=s.top,t.callWillDrawPageHooks(r,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Yu(r,t,o,n,a)}),r.applyStyles(r.userStyles))}function nL(r){var t=r.pageNumber();r.setPage(t+1);var e=r.pageNumber();return e===t?(r.addPage(),!0):!1}function pY(r){r.API.autoTable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],a=JD(this,n),i=eL(this,a);return tL(this,i),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(t,e,n,a){zD(t,e,n,a,this)},r.API.autoTableSetDefaults=function(t){return op.setDefaults(t,this),this},r.autoTableSetDefaults=function(t,e){op.setDefaults(t,e)},r.API.autoTableHtmlToJson=function(t,e){var n;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new op(this),i=YD(a,t,window,e,!1),s=i.head,o=i.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var Ww;function Ic(r,t){var e=JD(r,t),n=eL(r,e);tL(r,n)}try{if(typeof window<"u"&&window){var TA=window,CA=TA.jsPDF||((Ww=TA.jspdf)===null||Ww===void 0?void 0:Ww.jsPDF);CA&&pY(CA)}}catch(r){console.error("Could not apply autoTable plugin",r)}const aL=6048e5,mY=864e5,iL=6e4,sL=36e5,PA=Symbol.for("constructDateFrom");function gl(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&PA in r?r[PA](t):r instanceof Date?new r.constructor(t):new Date(t)}function hi(r,t){return gl(t||r,r)}function oL(r,t,e){const n=hi(r,e==null?void 0:e.in);return isNaN(t)?gl(r,NaN):(t&&n.setDate(n.getDate()+t),n)}function gY(r,t,e){const n=hi(r,e==null?void 0:e.in);if(isNaN(t))return gl(r,NaN);if(!t)return n;const a=n.getDate(),i=gl(r,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return a>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}let yY={};function Mx(){return yY}function Wg(r,t){var o,l,c,u;const e=Mx(),n=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((u=(c=e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,a=hi(r,t==null?void 0:t.in),i=a.getDay(),s=(i<n?7:0)+i-n;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function Yv(r,t){return Wg(r,{...t,weekStartsOn:1})}function lL(r,t){const e=hi(r,t==null?void 0:t.in),n=e.getFullYear(),a=gl(e,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const i=Yv(a),s=gl(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Yv(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function OA(r){const t=hi(r),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+r-+e}function vY(r,...t){const e=gl.bind(null,t.find(n=>typeof n=="object"));return t.map(e)}function zc(r,t){const e=hi(r,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function bY(r,t,e){const[n,a]=vY(e==null?void 0:e.in,r,t),i=zc(n),s=zc(a),o=+i-OA(i),l=+s-OA(s);return Math.round((o-l)/mY)}function xY(r,t){const e=lL(r,t),n=gl(r,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Yv(n)}function wY(r,t,e){return oL(r,t*7,e)}function _Y(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function SY(r){return!(!_Y(r)&&typeof r!="number"||isNaN(+hi(r)))}function hf(r,t){const e=hi(r,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function xh(r,t){const e=hi(r,t==null?void 0:t.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function wh(r,t){const e=hi(r,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function b6(r,t){const e=hi(r,t==null?void 0:t.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function Jv(r,t){const e=hi(r,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const NY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jY=(r,t,e)=>{let n;const a=NY[r];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function Hw(r){return(t={})=>{const e=t.width?String(t.width):r.defaultWidth;return r.formats[e]||r.formats[r.defaultWidth]}}const kY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},TY={date:Hw({formats:kY,defaultWidth:"full"}),time:Hw({formats:EY,defaultWidth:"full"}),dateTime:Hw({formats:AY,defaultWidth:"full"})},CY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PY=(r,t,e,n)=>CY[r];function Km(r){return(t,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let a;if(n==="formatting"&&r.formattingValues){const s=r.defaultFormattingWidth||r.defaultWidth,o=e!=null&&e.width?String(e.width):s;a=r.formattingValues[o]||r.formattingValues[s]}else{const s=r.defaultWidth,o=e!=null&&e.width?String(e.width):r.defaultWidth;a=r.values[o]||r.values[s]}const i=r.argumentCallback?r.argumentCallback(t):t;return a[i]}}const OY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},RY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LY=(r,t)=>{const e=Number(r),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},BY={ordinalNumber:LY,era:Km({values:OY,defaultWidth:"wide"}),quarter:Km({values:IY,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Km({values:MY,defaultWidth:"wide"}),day:Km({values:RY,defaultWidth:"wide"}),dayPeriod:Km({values:FY,defaultWidth:"wide",formattingValues:DY,defaultFormattingWidth:"wide"})};function Xm(r){return(t,e={})=>{const n=e.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?UY(o,f=>f.test(s)):$Y(o,f=>f.test(s));let c;c=r.valueCallback?r.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c;const u=t.slice(s.length);return{value:c,rest:u}}}function $Y(r,t){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&t(r[e]))return e}function UY(r,t){for(let e=0;e<r.length;e++)if(t(r[e]))return e}function qY(r){return(t,e={})=>{const n=t.match(r.matchPattern);if(!n)return null;const a=n[0],i=t.match(r.parsePattern);if(!i)return null;let s=r.valueCallback?r.valueCallback(i[0]):i[0];s=e.valueCallback?e.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const zY=/^(\d+)(th|st|nd|rd)?/i,WY=/\d+/i,HY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VY={any:[/^b/i,/^(a|c)/i]},GY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},KY={any:[/1/i,/2/i,/3/i,/4/i]},XY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ZY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tJ={ordinalNumber:qY({matchPattern:zY,parsePattern:WY,valueCallback:r=>parseInt(r,10)}),era:Xm({matchPatterns:HY,defaultMatchWidth:"wide",parsePatterns:VY,defaultParseWidth:"any"}),quarter:Xm({matchPatterns:GY,defaultMatchWidth:"wide",parsePatterns:KY,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Xm({matchPatterns:XY,defaultMatchWidth:"wide",parsePatterns:YY,defaultParseWidth:"any"}),day:Xm({matchPatterns:JY,defaultMatchWidth:"wide",parsePatterns:ZY,defaultParseWidth:"any"}),dayPeriod:Xm({matchPatterns:QY,defaultMatchWidth:"any",parsePatterns:eJ,defaultParseWidth:"any"})},rJ={code:"en-US",formatDistance:jY,formatLong:TY,formatRelative:PY,localize:BY,match:tJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nJ(r,t){const e=hi(r,t==null?void 0:t.in);return bY(e,Jv(e))+1}function aJ(r,t){const e=hi(r,t==null?void 0:t.in),n=+Yv(e)-+xY(e);return Math.round(n/aL)+1}function cL(r,t){var u,f,h,p;const e=hi(r,t==null?void 0:t.in),n=e.getFullYear(),a=Mx(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=gl((t==null?void 0:t.in)||r,0);s.setFullYear(n+1,0,i),s.setHours(0,0,0,0);const o=Wg(s,t),l=gl((t==null?void 0:t.in)||r,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=Wg(l,t);return+e>=+o?n+1:+e>=+c?n:n-1}function iJ(r,t){var o,l,c,u;const e=Mx(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((u=(c=e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,a=cL(r,t),i=gl((t==null?void 0:t.in)||r,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Wg(i,t)}function sJ(r,t){const e=hi(r,t==null?void 0:t.in),n=+Wg(e,t)-+iJ(e,t);return Math.round(n/aL)+1}function Dn(r,t){const e=r<0?"-":"",n=Math.abs(r).toString().padStart(t,"0");return e+n}const Yd={y(r,t){const e=r.getFullYear(),n=e>0?e:1-e;return Dn(t==="yy"?n%100:n,t.length)},M(r,t){const e=r.getMonth();return t==="M"?String(e+1):Dn(e+1,2)},d(r,t){return Dn(r.getDate(),t.length)},a(r,t){const e=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(r,t){return Dn(r.getHours()%12||12,t.length)},H(r,t){return Dn(r.getHours(),t.length)},m(r,t){return Dn(r.getMinutes(),t.length)},s(r,t){return Dn(r.getSeconds(),t.length)},S(r,t){const e=t.length,n=r.getMilliseconds(),a=Math.trunc(n*Math.pow(10,e-3));return Dn(a,t.length)}},I0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},IA={G:function(r,t,e){const n=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(r,t,e){if(t==="yo"){const n=r.getFullYear(),a=n>0?n:1-n;return e.ordinalNumber(a,{unit:"year"})}return Yd.y(r,t)},Y:function(r,t,e,n){const a=cL(r,n),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return Dn(s,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):Dn(i,t.length)},R:function(r,t){const e=lL(r);return Dn(e,t.length)},u:function(r,t){const e=r.getFullYear();return Dn(e,t.length)},Q:function(r,t,e){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Dn(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,e){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Dn(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,e){const n=r.getMonth();switch(t){case"M":case"MM":return Yd.M(r,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,e){const n=r.getMonth();switch(t){case"L":return String(n+1);case"LL":return Dn(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,e,n){const a=sJ(r,n);return t==="wo"?e.ordinalNumber(a,{unit:"week"}):Dn(a,t.length)},I:function(r,t,e){const n=aJ(r);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):Dn(n,t.length)},d:function(r,t,e){return t==="do"?e.ordinalNumber(r.getDate(),{unit:"date"}):Yd.d(r,t)},D:function(r,t,e){const n=nJ(r);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):Dn(n,t.length)},E:function(r,t,e){const n=r.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,e,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Dn(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(a,{width:"short",context:"formatting"});case"eeee":default:return e.day(a,{width:"wide",context:"formatting"})}},c:function(r,t,e,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Dn(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(a,{width:"narrow",context:"standalone"});case"cccccc":return e.day(a,{width:"short",context:"standalone"});case"cccc":default:return e.day(a,{width:"wide",context:"standalone"})}},i:function(r,t,e){const n=r.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Dn(a,t.length);case"io":return e.ordinalNumber(a,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,e){const a=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,t,e){const n=r.getHours();let a;switch(n===12?a=I0.noon:n===0?a=I0.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,t,e){const n=r.getHours();let a;switch(n>=17?a=I0.evening:n>=12?a=I0.afternoon:n>=4?a=I0.morning:a=I0.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,t,e){if(t==="ho"){let n=r.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return Yd.h(r,t)},H:function(r,t,e){return t==="Ho"?e.ordinalNumber(r.getHours(),{unit:"hour"}):Yd.H(r,t)},K:function(r,t,e){const n=r.getHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):Dn(n,t.length)},k:function(r,t,e){let n=r.getHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):Dn(n,t.length)},m:function(r,t,e){return t==="mo"?e.ordinalNumber(r.getMinutes(),{unit:"minute"}):Yd.m(r,t)},s:function(r,t,e){return t==="so"?e.ordinalNumber(r.getSeconds(),{unit:"second"}):Yd.s(r,t)},S:function(r,t){return Yd.S(r,t)},X:function(r,t,e){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return RA(n);case"XXXX":case"XX":return dh(n);case"XXXXX":case"XXX":default:return dh(n,":")}},x:function(r,t,e){const n=r.getTimezoneOffset();switch(t){case"x":return RA(n);case"xxxx":case"xx":return dh(n);case"xxxxx":case"xxx":default:return dh(n,":")}},O:function(r,t,e){const n=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+MA(n,":");case"OOOO":default:return"GMT"+dh(n,":")}},z:function(r,t,e){const n=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+MA(n,":");case"zzzz":default:return"GMT"+dh(n,":")}},t:function(r,t,e){const n=Math.trunc(+r/1e3);return Dn(n,t.length)},T:function(r,t,e){return Dn(+r,t.length)}};function MA(r,t=""){const e=r>0?"-":"+",n=Math.abs(r),a=Math.trunc(n/60),i=n%60;return i===0?e+String(a):e+String(a)+t+Dn(i,2)}function RA(r,t){return r%60===0?(r>0?"-":"+")+Dn(Math.abs(r)/60,2):dh(r,t)}function dh(r,t=""){const e=r>0?"-":"+",n=Math.abs(r),a=Dn(Math.trunc(n/60),2),i=Dn(n%60,2);return e+a+t+i}const FA=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},uL=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},oJ=(r,t)=>{const e=r.match(/(P+)(p+)?/)||[],n=e[1],a=e[2];if(!a)return FA(r,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",FA(n,t)).replace("{{time}}",uL(a,t))},lJ={p:uL,P:oJ},cJ=/^D+$/,uJ=/^Y+$/,dJ=["D","DD","YY","YYYY"];function fJ(r){return cJ.test(r)}function hJ(r){return uJ.test(r)}function pJ(r,t,e){const n=mJ(r,t,e);if(console.warn(n),dJ.includes(r))throw new RangeError(n)}function mJ(r,t,e){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vJ=/^'([^]*?)'?$/,bJ=/''/g,xJ=/[a-zA-Z]/;function qt(r,t,e){var u,f,h,p;const n=Mx(),a=n.locale??rJ,i=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,s=n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,o=hi(r,e==null?void 0:e.in);if(!SY(o))throw new RangeError("Invalid time value");let l=t.match(yJ).map(g=>{const y=g[0];if(y==="p"||y==="P"){const m=lJ[y];return m(g,a.formatLong)}return g}).join("").match(gJ).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const y=g[0];if(y==="'")return{isToken:!1,value:wJ(g)};if(IA[y])return{isToken:!0,value:g};if(y.match(xJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(g=>{if(!g.isToken)return g.value;const y=g.value;(hJ(y)||fJ(y))&&pJ(y,t,String(r));const m=IA[y[0]];return m(o,y,a.localize,c)}).join("")}function wJ(r){const t=r.match(vJ);return t?t[1].replace(bJ,"'"):r}function dl(r,t,e){return oL(r,-t,e)}function Cp(r,t){const e=()=>gl(t==null?void 0:t.in,NaN),a=jJ(r);let i;if(a.date){const c=kJ(a.date,2);i=EJ(c.restDateString,c.year)}if(!i||isNaN(+i))return e();const s=+i;let o=0,l;if(a.time&&(o=AJ(a.time),isNaN(o)))return e();if(a.timezone){if(l=TJ(a.timezone),isNaN(l))return e()}else{const c=new Date(s+o),u=hi(0,t==null?void 0:t.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return hi(s+o+l,t==null?void 0:t.in)}const K1={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_J=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,SJ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,NJ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function jJ(r){const t={},e=r.split(K1.dateTimeDelimiter);let n;if(e.length>2)return t;if(/:/.test(e[0])?n=e[0]:(t.date=e[0],n=e[1],K1.timeZoneDelimiter.test(t.date)&&(t.date=r.split(K1.timeZoneDelimiter)[0],n=r.substr(t.date.length,r.length))),n){const a=K1.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function kJ(r,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=r.match(e);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:r.slice((n[1]||n[2]).length)}}function EJ(r,t){if(t===null)return new Date(NaN);const e=r.match(_J);if(!e)return new Date(NaN);const n=!!e[4],a=Ym(e[1]),i=Ym(e[2])-1,s=Ym(e[3]),o=Ym(e[4]),l=Ym(e[5])-1;if(n)return MJ(t,o,l)?CJ(t,o,l):new Date(NaN);{const c=new Date(0);return!OJ(t,i,s)||!IJ(t,a)?new Date(NaN):(c.setUTCFullYear(t,i,Math.max(a,s)),c)}}function Ym(r){return r?parseInt(r):1}function AJ(r){const t=r.match(SJ);if(!t)return NaN;const e=Vw(t[1]),n=Vw(t[2]),a=Vw(t[3]);return RJ(e,n,a)?e*sL+n*iL+a*1e3:NaN}function Vw(r){return r&&parseFloat(r.replace(",","."))||0}function TJ(r){if(r==="Z")return 0;const t=r.match(NJ);if(!t)return 0;const e=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return FJ(n,a)?e*(n*sL+a*iL):NaN}function CJ(r,t,e){const n=new Date(0);n.setUTCFullYear(r,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+e+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const PJ=[31,null,31,30,31,30,31,31,30,31,30,31];function dL(r){return r%400===0||r%4===0&&r%100!==0}function OJ(r,t,e){return t>=0&&t<=11&&e>=1&&e<=(PJ[t]||(dL(r)?29:28))}function IJ(r,t){return t>=1&&t<=(dL(r)?366:365)}function MJ(r,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function RJ(r,t,e){return r===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&r>=0&&r<25}function FJ(r,t){return t>=0&&t<=59}function fL(r,t,e){return gY(r,-t,e)}function DJ(r,t,e){return wY(r,-t,e)}var M0={},Gw,DA;function LJ(){return DA||(DA=1,Gw=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Gw}var Kw={},Jd={},LA;function Vh(){if(LA)return Jd;LA=1;let r;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Jd.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Jd.getSymbolTotalCodewords=function(n){return t[n]},Jd.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n},Jd.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},Jd.isKanjiModeEnabled=function(){return typeof r<"u"},Jd.toSJIS=function(n){return r(n)},Jd}var Xw={},BA;function SN(){return BA||(BA=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,a){if(r.isValid(n))return n;try{return t(n)}catch{return a}}})(Xw)),Xw}var Yw,$A;function BJ(){if($A)return Yw;$A=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},Yw=r,Yw}var Jw,UA;function $J(){if(UA)return Jw;UA=1;function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return r.prototype.set=function(t,e,n,a){const i=t*this.size+e;this.data[i]=n,a&&(this.reservedBit[i]=!0)},r.prototype.get=function(t,e){return this.data[t*this.size+e]},r.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},r.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},Jw=r,Jw}var Zw={},qA;function UJ(){return qA||(qA=1,(function(r){const t=Vh().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,i=t(n),s=i===145?26:Math.ceil((i-13)/(2*a-2))*2,o=[i-7];for(let l=1;l<a-1;l++)o[l]=o[l-1]-s;return o.push(6),o.reverse()},r.getPositions=function(n){const a=[],i=r.getRowColCoords(n),s=i.length;for(let o=0;o<s;o++)for(let l=0;l<s;l++)o===0&&l===0||o===0&&l===s-1||o===s-1&&l===0||a.push([i[o],i[l]]);return a}})(Zw)),Zw}var Qw={},zA;function qJ(){if(zA)return Qw;zA=1;const r=Vh().getSymbolSize,t=7;return Qw.getPositions=function(n){const a=r(n);return[[0,0],[a-t,0],[0,a-t]]},Qw}var e_={},WA;function zJ(){return WA||(WA=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},r.from=function(a){return r.isValid(a)?parseInt(a,10):void 0},r.getPenaltyN1=function(a){const i=a.size;let s=0,o=0,l=0,c=null,u=null;for(let f=0;f<i;f++){o=l=0,c=u=null;for(let h=0;h<i;h++){let p=a.get(f,h);p===c?o++:(o>=5&&(s+=t.N1+(o-5)),c=p,o=1),p=a.get(h,f),p===u?l++:(l>=5&&(s+=t.N1+(l-5)),u=p,l=1)}o>=5&&(s+=t.N1+(o-5)),l>=5&&(s+=t.N1+(l-5))}return s},r.getPenaltyN2=function(a){const i=a.size;let s=0;for(let o=0;o<i-1;o++)for(let l=0;l<i-1;l++){const c=a.get(o,l)+a.get(o,l+1)+a.get(o+1,l)+a.get(o+1,l+1);(c===4||c===0)&&s++}return s*t.N2},r.getPenaltyN3=function(a){const i=a.size;let s=0,o=0,l=0;for(let c=0;c<i;c++){o=l=0;for(let u=0;u<i;u++)o=o<<1&2047|a.get(c,u),u>=10&&(o===1488||o===93)&&s++,l=l<<1&2047|a.get(u,c),u>=10&&(l===1488||l===93)&&s++}return s*t.N3},r.getPenaltyN4=function(a){let i=0;const s=a.data.length;for(let l=0;l<s;l++)i+=a.data[l];return Math.abs(Math.ceil(i*100/s/5)-10)*t.N4};function e(n,a,i){switch(n){case r.Patterns.PATTERN000:return(a+i)%2===0;case r.Patterns.PATTERN001:return a%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(a+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return a*i%2+a*i%3===0;case r.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case r.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(a,i){const s=i.size;for(let o=0;o<s;o++)for(let l=0;l<s;l++)i.isReserved(l,o)||i.xor(l,o,e(a,l,o))},r.getBestMask=function(a,i){const s=Object.keys(r.Patterns).length;let o=0,l=1/0;for(let c=0;c<s;c++){i(c),r.applyMask(c,a);const u=r.getPenaltyN1(a)+r.getPenaltyN2(a)+r.getPenaltyN3(a)+r.getPenaltyN4(a);r.applyMask(c,a),u<l&&(l=u,o=c)}return o}})(e_)),e_}var X1={},HA;function hL(){if(HA)return X1;HA=1;const r=SN(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return X1.getBlocksCount=function(a,i){switch(i){case r.L:return t[(a-1)*4+0];case r.M:return t[(a-1)*4+1];case r.Q:return t[(a-1)*4+2];case r.H:return t[(a-1)*4+3];default:return}},X1.getTotalCodewordsCount=function(a,i){switch(i){case r.L:return e[(a-1)*4+0];case r.M:return e[(a-1)*4+1];case r.Q:return e[(a-1)*4+2];case r.H:return e[(a-1)*4+3];default:return}},X1}var t_={},Jm={},VA;function WJ(){if(VA)return Jm;VA=1;const r=new Uint8Array(512),t=new Uint8Array(256);return(function(){let n=1;for(let a=0;a<255;a++)r[a]=n,t[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)r[a]=r[a-255]})(),Jm.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},Jm.exp=function(n){return r[n]},Jm.mul=function(n,a){return n===0||a===0?0:r[t[n]+t[a]]},Jm}var GA;function HJ(){return GA||(GA=1,(function(r){const t=WJ();r.mul=function(n,a){const i=new Uint8Array(n.length+a.length-1);for(let s=0;s<n.length;s++)for(let o=0;o<a.length;o++)i[s+o]^=t.mul(n[s],a[o]);return i},r.mod=function(n,a){let i=new Uint8Array(n);for(;i.length-a.length>=0;){const s=i[0];for(let l=0;l<a.length;l++)i[l]^=t.mul(a[l],s);let o=0;for(;o<i.length&&i[o]===0;)o++;i=i.slice(o)}return i},r.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let i=0;i<n;i++)a=r.mul(a,new Uint8Array([1,t.exp(i)]));return a}})(t_)),t_}var r_,KA;function VJ(){if(KA)return r_;KA=1;const r=HJ();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const i=r.mod(a,this.genPoly),s=this.degree-i.length;if(s>0){const o=new Uint8Array(this.degree);return o.set(i,s),o}return i},r_=t,r_}var n_={},a_={},i_={},XA;function pL(){return XA||(XA=1,i_.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),i_}var Ec={},YA;function mL(){if(YA)return Ec;YA=1;const r="[0-9]+",t="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;Ec.KANJI=new RegExp(e,"g"),Ec.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ec.BYTE=new RegExp(n,"g"),Ec.NUMERIC=new RegExp(r,"g"),Ec.ALPHANUMERIC=new RegExp(t,"g");const a=new RegExp("^"+e+"$"),i=new RegExp("^"+r+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ec.testKanji=function(l){return a.test(l)},Ec.testNumeric=function(l){return i.test(l)},Ec.testAlphanumeric=function(l){return s.test(l)},Ec}var JA;function Gh(){return JA||(JA=1,(function(r){const t=pL(),e=mL();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,s){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?i.ccBits[0]:s<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return e.testNumeric(i)?r.NUMERIC:e.testAlphanumeric(i)?r.ALPHANUMERIC:e.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+a)}}r.from=function(i,s){if(r.isValid(i))return i;try{return n(i)}catch{return s}}})(a_)),a_}var ZA;function GJ(){return ZA||(ZA=1,(function(r){const t=Vh(),e=hL(),n=SN(),a=Gh(),i=pL(),s=7973,o=t.getBCHDigit(s);function l(h,p,g){for(let y=1;y<=40;y++)if(p<=r.getCapacity(y,g,h))return y}function c(h,p){return a.getCharCountIndicator(h,p)+4}function u(h,p){let g=0;return h.forEach(function(y){const m=c(y.mode,p);g+=m+y.getBitsLength()}),g}function f(h,p){for(let g=1;g<=40;g++)if(u(h,g)<=r.getCapacity(g,p,a.MIXED))return g}r.from=function(p,g){return i.isValid(p)?parseInt(p,10):g},r.getCapacity=function(p,g,y){if(!i.isValid(p))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=a.BYTE);const m=t.getSymbolTotalCodewords(p),v=e.getTotalCodewordsCount(p,g),b=(m-v)*8;if(y===a.MIXED)return b;const x=b-c(y,p);switch(y){case a.NUMERIC:return Math.floor(x/10*3);case a.ALPHANUMERIC:return Math.floor(x/11*2);case a.KANJI:return Math.floor(x/13);case a.BYTE:default:return Math.floor(x/8)}},r.getBestVersionForData=function(p,g){let y;const m=n.from(g,n.M);if(Array.isArray(p)){if(p.length>1)return f(p,m);if(p.length===0)return 1;y=p[0]}else y=p;return l(y.mode,y.getLength(),m)},r.getEncodedBits=function(p){if(!i.isValid(p)||p<7)throw new Error("Invalid QR Code version");let g=p<<12;for(;t.getBCHDigit(g)-o>=0;)g^=s<<t.getBCHDigit(g)-o;return p<<12|g}})(n_)),n_}var s_={},QA;function KJ(){if(QA)return s_;QA=1;const r=Vh(),t=1335,e=21522,n=r.getBCHDigit(t);return s_.getEncodedBits=function(i,s){const o=i.bit<<3|s;let l=o<<10;for(;r.getBCHDigit(l)-n>=0;)l^=t<<r.getBCHDigit(l)-n;return(o<<10|l)^e},s_}var o_={},l_,eT;function XJ(){if(eT)return l_;eT=1;const r=Gh();function t(e){this.mode=r.NUMERIC,this.data=e.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let a,i,s;for(a=0;a+3<=this.data.length;a+=3)i=this.data.substr(a,3),s=parseInt(i,10),n.put(s,10);const o=this.data.length-a;o>0&&(i=this.data.substr(a),s=parseInt(i,10),n.put(s,o*3+1))},l_=t,l_}var c_,tT;function YJ(){if(tT)return c_;tT=1;const r=Gh(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(n){this.mode=r.ALPHANUMERIC,this.data=n}return e.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){let i;for(i=0;i+2<=this.data.length;i+=2){let s=t.indexOf(this.data[i])*45;s+=t.indexOf(this.data[i+1]),a.put(s,11)}this.data.length%2&&a.put(t.indexOf(this.data[i]),6)},c_=e,c_}var u_,rT;function JJ(){if(rT)return u_;rT=1;const r=Gh();function t(e){this.mode=r.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let n=0,a=this.data.length;n<a;n++)e.put(this.data[n],8)},u_=t,u_}var d_,nT;function ZJ(){if(nT)return d_;nT=1;const r=Gh(),t=Vh();function e(n){this.mode=r.KANJI,this.data=n}return e.getBitsLength=function(a){return a*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let a;for(a=0;a<this.data.length;a++){let i=t.toSJIS(this.data[a]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},d_=e,d_}var f_={exports:{}},aT;function QJ(){return aT||(aT=1,(function(r){var t={single_source_shortest_paths:function(e,n,a){var i={},s={};s[n]=0;var o=t.PriorityQueue.make();o.push(n,0);for(var l,c,u,f,h,p,g,y,m;!o.empty();){l=o.pop(),c=l.value,f=l.cost,h=e[c]||{};for(u in h)h.hasOwnProperty(u)&&(p=h[u],g=f+p,y=s[u],m=typeof s[u]>"u",(m||y>g)&&(s[u]=g,o.push(u,g),i[u]=c))}if(typeof a<"u"&&typeof s[a]>"u"){var v=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(v)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var a=[],i=n;i;)a.push(i),e[i],i=e[i];return a.reverse(),a},find_path:function(e,n,a){var i=t.single_source_shortest_paths(e,n,a);return t.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,a={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var a={value:e,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(f_)),f_.exports}var iT;function eZ(){return iT||(iT=1,(function(r){const t=Gh(),e=XJ(),n=YJ(),a=JJ(),i=ZJ(),s=mL(),o=Vh(),l=QJ();function c(v){return unescape(encodeURIComponent(v)).length}function u(v,b,x){const S=[];let _;for(;(_=v.exec(x))!==null;)S.push({data:_[0],index:_.index,mode:b,length:_[0].length});return S}function f(v){const b=u(s.NUMERIC,t.NUMERIC,v),x=u(s.ALPHANUMERIC,t.ALPHANUMERIC,v);let S,_;return o.isKanjiModeEnabled()?(S=u(s.BYTE,t.BYTE,v),_=u(s.KANJI,t.KANJI,v)):(S=u(s.BYTE_KANJI,t.BYTE,v),_=[]),b.concat(x,S,_).sort(function(A,O){return A.index-O.index}).map(function(A){return{data:A.data,mode:A.mode,length:A.length}})}function h(v,b){switch(b){case t.NUMERIC:return e.getBitsLength(v);case t.ALPHANUMERIC:return n.getBitsLength(v);case t.KANJI:return i.getBitsLength(v);case t.BYTE:return a.getBitsLength(v)}}function p(v){return v.reduce(function(b,x){const S=b.length-1>=0?b[b.length-1]:null;return S&&S.mode===x.mode?(b[b.length-1].data+=x.data,b):(b.push(x),b)},[])}function g(v){const b=[];for(let x=0;x<v.length;x++){const S=v[x];switch(S.mode){case t.NUMERIC:b.push([S,{data:S.data,mode:t.ALPHANUMERIC,length:S.length},{data:S.data,mode:t.BYTE,length:S.length}]);break;case t.ALPHANUMERIC:b.push([S,{data:S.data,mode:t.BYTE,length:S.length}]);break;case t.KANJI:b.push([S,{data:S.data,mode:t.BYTE,length:c(S.data)}]);break;case t.BYTE:b.push([{data:S.data,mode:t.BYTE,length:c(S.data)}])}}return b}function y(v,b){const x={},S={start:{}};let _=["start"];for(let I=0;I<v.length;I++){const A=v[I],O=[];for(let M=0;M<A.length;M++){const z=A[M],U=""+I+M;O.push(U),x[U]={node:z,lastCount:0},S[U]={};for(let D=0;D<_.length;D++){const T=_[D];x[T]&&x[T].node.mode===z.mode?(S[T][U]=h(x[T].lastCount+z.length,z.mode)-h(x[T].lastCount,z.mode),x[T].lastCount+=z.length):(x[T]&&(x[T].lastCount=z.length),S[T][U]=h(z.length,z.mode)+4+t.getCharCountIndicator(z.mode,b))}}_=O}for(let I=0;I<_.length;I++)S[_[I]].end=0;return{map:S,table:x}}function m(v,b){let x;const S=t.getBestModeForData(v);if(x=t.from(b,S),x!==t.BYTE&&x.bit<S.bit)throw new Error('"'+v+'" cannot be encoded with mode '+t.toString(x)+`.
 Suggested mode is: `+t.toString(S));switch(x===t.KANJI&&!o.isKanjiModeEnabled()&&(x=t.BYTE),x){case t.NUMERIC:return new e(v);case t.ALPHANUMERIC:return new n(v);case t.KANJI:return new i(v);case t.BYTE:return new a(v)}}r.fromArray=function(b){return b.reduce(function(x,S){return typeof S=="string"?x.push(m(S,null)):S.data&&x.push(m(S.data,S.mode)),x},[])},r.fromString=function(b,x){const S=f(b,o.isKanjiModeEnabled()),_=g(S),I=y(_,x),A=l.find_path(I.map,"start","end"),O=[];for(let M=1;M<A.length-1;M++)O.push(I.table[A[M]].node);return r.fromArray(p(O))},r.rawSplit=function(b){return r.fromArray(f(b,o.isKanjiModeEnabled()))}})(o_)),o_}var sT;function tZ(){if(sT)return Kw;sT=1;const r=Vh(),t=SN(),e=BJ(),n=$J(),a=UJ(),i=qJ(),s=zJ(),o=hL(),l=VJ(),c=GJ(),u=KJ(),f=Gh(),h=eZ();function p(I,A){const O=I.size,M=i.getPositions(A);for(let z=0;z<M.length;z++){const U=M[z][0],D=M[z][1];for(let T=-1;T<=7;T++)if(!(U+T<=-1||O<=U+T))for(let R=-1;R<=7;R++)D+R<=-1||O<=D+R||(T>=0&&T<=6&&(R===0||R===6)||R>=0&&R<=6&&(T===0||T===6)||T>=2&&T<=4&&R>=2&&R<=4?I.set(U+T,D+R,!0,!0):I.set(U+T,D+R,!1,!0))}}function g(I){const A=I.size;for(let O=8;O<A-8;O++){const M=O%2===0;I.set(O,6,M,!0),I.set(6,O,M,!0)}}function y(I,A){const O=a.getPositions(A);for(let M=0;M<O.length;M++){const z=O[M][0],U=O[M][1];for(let D=-2;D<=2;D++)for(let T=-2;T<=2;T++)D===-2||D===2||T===-2||T===2||D===0&&T===0?I.set(z+D,U+T,!0,!0):I.set(z+D,U+T,!1,!0)}}function m(I,A){const O=I.size,M=c.getEncodedBits(A);let z,U,D;for(let T=0;T<18;T++)z=Math.floor(T/3),U=T%3+O-8-3,D=(M>>T&1)===1,I.set(z,U,D,!0),I.set(U,z,D,!0)}function v(I,A,O){const M=I.size,z=u.getEncodedBits(A,O);let U,D;for(U=0;U<15;U++)D=(z>>U&1)===1,U<6?I.set(U,8,D,!0):U<8?I.set(U+1,8,D,!0):I.set(M-15+U,8,D,!0),U<8?I.set(8,M-U-1,D,!0):U<9?I.set(8,15-U-1+1,D,!0):I.set(8,15-U-1,D,!0);I.set(M-8,8,1,!0)}function b(I,A){const O=I.size;let M=-1,z=O-1,U=7,D=0;for(let T=O-1;T>0;T-=2)for(T===6&&T--;;){for(let R=0;R<2;R++)if(!I.isReserved(z,T-R)){let C=!1;D<A.length&&(C=(A[D]>>>U&1)===1),I.set(z,T-R,C),U--,U===-1&&(D++,U=7)}if(z+=M,z<0||O<=z){z-=M,M=-M;break}}}function x(I,A,O){const M=new e;O.forEach(function(R){M.put(R.mode.bit,4),M.put(R.getLength(),f.getCharCountIndicator(R.mode,I)),R.write(M)});const z=r.getSymbolTotalCodewords(I),U=o.getTotalCodewordsCount(I,A),D=(z-U)*8;for(M.getLengthInBits()+4<=D&&M.put(0,4);M.getLengthInBits()%8!==0;)M.putBit(0);const T=(D-M.getLengthInBits())/8;for(let R=0;R<T;R++)M.put(R%2?17:236,8);return S(M,I,A)}function S(I,A,O){const M=r.getSymbolTotalCodewords(A),z=o.getTotalCodewordsCount(A,O),U=M-z,D=o.getBlocksCount(A,O),T=M%D,R=D-T,C=Math.floor(M/D),N=Math.floor(U/D),E=N+1,k=C-N,P=new l(k);let q=0;const H=new Array(D),L=new Array(D);let K=0;const Y=new Uint8Array(I.buffer);for(let F=0;F<D;F++){const X=F<R?N:E;H[F]=Y.slice(q,q+X),L[F]=P.encode(H[F]),q+=X,K=Math.max(K,X)}const Z=new Uint8Array(M);let V=0,ee,B;for(ee=0;ee<K;ee++)for(B=0;B<D;B++)ee<H[B].length&&(Z[V++]=H[B][ee]);for(ee=0;ee<k;ee++)for(B=0;B<D;B++)Z[V++]=L[B][ee];return Z}function _(I,A,O,M){let z;if(Array.isArray(I))z=h.fromArray(I);else if(typeof I=="string"){let C=A;if(!C){const N=h.rawSplit(I);C=c.getBestVersionForData(N,O)}z=h.fromString(I,C||40)}else throw new Error("Invalid data");const U=c.getBestVersionForData(z,O);if(!U)throw new Error("The amount of data is too big to be stored in a QR Code");if(!A)A=U;else if(A<U)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+U+`.
`);const D=x(A,O,z),T=r.getSymbolSize(A),R=new n(T);return p(R,A),g(R),y(R,A),v(R,O,0),A>=7&&m(R,A),b(R,D),isNaN(M)&&(M=s.getBestMask(R,v.bind(null,R,O))),s.applyMask(M,R),v(R,O,M),{modules:R,version:A,errorCorrectionLevel:O,maskPattern:M,segments:z}}return Kw.create=function(A,O){if(typeof A>"u"||A==="")throw new Error("No input text");let M=t.M,z,U;return typeof O<"u"&&(M=t.from(O.errorCorrectionLevel,t.M),z=c.from(O.version),U=s.from(O.maskPattern),O.toSJISFunc&&r.setToSJISFunction(O.toSJISFunc)),_(A,z,M,U)},Kw}var h_={},p_={},oT;function gL(){return oT||(oT=1,(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,s=n.scale||4;return{width:i,scale:i?4:s,margin:a,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},r.getImageWidth=function(n,a){const i=r.getScale(n,a);return Math.floor((n+a.margin*2)*i)},r.qrToImageData=function(n,a,i){const s=a.modules.size,o=a.modules.data,l=r.getScale(s,i),c=Math.floor((s+i.margin*2)*l),u=i.margin*l,f=[i.color.light,i.color.dark];for(let h=0;h<c;h++)for(let p=0;p<c;p++){let g=(h*c+p)*4,y=i.color.light;if(h>=u&&p>=u&&h<c-u&&p<c-u){const m=Math.floor((h-u)/l),v=Math.floor((p-u)/l);y=f[o[m*s+v]?1:0]}n[g++]=y.r,n[g++]=y.g,n[g++]=y.b,n[g]=y.a}}})(p_)),p_}var lT;function rZ(){return lT||(lT=1,(function(r){const t=gL();function e(a,i,s){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=s,i.width=s,i.style.height=s+"px",i.style.width=s+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,s,o){let l=o,c=s;typeof l>"u"&&(!s||!s.getContext)&&(l=s,s=void 0),s||(c=n()),l=t.getOptions(l);const u=t.getImageWidth(i.modules.size,l),f=c.getContext("2d"),h=f.createImageData(u,u);return t.qrToImageData(h.data,i,l),e(f,c,u),f.putImageData(h,0,0),c},r.renderToDataURL=function(i,s,o){let l=o;typeof l>"u"&&(!s||!s.getContext)&&(l=s,s=void 0),l||(l={});const c=r.render(i,s,l),u=l.type||"image/png",f=l.rendererOpts||{};return c.toDataURL(u,f.quality)}})(h_)),h_}var m_={},cT;function nZ(){if(cT)return m_;cT=1;const r=gL();function t(a,i){const s=a.a/255,o=i+'="'+a.hex+'"';return s<1?o+" "+i+'-opacity="'+s.toFixed(2).slice(1)+'"':o}function e(a,i,s){let o=a+i;return typeof s<"u"&&(o+=" "+s),o}function n(a,i,s){let o="",l=0,c=!1,u=0;for(let f=0;f<a.length;f++){const h=Math.floor(f%i),p=Math.floor(f/i);!h&&!c&&(c=!0),a[f]?(u++,f>0&&h>0&&a[f-1]||(o+=c?e("M",h+s,.5+p+s):e("m",l,0),l=0,c=!1),h+1<i&&a[f+1]||(o+=e("h",u),u=0)):l++}return o}return m_.render=function(i,s,o){const l=r.getOptions(s),c=i.modules.size,u=i.modules.data,f=c+l.margin*2,h=l.color.light.a?"<path "+t(l.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",p="<path "+t(l.color.dark,"stroke")+' d="'+n(u,c,l.margin)+'"/>',g='viewBox="0 0 '+f+" "+f+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+g+' shape-rendering="crispEdges">'+h+p+`</svg>
`;return typeof o=="function"&&o(null,m),m},m_}var uT;function aZ(){if(uT)return M0;uT=1;const r=LJ(),t=tZ(),e=rZ(),n=nZ();function a(i,s,o,l,c){const u=[].slice.call(arguments,1),f=u.length,h=typeof u[f-1]=="function";if(!h&&!r())throw new Error("Callback required as last argument");if(h){if(f<2)throw new Error("Too few arguments provided");f===2?(c=o,o=s,s=l=void 0):f===3&&(s.getContext&&typeof c>"u"?(c=l,l=void 0):(c=l,l=o,o=s,s=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(o=s,s=l=void 0):f===2&&!s.getContext&&(l=o,o=s,s=void 0),new Promise(function(p,g){try{const y=t.create(o,l);p(i(y,s,l))}catch(y){g(y)}})}try{const p=t.create(o,l);c(null,i(p,s,l))}catch(p){c(p)}}return M0.create=t.create,M0.toCanvas=a.bind(null,e.render),M0.toDataURL=a.bind(null,e.renderToDataURL),M0.toString=a.bind(null,function(i,s,o){return n.render(i,o)}),M0}var iZ=aZ();const Rx=In(iZ),sZ=(r,t,e,n,a,i,s="exclusive",o,l=!1)=>{let c=a||0;n&&n>0&&(c=t*n/100);const u=t*e;let f=c*e;const h=Math.max(0,u-f);let p,g,y,m=0,v,b;if(l)p=Math.max(0,t-c),g=p*e,b=g,y=0,m=0,v=g;else if(s==="inclusive"){const x=h,S=i,_=o&&i===28?o:0;if(S>0){const I=S+_;b=x/(1+I/100),y=b*S/100,m=b*_/100}else b=x,y=0,m=0;p=t-c,g=b,v=x}else p=Math.max(0,t-c),g=p*e,b=g,y=0,i>0&&(y=g*i/100),m=0,o&&i===28&&(m=g*o/100),v=g+y+m;return{name:r,rate:t,quantity:e,discountPercentage:n||0,discountAmount:parseFloat(f.toFixed(2)),netPrice:parseFloat(p.toFixed(2)),gstPercentage:l?0:i,gstAmount:parseFloat(y.toFixed(2)),cessAmount:parseFloat(m.toFixed(2)),subTotal:parseFloat(g.toFixed(2)),lineTotal:parseFloat(v.toFixed(2)),grossAmount:parseFloat(u.toFixed(2)),itemDiscount:parseFloat(f.toFixed(2)),taxableAmount:parseFloat(b.toFixed(2)),taxAmount:parseFloat(y.toFixed(2)),netAmount:parseFloat(v.toFixed(2))}},oZ=(r,t=0,e=!1)=>{const n=r.reduce((c,u)=>c+(u.quantity||0),0),a=r.reduce((c,u)=>c+(u.discountAmount||0),0),i=r.reduce((c,u)=>c+(u.subTotal||0),0),s=e?0:r.reduce((c,u)=>c+(u.gstAmount||0),0),o=e?0:r.reduce((c,u)=>c+(u.cessAmount||0),0),l=i+s+o+t;return{totalQuantity:Math.round(n),totalDiscount:parseFloat(a.toFixed(2)),totalTaxableValue:parseFloat(i.toFixed(2)),totalGST:parseFloat(s.toFixed(2)),cessAmount:parseFloat(o.toFixed(2)),roundOff:parseFloat(t.toFixed(2)),grandTotal:parseFloat(l.toFixed(2))}},lZ=async(r,t)=>{var v,b,x;const e=new Fr("p","mm","a4"),n=e.internal.pageSize.width,a=10;let i=a;if(r.logo_url)try{const I=a,A=i;e.addImage(r.logo_url,"PNG",I,A,30,15),i+=17}catch(S){console.warn("Failed to add company logo:",S)}e.setFontSize(20),e.setFont("helvetica","bold"),e.text(r.legal_name||r.name||"Tallybooks",a,i),i+=8,r.name&&r.name!==(r.legal_name||"")&&(e.setFontSize(14),e.setFont("helvetica","normal"),e.text(r.name,a,i),i+=6),e.setFontSize(10),e.setFont("helvetica","normal");const s=[];if(r.address_street&&s.push(r.address_street),r.address_city&&s.push(r.address_city),r.address_state&&s.push(r.address_state),r.address_postal_code&&s.push(r.address_postal_code),r.address_country&&s.push(r.address_country),s.length>0){const S=s.join(", "),_=e.splitTextToSize(S,n-2*a-30);e.text(_,a,i),i+=4+_.length*4}const o=[];r.phone&&o.push(`Phone: ${r.phone}`),r.email&&o.push(`Email: ${r.email}`),r.website&&o.push(`Website: ${r.website}`),o.length>0&&(e.setFontSize(10),e.text(o.join(" | "),a,i),i+=6),r.tax_number&&(e.setFont("helvetica","bold"),e.setFontSize(10),e.text(`GSTIN: ${r.tax_number}`,a,i),i+=8);try{const S=`INV:${t.invoiceNumber||t.id}|DATE:${qt(new Date(t.date),"dd/MM/yyyy")}|AMT:${t.grandTotal.toFixed(2)}|GST:${r.tax_number||"NA"}`,_=await Rx.toDataURL(S,{width:80}),I=25,A=(n-I)/2,O=i;e.addImage(_,"PNG",A,O,I,I),e.setFontSize(8),e.setFont("helvetica","normal"),e.text("Scan QR Code for Invoice Details",n/2,O+I+5,{align:"center"}),i+=I+10}catch(S){console.warn("Failed to generate QR code:",S),i+=10}e.setDrawColor(0),e.setLineWidth(.5),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(14),e.text("INVOICE",a,i),i+=8,e.setFontSize(10),e.setFont("helvetica","normal");const l=[`Invoice No: ${t.invoiceNumber||t.id}`,`Date: ${qt(new Date(t.date),"dd/MM/yyyy")}`,`Time: ${t.time||"-"}`];let c=i;l.forEach(S=>{e.text(S,a,c),c+=5});const u=n-a-70;let f=i;if(e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Customer Details:",u,f),f+=5,e.setFont("helvetica","normal"),e.setFontSize(10),(v=t.customer)!=null&&v.name&&(e.text(`Name: ${t.customer.name}`,u,f),f+=5),(b=t.customer)!=null&&b.gstNumber&&(e.text(`GST No: ${t.customer.gstNumber}`,u,f),f+=5),(x=t.customer)!=null&&x.address){const S=e.splitTextToSize(t.customer.address,65);e.text(S,u,f),f+=5*S.length}i=Math.max(c,f)+8,i+=5;const h=t.items.map((S,_)=>{var I,A,O,M,z,U,D,T,R;if(S.grossAmount!==void 0){const C=S.gstPercentage===28?1:0,N=S.gstPercentage===28?(S.taxableAmount||0)*.01:0;return[(_+1).toString(),S.name||"-",S.quantity.toFixed(0),S.rate.toFixed(2),S.grossAmount.toFixed(2),((I=S.discountPercentage)==null?void 0:I.toFixed(2))||(S.itemDiscount?S.itemDiscount.toFixed(2):"-"),((A=S.itemDiscount)==null?void 0:A.toFixed(2))||"-",((O=S.taxableAmount)==null?void 0:O.toFixed(2))||"-",t.taxType!=="none"?((M=S.gstPercentage)==null?void 0:M.toFixed(2))||(S.taxAmount?S.taxAmount.toFixed(2):"-"):"-",t.taxType!=="none"&&((z=S.taxAmount)==null?void 0:z.toFixed(2))||"-",C.toFixed(2),N.toFixed(2),((U=S.netAmount)==null?void 0:U.toFixed(2))||"-"]}else{const C=(S.quantity||0)*(S.rate||0),N=S.discountAmount||0,E=C-N;let k;if(t.taxType==="none")k=E;else{const H=S.gstAmount||0;k=E+H}const P=S.gstPercentage===28?1:0,q=S.gstPercentage===28?E*.01:0;return[(_+1).toString(),S.name||"-",S.quantity.toFixed(0),S.rate.toFixed(2),C.toFixed(2),((D=S.discountPercentage)==null?void 0:D.toFixed(2))||"-",N.toFixed(2),E.toFixed(2),t.taxType!=="none"&&((T=S.gstPercentage)==null?void 0:T.toFixed(2))||"-",t.taxType!=="none"?((R=S.gstAmount)==null?void 0:R.toFixed(2))||"-":"0.00",P.toFixed(2),q.toFixed(2),k.toFixed(2)]}});Ic(e,{startY:i,head:[["S.No","Item Name","Qty","Rate","GrossAmt","Disc%","DiscAmt","TaxableValue","GST%","GSTAmt","CESS%","CESSAmt","Net Amt"]],body:h,theme:"grid",styles:{fontSize:8,cellPadding:2,halign:"right",valign:"middle",fontStyle:"bold"},headStyles:{fillColor:[50,50,50],textColor:[255,255,255],fontStyle:"bold",halign:"center",fontSize:10},columnStyles:{0:{cellWidth:10,halign:"center"},1:{cellWidth:20,halign:"left"},2:{cellWidth:10,halign:"center"},3:{cellWidth:15,halign:"right"},4:{cellWidth:15,halign:"right"},5:{cellWidth:10,halign:"right"},6:{cellWidth:12,halign:"right"},7:{cellWidth:15,halign:"right"},8:{cellWidth:10,halign:"right"},9:{cellWidth:15,halign:"right"},10:{cellWidth:10,halign:"right"},11:{cellWidth:15,halign:"right"},12:{cellWidth:15,halign:"right"}}}),i=e.lastAutoTable.finalY+5,e.setLineWidth(.3),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(12),e.text("GST Summary",a,i),i+=8;const p=n-a-70,g=n-a-5;e.setFont("helvetica","normal"),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Taxable Value:",p,i),e.setFont("helvetica","normal"),e.text(t.totalTaxableValue.toFixed(2),g,i,{align:"right"}),i+=6;let y=0;t.taxType!=="none"?(t.taxType==="integrated"&&t.totalIGST&&(e.setFont("helvetica","bold"),e.text("IGST:",p,i),e.setFont("helvetica","normal"),e.text(t.totalIGST.toFixed(2),g,i,{align:"right"}),i+=6,y+=t.totalIGST),t.taxType==="split"&&t.totalCGST&&t.totalSGST&&(e.setFont("helvetica","bold"),e.text("CGST:",p,i),e.setFont("helvetica","normal"),e.text(t.totalCGST.toFixed(2),g,i,{align:"right"}),i+=6,y+=t.totalCGST,e.setFont("helvetica","bold"),e.text("SGST:",p,i),e.setFont("helvetica","normal"),e.text(t.totalSGST.toFixed(2),g,i,{align:"right"}),i+=6,y+=t.totalSGST),t.cessAmount&&t.cessAmount>0&&(e.setFont("helvetica","bold"),e.text("CESS (1%):",p,i),e.setFont("helvetica","normal"),e.text(t.cessAmount.toFixed(2),g,i,{align:"right"}),i+=6,y+=t.cessAmount)):(e.setFont("helvetica","bold"),e.text("Total GST (Nil):",p,i),e.setFont("helvetica","normal"),e.text("0.00",g,i,{align:"right"}),i+=6),t.taxType!=="none"&&(e.setFont("helvetica","bold"),e.text("Total GST:",p,i),e.setFont("helvetica","normal"),e.text(y.toFixed(2),g,i,{align:"right"}),i+=6),i+=4,e.setLineWidth(.3),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(12),e.text("Bill Summary",a,i),i+=8,e.setFont("helvetica","bold"),e.text("Bill Discount:",p,i),e.setFont("helvetica","normal"),e.text(t.totalDiscount.toFixed(2),g,i,{align:"right"}),i+=6,e.setFont("helvetica","bold"),e.text("Round-off:",p,i),e.setFont("helvetica","normal"),e.text(t.roundOff.toFixed(2),g,i,{align:"right"}),i+=6,e.setLineWidth(.7),e.line(a,i,n-a,i),i+=8,e.setFont("helvetica","bold"),e.setFontSize(18);const m=n/2;e.text("TOTAL BILL AMOUNT",m,i,{align:"center"}),i+=10,e.setFontSize(22),e.text(t.grandTotal.toFixed(2),m,i,{align:"center"}),i+=8,e.setLineWidth(.7),e.line(a,i,n-a,i),i+=12,e.setFont("helvetica","bold"),e.setFontSize(12),e.text("PAYMENT DETAILS",a,i),i+=8,e.setFont("helvetica","normal"),e.setFontSize(10),e.text("Customer Paid:",a,i),e.text((t.customerPaid||0).toFixed(2),n-a-20,i,{align:"right"}),i+=6,e.text("Change Returned:",a,i),e.text((t.changeReturned||0).toFixed(2),n-a-20,i,{align:"right"}),i+=6,e.text("Amount in Words:",a,i),e.text(t.amountInWords||"",n-a,i,{align:"right"}),i+=12,e.setLineWidth(.3),e.line(a,i,a+50,i),i+=5,e.setFont("helvetica","normal"),e.setFontSize(10),e.text("Authorized Signatory",a+25,i,{align:"center"}),i-=5,e.line(n-a-50,i,n-a,i),i+=5,e.text("Customer Signature",n-a-25,i,{align:"center"}),e.save(`Invoice_${t.invoiceNumber||t.id}_${qt(new Date(t.date),"yyyy-MM-dd")}.pdf`)},cZ=async(r,t)=>{try{const e=JSON.stringify({invoice:t.invoiceNumber||t.id,date:qt(new Date(t.date),"dd/MM/yyyy"),amount:t.grandTotal.toFixed(2),gstin:r.tax_number||"NA"}),n=await Rx.toDataURL(e,{width:113});let a=0,i=0,s=0,o=0,l=0;t.items.forEach(g=>{a+=g.quantity||0,i+=(g.quantity||0)*(g.rate||0),s+=g.discountAmount||0,o+=g.subTotal||(g.quantity||0)*(g.rate||0),l+=g.gstAmount||0});const c=[];r.address_street&&c.push(r.address_street),r.address_city&&c.push(r.address_city),r.address_state&&c.push(r.address_state),r.address_postal_code&&c.push(r.address_postal_code);const u=c.join(", "),f=t.items.map((g,y)=>{var _,I;const m=(g.quantity||0)*(g.rate||0),v=g.discountAmount?g.discountAmount.toFixed(2):"0.00",b=m-(g.discountAmount||0);let x;if(t.taxType==="none")x=b.toFixed(2);else{const A=g.gstAmount||0;x=(b+A).toFixed(2)}const S=t.taxType!=="none"&&g.gstAmount?g.gstAmount.toFixed(2):"0.00";return`
        <tr>
          <td>${y+1}</td>
          <td class="truncate">${g.name}</td>
          <td class="text-right">${g.quantity.toFixed(0)}</td>
          <td class="text-right">${g.rate.toFixed(2)}</td>
          <td class="text-right">${m.toFixed(2)}</td>
          <td class="text-right">${((_=g.discountPercentage)==null?void 0:_.toFixed(2))||"0.00"}</td>
          <td class="text-right">${v}</td>
          <td class="text-right">${b.toFixed(2)}</td>
          <td class="text-right">${((I=g.gstPercentage)==null?void 0:I.toFixed(2))||"0.00"}</td>
          <td class="text-right">${S}</td>
          <td class="text-right">${x}</td>
        </tr>
      `}).join(""),h=`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice ${t.invoiceNumber||t.id}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            size: 80mm auto;
            margin: 0;
        }
        
        @media print {
            body {
                width: 80mm;
            }
        }
        
        body {
            width: 80mm;
            font-family: 'Courier New', monospace;
            font-size: 9px;
            line-height: 1.2;
            padding: 2mm;
            background: white;
            color: black;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3mm;
        }
        
        .store-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 1mm;
        }
        
        .address {
            font-size: 8px;
            line-height: 1.3;
            margin-bottom: 1mm;
        }
        
        .contact {
            font-size: 8px;
            margin-bottom: 0.5mm;
        }
        
        .separator {
            border-top: 1px dashed #000;
            margin: 2mm 0;
        }
        
        .invoice-info {
            display: flex;
            justify-content: space-between;
            font-size: 8px;
            margin-bottom: 2mm;
        }
        
        .invoice-info div {
            flex: 1;
        }
        
        .invoice-info .right {
            text-align: right;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 8px;
            margin-bottom: 2mm;
        }
        
        th {
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
            padding: 1mm 0.5mm;
            font-weight: bold;
            text-align: left;
        }
        
        td {
            padding: 0.5mm;
            border-bottom: 1px dotted #ccc;
        }
        
        .text-right {
            text-align: right;
        }
        
        .text-center {
            text-align: center;
        }
        
        .summary {
            font-size: 8px;
            margin-bottom: 2mm;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 0.3mm 0;
        }
        
        .summary-row.bold {
            font-weight: bold;
        }
        
        .grand-total {
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            padding: 2mm 0;
            border-top: 2px solid #000;
            border-bottom: 2px solid #000;
            margin: 2mm 0;
        }
        
        .qr-section {
            text-align: center;
            margin-top: 3mm;
        }
        
        .qr-code {
            width: 30mm;
            height: 30mm;
            margin: 2mm auto;
        }
        
        .qr-caption {
            font-size: 7px;
            margin-bottom: 2mm;
        }
        
        .thank-you {
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            margin-top: 2mm;
        }
        
        .truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 25mm;
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        ${r.logo_url?`<img src="${r.logo_url}" alt="Company Logo" style="max-width: 30mm; max-height: 15mm; margin-bottom: 1mm;" />`:""}
        <div class="store-name">${r.legal_name||r.name||"Store"}</div>
        <div class="address">${u}</div>
        ${r.phone?`<div class="contact">Ph: ${r.phone}${r.email?` | Email: ${r.email}`:""}</div>`:""}
        ${r.tax_number?`<div class="contact">GSTIN: ${r.tax_number}</div>`:""}
    </div>
    
    <div class="separator"></div>
    
    <!-- INVOICE INFO -->
    <div class="invoice-info">
        <div>
            <strong>Invoice:</strong> ${t.invoiceNumber||t.id}
        </div>
        <div class="right">
            <strong>Date:</strong> ${qt(new Date(t.date),"dd/MM/yyyy")}
        </div>
    </div>
    <div class="invoice-info">
        <div>
            <strong>Time:</strong> ${t.time||new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}
        </div>
    </div>
    
    <div class="separator"></div>
    
    <!-- ITEMS TABLE -->
    <table>
        <thead>
            <tr>
                <th style="width: 8%;">#</th>
                <th style="width: 20%;">Item</th>
                <th style="width: 8%;" class="text-right">Qty</th>
                <th style="width: 10%;" class="text-right">Rate</th>
                <th style="width: 10%;" class="text-right">Gross</th>
                <th style="width: 8%;" class="text-right">Disc%</th>
                <th style="width: 10%;" class="text-right">Disc</th>
                <th style="width: 10%;" class="text-right">Taxable</th>
                <th style="width: 8%;" class="text-right">GST%</th>
                <th style="width: 10%;" class="text-right">GST</th>
                <th style="width: 10%;" class="text-right">Net</th>
            </tr>
        </thead>
        <tbody>
            ${f}
        </tbody>
    </table>

    <div class="separator"></div>
    
    <!-- SUMMARY -->
    <div class="summary">
        <div class="summary-row">
            <span>Bill Discount:</span>
            <span>${t.totalDiscount.toFixed(2)}</span>
        </div>
        <div class="summary-row">
            <span>Taxable Value:</span>
            <span>${t.totalTaxableValue.toFixed(2)}</span>
        </div>
        <!-- Only show tax details if taxType is not 'none' -->
        ${t.taxType!=="none"?`
          <!-- Show CESS if applicable -->
          ${t.cessAmount&&t.cessAmount>0?`
          <div class="summary-row">
              <span>CESS:</span>
              <span>${t.cessAmount.toFixed(2)}</span>
          </div>`:""}
          <!-- Show IGST for integrated tax -->
          ${t.taxType==="integrated"&&t.totalIGST?`
          <div class="summary-row">
              <span>IGST:</span>
              <span>${t.totalIGST.toFixed(2)}</span>
          </div>`:""}
          <!-- Show CGST and SGST for split tax -->
          ${t.taxType==="split"&&t.totalCGST&&t.totalSGST?`
          <div class="summary-row">
              <span>CGST:</span>
              <span>${t.totalCGST.toFixed(2)}</span>
          </div>
          <div class="summary-row">
              <span>SGST:</span>
              <span>${t.totalSGST.toFixed(2)}</span>
          </div>`:""}
          <!-- Total GST (sum of all taxes) -->
          <div class="summary-row">
              <span>Total GST:</span>
              <span>${((t.totalIGST||0)+(t.totalCGST||0)+(t.totalSGST||0)+(t.cessAmount||0)).toFixed(2)}</span>
          </div>`:`
          <!-- For nil tax, show 0.00 -->
          <div class="summary-row">
              <span>Total GST (Nil):</span>
              <span>0.00</span>
          </div>`}
        <div class="summary-row">
            <span>Round-off:</span>
            <span>${t.roundOff.toFixed(2)}</span>
        </div>
    </div>
    
    <!-- TOTAL BILL AMOUNT -->
    <div class="grand-total">
        TOTAL BILL AMOUNT: ${t.grandTotal.toFixed(2)}
    </div>
    
    <!-- PAYMENT DETAILS -->
    <div class="summary" style="margin-top: 5mm;">
        <div style="font-weight: bold; font-size: 10px; margin-bottom: 2mm;">PAYMENT DETAILS</div>
        
        <div class="summary-row">
            <span>Customer Paid:</span>
            <span>${(t.customerPaid||0).toFixed(2)}</span>
        </div>
        
        <div class="summary-row">
            <span>Change Returned:</span>
            <span>${(t.changeReturned||0).toFixed(2)}</span>
        </div>
        
        <div class="summary-row">
            <span>Amount in Words:</span>
            <span>${t.amountInWords||""}</span>
        </div>
    </div>
    
    <!-- QR CODE -->
    <div class="qr-section">
        <img src="${n}" alt="QR Code" class="qr-code">
        <div class="qr-caption">Scan QR Code for Invoice Details</div>
    </div>
    
    <div class="thank-you">Thank You!</div>
    
    <script>
        // Auto-print when page loads
        window.onload = function() {
            setTimeout(function() {
                window.print();
            }, 250);
        };
    <\/script>
</body>
</html>
    `,p=window.open("","_blank","width=302,height=600");if(p)p.document.write(h),p.document.close();else throw new Error("Failed to open print window. Please allow popups for this site.")}catch(e){throw console.error("Error generating thermal invoice:",e),e}};async function uZ(r){try{console.log("Cleaning up duplicate tax settings...");let t=De.from("tax_settings").select("*");r&&(t=t.eq("company_id",r));const{data:e,error:n}=await t.order("created_at",{ascending:!1});if(n){console.error("Error fetching tax settings for cleanup:",n);return}if(!e||e.length<=1){console.log("No duplicates found");return}const a=e.reduce((i,s)=>{const o=s.company_id;return i[o]||(i[o]=[]),i[o].push(s),i},{});for(const[i,s]of Object.entries(a)){const o=s;if(o.length>1){console.log(`Found ${o.length} settings for company ${i}, keeping the most recent`);const l=o.slice(1);for(const c of l){const{error:u}=await De.from("tax_settings").delete().eq("id",c.id);u?console.error(`Error deleting duplicate tax setting ${c.id}:`,u):console.log(`Deleted duplicate tax setting ${c.id}`)}}}console.log("Duplicate tax settings cleanup completed")}catch(t){console.error("Error in cleanupDuplicateTaxSettings:",t)}}async function NN(r){try{if(console.log("Getting tax settings",r?`for company ${r}`:"for any company"),r){const{getTaxSettingsSafe:l}=await yo(async()=>{const{getTaxSettingsSafe:c}=await import("./fixTaxSettingsIssue-D5LMovfm.js");return{getTaxSettingsSafe:c}},[]);return await l(r)}let t=De.from("tax_settings").select("*");const{data:e,error:n}=await t;if(n)throw console.error("Error fetching tax settings:",n),new Error(`Failed to fetch tax settings: ${n.message}`);if(e&&e.length>0)return console.log(`Found ${e.length} tax settings, using the first one:`,e[0]),e.length>1&&(console.log("Multiple tax settings found, cleaning up duplicates..."),await uZ(r)),e[0];console.log("No tax settings found, will create default settings");let a;if(r)a=r;else{const{data:l,error:c}=await De.from("companies").select("id").limit(1);if(c)throw console.error("Error fetching companies:",c),new Error(`Failed to fetch companies: ${c.message}`);if(l&&l.length>0)a=l[0].id,console.log("Using existing company ID for new settings:",a);else{console.log("No companies found, creating a default company");const{data:u,error:f}=await De.from("companies").insert({name:"Default Company",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select();if(f)throw console.error("Error creating default company:",f),new Error(`Failed to create default company: ${f.message}`);if(!u||u.length===0)throw console.error("No company data returned after creation"),new Error("Failed to create default company: No data returned");a=u[0].id,console.log("Created default company with ID:",a)}}const i={company_id:a,tax_type:"split",tax_inclusive:!1,cess_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Creating default tax settings:",i);const{data:s,error:o}=await De.from("tax_settings").insert(i).select();if(o)throw console.error("Error creating default tax settings:",o),new Error(`Failed to create default tax settings: ${o.message}`);if(!s||s.length===0)throw console.error("No tax settings data returned after creation"),new Error("Failed to create default tax settings: No data returned");return console.log("Created default tax settings:",s[0]),s[0]}catch(t){throw console.error("Error in getTaxSettings:",t),t}}async function jN(r){try{console.log("Getting tax rates",r?`for company ${r}`:"for any company");let t=De.from("tax_rates").select("*");r&&(t=t.eq("company_id",r));const{data:e,error:n}=await t.order("rate");if(n)return console.error("Error fetching tax rates:",n),[];if(e&&e.length>0)return console.log(`Found ${e.length} tax rates for ${r?`company ${r}`:"any company"}`),e;if(console.warn("No tax rates found, will return default rates"),r){const a=[{rate:28,description:"GST 28%"},{rate:12,description:"GST 12%"},{rate:0,description:"GST Exempt"},{rate:5,description:"GST 5%"},{rate:18,description:"GST 18%"}],{error:i}=await De.from("tax_rates").insert(a.map(l=>({rate:l.rate,description:l.description,hsn_code:null,company_id:r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})));if(i)return console.error("Error creating default tax rates:",i),[];const{data:s,error:o}=await De.from("tax_rates").select("*").eq("company_id",r).order("rate");return o?(console.error("Error fetching newly created tax rates:",o),[]):s||[]}return[]}catch(t){return console.error("Error in getTaxRates:",t),[]}}async function dZ(){try{console.log("Starting emergency tax settings fix...");const{data:{user:r},error:t}=await De.auth.getUser();if(t)return console.error("Error getting current user:",t),{success:!1,message:`Error getting current user: ${t.message}`};if(!r)return console.error("No authenticated user found"),{success:!1,message:"No authenticated user found"};const{data:e,error:n}=await De.from("company_users").select("company_id, role").eq("user_id",r.id).eq("is_active",!0).order("role",{ascending:!0});if(n)return console.error("Error getting company users:",n),{success:!1,message:`Error getting company users: ${n.message}`};if(!e||e.length===0)return console.error("No active companies found for user"),{success:!1,message:"No active companies found for user"};const a=e[0].company_id;console.log(`Active company ID: ${a}`);const{data:i,error:s}=await De.from("tax_settings").select("id, created_at").eq("company_id",a).order("created_at",{ascending:!1});if(s)return console.error("Error checking tax settings:",s),{success:!1,message:`Error checking tax settings: ${s.message}`};if(!i||i.length===0){console.log(`No tax settings found for company ${a}, creating one...`);const{data:o,error:l}=await De.from("tax_settings").insert({company_id:a,tax_type:"split",tax_inclusive:!1,cess_enabled:!1}).select();return l?(console.error("Error creating tax setting:",l),{success:!1,message:`Error creating tax setting: ${l.message}`}):(console.log("Created new tax setting:",o),{success:!0,message:"Created new tax setting",taxSetting:o==null?void 0:o[0]})}else if(i.length>1){console.log(`Found ${i.length} tax settings for company ${a}, fixing...`);const{data:o,error:l}=await De.from("tax_settings").select("*").eq("company_id",a).order("created_at",{ascending:!1});if(l||!o||o.length===0)return console.error("Error getting full tax settings:",l),{success:!1,message:`Error getting full tax settings: ${l==null?void 0:l.message}`};const c=o[0],u=o.slice(1);for(const f of u){const{error:h}=await De.from("tax_settings").delete().eq("id",f.id);h?console.error(`Error deleting tax setting ${f.id}:`,h):console.log(`Deleted duplicate tax setting ${f.id}`)}return console.log("Kept most recent tax setting:",c),{success:!0,message:`Deleted ${u.length} duplicate tax settings`,taxSetting:c}}else{console.log("Found exactly one tax setting, no fix needed");const{data:o,error:l}=await De.from("tax_settings").select("*").eq("company_id",a).order("created_at",{ascending:!1}).limit(1);return l||!o?(console.error("Error getting full tax setting:",l),{success:!1,message:`Error getting full tax setting: ${l==null?void 0:l.message}`}):{success:!0,message:"Tax setting already correct",taxSetting:o==null?void 0:o[0]}}}catch(r){return console.error("Error in emergencyFixTaxSettings:",r),{success:!1,message:`Unexpected error: ${r.message}`}}}let Iu=!0,Zv=Date.now(),Av=0;const dT=5;function fZ(){return console.log("Initializing Supabase connection manager"),document.addEventListener("visibilitychange",fT),window.addEventListener("focus",hT),window.addEventListener("blur",pT),window.addEventListener("online",mT),window.addEventListener("offline",gT),hZ(),()=>{document.removeEventListener("visibilitychange",fT),window.removeEventListener("focus",hT),window.removeEventListener("blur",pT),window.removeEventListener("online",mT),window.removeEventListener("offline",gT)}}async function fT(){document.visibilityState==="visible"?(console.log("Tab became visible, refreshing Supabase connection"),await Pp(!0)):(console.log("Tab became hidden"),Zv=Date.now())}async function hT(){console.log("Window focused, checking Supabase connection");const r=Date.now()-Zv;r>5e3&&(console.log(`Window was inactive for ${Math.round(r/1e3)} seconds`),await Pp(!0)),Zv=Date.now()}function pT(){console.log("Window blurred"),Zv=Date.now()}async function mT(){console.log("Browser is online, refreshing Supabase connection"),await Pp(!0),Ce.success("Connection restored")}function gT(){console.log("Browser is offline"),Iu=!1,Ce.error("Connection lost. Reconnecting when online...")}async function hZ(){try{const{data:r,error:t}=await De.auth.getSession();return t?(console.error("Connection check failed:",t),Iu=!1,!1):(Iu=!0,Av=0,!0)}catch(r){return console.error("Error checking connection:",r),Iu=!1,!1}}async function Pp(r=!1){if(Iu&&!r)return!0;try{console.log("Refreshing Supabase connection...");const{data:t}=await De.auth.getSession();if(t.session){console.log("Refreshing existing session");const{data:e,error:n}=await De.auth.refreshSession();return n?(console.error("Error refreshing session:",n),++Av>dT&&Ce.error("Connection issues detected. Please refresh the page."),!1):(console.log("Session refreshed successfully"),Iu=!0,Av=0,!0)}else return console.log("No active session to refresh"),Iu=!0,!0}catch(t){return console.error("Error during connection refresh:",t),Iu=!1,++Av>dT&&Ce.error("Connection issues detected. Please refresh the page."),!1}}async function yT(r,t=3){var n,a,i,s,o;let e=0;for(;e<=t;)try{if(!Iu&&!await Pp()&&e===t)throw new Error("Failed to reconnect to Supabase");return await r()}catch(l){if(console.error(`Operation failed (attempt ${e+1}/${t+1}):`,l),!(((n=l.message)==null?void 0:n.includes("network"))||((a=l.message)==null?void 0:a.includes("connection"))||((i=l.message)==null?void 0:i.includes("timeout"))||((s=l.message)==null?void 0:s.includes("JWT expired"))||((o=l.message)==null?void 0:o.includes("session"))||l.code==="PGRST301"||l.code==="401"||l.code==="403")||e>=t)throw l;await Pp(!0),e++,await new Promise(u=>setTimeout(u,1e3*Math.pow(2,e-1)))}throw new Error("Failed after maximum retries")}function pZ(){ie.useEffect(()=>fZ(),[]);const r=ie.useCallback(async n=>yT(n),[]),t=ie.useCallback(async()=>Pp(!0),[]),e=ie.useCallback(n=>{const a=De.from(n);return{...a,select:(...s)=>{const o=a.select(...s);return["then","catch","finally"].forEach(c=>{const u=o[c];o[c]=(...f)=>yT(()=>u.apply(o,f))}),o}}},[]);return{supabase:De,executeQuery:r,forceRefresh:t,from:e}}function Hl(r){return Math.round(r*100)/100}function mZ(r){const t=Number(r.rate)||0,e=Number(r.qty)||0,n=Number(r.gst_rate)||0,a=Number(r.cess_rate)||0,i=r.tax_type,s=Hl(t*e);let o=0;if(r.discount_amount!==void 0&&r.discount_amount!==null)o=Hl(Number(r.discount_amount));else if(r.discount_percent!==void 0&&r.discount_percent!==null){const h=Number(r.discount_percent);o=Hl(s*(h/100))}o>s&&(o=s);let l,c,u,f;if(i==="exclusive")l=Hl(s-o),l<0&&(l=0),c=Hl(l*(n/100)),u=Hl(l*(a/100)),f=Hl(l+c+u);else{const h=Hl(s-o);if(h<0)l=0,c=0,u=0,f=0;else{const p=n+a;l=Hl(h/(1+p/100)),c=Hl(l*(n/100)),u=Hl(l*(a/100)),f=h}}return{gross:s,discount_amount:o,taxable:l,gst_amount:c,cess_amount:u,line_total:f}}async function kN(r,t){if(!r||r.length===0)return{};try{const e={};r.forEach(o=>{e[o]=0});const{data:n,error:a}=await De.from("purchase_items").select("product_id, quantity").in("product_id",r).eq("company_id",t);a?console.error("Error fetching purchase data:",a):n.forEach(o=>{e[o.product_id]!==void 0&&(e[o.product_id]+=o.quantity||0)});const{data:i,error:s}=await De.from("sale_items").select("product_id, quantity").in("product_id",r).eq("company_id",t);return s?console.error("Error fetching sales data:",s):i.forEach(o=>{e[o.product_id]!==void 0&&(e[o.product_id]-=o.quantity||0)}),Object.keys(e).forEach(o=>{e[o]=Math.max(0,e[o])}),e}catch(e){return console.error("Error calculating live stock:",e),{}}}const gZ={name:"Tallybooks",legal_name:"Tallybooks Private Limited",address_street:"123 Business Street, Suite 100",address_city:"Mumbai",address_state:"Maharashtra",address_postal_code:"400001",address_country:"India",phone:"(555) 123-4567",tax_number:"22AAAAA0000A1Z5",pan:"ABCDE1234F",state_code:"27",email:"info@tallybooks.com",website:"www.tallybooks.com"},Zd=r=>{if(r===0)return"Zero";const t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],e=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];return r<20?t[r]:r<100?e[Math.floor(r/10)]+(r%10!==0?" "+t[r%10]:""):r<1e3?t[Math.floor(r/100)]+" Hundred"+(r%100!==0?" "+Zd(r%100):""):r<1e5?Zd(Math.floor(r/1e3))+" Thousand"+(r%1e3!==0?" "+Zd(r%1e3):""):r<1e7?Zd(Math.floor(r/1e5))+" Lakh"+(r%1e5!==0?" "+Zd(r%1e5):""):Zd(Math.floor(r/1e7))+" Crore"+(r%1e7!==0?" "+Zd(r%1e7):"")},yZ=({isOpen:r,onClose:t,onApply:e,itemId:n,itemPrice:a=0,isGlobal:i=!1})=>{const[s,o]=ie.useState("percentage"),[l,c]=ie.useState(0),{theme:u}=zr(),f=u==="dark";if(!r||!n)return null;const p=s==="percentage"?a*l/100:l,g=a-p;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:`w-96 p-6 rounded-lg shadow-lg ${f?"bg-gray-800":"bg-white"}`,children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:i?"Apply Global Discount":"Apply Item Discount"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount Type"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>o("percentage"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${s==="percentage"?"bg-blue-500 text-white":f?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:"Percentage (%)"}),d.jsx("button",{onClick:()=>o("fixed"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${s==="fixed"?"bg-blue-500 text-white":f?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:"Fixed Amount ()"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:s==="percentage"?"Discount Percentage":"Discount Amount"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"number",min:"0",max:s==="percentage"?100:a,step:s==="percentage"?1:.01,value:l,onChange:y=>{const m=Qe(y.target.value);c(Math.min(s==="percentage"?100:a,Math.max(0,m)))},className:`w-full pl-3 pr-10 py-2 rounded-md border ${f?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s==="percentage"?d.jsx(Xi,{className:"w-5 h-5 text-gray-400"}):d.jsx("span",{className:"text-gray-400",children:""})})]})]}),s==="percentage"&&d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quick Options"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:[5,10,15,20,25,50].map(y=>d.jsxs("button",{onClick:()=>c(y),className:`px-3 py-2 text-sm rounded-md transition-colors ${l===y?"bg-blue-500 text-white":f?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:[y,"%"]},y))})]}),!i&&d.jsx("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-md",children:d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Original Price:"}),d.jsxs("span",{children:["",a.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between text-green-600",children:[d.jsx("span",{children:"Discount:"}),d.jsxs("span",{children:["-",p.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Final Price:"}),d.jsxs("span",{children:["",g.toFixed(2)]})]})]})}),d.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(lt,{variant:"primary",onClick:()=>{e(n,s,l),c(0)},disabled:l===0,children:"Apply Discount"})]})]})})},vZ=()=>{var xr;const{theme:r}=zr(),t=r==="dark",{selectedCompany:e}=ln(),{hasPermission:n,userRole:a}=ts(),{executeQuery:i}=pZ(),[s,o]=ie.useState(()=>{try{const Ue=localStorage.getItem("held_cart");return Ue?JSON.parse(Ue):[]}catch(Ue){return console.error("Error loading cart from localStorage:",Ue),[]}}),[l,c]=ie.useState({}),[u,f]=ie.useState(null),[h,p]=ie.useState(""),g=ie.useRef(null),[y,m]=ie.useState(null),[v,b]=ie.useState(""),[x,S]=ie.useState(!1),[_,I]=ie.useState(null),[A,O]=ie.useState(""),[M,z]=ie.useState("cash"),[U,D]=ie.useState(!1),[T,R]=ie.useState({}),[C,N]=ie.useState(!1),[E,k]=ie.useState(null),[P,q]=ie.useState(!1),[H,L]=ie.useState("split"),[K,Y]=ie.useState([]),[Z,V]=ie.useState(!1),ee=ie.useRef(!1);ie.useEffect(()=>{(y==null?void 0:y.tax_type)==="integrated"?L("integrated"):(y==null?void 0:y.tax_type)==="none"?L("none"):(y==null?void 0:y.tax_type)==="split"?L("split"):L(e&&_?e.address_state===_.address_state?"split":"integrated":"split")},[e,_,y]),ie.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const{data:et,error:ht}=await De.from("company_settings").select("*").eq("company_id",e.id).single();if(ht){console.error("Error loading company settings:",ht);return}f(et)}catch(et){console.error("Error loading company settings:",et)}})()},[e==null?void 0:e.id]),ie.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const{data:et,error:ht}=await De.from("held_sales").select("*").eq("company_id",e.id).eq("status","held").order("created_at",{ascending:!1});if(ht){console.error("Error loading held bills:",ht);return}const kt=et.map(Wt=>{var Be,Ve;return{id:Wt.id,timestamp:Wt.created_at||new Date().toISOString(),customer:Wt.customer?JSON.parse(Wt.customer):null,items:JSON.parse(Wt.cart_items),itemDiscounts:{},total:typeof Wt.total=="string"?((Be=JSON.parse(Wt.total))==null?void 0:Be.grand_total)||0:((Ve=Wt.total)==null?void 0:Ve.grand_total)||0}});Y(kt)}catch(et){console.error("Error loading held bills:",et)}})()},[e==null?void 0:e.id]),ie.useEffect(()=>{console.log("Held bills updated. Count:",K.length)},[K]),ie.useEffect(()=>{try{localStorage.setItem("held_cart",JSON.stringify(s))}catch(Ue){console.error("Error saving cart to localStorage:",Ue)}},[s]),ie.useEffect(()=>{ee.current=!0;const Ue=()=>{if(ee.current){console.log("Auto-refresh prevented due to disableAutoRefreshRef flag");return}},et=()=>{if(ee.current){console.log("Auto-refresh prevented due to disableAutoRefreshRef flag");return}};return document.addEventListener("visibilitychange",Ue),window.addEventListener("focus",et),()=>{document.removeEventListener("visibilitychange",Ue),window.removeEventListener("focus",et),ee.current=!1}},[]);const B=ie.useCallback(Ue=>{const et=T[Ue.id],ht=Ue.taxRateId?l[Ue.taxRateId]:void 0,kt=(ht==null?void 0:ht.rate)||0,Wt=(y==null?void 0:y.tax_inclusive)||!1,Be=Ue.price||0,Ve=Ue.quantity||1;let pt,he;et&&(et.type==="percentage"?pt=et.value:he=et.value);const me=(y==null?void 0:y.cess_enabled)&&kt===28?1:0,Te=mZ({rate:Be,qty:Ve,discount_percent:pt,discount_amount:he,gst_rate:H==="none"?0:kt,cess_rate:H==="none"?0:me,tax_type:Wt?"inclusive":"exclusive"});return{finalPrice:Te.line_total,priceAfterDiscount:Te.taxable,discountAmount:Te.discount_amount,gst:Te.gst_amount}},[T,l,y,H]),F=ie.useMemo(()=>s.reduce((Ue,et)=>{const ht=et.price||0,kt=et.taxRateId?l[et.taxRateId]:void 0,Be=((kt==null?void 0:kt.rate)||0)/100,Ve=(y==null?void 0:y.tax_inclusive)||!1,pt=H==="none"?0:Be;if(Ve){const he=ht/(1+pt);return Ue+he*et.quantity}else return Ue+ht*et.quantity},0),[s,l,y==null?void 0:y.tax_inclusive,H]),X=ie.useMemo(()=>s.reduce((Ue,et)=>{const{discountAmount:ht}=B(et);return Ue+ht*et.quantity},0),[s,B]),te=ie.useMemo(()=>H==="none"?0:s.reduce((Ue,et)=>{const{gst:ht}=B(et);return Ue+ht*et.quantity},0),[s,B,H]),se=ie.useCallback(()=>!(y!=null&&y.cess_enabled)||!s.length||H==="none"?0:s.reduce((Ue,et)=>{const{priceAfterDiscount:ht}=B(et),kt=et.taxRateId?l[et.taxRateId]:void 0;if(((kt==null?void 0:kt.rate)||0)===28){const Ve=ht*et.quantity*.01;return Ue+Ve}return Ue},0),[s,l,y==null?void 0:y.cess_enabled,B,H]),ce=ie.useMemo(()=>se(),[se]),ue=ie.useMemo(()=>y!=null&&y.tax_inclusive?s.reduce((Ue,et)=>{const{finalPrice:ht}=B(et);return Ue+ht*et.quantity},0):F-X+te+ce,[s,B,y==null?void 0:y.tax_inclusive,F,X,te,ce]),oe=Number(A)-ue,le=ue===0?!0:Number(A)>=ue,pe=ie.useMemo(()=>{if(!s.length||!l||Object.keys(l).length===0)return 0;const Ue=s.find(ht=>ht.taxRateId);if(Ue&&Ue.taxRateId){const ht=l[Ue.taxRateId];if(ht)return ht.rate||0}const et=Object.values(l)[0];return(et==null?void 0:et.rate)||0},[s,l]),ye=Ue=>{o(et=>et.find(kt=>kt.id===Ue.id)?et.map(kt=>kt.id===Ue.id?{...kt,quantity:kt.quantity+1}:kt):[...et,{...Ue,quantity:1}])},be=Ue=>{o(et=>et.filter(ht=>ht.id!==Ue))},Ie=(Ue,et)=>{et<=0?be(Ue):o(ht=>ht.map(kt=>kt.id===Ue?{...kt,quantity:et}:kt))},Oe=ie.useMemo(()=>e?[{column:"company_id",operator:"eq",value:e.id}]:[],[e==null?void 0:e.id]),Me=ie.useMemo(()=>e?[{column:"company_id",operator:"eq",value:e.id}]:[],[e==null?void 0:e.id]),{data:Re=[],loading:He}=qg("products",{filters:Oe,realtime:!0}),{data:qe=[]}=qg("customers",{filters:Me}),[ct,ft]=ie.useState({}),[,St]=ie.useState(!1);ie.useEffect(()=>{(async()=>{if(Re.length>0&&e){St(!0);try{const et=Re.map(kt=>kt.id),ht=await kN(et,e.id);ft(ht)}catch(et){console.error("Error calculating live stock:",et)}finally{St(!1)}}})()},[Re,e]);const Rt=ie.useMemo(()=>v?Re.filter(Ue=>Ue.name.toLowerCase().includes(v.toLowerCase())):Re,[Re,v]);ie.useEffect(()=>{console.log("Sales component mounted, loading tax configuration"),Ft();const Ue=setInterval(()=>{console.log("Refreshing tax configuration"),Ft()},6e4);return()=>{clearInterval(Ue)}},[]);const Ft=ie.useCallback(async()=>{var Ue,et,ht;try{if(console.log("Starting tax configuration load..."),!(await i(async()=>{const{data:xe,error:me}=await De.auth.getSession();if(console.log("Session check:",{session:xe,sessionError:me}),me)throw console.error("Error getting session:",me),new Error("Failed to connect to database: "+me.message);return xe})).session)throw console.error("No active session found"),new Error("Please log in to continue");const{data:Wt,error:Be}=await De.from("tax_rates").select("count",{count:"exact",head:!0});if(console.log("Database connection test:",{testData:Wt,testError:Be}),Be)throw console.error("Database connection test failed:",Be),new Error("Database connection failed: "+Be.message);let{data:Ve,error:pt}=await De.from("tax_rates").select("*");if(console.log("Tax rates response:",{rates:Ve,ratesError:pt}),pt)throw console.error("Error fetching tax rates:",pt),new Error("Failed to fetch tax rates: "+pt.message);if(!Ve||Ve.length===0){console.log("No tax rates found, initializing default rates...");const xe=[{rate:0,description:"GST Exempt"},{rate:5,description:"GST 5%"},{rate:12,description:"GST 12%"},{rate:18,description:"GST 18%"},{rate:28,description:"GST 28%"}],{error:me}=await De.from("tax_rates").insert(xe);if(me)throw console.error("Error inserting default tax rates:",me),new Error("Failed to create default tax rates: "+me.message);const{data:Se,error:ke}=await De.from("tax_rates").select("*");if(ke)throw console.error("Error fetching new tax rates:",ke),new Error("Failed to fetch new tax rates: "+ke.message);console.log("New tax rates created:",Se),Ve=Se}const he=Ve.reduce((xe,me)=>(xe[me.id]=me,xe),{});console.log("Created tax rates map:",he);try{console.log("Loading tax settings...");let xe=await NN(e==null?void 0:e.id);if(console.log("Tax settings loaded:",xe),!xe){console.log("No tax settings found, attempting emergency fix...");const{success:me,message:Se,taxSetting:ke}=await dZ();if(me&&ke)console.log("Emergency fix successful:",Se),xe=ke;else throw console.error("Emergency fix failed:",Se),new Error("Failed to get or create tax settings")}if(xe)console.log("Setting tax settings from loaded data:",xe),m({tax_type:Array.isArray(xe)?(Ue=xe[0])==null?void 0:Ue.tax_type:xe==null?void 0:xe.tax_type,tax_inclusive:!!(Array.isArray(xe)?(et=xe[0])!=null&&et.tax_inclusive:xe!=null&&xe.tax_inclusive),cess_enabled:!!(Array.isArray(xe)?(ht=xe[0])!=null&&ht.cess_enabled:xe!=null&&xe.cess_enabled)});else{const me={tax_type:"split",tax_inclusive:!1,cess_enabled:!1};console.log("Using default tax settings:",me),m(me)}}catch(xe){console.error("Error handling tax settings:",xe),Ce.error("Error loading tax settings. Please try refreshing the page.");const me={tax_type:"split",tax_inclusive:!1,cess_enabled:!1};console.log("Using default tax settings due to error:",me),m(me)}c(he),console.log("Tax configuration loaded successfully")}catch(kt){console.error("Error loading tax configuration:",kt);const Wt=kt instanceof Error?kt.message:"Failed to load tax configuration. Please try again.";console.error("Detailed error:",kt),Ce.error(Wt)}},[]);ie.useEffect(()=>{console.log("Setting up tax settings subscription");const Ue=De.channel("tax_settings_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"tax_settings"},et=>{console.log("Tax settings changed:",et);const ht=et.new;m({tax_type:ht.tax_type,tax_inclusive:!!ht.tax_inclusive,cess_enabled:!!ht.cess_enabled}),console.log("Forcing tax recalculation after settings change")}).subscribe();return()=>{console.log("Removing tax settings subscription"),De.removeChannel(Ue)}},[]);const ot=Ue=>`${Ue.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Kt=Ue=>{if(Ue.key==="Enter"){Ue.preventDefault();const et=Ue.currentTarget.value.trim();if(et){const ht=Re.find(kt=>kt.barcode===et||kt.sku===et);ht?(ye(ht),Ce.success(`Added ${ht.name} to cart`)):Ce.error(`No product found with barcode/SKU: ${et}`),p("")}}},Pt=()=>{q(!P),P||setTimeout(()=>{var Ue;(Ue=g.current)==null||Ue.focus()},100)},Ee=(Ue,et,ht)=>{R(kt=>({...kt,[Ue]:{type:et,value:ht}})),N(!1),k(null),Ce.success(`Discount applied: ${ht}${et==="percentage"?"%":""}`)},We=Ue=>{R(et=>{const ht={...et};return delete ht[Ue],ht}),Ce.success("Discount removed")},ut=()=>{o([]),R({}),O(""),I(null),Ce.success("Cart cleared")},wt=async()=>{if(s.length===0){Ce.error("Cannot hold an empty bill");return}if(!(e!=null&&e.id)){Ce.error("No company selected");return}try{const{data:Ue,error:et}=await De.from("held_sales").insert([{company_id:e.id,cart_items:JSON.stringify([...s]),totals:JSON.stringify({subtotal:F,total_discount:X,total_gst:te,cess:ce,grand_total:ue}),customer:_?JSON.stringify(_):null}]).select();if(et){console.error("Error saving held bill:",et),Ce.error("Failed to hold bill");return}const ht={id:Ue[0].id,timestamp:Ue[0].created_at,customer:_,items:[...s],itemDiscounts:{...T},total:ue};Y(kt=>[ht,...kt]),ut(),Ce.success("Bill held successfully"),console.log("Bill held. Current held bills count:",K.length+1)}catch(Ue){console.error("Error holding bill:",Ue),Ce.error("Failed to hold bill")}},Bt=async Ue=>{console.log("Attempting to recall bill:",Ue),console.log("Current held bills count:",K.length),rr(null),pr(!1),o([]),R({}),I(null),O(""),setTimeout(async()=>{let et=Ue;if(Ue.id&&Ue.id.length===36)try{const{data:ht,error:kt}=await De.from("held_sales").select("*").eq("id",Ue.id).single();if(!kt&&ht){console.log("Fetched held bill data from database:",ht);let Wt=ht.cart_items;if(typeof Wt=="string")try{Wt=JSON.parse(Wt)}catch(Ve){console.error("Error parsing cart_items:",Ve),Ce.error("Failed to parse cart items");return}let Be=ht.customer;if(Be&&typeof Be=="string")try{Be=JSON.parse(Be)}catch(Ve){console.error("Error parsing customer:",Ve),Be=null}if(!Array.isArray(Wt)){console.error("cart_items is not an array:",Wt),Ce.error("Invalid cart data format");return}et={...Ue,items:Wt,customer:Be},console.log("Parsed bill data:",et)}}catch(ht){console.error("Error fetching held bill data:",ht),Ce.error("Failed to fetch held bill data");return}if(!Array.isArray(et.items)){console.error("billData.items is not an array:",et.items),Ce.error("Invalid cart data");return}console.log("Setting cart with items:",et.items),o(et.items),R(et.itemDiscounts||{}),I(et.customer),O(""),Y(ht=>{const kt=ht.filter(Wt=>Wt.id!==Ue.id);return console.log("Updated held bills count:",kt.length),kt});try{const ht=De.from("held_sales"),kt={status:"recalled"};await ht.update(kt).eq("id",Ue.id)}catch(ht){console.error("Error updating held bill status:",ht)}V(!1),Ce.success("Bill recalled successfully")},50)},dr=async Ue=>{console.log("Deleting held bill with ID:",Ue),console.log("Current held bills count:",K.length);try{await De.from("held_sales").delete().eq("id",Ue)}catch(et){console.error("Error deleting held bill from database:",et)}Y(et=>{const ht=et.filter(kt=>kt.id!==Ue);return console.log("Updated held bills count after delete:",ht.length),ht}),Ce.success("Held bill deleted")},[Xt,pr]=ie.useState(!1),[vr,rr]=ie.useState(null);ie.useEffect(()=>{if(vr&&(u!=null&&u.default_print_format)&&!Xt){const Ue=u.default_print_format;setTimeout(()=>{Zt(Ue)},100)}},[vr,u==null?void 0:u.default_print_format]);const Zt=async Ue=>{const et=vr;if(!et){Ce.error("No sale data to print"),pr(!1),rr(null);return}try{if(!et.id)throw new Error("Missing sale ID");const ht=et.items.map(xe=>{const me=(y==null?void 0:y.tax_inclusive)||!1,Se=xe.taxRate||18,Te=(y==null?void 0:y.cess_enabled)&&Se===28?1:void 0,Ge=H==="none",nt=sZ(xe.name||"Item",xe.price||0,xe.quantity||1,xe.discountPercentage,xe.discountAmount,Se,Ge?"exclusive":me?"inclusive":"exclusive",Te,Ge);return{name:xe.name||"Item",quantity:xe.quantity||1,rate:xe.price||0,discountPercentage:xe.discountPercentage||0,discountAmount:nt.discountAmount,netPrice:nt.netPrice,gstPercentage:xe.taxRate||18,cessAmount:nt.cessAmount,subTotal:nt.subTotal,gstAmount:nt.gstAmount,lineTotal:nt.lineTotal,taxRate:xe.taxRate}}),kt=oZ(ht,0,H==="none"),Wt=et.customer?{name:et.customer.name||"",email:et.customer.email||void 0,phone:et.customer.phone||void 0,gstNumber:et.customer.gstNumber||et.customer.gst_number||void 0,address:[et.customer.addressStreet||et.customer.address_street,et.customer.addressCity||et.customer.address_city,et.customer.addressState||et.customer.address_state,et.customer.addressPostalCode||et.customer.address_postal_code].filter(Boolean).join(", ")||void 0}:void 0,Be={id:et.id,invoiceNumber:et.invoiceNumber||et.id,date:et.createdAt||new Date().toISOString(),time:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),items:ht,customer:Wt,taxType:H==="none"?"none":H,customerPaid:et.cashReceived||0,changeReturned:et.change||0,amountInWords:Zd(Math.round(et.total||0)),totalCGST:H==="split"?kt.totalGST/2:void 0,totalSGST:H==="split"?kt.totalGST/2:void 0,totalIGST:H==="integrated"?kt.totalGST:void 0,...kt},Ve=e?{name:e.name||"Unknown Company",legal_name:e.legal_name||e.name||"Unknown Company",tax_number:e.tax_number||void 0,email:e.email||void 0,phone:e.phone||void 0,website:e.website||void 0,address_street:e.address_street||void 0,address_city:e.address_city||void 0,address_state:e.address_state||void 0,address_postal_code:e.address_postal_code||void 0,address_country:e.address_country||void 0,state_code:e.state_code||void 0,pan:e.pan||void 0,logo_url:e.logo_url||void 0}:gZ,pt=structuredClone(Be),he={...pt,taxType:pt.taxType};Ue==="thermal"?await cZ(Ve,he):await lZ(Ve,he),Ce.success(`${Ue==="thermal"?"Thermal":"A4"} invoice generated successfully!`)}catch(ht){console.error("Print error:",ht),Ce.error(`Failed to generate print document: ${ht instanceof Error?ht.message:"Unknown error"}`)}finally{pr(!1),rr(null)}},lr=Ue=>{rr(null),pr(!1);const et=structuredClone(Ue);if(u!=null&&u.default_print_format){rr(et);return}rr(et),pr(!0)},fr=async()=>{if(!n("sales","edit")){Ce.error(`As ${a}, you cannot complete transactions.`);return}if(s.length===0){Ce.error("Cart is empty");return}if(!le){Ce.error("Insufficient cash amount");return}if(!l||!y){Ce.error("Tax configuration not loaded. Please try again.");return}S(!0);try{const Ue=s.map(he=>{const xe=B(he),me=T[he.id];let Se=0,ke=0;if(me)if(me.type==="percentage")Se=me.value,ke=he.price*he.quantity*(Se/100);else{ke=me.value;const Te=he.price*he.quantity;Te>0&&(Se=ke/Te*100)}return{id:he.id,quantity:Qe(he.quantity),name:he.name,price:Qe(he.price),discount_percentage:Qe(Se),discount_amount:Qe(ke),taxAmount:Qe(xe.gst),taxRateId:ul(he.taxRateId)}}),ht=(()=>{switch(M){case"cash":return{paymentMethod:"cash",cashReceived:Qe(A),change:Qe(oe)};case"creditCard":return{paymentMethod:"creditCard"};case"mobilePayment":return{paymentMethod:"mobilePayment"};default:return null}})();if(!ht){Ce.error("Invalid payment method"),S(!1);return}const kt={items:Ue,subtotal:Qe(F),tax:Qe(te),total:Qe(ue),totalDiscount:Qe(X),customerId:ul(_==null?void 0:_.id),customerName:(_==null?void 0:_.name)||"",customerGst:(_==null?void 0:_.gstNumber)||(_==null?void 0:_.gst_number)||"",customerAddress:[(_==null?void 0:_.addressStreet)||(_==null?void 0:_.address_street),(_==null?void 0:_.addressCity)||(_==null?void 0:_.address_city),(_==null?void 0:_.addressState)||(_==null?void 0:_.address_state),(_==null?void 0:_.addressPostalCode)||(_==null?void 0:_.address_postal_code)].filter(Boolean).join(", "),customerPhone:(_==null?void 0:_.phone)||"",customerEmail:(_==null?void 0:_.email)||"",taxType:H,cgst:H==="split"?Qe(te/2):0,sgst:H==="split"?Qe(te/2):0,igst:H==="integrated"?Qe(te):0,cess:H!=="none"?Qe(ce):0,companyId:ul(e==null?void 0:e.id),...ht},{success:Wt,error:Be,saleId:Ve}=await i(()=>iK(kt));if(!Wt)throw new Error(Be||"Failed to process sale");let pt=null;if(Ve)try{const{data:he,error:xe}=await De.from("sales").select("id, invoice_number, created_at").eq("id",Ve).single();xe?console.error("Error fetching sale record:",xe):pt=he}catch(he){console.error("Error fetching sale record:",he)}if(!Ve)Ce.error("Sale ID was not generated. Cannot create invoice.");else{const he=s.map(me=>{const Se=B(me),ke=T[me.id];let Te=0,Ge=0;if(ke)if(ke.type==="percentage")Te=ke.value,Ge=me.price*me.quantity*(Te/100);else{Ge=ke.value;const it=me.price*me.quantity;it>0&&(Te=Ge/it*100)}const nt=me.taxRateId,Ke=nt&&l[nt]?l[nt].rate:0;return{id:me.id,quantity:Qe(me.quantity),name:me.name,price:Qe(me.price),total:Qe(Se.finalPrice*me.quantity),discountPercentage:Qe(Te),discountAmount:Qe(Ge),tax:Qe(Se.gst),taxRate:Qe(Ke),taxRateId:ul(me.taxRateId)}}),xe={id:Ve,invoiceNumber:pt==null?void 0:pt.invoice_number,createdAt:(pt==null?void 0:pt.created_at)||new Date().toISOString(),items:he,subtotal:Qe(F),tax:Qe(te),total:Qe(ue),totalDiscount:Qe(X),customerId:ul(_==null?void 0:_.id),customer:_?{name:_.name||"",email:_.email||"",phone:_.phone||"",gstNumber:_.gstNumber||_.gst_number||"",address:[_.addressStreet||_.address_street,_.addressCity||_.address_city,_.addressState||_.address_state,_.addressPostalCode||_.address_postal_code].filter(Boolean).join(", ")}:void 0,taxType:H,cgst:H==="split"?Qe(te/2):0,sgst:H==="split"?Qe(te/2):0,igst:H==="integrated"?Qe(te):0,cess:H!=="none"?Qe(ce):0,companyId:ul(e==null?void 0:e.id),...ht};if(e!=null&&e.id&&(_!=null&&_.phone)){const me=(u==null?void 0:u.default_print_format)||"a4",Se={...xe,invoice_number:pt==null?void 0:pt.invoice_number,created_at:(pt==null?void 0:pt.created_at)||new Date().toISOString(),customer_phone:_.phone,customerPhone:_.phone,customer_id:_.id,customerId:_.id,customerPaid:Qe(A),changeReturned:Qe(oe),taxType:H};rD(Se,e.id,!1,me).then(ke=>{ke.success?(console.log(" WhatsApp invoice sent successfully"),Ce.success("Invoice sent via WhatsApp",{duration:2e3})):console.error(" Failed to send WhatsApp invoice:",ke.error)}).catch(ke=>{console.error(" WhatsApp invoice error:",ke)})}console.log("=== INVOICE DATA DEBUG ==="),console.log("Selected Customer:",_),console.log("Customer in Invoice Data:",xe.customer),console.log("========================"),lr(xe)}Ce.success(`Sale completed. Change: ${ot(oe)}`),ut()}catch(Ue){console.error("Sale error:",Ue),Ce.error(Ue instanceof Error?Ue.message:"An unexpected error occurred")}finally{S(!1)}};return d.jsxs("div",{className:`flex h-full gap-6 p-4 ${t?"bg-gray-900":"bg-blue-50"}`,children:[d.jsx(yZ,{isOpen:C,onClose:()=>{N(!1),k(null)},onApply:Ee,itemId:E,itemPrice:E&&((xr=s.find(Ue=>Ue.id===E))==null?void 0:xr.price)||0,isGlobal:!1}),Z&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:`w-3/4 max-w-4xl max-h-[80vh] overflow-y-auto p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"Held Bills"}),d.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),K.length===0?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:`${t?"text-white":"text-gray-600"}`,children:"No held bills"})}):d.jsx("div",{className:"space-y-4",children:K.map(Ue=>d.jsx("div",{className:`p-4 rounded-md ${t?"bg-gray-700":"bg-gray-50"}`,children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-medium",children:["Bill #",Ue.id.slice(-6)]}),d.jsx("div",{className:"text-sm text-gray-500",children:new Date(Ue.timestamp).toLocaleString()}),d.jsx("div",{className:"text-sm",children:Ue.customer?Ue.customer.name:"No customer"}),d.jsxs("div",{className:"font-semibold mt-1",children:["Total: ",Ue.total.toFixed(2)]}),d.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[Ue.items.length," item",Ue.items.length!==1?"s":""]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(lt,{variant:"primary",size:"sm",onClick:()=>Bt(Ue),children:"Recall"}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>dr(Ue.id),children:"Delete"})]})]})},Ue.id))})]})}),Xt&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:`w-96 p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium",children:"Select Print Format"}),(u==null?void 0:u.default_print_format)&&d.jsxs("p",{className:"text-sm text-gray-500",children:["Default: ",u.default_print_format==="a4"?"A4 Paper":"Thermal Paper"]})]}),d.jsx("button",{onClick:()=>{pr(!1),rr(null)},className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsxs("div",{className:"space-y-4",children:[(u==null?void 0:u.default_print_format)==="a4"?d.jsxs(d.Fragment,{children:[d.jsxs(lt,{variant:"primary",className:"w-full flex items-center justify-center",onClick:()=>Zt("a4"),children:[d.jsx("span",{className:"mr-2",children:""}),"A4 Paper (Standard Invoice) - Default"]}),d.jsxs(lt,{variant:"secondary",className:"w-full flex items-center justify-center",onClick:()=>Zt("thermal"),children:[d.jsx("span",{className:"mr-2",children:""}),"36 Roll Thermal Paper"]})]}):(u==null?void 0:u.default_print_format)==="thermal"?d.jsxs(d.Fragment,{children:[d.jsxs(lt,{variant:"primary",className:"w-full flex items-center justify-center",onClick:()=>Zt("thermal"),children:[d.jsx("span",{className:"mr-2",children:""}),"36 Roll Thermal Paper - Default"]}),d.jsxs(lt,{variant:"secondary",className:"w-full flex items-center justify-center",onClick:()=>Zt("a4"),children:[d.jsx("span",{className:"mr-2",children:""}),"A4 Paper (Standard Invoice)"]})]}):d.jsxs(d.Fragment,{children:[d.jsxs(lt,{variant:"primary",className:"w-full flex items-center justify-center",onClick:()=>Zt("a4"),children:[d.jsx("span",{className:"mr-2",children:""}),"A4 Paper (Standard Invoice)"]}),d.jsxs(lt,{variant:"secondary",className:"w-full flex items-center justify-center",onClick:()=>Zt("thermal"),children:[d.jsx("span",{className:"mr-2",children:""}),"36 Roll Thermal Paper"]})]}),d.jsx(lt,{variant:"ghost",className:"w-full",onClick:()=>{pr(!1),rr(null)},children:"Cancel"})]})]})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"relative flex-1 mr-4",children:[d.jsx("input",{type:"text",placeholder:"Search products...",value:v,onChange:Ue=>b(Ue.target.value),className:`w-full pl-10 pr-4 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx(nd,{className:`absolute left-3 top-2.5 w-5 h-5 ${t?"text-gray-400":"text-gray-500"}`})]}),d.jsx(lt,{variant:"secondary",onClick:()=>D(!0),leftIcon:d.jsx(wn,{className:"w-4 h-4"}),children:_?_.name:"Add Customer (Optional)"})]}),d.jsxs("div",{className:`flex items-center gap-2 ${P?"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md":""}`,children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx("input",{ref:g,type:"text",placeholder:"Scan barcode or enter SKU...",value:h,onChange:Ue=>p(Ue.target.value),onKeyDown:Kt,className:`w-full pl-10 pr-4 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${P?"border-blue-500 ring-2 ring-blue-300 dark:ring-blue-700":""}`,disabled:!P}),d.jsx(X0,{className:`absolute left-3 top-2.5 w-5 h-5 ${t?"text-gray-400":"text-gray-500"} ${P?"text-blue-500":""}`})]}),d.jsx(lt,{variant:P?"primary":"secondary",onClick:Pt,leftIcon:d.jsx(X0,{className:"w-4 h-4"}),children:P?"Scanner Active":"Activate Scanner"})]})]}),U?d.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} mb-6`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("span",{className:"font-medium",children:"Select Customer"}),d.jsx("button",{onClick:()=>D(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] overflow-y-auto",children:qe.map(Ue=>d.jsxs("button",{onClick:()=>{I(Ue),D(!1)},className:`w-full text-left p-4 rounded-md ${t?"hover:bg-white-700":"hover:bg-white-100"}`,children:[d.jsx("div",{className:"font-medium",children:Ue.name}),d.jsx("div",{className:`text-sm ${t?"text-white-400":"text-white-500"}`,children:Ue.email})]},Ue.id))})]}):d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:He?[...Array(8)].map((Ue,et)=>d.jsxs("div",{className:`animate-pulse ${t?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm`,children:[d.jsx("div",{className:"aspect-square bg-gray-300 rounded-md mb-3"}),d.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),d.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]},et)):Rt.length===0?d.jsxs("div",{className:"col-span-full text-center py-8",children:[d.jsx(Hn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:`${t?"text-white":"text-gray-600"} mb-2`,children:Re.length===0?`No products available for ${(e==null?void 0:e.name)||"your company"}`:"No products match your search criteria"}),Re.length===0&&d.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-500"}`,children:"Add products in the Products section to get started"})]}):Rt.map(Ue=>d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow`,children:[Ue.imageUrl?d.jsx("img",{src:Ue.imageUrl,alt:Ue.name,className:"aspect-square object-cover rounded-md mb-3"}):d.jsx("div",{className:`aspect-square ${t?"bg-gray-700":"bg-gray-100"} rounded-md mb-3 flex items-center justify-center`,children:d.jsx(Hn,{className:"w-12 h-12 text-white"})}),d.jsx("h3",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:Ue.name}),d.jsxs("p",{className:`text-sm ${t?"text-white":"text-gray-600"}`,children:["SKU: ",Ue.sku]}),d.jsxs("p",{className:`text-sm ${t?"text-white":"text-gray-600"}`,children:["Category: ",Ue.category]}),d.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[d.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:ot(Ue.price)}),d.jsxs("p",{className:`text-sm ${Ue.stock<5?"text-red-500":t?"text-white":"text-gray-600"}`,children:["Available: ",ct[Ue.id]!==void 0?ct[Ue.id]:0]})]}),d.jsx(lt,{variant:"primary",size:"sm",className:"w-full mt-3",leftIcon:d.jsx(ml,{className:"w-4 h-4"}),onClick:()=>ye(Ue),disabled:(ct[Ue.id]!==void 0?ct[Ue.id]:0)===0,children:(ct[Ue.id]!==void 0?ct[Ue.id]:0)===0?"Out of Stock":"Add to Cart"})]},Ue.id))})]}),d.jsxs("div",{className:`w-96 ${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:`text-xl font-semibold ${t?"text-white":"text-gray-900"}`,children:"Current Sale"}),d.jsxs("div",{className:"flex space-x-2 items-center",children:[d.jsx(ui,{className:"w-6 h-6"}),s.length>0&&d.jsxs(d.Fragment,{children:[d.jsxs(lt,{variant:"secondary",size:"sm",onClick:wt,className:"flex items-center",children:[d.jsx("span",{className:"mr-1",children:""})," Hold Bill"]}),d.jsx(lt,{variant:"ghost",size:"sm",onClick:ut,className:"text-red-500 hover:text-red-600",children:"Clear"})]}),d.jsxs(lt,{variant:"secondary",size:"sm",onClick:()=>V(!0),disabled:K.length===0,children:[" Recall Bill (",K.length,")"]})]})]}),s.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(ui,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:`${t?"text-white":"text-gray-600"}`,children:"Your cart is empty"})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-4 mb-6",children:s.map(Ue=>{const{finalPrice:et}=B(Ue),ht=et*Ue.quantity;return d.jsxs("div",{className:`p-4 rounded-md ${t?"bg-gray-700":"bg-gray-50"}`,children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:Ue.name}),d.jsxs("p",{className:`text-sm ${t?"text-white":"text-gray-600"}`,children:["Category: ",Ue.category]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("p",{className:`text-sm ${t?"text-white":"text-gray-600"}`,children:[ot(Ue.price)," each"]}),T[Ue.id]&&d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[d.jsx(Xi,{className:"w-3 h-3 mr-1"}),T[Ue.id].value,T[Ue.id].type==="percentage"?"%":""," off"]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("p",{className:"font-semibold",children:ot(ht)}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(lt,{variant:"ghost",size:"sm",className:"text-blue-500 hover:text-blue-600",onClick:()=>{k(Ue.id),N(!0)},"aria-label":"Apply discount",children:d.jsx(Xi,{className:"w-4 h-4"})}),T[Ue.id]&&d.jsx(lt,{variant:"ghost",size:"sm",className:"text-orange-500 hover:text-orange-600",onClick:()=>We(Ue.id),"aria-label":"Remove discount",children:d.jsx(va,{className:"w-4 h-4"})}),d.jsx(lt,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",onClick:()=>be(Ue.id),"aria-label":"Remove item",children:d.jsx(Xu,{className:"w-4 h-4"})})]})]})]}),d.jsxs("div",{className:"mt-2 flex items-center",children:[d.jsxs("div",{className:"flex items-center space-x-2 mr-2",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>Ie(Ue.id,Ue.quantity-1),"aria-label":"Decrease quantity",children:d.jsx(vD,{className:"w-4 h-4"})}),d.jsx("span",{className:"w-8 text-center",children:Ue.quantity}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>Ie(Ue.id,Ue.quantity+1),"aria-label":"Increase quantity",disabled:Ue.quantity>=(ct[Ue.id]!==void 0?ct[Ue.id]:0),children:d.jsx(ml,{className:"w-4 h-4"})})]}),d.jsx("div",{className:"flex space-x-1 ml-auto",children:[5,10,20].map(kt=>d.jsx("button",{onClick:()=>{kt<=(ct[Ue.id]!==void 0?ct[Ue.id]:0)?o(Wt=>Wt.map(Be=>Be.id===Ue.id?{...Be,quantity:kt}:Be)):Ce.error(`Cannot set quantity to ${kt}. Maximum stock is ${ct[Ue.id]!==void 0?ct[Ue.id]:0}.`)},className:`px-2 py-1 text-xs rounded-md ${t?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"} ${Ue.quantity===kt?"ring-2 ring-blue-500":""}`,disabled:kt>(ct[Ue.id]!==void 0?ct[Ue.id]:0),children:kt},kt))})]})]},Ue.id)})}),d.jsxs("div",{className:"border-t pt-4 space-y-4",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Subtotal (Before Discount)"}),d.jsx("span",{children:ot(F)})]}),X>0&&d.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-1"}),"Total Discount Amount"]}),d.jsxs("span",{children:["-",ot(X)]})]}),X>0&&d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Subtotal (After Discount)"}),d.jsx("span",{children:ot(F-X)})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("label",{className:"text-sm font-medium",children:"Tax Type:"}),d.jsxs("select",{value:H,onChange:Ue=>L(Ue.target.value),className:`p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"split",children:"CGST + SGST (Same State)"}),d.jsx("option",{value:"integrated",children:"IGST (Interstate)"}),d.jsx("option",{value:"none",children:"Nil Tax"})]})]}),d.jsxs("div",{className:"flex justify-between text-sm font-medium bg-green-100 dark:bg-green-900/30 p-3 rounded mb-2 border-l-4 border-green-500",children:[d.jsx("span",{className:"font-bold",children:"GST Summary Amount"}),d.jsx("span",{className:"font-bold",children:ot(te)})]}),d.jsxs("div",{className:"mb-3 p-2 rounded bg-blue-50 dark:bg-blue-800/40",children:[d.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Debug: Tax Rate: ",pe,"%, Total GST: ",ot(te),", Mode: ",y!=null&&y.tax_inclusive?"Inclusive":"Exclusive"]}),H==="split"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsxs("span",{children:["CGST (",pe/2,"%)"]}),d.jsx("span",{className:"ml-1 text-xs text-white",children:s.length>0&&s[0].hsnCode?`HSN: ${s[0].hsnCode}`:""})]}),d.jsx("span",{children:ot(te/2)})]}),d.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[d.jsxs("span",{children:["SGST (",pe/2,"%)"]}),d.jsx("span",{children:ot(te/2)})]})]}):d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsxs("span",{children:["IGST (",pe,"%)"]}),d.jsx("span",{className:"ml-1 text-xs text-white",children:s.length>0&&s[0].hsnCode?`HSN: ${s[0].hsnCode}`:""})]}),d.jsx("span",{children:ot(te)})]})]}),(y==null?void 0:y.cess_enabled)&&d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{children:"CESS (1%)"}),d.jsx("span",{children:ot(ce)})]}),d.jsxs("div",{className:"flex justify-between text-lg font-semibold mt-3 p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg border-l-4 border-blue-500",children:[d.jsx("span",{children:"Grand Total"}),d.jsx("span",{children:ot(ue)})]}),d.jsxs("div",{className:"space-y-2 mt-6 border-t pt-4 dark:border-gray-700",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium",children:"Cash Received"}),d.jsxs("span",{className:"text-xs text-white",children:["Total Due: ",ot(ue)]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(Ti,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),d.jsx("input",{type:"number",min:"0",step:"0.01",value:A,onChange:Ue=>O(Ue.target.value),placeholder:"Enter amount",className:`w-full pl-10 pr-4 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${!le&&A?"border-red-500 ring-2 ring-red-500":"focus:ring-2 focus:ring-blue-500"}`})]}),A&&d.jsxs("div",{className:`p-3 rounded-md ${t?"bg-gray-700":"bg-gray-100"}`,children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Change"}),d.jsx("span",{className:oe>=0?"text-green-500":"text-red-500",children:ot(Math.max(0,oe))})]}),!le&&d.jsxs("div",{className:"flex items-center mt-2 text-red-500 text-sm",children:[d.jsx(Wn,{className:"w-4 h-4 mr-1"}),d.jsxs("span",{children:["Insufficient amount (",ot(ue-Number(A))," more needed)"]})]})]})]}),d.jsxs("div",{className:"mt-4 border-t pt-4 dark:border-gray-700",children:[d.jsx("h4",{className:"text-sm font-medium mb-3",children:"Payment Method"}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsxs("button",{className:`flex flex-col items-center justify-center p-3 rounded-lg border transition-all ${M==="cash"?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"}`,onClick:()=>z("cash"),children:[d.jsx(vK,{className:`w-6 h-6 mb-1 ${M==="cash"?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`}),d.jsx("span",{className:"text-sm font-medium",children:"Cash"})]}),d.jsxs("button",{className:`flex flex-col items-center justify-center p-3 rounded-lg border transition-all ${M==="creditCard"?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"}`,onClick:()=>z("creditCard"),children:[d.jsx(_K,{className:`w-6 h-6 mb-1 ${M==="creditCard"?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`}),d.jsx("span",{className:"text-sm font-medium",children:"Credit Card"})]}),d.jsxs("button",{className:`flex flex-col items-center justify-center p-3 rounded-lg border transition-all ${M==="mobilePayment"?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"}`,onClick:()=>z("mobilePayment"),children:[d.jsx(AK,{className:`w-6 h-6 mb-1 ${M==="mobilePayment"?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`}),d.jsx("span",{className:"text-sm font-medium",children:"Mobile Payment"})]})]})]})]}),n("sales","edit")?d.jsxs(d.Fragment,{children:[d.jsx(lt,{variant:"primary",size:"lg",className:"w-full mt-6",leftIcon:d.jsx(tc,{className:"w-5 h-5"}),isLoading:x,onClick:fr,disabled:!le||s.length===0,children:"Complete Sale"}),(_==null?void 0:_.phone)&&(e==null?void 0:e.id)&&d.jsx("div",{className:"mt-4 flex gap-2",children:d.jsx(Tx,{phoneNumber:_.phone,messageType:"sales_invoice",messageData:{invoice_number:"INV-001",total:ue,customer_name:_.name},companyId:e.id,customerId:_.id,variant:"secondary",size:"lg",className:"flex-1"})})]}):d.jsxs("div",{className:"mt-6",children:[d.jsx(lt,{variant:"secondary",size:"lg",className:"w-full",leftIcon:d.jsx(Wn,{className:"w-5 h-5"}),disabled:!0,children:"Transaction Completion Restricted"}),d.jsxs("p",{className:"text-sm text-center mt-2 text-gray-500 dark:text-gray-400",children:["As a ",a,", you can create orders but cannot complete transactions. Please contact a manager or cashier to finalize this sale."]})]})]})]})]})};function yL(r){var t,e,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(t=0;t<a;t++)r[t]&&(e=yL(r[t]))&&(n&&(n+=" "),n+=e)}else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function dn(){for(var r,t,e=0,n="",a=arguments.length;e<a;e++)(r=arguments[e])&&(t=yL(r))&&(n&&(n+=" "),n+=t);return n}var g_,vT;function xo(){if(vT)return g_;vT=1;var r=Array.isArray;return g_=r,g_}var y_,bT;function vL(){if(bT)return y_;bT=1;var r=typeof rn=="object"&&rn&&rn.Object===Object&&rn;return y_=r,y_}var v_,xT;function Qc(){if(xT)return v_;xT=1;var r=vL(),t=typeof self=="object"&&self&&self.Object===Object&&self,e=r||t||Function("return this")();return v_=e,v_}var b_,wT;function $y(){if(wT)return b_;wT=1;var r=Qc(),t=r.Symbol;return b_=t,b_}var x_,_T;function bZ(){if(_T)return x_;_T=1;var r=$y(),t=Object.prototype,e=t.hasOwnProperty,n=t.toString,a=r?r.toStringTag:void 0;function i(s){var o=e.call(s,a),l=s[a];try{s[a]=void 0;var c=!0}catch{}var u=n.call(s);return c&&(o?s[a]=l:delete s[a]),u}return x_=i,x_}var w_,ST;function xZ(){if(ST)return w_;ST=1;var r=Object.prototype,t=r.toString;function e(n){return t.call(n)}return w_=e,w_}var __,NT;function ad(){if(NT)return __;NT=1;var r=$y(),t=bZ(),e=xZ(),n="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?t(o):e(o)}return __=s,__}var S_,jT;function id(){if(jT)return S_;jT=1;function r(t){return t!=null&&typeof t=="object"}return S_=r,S_}var N_,kT;function cm(){if(kT)return N_;kT=1;var r=ad(),t=id(),e="[object Symbol]";function n(a){return typeof a=="symbol"||t(a)&&r(a)==e}return N_=n,N_}var j_,ET;function EN(){if(ET)return j_;ET=1;var r=xo(),t=cm(),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(r(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||t(i)?!0:n.test(i)||!e.test(i)||s!=null&&i in Object(s)}return j_=a,j_}var k_,AT;function Sf(){if(AT)return k_;AT=1;function r(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}return k_=r,k_}var E_,TT;function AN(){if(TT)return E_;TT=1;var r=ad(),t=Sf(),e="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!t(o))return!1;var l=r(o);return l==n||l==a||l==e||l==i}return E_=s,E_}var A_,CT;function wZ(){if(CT)return A_;CT=1;var r=Qc(),t=r["__core-js_shared__"];return A_=t,A_}var T_,PT;function _Z(){if(PT)return T_;PT=1;var r=wZ(),t=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function e(n){return!!t&&t in n}return T_=e,T_}var C_,OT;function bL(){if(OT)return C_;OT=1;var r=Function.prototype,t=r.toString;function e(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return C_=e,C_}var P_,IT;function SZ(){if(IT)return P_;IT=1;var r=AN(),t=_Z(),e=Sf(),n=bL(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,u=RegExp("^"+l.call(c).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!e(h)||t(h))return!1;var p=r(h)?u:i;return p.test(n(h))}return P_=f,P_}var O_,MT;function NZ(){if(MT)return O_;MT=1;function r(t,e){return t==null?void 0:t[e]}return O_=r,O_}var I_,RT;function Kh(){if(RT)return I_;RT=1;var r=SZ(),t=NZ();function e(n,a){var i=t(n,a);return r(i)?i:void 0}return I_=e,I_}var M_,FT;function Fx(){if(FT)return M_;FT=1;var r=Kh(),t=r(Object,"create");return M_=t,M_}var R_,DT;function jZ(){if(DT)return R_;DT=1;var r=Fx();function t(){this.__data__=r?r(null):{},this.size=0}return R_=t,R_}var F_,LT;function kZ(){if(LT)return F_;LT=1;function r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}return F_=r,F_}var D_,BT;function EZ(){if(BT)return D_;BT=1;var r=Fx(),t="__lodash_hash_undefined__",e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;if(r){var o=s[i];return o===t?void 0:o}return n.call(s,i)?s[i]:void 0}return D_=a,D_}var L_,$T;function AZ(){if($T)return L_;$T=1;var r=Fx(),t=Object.prototype,e=t.hasOwnProperty;function n(a){var i=this.__data__;return r?i[a]!==void 0:e.call(i,a)}return L_=n,L_}var B_,UT;function TZ(){if(UT)return B_;UT=1;var r=Fx(),t="__lodash_hash_undefined__";function e(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=r&&a===void 0?t:a,this}return B_=e,B_}var $_,qT;function CZ(){if(qT)return $_;qT=1;var r=jZ(),t=kZ(),e=EZ(),n=AZ(),a=TZ();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=t,i.prototype.get=e,i.prototype.has=n,i.prototype.set=a,$_=i,$_}var U_,zT;function PZ(){if(zT)return U_;zT=1;function r(){this.__data__=[],this.size=0}return U_=r,U_}var q_,WT;function TN(){if(WT)return q_;WT=1;function r(t,e){return t===e||t!==t&&e!==e}return q_=r,q_}var z_,HT;function Dx(){if(HT)return z_;HT=1;var r=TN();function t(e,n){for(var a=e.length;a--;)if(r(e[a][0],n))return a;return-1}return z_=t,z_}var W_,VT;function OZ(){if(VT)return W_;VT=1;var r=Dx(),t=Array.prototype,e=t.splice;function n(a){var i=this.__data__,s=r(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():e.call(i,s,1),--this.size,!0}return W_=n,W_}var H_,GT;function IZ(){if(GT)return H_;GT=1;var r=Dx();function t(e){var n=this.__data__,a=r(n,e);return a<0?void 0:n[a][1]}return H_=t,H_}var V_,KT;function MZ(){if(KT)return V_;KT=1;var r=Dx();function t(e){return r(this.__data__,e)>-1}return V_=t,V_}var G_,XT;function RZ(){if(XT)return G_;XT=1;var r=Dx();function t(e,n){var a=this.__data__,i=r(a,e);return i<0?(++this.size,a.push([e,n])):a[i][1]=n,this}return G_=t,G_}var K_,YT;function Lx(){if(YT)return K_;YT=1;var r=PZ(),t=OZ(),e=IZ(),n=MZ(),a=RZ();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=t,i.prototype.get=e,i.prototype.has=n,i.prototype.set=a,K_=i,K_}var X_,JT;function CN(){if(JT)return X_;JT=1;var r=Kh(),t=Qc(),e=r(t,"Map");return X_=e,X_}var Y_,ZT;function FZ(){if(ZT)return Y_;ZT=1;var r=CZ(),t=Lx(),e=CN();function n(){this.size=0,this.__data__={hash:new r,map:new(e||t),string:new r}}return Y_=n,Y_}var J_,QT;function DZ(){if(QT)return J_;QT=1;function r(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}return J_=r,J_}var Z_,e7;function Bx(){if(e7)return Z_;e7=1;var r=DZ();function t(e,n){var a=e.__data__;return r(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Z_=t,Z_}var Q_,t7;function LZ(){if(t7)return Q_;t7=1;var r=Bx();function t(e){var n=r(this,e).delete(e);return this.size-=n?1:0,n}return Q_=t,Q_}var e5,r7;function BZ(){if(r7)return e5;r7=1;var r=Bx();function t(e){return r(this,e).get(e)}return e5=t,e5}var t5,n7;function $Z(){if(n7)return t5;n7=1;var r=Bx();function t(e){return r(this,e).has(e)}return t5=t,t5}var r5,a7;function UZ(){if(a7)return r5;a7=1;var r=Bx();function t(e,n){var a=r(this,e),i=a.size;return a.set(e,n),this.size+=a.size==i?0:1,this}return r5=t,r5}var n5,i7;function PN(){if(i7)return n5;i7=1;var r=FZ(),t=LZ(),e=BZ(),n=$Z(),a=UZ();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=t,i.prototype.get=e,i.prototype.has=n,i.prototype.set=a,n5=i,n5}var a5,s7;function xL(){if(s7)return a5;s7=1;var r=PN(),t="Expected a function";function e(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],l=i.cache;if(l.has(o))return l.get(o);var c=n.apply(this,s);return i.cache=l.set(o,c)||l,c};return i.cache=new(e.Cache||r),i}return e.Cache=r,a5=e,a5}var i5,o7;function qZ(){if(o7)return i5;o7=1;var r=xL(),t=500;function e(n){var a=r(n,function(s){return i.size===t&&i.clear(),s}),i=a.cache;return a}return i5=e,i5}var s5,l7;function zZ(){if(l7)return s5;l7=1;var r=qZ(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,n=r(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(s,o,l,c){i.push(l?c.replace(e,"$1"):o||s)}),i});return s5=n,s5}var o5,c7;function ON(){if(c7)return o5;c7=1;function r(t,e){for(var n=-1,a=t==null?0:t.length,i=Array(a);++n<a;)i[n]=e(t[n],n,t);return i}return o5=r,o5}var l5,u7;function WZ(){if(u7)return l5;u7=1;var r=$y(),t=ON(),e=xo(),n=cm(),a=r?r.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(e(o))return t(o,s)+"";if(n(o))return i?i.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return l5=s,l5}var c5,d7;function wL(){if(d7)return c5;d7=1;var r=WZ();function t(e){return e==null?"":r(e)}return c5=t,c5}var u5,f7;function _L(){if(f7)return u5;f7=1;var r=xo(),t=EN(),e=zZ(),n=wL();function a(i,s){return r(i)?i:t(i,s)?[i]:e(n(i))}return u5=a,u5}var d5,h7;function $x(){if(h7)return d5;h7=1;var r=cm();function t(e){if(typeof e=="string"||r(e))return e;var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}return d5=t,d5}var f5,p7;function IN(){if(p7)return f5;p7=1;var r=_L(),t=$x();function e(n,a){a=r(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[t(a[i++])];return i&&i==s?n:void 0}return f5=e,f5}var h5,m7;function SL(){if(m7)return h5;m7=1;var r=IN();function t(e,n,a){var i=e==null?void 0:r(e,n);return i===void 0?a:i}return h5=t,h5}var HZ=SL();const hl=In(HZ);var p5,g7;function VZ(){if(g7)return p5;g7=1;function r(t){return t==null}return p5=r,p5}var GZ=VZ();const nn=In(GZ);var m5,y7;function KZ(){if(y7)return m5;y7=1;var r=ad(),t=xo(),e=id(),n="[object String]";function a(i){return typeof i=="string"||!t(i)&&e(i)&&r(i)==n}return m5=a,m5}var XZ=KZ();const Mh=In(XZ);var YZ=AN();const Qr=In(YZ);var JZ=Sf();const um=In(JZ);var g5={exports:{}},Pn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v7;function ZZ(){if(v7)return Pn;v7=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function y(m){if(typeof m=="object"&&m!==null){var v=m.$$typeof;switch(v){case r:switch(m=m.type,m){case e:case a:case n:case c:case u:return m;default:switch(m=m&&m.$$typeof,m){case o:case s:case l:case h:case f:case i:return m;default:return v}}case t:return v}}}return Pn.ContextConsumer=s,Pn.ContextProvider=i,Pn.Element=r,Pn.ForwardRef=l,Pn.Fragment=e,Pn.Lazy=h,Pn.Memo=f,Pn.Portal=t,Pn.Profiler=a,Pn.StrictMode=n,Pn.Suspense=c,Pn.SuspenseList=u,Pn.isAsyncMode=function(){return!1},Pn.isConcurrentMode=function(){return!1},Pn.isContextConsumer=function(m){return y(m)===s},Pn.isContextProvider=function(m){return y(m)===i},Pn.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===r},Pn.isForwardRef=function(m){return y(m)===l},Pn.isFragment=function(m){return y(m)===e},Pn.isLazy=function(m){return y(m)===h},Pn.isMemo=function(m){return y(m)===f},Pn.isPortal=function(m){return y(m)===t},Pn.isProfiler=function(m){return y(m)===a},Pn.isStrictMode=function(m){return y(m)===n},Pn.isSuspense=function(m){return y(m)===c},Pn.isSuspenseList=function(m){return y(m)===u},Pn.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===e||m===a||m===n||m===c||m===u||m===p||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===f||m.$$typeof===i||m.$$typeof===s||m.$$typeof===l||m.$$typeof===g||m.getModuleId!==void 0)},Pn.typeOf=y,Pn}var b7;function QZ(){return b7||(b7=1,g5.exports=ZZ()),g5.exports}var eQ=QZ(),y5,x7;function NL(){if(x7)return y5;x7=1;var r=ad(),t=id(),e="[object Number]";function n(a){return typeof a=="number"||t(a)&&r(a)==e}return y5=n,y5}var v5,w7;function tQ(){if(w7)return v5;w7=1;var r=NL();function t(e){return r(e)&&e!=+e}return v5=t,v5}var rQ=tQ();const dm=In(rQ);var nQ=NL();const aQ=In(nQ);var ac=function(t){return t===0?0:t>0?1:-1},_h=function(t){return Mh(t)&&t.indexOf("%")===t.length-1},ir=function(t){return aQ(t)&&!dm(t)},iQ=function(t){return nn(t)},di=function(t){return ir(t)||Mh(t)},sQ=0,fm=function(t){var e=++sQ;return"".concat(t||"").concat(e)},Rh=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ir(t)&&!Mh(t))return n;var i;if(_h(t)){var s=t.indexOf("%");i=e*parseFloat(t.slice(0,s))/100}else i=+t;return dm(i)&&(i=n),a&&i>e&&(i=e),i},sf=function(t){if(!t)return null;var e=Object.keys(t);return e&&e.length?t[e[0]]:null},oQ=function(t){if(!Array.isArray(t))return!1;for(var e=t.length,n={},a=0;a<e;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Yi=function(t,e){return ir(t)&&ir(e)?function(n){return t+n*(e-t)}:function(){return e}};function Qv(r,t,e){return!r||!r.length?null:r.find(function(n){return n&&(typeof t=="function"?t(n):hl(n,t))===e})}var lQ=function(t,e){return ir(t)&&ir(e)?t-e:Mh(t)&&Mh(e)?t.localeCompare(e):t instanceof Date&&e instanceof Date?t.getTime()-e.getTime():String(t).localeCompare(String(e))};function lp(r,t){for(var e in r)if({}.hasOwnProperty.call(r,e)&&(!{}.hasOwnProperty.call(t,e)||r[e]!==t[e]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(r,n))return!1;return!0}function x6(r){"@babel/helpers - typeof";return x6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x6(r)}var cQ=["viewBox","children"],uQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_7=["points","pathLength"],b5={svg:cQ,polygon:_7,polyline:_7},MN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],eb=function(t,e){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(ie.isValidElement(t)&&(n=t.props),!um(n))return null;var a={};return Object.keys(n).forEach(function(i){MN.includes(i)&&(a[i]=e||function(s){return n[i](n,s)})}),a},dQ=function(t,e,n){return function(a){return t(e,n,a),null}},tb=function(t,e,n){if(!um(t)||x6(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];MN.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=dQ(s,e,n))}),a},fQ=["children"],hQ=["children"];function S7(r,t){if(r==null)return{};var e=pQ(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function pQ(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function w6(r){"@babel/helpers - typeof";return w6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w6(r)}var N7={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Lu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},j7=null,x5=null,RN=function r(t){if(t===j7&&Array.isArray(x5))return x5;var e=[];return ie.Children.forEach(t,function(n){nn(n)||(eQ.isFragment(n)?e=e.concat(r(n.props.children)):e.push(n))}),x5=e,j7=t,e};function pl(r,t){var e=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Lu(a)}):n=[Lu(t)],RN(r).forEach(function(a){var i=hl(a,"type.displayName")||hl(a,"type.name");n.indexOf(i)!==-1&&e.push(a)}),e}function Do(r,t){var e=pl(r,t);return e&&e[0]}var k7=function(t){if(!t||!t.props)return!1;var e=t.props,n=e.width,a=e.height;return!(!ir(n)||n<=0||!ir(a)||a<=0)},mQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],gQ=function(t){return t&&t.type&&Mh(t.type)&&mQ.indexOf(t.type)>=0},jL=function(t){return t&&w6(t)==="object"&&"clipDot"in t},yQ=function(t,e,n,a){var i,s=(i=b5==null?void 0:b5[a])!==null&&i!==void 0?i:[];return e.startsWith("data-")||!Qr(t)&&(a&&s.includes(e)||uQ.includes(e))||n&&MN.includes(e)},tn=function(t,e,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(ie.isValidElement(t)&&(a=t.props),!um(a))return null;var i={};return Object.keys(a).forEach(function(s){var o;yQ((o=a)===null||o===void 0?void 0:o[s],s,e,n)&&(i[s]=a[s])}),i},_6=function r(t,e){if(t===e)return!0;var n=ie.Children.count(t);if(n!==ie.Children.count(e))return!1;if(n===0)return!0;if(n===1)return E7(Array.isArray(t)?t[0]:t,Array.isArray(e)?e[0]:e);for(var a=0;a<n;a++){var i=t[a],s=e[a];if(Array.isArray(i)||Array.isArray(s)){if(!r(i,s))return!1}else if(!E7(i,s))return!1}return!0},E7=function(t,e){if(nn(t)&&nn(e))return!0;if(!nn(t)&&!nn(e)){var n=t.props||{},a=n.children,i=S7(n,fQ),s=e.props||{},o=s.children,l=S7(s,hQ);return a&&o?lp(i,l)&&_6(a,o):!a&&!o?lp(i,l):!1}return!1},A7=function(t,e){var n=[],a={};return RN(t).forEach(function(i,s){if(gQ(i))n.push(i);else if(i){var o=Lu(i.type),l=e[o]||{},c=l.handler,u=l.once;if(c&&(!u||!a[o])){var f=c(i,o,s);n.push(f),a[o]=!0}}}),n},vQ=function(t){var e=t&&t.type;return e&&N7[e]?N7[e]:null},bQ=function(t,e){return RN(e).indexOf(t)},xQ=["children","width","height","viewBox","className","style","title","desc"];function S6(){return S6=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},S6.apply(this,arguments)}function wQ(r,t){if(r==null)return{};var e=_Q(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function _Q(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function N6(r){var t=r.children,e=r.width,n=r.height,a=r.viewBox,i=r.className,s=r.style,o=r.title,l=r.desc,c=wQ(r,xQ),u=a||{width:e,height:n,x:0,y:0},f=dn("recharts-surface",i);return Je.createElement("svg",S6({},tn(c,!0,"svg"),{className:f,width:e,height:n,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Je.createElement("title",null,o),Je.createElement("desc",null,l),t)}var SQ=["children","className"];function j6(){return j6=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},j6.apply(this,arguments)}function NQ(r,t){if(r==null)return{};var e=jQ(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function jQ(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}var ta=Je.forwardRef(function(r,t){var e=r.children,n=r.className,a=NQ(r,SQ),i=dn("recharts-layer",n);return Je.createElement("g",j6({className:i},tn(a,!0),{ref:t}),e)}),Bu=function(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},w5,T7;function kQ(){if(T7)return w5;T7=1;function r(t,e,n){var a=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++a<i;)s[a]=t[a+e];return s}return w5=r,w5}var _5,C7;function EQ(){if(C7)return _5;C7=1;var r=kQ();function t(e,n,a){var i=e.length;return a=a===void 0?i:a,!n&&a>=i?e:r(e,n,a)}return _5=t,_5}var S5,P7;function kL(){if(P7)return S5;P7=1;var r="\\ud800-\\udfff",t="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=t+e+n,i="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+r+a+i+"]");function l(c){return o.test(c)}return S5=l,S5}var N5,O7;function AQ(){if(O7)return N5;O7=1;function r(t){return t.split("")}return N5=r,N5}var j5,I7;function TQ(){if(I7)return j5;I7=1;var r="\\ud800-\\udfff",t="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=t+e+n,i="\\ufe0e\\ufe0f",s="["+r+"]",o="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",u="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=c+"?",y="["+i+"]?",m="(?:"+p+"(?:"+[u,f,h].join("|")+")"+y+g+")*",v=y+g+m,b="(?:"+[u+o+"?",o,f,h,s].join("|")+")",x=RegExp(l+"(?="+l+")|"+b+v,"g");function S(_){return _.match(x)||[]}return j5=S,j5}var k5,M7;function CQ(){if(M7)return k5;M7=1;var r=AQ(),t=kL(),e=TQ();function n(a){return t(a)?e(a):r(a)}return k5=n,k5}var E5,R7;function PQ(){if(R7)return E5;R7=1;var r=EQ(),t=kL(),e=CQ(),n=wL();function a(i){return function(s){s=n(s);var o=t(s)?e(s):void 0,l=o?o[0]:s.charAt(0),c=o?r(o,1).join(""):s.slice(1);return l[i]()+c}}return E5=a,E5}var A5,F7;function OQ(){if(F7)return A5;F7=1;var r=PQ(),t=r("toUpperCase");return A5=t,A5}var IQ=OQ();const Ux=In(IQ);function ea(r){return function(){return r}}const EL=Math.cos,rb=Math.sin,cc=Math.sqrt,nb=Math.PI,qx=2*nb,k6=Math.PI,E6=2*k6,fh=1e-6,MQ=E6-fh;function AL(r){this._+=r[0];for(let t=1,e=r.length;t<e;++t)this._+=arguments[t]+r[t]}function RQ(r){let t=Math.floor(r);if(!(t>=0))throw new Error(`invalid digits: ${r}`);if(t>15)return AL;const e=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*e)/e+n[a]}}class FQ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?AL:RQ(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,a){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,e,n,a,i,s){this._append`C${+t},${+e},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,e,n,a,i){if(t=+t,e=+e,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,l=n-t,c=a-e,u=s-t,f=o-e,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(h>fh)if(!(Math.abs(f*l-c*u)>fh)||!i)this._append`L${this._x1=t},${this._y1=e}`;else{let p=n-s,g=a-o,y=l*l+c*c,m=p*p+g*g,v=Math.sqrt(y),b=Math.sqrt(h),x=i*Math.tan((k6-Math.acos((y+h-m)/(2*v*b)))/2),S=x/b,_=x/v;Math.abs(S-1)>fh&&this._append`L${t+S*u},${e+S*f}`,this._append`A${i},${i},0,0,${+(f*p>u*g)},${this._x1=t+_*l},${this._y1=e+_*c}`}}arc(t,e,n,a,i,s){if(t=+t,e=+e,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),l=n*Math.sin(a),c=t+o,u=e+l,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>fh||Math.abs(this._y1-u)>fh)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%E6+E6),h>MQ?this._append`A${n},${n},0,1,${f},${t-o},${e-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=u}`:h>fh&&this._append`A${n},${n},0,${+(h>=k6)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function FN(r){let t=3;return r.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);t=n}return r},()=>new FQ(t)}function DN(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function TL(r){this._context=r}TL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;default:this._context.lineTo(r,t);break}}};function zx(r){return new TL(r)}function CL(r){return r[0]}function PL(r){return r[1]}function OL(r,t){var e=ea(!0),n=null,a=zx,i=null,s=FN(o);r=typeof r=="function"?r:r===void 0?CL:ea(r),t=typeof t=="function"?t:t===void 0?PL:ea(t);function o(l){var c,u=(l=DN(l)).length,f,h=!1,p;for(n==null&&(i=a(p=s())),c=0;c<=u;++c)!(c<u&&e(f=l[c],c,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+r(f,c,l),+t(f,c,l));if(p)return i=null,p+""||null}return o.x=function(l){return arguments.length?(r=typeof l=="function"?l:ea(+l),o):r},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:ea(+l),o):t},o.defined=function(l){return arguments.length?(e=typeof l=="function"?l:ea(!!l),o):e},o.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),o):a},o.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),o):n},o}function Y1(r,t,e){var n=null,a=ea(!0),i=null,s=zx,o=null,l=FN(c);r=typeof r=="function"?r:r===void 0?CL:ea(+r),t=typeof t=="function"?t:ea(t===void 0?0:+t),e=typeof e=="function"?e:e===void 0?PL:ea(+e);function c(f){var h,p,g,y=(f=DN(f)).length,m,v=!1,b,x=new Array(y),S=new Array(y);for(i==null&&(o=s(b=l())),h=0;h<=y;++h){if(!(h<y&&a(m=f[h],h,f))===v)if(v=!v)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(x[g],S[g]);o.lineEnd(),o.areaEnd()}v&&(x[h]=+r(m,h,f),S[h]=+t(m,h,f),o.point(n?+n(m,h,f):x[h],e?+e(m,h,f):S[h]))}if(b)return o=null,b+""||null}function u(){return OL().defined(a).curve(s).context(i)}return c.x=function(f){return arguments.length?(r=typeof f=="function"?f:ea(+f),n=null,c):r},c.x0=function(f){return arguments.length?(r=typeof f=="function"?f:ea(+f),c):r},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ea(+f),c):n},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ea(+f),e=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ea(+f),c):t},c.y1=function(f){return arguments.length?(e=f==null?null:typeof f=="function"?f:ea(+f),c):e},c.lineX0=c.lineY0=function(){return u().x(r).y(t)},c.lineY1=function(){return u().x(r).y(e)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ea(!!f),c):a},c.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),c):s},c.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),c):i},c}class IL{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e);break}}this._x0=t,this._y0=e}}function DQ(r){return new IL(r,!0)}function LQ(r){return new IL(r,!1)}const LN={draw(r,t){const e=cc(t/nb);r.moveTo(e,0),r.arc(0,0,e,0,qx)}},BQ={draw(r,t){const e=cc(t/5)/2;r.moveTo(-3*e,-e),r.lineTo(-e,-e),r.lineTo(-e,-3*e),r.lineTo(e,-3*e),r.lineTo(e,-e),r.lineTo(3*e,-e),r.lineTo(3*e,e),r.lineTo(e,e),r.lineTo(e,3*e),r.lineTo(-e,3*e),r.lineTo(-e,e),r.lineTo(-3*e,e),r.closePath()}},ML=cc(1/3),$Q=ML*2,UQ={draw(r,t){const e=cc(t/$Q),n=e*ML;r.moveTo(0,-e),r.lineTo(n,0),r.lineTo(0,e),r.lineTo(-n,0),r.closePath()}},qQ={draw(r,t){const e=cc(t),n=-e/2;r.rect(n,n,e,e)}},zQ=.8908130915292852,RL=rb(nb/10)/rb(7*nb/10),WQ=rb(qx/10)*RL,HQ=-EL(qx/10)*RL,VQ={draw(r,t){const e=cc(t*zQ),n=WQ*e,a=HQ*e;r.moveTo(0,-e),r.lineTo(n,a);for(let i=1;i<5;++i){const s=qx*i/5,o=EL(s),l=rb(s);r.lineTo(l*e,-o*e),r.lineTo(o*n-l*a,l*n+o*a)}r.closePath()}},T5=cc(3),GQ={draw(r,t){const e=-cc(t/(T5*3));r.moveTo(0,e*2),r.lineTo(-T5*e,-e),r.lineTo(T5*e,-e),r.closePath()}},al=-.5,il=cc(3)/2,A6=1/cc(12),KQ=(A6/2+1)*3,XQ={draw(r,t){const e=cc(t/KQ),n=e/2,a=e*A6,i=n,s=e*A6+e,o=-i,l=s;r.moveTo(n,a),r.lineTo(i,s),r.lineTo(o,l),r.lineTo(al*n-il*a,il*n+al*a),r.lineTo(al*i-il*s,il*i+al*s),r.lineTo(al*o-il*l,il*o+al*l),r.lineTo(al*n+il*a,al*a-il*n),r.lineTo(al*i+il*s,al*s-il*i),r.lineTo(al*o+il*l,al*l-il*o),r.closePath()}};function YQ(r,t){let e=null,n=FN(a);r=typeof r=="function"?r:ea(r||LN),t=typeof t=="function"?t:ea(t===void 0?64:+t);function a(){let i;if(e||(e=i=n()),r.apply(this,arguments).draw(e,+t.apply(this,arguments)),i)return e=null,i+""||null}return a.type=function(i){return arguments.length?(r=typeof i=="function"?i:ea(i),a):r},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ea(+i),a):t},a.context=function(i){return arguments.length?(e=i??null,a):e},a}function ab(){}function ib(r,t,e){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+t)/6,(r._y0+4*r._y1+e)/6)}function FL(r){this._context=r}FL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ib(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ib(this,r,t);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t}};function JQ(r){return new FL(r)}function DL(r){this._context=r}DL.prototype={areaStart:ab,areaEnd:ab,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._x2=r,this._y2=t;break;case 1:this._point=2,this._x3=r,this._y3=t;break;case 2:this._point=3,this._x4=r,this._y4=t,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+t)/6);break;default:ib(this,r,t);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t}};function ZQ(r){return new DL(r)}function LL(r){this._context=r}LL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+r)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 3:this._point=4;default:ib(this,r,t);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t}};function QQ(r){return new LL(r)}function BL(r){this._context=r}BL.prototype={areaStart:ab,areaEnd:ab,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,t){r=+r,t=+t,this._point?this._context.lineTo(r,t):(this._point=1,this._context.moveTo(r,t))}};function eee(r){return new BL(r)}function D7(r){return r<0?-1:1}function L7(r,t,e){var n=r._x1-r._x0,a=t-r._x1,i=(r._y1-r._y0)/(n||a<0&&-0),s=(e-r._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(D7(i)+D7(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function B7(r,t){var e=r._x1-r._x0;return e?(3*(r._y1-r._y0)/e-t)/2:t}function C5(r,t,e){var n=r._x0,a=r._y0,i=r._x1,s=r._y1,o=(i-n)/3;r._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*e,i,s)}function sb(r){this._context=r}sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:C5(this,this._t0,B7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,t){var e=NaN;if(r=+r,t=+t,!(r===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;break;case 2:this._point=3,C5(this,B7(this,e=L7(this,r,t)),e);break;default:C5(this,this._t0,e=L7(this,r,t));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=t,this._t0=e}}};function $L(r){this._context=new UL(r)}($L.prototype=Object.create(sb.prototype)).point=function(r,t){sb.prototype.point.call(this,t,r)};function UL(r){this._context=r}UL.prototype={moveTo:function(r,t){this._context.moveTo(t,r)},closePath:function(){this._context.closePath()},lineTo:function(r,t){this._context.lineTo(t,r)},bezierCurveTo:function(r,t,e,n,a,i){this._context.bezierCurveTo(t,r,n,e,i,a)}};function tee(r){return new sb(r)}function ree(r){return new $L(r)}function qL(r){this._context=r}qL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,t=this._y,e=r.length;if(e)if(this._line?this._context.lineTo(r[0],t[0]):this._context.moveTo(r[0],t[0]),e===2)this._context.lineTo(r[1],t[1]);else for(var n=$7(r),a=$7(t),i=0,s=1;s<e;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],r[s],t[s]);(this._line||this._line!==0&&e===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,t){this._x.push(+r),this._y.push(+t)}};function $7(r){var t,e=r.length-1,n,a=new Array(e),i=new Array(e),s=new Array(e);for(a[0]=0,i[0]=2,s[0]=r[0]+2*r[1],t=1;t<e-1;++t)a[t]=1,i[t]=4,s[t]=4*r[t]+2*r[t+1];for(a[e-1]=2,i[e-1]=7,s[e-1]=8*r[e-1]+r[e],t=1;t<e;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[e-1]=s[e-1]/i[e-1],t=e-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[e-1]=(r[e]+a[e-1])/2,t=0;t<e-1;++t)i[t]=2*r[t+1]-a[t+1];return[a,i]}function nee(r){return new qL(r)}function Wx(r,t){this._context=r,this._t=t}Wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,t){switch(r=+r,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,t):this._context.moveTo(r,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(r,t);else{var e=this._x*(1-this._t)+r*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,t)}break}}this._x=r,this._y=t}};function aee(r){return new Wx(r,.5)}function iee(r){return new Wx(r,0)}function see(r){return new Wx(r,1)}function Op(r,t){if((s=r.length)>1)for(var e=1,n,a,i=r[t[0]],s,o=i.length;e<s;++e)for(a=i,i=r[t[e]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function T6(r){for(var t=r.length,e=new Array(t);--t>=0;)e[t]=t;return e}function oee(r,t){return r[t]}function lee(r){const t=[];return t.key=r,t}function cee(){var r=ea([]),t=T6,e=Op,n=oee;function a(i){var s=Array.from(r.apply(this,arguments),lee),o,l=s.length,c=-1,u;for(const f of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(f,s[o].key,c,i)]).data=f;for(o=0,u=DN(t(s));o<l;++o)s[u[o]].index=o;return e(s,u),s}return a.keys=function(i){return arguments.length?(r=typeof i=="function"?i:ea(Array.from(i)),a):r},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ea(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?T6:typeof i=="function"?i:ea(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(e=i??Op,a):e},a}function uee(r,t){if((n=r.length)>0){for(var e,n,a=0,i=r[0].length,s;a<i;++a){for(s=e=0;e<n;++e)s+=r[e][a][1]||0;if(s)for(e=0;e<n;++e)r[e][a][1]/=s}Op(r,t)}}function dee(r,t){if((a=r.length)>0){for(var e=0,n=r[t[0]],a,i=n.length;e<i;++e){for(var s=0,o=0;s<a;++s)o+=r[s][e][1]||0;n[e][1]+=n[e][0]=-o/2}Op(r,t)}}function fee(r,t){if(!(!((s=r.length)>0)||!((i=(a=r[t[0]]).length)>0))){for(var e=0,n=1,a,i,s;n<i;++n){for(var o=0,l=0,c=0;o<s;++o){for(var u=r[t[o]],f=u[n][1]||0,h=u[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var y=r[t[g]],m=y[n][1]||0,v=y[n-1][1]||0;p+=m-v}l+=f,c+=p*f}a[n-1][1]+=a[n-1][0]=e,l&&(e-=c/l)}a[n-1][1]+=a[n-1][0]=e,Op(r,t)}}function Hg(r){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(r)}var hee=["type","size","sizeType"];function C6(){return C6=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},C6.apply(this,arguments)}function U7(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function q7(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?U7(Object(e),!0).forEach(function(n){pee(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):U7(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function pee(r,t,e){return t=mee(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function mee(r){var t=gee(r,"string");return Hg(t)=="symbol"?t:t+""}function gee(r,t){if(Hg(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function yee(r,t){if(r==null)return{};var e=vee(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function vee(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}var zL={symbolCircle:LN,symbolCross:BQ,symbolDiamond:UQ,symbolSquare:qQ,symbolStar:VQ,symbolTriangle:GQ,symbolWye:XQ},bee=Math.PI/180,xee=function(t){var e="symbol".concat(Ux(t));return zL[e]||LN},wee=function(t,e,n){if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*bee;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},_ee=function(t,e){zL["symbol".concat(Ux(t))]=e},BN=function(t){var e=t.type,n=e===void 0?"circle":e,a=t.size,i=a===void 0?64:a,s=t.sizeType,o=s===void 0?"area":s,l=yee(t,hee),c=q7(q7({},l),{},{type:n,size:i,sizeType:o}),u=function(){var m=xee(n),v=YQ().type(m).size(wee(i,o,n));return v()},f=c.className,h=c.cx,p=c.cy,g=tn(c,!0);return h===+h&&p===+p&&i===+i?Je.createElement("path",C6({},g,{className:dn("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};BN.registerSymbol=_ee;function Ip(r){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(r)}function P6(){return P6=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},P6.apply(this,arguments)}function z7(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function See(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?z7(Object(e),!0).forEach(function(n){Vg(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):z7(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Nee(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function jee(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,HL(n.key),n)}}function kee(r,t,e){return t&&jee(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Eee(r,t,e){return t=ob(t),Aee(r,WL()?Reflect.construct(t,e||[],ob(r).constructor):t.apply(r,e))}function Aee(r,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tee(r)}function Tee(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function WL(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WL=function(){return!!r})()}function ob(r){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ob(r)}function Cee(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&O6(r,t)}function O6(r,t){return O6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},O6(r,t)}function Vg(r,t,e){return t=HL(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function HL(r){var t=Pee(r,"string");return Ip(t)=="symbol"?t:t+""}function Pee(r,t){if(Ip(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var sl=32,$N=(function(r){function t(){return Nee(this,t),Eee(this,t,arguments)}return Cee(t,r),kee(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=sl/2,s=sl/6,o=sl/3,l=n.inactive?a:n.color;if(n.type==="plainline")return Je.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:sl,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return Je.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(sl,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return Je.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(sl/8,"h").concat(sl,"v").concat(sl*3/4,"h").concat(-sl,"z"),className:"recharts-legend-icon"});if(Je.isValidElement(n.legendIcon)){var c=See({},n);return delete c.legendIcon,Je.cloneElement(n.legendIcon,c)}return Je.createElement(BN,{fill:l,cx:i,cy:i,size:sl,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,o=a.layout,l=a.formatter,c=a.inactiveColor,u={x:0,y:0,width:sl,height:sl},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,g){var y=p.formatter||l,m=dn(Vg(Vg({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=Qr(p.value)?null:p.value;Bu(!Qr(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=p.inactive?c:p.color;return Je.createElement("li",P6({className:m,style:f,key:"legend-item-".concat(g)},tb(n.props,p,g)),Je.createElement(N6,{width:s,height:s,viewBox:u,style:h},n.renderIcon(p)),Je.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(v,p,g):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return Je.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(ie.PureComponent);Vg($N,"displayName","Legend");Vg($N,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var P5,W7;function Oee(){if(W7)return P5;W7=1;var r=Lx();function t(){this.__data__=new r,this.size=0}return P5=t,P5}var O5,H7;function Iee(){if(H7)return O5;H7=1;function r(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}return O5=r,O5}var I5,V7;function Mee(){if(V7)return I5;V7=1;function r(t){return this.__data__.get(t)}return I5=r,I5}var M5,G7;function Ree(){if(G7)return M5;G7=1;function r(t){return this.__data__.has(t)}return M5=r,M5}var R5,K7;function Fee(){if(K7)return R5;K7=1;var r=Lx(),t=CN(),e=PN(),n=200;function a(i,s){var o=this.__data__;if(o instanceof r){var l=o.__data__;if(!t||l.length<n-1)return l.push([i,s]),this.size=++o.size,this;o=this.__data__=new e(l)}return o.set(i,s),this.size=o.size,this}return R5=a,R5}var F5,X7;function VL(){if(X7)return F5;X7=1;var r=Lx(),t=Oee(),e=Iee(),n=Mee(),a=Ree(),i=Fee();function s(o){var l=this.__data__=new r(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,F5=s,F5}var D5,Y7;function Dee(){if(Y7)return D5;Y7=1;var r="__lodash_hash_undefined__";function t(e){return this.__data__.set(e,r),this}return D5=t,D5}var L5,J7;function Lee(){if(J7)return L5;J7=1;function r(t){return this.__data__.has(t)}return L5=r,L5}var B5,Z7;function GL(){if(Z7)return B5;Z7=1;var r=PN(),t=Dee(),e=Lee();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new r;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=e,B5=n,B5}var $5,Q7;function KL(){if(Q7)return $5;Q7=1;function r(t,e){for(var n=-1,a=t==null?0:t.length;++n<a;)if(e(t[n],n,t))return!0;return!1}return $5=r,$5}var U5,eC;function XL(){if(eC)return U5;eC=1;function r(t,e){return t.has(e)}return U5=r,U5}var q5,tC;function YL(){if(tC)return q5;tC=1;var r=GL(),t=KL(),e=XL(),n=1,a=2;function i(s,o,l,c,u,f){var h=l&n,p=s.length,g=o.length;if(p!=g&&!(h&&g>p))return!1;var y=f.get(s),m=f.get(o);if(y&&m)return y==o&&m==s;var v=-1,b=!0,x=l&a?new r:void 0;for(f.set(s,o),f.set(o,s);++v<p;){var S=s[v],_=o[v];if(c)var I=h?c(_,S,v,o,s,f):c(S,_,v,s,o,f);if(I!==void 0){if(I)continue;b=!1;break}if(x){if(!t(o,function(A,O){if(!e(x,O)&&(S===A||u(S,A,l,c,f)))return x.push(O)})){b=!1;break}}else if(!(S===_||u(S,_,l,c,f))){b=!1;break}}return f.delete(s),f.delete(o),b}return q5=i,q5}var z5,rC;function Bee(){if(rC)return z5;rC=1;var r=Qc(),t=r.Uint8Array;return z5=t,z5}var W5,nC;function $ee(){if(nC)return W5;nC=1;function r(t){var e=-1,n=Array(t.size);return t.forEach(function(a,i){n[++e]=[i,a]}),n}return W5=r,W5}var H5,aC;function UN(){if(aC)return H5;aC=1;function r(t){var e=-1,n=Array(t.size);return t.forEach(function(a){n[++e]=a}),n}return H5=r,H5}var V5,iC;function Uee(){if(iC)return V5;iC=1;var r=$y(),t=Bee(),e=TN(),n=YL(),a=$ee(),i=UN(),s=1,o=2,l="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",g="[object Set]",y="[object String]",m="[object Symbol]",v="[object ArrayBuffer]",b="[object DataView]",x=r?r.prototype:void 0,S=x?x.valueOf:void 0;function _(I,A,O,M,z,U,D){switch(O){case b:if(I.byteLength!=A.byteLength||I.byteOffset!=A.byteOffset)return!1;I=I.buffer,A=A.buffer;case v:return!(I.byteLength!=A.byteLength||!U(new t(I),new t(A)));case l:case c:case h:return e(+I,+A);case u:return I.name==A.name&&I.message==A.message;case p:case y:return I==A+"";case f:var T=a;case g:var R=M&s;if(T||(T=i),I.size!=A.size&&!R)return!1;var C=D.get(I);if(C)return C==A;M|=o,D.set(I,A);var N=n(T(I),T(A),M,z,U,D);return D.delete(I),N;case m:if(S)return S.call(I)==S.call(A)}return!1}return V5=_,V5}var G5,sC;function JL(){if(sC)return G5;sC=1;function r(t,e){for(var n=-1,a=e.length,i=t.length;++n<a;)t[i+n]=e[n];return t}return G5=r,G5}var K5,oC;function qee(){if(oC)return K5;oC=1;var r=JL(),t=xo();function e(n,a,i){var s=a(n);return t(n)?s:r(s,i(n))}return K5=e,K5}var X5,lC;function zee(){if(lC)return X5;lC=1;function r(t,e){for(var n=-1,a=t==null?0:t.length,i=0,s=[];++n<a;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}return X5=r,X5}var Y5,cC;function Wee(){if(cC)return Y5;cC=1;function r(){return[]}return Y5=r,Y5}var J5,uC;function Hee(){if(uC)return J5;uC=1;var r=zee(),t=Wee(),e=Object.prototype,n=e.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),r(a(s),function(o){return n.call(s,o)}))}:t;return J5=i,J5}var Z5,dC;function Vee(){if(dC)return Z5;dC=1;function r(t,e){for(var n=-1,a=Array(t);++n<t;)a[n]=e(n);return a}return Z5=r,Z5}var Q5,fC;function Gee(){if(fC)return Q5;fC=1;var r=ad(),t=id(),e="[object Arguments]";function n(a){return t(a)&&r(a)==e}return Q5=n,Q5}var e4,hC;function qN(){if(hC)return e4;hC=1;var r=Gee(),t=id(),e=Object.prototype,n=e.hasOwnProperty,a=e.propertyIsEnumerable,i=r((function(){return arguments})())?r:function(s){return t(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return e4=i,e4}var hg={exports:{}},t4,pC;function Kee(){if(pC)return t4;pC=1;function r(){return!1}return t4=r,t4}hg.exports;var mC;function ZL(){return mC||(mC=1,(function(r,t){var e=Qc(),n=Kee(),a=t&&!t.nodeType&&t,i=a&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===a,o=s?e.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;r.exports=c})(hg,hg.exports)),hg.exports}var r4,gC;function zN(){if(gC)return r4;gC=1;var r=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function e(n,a){var i=typeof n;return a=a??r,!!a&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<a}return r4=e,r4}var n4,yC;function WN(){if(yC)return n4;yC=1;var r=9007199254740991;function t(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}return n4=t,n4}var a4,vC;function Xee(){if(vC)return a4;vC=1;var r=ad(),t=WN(),e=id(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",g="[object String]",y="[object WeakMap]",m="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",M="[object Uint16Array]",z="[object Uint32Array]",U={};U[b]=U[x]=U[S]=U[_]=U[I]=U[A]=U[O]=U[M]=U[z]=!0,U[n]=U[a]=U[m]=U[i]=U[v]=U[s]=U[o]=U[l]=U[c]=U[u]=U[f]=U[h]=U[p]=U[g]=U[y]=!1;function D(T){return e(T)&&t(T.length)&&!!U[r(T)]}return a4=D,a4}var i4,bC;function QL(){if(bC)return i4;bC=1;function r(t){return function(e){return t(e)}}return i4=r,i4}var pg={exports:{}};pg.exports;var xC;function Yee(){return xC||(xC=1,(function(r,t){var e=vL(),n=t&&!t.nodeType&&t,a=n&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===n,s=i&&e.process,o=(function(){try{var l=a&&a.require&&a.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();r.exports=o})(pg,pg.exports)),pg.exports}var s4,wC;function eB(){if(wC)return s4;wC=1;var r=Xee(),t=QL(),e=Yee(),n=e&&e.isTypedArray,a=n?t(n):r;return s4=a,s4}var o4,_C;function Jee(){if(_C)return o4;_C=1;var r=Vee(),t=qN(),e=xo(),n=ZL(),a=zN(),i=eB(),s=Object.prototype,o=s.hasOwnProperty;function l(c,u){var f=e(c),h=!f&&t(c),p=!f&&!h&&n(c),g=!f&&!h&&!p&&i(c),y=f||h||p||g,m=y?r(c.length,String):[],v=m.length;for(var b in c)(u||o.call(c,b))&&!(y&&(b=="length"||p&&(b=="offset"||b=="parent")||g&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||a(b,v)))&&m.push(b);return m}return o4=l,o4}var l4,SC;function Zee(){if(SC)return l4;SC=1;var r=Object.prototype;function t(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||r;return e===a}return l4=t,l4}var c4,NC;function tB(){if(NC)return c4;NC=1;function r(t,e){return function(n){return t(e(n))}}return c4=r,c4}var u4,jC;function Qee(){if(jC)return u4;jC=1;var r=tB(),t=r(Object.keys,Object);return u4=t,u4}var d4,kC;function ete(){if(kC)return d4;kC=1;var r=Zee(),t=Qee(),e=Object.prototype,n=e.hasOwnProperty;function a(i){if(!r(i))return t(i);var s=[];for(var o in Object(i))n.call(i,o)&&o!="constructor"&&s.push(o);return s}return d4=a,d4}var f4,EC;function Uy(){if(EC)return f4;EC=1;var r=AN(),t=WN();function e(n){return n!=null&&t(n.length)&&!r(n)}return f4=e,f4}var h4,AC;function Hx(){if(AC)return h4;AC=1;var r=Jee(),t=ete(),e=Uy();function n(a){return e(a)?r(a):t(a)}return h4=n,h4}var p4,TC;function tte(){if(TC)return p4;TC=1;var r=qee(),t=Hee(),e=Hx();function n(a){return r(a,e,t)}return p4=n,p4}var m4,CC;function rte(){if(CC)return m4;CC=1;var r=tte(),t=1,e=Object.prototype,n=e.hasOwnProperty;function a(i,s,o,l,c,u){var f=o&t,h=r(i),p=h.length,g=r(s),y=g.length;if(p!=y&&!f)return!1;for(var m=p;m--;){var v=h[m];if(!(f?v in s:n.call(s,v)))return!1}var b=u.get(i),x=u.get(s);if(b&&x)return b==s&&x==i;var S=!0;u.set(i,s),u.set(s,i);for(var _=f;++m<p;){v=h[m];var I=i[v],A=s[v];if(l)var O=f?l(A,I,v,s,i,u):l(I,A,v,i,s,u);if(!(O===void 0?I===A||c(I,A,o,l,u):O)){S=!1;break}_||(_=v=="constructor")}if(S&&!_){var M=i.constructor,z=s.constructor;M!=z&&"constructor"in i&&"constructor"in s&&!(typeof M=="function"&&M instanceof M&&typeof z=="function"&&z instanceof z)&&(S=!1)}return u.delete(i),u.delete(s),S}return m4=a,m4}var g4,PC;function nte(){if(PC)return g4;PC=1;var r=Kh(),t=Qc(),e=r(t,"DataView");return g4=e,g4}var y4,OC;function ate(){if(OC)return y4;OC=1;var r=Kh(),t=Qc(),e=r(t,"Promise");return y4=e,y4}var v4,IC;function rB(){if(IC)return v4;IC=1;var r=Kh(),t=Qc(),e=r(t,"Set");return v4=e,v4}var b4,MC;function ite(){if(MC)return b4;MC=1;var r=Kh(),t=Qc(),e=r(t,"WeakMap");return b4=e,b4}var x4,RC;function ste(){if(RC)return x4;RC=1;var r=nte(),t=CN(),e=ate(),n=rB(),a=ite(),i=ad(),s=bL(),o="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",f="[object WeakMap]",h="[object DataView]",p=s(r),g=s(t),y=s(e),m=s(n),v=s(a),b=i;return(r&&b(new r(new ArrayBuffer(1)))!=h||t&&b(new t)!=o||e&&b(e.resolve())!=c||n&&b(new n)!=u||a&&b(new a)!=f)&&(b=function(x){var S=i(x),_=S==l?x.constructor:void 0,I=_?s(_):"";if(I)switch(I){case p:return h;case g:return o;case y:return c;case m:return u;case v:return f}return S}),x4=b,x4}var w4,FC;function ote(){if(FC)return w4;FC=1;var r=VL(),t=YL(),e=Uee(),n=rte(),a=ste(),i=xo(),s=ZL(),o=eB(),l=1,c="[object Arguments]",u="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function g(y,m,v,b,x,S){var _=i(y),I=i(m),A=_?u:a(y),O=I?u:a(m);A=A==c?f:A,O=O==c?f:O;var M=A==f,z=O==f,U=A==O;if(U&&s(y)){if(!s(m))return!1;_=!0,M=!1}if(U&&!M)return S||(S=new r),_||o(y)?t(y,m,v,b,x,S):e(y,m,A,v,b,x,S);if(!(v&l)){var D=M&&p.call(y,"__wrapped__"),T=z&&p.call(m,"__wrapped__");if(D||T){var R=D?y.value():y,C=T?m.value():m;return S||(S=new r),x(R,C,v,b,S)}}return U?(S||(S=new r),n(y,m,v,b,x,S)):!1}return w4=g,w4}var _4,DC;function HN(){if(DC)return _4;DC=1;var r=ote(),t=id();function e(n,a,i,s,o){return n===a?!0:n==null||a==null||!t(n)&&!t(a)?n!==n&&a!==a:r(n,a,i,s,e,o)}return _4=e,_4}var S4,LC;function lte(){if(LC)return S4;LC=1;var r=VL(),t=HN(),e=1,n=2;function a(i,s,o,l){var c=o.length,u=c,f=!l;if(i==null)return!u;for(i=Object(i);c--;){var h=o[c];if(f&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++c<u;){h=o[c];var p=h[0],g=i[p],y=h[1];if(f&&h[2]){if(g===void 0&&!(p in i))return!1}else{var m=new r;if(l)var v=l(g,y,p,i,s,m);if(!(v===void 0?t(y,g,e|n,l,m):v))return!1}}return!0}return S4=a,S4}var N4,BC;function nB(){if(BC)return N4;BC=1;var r=Sf();function t(e){return e===e&&!r(e)}return N4=t,N4}var j4,$C;function cte(){if($C)return j4;$C=1;var r=nB(),t=Hx();function e(n){for(var a=t(n),i=a.length;i--;){var s=a[i],o=n[s];a[i]=[s,o,r(o)]}return a}return j4=e,j4}var k4,UC;function aB(){if(UC)return k4;UC=1;function r(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}return k4=r,k4}var E4,qC;function ute(){if(qC)return E4;qC=1;var r=lte(),t=cte(),e=aB();function n(a){var i=t(a);return i.length==1&&i[0][2]?e(i[0][0],i[0][1]):function(s){return s===a||r(s,a,i)}}return E4=n,E4}var A4,zC;function dte(){if(zC)return A4;zC=1;function r(t,e){return t!=null&&e in Object(t)}return A4=r,A4}var T4,WC;function fte(){if(WC)return T4;WC=1;var r=_L(),t=qN(),e=xo(),n=zN(),a=WN(),i=$x();function s(o,l,c){l=r(l,o);for(var u=-1,f=l.length,h=!1;++u<f;){var p=i(l[u]);if(!(h=o!=null&&c(o,p)))break;o=o[p]}return h||++u!=f?h:(f=o==null?0:o.length,!!f&&a(f)&&n(p,f)&&(e(o)||t(o)))}return T4=s,T4}var C4,HC;function hte(){if(HC)return C4;HC=1;var r=dte(),t=fte();function e(n,a){return n!=null&&t(n,a,r)}return C4=e,C4}var P4,VC;function pte(){if(VC)return P4;VC=1;var r=HN(),t=SL(),e=hte(),n=EN(),a=nB(),i=aB(),s=$x(),o=1,l=2;function c(u,f){return n(u)&&a(f)?i(s(u),f):function(h){var p=t(h,u);return p===void 0&&p===f?e(h,u):r(f,p,o|l)}}return P4=c,P4}var O4,GC;function hm(){if(GC)return O4;GC=1;function r(t){return t}return O4=r,O4}var I4,KC;function mte(){if(KC)return I4;KC=1;function r(t){return function(e){return e==null?void 0:e[t]}}return I4=r,I4}var M4,XC;function gte(){if(XC)return M4;XC=1;var r=IN();function t(e){return function(n){return r(n,e)}}return M4=t,M4}var R4,YC;function yte(){if(YC)return R4;YC=1;var r=mte(),t=gte(),e=EN(),n=$x();function a(i){return e(i)?r(n(i)):t(i)}return R4=a,R4}var F4,JC;function Nf(){if(JC)return F4;JC=1;var r=ute(),t=pte(),e=hm(),n=xo(),a=yte();function i(s){return typeof s=="function"?s:s==null?e:typeof s=="object"?n(s)?t(s[0],s[1]):r(s):a(s)}return F4=i,F4}var D4,ZC;function iB(){if(ZC)return D4;ZC=1;function r(t,e,n,a){for(var i=t.length,s=n+(a?1:-1);a?s--:++s<i;)if(e(t[s],s,t))return s;return-1}return D4=r,D4}var L4,QC;function vte(){if(QC)return L4;QC=1;function r(t){return t!==t}return L4=r,L4}var B4,eP;function bte(){if(eP)return B4;eP=1;function r(t,e,n){for(var a=n-1,i=t.length;++a<i;)if(t[a]===e)return a;return-1}return B4=r,B4}var $4,tP;function xte(){if(tP)return $4;tP=1;var r=iB(),t=vte(),e=bte();function n(a,i,s){return i===i?e(a,i,s):r(a,t,s)}return $4=n,$4}var U4,rP;function wte(){if(rP)return U4;rP=1;var r=xte();function t(e,n){var a=e==null?0:e.length;return!!a&&r(e,n,0)>-1}return U4=t,U4}var q4,nP;function _te(){if(nP)return q4;nP=1;function r(t,e,n){for(var a=-1,i=t==null?0:t.length;++a<i;)if(n(e,t[a]))return!0;return!1}return q4=r,q4}var z4,aP;function Ste(){if(aP)return z4;aP=1;function r(){}return z4=r,z4}var W4,iP;function Nte(){if(iP)return W4;iP=1;var r=rB(),t=Ste(),e=UN(),n=1/0,a=r&&1/e(new r([,-0]))[1]==n?function(i){return new r(i)}:t;return W4=a,W4}var H4,sP;function jte(){if(sP)return H4;sP=1;var r=GL(),t=wte(),e=_te(),n=XL(),a=Nte(),i=UN(),s=200;function o(l,c,u){var f=-1,h=t,p=l.length,g=!0,y=[],m=y;if(u)g=!1,h=e;else if(p>=s){var v=c?null:a(l);if(v)return i(v);g=!1,h=n,m=new r}else m=c?[]:y;e:for(;++f<p;){var b=l[f],x=c?c(b):b;if(b=u||b!==0?b:0,g&&x===x){for(var S=m.length;S--;)if(m[S]===x)continue e;c&&m.push(x),y.push(b)}else h(m,x,u)||(m!==y&&m.push(x),y.push(b))}return y}return H4=o,H4}var V4,oP;function kte(){if(oP)return V4;oP=1;var r=Nf(),t=jte();function e(n,a){return n&&n.length?t(n,r(a,2)):[]}return V4=e,V4}var Ete=kte();const lP=In(Ete);function sB(r,t,e){return t===!0?lP(r,e):Qr(t)?lP(r,t):r}function Mp(r){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(r)}var Ate=["ref"];function cP(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Au(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(e),!0).forEach(function(n){Vx(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):cP(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Tte(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function uP(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,lB(n.key),n)}}function Cte(r,t,e){return t&&uP(r.prototype,t),e&&uP(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Pte(r,t,e){return t=lb(t),Ote(r,oB()?Reflect.construct(t,e||[],lb(r).constructor):t.apply(r,e))}function Ote(r,t){if(t&&(Mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ite(r)}function Ite(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function oB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oB=function(){return!!r})()}function lb(r){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lb(r)}function Mte(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&I6(r,t)}function I6(r,t){return I6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I6(r,t)}function Vx(r,t,e){return t=lB(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function lB(r){var t=Rte(r,"string");return Mp(t)=="symbol"?t:t+""}function Rte(r,t){if(Mp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Fte(r,t){if(r==null)return{};var e=Dte(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Dte(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Lte(r){return r.value}function Bte(r,t){if(Je.isValidElement(r))return Je.cloneElement(r,t);if(typeof r=="function")return Je.createElement(r,t);t.ref;var e=Fte(t,Ate);return Je.createElement($N,e)}var dP=1,$u=(function(r){function t(){var e;Tte(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=Pte(this,t,[].concat(a)),Vx(e,"lastBoundingBox",{width:-1,height:-1}),e}return Mte(t,r),Cte(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>dP||Math.abs(a.height-this.lastBoundingBox.height)>dP)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Au({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,o=a.verticalAlign,l=a.margin,c=a.chartWidth,u=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((c||0)-p.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();h={top:((u||0)-g.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Au(Au({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,o=a.height,l=a.wrapperStyle,c=a.payloadUniqBy,u=a.payload,f=Au(Au({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return Je.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},Bte(i,Au(Au({},this.props),{},{payload:sB(u,c,Lte)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Au(Au({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&ir(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])})(ie.PureComponent);Vx($u,"displayName","Legend");Vx($u,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var G4,fP;function $te(){if(fP)return G4;fP=1;var r=$y(),t=qN(),e=xo(),n=r?r.isConcatSpreadable:void 0;function a(i){return e(i)||t(i)||!!(n&&i&&i[n])}return G4=a,G4}var K4,hP;function cB(){if(hP)return K4;hP=1;var r=JL(),t=$te();function e(n,a,i,s,o){var l=-1,c=n.length;for(i||(i=t),o||(o=[]);++l<c;){var u=n[l];a>0&&i(u)?a>1?e(u,a-1,i,s,o):r(o,u):s||(o[o.length]=u)}return o}return K4=e,K4}var X4,pP;function Ute(){if(pP)return X4;pP=1;function r(t){return function(e,n,a){for(var i=-1,s=Object(e),o=a(e),l=o.length;l--;){var c=o[t?l:++i];if(n(s[c],c,s)===!1)break}return e}}return X4=r,X4}var Y4,mP;function qte(){if(mP)return Y4;mP=1;var r=Ute(),t=r();return Y4=t,Y4}var J4,gP;function uB(){if(gP)return J4;gP=1;var r=qte(),t=Hx();function e(n,a){return n&&r(n,a,t)}return J4=e,J4}var Z4,yP;function zte(){if(yP)return Z4;yP=1;var r=Uy();function t(e,n){return function(a,i){if(a==null)return a;if(!r(a))return e(a,i);for(var s=a.length,o=n?s:-1,l=Object(a);(n?o--:++o<s)&&i(l[o],o,l)!==!1;);return a}}return Z4=t,Z4}var Q4,vP;function VN(){if(vP)return Q4;vP=1;var r=uB(),t=zte(),e=t(r);return Q4=e,Q4}var e3,bP;function dB(){if(bP)return e3;bP=1;var r=VN(),t=Uy();function e(n,a){var i=-1,s=t(n)?Array(n.length):[];return r(n,function(o,l,c){s[++i]=a(o,l,c)}),s}return e3=e,e3}var t3,xP;function Wte(){if(xP)return t3;xP=1;function r(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}return t3=r,t3}var r3,wP;function Hte(){if(wP)return r3;wP=1;var r=cm();function t(e,n){if(e!==n){var a=e!==void 0,i=e===null,s=e===e,o=r(e),l=n!==void 0,c=n===null,u=n===n,f=r(n);if(!c&&!f&&!o&&e>n||o&&l&&u&&!c&&!f||i&&l&&u||!a&&u||!s)return 1;if(!i&&!o&&!f&&e<n||f&&a&&s&&!i&&!o||c&&a&&s||!l&&s||!u)return-1}return 0}return r3=t,r3}var n3,_P;function Vte(){if(_P)return n3;_P=1;var r=Hte();function t(e,n,a){for(var i=-1,s=e.criteria,o=n.criteria,l=s.length,c=a.length;++i<l;){var u=r(s[i],o[i]);if(u){if(i>=c)return u;var f=a[i];return u*(f=="desc"?-1:1)}}return e.index-n.index}return n3=t,n3}var a3,SP;function Gte(){if(SP)return a3;SP=1;var r=ON(),t=IN(),e=Nf(),n=dB(),a=Wte(),i=QL(),s=Vte(),o=hm(),l=xo();function c(u,f,h){f.length?f=r(f,function(y){return l(y)?function(m){return t(m,y.length===1?y[0]:y)}:y}):f=[o];var p=-1;f=r(f,i(e));var g=n(u,function(y,m,v){var b=r(f,function(x){return x(y)});return{criteria:b,index:++p,value:y}});return a(g,function(y,m){return s(y,m,h)})}return a3=c,a3}var i3,NP;function Kte(){if(NP)return i3;NP=1;function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}return i3=r,i3}var s3,jP;function Xte(){if(jP)return s3;jP=1;var r=Kte(),t=Math.max;function e(n,a,i){return a=t(a===void 0?n.length-1:a,0),function(){for(var s=arguments,o=-1,l=t(s.length-a,0),c=Array(l);++o<l;)c[o]=s[a+o];o=-1;for(var u=Array(a+1);++o<a;)u[o]=s[o];return u[a]=i(c),r(n,this,u)}}return s3=e,s3}var o3,kP;function Yte(){if(kP)return o3;kP=1;function r(t){return function(){return t}}return o3=r,o3}var l3,EP;function fB(){if(EP)return l3;EP=1;var r=Kh(),t=(function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch{}})();return l3=t,l3}var c3,AP;function Jte(){if(AP)return c3;AP=1;var r=Yte(),t=fB(),e=hm(),n=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:r(i),writable:!0})}:e;return c3=n,c3}var u3,TP;function Zte(){if(TP)return u3;TP=1;var r=800,t=16,e=Date.now;function n(a){var i=0,s=0;return function(){var o=e(),l=t-(o-s);if(s=o,l>0){if(++i>=r)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return u3=n,u3}var d3,CP;function Qte(){if(CP)return d3;CP=1;var r=Jte(),t=Zte(),e=t(r);return d3=e,d3}var f3,PP;function ere(){if(PP)return f3;PP=1;var r=hm(),t=Xte(),e=Qte();function n(a,i){return e(t(a,i,r),a+"")}return f3=n,f3}var h3,OP;function Gx(){if(OP)return h3;OP=1;var r=TN(),t=Uy(),e=zN(),n=Sf();function a(i,s,o){if(!n(o))return!1;var l=typeof s;return(l=="number"?t(o)&&e(s,o.length):l=="string"&&s in o)?r(o[s],i):!1}return h3=a,h3}var p3,IP;function tre(){if(IP)return p3;IP=1;var r=cB(),t=Gte(),e=ere(),n=Gx(),a=e(function(i,s){if(i==null)return[];var o=s.length;return o>1&&n(i,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),t(i,r(s,1),[])});return p3=a,p3}var rre=tre();const GN=In(rre);function Gg(r){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(r)}function M6(){return M6=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},M6.apply(this,arguments)}function nre(r,t){return ore(r)||sre(r,t)||ire(r,t)||are()}function are(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ire(r,t){if(r){if(typeof r=="string")return MP(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return MP(r,t)}}function MP(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function sre(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function ore(r){if(Array.isArray(r))return r}function RP(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function m3(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(e),!0).forEach(function(n){lre(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):RP(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function lre(r,t,e){return t=cre(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function cre(r){var t=ure(r,"string");return Gg(t)=="symbol"?t:t+""}function ure(r,t){if(Gg(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function dre(r){return Array.isArray(r)&&di(r[0])&&di(r[1])?r.join(" ~ "):r}var fre=function(t){var e=t.separator,n=e===void 0?" : ":e,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,o=s===void 0?{}:s,l=t.labelStyle,c=l===void 0?{}:l,u=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,g=t.labelClassName,y=t.label,m=t.labelFormatter,v=t.accessibilityLayer,b=v===void 0?!1:v,x=function(){if(u&&u.length){var D={padding:0,margin:0},T=(h?GN(u,h):u).map(function(R,C){if(R.type==="none")return null;var N=m3({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},o),E=R.formatter||f||dre,k=R.value,P=R.name,q=k,H=P;if(E&&q!=null&&H!=null){var L=E(k,P,R,C,u);if(Array.isArray(L)){var K=nre(L,2);q=K[0],H=K[1]}else q=L}return Je.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:N},di(H)?Je.createElement("span",{className:"recharts-tooltip-item-name"},H):null,di(H)?Je.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Je.createElement("span",{className:"recharts-tooltip-item-value"},q),Je.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return Je.createElement("ul",{className:"recharts-tooltip-item-list",style:D},T)}return null},S=m3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=m3({margin:0},c),I=!nn(y),A=I?y:"",O=dn("recharts-default-tooltip",p),M=dn("recharts-tooltip-label",g);I&&m&&u!==void 0&&u!==null&&(A=m(y,u));var z=b?{role:"status","aria-live":"assertive"}:{};return Je.createElement("div",M6({className:O,style:S},z),Je.createElement("p",{className:M,style:_},Je.isValidElement(A)?A:"".concat(A)),x())};function Kg(r){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(r)}function J1(r,t,e){return t=hre(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function hre(r){var t=pre(r,"string");return Kg(t)=="symbol"?t:t+""}function pre(r,t){if(Kg(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Zm="recharts-tooltip-wrapper",mre={visibility:"hidden"};function gre(r){var t=r.coordinate,e=r.translateX,n=r.translateY;return dn(Zm,J1(J1(J1(J1({},"".concat(Zm,"-right"),ir(e)&&t&&ir(t.x)&&e>=t.x),"".concat(Zm,"-left"),ir(e)&&t&&ir(t.x)&&e<t.x),"".concat(Zm,"-bottom"),ir(n)&&t&&ir(t.y)&&n>=t.y),"".concat(Zm,"-top"),ir(n)&&t&&ir(t.y)&&n<t.y))}function FP(r){var t=r.allowEscapeViewBox,e=r.coordinate,n=r.key,a=r.offsetTopLeft,i=r.position,s=r.reverseDirection,o=r.tooltipDimension,l=r.viewBox,c=r.viewBoxDimension;if(i&&ir(i[n]))return i[n];var u=e[n]-o-a,f=e[n]+a;if(t[n])return s[n]?u:f;if(s[n]){var h=u,p=l[n];return h<p?Math.max(f,l[n]):Math.max(u,l[n])}var g=f+o,y=l[n]+c;return g>y?Math.max(u,l[n]):Math.max(f,l[n])}function yre(r){var t=r.translateX,e=r.translateY,n=r.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(e,"px, 0)"):"translate(".concat(t,"px, ").concat(e,"px)")}}function vre(r){var t=r.allowEscapeViewBox,e=r.coordinate,n=r.offsetTopLeft,a=r.position,i=r.reverseDirection,s=r.tooltipBox,o=r.useTranslate3d,l=r.viewBox,c,u,f;return s.height>0&&s.width>0&&e?(u=FP({allowEscapeViewBox:t,coordinate:e,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=FP({allowEscapeViewBox:t,coordinate:e,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=yre({translateX:u,translateY:f,useTranslate3d:o})):c=mre,{cssProperties:c,cssClasses:gre({translateX:u,translateY:f,coordinate:e})}}function Rp(r){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(r)}function DP(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function LP(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(e),!0).forEach(function(n){F6(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):DP(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function bre(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function xre(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,pB(n.key),n)}}function wre(r,t,e){return t&&xre(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function _re(r,t,e){return t=cb(t),Sre(r,hB()?Reflect.construct(t,e||[],cb(r).constructor):t.apply(r,e))}function Sre(r,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nre(r)}function Nre(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hB=function(){return!!r})()}function cb(r){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cb(r)}function jre(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&R6(r,t)}function R6(r,t){return R6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R6(r,t)}function F6(r,t,e){return t=pB(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function pB(r){var t=kre(r,"string");return Rp(t)=="symbol"?t:t+""}function kre(r,t){if(Rp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var BP=1,Ere=(function(r){function t(){var e;bre(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=_re(this,t,[].concat(a)),F6(e,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),F6(e,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,c,u;e.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=e.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(u=e.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),e}return jre(t,r),wre(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>BP||Math.abs(n.height-this.state.lastBoundingBox.height)>BP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,l=a.animationEasing,c=a.children,u=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,g=a.position,y=a.reverseDirection,m=a.useTranslate3d,v=a.viewBox,b=a.wrapperStyle,x=vre({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:p,position:g,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),S=x.cssClasses,_=x.cssProperties,I=LP(LP({transition:h&&i?"transform ".concat(o,"ms ").concat(l):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return Je.createElement("div",{tabIndex:-1,className:S,style:I,ref:function(O){n.wrapperNode=O}},c)}}])})(ie.PureComponent),Are=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Xh={isSsr:Are()};function Fp(r){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(r)}function $P(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function UP(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(e),!0).forEach(function(n){KN(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):$P(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Tre(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Cre(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,gB(n.key),n)}}function Pre(r,t,e){return t&&Cre(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ore(r,t,e){return t=ub(t),Ire(r,mB()?Reflect.construct(t,e||[],ub(r).constructor):t.apply(r,e))}function Ire(r,t){if(t&&(Fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mre(r)}function Mre(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function mB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mB=function(){return!!r})()}function ub(r){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ub(r)}function Rre(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&D6(r,t)}function D6(r,t){return D6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},D6(r,t)}function KN(r,t,e){return t=gB(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function gB(r){var t=Fre(r,"string");return Fp(t)=="symbol"?t:t+""}function Fre(r,t){if(Fp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Dre(r){return r.dataKey}function Lre(r,t){return Je.isValidElement(r)?Je.cloneElement(r,t):typeof r=="function"?Je.createElement(r,t):Je.createElement(fre,t)}var po=(function(r){function t(){return Tre(this,t),Ore(this,t,arguments)}return Rre(t,r),Pre(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,l=a.animationEasing,c=a.content,u=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,g=a.payload,y=a.payloadUniqBy,m=a.position,v=a.reverseDirection,b=a.useTranslate3d,x=a.viewBox,S=a.wrapperStyle,_=g??[];f&&_.length&&(_=sB(g.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),y,Dre));var I=_.length>0;return Je.createElement(Ere,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:h,active:i,coordinate:u,hasPayload:I,offset:p,position:m,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:S},Lre(c,UP(UP({},this.props),{},{payload:_})))}}])})(ie.PureComponent);KN(po,"displayName","Tooltip");KN(po,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Xh.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var g3,qP;function Bre(){if(qP)return g3;qP=1;var r=Qc(),t=function(){return r.Date.now()};return g3=t,g3}var y3,zP;function $re(){if(zP)return y3;zP=1;var r=/\s/;function t(e){for(var n=e.length;n--&&r.test(e.charAt(n)););return n}return y3=t,y3}var v3,WP;function Ure(){if(WP)return v3;WP=1;var r=$re(),t=/^\s+/;function e(n){return n&&n.slice(0,r(n)+1).replace(t,"")}return v3=e,v3}var b3,HP;function yB(){if(HP)return b3;HP=1;var r=Ure(),t=Sf(),e=cm(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(e(c))return n;if(t(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=t(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=r(c);var f=i.test(c);return f||s.test(c)?o(c.slice(2),f?2:8):a.test(c)?n:+c}return b3=l,b3}var x3,VP;function qre(){if(VP)return x3;VP=1;var r=Sf(),t=Bre(),e=yB(),n="Expected a function",a=Math.max,i=Math.min;function s(o,l,c){var u,f,h,p,g,y,m=0,v=!1,b=!1,x=!0;if(typeof o!="function")throw new TypeError(n);l=e(l)||0,r(c)&&(v=!!c.leading,b="maxWait"in c,h=b?a(e(c.maxWait)||0,l):h,x="trailing"in c?!!c.trailing:x);function S(T){var R=u,C=f;return u=f=void 0,m=T,p=o.apply(C,R),p}function _(T){return m=T,g=setTimeout(O,l),v?S(T):p}function I(T){var R=T-y,C=T-m,N=l-R;return b?i(N,h-C):N}function A(T){var R=T-y,C=T-m;return y===void 0||R>=l||R<0||b&&C>=h}function O(){var T=t();if(A(T))return M(T);g=setTimeout(O,I(T))}function M(T){return g=void 0,x&&u?S(T):(u=f=void 0,p)}function z(){g!==void 0&&clearTimeout(g),m=0,u=y=f=g=void 0}function U(){return g===void 0?p:M(t())}function D(){var T=t(),R=A(T);if(u=arguments,f=this,y=T,R){if(g===void 0)return _(y);if(b)return clearTimeout(g),g=setTimeout(O,l),S(y)}return g===void 0&&(g=setTimeout(O,l)),p}return D.cancel=z,D.flush=U,D}return x3=s,x3}var w3,GP;function zre(){if(GP)return w3;GP=1;var r=qre(),t=Sf(),e="Expected a function";function n(a,i,s){var o=!0,l=!0;if(typeof a!="function")throw new TypeError(e);return t(s)&&(o="leading"in s?!!s.leading:o,l="trailing"in s?!!s.trailing:l),r(a,i,{leading:o,maxWait:i,trailing:l})}return w3=n,w3}var Wre=zre();const vB=In(Wre);function Xg(r){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(r)}function KP(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Z1(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(e),!0).forEach(function(n){Hre(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):KP(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Hre(r,t,e){return t=Vre(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Vre(r){var t=Gre(r,"string");return Xg(t)=="symbol"?t:t+""}function Gre(r,t){if(Xg(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Kre(r,t){return Zre(r)||Jre(r,t)||Yre(r,t)||Xre()}function Xre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yre(r,t){if(r){if(typeof r=="string")return XP(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return XP(r,t)}}function XP(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Jre(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Zre(r){if(Array.isArray(r))return r}var Ng=ie.forwardRef(function(r,t){var e=r.aspect,n=r.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=r.width,s=i===void 0?"100%":i,o=r.height,l=o===void 0?"100%":o,c=r.minWidth,u=c===void 0?0:c,f=r.minHeight,h=r.maxHeight,p=r.children,g=r.debounce,y=g===void 0?0:g,m=r.id,v=r.className,b=r.onResize,x=r.style,S=x===void 0?{}:x,_=ie.useRef(null),I=ie.useRef();I.current=b,ie.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var A=ie.useState({containerWidth:a.width,containerHeight:a.height}),O=Kre(A,2),M=O[0],z=O[1],U=ie.useCallback(function(T,R){z(function(C){var N=Math.round(T),E=Math.round(R);return C.containerWidth===N&&C.containerHeight===E?C:{containerWidth:N,containerHeight:E}})},[]);ie.useEffect(function(){var T=function(P){var q,H=P[0].contentRect,L=H.width,K=H.height;U(L,K),(q=I.current)===null||q===void 0||q.call(I,L,K)};y>0&&(T=vB(T,y,{trailing:!0,leading:!1}));var R=new ResizeObserver(T),C=_.current.getBoundingClientRect(),N=C.width,E=C.height;return U(N,E),R.observe(_.current),function(){R.disconnect()}},[U,y]);var D=ie.useMemo(function(){var T=M.containerWidth,R=M.containerHeight;if(T<0||R<0)return null;Bu(_h(s)||_h(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Bu(!e||e>0,"The aspect(%s) must be greater than zero.",e);var C=_h(s)?T:s,N=_h(l)?R:l;e&&e>0&&(C?N=C/e:N&&(C=N*e),h&&N>h&&(N=h)),Bu(C>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,N,s,l,u,f,e);var E=!Array.isArray(p)&&Lu(p.type).endsWith("Chart");return Je.Children.map(p,function(k){return Je.isValidElement(k)?ie.cloneElement(k,Z1({width:C,height:N},E?{style:Z1({height:"100%",width:"100%",maxHeight:N,maxWidth:C},k.props.style)}:{})):k})},[e,p,l,h,f,u,M,s]);return Je.createElement("div",{id:m?"".concat(m):void 0,className:dn("recharts-responsive-container",v),style:Z1(Z1({},S),{},{width:s,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:_},D)}),bB=function(t){return null};bB.displayName="Cell";function Yg(r){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(r)}function YP(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function L6(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(e),!0).forEach(function(n){Qre(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):YP(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Qre(r,t,e){return t=ene(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function ene(r){var t=tne(r,"string");return Yg(t)=="symbol"?t:t+""}function tne(r,t){if(Yg(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var R0={widthCache:{},cacheCount:0},rne=2e3,nne={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},JP="recharts_measurement_span";function ane(r){var t=L6({},r);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}var jg=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Xh.isSsr)return{width:0,height:0};var n=ane(e),a=JSON.stringify({text:t,copyStyle:n});if(R0.widthCache[a])return R0.widthCache[a];try{var i=document.getElementById(JP);i||(i=document.createElement("span"),i.setAttribute("id",JP),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=L6(L6({},nne),n);Object.assign(i.style,s),i.textContent="".concat(t);var o=i.getBoundingClientRect(),l={width:o.width,height:o.height};return R0.widthCache[a]=l,++R0.cacheCount>rne&&(R0.cacheCount=0,R0.widthCache={}),l}catch{return{width:0,height:0}}},ine=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Jg(r){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(r)}function db(r,t){return cne(r)||lne(r,t)||one(r,t)||sne()}function sne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function one(r,t){if(r){if(typeof r=="string")return ZP(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ZP(r,t)}}function ZP(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function lne(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function cne(r){if(Array.isArray(r))return r}function une(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function QP(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,fne(n.key),n)}}function dne(r,t,e){return t&&QP(r.prototype,t),e&&QP(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function fne(r){var t=hne(r,"string");return Jg(t)=="symbol"?t:t+""}function hne(r,t){if(Jg(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var e9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pne=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mne=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xB={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gne=Object.keys(xB),J0="NaN";function yne(r,t){return r*xB[t]}var Q1=(function(){function r(t,e){une(this,r),this.num=t,this.unit=e,this.num=t,this.unit=e,Number.isNaN(t)&&(this.unit=""),e!==""&&!pne.test(e)&&(this.num=NaN,this.unit=""),gne.includes(e)&&(this.num=yne(t,e),this.unit="px")}return dne(r,[{key:"add",value:function(e){return this.unit!==e.unit?new r(NaN,""):new r(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new r(NaN,""):new r(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new r(NaN,""):new r(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new r(NaN,""):new r(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(e){var n,a=(n=mne.exec(e))!==null&&n!==void 0?n:[],i=db(a,3),s=i[1],o=i[2];return new r(parseFloat(s),o??"")}}])})();function wB(r){if(r.includes(J0))return J0;for(var t=r;t.includes("*")||t.includes("/");){var e,n=(e=e9.exec(t))!==null&&e!==void 0?e:[],a=db(n,4),i=a[1],s=a[2],o=a[3],l=Q1.parse(i??""),c=Q1.parse(o??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return J0;t=t.replace(e9,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=t9.exec(t))!==null&&f!==void 0?f:[],p=db(h,4),g=p[1],y=p[2],m=p[3],v=Q1.parse(g??""),b=Q1.parse(m??""),x=y==="+"?v.add(b):v.subtract(b);if(x.isNaN())return J0;t=t.replace(t9,x.toString())}return t}var r9=/\(([^()]*)\)/;function vne(r){for(var t=r;t.includes("(");){var e=r9.exec(t),n=db(e,2),a=n[1];t=t.replace(r9,wB(a))}return t}function bne(r){var t=r.replace(/\s+/g,"");return t=vne(t),t=wB(t),t}function xne(r){try{return bne(r)}catch{return J0}}function _3(r){var t=xne(r.slice(5,-1));return t===J0?"":t}var wne=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_ne=["dx","dy","angle","className","breakAll"];function B6(){return B6=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},B6.apply(this,arguments)}function n9(r,t){if(r==null)return{};var e=Sne(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Sne(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function a9(r,t){return Ene(r)||kne(r,t)||jne(r,t)||Nne()}function Nne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jne(r,t){if(r){if(typeof r=="string")return i9(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i9(r,t)}}function i9(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function kne(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Ene(r){if(Array.isArray(r))return r}var _B=/[ \f\n\r\t\v\u2028\u2029]+/,SB=function(t){var e=t.children,n=t.breakAll,a=t.style;try{var i=[];nn(e)||(n?i=e.toString().split(""):i=e.toString().split(_B));var s=i.map(function(l){return{word:l,width:jg(l,a).width}}),o=n?0:jg("",a).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},Ane=function(t,e,n,a,i){var s=t.maxLines,o=t.children,l=t.style,c=t.breakAll,u=ir(s),f=o,h=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return C.reduce(function(N,E){var k=E.word,P=E.width,q=N[N.length-1];if(q&&(a==null||i||q.width+P+n<Number(a)))q.words.push(k),q.width+=P+n;else{var H={words:[k],width:P};N.push(H)}return N},[])},p=h(e),g=function(C){return C.reduce(function(N,E){return N.width>E.width?N:E})};if(!u)return p;for(var y="",m=function(C){var N=f.slice(0,C),E=SB({breakAll:c,style:l,children:N+y}).wordsWithComputedWidth,k=h(E),P=k.length>s||g(k).width>Number(a);return[P,k]},v=0,b=f.length-1,x=0,S;v<=b&&x<=f.length-1;){var _=Math.floor((v+b)/2),I=_-1,A=m(I),O=a9(A,2),M=O[0],z=O[1],U=m(_),D=a9(U,1),T=D[0];if(!M&&!T&&(v=_+1),M&&T&&(b=_-1),!M&&T){S=z;break}x++}return S||p},s9=function(t){var e=nn(t)?[]:t.toString().split(_B);return[{words:e}]},Tne=function(t){var e=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,o=t.maxLines;if((e||n)&&!Xh.isSsr){var l,c,u=SB({breakAll:s,children:a,style:i});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,c=h}else return s9(a);return Ane({breakAll:s,children:a,maxLines:o,style:i},l,c,e,n)}return s9(a)},o9="#808080",fb=function(t){var e=t.x,n=e===void 0?0:e,a=t.y,i=a===void 0?0:a,s=t.lineHeight,o=s===void 0?"1em":s,l=t.capHeight,c=l===void 0?"0.71em":l,u=t.scaleToFit,f=u===void 0?!1:u,h=t.textAnchor,p=h===void 0?"start":h,g=t.verticalAnchor,y=g===void 0?"end":g,m=t.fill,v=m===void 0?o9:m,b=n9(t,wne),x=ie.useMemo(function(){return Tne({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),S=b.dx,_=b.dy,I=b.angle,A=b.className,O=b.breakAll,M=n9(b,_ne);if(!di(n)||!di(i))return null;var z=n+(ir(S)?S:0),U=i+(ir(_)?_:0),D;switch(y){case"start":D=_3("calc(".concat(c,")"));break;case"middle":D=_3("calc(".concat((x.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:D=_3("calc(".concat(x.length-1," * -").concat(o,")"));break}var T=[];if(f){var R=x[0].width,C=b.width;T.push("scale(".concat((ir(C)?C/R:1)/R,")"))}return I&&T.push("rotate(".concat(I,", ").concat(z,", ").concat(U,")")),T.length&&(M.transform=T.join(" ")),Je.createElement("text",B6({},tn(M,!0),{x:z,y:U,className:dn("recharts-text",A),textAnchor:p,fill:v.includes("url")?o9:v}),x.map(function(N,E){var k=N.words.join(O?"":" ");return Je.createElement("tspan",{x:z,dy:E===0?D:o,key:"".concat(k,"-").concat(E)},k)}))};function pf(r,t){return r==null||t==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function Cne(r,t){return r==null||t==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function XN(r){let t,e,n;r.length!==2?(t=pf,e=(o,l)=>pf(r(o),l),n=(o,l)=>r(o)-l):(t=r===pf||r===Cne?r:Pne,e=r,n=r);function a(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;e(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function i(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;e(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){const f=a(o,l,c,u-1);return f>c&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:a,center:s,right:i}}function Pne(){return 0}function NB(r){return r===null?NaN:+r}function*One(r,t){for(let e of r)e!=null&&(e=+e)>=e&&(yield e)}const Ine=XN(pf),qy=Ine.right;XN(NB).center;class l9 extends Map{constructor(t,e=Fne){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(c9(this,t))}has(t){return super.has(c9(this,t))}set(t,e){return super.set(Mne(this,t),e)}delete(t){return super.delete(Rne(this,t))}}function c9({_intern:r,_key:t},e){const n=t(e);return r.has(n)?r.get(n):e}function Mne({_intern:r,_key:t},e){const n=t(e);return r.has(n)?r.get(n):(r.set(n,e),e)}function Rne({_intern:r,_key:t},e){const n=t(e);return r.has(n)&&(e=r.get(n),r.delete(n)),e}function Fne(r){return r!==null&&typeof r=="object"?r.valueOf():r}function Dne(r=pf){if(r===pf)return jB;if(typeof r!="function")throw new TypeError("compare is not a function");return(t,e)=>{const n=r(t,e);return n||n===0?n:(r(e,e)===0)-(r(t,t)===0)}}function jB(r,t){return(r==null||!(r>=r))-(t==null||!(t>=t))||(r<t?-1:r>t?1:0)}const Lne=Math.sqrt(50),Bne=Math.sqrt(10),$ne=Math.sqrt(2);function hb(r,t,e){const n=(t-r)/Math.max(0,e),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=Lne?10:i>=Bne?5:i>=$ne?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(r*c),l=Math.round(t*c),o/c<r&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(r/c),l=Math.round(t/c),o*c<r&&++o,l*c>t&&--l),l<o&&.5<=e&&e<2?hb(r,t,e*2):[o,l,c]}function $6(r,t,e){if(t=+t,r=+r,e=+e,!(e>0))return[];if(r===t)return[r];const n=t<r,[a,i,s]=n?hb(t,r,e):hb(r,t,e);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function U6(r,t,e){return t=+t,r=+r,e=+e,hb(r,t,e)[2]}function q6(r,t,e){t=+t,r=+r,e=+e;const n=t<r,a=n?U6(t,r,e):U6(r,t,e);return(n?-1:1)*(a<0?1/-a:a)}function u9(r,t){let e;for(const n of r)n!=null&&(e<n||e===void 0&&n>=n)&&(e=n);return e}function d9(r,t){let e;for(const n of r)n!=null&&(e>n||e===void 0&&n>=n)&&(e=n);return e}function kB(r,t,e=0,n=1/0,a){if(t=Math.floor(t),e=Math.floor(Math.max(0,e)),n=Math.floor(Math.min(r.length-1,n)),!(e<=t&&t<=n))return r;for(a=a===void 0?jB:Dne(a);n>e;){if(n-e>600){const l=n-e+1,c=t-e+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),p=Math.max(e,Math.floor(t-c*f/l+h)),g=Math.min(n,Math.floor(t+(l-c)*f/l+h));kB(r,t,p,g,a)}const i=r[t];let s=e,o=n;for(Qm(r,e,t),a(r[n],i)>0&&Qm(r,e,n);s<o;){for(Qm(r,s,o),++s,--o;a(r[s],i)<0;)++s;for(;a(r[o],i)>0;)--o}a(r[e],i)===0?Qm(r,e,o):(++o,Qm(r,o,n)),o<=t&&(e=o+1),t<=o&&(n=o-1)}return r}function Qm(r,t,e){const n=r[t];r[t]=r[e],r[e]=n}function Une(r,t,e){if(r=Float64Array.from(One(r)),!(!(n=r.length)||isNaN(t=+t))){if(t<=0||n<2)return d9(r);if(t>=1)return u9(r);var n,a=(n-1)*t,i=Math.floor(a),s=u9(kB(r,i).subarray(0,i+1)),o=d9(r.subarray(i+1));return s+(o-s)*(a-i)}}function qne(r,t,e=NB){if(!(!(n=r.length)||isNaN(t=+t))){if(t<=0||n<2)return+e(r[0],0,r);if(t>=1)return+e(r[n-1],n-1,r);var n,a=(n-1)*t,i=Math.floor(a),s=+e(r[i],i,r),o=+e(r[i+1],i+1,r);return s+(o-s)*(a-i)}}function zne(r,t,e){r=+r,t=+t,e=(a=arguments.length)<2?(t=r,r=0,1):a<3?1:+e;for(var n=-1,a=Math.max(0,Math.ceil((t-r)/e))|0,i=new Array(a);++n<a;)i[n]=r+n*e;return i}function bl(r,t){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(t).domain(r);break}return this}function sd(r,t){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const z6=Symbol("implicit");function YN(){var r=new l9,t=[],e=[],n=z6;function a(i){let s=r.get(i);if(s===void 0){if(n!==z6)return n;r.set(i,s=t.push(i)-1)}return e[s%e.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],r=new l9;for(const s of i)r.has(s)||r.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(e=Array.from(i),a):e.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return YN(t,e).unknown(n)},bl.apply(a,arguments),a}function Zg(){var r=YN().unknown(void 0),t=r.domain,e=r.range,n=0,a=1,i,s,o=!1,l=0,c=0,u=.5;delete r.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,y=p?n:a;i=(y-g)/Math.max(1,h-l+c*2),o&&(i=Math.floor(i)),g+=(y-g-i*(h-l))*u,s=i*(1-l),o&&(g=Math.round(g),s=Math.round(s));var m=zne(h).map(function(v){return g+i*v});return e(p?m.reverse():m)}return r.domain=function(h){return arguments.length?(t(h),f()):t()},r.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},r.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},r.bandwidth=function(){return s},r.step=function(){return i},r.round=function(h){return arguments.length?(o=!!h,f()):o},r.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},r.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},r.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},r.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},r.copy=function(){return Zg(t(),[n,a]).round(o).paddingInner(l).paddingOuter(c).align(u)},bl.apply(f(),arguments)}function EB(r){var t=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return EB(t())},r}function kg(){return EB(Zg.apply(null,arguments).paddingInner(1))}function JN(r,t,e){r.prototype=t.prototype=e,e.constructor=r}function AB(r,t){var e=Object.create(r.prototype);for(var n in t)e[n]=t[n];return e}function zy(){}var Qg=.7,pb=1/Qg,cp="\\s*([+-]?\\d+)\\s*",ey="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wne=/^#([0-9a-f]{3,8})$/,Hne=new RegExp(`^rgb\\(${cp},${cp},${cp}\\)$`),Vne=new RegExp(`^rgb\\(${Wc},${Wc},${Wc}\\)$`),Gne=new RegExp(`^rgba\\(${cp},${cp},${cp},${ey}\\)$`),Kne=new RegExp(`^rgba\\(${Wc},${Wc},${Wc},${ey}\\)$`),Xne=new RegExp(`^hsl\\(${ey},${Wc},${Wc}\\)$`),Yne=new RegExp(`^hsla\\(${ey},${Wc},${Wc},${ey}\\)$`),f9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JN(zy,ty,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:h9,formatHex:h9,formatHex8:Jne,formatHsl:Zne,formatRgb:p9,toString:p9});function h9(){return this.rgb().formatHex()}function Jne(){return this.rgb().formatHex8()}function Zne(){return TB(this).formatHsl()}function p9(){return this.rgb().formatRgb()}function ty(r){var t,e;return r=(r+"").trim().toLowerCase(),(t=Wne.exec(r))?(e=t[1].length,t=parseInt(t[1],16),e===6?m9(t):e===3?new go(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?ev(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?ev(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Hne.exec(r))?new go(t[1],t[2],t[3],1):(t=Vne.exec(r))?new go(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gne.exec(r))?ev(t[1],t[2],t[3],t[4]):(t=Kne.exec(r))?ev(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xne.exec(r))?v9(t[1],t[2]/100,t[3]/100,1):(t=Yne.exec(r))?v9(t[1],t[2]/100,t[3]/100,t[4]):f9.hasOwnProperty(r)?m9(f9[r]):r==="transparent"?new go(NaN,NaN,NaN,0):null}function m9(r){return new go(r>>16&255,r>>8&255,r&255,1)}function ev(r,t,e,n){return n<=0&&(r=t=e=NaN),new go(r,t,e,n)}function Qne(r){return r instanceof zy||(r=ty(r)),r?(r=r.rgb(),new go(r.r,r.g,r.b,r.opacity)):new go}function W6(r,t,e,n){return arguments.length===1?Qne(r):new go(r,t,e,n??1)}function go(r,t,e,n){this.r=+r,this.g=+t,this.b=+e,this.opacity=+n}JN(go,W6,AB(zy,{brighter(r){return r=r==null?pb:Math.pow(pb,r),new go(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Qg:Math.pow(Qg,r),new go(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new go(Th(this.r),Th(this.g),Th(this.b),mb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g9,formatHex:g9,formatHex8:eae,formatRgb:y9,toString:y9}));function g9(){return`#${Sh(this.r)}${Sh(this.g)}${Sh(this.b)}`}function eae(){return`#${Sh(this.r)}${Sh(this.g)}${Sh(this.b)}${Sh((isNaN(this.opacity)?1:this.opacity)*255)}`}function y9(){const r=mb(this.opacity);return`${r===1?"rgb(":"rgba("}${Th(this.r)}, ${Th(this.g)}, ${Th(this.b)}${r===1?")":`, ${r})`}`}function mb(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Th(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Sh(r){return r=Th(r),(r<16?"0":"")+r.toString(16)}function v9(r,t,e,n){return n<=0?r=t=e=NaN:e<=0||e>=1?r=t=NaN:t<=0&&(r=NaN),new rc(r,t,e,n)}function TB(r){if(r instanceof rc)return new rc(r.h,r.s,r.l,r.opacity);if(r instanceof zy||(r=ty(r)),!r)return new rc;if(r instanceof rc)return r;r=r.rgb();var t=r.r/255,e=r.g/255,n=r.b/255,a=Math.min(t,e,n),i=Math.max(t,e,n),s=NaN,o=i-a,l=(i+a)/2;return o?(t===i?s=(e-n)/o+(e<n)*6:e===i?s=(n-t)/o+2:s=(t-e)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new rc(s,o,l,r.opacity)}function tae(r,t,e,n){return arguments.length===1?TB(r):new rc(r,t,e,n??1)}function rc(r,t,e,n){this.h=+r,this.s=+t,this.l=+e,this.opacity=+n}JN(rc,tae,AB(zy,{brighter(r){return r=r==null?pb:Math.pow(pb,r),new rc(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Qg:Math.pow(Qg,r),new rc(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,a=2*e-n;return new go(S3(r>=240?r-240:r+120,a,n),S3(r,a,n),S3(r<120?r+240:r-120,a,n),this.opacity)},clamp(){return new rc(b9(this.h),tv(this.s),tv(this.l),mb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=mb(this.opacity);return`${r===1?"hsl(":"hsla("}${b9(this.h)}, ${tv(this.s)*100}%, ${tv(this.l)*100}%${r===1?")":`, ${r})`}`}}));function b9(r){return r=(r||0)%360,r<0?r+360:r}function tv(r){return Math.max(0,Math.min(1,r||0))}function S3(r,t,e){return(r<60?t+(e-t)*r/60:r<180?e:r<240?t+(e-t)*(240-r)/60:t)*255}const ZN=r=>()=>r;function rae(r,t){return function(e){return r+e*t}}function nae(r,t,e){return r=Math.pow(r,e),t=Math.pow(t,e)-r,e=1/e,function(n){return Math.pow(r+n*t,e)}}function aae(r){return(r=+r)==1?CB:function(t,e){return e-t?nae(t,e,r):ZN(isNaN(t)?e:t)}}function CB(r,t){var e=t-r;return e?rae(r,e):ZN(isNaN(r)?t:r)}const x9=(function r(t){var e=aae(t);function n(a,i){var s=e((a=W6(a)).r,(i=W6(i)).r),o=e(a.g,i.g),l=e(a.b,i.b),c=CB(a.opacity,i.opacity);return function(u){return a.r=s(u),a.g=o(u),a.b=l(u),a.opacity=c(u),a+""}}return n.gamma=r,n})(1);function iae(r,t){t||(t=[]);var e=r?Math.min(t.length,r.length):0,n=t.slice(),a;return function(i){for(a=0;a<e;++a)n[a]=r[a]*(1-i)+t[a]*i;return n}}function sae(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function oae(r,t){var e=t?t.length:0,n=r?Math.min(e,r.length):0,a=new Array(n),i=new Array(e),s;for(s=0;s<n;++s)a[s]=pm(r[s],t[s]);for(;s<e;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function lae(r,t){var e=new Date;return r=+r,t=+t,function(n){return e.setTime(r*(1-n)+t*n),e}}function gb(r,t){return r=+r,t=+t,function(e){return r*(1-e)+t*e}}function cae(r,t){var e={},n={},a;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in r?e[a]=pm(r[a],t[a]):n[a]=t[a];return function(i){for(a in e)n[a]=e[a](i);return n}}var H6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N3=new RegExp(H6.source,"g");function uae(r){return function(){return r}}function dae(r){return function(t){return r(t)+""}}function fae(r,t){var e=H6.lastIndex=N3.lastIndex=0,n,a,i,s=-1,o=[],l=[];for(r=r+"",t=t+"";(n=H6.exec(r))&&(a=N3.exec(t));)(i=a.index)>e&&(i=t.slice(e,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:gb(n,a)})),e=N3.lastIndex;return e<t.length&&(i=t.slice(e),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?dae(l[0].x):uae(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function pm(r,t){var e=typeof t,n;return t==null||e==="boolean"?ZN(t):(e==="number"?gb:e==="string"?(n=ty(t))?(t=n,x9):fae:t instanceof ty?x9:t instanceof Date?lae:sae(t)?iae:Array.isArray(t)?oae:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cae:gb)(r,t)}function QN(r,t){return r=+r,t=+t,function(e){return Math.round(r*(1-e)+t*e)}}function hae(r,t){t===void 0&&(t=r,r=pm);for(var e=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);e<n;)i[e]=r(a,a=t[++e]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function pae(r){return function(){return r}}function yb(r){return+r}var w9=[0,1];function Ws(r){return r}function V6(r,t){return(t-=r=+r)?function(e){return(e-r)/t}:pae(isNaN(t)?NaN:.5)}function mae(r,t){var e;return r>t&&(e=r,r=t,t=e),function(n){return Math.max(r,Math.min(t,n))}}function gae(r,t,e){var n=r[0],a=r[1],i=t[0],s=t[1];return a<n?(n=V6(a,n),i=e(s,i)):(n=V6(n,a),i=e(i,s)),function(o){return i(n(o))}}function yae(r,t,e){var n=Math.min(r.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=V6(r[s],r[s+1]),i[s]=e(t[s],t[s+1]);return function(o){var l=qy(r,o,1,n)-1;return i[l](a[l](o))}}function Wy(r,t){return t.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Kx(){var r=w9,t=w9,e=pm,n,a,i,s=Ws,o,l,c;function u(){var h=Math.min(r.length,t.length);return s!==Ws&&(s=mae(r[0],r[h-1])),o=h>2?yae:gae,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?i:(l||(l=o(r.map(n),t,e)))(n(s(h)))}return f.invert=function(h){return s(a((c||(c=o(t,r.map(n),gb)))(h)))},f.domain=function(h){return arguments.length?(r=Array.from(h,yb),u()):r.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),e=QN,u()},f.clamp=function(h){return arguments.length?(s=h?!0:Ws,u()):s!==Ws},f.interpolate=function(h){return arguments.length?(e=h,u()):e},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return n=h,a=p,u()}}function ej(){return Kx()(Ws,Ws)}function vae(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function vb(r,t){if((e=(r=t?r.toExponential(t-1):r.toExponential()).indexOf("e"))<0)return null;var e,n=r.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+r.slice(e+1)]}function Dp(r){return r=vb(Math.abs(r)),r?r[1]:NaN}function bae(r,t){return function(e,n){for(var a=e.length,i=[],s=0,o=r[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),i.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=r[s=(s+1)%r.length];return i.reverse().join(t)}}function xae(r){return function(t){return t.replace(/[0-9]/g,function(e){return r[+e]})}}var wae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ry(r){if(!(t=wae.exec(r)))throw new Error("invalid format: "+r);var t;return new tj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ry.prototype=tj.prototype;function tj(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}tj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _ae(r){e:for(var t=r.length,e=1,n=-1,a;e<t;++e)switch(r[e]){case".":n=a=e;break;case"0":n===0&&(n=e),a=e;break;default:if(!+r[e])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(a+1):r}var PB;function Sae(r,t){var e=vb(r,t);if(!e)return r+"";var n=e[0],a=e[1],i=a-(PB=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+vb(r,Math.max(0,t+i-1))[0]}function _9(r,t){var e=vb(r,t);if(!e)return r+"";var n=e[0],a=e[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const S9={"%":(r,t)=>(r*100).toFixed(t),b:r=>Math.round(r).toString(2),c:r=>r+"",d:vae,e:(r,t)=>r.toExponential(t),f:(r,t)=>r.toFixed(t),g:(r,t)=>r.toPrecision(t),o:r=>Math.round(r).toString(8),p:(r,t)=>_9(r*100,t),r:_9,s:Sae,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function N9(r){return r}var j9=Array.prototype.map,k9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nae(r){var t=r.grouping===void 0||r.thousands===void 0?N9:bae(j9.call(r.grouping,Number),r.thousands+""),e=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",a=r.decimal===void 0?".":r.decimal+"",i=r.numerals===void 0?N9:xae(j9.call(r.numerals,String)),s=r.percent===void 0?"%":r.percent+"",o=r.minus===void 0?"":r.minus+"",l=r.nan===void 0?"NaN":r.nan+"";function c(f){f=ry(f);var h=f.fill,p=f.align,g=f.sign,y=f.symbol,m=f.zero,v=f.width,b=f.comma,x=f.precision,S=f.trim,_=f.type;_==="n"?(b=!0,_="g"):S9[_]||(x===void 0&&(x=12),S=!0,_="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var I=y==="$"?e:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=y==="$"?n:/[%p]/.test(_)?s:"",O=S9[_],M=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function z(U){var D=I,T=A,R,C,N;if(_==="c")T=O(U)+T,U="";else{U=+U;var E=U<0||1/U<0;if(U=isNaN(U)?l:O(Math.abs(U),x),S&&(U=_ae(U)),E&&+U==0&&g!=="+"&&(E=!1),D=(E?g==="("?g:o:g==="-"||g==="("?"":g)+D,T=(_==="s"?k9[8+PB/3]:"")+T+(E&&g==="("?")":""),M){for(R=-1,C=U.length;++R<C;)if(N=U.charCodeAt(R),48>N||N>57){T=(N===46?a+U.slice(R+1):U.slice(R))+T,U=U.slice(0,R);break}}}b&&!m&&(U=t(U,1/0));var k=D.length+U.length+T.length,P=k<v?new Array(v-k+1).join(h):"";switch(b&&m&&(U=t(P+U,P.length?v-T.length:1/0),P=""),p){case"<":U=D+U+T+P;break;case"=":U=D+P+U+T;break;case"^":U=P.slice(0,k=P.length>>1)+D+U+T+P.slice(k);break;default:U=P+D+U+T;break}return i(U)}return z.toString=function(){return f+""},z}function u(f,h){var p=c((f=ry(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Dp(h)/3)))*3,y=Math.pow(10,-g),m=k9[8+g/3];return function(v){return p(y*v)+m}}return{format:c,formatPrefix:u}}var rv,rj,OB;jae({thousands:",",grouping:[3],currency:["$",""]});function jae(r){return rv=Nae(r),rj=rv.format,OB=rv.formatPrefix,rv}function kae(r){return Math.max(0,-Dp(Math.abs(r)))}function Eae(r,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dp(t)/3)))*3-Dp(Math.abs(r)))}function Aae(r,t){return r=Math.abs(r),t=Math.abs(t)-r,Math.max(0,Dp(t)-Dp(r))+1}function IB(r,t,e,n){var a=q6(r,t,e),i;switch(n=ry(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(t));return n.precision==null&&!isNaN(i=Eae(a,s))&&(n.precision=i),OB(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Aae(a,Math.max(Math.abs(r),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=kae(a))&&(n.precision=i-(n.type==="%")*2);break}}return rj(n)}function jf(r){var t=r.domain;return r.ticks=function(e){var n=t();return $6(n[0],n[n.length-1],e??10)},r.tickFormat=function(e,n){var a=t();return IB(a[0],a[a.length-1],e??10,n)},r.nice=function(e){e==null&&(e=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],l,c,u=10;for(o<s&&(c=s,s=o,o=c,c=a,a=i,i=c);u-- >0;){if(c=U6(s,o,e),c===l)return n[a]=s,n[i]=o,t(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return r},r}function bb(){var r=ej();return r.copy=function(){return Wy(r,bb())},bl.apply(r,arguments),jf(r)}function MB(r){var t;function e(n){return n==null||isNaN(n=+n)?t:n}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(r=Array.from(n,yb),e):r.slice()},e.unknown=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return MB(r).unknown(t)},r=arguments.length?Array.from(r,yb):[0,1],jf(e)}function RB(r,t){r=r.slice();var e=0,n=r.length-1,a=r[e],i=r[n],s;return i<a&&(s=e,e=n,n=s,s=a,a=i,i=s),r[e]=t.floor(a),r[n]=t.ceil(i),r}function E9(r){return Math.log(r)}function A9(r){return Math.exp(r)}function Tae(r){return-Math.log(-r)}function Cae(r){return-Math.exp(-r)}function Pae(r){return isFinite(r)?+("1e"+r):r<0?0:r}function Oae(r){return r===10?Pae:r===Math.E?Math.exp:t=>Math.pow(r,t)}function Iae(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),t=>Math.log(t)/r)}function T9(r){return(t,e)=>-r(-t,e)}function nj(r){const t=r(E9,A9),e=t.domain;let n=10,a,i;function s(){return a=Iae(n),i=Oae(n),e()[0]<0?(a=T9(a),i=T9(i),r(Tae,Cae)):r(E9,A9),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(e(o),s()):e()},t.ticks=o=>{const l=e();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=a(c),p=a(u),g,y;const m=o==null?10:+o;let v=[];if(!(n%1)&&p-h<m){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(g=1;g<n;++g)if(y=h<0?g/i(-h):g*i(h),!(y<c)){if(y>u)break;v.push(y)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(y=h>0?g/i(-h):g*i(h),!(y<c)){if(y>u)break;v.push(y)}v.length*2<m&&(v=$6(c,u,m))}else v=$6(h,p,Math.min(p-h,m)).map(i);return f?v.reverse():v},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=ry(l)).precision==null&&(l.trim=!0),l=rj(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return u=>{let f=u/i(Math.round(a(u)));return f*n<n-.5&&(f*=n),f<=c?l(u):""}},t.nice=()=>e(RB(e(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function FB(){const r=nj(Kx()).domain([1,10]);return r.copy=()=>Wy(r,FB()).base(r.base()),bl.apply(r,arguments),r}function C9(r){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/r))}}function P9(r){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*r}}function aj(r){var t=1,e=r(C9(t),P9(t));return e.constant=function(n){return arguments.length?r(C9(t=+n),P9(t)):t},jf(e)}function DB(){var r=aj(Kx());return r.copy=function(){return Wy(r,DB()).constant(r.constant())},bl.apply(r,arguments)}function O9(r){return function(t){return t<0?-Math.pow(-t,r):Math.pow(t,r)}}function Mae(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function Rae(r){return r<0?-r*r:r*r}function ij(r){var t=r(Ws,Ws),e=1;function n(){return e===1?r(Ws,Ws):e===.5?r(Mae,Rae):r(O9(e),O9(1/e))}return t.exponent=function(a){return arguments.length?(e=+a,n()):e},jf(t)}function sj(){var r=ij(Kx());return r.copy=function(){return Wy(r,sj()).exponent(r.exponent())},bl.apply(r,arguments),r}function Fae(){return sj.apply(null,arguments).exponent(.5)}function I9(r){return Math.sign(r)*r*r}function Dae(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function LB(){var r=ej(),t=[0,1],e=!1,n;function a(i){var s=Dae(r(i));return isNaN(s)?n:e?Math.round(s):s}return a.invert=function(i){return r.invert(I9(i))},a.domain=function(i){return arguments.length?(r.domain(i),a):r.domain()},a.range=function(i){return arguments.length?(r.range((t=Array.from(i,yb)).map(I9)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(e=!!i,a):e},a.clamp=function(i){return arguments.length?(r.clamp(i),a):r.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return LB(r.domain(),t).round(e).clamp(r.clamp()).unknown(n)},bl.apply(a,arguments),jf(a)}function BB(){var r=[],t=[],e=[],n;function a(){var s=0,o=Math.max(1,t.length);for(e=new Array(o-1);++s<o;)e[s-1]=qne(r,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[qy(e,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?e[o-1]:r[0],o<e.length?e[o]:r[r.length-1]]},i.domain=function(s){if(!arguments.length)return r.slice();r=[];for(let o of s)o!=null&&!isNaN(o=+o)&&r.push(o);return r.sort(pf),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return e.slice()},i.copy=function(){return BB().domain(r).range(t).unknown(n)},bl.apply(i,arguments)}function $B(){var r=0,t=1,e=1,n=[.5],a=[0,1],i;function s(l){return l!=null&&l<=l?a[qy(n,l,0,e)]:i}function o(){var l=-1;for(n=new Array(e);++l<e;)n[l]=((l+1)*t-(l-e)*r)/(e+1);return s}return s.domain=function(l){return arguments.length?([r,t]=l,r=+r,t=+t,o()):[r,t]},s.range=function(l){return arguments.length?(e=(a=Array.from(l)).length-1,o()):a.slice()},s.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[r,n[0]]:c>=e?[n[e-1],t]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(i=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return $B().domain([r,t]).range(a).unknown(i)},bl.apply(jf(s),arguments)}function UB(){var r=[.5],t=[0,1],e,n=1;function a(i){return i!=null&&i<=i?t[qy(r,i,0,n)]:e}return a.domain=function(i){return arguments.length?(r=Array.from(i),n=Math.min(r.length,t.length-1),a):r.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(r.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[r[s-1],r[s]]},a.unknown=function(i){return arguments.length?(e=i,a):e},a.copy=function(){return UB().domain(r).range(t).unknown(e)},bl.apply(a,arguments)}const j3=new Date,k3=new Date;function mi(r,t,e,n){function a(i){return r(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(r(i=new Date(+i)),i),a.ceil=i=>(r(i=new Date(i-1)),t(i,1),r(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const l=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return l;let c;do l.push(c=new Date(+i)),t(i,o),r(i);while(c<i&&i<s);return l},a.filter=i=>mi(s=>{if(s>=s)for(;r(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),e&&(a.count=(i,s)=>(j3.setTime(+i),k3.setTime(+s),r(j3),r(k3),Math.floor(e(j3,k3))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const xb=mi(()=>{},(r,t)=>{r.setTime(+r+t)},(r,t)=>t-r);xb.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?mi(t=>{t.setTime(Math.floor(t/r)*r)},(t,e)=>{t.setTime(+t+e*r)},(t,e)=>(e-t)/r):xb);xb.range;const Mu=1e3,fl=Mu*60,Ru=fl*60,Ju=Ru*24,oj=Ju*7,M9=Ju*30,E3=Ju*365,Nh=mi(r=>{r.setTime(r-r.getMilliseconds())},(r,t)=>{r.setTime(+r+t*Mu)},(r,t)=>(t-r)/Mu,r=>r.getUTCSeconds());Nh.range;const lj=mi(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*Mu)},(r,t)=>{r.setTime(+r+t*fl)},(r,t)=>(t-r)/fl,r=>r.getMinutes());lj.range;const cj=mi(r=>{r.setUTCSeconds(0,0)},(r,t)=>{r.setTime(+r+t*fl)},(r,t)=>(t-r)/fl,r=>r.getUTCMinutes());cj.range;const uj=mi(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*Mu-r.getMinutes()*fl)},(r,t)=>{r.setTime(+r+t*Ru)},(r,t)=>(t-r)/Ru,r=>r.getHours());uj.range;const dj=mi(r=>{r.setUTCMinutes(0,0,0)},(r,t)=>{r.setTime(+r+t*Ru)},(r,t)=>(t-r)/Ru,r=>r.getUTCHours());dj.range;const Hy=mi(r=>r.setHours(0,0,0,0),(r,t)=>r.setDate(r.getDate()+t),(r,t)=>(t-r-(t.getTimezoneOffset()-r.getTimezoneOffset())*fl)/Ju,r=>r.getDate()-1);Hy.range;const Xx=mi(r=>{r.setUTCHours(0,0,0,0)},(r,t)=>{r.setUTCDate(r.getUTCDate()+t)},(r,t)=>(t-r)/Ju,r=>r.getUTCDate()-1);Xx.range;const qB=mi(r=>{r.setUTCHours(0,0,0,0)},(r,t)=>{r.setUTCDate(r.getUTCDate()+t)},(r,t)=>(t-r)/Ju,r=>Math.floor(r/Ju));qB.range;function Yh(r){return mi(t=>{t.setDate(t.getDate()-(t.getDay()+7-r)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+e*7)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fl)/oj)}const Yx=Yh(0),wb=Yh(1),Lae=Yh(2),Bae=Yh(3),Lp=Yh(4),$ae=Yh(5),Uae=Yh(6);Yx.range;wb.range;Lae.range;Bae.range;Lp.range;$ae.range;Uae.range;function Jh(r){return mi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-r)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e*7)},(t,e)=>(e-t)/oj)}const Jx=Jh(0),_b=Jh(1),qae=Jh(2),zae=Jh(3),Bp=Jh(4),Wae=Jh(5),Hae=Jh(6);Jx.range;_b.range;qae.range;zae.range;Bp.range;Wae.range;Hae.range;const fj=mi(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,t)=>{r.setMonth(r.getMonth()+t)},(r,t)=>t.getMonth()-r.getMonth()+(t.getFullYear()-r.getFullYear())*12,r=>r.getMonth());fj.range;const hj=mi(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,t)=>{r.setUTCMonth(r.getUTCMonth()+t)},(r,t)=>t.getUTCMonth()-r.getUTCMonth()+(t.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());hj.range;const Zu=mi(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,t)=>{r.setFullYear(r.getFullYear()+t)},(r,t)=>t.getFullYear()-r.getFullYear(),r=>r.getFullYear());Zu.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:mi(t=>{t.setFullYear(Math.floor(t.getFullYear()/r)*r),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*r)});Zu.range;const Qu=mi(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,t)=>{r.setUTCFullYear(r.getUTCFullYear()+t)},(r,t)=>t.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());Qu.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:mi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/r)*r),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*r)});Qu.range;function zB(r,t,e,n,a,i){const s=[[Nh,1,Mu],[Nh,5,5*Mu],[Nh,15,15*Mu],[Nh,30,30*Mu],[i,1,fl],[i,5,5*fl],[i,15,15*fl],[i,30,30*fl],[a,1,Ru],[a,3,3*Ru],[a,6,6*Ru],[a,12,12*Ru],[n,1,Ju],[n,2,2*Ju],[e,1,oj],[t,1,M9],[t,3,3*M9],[r,1,E3]];function o(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const p=f&&typeof f.range=="function"?f:l(c,u,f),g=p?p.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,p=XN(([,,m])=>m).right(s,h);if(p===s.length)return r.every(q6(c/E3,u/E3,f));if(p===0)return xb.every(Math.max(q6(c,u,f),1));const[g,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return g.every(y)}return[o,l]}const[Vae,Gae]=zB(Qu,hj,Jx,qB,dj,cj),[Kae,Xae]=zB(Zu,fj,Yx,Hy,uj,lj);function A3(r){if(0<=r.y&&r.y<100){var t=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return t.setFullYear(r.y),t}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function T3(r){if(0<=r.y&&r.y<100){var t=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return t.setUTCFullYear(r.y),t}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function eg(r,t,e){return{y:r,m:t,d:e,H:0,M:0,S:0,L:0}}function Yae(r){var t=r.dateTime,e=r.date,n=r.time,a=r.periods,i=r.days,s=r.shortDays,o=r.months,l=r.shortMonths,c=tg(a),u=rg(a),f=tg(i),h=rg(i),p=tg(s),g=rg(s),y=tg(o),m=rg(o),v=tg(l),b=rg(l),x={a:E,A:k,b:P,B:q,c:null,d:$9,e:$9,f:bie,g:Tie,G:Pie,H:gie,I:yie,j:vie,L:WB,m:xie,M:wie,p:H,q:L,Q:z9,s:W9,S:_ie,u:Sie,U:Nie,V:jie,w:kie,W:Eie,x:null,X:null,y:Aie,Y:Cie,Z:Oie,"%":q9},S={a:K,A:Y,b:Z,B:V,c:null,d:U9,e:U9,f:Fie,g:Vie,G:Kie,H:Iie,I:Mie,j:Rie,L:VB,m:Die,M:Lie,p:ee,q:B,Q:z9,s:W9,S:Bie,u:$ie,U:Uie,V:qie,w:zie,W:Wie,x:null,X:null,y:Hie,Y:Gie,Z:Xie,"%":q9},_={a:z,A:U,b:D,B:T,c:R,d:L9,e:L9,f:fie,g:D9,G:F9,H:B9,I:B9,j:lie,L:die,m:oie,M:cie,p:M,q:sie,Q:pie,s:mie,S:uie,u:tie,U:rie,V:nie,w:eie,W:aie,x:C,X:N,y:D9,Y:F9,Z:iie,"%":hie};x.x=I(e,x),x.X=I(n,x),x.c=I(t,x),S.x=I(e,S),S.X=I(n,S),S.c=I(t,S);function I(F,X){return function(te){var se=[],ce=-1,ue=0,oe=F.length,le,pe,ye;for(te instanceof Date||(te=new Date(+te));++ce<oe;)F.charCodeAt(ce)===37&&(se.push(F.slice(ue,ce)),(pe=R9[le=F.charAt(++ce)])!=null?le=F.charAt(++ce):pe=le==="e"?" ":"0",(ye=X[le])&&(le=ye(te,pe)),se.push(le),ue=ce+1);return se.push(F.slice(ue,ce)),se.join("")}}function A(F,X){return function(te){var se=eg(1900,void 0,1),ce=O(se,F,te+="",0),ue,oe;if(ce!=te.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(X&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(ue=T3(eg(se.y,0,1)),oe=ue.getUTCDay(),ue=oe>4||oe===0?_b.ceil(ue):_b(ue),ue=Xx.offset(ue,(se.V-1)*7),se.y=ue.getUTCFullYear(),se.m=ue.getUTCMonth(),se.d=ue.getUTCDate()+(se.w+6)%7):(ue=A3(eg(se.y,0,1)),oe=ue.getDay(),ue=oe>4||oe===0?wb.ceil(ue):wb(ue),ue=Hy.offset(ue,(se.V-1)*7),se.y=ue.getFullYear(),se.m=ue.getMonth(),se.d=ue.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),oe="Z"in se?T3(eg(se.y,0,1)).getUTCDay():A3(eg(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(oe+5)%7:se.w+se.U*7-(oe+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,T3(se)):A3(se)}}function O(F,X,te,se){for(var ce=0,ue=X.length,oe=te.length,le,pe;ce<ue;){if(se>=oe)return-1;if(le=X.charCodeAt(ce++),le===37){if(le=X.charAt(ce++),pe=_[le in R9?X.charAt(ce++):le],!pe||(se=pe(F,te,se))<0)return-1}else if(le!=te.charCodeAt(se++))return-1}return se}function M(F,X,te){var se=c.exec(X.slice(te));return se?(F.p=u.get(se[0].toLowerCase()),te+se[0].length):-1}function z(F,X,te){var se=p.exec(X.slice(te));return se?(F.w=g.get(se[0].toLowerCase()),te+se[0].length):-1}function U(F,X,te){var se=f.exec(X.slice(te));return se?(F.w=h.get(se[0].toLowerCase()),te+se[0].length):-1}function D(F,X,te){var se=v.exec(X.slice(te));return se?(F.m=b.get(se[0].toLowerCase()),te+se[0].length):-1}function T(F,X,te){var se=y.exec(X.slice(te));return se?(F.m=m.get(se[0].toLowerCase()),te+se[0].length):-1}function R(F,X,te){return O(F,t,X,te)}function C(F,X,te){return O(F,e,X,te)}function N(F,X,te){return O(F,n,X,te)}function E(F){return s[F.getDay()]}function k(F){return i[F.getDay()]}function P(F){return l[F.getMonth()]}function q(F){return o[F.getMonth()]}function H(F){return a[+(F.getHours()>=12)]}function L(F){return 1+~~(F.getMonth()/3)}function K(F){return s[F.getUTCDay()]}function Y(F){return i[F.getUTCDay()]}function Z(F){return l[F.getUTCMonth()]}function V(F){return o[F.getUTCMonth()]}function ee(F){return a[+(F.getUTCHours()>=12)]}function B(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var X=I(F+="",x);return X.toString=function(){return F},X},parse:function(F){var X=A(F+="",!1);return X.toString=function(){return F},X},utcFormat:function(F){var X=I(F+="",S);return X.toString=function(){return F},X},utcParse:function(F){var X=A(F+="",!0);return X.toString=function(){return F},X}}}var R9={"-":"",_:" ",0:"0"},Oi=/^\s*\d+/,Jae=/^%/,Zae=/[\\^$*+?|[\]().{}]/g;function _n(r,t,e){var n=r<0?"-":"",a=(n?-r:r)+"",i=a.length;return n+(i<e?new Array(e-i+1).join(t)+a:a)}function Qae(r){return r.replace(Zae,"\\$&")}function tg(r){return new RegExp("^(?:"+r.map(Qae).join("|")+")","i")}function rg(r){return new Map(r.map((t,e)=>[t.toLowerCase(),e]))}function eie(r,t,e){var n=Oi.exec(t.slice(e,e+1));return n?(r.w=+n[0],e+n[0].length):-1}function tie(r,t,e){var n=Oi.exec(t.slice(e,e+1));return n?(r.u=+n[0],e+n[0].length):-1}function rie(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.U=+n[0],e+n[0].length):-1}function nie(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.V=+n[0],e+n[0].length):-1}function aie(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.W=+n[0],e+n[0].length):-1}function F9(r,t,e){var n=Oi.exec(t.slice(e,e+4));return n?(r.y=+n[0],e+n[0].length):-1}function D9(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function iie(r,t,e){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return n?(r.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function sie(r,t,e){var n=Oi.exec(t.slice(e,e+1));return n?(r.q=n[0]*3-3,e+n[0].length):-1}function oie(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.m=n[0]-1,e+n[0].length):-1}function L9(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.d=+n[0],e+n[0].length):-1}function lie(r,t,e){var n=Oi.exec(t.slice(e,e+3));return n?(r.m=0,r.d=+n[0],e+n[0].length):-1}function B9(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.H=+n[0],e+n[0].length):-1}function cie(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.M=+n[0],e+n[0].length):-1}function uie(r,t,e){var n=Oi.exec(t.slice(e,e+2));return n?(r.S=+n[0],e+n[0].length):-1}function die(r,t,e){var n=Oi.exec(t.slice(e,e+3));return n?(r.L=+n[0],e+n[0].length):-1}function fie(r,t,e){var n=Oi.exec(t.slice(e,e+6));return n?(r.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function hie(r,t,e){var n=Jae.exec(t.slice(e,e+1));return n?e+n[0].length:-1}function pie(r,t,e){var n=Oi.exec(t.slice(e));return n?(r.Q=+n[0],e+n[0].length):-1}function mie(r,t,e){var n=Oi.exec(t.slice(e));return n?(r.s=+n[0],e+n[0].length):-1}function $9(r,t){return _n(r.getDate(),t,2)}function gie(r,t){return _n(r.getHours(),t,2)}function yie(r,t){return _n(r.getHours()%12||12,t,2)}function vie(r,t){return _n(1+Hy.count(Zu(r),r),t,3)}function WB(r,t){return _n(r.getMilliseconds(),t,3)}function bie(r,t){return WB(r,t)+"000"}function xie(r,t){return _n(r.getMonth()+1,t,2)}function wie(r,t){return _n(r.getMinutes(),t,2)}function _ie(r,t){return _n(r.getSeconds(),t,2)}function Sie(r){var t=r.getDay();return t===0?7:t}function Nie(r,t){return _n(Yx.count(Zu(r)-1,r),t,2)}function HB(r){var t=r.getDay();return t>=4||t===0?Lp(r):Lp.ceil(r)}function jie(r,t){return r=HB(r),_n(Lp.count(Zu(r),r)+(Zu(r).getDay()===4),t,2)}function kie(r){return r.getDay()}function Eie(r,t){return _n(wb.count(Zu(r)-1,r),t,2)}function Aie(r,t){return _n(r.getFullYear()%100,t,2)}function Tie(r,t){return r=HB(r),_n(r.getFullYear()%100,t,2)}function Cie(r,t){return _n(r.getFullYear()%1e4,t,4)}function Pie(r,t){var e=r.getDay();return r=e>=4||e===0?Lp(r):Lp.ceil(r),_n(r.getFullYear()%1e4,t,4)}function Oie(r){var t=r.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function U9(r,t){return _n(r.getUTCDate(),t,2)}function Iie(r,t){return _n(r.getUTCHours(),t,2)}function Mie(r,t){return _n(r.getUTCHours()%12||12,t,2)}function Rie(r,t){return _n(1+Xx.count(Qu(r),r),t,3)}function VB(r,t){return _n(r.getUTCMilliseconds(),t,3)}function Fie(r,t){return VB(r,t)+"000"}function Die(r,t){return _n(r.getUTCMonth()+1,t,2)}function Lie(r,t){return _n(r.getUTCMinutes(),t,2)}function Bie(r,t){return _n(r.getUTCSeconds(),t,2)}function $ie(r){var t=r.getUTCDay();return t===0?7:t}function Uie(r,t){return _n(Jx.count(Qu(r)-1,r),t,2)}function GB(r){var t=r.getUTCDay();return t>=4||t===0?Bp(r):Bp.ceil(r)}function qie(r,t){return r=GB(r),_n(Bp.count(Qu(r),r)+(Qu(r).getUTCDay()===4),t,2)}function zie(r){return r.getUTCDay()}function Wie(r,t){return _n(_b.count(Qu(r)-1,r),t,2)}function Hie(r,t){return _n(r.getUTCFullYear()%100,t,2)}function Vie(r,t){return r=GB(r),_n(r.getUTCFullYear()%100,t,2)}function Gie(r,t){return _n(r.getUTCFullYear()%1e4,t,4)}function Kie(r,t){var e=r.getUTCDay();return r=e>=4||e===0?Bp(r):Bp.ceil(r),_n(r.getUTCFullYear()%1e4,t,4)}function Xie(){return"+0000"}function q9(){return"%"}function z9(r){return+r}function W9(r){return Math.floor(+r/1e3)}var F0,KB,XB;Yie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yie(r){return F0=Yae(r),KB=F0.format,F0.parse,XB=F0.utcFormat,F0.utcParse,F0}function Jie(r){return new Date(r)}function Zie(r){return r instanceof Date?+r:+new Date(+r)}function pj(r,t,e,n,a,i,s,o,l,c){var u=ej(),f=u.invert,h=u.domain,p=c(".%L"),g=c(":%S"),y=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),b=c("%b %d"),x=c("%B"),S=c("%Y");function _(I){return(l(I)<I?p:o(I)<I?g:s(I)<I?y:i(I)<I?m:n(I)<I?a(I)<I?v:b:e(I)<I?x:S)(I)}return u.invert=function(I){return new Date(f(I))},u.domain=function(I){return arguments.length?h(Array.from(I,Zie)):h().map(Jie)},u.ticks=function(I){var A=h();return r(A[0],A[A.length-1],I??10)},u.tickFormat=function(I,A){return A==null?_:c(A)},u.nice=function(I){var A=h();return(!I||typeof I.range!="function")&&(I=t(A[0],A[A.length-1],I??10)),I?h(RB(A,I)):u},u.copy=function(){return Wy(u,pj(r,t,e,n,a,i,s,o,l,c))},u}function Qie(){return bl.apply(pj(Kae,Xae,Zu,fj,Yx,Hy,uj,lj,Nh,KB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ese(){return bl.apply(pj(Vae,Gae,Qu,hj,Jx,Xx,dj,cj,Nh,XB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zx(){var r=0,t=1,e,n,a,i,s=Ws,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(a===0?.5:(f=(i(f)-e)*a,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([r,t]=f,e=i(r=+r),n=i(t=+t),a=e===n?0:1/(n-e),c):[r,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function u(f){return function(h){var p,g;return arguments.length?([p,g]=h,s=f(p,g),c):[s(0),s(1)]}}return c.range=u(pm),c.rangeRound=u(QN),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return i=f,e=f(r),n=f(t),a=e===n?0:1/(n-e),c}}function kf(r,t){return t.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function YB(){var r=jf(Zx()(Ws));return r.copy=function(){return kf(r,YB())},sd.apply(r,arguments)}function JB(){var r=nj(Zx()).domain([1,10]);return r.copy=function(){return kf(r,JB()).base(r.base())},sd.apply(r,arguments)}function ZB(){var r=aj(Zx());return r.copy=function(){return kf(r,ZB()).constant(r.constant())},sd.apply(r,arguments)}function mj(){var r=ij(Zx());return r.copy=function(){return kf(r,mj()).exponent(r.exponent())},sd.apply(r,arguments)}function tse(){return mj.apply(null,arguments).exponent(.5)}function QB(){var r=[],t=Ws;function e(n){if(n!=null&&!isNaN(n=+n))return t((qy(r,n,1)-1)/(r.length-1))}return e.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let a of n)a!=null&&!isNaN(a=+a)&&r.push(a);return r.sort(pf),e},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.range=function(){return r.map((n,a)=>t(a/(r.length-1)))},e.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Une(r,i/n))},e.copy=function(){return QB(t).domain(r)},sd.apply(e,arguments)}function Qx(){var r=0,t=.5,e=1,n=1,a,i,s,o,l,c=Ws,u,f=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-i)*(n*y<n*i?o:l),c(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([r,t,e]=y,a=u(r=+r),i=u(t=+t),s=u(e=+e),o=a===i?0:.5/(i-a),l=i===s?0:.5/(s-i),n=i<a?-1:1,p):[r,t,e]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(c=y,p):c};function g(y){return function(m){var v,b,x;return arguments.length?([v,b,x]=m,c=hae(y,[v,b,x]),p):[c(0),c(.5),c(1)]}}return p.range=g(pm),p.rangeRound=g(QN),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return u=y,a=y(r),i=y(t),s=y(e),o=a===i?0:.5/(i-a),l=i===s?0:.5/(s-i),n=i<a?-1:1,p}}function e$(){var r=jf(Qx()(Ws));return r.copy=function(){return kf(r,e$())},sd.apply(r,arguments)}function t$(){var r=nj(Qx()).domain([.1,1,10]);return r.copy=function(){return kf(r,t$()).base(r.base())},sd.apply(r,arguments)}function r$(){var r=aj(Qx());return r.copy=function(){return kf(r,r$()).constant(r.constant())},sd.apply(r,arguments)}function gj(){var r=ij(Qx());return r.copy=function(){return kf(r,gj()).exponent(r.exponent())},sd.apply(r,arguments)}function rse(){return gj.apply(null,arguments).exponent(.5)}const H9=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zg,scaleDiverging:e$,scaleDivergingLog:t$,scaleDivergingPow:gj,scaleDivergingSqrt:rse,scaleDivergingSymlog:r$,scaleIdentity:MB,scaleImplicit:z6,scaleLinear:bb,scaleLog:FB,scaleOrdinal:YN,scalePoint:kg,scalePow:sj,scaleQuantile:BB,scaleQuantize:$B,scaleRadial:LB,scaleSequential:YB,scaleSequentialLog:JB,scaleSequentialPow:mj,scaleSequentialQuantile:QB,scaleSequentialSqrt:tse,scaleSequentialSymlog:ZB,scaleSqrt:Fae,scaleSymlog:DB,scaleThreshold:UB,scaleTime:Qie,scaleUtc:ese,tickFormat:IB},Symbol.toStringTag,{value:"Module"}));var C3,V9;function n$(){if(V9)return C3;V9=1;var r=cm();function t(e,n,a){for(var i=-1,s=e.length;++i<s;){var o=e[i],l=n(o);if(l!=null&&(c===void 0?l===l&&!r(l):a(l,c)))var c=l,u=o}return u}return C3=t,C3}var P3,G9;function nse(){if(G9)return P3;G9=1;function r(t,e){return t>e}return P3=r,P3}var O3,K9;function ase(){if(K9)return O3;K9=1;var r=n$(),t=nse(),e=hm();function n(a){return a&&a.length?r(a,e,t):void 0}return O3=n,O3}var ise=ase();const cf=In(ise);var I3,X9;function sse(){if(X9)return I3;X9=1;function r(t,e){return t<e}return I3=r,I3}var M3,Y9;function ose(){if(Y9)return M3;Y9=1;var r=n$(),t=sse(),e=hm();function n(a){return a&&a.length?r(a,e,t):void 0}return M3=n,M3}var lse=ose();const e2=In(lse);var R3,J9;function cse(){if(J9)return R3;J9=1;var r=ON(),t=Nf(),e=dB(),n=xo();function a(i,s){var o=n(i)?r:e;return o(i,t(s,3))}return R3=a,R3}var F3,Z9;function use(){if(Z9)return F3;Z9=1;var r=cB(),t=cse();function e(n,a){return r(t(n,a),1)}return F3=e,F3}var dse=use();const fse=In(dse);var D3,Q9;function hse(){if(Q9)return D3;Q9=1;var r=HN();function t(e,n){return r(e,n)}return D3=t,D3}var pse=hse();const $p=In(pse);var mm=1e9,mse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vj,ga=!0,yl="[DecimalError] ",Ch=yl+"Invalid argument: ",yj=yl+"Exponent out of range: ",gm=Math.floor,hh=Math.pow,gse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qo,Ei=1e7,sa=7,a$=9007199254740991,Sb=gm(a$/sa),yr={};yr.absoluteValue=yr.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};yr.comparedTo=yr.cmp=function(r){var t,e,n,a,i=this;if(r=new i.constructor(r),i.s!==r.s)return i.s||-r.s;if(i.e!==r.e)return i.e>r.e^i.s<0?1:-1;for(n=i.d.length,a=r.d.length,t=0,e=n<a?n:a;t<e;++t)if(i.d[t]!==r.d[t])return i.d[t]>r.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};yr.decimalPlaces=yr.dp=function(){var r=this,t=r.d.length-1,e=(t-r.e)*sa;if(t=r.d[t],t)for(;t%10==0;t/=10)e--;return e<0?0:e};yr.dividedBy=yr.div=function(r){return Uu(this,new this.constructor(r))};yr.dividedToIntegerBy=yr.idiv=function(r){var t=this,e=t.constructor;return Xn(Uu(t,new e(r),0,1),e.precision)};yr.equals=yr.eq=function(r){return!this.cmp(r)};yr.exponent=function(){return Qa(this)};yr.greaterThan=yr.gt=function(r){return this.cmp(r)>0};yr.greaterThanOrEqualTo=yr.gte=function(r){return this.cmp(r)>=0};yr.isInteger=yr.isint=function(){return this.e>this.d.length-2};yr.isNegative=yr.isneg=function(){return this.s<0};yr.isPositive=yr.ispos=function(){return this.s>0};yr.isZero=function(){return this.s===0};yr.lessThan=yr.lt=function(r){return this.cmp(r)<0};yr.lessThanOrEqualTo=yr.lte=function(r){return this.cmp(r)<1};yr.logarithm=yr.log=function(r){var t,e=this,n=e.constructor,a=n.precision,i=a+5;if(r===void 0)r=new n(10);else if(r=new n(r),r.s<1||r.eq(qo))throw Error(yl+"NaN");if(e.s<1)throw Error(yl+(e.s?"NaN":"-Infinity"));return e.eq(qo)?new n(0):(ga=!1,t=Uu(ny(e,i),ny(r,i),i),ga=!0,Xn(t,a))};yr.minus=yr.sub=function(r){var t=this;return r=new t.constructor(r),t.s==r.s?o$(t,r):i$(t,(r.s=-r.s,r))};yr.modulo=yr.mod=function(r){var t,e=this,n=e.constructor,a=n.precision;if(r=new n(r),!r.s)throw Error(yl+"NaN");return e.s?(ga=!1,t=Uu(e,r,0,1).times(r),ga=!0,e.minus(t)):Xn(new n(e),a)};yr.naturalExponential=yr.exp=function(){return s$(this)};yr.naturalLogarithm=yr.ln=function(){return ny(this)};yr.negated=yr.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};yr.plus=yr.add=function(r){var t=this;return r=new t.constructor(r),t.s==r.s?i$(t,r):o$(t,(r.s=-r.s,r))};yr.precision=yr.sd=function(r){var t,e,n,a=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Ch+r);if(t=Qa(a)+1,n=a.d.length-1,e=n*sa+1,n=a.d[n],n){for(;n%10==0;n/=10)e--;for(n=a.d[0];n>=10;n/=10)e++}return r&&t>e?t:e};yr.squareRoot=yr.sqrt=function(){var r,t,e,n,a,i,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(yl+"NaN")}for(r=Qa(o),ga=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=Lc(o.d),(t.length+r)%2==0&&(t+="0"),a=Math.sqrt(t),r=gm((r+1)/2)-(r<0||r%2),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new l(t)):n=new l(a.toString()),e=l.precision,a=s=e+3;;)if(i=n,n=i.plus(Uu(o,i,s+2)).times(.5),Lc(i.d).slice(0,s)===(t=Lc(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Xn(i,e+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return ga=!0,Xn(n,e)};yr.times=yr.mul=function(r){var t,e,n,a,i,s,o,l,c,u=this,f=u.constructor,h=u.d,p=(r=new f(r)).d;if(!u.s||!r.s)return new f(0);for(r.s*=u.s,e=u.e+r.e,l=h.length,c=p.length,l<c&&(i=h,h=p,p=i,s=l,l=c,c=s),i=[],s=l+c,n=s;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,a=l+n;a>n;)o=i[a]+p[n]*h[a-n-1]+t,i[a--]=o%Ei|0,t=o/Ei|0;i[a]=(i[a]+t)%Ei|0}for(;!i[--s];)i.pop();return t?++e:i.shift(),r.d=i,r.e=e,ga?Xn(r,f.precision):r};yr.toDecimalPlaces=yr.todp=function(r,t){var e=this,n=e.constructor;return e=new n(e),r===void 0?e:(Gc(r,0,mm),t===void 0?t=n.rounding:Gc(t,0,8),Xn(e,r+Qa(e)+1,t))};yr.toExponential=function(r,t){var e,n=this,a=n.constructor;return r===void 0?e=Fh(n,!0):(Gc(r,0,mm),t===void 0?t=a.rounding:Gc(t,0,8),n=Xn(new a(n),r+1,t),e=Fh(n,!0,r+1)),e};yr.toFixed=function(r,t){var e,n,a=this,i=a.constructor;return r===void 0?Fh(a):(Gc(r,0,mm),t===void 0?t=i.rounding:Gc(t,0,8),n=Xn(new i(a),r+Qa(a)+1,t),e=Fh(n.abs(),!1,r+Qa(n)+1),a.isneg()&&!a.isZero()?"-"+e:e)};yr.toInteger=yr.toint=function(){var r=this,t=r.constructor;return Xn(new t(r),Qa(r)+1,t.rounding)};yr.toNumber=function(){return+this};yr.toPower=yr.pow=function(r){var t,e,n,a,i,s,o=this,l=o.constructor,c=12,u=+(r=new l(r));if(!r.s)return new l(qo);if(o=new l(o),!o.s){if(r.s<1)throw Error(yl+"Infinity");return o}if(o.eq(qo))return o;if(n=l.precision,r.eq(qo))return Xn(o,n);if(t=r.e,e=r.d.length-1,s=t>=e,i=o.s,s){if((e=u<0?-u:u)<=a$){for(a=new l(qo),t=Math.ceil(n/sa+4),ga=!1;e%2&&(a=a.times(o),tO(a.d,t)),e=gm(e/2),e!==0;)o=o.times(o),tO(o.d,t);return ga=!0,r.s<0?new l(qo).div(a):Xn(a,n)}}else if(i<0)throw Error(yl+"NaN");return i=i<0&&r.d[Math.max(t,e)]&1?-1:1,o.s=1,ga=!1,a=r.times(ny(o,n+c)),ga=!0,a=s$(a),a.s=i,a};yr.toPrecision=function(r,t){var e,n,a=this,i=a.constructor;return r===void 0?(e=Qa(a),n=Fh(a,e<=i.toExpNeg||e>=i.toExpPos)):(Gc(r,1,mm),t===void 0?t=i.rounding:Gc(t,0,8),a=Xn(new i(a),r,t),e=Qa(a),n=Fh(a,r<=e||e<=i.toExpNeg,r)),n};yr.toSignificantDigits=yr.tosd=function(r,t){var e=this,n=e.constructor;return r===void 0?(r=n.precision,t=n.rounding):(Gc(r,1,mm),t===void 0?t=n.rounding:Gc(t,0,8)),Xn(new n(e),r,t)};yr.toString=yr.valueOf=yr.val=yr.toJSON=yr[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,t=Qa(r),e=r.constructor;return Fh(r,t<=e.toExpNeg||t>=e.toExpPos)};function i$(r,t){var e,n,a,i,s,o,l,c,u=r.constructor,f=u.precision;if(!r.s||!t.s)return t.s||(t=new u(r)),ga?Xn(t,f):t;if(l=r.d,c=t.d,s=r.e,a=t.e,l=l.slice(),i=s-a,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,a=s,o=l.length),s=Math.ceil(f/sa),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Ei|0,l[i]%=Ei;for(e&&(l.unshift(e),++a),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=a,ga?Xn(t,f):t}function Gc(r,t,e){if(r!==~~r||r<t||r>e)throw Error(Ch+r)}function Lc(r){var t,e,n,a=r.length-1,i="",s=r[0];if(a>0){for(i+=s,t=1;t<a;t++)n=r[t]+"",e=sa-n.length,e&&(i+=ef(e)),i+=n;s=r[t],n=s+"",e=sa-n.length,e&&(i+=ef(e))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Uu=(function(){function r(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Ei|0,s=i/Ei|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,l;if(i!=s)l=i>s?1:-1;else for(o=l=0;o<i;o++)if(n[o]!=a[o]){l=n[o]>a[o]?1:-1;break}return l}function e(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Ei+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,l,c,u,f,h,p,g,y,m,v,b,x,S,_,I,A,O,M=n.constructor,z=n.s==a.s?1:-1,U=n.d,D=a.d;if(!n.s)return new M(n);if(!a.s)throw Error(yl+"Division by zero");for(l=n.e-a.e,A=D.length,_=U.length,p=new M(z),g=p.d=[],c=0;D[c]==(U[c]||0);)++c;if(D[c]>(U[c]||0)&&--l,i==null?b=i=M.precision:s?b=i+(Qa(n)-Qa(a))+1:b=i,b<0)return new M(0);if(b=b/sa+2|0,c=0,A==1)for(u=0,D=D[0],b++;(c<_||u)&&b--;c++)x=u*Ei+(U[c]||0),g[c]=x/D|0,u=x%D|0;else{for(u=Ei/(D[0]+1)|0,u>1&&(D=r(D,u),U=r(U,u),A=D.length,_=U.length),S=A,y=U.slice(0,A),m=y.length;m<A;)y[m++]=0;O=D.slice(),O.unshift(0),I=D[0],D[1]>=Ei/2&&++I;do u=0,o=t(D,y,A,m),o<0?(v=y[0],A!=m&&(v=v*Ei+(y[1]||0)),u=v/I|0,u>1?(u>=Ei&&(u=Ei-1),f=r(D,u),h=f.length,m=y.length,o=t(f,y,h,m),o==1&&(u--,e(f,A<h?O:D,h))):(u==0&&(o=u=1),f=D.slice()),h=f.length,h<m&&f.unshift(0),e(y,f,m),o==-1&&(m=y.length,o=t(D,y,A,m),o<1&&(u++,e(y,A<m?O:D,m))),m=y.length):o===0&&(u++,y=[0]),g[c++]=u,o&&y[0]?y[m++]=U[S]||0:(y=[U[S]],m=1);while((S++<_||y[0]!==void 0)&&b--)}return g[0]||g.shift(),p.e=l,Xn(p,s?i+Qa(p)+1:i)}})();function s$(r,t){var e,n,a,i,s,o,l=0,c=0,u=r.constructor,f=u.precision;if(Qa(r)>16)throw Error(yj+Qa(r));if(!r.s)return new u(qo);for(ga=!1,o=f,s=new u(.03125);r.abs().gte(.1);)r=r.times(s),c+=5;for(n=Math.log(hh(2,c))/Math.LN10*2+5|0,o+=n,e=a=i=new u(qo),u.precision=o;;){if(a=Xn(a.times(r),o),e=e.times(++l),s=i.plus(Uu(a,e,o)),Lc(s.d).slice(0,o)===Lc(i.d).slice(0,o)){for(;c--;)i=Xn(i.times(i),o);return u.precision=f,t==null?(ga=!0,Xn(i,f)):i}i=s}}function Qa(r){for(var t=r.e*sa,e=r.d[0];e>=10;e/=10)t++;return t}function L3(r,t,e){if(t>r.LN10.sd())throw ga=!0,e&&(r.precision=e),Error(yl+"LN10 precision limit exceeded");return Xn(new r(r.LN10),t)}function ef(r){for(var t="";r--;)t+="0";return t}function ny(r,t){var e,n,a,i,s,o,l,c,u,f=1,h=10,p=r,g=p.d,y=p.constructor,m=y.precision;if(p.s<1)throw Error(yl+(p.s?"NaN":"-Infinity"));if(p.eq(qo))return new y(0);if(t==null?(ga=!1,c=m):c=t,p.eq(10))return t==null&&(ga=!0),L3(y,c);if(c+=h,y.precision=c,e=Lc(g),n=e.charAt(0),i=Qa(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&e.charAt(1)>3;)p=p.times(r),e=Lc(p.d),n=e.charAt(0),f++;i=Qa(p),n>1?(p=new y("0."+e),i++):p=new y(n+"."+e.slice(1))}else return l=L3(y,c+2,m).times(i+""),p=ny(new y(n+"."+e.slice(1)),c-h).plus(l),y.precision=m,t==null?(ga=!0,Xn(p,m)):p;for(o=s=p=Uu(p.minus(qo),p.plus(qo),c),u=Xn(p.times(p),c),a=3;;){if(s=Xn(s.times(u),c),l=o.plus(Uu(s,new y(a),c)),Lc(l.d).slice(0,c)===Lc(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus(L3(y,c+2,m).times(i+""))),o=Uu(o,new y(f),c),y.precision=m,t==null?(ga=!0,Xn(o,m)):o;o=l,a+=2}}function eO(r,t){var e,n,a;for((e=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(e<0&&(e=n),e+=+t.slice(n+1),t=t.substring(0,n)):e<0&&(e=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,e=e-n-1,r.e=gm(e/sa),r.d=[],n=(e+1)%sa,e<0&&(n+=sa),n<a){for(n&&r.d.push(+t.slice(0,n)),a-=sa;n<a;)r.d.push(+t.slice(n,n+=sa));t=t.slice(n),n=sa-t.length}else n-=a;for(;n--;)t+="0";if(r.d.push(+t),ga&&(r.e>Sb||r.e<-Sb))throw Error(yj+e)}else r.s=0,r.e=0,r.d=[0];return r}function Xn(r,t,e){var n,a,i,s,o,l,c,u,f=r.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=sa,a=t,c=f[u=0];else{if(u=Math.ceil((n+1)/sa),i=f.length,u>=i)return r;for(c=i=f[u],s=1;i>=10;i/=10)s++;n%=sa,a=n-sa+s}if(e!==void 0&&(i=hh(10,s-a-1),o=c/i%10|0,l=t<0||f[u+1]!==void 0||c%i,l=e<4?(o||l)&&(e==0||e==(r.s<0?3:2)):o>5||o==5&&(e==4||l||e==6&&(n>0?a>0?c/hh(10,s-a):0:f[u-1])%10&1||e==(r.s<0?8:7))),t<1||!f[0])return l?(i=Qa(r),f.length=1,t=t-i-1,f[0]=hh(10,(sa-t%sa)%sa),r.e=gm(-t/sa)||0):(f.length=1,f[0]=r.e=r.s=0),r;if(n==0?(f.length=u,i=1,u--):(f.length=u+1,i=hh(10,sa-n),f[u]=a>0?(c/hh(10,s-a)%hh(10,a)|0)*i:0),l)for(;;)if(u==0){(f[0]+=i)==Ei&&(f[0]=1,++r.e);break}else{if(f[u]+=i,f[u]!=Ei)break;f[u--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(ga&&(r.e>Sb||r.e<-Sb))throw Error(yj+Qa(r));return r}function o$(r,t){var e,n,a,i,s,o,l,c,u,f,h=r.constructor,p=h.precision;if(!r.s||!t.s)return t.s?t.s=-t.s:t=new h(r),ga?Xn(t,p):t;if(l=r.d,f=t.d,n=t.e,c=r.e,l=l.slice(),s=c-n,s){for(u=s<0,u?(e=l,s=-s,o=f.length):(e=f,n=c,o=l.length),a=Math.max(Math.ceil(p/sa),o)+2,s>a&&(s=a,e.length=1),e.reverse(),a=s;a--;)e.push(0);e.reverse()}else{for(a=l.length,o=f.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(l[a]!=f[a]){u=l[a]<f[a];break}s=0}for(u&&(e=l,l=f,f=e,t.s=-t.s),o=l.length,a=f.length-o;a>0;--a)l[o++]=0;for(a=f.length;a>s;){if(l[--a]<f[a]){for(i=a;i&&l[--i]===0;)l[i]=Ei-1;--l[i],l[a]+=Ei}l[a]-=f[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,ga?Xn(t,p):t):new h(0)}function Fh(r,t,e){var n,a=Qa(r),i=Lc(r.d),s=i.length;return t?(e&&(n=e-s)>0?i=i.charAt(0)+"."+i.slice(1)+ef(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ef(-a-1)+i,e&&(n=e-s)>0&&(i+=ef(n))):a>=s?(i+=ef(a+1-s),e&&(n=e-a-1)>0&&(i=i+"."+ef(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),e&&(n=e-s)>0&&(a+1===s&&(i+="."),i+=ef(n))),r.s<0?"-"+i:i}function tO(r,t){if(r.length>t)return r.length=t,!0}function l$(r){var t,e,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ch+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return eO(s,i.toString())}else if(typeof i!="string")throw Error(Ch+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,gse.test(i))eO(s,i);else throw Error(Ch+i)}if(a.prototype=yr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=l$,a.config=a.set=yse,r===void 0&&(r={}),r)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)r.hasOwnProperty(e=n[t++])||(r[e]=this[e]);return a.config(r),a}function yse(r){if(!r||typeof r!="object")throw Error(yl+"Object expected");var t,e,n,a=["precision",1,mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=r[e=a[t]])!==void 0)if(gm(n)===n&&n>=a[t+1]&&n<=a[t+2])this[e]=n;else throw Error(Ch+e+": "+n);if((n=r[e="LN10"])!==void 0)if(n==Math.LN10)this[e]=new this(n);else throw Error(Ch+e+": "+n);return this}var vj=l$(mse);qo=new vj(1);const qn=vj;function vse(r){return _se(r)||wse(r)||xse(r)||bse()}function bse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xse(r,t){if(r){if(typeof r=="string")return G6(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return G6(r,t)}}function wse(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function _se(r){if(Array.isArray(r))return G6(r)}function G6(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var Sse=function(t){return t},c$={},u$=function(t){return t===c$},rO=function(t){return function e(){return arguments.length===0||arguments.length===1&&u$(arguments.length<=0?void 0:arguments[0])?e:t.apply(void 0,arguments)}},Nse=function r(t,e){return t===1?e:rO(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(o){return o!==c$}).length;return s>=t?e.apply(void 0,a):r(t-s,rO(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=a.map(function(f){return u$(f)?l.shift():f});return e.apply(void 0,vse(u).concat(l))}))})},t2=function(t){return Nse(t.length,t)},K6=function(t,e){for(var n=[],a=t;a<e;++a)n[a-t]=a;return n},jse=t2(function(r,t){return Array.isArray(t)?t.map(r):Object.keys(t).map(function(e){return t[e]}).map(r)}),kse=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)return Sse;var a=e.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(o,l){return l(o)},i.apply(void 0,arguments))}},X6=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},d$=function(t){var e=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return e&&i.every(function(o,l){return o===e[l]})||(e=i,n=t.apply(void 0,i)),n}};function Ese(r){var t;return r===0?t=1:t=Math.floor(new qn(r).abs().log(10).toNumber())+1,t}function Ase(r,t,e){for(var n=new qn(r),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(e),a++;return i}var Tse=t2(function(r,t,e){var n=+r,a=+t;return n+e*(a-n)}),Cse=t2(function(r,t,e){var n=t-+r;return n=n||1/0,(e-r)/n}),Pse=t2(function(r,t,e){var n=t-+r;return n=n||1/0,Math.max(0,Math.min(1,(e-r)/n))});const r2={rangeStep:Ase,getDigitCount:Ese,interpolateNumber:Tse,uninterpolateNumber:Cse,uninterpolateTruncation:Pse};function Y6(r){return Mse(r)||Ise(r)||f$(r)||Ose()}function Ose(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ise(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function Mse(r){if(Array.isArray(r))return J6(r)}function ay(r,t){return Dse(r)||Fse(r,t)||f$(r,t)||Rse()}function Rse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f$(r,t){if(r){if(typeof r=="string")return J6(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return J6(r,t)}}function J6(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Fse(r,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var e=[],n=!0,a=!1,i=void 0;try{for(var s=r[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(e.push(o.value),!(t&&e.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return e}}function Dse(r){if(Array.isArray(r))return r}function h$(r){var t=ay(r,2),e=t[0],n=t[1],a=e,i=n;return e>n&&(a=n,i=e),[a,i]}function p$(r,t,e){if(r.lte(0))return new qn(0);var n=r2.getDigitCount(r.toNumber()),a=new qn(10).pow(n),i=r.div(a),s=n!==1?.05:.1,o=new qn(Math.ceil(i.div(s).toNumber())).add(e).mul(s),l=o.mul(a);return t?l:new qn(Math.ceil(l))}function Lse(r,t,e){var n=1,a=new qn(r);if(!a.isint()&&e){var i=Math.abs(r);i<1?(n=new qn(10).pow(r2.getDigitCount(r)-1),a=new qn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new qn(Math.floor(r)))}else r===0?a=new qn(Math.floor((t-1)/2)):e||(a=new qn(Math.floor(r)));var s=Math.floor((t-1)/2),o=kse(jse(function(l){return a.add(new qn(l-s).mul(n)).toNumber()}),K6);return o(0,t)}function m$(r,t,e,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-r)/(e-1)))return{step:new qn(0),tickMin:new qn(0),tickMax:new qn(0)};var i=p$(new qn(t).sub(r).div(e-1),n,a),s;r<=0&&t>=0?s=new qn(0):(s=new qn(r).add(t).div(2),s=s.sub(new qn(s).mod(i)));var o=Math.ceil(s.sub(r).div(i).toNumber()),l=Math.ceil(new qn(t).sub(s).div(i).toNumber()),c=o+l+1;return c>e?m$(r,t,e,n,a+1):(c<e&&(l=t>0?l+(e-c):l,o=t>0?o:o+(e-c)),{step:i,tickMin:s.sub(new qn(o).mul(i)),tickMax:s.add(new qn(l).mul(i))})}function Bse(r){var t=ay(r,2),e=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),o=h$([e,n]),l=ay(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(Y6(K6(0,a-1).map(function(){return 1/0}))):[].concat(Y6(K6(0,a-1).map(function(){return-1/0})),[u]);return e>n?X6(f):f}if(c===u)return Lse(c,a,i);var h=m$(c,u,s,i),p=h.step,g=h.tickMin,y=h.tickMax,m=r2.rangeStep(g,y.add(new qn(.1).mul(p)),p);return e>n?X6(m):m}function $se(r,t){var e=ay(r,2),n=e[0],a=e[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=h$([n,a]),o=ay(s,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[n,a];if(l===c)return[l];var u=Math.max(t,2),f=p$(new qn(c).sub(l).div(u-1),i,0),h=[].concat(Y6(r2.rangeStep(new qn(l),new qn(c).sub(new qn(.99).mul(f)),f)),[c]);return n>a?X6(h):h}var Use=d$(Bse),qse=d$($se),zse="Invariant failed";function Dh(r,t){throw new Error(zse)}var Wse=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Up(r){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(r)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Nb.apply(this,arguments)}function Hse(r,t){return Xse(r)||Kse(r,t)||Gse(r,t)||Vse()}function Vse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gse(r,t){if(r){if(typeof r=="string")return nO(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nO(r,t)}}function nO(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Kse(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Xse(r){if(Array.isArray(r))return r}function Yse(r,t){if(r==null)return{};var e=Jse(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Jse(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Zse(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Qse(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,v$(n.key),n)}}function eoe(r,t,e){return t&&Qse(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function toe(r,t,e){return t=jb(t),roe(r,g$()?Reflect.construct(t,e||[],jb(r).constructor):t.apply(r,e))}function roe(r,t){if(t&&(Up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return noe(r)}function noe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function g$(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g$=function(){return!!r})()}function jb(r){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jb(r)}function aoe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Z6(r,t)}function Z6(r,t){return Z6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z6(r,t)}function y$(r,t,e){return t=v$(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function v$(r){var t=ioe(r,"string");return Up(t)=="symbol"?t:t+""}function ioe(r,t){if(Up(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Vy=(function(r){function t(){return Zse(this,t),toe(this,t,arguments)}return aoe(t,r),eoe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,o=n.dataKey,l=n.data,c=n.dataPointFormatter,u=n.xAxis,f=n.yAxis,h=Yse(n,Wse),p=tn(h,!1);this.props.direction==="x"&&u.type!=="number"&&Dh();var g=l.map(function(y){var m=c(y,o),v=m.x,b=m.y,x=m.value,S=m.errorVal;if(!S)return null;var _=[],I,A;if(Array.isArray(S)){var O=Hse(S,2);I=O[0],A=O[1]}else I=A=S;if(i==="vertical"){var M=u.scale,z=b+a,U=z+s,D=z-s,T=M(x-I),R=M(x+A);_.push({x1:R,y1:U,x2:R,y2:D}),_.push({x1:T,y1:z,x2:R,y2:z}),_.push({x1:T,y1:U,x2:T,y2:D})}else if(i==="horizontal"){var C=f.scale,N=v+a,E=N-s,k=N+s,P=C(x-I),q=C(x+A);_.push({x1:E,y1:q,x2:k,y2:q}),_.push({x1:N,y1:P,x2:N,y2:q}),_.push({x1:E,y1:P,x2:k,y2:P})}return Je.createElement(ta,Nb({className:"recharts-errorBar",key:"bar-".concat(_.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},p),_.map(function(H){return Je.createElement("line",Nb({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return Je.createElement(ta,{className:"recharts-errorBars"},g)}}])})(Je.Component);y$(Vy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});y$(Vy,"displayName","ErrorBar");function iy(r){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iy(r)}function aO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function nh(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(e),!0).forEach(function(n){soe(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):aO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function soe(r,t,e){return t=ooe(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function ooe(r){var t=loe(r,"string");return iy(t)=="symbol"?t:t+""}function loe(r,t){if(iy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(iy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var b$=function(t){var e=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=Do(e,$u);if(!s)return null;var o=$u.defaultProps,l=o!==void 0?nh(nh({},o),s.props):{},c;return s.props&&s.props.payload?c=s.props&&s.props.payload:i==="children"?c=(n||[]).reduce(function(u,f){var h=f.item,p=f.props,g=p.sectors||p.data||[];return u.concat(g.map(function(y){return{type:s.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(n||[]).map(function(u){var f=u.item,h=f.type.defaultProps,p=h!==void 0?nh(nh({},h),f.props):{},g=p.dataKey,y=p.name,m=p.legendType,v=p.hide;return{inactive:v,dataKey:g,type:l.iconType||m||"square",color:bj(f),value:y||g,payload:p}}),nh(nh(nh({},l),$u.getWithHeight(s,a)),{},{payload:c,item:s})};function sy(r){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(r)}function iO(r){return foe(r)||doe(r)||uoe(r)||coe()}function coe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uoe(r,t){if(r){if(typeof r=="string")return Q6(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Q6(r,t)}}function doe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function foe(r){if(Array.isArray(r))return Q6(r)}function Q6(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function sO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Pa(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(e),!0).forEach(function(n){up(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):sO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function up(r,t,e){return t=hoe(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function hoe(r){var t=poe(r,"string");return sy(t)=="symbol"?t:t+""}function poe(r,t){if(sy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(sy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Gs(r,t,e){return nn(r)||nn(t)?e:di(t)?hl(r,t,e):Qr(t)?t(r):e}function Eg(r,t,e,n){var a=fse(r,function(o){return Gs(o,t)});if(e==="number"){var i=a.filter(function(o){return ir(o)||parseFloat(o)});return i.length?[e2(i),cf(i)]:[1/0,-1/0]}var s=n?a.filter(function(o){return!nn(o)}):a;return s.map(function(o){return di(o)||o instanceof Date?o:""})}var moe=function(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,o=(e=n==null?void 0:n.length)!==null&&e!==void 0?e:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,c=0;c<o;c++){var u=c>0?a[c-1].coordinate:a[o-1].coordinate,f=a[c].coordinate,h=c>=o-1?a[0].coordinate:a[c+1].coordinate,p=void 0;if(ac(f-u)!==ac(h-f)){var g=[];if(ac(h-f)===ac(l[1]-l[0])){p=h;var y=f+l[1]-l[0];g[0]=Math.min(y,(y+u)/2),g[1]=Math.max(y,(y+u)/2)}else{p=u;var m=h+l[1]-l[0];g[0]=Math.min(f,(m+f)/2),g[1]=Math.max(f,(m+f)/2)}var v=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>v[0]&&t<=v[1]||t>=g[0]&&t<=g[1]){s=a[c].index;break}}else{var b=Math.min(u,h),x=Math.max(u,h);if(t>(b+f)/2&&t<=(x+f)/2){s=a[c].index;break}}}else for(var S=0;S<o;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<o-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===o-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},bj=function(t){var e,n=t,a=n.type.displayName,i=(e=t.type)!==null&&e!==void 0&&e.defaultProps?Pa(Pa({},t.type.defaultProps),t.props):t.props,s=i.stroke,o=i.fill,l;switch(a){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},goe=function(t){var e=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},o=Object.keys(i),l=0,c=o.length;l<c;l++)for(var u=i[o[l]].stackGroups,f=Object.keys(u),h=0,p=f.length;h<p;h++){var g=u[f[h]],y=g.items,m=g.cateAxisId,v=y.filter(function(A){return Lu(A.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,x=b!==void 0?Pa(Pa({},b),v[0].props):v[0].props,S=x.barSize,_=x[m];s[_]||(s[_]=[]);var I=nn(S)?e:S;s[_].push({item:v[0],stackList:v.slice(1),barSize:nn(I)?void 0:Rh(I,n,0)})}}return s},yoe=function(t){var e=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,o=t.maxBarSize,l=s.length;if(l<1)return null;var c=Rh(e,a,0,!0),u,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=a/l,g=s.reduce(function(S,_){return S+_.barSize||0},0);g+=(l-1)*c,g>=a&&(g-=(l-1)*c,c=0),g>=a&&p>0&&(h=!0,p*=.9,g=l*p);var y=(a-g)/2>>0,m={offset:y-c,size:0};u=s.reduce(function(S,_){var I={item:_.item,position:{offset:m.offset+m.size+c,size:h?p:_.barSize}},A=[].concat(iO(S),[I]);return m=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(O){A.push({item:O,position:m})}),A},f)}else{var v=Rh(n,a,0,!0);a-2*v-(l-1)*c<=0&&(c=0);var b=(a-2*v-(l-1)*c)/l;b>1&&(b>>=0);var x=o===+o?Math.min(b,o):b;u=s.reduce(function(S,_,I){var A=[].concat(iO(S),[{item:_.item,position:{offset:v+(b+c)*I+(b-x)/2,size:x}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(O){A.push({item:O,position:A[A.length-1].position})}),A},f)}return u},voe=function(t,e,n,a){var i=n.children,s=n.width,o=n.margin,l=s-(o.left||0)-(o.right||0),c=b$({children:i,legendWidth:l});if(c){var u=a||{},f=u.width,h=u.height,p=c.align,g=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&g==="middle")&&p!=="center"&&ir(t[p]))return Pa(Pa({},t),{},up({},p,t[p]+(f||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&g!=="middle"&&ir(t[g]))return Pa(Pa({},t),{},up({},g,t[g]+(h||0)))}return t},boe=function(t,e,n){return nn(e)?!0:t==="horizontal"?e==="yAxis":t==="vertical"||n==="x"?e==="xAxis":n==="y"?e==="yAxis":!0},x$=function(t,e,n,a,i){var s=e.props.children,o=pl(s,Vy).filter(function(c){return boe(a,i,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return t.reduce(function(c,u){var f=Gs(u,n);if(nn(f))return c;var h=Array.isArray(f)?[e2(f),cf(f)]:[f,f],p=l.reduce(function(g,y){var m=Gs(u,y,0),v=h[0]-Math.abs(Array.isArray(m)?m[0]:m),b=h[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},xoe=function(t,e,n,a,i){var s=e.map(function(o){return x$(t,o,n,i,a)}).filter(function(o){return!nn(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},w$=function(t,e,n,a,i){var s=e.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&x$(t,l,c,a)||Eg(t,c,n,i)});if(n==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)o[c[u]]||(o[c[u]]=!0,l.push(c[u]));return l},[])},_$=function(t,e){return t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis"},S$=function(t,e,n,a){if(a)return t.map(function(l){return l.coordinate});var i,s,o=t.map(function(l){return l.coordinate===e&&(i=!0),l.coordinate===n&&(s=!0),l.coordinate});return i||o.push(e),s||o.push(n),o},Fu=function(t,e,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,o=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,c=(e||n)&&s==="category"&&a.bandwidth?a.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ac(o[0]-o[1])*2*c:c,e&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+c,value:f,offset:c}});return u.filter(function(f){return!dm(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+c,value:f,index:h,offset:c}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+c,value:f,offset:c}}):a.domain().map(function(f,h){return{coordinate:a(f)+c,value:i?i[f]:f,index:h,offset:c}})},B3=new WeakMap,nv=function(t,e){if(typeof e!="function")return t;B3.has(t)||B3.set(t,new WeakMap);var n=B3.get(t);if(n.has(e))return n.get(e);var a=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)};return n.set(e,a),a},woe=function(t,e,n){var a=t.scale,i=t.type,s=t.layout,o=t.axisType;if(a==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Zg(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:bb(),realScaleType:"linear"}:i==="category"&&e&&(e.indexOf("LineChart")>=0||e.indexOf("AreaChart")>=0||e.indexOf("ComposedChart")>=0&&!n)?{scale:kg(),realScaleType:"point"}:i==="category"?{scale:Zg(),realScaleType:"band"}:{scale:bb(),realScaleType:"linear"};if(Mh(a)){var l="scale".concat(Ux(a));return{scale:(H9[l]||kg)(),realScaleType:H9[l]?l:"point"}}return Qr(a)?{scale:a}:{scale:kg(),realScaleType:"point"}},oO=1e-4,_oe=function(t){var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,a=t.range(),i=Math.min(a[0],a[1])-oO,s=Math.max(a[0],a[1])+oO,o=t(e[0]),l=t(e[n-1]);(o<i||o>s||l<i||l>s)&&t.domain([e[0],e[n-1]])}},Soe=function(t,e){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===e)return t[n].position;return null},Noe=function(t,e){if(!e||e.length!==2||!ir(e[0])||!ir(e[1]))return t;var n=Math.min(e[0],e[1]),a=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!ir(t[0])||t[0]<n)&&(i[0]=n),(!ir(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},joe=function(t){var e=t.length;if(!(e<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,o=0;o<e;++o){var l=dm(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1])}},koe=function(t){var e=t.length;if(!(e<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<e;++s){var o=dm(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},Eoe={sign:joe,expand:uee,none:Op,silhouette:dee,wiggle:fee,positive:koe},Aoe=function(t,e,n){var a=e.map(function(o){return o.props.dataKey}),i=Eoe[n],s=cee().keys(a).value(function(o,l){return+Gs(o,l,0)}).order(T6).offset(i);return s(t)},Toe=function(t,e,n,a,i,s){if(!t)return null;var o=s?e.reverse():e,l={},c=o.reduce(function(f,h){var p,g=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Pa(Pa({},h.type.defaultProps),h.props):h.props,y=g.stackId,m=g.hide;if(m)return f;var v=g[n],b=f[v]||{hasStack:!1,stackGroups:{}};if(di(y)){var x=b.stackGroups[y]||{numericAxisId:n,cateAxisId:a,items:[]};x.items.push(h),b.hasStack=!0,b.stackGroups[y]=x}else b.stackGroups[fm("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Pa(Pa({},f),{},up({},v,b))},l),u={};return Object.keys(c).reduce(function(f,h){var p=c[h];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,m){var v=p.stackGroups[m];return Pa(Pa({},y),{},up({},m,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:Aoe(t,v.items,i)}))},g)}return Pa(Pa({},f),{},up({},h,p))},u)},Coe=function(t,e){var n=e.realScaleType,a=e.type,i=e.tickCount,s=e.originalDomain,o=e.allowDecimals,l=n||e.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=t.domain();if(!c.length)return null;var u=Use(c,i,o);return t.domain([e2(u),cf(u)]),{niceTicks:u}}if(i&&a==="number"){var f=t.domain(),h=qse(f,i,o);return{niceTicks:h}}return null};function kb(r){var t=r.axis,e=r.ticks,n=r.bandSize,a=r.entry,i=r.index,s=r.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!nn(a[t.dataKey])){var o=Qv(e,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return e[i]?e[i].coordinate+n/2:null}var l=Gs(a,nn(s)?t.dataKey:s);return nn(l)?null:t.scale(l)}var lO=function(t){var e=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,o=t.index;if(e.type==="category")return n[o]?n[o].coordinate+a:null;var l=Gs(s,e.dataKey,e.domain[o]);return nn(l)?null:e.scale(l)-i/2+a},Poe=function(t){var e=t.numericAxis,n=e.scale.domain();if(e.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Ooe=function(t,e){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Pa(Pa({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(di(i)){var s=e[i];if(s){var o=s.items.indexOf(t);return o>=0?s.stackedData[o]:null}}return null},Ioe=function(t){return t.reduce(function(e,n){return[e2(n.concat([e[0]]).filter(ir)),cf(n.concat([e[1]]).filter(ir))]},[1/0,-1/0])},N$=function(t,e,n){return Object.keys(t).reduce(function(a,i){var s=t[i],o=s.stackedData,l=o.reduce(function(c,u){var f=Ioe(u.slice(e,n+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},cO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e8=function(t,e,n){if(Qr(t))return t(e,n);if(!Array.isArray(t))return e;var a=[];if(ir(t[0]))a[0]=n?t[0]:Math.min(t[0],e[0]);else if(cO.test(t[0])){var i=+cO.exec(t[0])[1];a[0]=e[0]-i}else Qr(t[0])?a[0]=t[0](e[0]):a[0]=e[0];if(ir(t[1]))a[1]=n?t[1]:Math.max(t[1],e[1]);else if(uO.test(t[1])){var s=+uO.exec(t[1])[1];a[1]=e[1]+s}else Qr(t[1])?a[1]=t[1](e[1]):a[1]=e[1];return a},Eb=function(t,e,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&e&&e.length>=2){for(var i=GN(e,function(f){return f.coordinate}),s=1/0,o=1,l=i.length;o<l;o++){var c=i[o],u=i[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},dO=function(t,e,n){return!t||!t.length||$p(t,hl(n,"type.defaultProps.domain"))?e:t},j$=function(t,e){var n=t.type.defaultProps?Pa(Pa({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,o=n.formatter,l=n.tooltipType,c=n.chartType,u=n.hide;return Pa(Pa({},tn(t,!1)),{},{dataKey:a,unit:s,formatter:o,name:i||a,color:bj(t),value:Gs(e,a),type:l,payload:e,chartType:c,hide:u})};function oy(r){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(r)}function fO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function hO(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(e),!0).forEach(function(n){Moe(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):fO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Moe(r,t,e){return t=Roe(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Roe(r){var t=Foe(r,"string");return oy(t)=="symbol"?t:t+""}function Foe(r,t){if(oy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(oy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Ab=Math.PI/180,Doe=function(t){return t*180/Math.PI},Zi=function(t,e,n,a){return{x:t+Math.cos(-Ab*a)*n,y:e+Math.sin(-Ab*a)*n}},Loe=function(t,e){var n=t.x,a=t.y,i=e.x,s=e.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},Boe=function(t,e){var n=t.x,a=t.y,i=e.cx,s=e.cy,o=Loe({x:n,y:a},{x:i,y:s});if(o<=0)return{radius:o};var l=(n-i)/o,c=Math.acos(l);return a>s&&(c=2*Math.PI-c),{radius:o,angle:Doe(c),angleInRadian:c}},$oe=function(t){var e=t.startAngle,n=t.endAngle,a=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:e-s*360,endAngle:n-s*360}},Uoe=function(t,e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return t+o*360},pO=function(t,e){var n=t.x,a=t.y,i=Boe({x:n,y:a},e),s=i.radius,o=i.angle,l=e.innerRadius,c=e.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=$oe(e),f=u.startAngle,h=u.endAngle,p=o,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?hO(hO({},e),{},{radius:s,angle:Uoe(p,e)}):null};function ly(r){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ly(r)}var qoe=["offset"];function zoe(r){return Goe(r)||Voe(r)||Hoe(r)||Woe()}function Woe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hoe(r,t){if(r){if(typeof r=="string")return t8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return t8(r,t)}}function Voe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Goe(r){if(Array.isArray(r))return t8(r)}function t8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Koe(r,t){if(r==null)return{};var e=Xoe(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Xoe(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function mO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function li(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(e),!0).forEach(function(n){Yoe(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):mO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Yoe(r,t,e){return t=Joe(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Joe(r){var t=Zoe(r,"string");return ly(t)=="symbol"?t:t+""}function Zoe(r,t){if(ly(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(ly(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function cy(){return cy=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},cy.apply(this,arguments)}var Qoe=function(t){var e=t.value,n=t.formatter,a=nn(t.children)?e:t.children;return Qr(n)?n(a):a},ele=function(t,e){var n=ac(e-t),a=Math.min(Math.abs(e-t),360);return n*a},tle=function(t,e,n){var a=t.position,i=t.viewBox,s=t.offset,o=t.className,l=i,c=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,g=l.endAngle,y=l.clockWise,m=(f+h)/2,v=ele(p,g),b=v>=0?1:-1,x,S;a==="insideStart"?(x=p+b*s,S=y):a==="insideEnd"?(x=g-b*s,S=!y):a==="end"&&(x=g+b*s,S=y),S=v<=0?S:!S;var _=Zi(c,u,m,x),I=Zi(c,u,m,x+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(S?0:1,`,
    `).concat(I.x,",").concat(I.y),O=nn(t.id)?fm("recharts-radial-line-"):t.id;return Je.createElement("text",cy({},n,{dominantBaseline:"central",className:dn("recharts-radial-bar-label",o)}),Je.createElement("defs",null,Je.createElement("path",{id:O,d:A})),Je.createElement("textPath",{xlinkHref:"#".concat(O)},e))},rle=function(t){var e=t.viewBox,n=t.offset,a=t.position,i=e,s=i.cx,o=i.cy,l=i.innerRadius,c=i.outerRadius,u=i.startAngle,f=i.endAngle,h=(u+f)/2;if(a==="outside"){var p=Zi(s,o,c+n,h),g=p.x,y=p.y;return{x:g,y,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var m=(l+c)/2,v=Zi(s,o,m,h),b=v.x,x=v.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},nle=function(t){var e=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=e,o=s.x,l=s.y,c=s.width,u=s.height,f=u>=0?1:-1,h=f*a,p=f>0?"end":"start",g=f>0?"start":"end",y=c>=0?1:-1,m=y*a,v=y>0?"end":"start",b=y>0?"start":"end";if(i==="top"){var x={x:o+c/2,y:l-f*a,textAnchor:"middle",verticalAnchor:p};return li(li({},x),n?{height:Math.max(l-n.y,0),width:c}:{})}if(i==="bottom"){var S={x:o+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:g};return li(li({},S),n?{height:Math.max(n.y+n.height-(l+u),0),width:c}:{})}if(i==="left"){var _={x:o-m,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return li(li({},_),n?{width:Math.max(_.x-n.x,0),height:u}:{})}if(i==="right"){var I={x:o+c+m,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return li(li({},I),n?{width:Math.max(n.x+n.width-I.x,0),height:u}:{})}var A=n?{width:c,height:u}:{};return i==="insideLeft"?li({x:o+m,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideRight"?li({x:o+c-m,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},A):i==="insideTop"?li({x:o+c/2,y:l+h,textAnchor:"middle",verticalAnchor:g},A):i==="insideBottom"?li({x:o+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},A):i==="insideTopLeft"?li({x:o+m,y:l+h,textAnchor:b,verticalAnchor:g},A):i==="insideTopRight"?li({x:o+c-m,y:l+h,textAnchor:v,verticalAnchor:g},A):i==="insideBottomLeft"?li({x:o+m,y:l+u-h,textAnchor:b,verticalAnchor:p},A):i==="insideBottomRight"?li({x:o+c-m,y:l+u-h,textAnchor:v,verticalAnchor:p},A):um(i)&&(ir(i.x)||_h(i.x))&&(ir(i.y)||_h(i.y))?li({x:o+Rh(i.x,c),y:l+Rh(i.y,u),textAnchor:"end",verticalAnchor:"end"},A):li({x:o+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},ale=function(t){return"cx"in t&&ir(t.cx)};function ws(r){var t=r.offset,e=t===void 0?5:t,n=Koe(r,qoe),a=li({offset:e},n),i=a.viewBox,s=a.position,o=a.value,l=a.children,c=a.content,u=a.className,f=u===void 0?"":u,h=a.textBreakAll;if(!i||nn(o)&&nn(l)&&!ie.isValidElement(c)&&!Qr(c))return null;if(ie.isValidElement(c))return ie.cloneElement(c,a);var p;if(Qr(c)){if(p=ie.createElement(c,a),ie.isValidElement(p))return p}else p=Qoe(a);var g=ale(i),y=tn(a,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return tle(a,p,y);var m=g?rle(a):nle(a);return Je.createElement(fb,cy({className:dn("recharts-label",f)},y,m,{breakAll:h}),p)}ws.displayName="Label";var k$=function(t){var e=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,o=t.r,l=t.radius,c=t.innerRadius,u=t.outerRadius,f=t.x,h=t.y,p=t.top,g=t.left,y=t.width,m=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(ir(y)&&ir(m)){if(ir(f)&&ir(h))return{x:f,y:h,width:y,height:m};if(ir(p)&&ir(g))return{x:p,y:g,width:y,height:m}}return ir(f)&&ir(h)?{x:f,y:h,width:0,height:0}:ir(e)&&ir(n)?{cx:e,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v}:t.viewBox?t.viewBox:{}},ile=function(t,e){return t?t===!0?Je.createElement(ws,{key:"label-implicit",viewBox:e}):di(t)?Je.createElement(ws,{key:"label-implicit",viewBox:e,value:t}):ie.isValidElement(t)?t.type===ws?ie.cloneElement(t,{key:"label-implicit",viewBox:e}):Je.createElement(ws,{key:"label-implicit",content:t,viewBox:e}):Qr(t)?Je.createElement(ws,{key:"label-implicit",content:t,viewBox:e}):um(t)?Je.createElement(ws,cy({viewBox:e},t,{key:"label-implicit"})):null:null},sle=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=k$(t),s=pl(a,ws).map(function(l,c){return ie.cloneElement(l,{viewBox:e||i,key:"label-".concat(c)})});if(!n)return s;var o=ile(t.label,e||i);return[o].concat(zoe(s))};ws.parseViewBox=k$;ws.renderCallByParent=sle;var $3,gO;function ole(){if(gO)return $3;gO=1;function r(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}return $3=r,$3}var lle=ole();const cle=In(lle);function uy(r){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(r)}var ule=["valueAccessor"],dle=["data","dataKey","clockWise","id","textBreakAll"];function fle(r){return gle(r)||mle(r)||ple(r)||hle()}function hle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ple(r,t){if(r){if(typeof r=="string")return r8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r8(r,t)}}function mle(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function gle(r){if(Array.isArray(r))return r8(r)}function r8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Tb(){return Tb=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Tb.apply(this,arguments)}function yO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function vO(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(e),!0).forEach(function(n){yle(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):yO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function yle(r,t,e){return t=vle(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function vle(r){var t=ble(r,"string");return uy(t)=="symbol"?t:t+""}function ble(r,t){if(uy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(uy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function bO(r,t){if(r==null)return{};var e=xle(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function xle(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}var wle=function(t){return Array.isArray(t.value)?cle(t.value):t.value};function qu(r){var t=r.valueAccessor,e=t===void 0?wle:t,n=bO(r,ule),a=n.data,i=n.dataKey,s=n.clockWise,o=n.id,l=n.textBreakAll,c=bO(n,dle);return!a||!a.length?null:Je.createElement(ta,{className:"recharts-label-list"},a.map(function(u,f){var h=nn(i)?e(u,f):Gs(u&&u.payload,i),p=nn(o)?{}:{id:"".concat(o,"-").concat(f)};return Je.createElement(ws,Tb({},tn(u,!0),c,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:ws.parseViewBox(nn(s)?u:vO(vO({},u),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}qu.displayName="LabelList";function _le(r,t){return r?r===!0?Je.createElement(qu,{key:"labelList-implicit",data:t}):Je.isValidElement(r)||Qr(r)?Je.createElement(qu,{key:"labelList-implicit",data:t,content:r}):um(r)?Je.createElement(qu,Tb({data:t},r,{key:"labelList-implicit"})):null:null}function Sle(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&e&&!r.label)return null;var n=r.children,a=pl(n,qu).map(function(s,o){return ie.cloneElement(s,{data:t,key:"labelList-".concat(o)})});if(!e)return a;var i=_le(r.label,t);return[i].concat(fle(a))}qu.renderCallByParent=Sle;function dy(r){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(r)}function n8(){return n8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},n8.apply(this,arguments)}function xO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function wO(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(e),!0).forEach(function(n){Nle(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):xO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Nle(r,t,e){return t=jle(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function jle(r){var t=kle(r,"string");return dy(t)=="symbol"?t:t+""}function kle(r,t){if(dy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(dy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Ele=function(t,e){var n=ac(e-t),a=Math.min(Math.abs(e-t),359.999);return n*a},av=function(t){var e=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,o=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,u=l*(o?1:-1)+a,f=Math.asin(l/u)/Ab,h=c?i:i+s*f,p=Zi(e,n,u,h),g=Zi(e,n,a,h),y=c?i-s*f:i,m=Zi(e,n,u*Math.cos(f*Ab),y);return{center:p,circleTangency:g,lineTangency:m,theta:f}},E$=function(t){var e=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,o=t.endAngle,l=Ele(s,o),c=s+l,u=Zi(e,n,i,s),f=Zi(e,n,i,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=Zi(e,n,a,s),g=Zi(e,n,a,c);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(e,",").concat(n," Z");return h},Ale=function(t){var e=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,u=t.endAngle,f=ac(u-c),h=av({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),p=h.circleTangency,g=h.lineTangency,y=h.theta,m=av({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:s,cornerIsExternal:l}),v=m.circleTangency,b=m.lineTangency,x=m.theta,S=l?Math.abs(c-u):Math.abs(c-u)-y-x;if(S<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):E$({cx:e,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u});var _="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var I=av({cx:e,cy:n,radius:a,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=I.circleTangency,O=I.lineTangency,M=I.theta,z=av({cx:e,cy:n,radius:a,angle:u,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),U=z.circleTangency,D=z.lineTangency,T=z.theta,R=l?Math.abs(c-u):Math.abs(c-u)-M-T;if(R<0&&s===0)return"".concat(_,"L").concat(e,",").concat(n,"Z");_+="L".concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(U.x,",").concat(U.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else _+="L".concat(e,",").concat(n,"Z");return _},Tle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},A$=function(t){var e=wO(wO({},Tle),t),n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,h=e.className;if(s<i||u===f)return null;var p=dn("recharts-sector",h),g=s-i,y=Rh(o,g,0,!0),m;return y>0&&Math.abs(u-f)<360?m=Ale({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(y,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):m=E$({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:u,endAngle:f}),Je.createElement("path",n8({},tn(e,!0),{className:p,d:m,role:"img"}))};function fy(r){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fy(r)}function a8(){return a8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},a8.apply(this,arguments)}function _O(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function SO(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(e),!0).forEach(function(n){Cle(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):_O(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Cle(r,t,e){return t=Ple(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Ple(r){var t=Ole(r,"string");return fy(t)=="symbol"?t:t+""}function Ole(r,t){if(fy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(fy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var NO={curveBasisClosed:ZQ,curveBasisOpen:QQ,curveBasis:JQ,curveBumpX:DQ,curveBumpY:LQ,curveLinearClosed:eee,curveLinear:zx,curveMonotoneX:tee,curveMonotoneY:ree,curveNatural:nee,curveStep:aee,curveStepAfter:see,curveStepBefore:iee},iv=function(t){return t.x===+t.x&&t.y===+t.y},ng=function(t){return t.x},ag=function(t){return t.y},Ile=function(t,e){if(Qr(t))return t;var n="curve".concat(Ux(t));return(n==="curveMonotone"||n==="curveBump")&&e?NO["".concat(n).concat(e==="vertical"?"Y":"X")]:NO[n]||zx},Mle=function(t){var e=t.type,n=e===void 0?"linear":e,a=t.points,i=a===void 0?[]:a,s=t.baseLine,o=t.layout,l=t.connectNulls,c=l===void 0?!1:l,u=Ile(n,o),f=c?i.filter(function(y){return iv(y)}):i,h;if(Array.isArray(s)){var p=c?s.filter(function(y){return iv(y)}):s,g=f.map(function(y,m){return SO(SO({},y),{},{base:p[m]})});return o==="vertical"?h=Y1().y(ag).x1(ng).x0(function(y){return y.base.x}):h=Y1().x(ng).y1(ag).y0(function(y){return y.base.y}),h.defined(iv).curve(u),h(g)}return o==="vertical"&&ir(s)?h=Y1().y(ag).x1(ng).x0(s):ir(s)?h=Y1().x(ng).y1(ag).y0(s):h=OL().x(ng).y(ag),h.defined(iv).curve(u),h(f)},dp=function(t){var e=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?Mle(t):a;return ie.createElement("path",a8({},tn(t,!1),eb(t),{className:dn("recharts-curve",e),d:s,ref:i}))},U3={exports:{}},q3,jO;function Rle(){if(jO)return q3;jO=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return q3=r,q3}var z3,kO;function Fle(){if(kO)return z3;kO=1;var r=Rle();function t(){}function e(){}return e.resetWarningCache=t,z3=function(){function n(s,o,l,c,u,f){if(f!==r){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:e,resetWarningCache:t};return i.PropTypes=i,i},z3}var EO;function Dle(){return EO||(EO=1,U3.exports=Fle()()),U3.exports}var Lle=Dle();const On=In(Lle);var Ble=Object.getOwnPropertyNames,$le=Object.getOwnPropertySymbols,Ule=Object.prototype.hasOwnProperty;function AO(r,t){return function(n,a,i){return r(n,a,i)&&t(n,a,i)}}function sv(r){return function(e,n,a){if(!e||!n||typeof e!="object"||typeof n!="object")return r(e,n,a);var i=a.cache,s=i.get(e),o=i.get(n);if(s&&o)return s===n&&o===e;i.set(e,n),i.set(n,e);var l=r(e,n,a);return i.delete(e),i.delete(n),l}}function qle(r){return r!=null?r[Symbol.toStringTag]:void 0}function TO(r){return Ble(r).concat($le(r))}var zle=Object.hasOwn||(function(r,t){return Ule.call(r,t)});function Zh(r,t){return r===t||!r&&!t&&r!==r&&t!==t}var Wle="__v",Hle="__o",Vle="_owner",CO=Object.getOwnPropertyDescriptor,PO=Object.keys;function Gle(r,t,e){var n=r.length;if(t.length!==n)return!1;for(;n-- >0;)if(!e.equals(r[n],t[n],n,n,r,t,e))return!1;return!0}function Kle(r,t){return Zh(r.getTime(),t.getTime())}function Xle(r,t){return r.name===t.name&&r.message===t.message&&r.cause===t.cause&&r.stack===t.stack}function Yle(r,t){return r===t}function OO(r,t,e){var n=r.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=r.entries(),s,o,l=0;(s=i.next())&&!s.done;){for(var c=t.entries(),u=!1,f=0;(o=c.next())&&!o.done;){if(a[f]){f++;continue}var h=s.value,p=o.value;if(e.equals(h[0],p[0],l,f,r,t,e)&&e.equals(h[1],p[1],h[0],p[0],r,t,e)){u=a[f]=!0;break}f++}if(!u)return!1;l++}return!0}var Jle=Zh;function Zle(r,t,e){var n=PO(r),a=n.length;if(PO(t).length!==a)return!1;for(;a-- >0;)if(!T$(r,t,e,n[a]))return!1;return!0}function ig(r,t,e){var n=TO(r),a=n.length;if(TO(t).length!==a)return!1;for(var i,s,o;a-- >0;)if(i=n[a],!T$(r,t,e,i)||(s=CO(r,i),o=CO(t,i),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Qle(r,t){return Zh(r.valueOf(),t.valueOf())}function ece(r,t){return r.source===t.source&&r.flags===t.flags}function IO(r,t,e){var n=r.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=r.values(),s,o;(s=i.next())&&!s.done;){for(var l=t.values(),c=!1,u=0;(o=l.next())&&!o.done;){if(!a[u]&&e.equals(s.value,o.value,s.value,o.value,r,t,e)){c=a[u]=!0;break}u++}if(!c)return!1}return!0}function tce(r,t){var e=r.length;if(t.length!==e)return!1;for(;e-- >0;)if(r[e]!==t[e])return!1;return!0}function rce(r,t){return r.hostname===t.hostname&&r.pathname===t.pathname&&r.protocol===t.protocol&&r.port===t.port&&r.hash===t.hash&&r.username===t.username&&r.password===t.password}function T$(r,t,e,n){return(n===Vle||n===Hle||n===Wle)&&(r.$$typeof||t.$$typeof)?!0:zle(t,n)&&e.equals(r[n],t[n],n,n,r,t,e)}var nce="[object Arguments]",ace="[object Boolean]",ice="[object Date]",sce="[object Error]",oce="[object Map]",lce="[object Number]",cce="[object Object]",uce="[object RegExp]",dce="[object Set]",fce="[object String]",hce="[object URL]",pce=Array.isArray,MO=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,RO=Object.assign,mce=Object.prototype.toString.call.bind(Object.prototype.toString);function gce(r){var t=r.areArraysEqual,e=r.areDatesEqual,n=r.areErrorsEqual,a=r.areFunctionsEqual,i=r.areMapsEqual,s=r.areNumbersEqual,o=r.areObjectsEqual,l=r.arePrimitiveWrappersEqual,c=r.areRegExpsEqual,u=r.areSetsEqual,f=r.areTypedArraysEqual,h=r.areUrlsEqual,p=r.unknownTagComparators;return function(y,m,v){if(y===m)return!0;if(y==null||m==null)return!1;var b=typeof y;if(b!==typeof m)return!1;if(b!=="object")return b==="number"?s(y,m,v):b==="function"?a(y,m,v):!1;var x=y.constructor;if(x!==m.constructor)return!1;if(x===Object)return o(y,m,v);if(pce(y))return t(y,m,v);if(MO!=null&&MO(y))return f(y,m,v);if(x===Date)return e(y,m,v);if(x===RegExp)return c(y,m,v);if(x===Map)return i(y,m,v);if(x===Set)return u(y,m,v);var S=mce(y);if(S===ice)return e(y,m,v);if(S===uce)return c(y,m,v);if(S===oce)return i(y,m,v);if(S===dce)return u(y,m,v);if(S===cce)return typeof y.then!="function"&&typeof m.then!="function"&&o(y,m,v);if(S===hce)return h(y,m,v);if(S===sce)return n(y,m,v);if(S===nce)return o(y,m,v);if(S===ace||S===lce||S===fce)return l(y,m,v);if(p){var _=p[S];if(!_){var I=qle(y);I&&(_=p[I])}if(_)return _(y,m,v)}return!1}}function yce(r){var t=r.circular,e=r.createCustomConfig,n=r.strict,a={areArraysEqual:n?ig:Gle,areDatesEqual:Kle,areErrorsEqual:Xle,areFunctionsEqual:Yle,areMapsEqual:n?AO(OO,ig):OO,areNumbersEqual:Jle,areObjectsEqual:n?ig:Zle,arePrimitiveWrappersEqual:Qle,areRegExpsEqual:ece,areSetsEqual:n?AO(IO,ig):IO,areTypedArraysEqual:n?ig:tce,areUrlsEqual:rce,unknownTagComparators:void 0};if(e&&(a=RO({},a,e(a))),t){var i=sv(a.areArraysEqual),s=sv(a.areMapsEqual),o=sv(a.areObjectsEqual),l=sv(a.areSetsEqual);a=RO({},a,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return a}function vce(r){return function(t,e,n,a,i,s,o){return r(t,e,o)}}function bce(r){var t=r.circular,e=r.comparator,n=r.createState,a=r.equals,i=r.strict;if(n)return function(l,c){var u=n(),f=u.cache,h=f===void 0?t?new WeakMap:void 0:f,p=u.meta;return e(l,c,{cache:h,equals:a,meta:p,strict:i})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var s={cache:void 0,equals:a,meta:void 0,strict:i};return function(l,c){return e(l,c,s)}}var xce=Ef();Ef({strict:!0});Ef({circular:!0});Ef({circular:!0,strict:!0});Ef({createInternalComparator:function(){return Zh}});Ef({strict:!0,createInternalComparator:function(){return Zh}});Ef({circular:!0,createInternalComparator:function(){return Zh}});Ef({circular:!0,createInternalComparator:function(){return Zh},strict:!0});function Ef(r){r===void 0&&(r={});var t=r.circular,e=t===void 0?!1:t,n=r.createInternalComparator,a=r.createState,i=r.strict,s=i===void 0?!1:i,o=yce(r),l=gce(o),c=n?n(l):vce(l);return bce({circular:e,comparator:l,createState:a,equals:c,strict:s})}function wce(r){typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}function FO(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=-1,n=function a(i){e<0&&(e=i),i-e>t?(r(i),e=-1):wce(a)};requestAnimationFrame(n)}function i8(r){"@babel/helpers - typeof";return i8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i8(r)}function _ce(r){return kce(r)||jce(r)||Nce(r)||Sce()}function Sce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nce(r,t){if(r){if(typeof r=="string")return DO(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return DO(r,t)}}function DO(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function jce(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function kce(r){if(Array.isArray(r))return r}function Ece(){var r={},t=function(){return null},e=!1,n=function a(i){if(!e){if(Array.isArray(i)){if(!i.length)return;var s=i,o=_ce(s),l=o[0],c=o.slice(1);if(typeof l=="number"){FO(a.bind(null,c),l);return}a(l),FO(a.bind(null,c));return}i8(i)==="object"&&(r=i,t(r)),typeof i=="function"&&i()}};return{stop:function(){e=!0},start:function(i){e=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function hy(r){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hy(r)}function LO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function BO(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(e),!0).forEach(function(n){C$(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):LO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function C$(r,t,e){return t=Ace(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Ace(r){var t=Tce(r,"string");return hy(t)==="symbol"?t:String(t)}function Tce(r,t){if(hy(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(hy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Cce=function(t,e){return[Object.keys(t),Object.keys(e)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Pce=function(t){return t},Oce=function(t){return t.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())})},Ag=function(t,e){return Object.keys(e).reduce(function(n,a){return BO(BO({},n),{},C$({},a,t(a,e[a])))},{})},$O=function(t,e,n){return t.map(function(a){return"".concat(Oce(a)," ").concat(e,"ms ").concat(n)}).join(",")};function Ice(r,t){return Fce(r)||Rce(r,t)||P$(r,t)||Mce()}function Mce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rce(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Fce(r){if(Array.isArray(r))return r}function Dce(r){return $ce(r)||Bce(r)||P$(r)||Lce()}function Lce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P$(r,t){if(r){if(typeof r=="string")return s8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s8(r,t)}}function Bce(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function $ce(r){if(Array.isArray(r))return s8(r)}function s8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var Cb=1e-4,O$=function(t,e){return[0,3*t,3*e-6*t,3*t-3*e+1]},I$=function(t,e){return t.map(function(n,a){return n*Math.pow(e,a)}).reduce(function(n,a){return n+a})},UO=function(t,e){return function(n){var a=O$(t,e);return I$(a,n)}},Uce=function(t,e){return function(n){var a=O$(t,e),i=[].concat(Dce(a.map(function(s,o){return s*o}).slice(1)),[0]);return I$(i,n)}},qO=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[0],i=e[1],s=e[2],o=e[3];if(e.length===1)switch(e[0]){case"linear":a=0,i=0,s=1,o=1;break;case"ease":a=.25,i=.1,s=.25,o=1;break;case"ease-in":a=.42,i=0,s=1,o=1;break;case"ease-out":a=.42,i=0,s=.58,o=1;break;case"ease-in-out":a=0,i=0,s=.58,o=1;break;default:{var l=e[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),u=Ice(c,4);a=u[0],i=u[1],s=u[2],o=u[3]}}}var f=UO(a,s),h=UO(i,o),p=Uce(a,s),g=function(v){return v>1?1:v<0?0:v},y=function(v){for(var b=v>1?1:v,x=b,S=0;S<8;++S){var _=f(x)-b,I=p(x);if(Math.abs(_-b)<Cb||I<Cb)return h(x);x=g(x-_/I)}return h(x)};return y.isStepper=!1,y},qce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.stiff,n=e===void 0?100:e,a=t.damping,i=a===void 0?8:a,s=t.dt,o=s===void 0?17:s,l=function(u,f,h){var p=-(u-f)*n,g=h*i,y=h+(p-g)*o/1e3,m=h*o/1e3+u;return Math.abs(m-f)<Cb&&Math.abs(y)<Cb?[f,0]:[m,y]};return l.isStepper=!0,l.dt=o,l},zce=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qO(a);case"spring":return qce();default:if(a.split("(")[0]==="cubic-bezier")return qO(a)}return typeof a=="function"?a:null};function py(r){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py(r)}function zO(r){return Vce(r)||Hce(r)||M$(r)||Wce()}function Wce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hce(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Vce(r){if(Array.isArray(r))return l8(r)}function WO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Vi(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(e),!0).forEach(function(n){o8(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):WO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function o8(r,t,e){return t=Gce(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Gce(r){var t=Kce(r,"string");return py(t)==="symbol"?t:String(t)}function Kce(r,t){if(py(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Xce(r,t){return Zce(r)||Jce(r,t)||M$(r,t)||Yce()}function Yce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M$(r,t){if(r){if(typeof r=="string")return l8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l8(r,t)}}function l8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Jce(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Zce(r){if(Array.isArray(r))return r}var Pb=function(t,e,n){return t+(e-t)*n},c8=function(t){var e=t.from,n=t.to;return e!==n},Qce=function r(t,e,n){var a=Ag(function(i,s){if(c8(s)){var o=t(s.from,s.to,s.velocity),l=Xce(o,2),c=l[0],u=l[1];return Vi(Vi({},s),{},{from:c,velocity:u})}return s},e);return n<1?Ag(function(i,s){return c8(s)?Vi(Vi({},s),{},{velocity:Pb(s.velocity,a[i].velocity,n),from:Pb(s.from,a[i].from,n)}):s},e):r(t,a,n-1)};const eue=(function(r,t,e,n,a){var i=Cce(r,t),s=i.reduce(function(m,v){return Vi(Vi({},m),{},o8({},v,[r[v],t[v]]))},{}),o=i.reduce(function(m,v){return Vi(Vi({},m),{},o8({},v,{from:r[v],velocity:0,to:t[v]}))},{}),l=-1,c,u,f=function(){return null},h=function(){return Ag(function(v,b){return b.from},o)},p=function(){return!Object.values(o).filter(c8).length},g=function(v){c||(c=v);var b=v-c,x=b/e.dt;o=Qce(e,o,x),a(Vi(Vi(Vi({},r),t),h())),c=v,p()||(l=requestAnimationFrame(f))},y=function(v){u||(u=v);var b=(v-u)/n,x=Ag(function(_,I){return Pb.apply(void 0,zO(I).concat([e(b)]))},s);if(a(Vi(Vi(Vi({},r),t),x)),b<1)l=requestAnimationFrame(f);else{var S=Ag(function(_,I){return Pb.apply(void 0,zO(I).concat([e(1)]))},s);a(Vi(Vi(Vi({},r),t),S))}};return f=e.isStepper?g:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}});function qp(r){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(r)}var tue=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function rue(r,t){if(r==null)return{};var e=nue(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function nue(r,t){if(r==null)return{};var e={},n=Object.keys(r),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(e[a]=r[a]);return e}function W3(r){return oue(r)||sue(r)||iue(r)||aue()}function aue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iue(r,t){if(r){if(typeof r=="string")return u8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return u8(r,t)}}function sue(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function oue(r){if(Array.isArray(r))return u8(r)}function u8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function HO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Vl(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?HO(Object(e),!0).forEach(function(n){mg(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):HO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function mg(r,t,e){return t=R$(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function lue(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function cue(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,R$(n.key),n)}}function uue(r,t,e){return t&&cue(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function R$(r){var t=due(r,"string");return qp(t)==="symbol"?t:String(t)}function due(r,t){if(qp(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(qp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function fue(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&d8(r,t)}function d8(r,t){return d8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},d8(r,t)}function hue(r){var t=pue();return function(){var n=Ob(r),a;if(t){var i=Ob(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return f8(this,a)}}function f8(r,t){if(t&&(qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h8(r)}function h8(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function pue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ob(r){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ob(r)}var Kc=(function(r){fue(e,r);var t=hue(e);function e(n,a){var i;lue(this,e),i=t.call(this,n,a);var s=i.props,o=s.isActive,l=s.attributeName,c=s.from,u=s.to,f=s.steps,h=s.children,p=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(h8(i)),i.changeStyle=i.changeStyle.bind(h8(i)),!o||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),f8(i);if(f&&f.length)i.state={style:f[0].style};else if(c){if(typeof h=="function")return i.state={style:c},f8(i);i.state={style:l?mg({},l,c):c}}else i.state={style:{}};return i}return uue(e,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,o=i.canBegin,l=i.attributeName,c=i.shouldReAnimate,u=i.to,f=i.from,h=this.state.style;if(o){if(!s){var p={style:l?mg({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(xce(a.to,u)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=g||c?f:a.to;if(this.state&&h){var m={style:l?mg({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(m)}this.runAnimation(Vl(Vl({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,o=a.to,l=a.duration,c=a.easing,u=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=eue(s,o,zce(c),l,this.changeStyle),g=function(){i.stopJSAnimation=p()};this.manager.start([h,u,g,l,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,o=a.begin,l=a.onAnimationStart,c=s[0],u=c.style,f=c.duration,h=f===void 0?0:f,p=function(y,m,v){if(v===0)return y;var b=m.duration,x=m.easing,S=x===void 0?"ease":x,_=m.style,I=m.properties,A=m.onAnimationEnd,O=v>0?s[v-1]:m,M=I||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(W3(y),[i.runJSAnimation.bind(i,{from:O.style,to:_,duration:b,easing:S}),b]);var z=$O(M,b,S),U=Vl(Vl(Vl({},O.style),_),{},{transition:z});return[].concat(W3(y),[U,b,A]).filter(Pce)};return this.manager.start([l].concat(W3(s.reduce(p,[u,Math.max(h,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Ece());var i=a.begin,s=a.duration,o=a.attributeName,l=a.to,c=a.easing,u=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var y=o?mg({},o,l):l,m=$O(Object.keys(y),s,c);g.start([u,i,Vl(Vl({},y),{},{transition:m}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=rue(a,tue),c=ie.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||c===0||s<=0)return i;var f=function(p){var g=p.props,y=g.style,m=y===void 0?{}:y,v=g.className,b=ie.cloneElement(p,Vl(Vl({},l),{},{style:Vl(Vl({},m),u),className:v}));return b};return c===1?f(ie.Children.only(i)):Je.createElement("div",null,ie.Children.map(i,function(h){return f(h)}))}}]),e})(ie.PureComponent);Kc.displayName="Animate";Kc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Kc.propTypes={from:On.oneOfType([On.object,On.string]),to:On.oneOfType([On.object,On.string]),attributeName:On.string,duration:On.number,begin:On.number,easing:On.oneOfType([On.string,On.func]),steps:On.arrayOf(On.shape({duration:On.number.isRequired,style:On.object.isRequired,easing:On.oneOfType([On.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),On.func]),properties:On.arrayOf("string"),onAnimationEnd:On.func})),children:On.oneOfType([On.node,On.func]),isActive:On.bool,canBegin:On.bool,onAnimationEnd:On.func,shouldReAnimate:On.bool,onAnimationStart:On.func,onAnimationReStart:On.func};function my(r){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(r)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Ib.apply(this,arguments)}function mue(r,t){return bue(r)||vue(r,t)||yue(r,t)||gue()}function gue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yue(r,t){if(r){if(typeof r=="string")return VO(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return VO(r,t)}}function VO(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function vue(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function bue(r){if(Array.isArray(r))return r}function GO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function KO(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(e),!0).forEach(function(n){xue(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):GO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function xue(r,t,e){return t=wue(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function wue(r){var t=_ue(r,"string");return my(t)=="symbol"?t:t+""}function _ue(r,t){if(my(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(my(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var XO=function(t,e,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,l=n>=0?1:-1,c=a>=0&&n>=0||a<0&&n<0?1:0,u;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>s?s:i[h];u="M".concat(t,",").concat(e+o*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(t+l*f[0],",").concat(e)),u+="L ".concat(t+n-l*f[1],",").concat(e),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+o*f[1])),u+="L ".concat(t+n,",").concat(e+a-o*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(t+n-l*f[2],",").concat(e+a)),u+="L ".concat(t+l*f[3],",").concat(e+a),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+a-o*f[3])),u+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);u="M ".concat(t,",").concat(e+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+l*g,",").concat(e,`
            L `).concat(t+n-l*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+n,",").concat(e+o*g,`
            L `).concat(t+n,",").concat(e+a-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+n-l*g,",").concat(e+a,`
            L `).concat(t+l*g,",").concat(e+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t,",").concat(e+a-o*g," Z")}else u="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},Sue=function(t,e){if(!t||!e)return!1;var n=t.x,a=t.y,i=e.x,s=e.y,o=e.width,l=e.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(i,i+o),u=Math.max(i,i+o),f=Math.min(s,s+l),h=Math.max(s,s+l);return n>=c&&n<=u&&a>=f&&a<=h}return!1},Nue={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xj=function(t){var e=KO(KO({},Nue),t),n=ie.useRef(),a=ie.useState(-1),i=mue(a,2),s=i[0],o=i[1];ie.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&o(S)}catch{}},[]);var l=e.x,c=e.y,u=e.width,f=e.height,h=e.radius,p=e.className,g=e.animationEasing,y=e.animationDuration,m=e.animationBegin,v=e.isAnimationActive,b=e.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var x=dn("recharts-rectangle",p);return b?Je.createElement(Kc,{canBegin:s>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:y,animationEasing:g,isActive:b},function(S){var _=S.width,I=S.height,A=S.x,O=S.y;return Je.createElement(Kc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,isActive:v,easing:g},Je.createElement("path",Ib({},tn(e,!0),{className:x,d:XO(A,O,_,I,h),ref:n})))}):Je.createElement("path",Ib({},tn(e,!0),{className:x,d:XO(l,c,u,f,h)}))};function p8(){return p8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},p8.apply(this,arguments)}var n2=function(t){var e=t.cx,n=t.cy,a=t.r,i=t.className,s=dn("recharts-dot",i);return e===+e&&n===+n&&a===+a?ie.createElement("circle",p8({},tn(t,!1),eb(t),{className:s,cx:e,cy:n,r:a})):null};function gy(r){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(r)}var jue=["x","y","top","left","width","height","className"];function m8(){return m8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},m8.apply(this,arguments)}function YO(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function kue(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(e),!0).forEach(function(n){Eue(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):YO(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Eue(r,t,e){return t=Aue(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Aue(r){var t=Tue(r,"string");return gy(t)=="symbol"?t:t+""}function Tue(r,t){if(gy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(gy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Cue(r,t){if(r==null)return{};var e=Pue(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Pue(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}var Oue=function(t,e,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(e,"h").concat(n)},Iue=function(t){var e=t.x,n=e===void 0?0:e,a=t.y,i=a===void 0?0:a,s=t.top,o=s===void 0?0:s,l=t.left,c=l===void 0?0:l,u=t.width,f=u===void 0?0:u,h=t.height,p=h===void 0?0:h,g=t.className,y=Cue(t,jue),m=kue({x:n,y:i,top:o,left:c,width:f,height:p},y);return!ir(n)||!ir(i)||!ir(f)||!ir(p)||!ir(o)||!ir(c)?null:Je.createElement("path",m8({},tn(m,!0),{className:dn("recharts-cross",g),d:Oue(n,i,f,p,o,c)}))},H3,JO;function Mue(){if(JO)return H3;JO=1;var r=tB(),t=r(Object.getPrototypeOf,Object);return H3=t,H3}var V3,ZO;function Rue(){if(ZO)return V3;ZO=1;var r=ad(),t=Mue(),e=id(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,o=i.hasOwnProperty,l=s.call(Object);function c(u){if(!e(u)||r(u)!=n)return!1;var f=t(u);if(f===null)return!0;var h=o.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==l}return V3=c,V3}var Fue=Rue();const Due=In(Fue);var G3,QO;function Lue(){if(QO)return G3;QO=1;var r=ad(),t=id(),e="[object Boolean]";function n(a){return a===!0||a===!1||t(a)&&r(a)==e}return G3=n,G3}var Bue=Lue();const $ue=In(Bue);function yy(r){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(r)}function Mb(){return Mb=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Mb.apply(this,arguments)}function Uue(r,t){return Hue(r)||Wue(r,t)||zue(r,t)||que()}function que(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zue(r,t){if(r){if(typeof r=="string")return eI(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return eI(r,t)}}function eI(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Wue(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Hue(r){if(Array.isArray(r))return r}function tI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function rI(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(e),!0).forEach(function(n){Vue(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):tI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Vue(r,t,e){return t=Gue(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Gue(r){var t=Kue(r,"string");return yy(t)=="symbol"?t:t+""}function Kue(r,t){if(yy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(yy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var nI=function(t,e,n,a,i){var s=n-a,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-s/2,",").concat(e+i),o+="L ".concat(t+n-s/2-a,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},Xue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yue=function(t){var e=rI(rI({},Xue),t),n=ie.useRef(),a=ie.useState(-1),i=Uue(a,2),s=i[0],o=i[1];ie.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&o(x)}catch{}},[]);var l=e.x,c=e.y,u=e.upperWidth,f=e.lowerWidth,h=e.height,p=e.className,g=e.animationEasing,y=e.animationDuration,m=e.animationBegin,v=e.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var b=dn("recharts-trapezoid",p);return v?Je.createElement(Kc,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:c},duration:y,animationEasing:g,isActive:v},function(x){var S=x.upperWidth,_=x.lowerWidth,I=x.height,A=x.x,O=x.y;return Je.createElement(Kc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,easing:g},Je.createElement("path",Mb({},tn(e,!0),{className:b,d:nI(A,O,S,_,I),ref:n})))}):Je.createElement("g",null,Je.createElement("path",Mb({},tn(e,!0),{className:b,d:nI(l,c,u,f,h)})))},Jue=["option","shapeType","propTransformer","activeClassName","isActive"];function vy(r){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(r)}function Zue(r,t){if(r==null)return{};var e=Que(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Que(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function aI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Rb(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?aI(Object(e),!0).forEach(function(n){ede(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):aI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function ede(r,t,e){return t=tde(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function tde(r){var t=rde(r,"string");return vy(t)=="symbol"?t:t+""}function rde(r,t){if(vy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(vy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function nde(r,t){return Rb(Rb({},t),r)}function ade(r,t){return r==="symbols"}function iI(r){var t=r.shapeType,e=r.elementProps;switch(t){case"rectangle":return Je.createElement(xj,e);case"trapezoid":return Je.createElement(Yue,e);case"sector":return Je.createElement(A$,e);case"symbols":if(ade(t))return Je.createElement(BN,e);break;default:return null}}function ide(r){return ie.isValidElement(r)?r.props:r}function sde(r){var t=r.option,e=r.shapeType,n=r.propTransformer,a=n===void 0?nde:n,i=r.activeClassName,s=i===void 0?"recharts-active-shape":i,o=r.isActive,l=Zue(r,Jue),c;if(ie.isValidElement(t))c=ie.cloneElement(t,Rb(Rb({},l),ide(t)));else if(Qr(t))c=t(l);else if(Due(t)&&!$ue(t)){var u=a(t,l);c=Je.createElement(iI,{shapeType:e,elementProps:u})}else{var f=l;c=Je.createElement(iI,{shapeType:e,elementProps:f})}return o?Je.createElement(ta,{className:s},c):c}function a2(r,t){return t!=null&&"trapezoids"in r.props}function i2(r,t){return t!=null&&"sectors"in r.props}function by(r,t){return t!=null&&"points"in r.props}function ode(r,t){var e,n,a=r.x===(t==null||(e=t.labelViewBox)===null||e===void 0?void 0:e.x)||r.x===t.x,i=r.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||r.y===t.y;return a&&i}function lde(r,t){var e=r.endAngle===t.endAngle,n=r.startAngle===t.startAngle;return e&&n}function cde(r,t){var e=r.x===t.x,n=r.y===t.y,a=r.z===t.z;return e&&n&&a}function ude(r,t){var e;return a2(r,t)?e=ode:i2(r,t)?e=lde:by(r,t)&&(e=cde),e}function dde(r,t){var e;return a2(r,t)?e="trapezoids":i2(r,t)?e="sectors":by(r,t)&&(e="points"),e}function fde(r,t){if(a2(r,t)){var e;return(e=t.tooltipPayload)===null||e===void 0||(e=e[0])===null||e===void 0||(e=e.payload)===null||e===void 0?void 0:e.payload}if(i2(r,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return by(r,t)?t.payload:{}}function hde(r){var t=r.activeTooltipItem,e=r.graphicalItem,n=r.itemData,a=dde(e,t),i=fde(e,t),s=n.filter(function(l,c){var u=$p(i,l),f=e.props[a].filter(function(g){var y=ude(e,t);return y(g,t)}),h=e.props[a].indexOf(f[f.length-1]),p=c===h;return u&&p}),o=n.indexOf(s[s.length-1]);return o}var K3,sI;function pde(){if(sI)return K3;sI=1;var r=Math.ceil,t=Math.max;function e(n,a,i,s){for(var o=-1,l=t(r((a-n)/(i||1)),0),c=Array(l);l--;)c[s?l:++o]=n,n+=i;return c}return K3=e,K3}var X3,oI;function F$(){if(oI)return X3;oI=1;var r=yB(),t=1/0,e=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=r(a),a===t||a===-t){var i=a<0?-1:1;return i*e}return a===a?a:0}return X3=n,X3}var Y3,lI;function mde(){if(lI)return Y3;lI=1;var r=pde(),t=Gx(),e=F$();function n(a){return function(i,s,o){return o&&typeof o!="number"&&t(i,s,o)&&(s=o=void 0),i=e(i),s===void 0?(s=i,i=0):s=e(s),o=o===void 0?i<s?1:-1:e(o),r(i,s,o,a)}}return Y3=n,Y3}var J3,cI;function gde(){if(cI)return J3;cI=1;var r=mde(),t=r();return J3=t,J3}var yde=gde();const Fb=In(yde);function xy(r){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(r)}function uI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function dI(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(e),!0).forEach(function(n){D$(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):uI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function D$(r,t,e){return t=vde(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function vde(r){var t=bde(r,"string");return xy(t)=="symbol"?t:t+""}function bde(r,t){if(xy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(xy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var xde=["Webkit","Moz","O","ms"],wde=function(t,e){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=xde.reduce(function(i,s){return dI(dI({},i),{},D$({},s+n,e))},{});return a[t]=e,a};function zp(r){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(r)}function Db(){return Db=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Db.apply(this,arguments)}function fI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Z3(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(e),!0).forEach(function(n){Ro(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):fI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function _de(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function hI(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,B$(n.key),n)}}function Sde(r,t,e){return t&&hI(r.prototype,t),e&&hI(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Nde(r,t,e){return t=Lb(t),jde(r,L$()?Reflect.construct(t,e||[],Lb(r).constructor):t.apply(r,e))}function jde(r,t){if(t&&(zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kde(r)}function kde(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function L$(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L$=function(){return!!r})()}function Lb(r){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lb(r)}function Ede(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&g8(r,t)}function g8(r,t){return g8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},g8(r,t)}function Ro(r,t,e){return t=B$(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function B$(r){var t=Ade(r,"string");return zp(t)=="symbol"?t:t+""}function Ade(r,t){if(zp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Tde=function(t){var e=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,o=t.travellerWidth;if(!e||!e.length)return{};var l=e.length,c=kg().domain(Fb(0,l)).range([i,i+s-o]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(a),scale:c,scaleValues:u}},pI=function(t){return t.changedTouches&&!!t.changedTouches.length},Wp=(function(r){function t(e){var n;return _de(this,t),n=Nde(this,t,[e]),Ro(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ro(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ro(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,o=a.startIndex;s==null||s({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),Ro(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ro(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ro(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ro(n,"handleSlideDragStart",function(a){var i=pI(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Ede(t,r),Sde(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,u=c.length-1,f=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(s,f),g=t.getIndexInRange(s,h);return{startIndex:p-p%l,endIndex:g===u?u:g-g%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,o=a.dataKey,l=Gs(i[n],o,n);return Qr(s)?s(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,o=a.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,h=l.startIndex,p=l.endIndex,g=l.onChange,y=n.pageX-i;y>0?y=Math.min(y,c+u-f-o,c+u-f-s):y<0&&(y=Math.max(y,c-s,c-o));var m=this.getIndex({startX:s+y,endX:o+y});(m.startIndex!==h||m.endIndex!==p)&&g&&g(m),this.setState({startX:s+y,endX:o+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=pI(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,o=a.endX,l=a.startX,c=this.state[s],u=this.props,f=u.x,h=u.width,p=u.travellerWidth,g=u.onChange,y=u.gap,m=u.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-p-c):b<0&&(b=Math.max(b,f-c)),v[s]=c+b;var x=this.getIndex(v),S=x.startIndex,_=x.endIndex,I=function(){var O=m.length-1;return s==="startX"&&(o>l?S%y===0:_%y===0)||o<l&&_===O||s==="endX"&&(o>l?_%y===0:S%y===0)||o>l&&_===O};this.setState(Ro(Ro({},s,c+b),"brushMoveStartX",n.pageX),function(){g&&I()&&g(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,o=s.scaleValues,l=s.startX,c=s.endX,u=this.state[a],f=o.indexOf(u);if(f!==-1){var h=f+n;if(!(h===-1||h>=o.length)){var p=o[h];a==="startX"&&p>=c||a==="endX"&&p<=l||this.setState(Ro({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,l=n.fill,c=n.stroke;return Je.createElement("rect",{stroke:c,fill:l,x:a,y:i,width:s,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,l=n.data,c=n.children,u=n.padding,f=ie.Children.only(c);return f?Je.cloneElement(f,{x:a,y:i,width:s,height:o,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,o=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,h=l.traveller,p=l.ariaLabel,g=l.data,y=l.startIndex,m=l.endIndex,v=Math.max(n,this.props.x),b=Z3(Z3({},tn(this.props,!1)),{},{x:v,y:c,width:u,height:f}),x=p||"Min value: ".concat((i=g[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=g[m])===null||s===void 0?void 0:s.name);return Je.createElement(ta,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),o.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,o=i.height,l=i.stroke,c=i.travellerWidth,u=Math.min(n,a)+c,f=Math.max(Math.abs(a-n)-c,0);return Je.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:s,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,o=n.height,l=n.travellerWidth,c=n.stroke,u=this.state,f=u.startX,h=u.endX,p=5,g={pointerEvents:"none",fill:c};return Je.createElement(ta,{className:"recharts-brush-texts"},Je.createElement(fb,Db({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:s+o/2},g),this.getTextOfTick(a)),Je.createElement(fb,Db({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+p,y:s+o/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,o=n.x,l=n.y,c=n.width,u=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,g=h.endX,y=h.isTextActive,m=h.isSlideMoving,v=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!ir(o)||!ir(l)||!ir(c)||!ir(u)||c<=0||u<=0)return null;var x=dn("recharts-brush",i),S=Je.Children.count(s)===1,_=wde("userSelect","none");return Je.createElement(ta,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(y||m||v||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,o=n.height,l=n.stroke,c=Math.floor(i+o/2)-1;return Je.createElement(Je.Fragment,null,Je.createElement("rect",{x:a,y:i,width:s,height:o,fill:l,stroke:"none"}),Je.createElement("line",{x1:a+1,y1:c,x2:a+s-1,y2:c,fill:"none",stroke:"#fff"}),Je.createElement("line",{x1:a+1,y1:c+2,x2:a+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return Je.isValidElement(n)?i=Je.cloneElement(n,a):Qr(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,o=n.x,l=n.travellerWidth,c=n.updateId,u=n.startIndex,f=n.endIndex;if(i!==a.prevData||c!==a.prevUpdateId)return Z3({prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s},i&&i.length?Tde({data:i,width:s,x:o,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||o!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([o,o+s-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,o=i-1;o-s>1;){var l=Math.floor((s+o)/2);n[l]>a?o=l:s=l}return a>=n[o]?o:s}}])})(ie.PureComponent);Ro(Wp,"displayName","Brush");Ro(Wp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Q3,mI;function Cde(){if(mI)return Q3;mI=1;var r=VN();function t(e,n){var a;return r(e,function(i,s,o){return a=n(i,s,o),!a}),!!a}return Q3=t,Q3}var eS,gI;function Pde(){if(gI)return eS;gI=1;var r=KL(),t=Nf(),e=Cde(),n=xo(),a=Gx();function i(s,o,l){var c=n(s)?r:e;return l&&a(s,o,l)&&(o=void 0),c(s,t(o,3))}return eS=i,eS}var Ode=Pde();const Ide=In(Ode);var Hc=function(t,e){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===e},tS,yI;function Mde(){if(yI)return tS;yI=1;var r=fB();function t(e,n,a){n=="__proto__"&&r?r(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}return tS=t,tS}var rS,vI;function Rde(){if(vI)return rS;vI=1;var r=Mde(),t=uB(),e=Nf();function n(a,i){var s={};return i=e(i,3),t(a,function(o,l,c){r(s,l,i(o,l,c))}),s}return rS=n,rS}var Fde=Rde();const Dde=In(Fde);var nS,bI;function Lde(){if(bI)return nS;bI=1;function r(t,e){for(var n=-1,a=t==null?0:t.length;++n<a;)if(!e(t[n],n,t))return!1;return!0}return nS=r,nS}var aS,xI;function Bde(){if(xI)return aS;xI=1;var r=VN();function t(e,n){var a=!0;return r(e,function(i,s,o){return a=!!n(i,s,o),a}),a}return aS=t,aS}var iS,wI;function $de(){if(wI)return iS;wI=1;var r=Lde(),t=Bde(),e=Nf(),n=xo(),a=Gx();function i(s,o,l){var c=n(s)?r:t;return l&&a(s,o,l)&&(o=void 0),c(s,e(o,3))}return iS=i,iS}var Ude=$de();const $$=In(Ude);var qde=["x","y"];function wy(r){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wy(r)}function y8(){return y8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},y8.apply(this,arguments)}function _I(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function sg(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(e),!0).forEach(function(n){zde(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):_I(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function zde(r,t,e){return t=Wde(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Wde(r){var t=Hde(r,"string");return wy(t)=="symbol"?t:t+""}function Hde(r,t){if(wy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(wy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Vde(r,t){if(r==null)return{};var e=Gde(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Gde(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Kde(r,t){var e=r.x,n=r.y,a=Vde(r,qde),i="".concat(e),s=parseInt(i,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),u=parseInt(c,10),f="".concat(t.width||a.width),h=parseInt(f,10);return sg(sg(sg(sg(sg({},t),a),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function SI(r){return Je.createElement(sde,y8({shapeType:"rectangle",propTransformer:Kde,activeClassName:"recharts-active-bar"},r))}var Xde=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=ir(n)||iQ(n);return i?t(n,a):(i||Dh(),e)}},Yde=["value","background"],U$;function Hp(r){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(r)}function Jde(r,t){if(r==null)return{};var e=Zde(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Zde(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Bb(){return Bb=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Bb.apply(this,arguments)}function NI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Ga(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(e),!0).forEach(function(n){uf(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):NI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Qde(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function jI(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,z$(n.key),n)}}function efe(r,t,e){return t&&jI(r.prototype,t),e&&jI(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function tfe(r,t,e){return t=$b(t),rfe(r,q$()?Reflect.construct(t,e||[],$b(r).constructor):t.apply(r,e))}function rfe(r,t){if(t&&(Hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nfe(r)}function nfe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function q$(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q$=function(){return!!r})()}function $b(r){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$b(r)}function afe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&v8(r,t)}function v8(r,t){return v8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},v8(r,t)}function uf(r,t,e){return t=z$(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function z$(r){var t=ife(r,"string");return Hp(t)=="symbol"?t:t+""}function ife(r,t){if(Hp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Xc=(function(r){function t(){var e;Qde(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=tfe(this,t,[].concat(a)),uf(e,"state",{isAnimationFinished:!1}),uf(e,"id",fm("recharts-bar-")),uf(e,"handleAnimationEnd",function(){var s=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),s&&s()}),uf(e,"handleAnimationStart",function(){var s=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),s&&s()}),e}return afe(t,r),efe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,o=i.dataKey,l=i.activeIndex,c=i.activeBar,u=tn(this.props,!1);return n&&n.map(function(f,h){var p=h===l,g=p?c:s,y=Ga(Ga(Ga({},u),f),{},{isActive:p,option:g,index:h,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Je.createElement(ta,Bb({className:"recharts-bar-rectangle"},tb(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),Je.createElement(SI,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,f=a.animationId,h=this.state.prevData;return Je.createElement(Kc,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,y=i.map(function(m,v){var b=h&&h[v];if(b){var x=Yi(b.x,m.x),S=Yi(b.y,m.y),_=Yi(b.width,m.width),I=Yi(b.height,m.height);return Ga(Ga({},m),{},{x:x(g),y:S(g),width:_(g),height:I(g)})}if(s==="horizontal"){var A=Yi(0,m.height),O=A(g);return Ga(Ga({},m),{},{y:m.y+m.height-O,height:O})}var M=Yi(0,m.width),z=M(g);return Ga(Ga({},m),{},{width:z})});return Je.createElement(ta,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!$p(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,o=a.activeIndex,l=tn(this.props.background,!1);return i.map(function(c,u){c.value;var f=c.background,h=Jde(c,Yde);if(!f)return null;var p=Ga(Ga(Ga(Ga(Ga({},h),{},{fill:"#eee"},f),l),tb(n.props,c,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:u,className:"recharts-bar-background-rectangle"});return Je.createElement(SI,Bb({key:"background-bar-".concat(u),option:n.props.background,isActive:u===o},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,o=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,f=pl(u,Vy);if(!f)return null;var h=c==="vertical"?s[0].height/2:s[0].width/2,p=function(m,v){var b=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:b,errorVal:Gs(m,v)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Je.createElement(ta,g,f.map(function(y){return Je.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,o=n.xAxis,l=n.yAxis,c=n.left,u=n.top,f=n.width,h=n.height,p=n.isAnimationActive,g=n.background,y=n.id;if(a||!i||!i.length)return null;var m=this.state.isAnimationFinished,v=dn("recharts-bar",s),b=o&&o.allowDataOverflow,x=l&&l.allowDataOverflow,S=b||x,_=nn(y)?this.id:y;return Je.createElement(ta,{className:v},b||x?Je.createElement("defs",null,Je.createElement("clipPath",{id:"clipPath-".concat(_)},Je.createElement("rect",{x:b?c:c-f/2,y:x?u:u-h/2,width:b?f:f*2,height:x?h:h*2}))):null,Je.createElement(ta,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(_,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,_),(!p||m)&&qu.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(ie.PureComponent);U$=Xc;uf(Xc,"displayName","Bar");uf(Xc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Xh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});uf(Xc,"getComposedData",function(r){var t=r.props,e=r.item,n=r.barPosition,a=r.bandSize,i=r.xAxis,s=r.yAxis,o=r.xAxisTicks,l=r.yAxisTicks,c=r.stackedData,u=r.dataStartIndex,f=r.displayedData,h=r.offset,p=Soe(n,e);if(!p)return null;var g=t.layout,y=e.type.defaultProps,m=y!==void 0?Ga(Ga({},y),e.props):e.props,v=m.dataKey,b=m.children,x=m.minPointSize,S=g==="horizontal"?s:i,_=c?S.scale.domain():null,I=Poe({numericAxis:S}),A=pl(b,bB),O=f.map(function(M,z){var U,D,T,R,C,N;c?U=Noe(c[u+z],_):(U=Gs(M,v),Array.isArray(U)||(U=[I,U]));var E=Xde(x,U$.defaultProps.minPointSize)(U[1],z);if(g==="horizontal"){var k,P=[s.scale(U[0]),s.scale(U[1])],q=P[0],H=P[1];D=lO({axis:i,ticks:o,bandSize:a,offset:p.offset,entry:M,index:z}),T=(k=H??q)!==null&&k!==void 0?k:void 0,R=p.size;var L=q-H;if(C=Number.isNaN(L)?0:L,N={x:D,y:s.y,width:R,height:s.height},Math.abs(E)>0&&Math.abs(C)<Math.abs(E)){var K=ac(C||E)*(Math.abs(E)-Math.abs(C));T-=K,C+=K}}else{var Y=[i.scale(U[0]),i.scale(U[1])],Z=Y[0],V=Y[1];if(D=Z,T=lO({axis:s,ticks:l,bandSize:a,offset:p.offset,entry:M,index:z}),R=V-Z,C=p.size,N={x:i.x,y:T,width:i.width,height:C},Math.abs(E)>0&&Math.abs(R)<Math.abs(E)){var ee=ac(R||E)*(Math.abs(E)-Math.abs(R));R+=ee}}return Ga(Ga(Ga({},M),{},{x:D,y:T,width:R,height:C,value:c?U:U[1],payload:M,background:N},A&&A[z]&&A[z].props),{},{tooltipPayload:[j$(e,M)],tooltipPosition:{x:D+R/2,y:T+C/2}})});return Ga({data:O,layout:g},h)});function _y(r){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(r)}function sfe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function kI(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,W$(n.key),n)}}function ofe(r,t,e){return t&&kI(r.prototype,t),e&&kI(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function EI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Zl(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(e),!0).forEach(function(n){s2(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):EI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function s2(r,t,e){return t=W$(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function W$(r){var t=lfe(r,"string");return _y(t)=="symbol"?t:t+""}function lfe(r,t){if(_y(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(_y(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var H$=function(t,e,n,a,i){var s=t.width,o=t.height,l=t.layout,c=t.children,u=Object.keys(e),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!Do(c,Xc);return u.reduce(function(p,g){var y=e[g],m=y.orientation,v=y.domain,b=y.padding,x=b===void 0?{}:b,S=y.mirror,_=y.reversed,I="".concat(m).concat(S?"Mirror":""),A,O,M,z,U;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var D=v[1]-v[0],T=1/0,R=y.categoricalDomain.sort(lQ);if(R.forEach(function(Y,Z){Z>0&&(T=Math.min((Y||0)-(R[Z-1]||0),T))}),Number.isFinite(T)){var C=T/D,N=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(A=C*N/2),y.padding==="no-gap"){var E=Rh(t.barCategoryGap,C*N),k=C*N/2;A=k-E-(k-E)/N*E}}}a==="xAxis"?O=[n.left+(x.left||0)+(A||0),n.left+n.width-(x.right||0)-(A||0)]:a==="yAxis"?O=l==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(A||0),n.top+n.height-(x.bottom||0)-(A||0)]:O=y.range,_&&(O=[O[1],O[0]]);var P=woe(y,i,h),q=P.scale,H=P.realScaleType;q.domain(v).range(O),_oe(q);var L=Coe(q,Zl(Zl({},y),{},{realScaleType:H}));a==="xAxis"?(U=m==="top"&&!S||m==="bottom"&&S,M=n.left,z=f[I]-U*y.height):a==="yAxis"&&(U=m==="left"&&!S||m==="right"&&S,M=f[I]-U*y.width,z=n.top);var K=Zl(Zl(Zl({},y),L),{},{realScaleType:H,x:M,y:z,scale:q,width:a==="xAxis"?n.width:y.width,height:a==="yAxis"?n.height:y.height});return K.bandSize=Eb(K,L),!y.hide&&a==="xAxis"?f[I]+=(U?-1:1)*K.height:y.hide||(f[I]+=(U?-1:1)*K.width),Zl(Zl({},p),{},s2({},g,K))},{})},V$=function(t,e){var n=t.x,a=t.y,i=e.x,s=e.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},cfe=function(t){var e=t.x1,n=t.y1,a=t.x2,i=t.y2;return V$({x:e,y:n},{x:a,y:i})},G$=(function(){function r(t){sfe(this,r),this.scale=t}return ofe(r,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+l}return this.scale(e)}}},{key:"isInRange",value:function(e){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?e>=a&&e<=i:e>=i&&e<=a}}],[{key:"create",value:function(e){return new r(e)}}])})();s2(G$,"EPS",1e-4);var wj=function(t){var e=Object.keys(t).reduce(function(n,a){return Zl(Zl({},n),{},s2({},a,G$.create(t[a])))},{});return Zl(Zl({},e),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,o=i.position;return Dde(a,function(l,c){return e[c].apply(l,{bandAware:s,position:o})})},isInRange:function(a){return $$(a,function(i,s){return e[s].isInRange(i)})}})};function ufe(r){return(r%180+180)%180}var dfe=function(t){var e=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=ufe(a),s=i*Math.PI/180,o=Math.atan(n/e),l=s>o&&s<Math.PI-o?n/Math.sin(s):e/Math.cos(s);return Math.abs(l)},sS,AI;function ffe(){if(AI)return sS;AI=1;var r=Nf(),t=Uy(),e=Hx();function n(a){return function(i,s,o){var l=Object(i);if(!t(i)){var c=r(s,3);i=e(i),s=function(f){return c(l[f],f,l)}}var u=a(i,s,o);return u>-1?l[c?i[u]:u]:void 0}}return sS=n,sS}var oS,TI;function hfe(){if(TI)return oS;TI=1;var r=F$();function t(e){var n=r(e),a=n%1;return n===n?a?n-a:n:0}return oS=t,oS}var lS,CI;function pfe(){if(CI)return lS;CI=1;var r=iB(),t=Nf(),e=hfe(),n=Math.max;function a(i,s,o){var l=i==null?0:i.length;if(!l)return-1;var c=o==null?0:e(o);return c<0&&(c=n(l+c,0)),r(i,t(s,3),c)}return lS=a,lS}var cS,PI;function mfe(){if(PI)return cS;PI=1;var r=ffe(),t=pfe(),e=r(t);return cS=e,cS}var gfe=mfe();const yfe=In(gfe);var vfe=xL();const bfe=In(vfe);var xfe=bfe(function(r){return{x:r.left,y:r.top,width:r.width,height:r.height}},function(r){return["l",r.left,"t",r.top,"w",r.width,"h",r.height].join("")}),_j=ie.createContext(void 0),Sj=ie.createContext(void 0),K$=ie.createContext(void 0),X$=ie.createContext({}),Y$=ie.createContext(void 0),J$=ie.createContext(0),Z$=ie.createContext(0),OI=function(t){var e=t.state,n=e.xAxisMap,a=e.yAxisMap,i=e.offset,s=t.clipPathId,o=t.children,l=t.width,c=t.height,u=xfe(i);return Je.createElement(_j.Provider,{value:n},Je.createElement(Sj.Provider,{value:a},Je.createElement(X$.Provider,{value:i},Je.createElement(K$.Provider,{value:u},Je.createElement(Y$.Provider,{value:s},Je.createElement(J$.Provider,{value:c},Je.createElement(Z$.Provider,{value:l},o)))))))},wfe=function(){return ie.useContext(Y$)},Q$=function(t){var e=ie.useContext(_j);e==null&&Dh();var n=e[t];return n==null&&Dh(),n},_fe=function(){var t=ie.useContext(_j);return sf(t)},Sfe=function(){var t=ie.useContext(Sj),e=yfe(t,function(n){return $$(n.domain,Number.isFinite)});return e||sf(t)},eU=function(t){var e=ie.useContext(Sj);e==null&&Dh();var n=e[t];return n==null&&Dh(),n},Nfe=function(){var t=ie.useContext(K$);return t},jfe=function(){return ie.useContext(X$)},Nj=function(){return ie.useContext(Z$)},jj=function(){return ie.useContext(J$)};function Vp(r){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(r)}function kfe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Efe(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,rU(n.key),n)}}function Afe(r,t,e){return t&&Efe(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Tfe(r,t,e){return t=Ub(t),Cfe(r,tU()?Reflect.construct(t,e||[],Ub(r).constructor):t.apply(r,e))}function Cfe(r,t){if(t&&(Vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pfe(r)}function Pfe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tU=function(){return!!r})()}function Ub(r){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ub(r)}function Ofe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&b8(r,t)}function b8(r,t){return b8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},b8(r,t)}function II(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function MI(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?II(Object(e),!0).forEach(function(n){kj(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):II(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function kj(r,t,e){return t=rU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function rU(r){var t=Ife(r,"string");return Vp(t)=="symbol"?t:t+""}function Ife(r,t){if(Vp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Mfe(r,t){return Lfe(r)||Dfe(r,t)||Ffe(r,t)||Rfe()}function Rfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ffe(r,t){if(r){if(typeof r=="string")return RI(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return RI(r,t)}}function RI(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Dfe(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Lfe(r){if(Array.isArray(r))return r}function x8(){return x8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},x8.apply(this,arguments)}var Bfe=function(t,e){var n;return Je.isValidElement(t)?n=Je.cloneElement(t,e):Qr(t)?n=t(e):n=Je.createElement("line",x8({},e,{className:"recharts-reference-line-line"})),n},$fe=function(t,e,n,a,i,s,o,l,c){var u=i.x,f=i.y,h=i.width,p=i.height;if(n){var g=c.y,y=t.y.apply(g,{position:s});if(Hc(c,"discard")&&!t.y.isInRange(y))return null;var m=[{x:u+h,y},{x:u,y}];return l==="left"?m.reverse():m}if(e){var v=c.x,b=t.x.apply(v,{position:s});if(Hc(c,"discard")&&!t.x.isInRange(b))return null;var x=[{x:b,y:f+p},{x:b,y:f}];return o==="top"?x.reverse():x}if(a){var S=c.segment,_=S.map(function(I){return t.apply(I,{position:s})});return Hc(c,"discard")&&Ide(_,function(I){return!t.isInRange(I)})?null:_}return null};function Ufe(r){var t=r.x,e=r.y,n=r.segment,a=r.xAxisId,i=r.yAxisId,s=r.shape,o=r.className,l=r.alwaysShow,c=wfe(),u=Q$(a),f=eU(i),h=Nfe();if(!c||!h)return null;Bu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=wj({x:u.scale,y:f.scale}),g=di(t),y=di(e),m=n&&n.length===2,v=$fe(p,g,y,m,h,r.position,u.orientation,f.orientation,r);if(!v)return null;var b=Mfe(v,2),x=b[0],S=x.x,_=x.y,I=b[1],A=I.x,O=I.y,M=Hc(r,"hidden")?"url(#".concat(c,")"):void 0,z=MI(MI({clipPath:M},tn(r,!0)),{},{x1:S,y1:_,x2:A,y2:O});return Je.createElement(ta,{className:dn("recharts-reference-line",o)},Bfe(s,z),ws.renderCallByParent(r,cfe({x1:S,y1:_,x2:A,y2:O})))}var Ej=(function(r){function t(){return kfe(this,t),Tfe(this,t,arguments)}return Ofe(t,r),Afe(t,[{key:"render",value:function(){return Je.createElement(Ufe,this.props)}}])})(Je.Component);kj(Ej,"displayName","ReferenceLine");kj(Ej,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function w8(){return w8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},w8.apply(this,arguments)}function Gp(r){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(r)}function FI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function DI(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?FI(Object(e),!0).forEach(function(n){o2(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):FI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function qfe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function zfe(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,aU(n.key),n)}}function Wfe(r,t,e){return t&&zfe(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Hfe(r,t,e){return t=qb(t),Vfe(r,nU()?Reflect.construct(t,e||[],qb(r).constructor):t.apply(r,e))}function Vfe(r,t){if(t&&(Gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gfe(r)}function Gfe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function nU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nU=function(){return!!r})()}function qb(r){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qb(r)}function Kfe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&_8(r,t)}function _8(r,t){return _8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_8(r,t)}function o2(r,t,e){return t=aU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function aU(r){var t=Xfe(r,"string");return Gp(t)=="symbol"?t:t+""}function Xfe(r,t){if(Gp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Yfe=function(t){var e=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=wj({x:a.scale,y:i.scale}),o=s.apply({x:e,y:n},{bandAware:!0});return Hc(t,"discard")&&!s.isInRange(o)?null:o},l2=(function(r){function t(){return qfe(this,t),Hfe(this,t,arguments)}return Kfe(t,r),Wfe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,o=n.alwaysShow,l=n.clipPathId,c=di(a),u=di(i);if(Bu(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=Yfe(this.props);if(!f)return null;var h=f.x,p=f.y,g=this.props,y=g.shape,m=g.className,v=Hc(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=DI(DI({clipPath:v},tn(this.props,!0)),{},{cx:h,cy:p});return Je.createElement(ta,{className:dn("recharts-reference-dot",m)},t.renderDot(y,b),ws.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])})(Je.Component);o2(l2,"displayName","ReferenceDot");o2(l2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});o2(l2,"renderDot",function(r,t){var e;return Je.isValidElement(r)?e=Je.cloneElement(r,t):Qr(r)?e=r(t):e=Je.createElement(n2,w8({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),e});function S8(){return S8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},S8.apply(this,arguments)}function Kp(r){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(r)}function LI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function BI(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(e),!0).forEach(function(n){c2(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):LI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Jfe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Zfe(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,sU(n.key),n)}}function Qfe(r,t,e){return t&&Zfe(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ehe(r,t,e){return t=zb(t),the(r,iU()?Reflect.construct(t,e||[],zb(r).constructor):t.apply(r,e))}function the(r,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rhe(r)}function rhe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function iU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iU=function(){return!!r})()}function zb(r){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zb(r)}function nhe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&N8(r,t)}function N8(r,t){return N8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},N8(r,t)}function c2(r,t,e){return t=sU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function sU(r){var t=ahe(r,"string");return Kp(t)=="symbol"?t:t+""}function ahe(r,t){if(Kp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var ihe=function(t,e,n,a,i){var s=i.x1,o=i.x2,l=i.y1,c=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var h=wj({x:u.scale,y:f.scale}),p={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},g={x:e?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Hc(i,"discard")&&(!h.isInRange(p)||!h.isInRange(g))?null:V$(p,g)},u2=(function(r){function t(){return Jfe(this,t),ehe(this,t,arguments)}return nhe(t,r),Qfe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,o=n.y2,l=n.className,c=n.alwaysShow,u=n.clipPathId;Bu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=di(a),h=di(i),p=di(s),g=di(o),y=this.props.shape;if(!f&&!h&&!p&&!g&&!y)return null;var m=ihe(f,h,p,g,this.props);if(!m&&!y)return null;var v=Hc(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Je.createElement(ta,{className:dn("recharts-reference-area",l)},t.renderRect(y,BI(BI({clipPath:v},tn(this.props,!0)),m)),ws.renderCallByParent(this.props,m))}}])})(Je.Component);c2(u2,"displayName","ReferenceArea");c2(u2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});c2(u2,"renderRect",function(r,t){var e;return Je.isValidElement(r)?e=Je.cloneElement(r,t):Qr(r)?e=r(t):e=Je.createElement(xj,S8({},t,{className:"recharts-reference-area-rect"})),e});function oU(r,t,e){if(t<1)return[];if(t===1&&e===void 0)return r;for(var n=[],a=0;a<r.length;a+=t)n.push(r[a]);return n}function she(r,t,e){var n={width:r.width+t.width,height:r.height+t.height};return dfe(n,e)}function ohe(r,t,e){var n=e==="width",a=r.x,i=r.y,s=r.width,o=r.height;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function Wb(r,t,e,n,a){if(r*t<r*n||r*t>r*a)return!1;var i=e();return r*(t-r*i/2-n)>=0&&r*(t+r*i/2-a)<=0}function lhe(r,t){return oU(r,t+1)}function che(r,t,e,n,a){for(var i=(n||[]).slice(),s=t.start,o=t.end,l=0,c=1,u=s,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:oU(n,c)};var y=l,m,v=function(){return m===void 0&&(m=e(g,y)),m},b=g.coordinate,x=l===0||Wb(r,b,v,u,o);x||(l=0,u=s,c+=1),x&&(u=b+r*(v()/2+a),l+=c)},h;c<=i.length;)if(h=f(),h)return h.v;return[]}function Sy(r){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sy(r)}function $I(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function ys(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(e),!0).forEach(function(n){uhe(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):$I(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function uhe(r,t,e){return t=dhe(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function dhe(r){var t=fhe(r,"string");return Sy(t)=="symbol"?t:t+""}function fhe(r,t){if(Sy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Sy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function hhe(r,t,e,n,a){for(var i=(n||[]).slice(),s=i.length,o=t.start,l=t.end,c=function(h){var p=i[h],g,y=function(){return g===void 0&&(g=e(p,h)),g};if(h===s-1){var m=r*(p.coordinate+r*y()/2-l);i[h]=p=ys(ys({},p),{},{tickCoord:m>0?p.coordinate-m*r:p.coordinate})}else i[h]=p=ys(ys({},p),{},{tickCoord:p.coordinate});var v=Wb(r,p.tickCoord,y,o,l);v&&(l=p.tickCoord-r*(y()/2+a),i[h]=ys(ys({},p),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return i}function phe(r,t,e,n,a,i){var s=(n||[]).slice(),o=s.length,l=t.start,c=t.end;if(i){var u=n[o-1],f=e(u,o-1),h=r*(u.coordinate+r*f/2-c);s[o-1]=u=ys(ys({},u),{},{tickCoord:h>0?u.coordinate-h*r:u.coordinate});var p=Wb(r,u.tickCoord,function(){return f},l,c);p&&(c=u.tickCoord-r*(f/2+a),s[o-1]=ys(ys({},u),{},{isShow:!0}))}for(var g=i?o-1:o,y=function(b){var x=s[b],S,_=function(){return S===void 0&&(S=e(x,b)),S};if(b===0){var I=r*(x.coordinate-r*_()/2-l);s[b]=x=ys(ys({},x),{},{tickCoord:I<0?x.coordinate-I*r:x.coordinate})}else s[b]=x=ys(ys({},x),{},{tickCoord:x.coordinate});var A=Wb(r,x.tickCoord,_,l,c);A&&(l=x.tickCoord+r*(_()/2+a),s[b]=ys(ys({},x),{},{isShow:!0}))},m=0;m<g;m++)y(m);return s}function Aj(r,t,e){var n=r.tick,a=r.ticks,i=r.viewBox,s=r.minTickGap,o=r.orientation,l=r.interval,c=r.tickFormatter,u=r.unit,f=r.angle;if(!a||!a.length||!n)return[];if(ir(l)||Xh.isSsr)return lhe(a,typeof l=="number"&&ir(l)?l:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",g=u&&p==="width"?jg(u,{fontSize:t,letterSpacing:e}):{width:0,height:0},y=function(x,S){var _=Qr(c)?c(x.value,S):x.value;return p==="width"?she(jg(_,{fontSize:t,letterSpacing:e}),g,f):jg(_,{fontSize:t,letterSpacing:e})[p]},m=a.length>=2?ac(a[1].coordinate-a[0].coordinate):1,v=ohe(i,m,p);return l==="equidistantPreserveStart"?che(m,v,y,a,s):(l==="preserveStart"||l==="preserveStartEnd"?h=phe(m,v,y,a,s,l==="preserveStartEnd"):h=hhe(m,v,y,a,s),h.filter(function(b){return b.isShow}))}var mhe=["viewBox"],ghe=["viewBox"],yhe=["ticks"];function Xp(r){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xp(r)}function Z0(){return Z0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Z0.apply(this,arguments)}function UI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function oi(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(e),!0).forEach(function(n){Tj(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):UI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function uS(r,t){if(r==null)return{};var e=vhe(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function vhe(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function bhe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function qI(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,cU(n.key),n)}}function xhe(r,t,e){return t&&qI(r.prototype,t),e&&qI(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function whe(r,t,e){return t=Hb(t),_he(r,lU()?Reflect.construct(t,e||[],Hb(r).constructor):t.apply(r,e))}function _he(r,t){if(t&&(Xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return She(r)}function She(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function lU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lU=function(){return!!r})()}function Hb(r){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hb(r)}function Nhe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&j8(r,t)}function j8(r,t){return j8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},j8(r,t)}function Tj(r,t,e){return t=cU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function cU(r){var t=jhe(r,"string");return Xp(t)=="symbol"?t:t+""}function jhe(r,t){if(Xp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var ym=(function(r){function t(e){var n;return bhe(this,t),n=whe(this,t,[e]),n.state={fontSize:"",letterSpacing:""},n}return Nhe(t,r),xhe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=uS(n,mhe),o=this.props,l=o.viewBox,c=uS(o,ghe);return!lp(i,l)||!lp(s,c)||!lp(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,u=a.tickSize,f=a.mirror,h=a.tickMargin,p,g,y,m,v,b,x=f?-1:1,S=n.tickSize||u,_=ir(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":p=g=n.coordinate,m=s+ +!f*l,y=m-x*S,b=y-x*h,v=_;break;case"left":y=m=n.coordinate,g=i+ +!f*o,p=g-x*S,v=p-x*h,b=_;break;case"right":y=m=n.coordinate,g=i+ +f*o,p=g+x*S,v=p+x*h,b=_;break;default:p=g=n.coordinate,m=s+ +f*l,y=m+x*S,b=y+x*h,v=_;break}return{line:{x1:p,y1:y,x2:g,y2:m},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,l=n.orientation,c=n.mirror,u=n.axisLine,f=oi(oi(oi({},tn(this.props,!1)),tn(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);f=oi(oi({},f),{},{x1:a,y1:i+h*o,x2:a+s,y2:i+h*o})}else{var p=+(l==="left"&&!c||l==="right"&&c);f=oi(oi({},f),{},{x1:a+p*s,y1:i,x2:a+p*s,y2:i+o})}return Je.createElement("line",Z0({},f,{className:dn("recharts-cartesian-axis-line",hl(u,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,o=this.props,l=o.tickLine,c=o.stroke,u=o.tick,f=o.tickFormatter,h=o.unit,p=Aj(oi(oi({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),m=tn(this.props,!1),v=tn(u,!1),b=oi(oi({},m),{},{fill:"none"},tn(l,!1)),x=p.map(function(S,_){var I=s.getTickLineCoord(S),A=I.line,O=I.tick,M=oi(oi(oi(oi({textAnchor:g,verticalAnchor:y},m),{},{stroke:"none",fill:c},v),O),{},{index:_,payload:S,visibleTicksCount:p.length,tickFormatter:f});return Je.createElement(ta,Z0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},tb(s.props,S,_)),l&&Je.createElement("line",Z0({},b,A,{className:dn("recharts-cartesian-axis-tick-line",hl(l,"className"))})),u&&t.renderTickItem(u,M,"".concat(Qr(f)?f(S.value,_):S.value).concat(h||"")))});return Je.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,o=a.height,l=a.ticksGenerator,c=a.className,u=a.hide;if(u)return null;var f=this.props,h=f.ticks,p=uS(f,yhe),g=h;return Qr(l)&&(g=h&&h.length>0?l(this.props):l(p)),s<=0||o<=0||!g||!g.length?null:Je.createElement(ta,{className:dn("recharts-cartesian-axis",c),ref:function(m){n.layerReference=m}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),ws.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,o=dn(a.className,"recharts-cartesian-axis-tick-value");return Je.isValidElement(n)?s=Je.cloneElement(n,oi(oi({},a),{},{className:o})):Qr(n)?s=n(oi(oi({},a),{},{className:o})):s=Je.createElement(fb,Z0({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])})(ie.Component);Tj(ym,"displayName","CartesianAxis");Tj(ym,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var khe=["x1","y1","x2","y2","key"],Ehe=["offset"];function Lh(r){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(r)}function zI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function _s(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(e),!0).forEach(function(n){Ahe(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):zI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Ahe(r,t,e){return t=The(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function The(r){var t=Che(r,"string");return Lh(t)=="symbol"?t:t+""}function Che(r,t){if(Lh(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function jh(){return jh=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},jh.apply(this,arguments)}function WI(r,t){if(r==null)return{};var e=Phe(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Phe(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}var Ohe=function(t){var e=t.fill;if(!e||e==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.ry;return Je.createElement("rect",{x:a,y:i,ry:l,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function uU(r,t){var e;if(Je.isValidElement(r))e=Je.cloneElement(r,t);else if(Qr(r))e=r(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,o=t.key,l=WI(t,khe),c=tn(l,!1);c.offset;var u=WI(c,Ehe);e=Je.createElement("line",jh({},u,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:o}))}return e}function Ihe(r){var t=r.x,e=r.width,n=r.horizontal,a=n===void 0?!0:n,i=r.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,l){var c=_s(_s({},r),{},{x1:t,y1:o,x2:t+e,y2:o,key:"line-".concat(l),index:l});return uU(a,c)});return Je.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Mhe(r){var t=r.y,e=r.height,n=r.vertical,a=n===void 0?!0:n,i=r.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,l){var c=_s(_s({},r),{},{x1:o,y1:t,x2:o,y2:t+e,key:"line-".concat(l),index:l});return uU(a,c)});return Je.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Rhe(r){var t=r.horizontalFill,e=r.fillOpacity,n=r.x,a=r.y,i=r.width,s=r.height,o=r.horizontalPoints,l=r.horizontal,c=l===void 0?!0:l;if(!c||!t||!t.length)return null;var u=o.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var g=!u[p+1],y=g?a+s-h:u[p+1]-h;if(y<=0)return null;var m=p%t.length;return Je.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:y,width:i,stroke:"none",fill:t[m],fillOpacity:e,className:"recharts-cartesian-grid-bg"})});return Je.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Fhe(r){var t=r.vertical,e=t===void 0?!0:t,n=r.verticalFill,a=r.fillOpacity,i=r.x,s=r.y,o=r.width,l=r.height,c=r.verticalPoints;if(!e||!n||!n.length)return null;var u=c.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var g=!u[p+1],y=g?i+o-h:u[p+1]-h;if(y<=0)return null;var m=p%n.length;return Je.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:y,height:l,stroke:"none",fill:n[m],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Je.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Dhe=function(t,e){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return S$(Aj(_s(_s(_s({},ym.defaultProps),n),{},{ticks:Fu(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,e)},Lhe=function(t,e){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return S$(Aj(_s(_s(_s({},ym.defaultProps),n),{},{ticks:Fu(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,e)},D0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fp(r){var t,e,n,a,i,s,o=Nj(),l=jj(),c=jfe(),u=_s(_s({},r),{},{stroke:(t=r.stroke)!==null&&t!==void 0?t:D0.stroke,fill:(e=r.fill)!==null&&e!==void 0?e:D0.fill,horizontal:(n=r.horizontal)!==null&&n!==void 0?n:D0.horizontal,horizontalFill:(a=r.horizontalFill)!==null&&a!==void 0?a:D0.horizontalFill,vertical:(i=r.vertical)!==null&&i!==void 0?i:D0.vertical,verticalFill:(s=r.verticalFill)!==null&&s!==void 0?s:D0.verticalFill,x:ir(r.x)?r.x:c.left,y:ir(r.y)?r.y:c.top,width:ir(r.width)?r.width:c.width,height:ir(r.height)?r.height:c.height}),f=u.x,h=u.y,p=u.width,g=u.height,y=u.syncWithTicks,m=u.horizontalValues,v=u.verticalValues,b=_fe(),x=Sfe();if(!ir(p)||p<=0||!ir(g)||g<=0||!ir(f)||f!==+f||!ir(h)||h!==+h)return null;var S=u.verticalCoordinatesGenerator||Dhe,_=u.horizontalCoordinatesGenerator||Lhe,I=u.horizontalPoints,A=u.verticalPoints;if((!I||!I.length)&&Qr(_)){var O=m&&m.length,M=_({yAxis:x?_s(_s({},x),{},{ticks:O?m:x.ticks}):void 0,width:o,height:l,offset:c},O?!0:y);Bu(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lh(M),"]")),Array.isArray(M)&&(I=M)}if((!A||!A.length)&&Qr(S)){var z=v&&v.length,U=S({xAxis:b?_s(_s({},b),{},{ticks:z?v:b.ticks}):void 0,width:o,height:l,offset:c},z?!0:y);Bu(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lh(U),"]")),Array.isArray(U)&&(A=U)}return Je.createElement("g",{className:"recharts-cartesian-grid"},Je.createElement(Ohe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Je.createElement(Ihe,jh({},u,{offset:c,horizontalPoints:I,xAxis:b,yAxis:x})),Je.createElement(Mhe,jh({},u,{offset:c,verticalPoints:A,xAxis:b,yAxis:x})),Je.createElement(Rhe,jh({},u,{horizontalPoints:I})),Je.createElement(Fhe,jh({},u,{verticalPoints:A})))}fp.displayName="CartesianGrid";var Bhe=["type","layout","connectNulls","ref"],$he=["key"];function Yp(r){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(r)}function HI(r,t){if(r==null)return{};var e=Uhe(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function Uhe(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Tg(){return Tg=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Tg.apply(this,arguments)}function VI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Mo(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(e),!0).forEach(function(n){Ql(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):VI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function L0(r){return Hhe(r)||Whe(r)||zhe(r)||qhe()}function qhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zhe(r,t){if(r){if(typeof r=="string")return k8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return k8(r,t)}}function Whe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Hhe(r){if(Array.isArray(r))return k8(r)}function k8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Vhe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function GI(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,fU(n.key),n)}}function Ghe(r,t,e){return t&&GI(r.prototype,t),e&&GI(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Khe(r,t,e){return t=Vb(t),Xhe(r,dU()?Reflect.construct(t,e||[],Vb(r).constructor):t.apply(r,e))}function Xhe(r,t){if(t&&(Yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yhe(r)}function Yhe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function dU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dU=function(){return!!r})()}function Vb(r){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vb(r)}function Jhe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&E8(r,t)}function E8(r,t){return E8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},E8(r,t)}function Ql(r,t,e){return t=fU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function fU(r){var t=Zhe(r,"string");return Yp(t)=="symbol"?t:t+""}function Zhe(r,t){if(Yp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var d2=(function(r){function t(){var e;Vhe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=Khe(this,t,[].concat(a)),Ql(e,"state",{isAnimationFinished:!0,totalLength:0}),Ql(e,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Ql(e,"getStrokeDasharray",function(s,o,l){var c=l.reduce(function(v,b){return v+b});if(!c)return e.generateSimpleStrokeDasharray(o,s);for(var u=Math.floor(s/c),f=s%c,h=o-s,p=[],g=0,y=0;g<l.length;y+=l[g],++g)if(y+l[g]>f){p=[].concat(L0(l.slice(0,g)),[f-y]);break}var m=p.length%2===0?[0,h]:[h];return[].concat(L0(t.repeat(l,u)),L0(p),m).map(function(v){return"".concat(v,"px")}).join(", ")}),Ql(e,"id",fm("recharts-line-")),Ql(e,"pathRef",function(s){e.mainCurve=s}),Ql(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),Ql(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return Jhe(t,r),Ghe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,o=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,f=pl(u,Vy);if(!f)return null;var h=function(y,m){return{x:y.x,y:y.y,value:y.value,errorVal:Gs(y.payload,m)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Je.createElement(ta,p,f.map(function(g){return Je.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,c=o.points,u=o.dataKey,f=tn(this.props,!1),h=tn(l,!0),p=c.map(function(y,m){var v=Mo(Mo(Mo({key:"dot-".concat(m),r:3},f),h),{},{index:m,cx:y.x,cy:y.y,value:y.value,dataKey:u,payload:y.payload,points:c});return t.renderDotItem(l,v)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Je.createElement(ta,Tg({className:"recharts-line-dots",key:"dots"},g),p)}},{key:"renderCurveStatically",value:function(n,a,i,s){var o=this.props,l=o.type,c=o.layout,u=o.connectNulls;o.ref;var f=HI(o,Bhe),h=Mo(Mo(Mo({},tn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},s),{},{type:l,layout:c,connectNulls:u});return Je.createElement(dp,Tg({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,s=this.props,o=s.points,l=s.strokeDasharray,c=s.isAnimationActive,u=s.animationBegin,f=s.animationDuration,h=s.animationEasing,p=s.animationId,g=s.animateNewValues,y=s.width,m=s.height,v=this.state,b=v.prevPoints,x=v.totalLength;return Je.createElement(Kc,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var _=S.t;if(b){var I=b.length/o.length,A=o.map(function(D,T){var R=Math.floor(T*I);if(b[R]){var C=b[R],N=Yi(C.x,D.x),E=Yi(C.y,D.y);return Mo(Mo({},D),{},{x:N(_),y:E(_)})}if(g){var k=Yi(y*2,D.x),P=Yi(m/2,D.y);return Mo(Mo({},D),{},{x:k(_),y:P(_)})}return Mo(Mo({},D),{},{x:D.x,y:D.y})});return i.renderCurveStatically(A,n,a)}var O=Yi(0,x),M=O(_),z;if(l){var U="".concat(l).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});z=i.getStrokeDasharray(M,x,U)}else z=i.generateSimpleStrokeDasharray(x,M);return i.renderCurveStatically(o,n,a,{strokeDasharray:z})})}},{key:"renderCurve",value:function(n,a){var i=this.props,s=i.points,o=i.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return o&&s&&s.length&&(!c&&u>0||!$p(c,s))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,o=a.points,l=a.className,c=a.xAxis,u=a.yAxis,f=a.top,h=a.left,p=a.width,g=a.height,y=a.isAnimationActive,m=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,x=dn("recharts-line",l),S=c&&c.allowDataOverflow,_=u&&u.allowDataOverflow,I=S||_,A=nn(m)?this.id:m,O=(n=tn(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},M=O.r,z=M===void 0?3:M,U=O.strokeWidth,D=U===void 0?2:U,T=jL(s)?s:{},R=T.clipDot,C=R===void 0?!0:R,N=z*2+D;return Je.createElement(ta,{className:x},S||_?Je.createElement("defs",null,Je.createElement("clipPath",{id:"clipPath-".concat(A)},Je.createElement("rect",{x:S?h:h-p/2,y:_?f:f-g/2,width:S?p:p*2,height:_?g:g*2})),!C&&Je.createElement("clipPath",{id:"clipPath-dots-".concat(A)},Je.createElement("rect",{x:h-N/2,y:f-N/2,width:p+N,height:g+N}))):null,!b&&this.renderCurve(I,A),this.renderErrorBar(I,A),(b||s)&&this.renderDots(I,C,A),(!y||v)&&qu.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(L0(n),[0]):n,s=[],o=0;o<a;++o)s=[].concat(L0(s),L0(i));return s}},{key:"renderDotItem",value:function(n,a){var i;if(Je.isValidElement(n))i=Je.cloneElement(n,a);else if(Qr(n))i=n(a);else{var s=a.key,o=HI(a,$he),l=dn("recharts-line-dot",typeof n!="boolean"?n.className:"");i=Je.createElement(n2,Tg({key:s},o,{className:l}))}return i}}])})(ie.PureComponent);Ql(d2,"displayName","Line");Ql(d2,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Xh.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ql(d2,"getComposedData",function(r){var t=r.props,e=r.xAxis,n=r.yAxis,a=r.xAxisTicks,i=r.yAxisTicks,s=r.dataKey,o=r.bandSize,l=r.displayedData,c=r.offset,u=t.layout,f=l.map(function(h,p){var g=Gs(h,s);return u==="horizontal"?{x:kb({axis:e,ticks:a,bandSize:o,entry:h,index:p}),y:nn(g)?null:n.scale(g),value:g,payload:h}:{x:nn(g)?null:e.scale(g),y:kb({axis:n,ticks:i,bandSize:o,entry:h,index:p}),value:g,payload:h}});return Mo({points:f,layout:u},c)});var Qhe=["layout","type","stroke","connectNulls","isRange","ref"],e0e=["key"],hU;function Jp(r){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(r)}function pU(r,t){if(r==null)return{};var e=t0e(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function t0e(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function kh(){return kh=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},kh.apply(this,arguments)}function KI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Qd(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(e),!0).forEach(function(n){Bc(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):KI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function r0e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function XI(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,gU(n.key),n)}}function n0e(r,t,e){return t&&XI(r.prototype,t),e&&XI(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function a0e(r,t,e){return t=Gb(t),i0e(r,mU()?Reflect.construct(t,e||[],Gb(r).constructor):t.apply(r,e))}function i0e(r,t){if(t&&(Jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s0e(r)}function s0e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function mU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mU=function(){return!!r})()}function Gb(r){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gb(r)}function o0e(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&A8(r,t)}function A8(r,t){return A8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},A8(r,t)}function Bc(r,t,e){return t=gU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function gU(r){var t=l0e(r,"string");return Jp(t)=="symbol"?t:t+""}function l0e(r,t){if(Jp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var od=(function(r){function t(){var e;r0e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=a0e(this,t,[].concat(a)),Bc(e,"state",{isAnimationFinished:!0}),Bc(e,"id",fm("recharts-area-")),Bc(e,"handleAnimationEnd",function(){var s=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),Qr(s)&&s()}),Bc(e,"handleAnimationStart",function(){var s=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),Qr(s)&&s()}),e}return o0e(t,r),n0e(t,[{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,h=tn(this.props,!1),p=tn(c,!0),g=u.map(function(m,v){var b=Qd(Qd(Qd({key:"dot-".concat(v),r:3},h),p),{},{index:v,cx:m.x,cy:m.y,dataKey:f,value:m.value,payload:m.payload,points:u});return t.renderDotItem(c,b)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Je.createElement(ta,kh({className:"recharts-area-dots"},y),g)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,s=a.points,o=a.strokeWidth,l=s[0].x,c=s[s.length-1].x,u=n*Math.abs(l-c),f=cf(s.map(function(h){return h.y||0}));return ir(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(cf(i.map(function(h){return h.y||0})),f)),ir(f)?Je.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,s=a.points,o=a.strokeWidth,l=s[0].y,c=s[s.length-1].y,u=n*Math.abs(l-c),f=cf(s.map(function(h){return h.x||0}));return ir(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(cf(i.map(function(h){return h.x||0})),f)),ir(f)?Je.createElement("rect",{x:0,y:l<c?l:l-u,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,s){var o=this.props,l=o.layout,c=o.type,u=o.stroke,f=o.connectNulls,h=o.isRange;o.ref;var p=pU(o,Qhe);return Je.createElement(ta,{clipPath:i?"url(#clipPath-".concat(s,")"):null},Je.createElement(dp,kh({},tn(p,!0),{points:n,connectNulls:f,type:c,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&Je.createElement(dp,kh({},tn(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:n})),u!=="none"&&h&&Je.createElement(dp,kh({},tn(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=s.animationBegin,f=s.animationDuration,h=s.animationEasing,p=s.animationId,g=this.state,y=g.prevPoints,m=g.prevBaseLine;return Je.createElement(Kc,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var b=v.t;if(y){var x=y.length/o.length,S=o.map(function(O,M){var z=Math.floor(M*x);if(y[z]){var U=y[z],D=Yi(U.x,O.x),T=Yi(U.y,O.y);return Qd(Qd({},O),{},{x:D(b),y:T(b)})}return O}),_;if(ir(l)&&typeof l=="number"){var I=Yi(m,l);_=I(b)}else if(nn(l)||dm(l)){var A=Yi(m,0);_=A(b)}else _=l.map(function(O,M){var z=Math.floor(M*x);if(m[z]){var U=m[z],D=Yi(U.x,O.x),T=Yi(U.y,O.y);return Qd(Qd({},O),{},{x:D(b),y:T(b)})}return O});return i.renderAreaStatically(S,_,n,a)}return Je.createElement(ta,null,Je.createElement("defs",null,Je.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),Je.createElement(ta,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(o,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,s=i.points,o=i.baseLine,l=i.isAnimationActive,c=this.state,u=c.prevPoints,f=c.prevBaseLine,h=c.totalLength;return l&&s&&s.length&&(!u&&h>0||!$p(u,s)||!$p(f,o))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(s,o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,o=a.points,l=a.className,c=a.top,u=a.left,f=a.xAxis,h=a.yAxis,p=a.width,g=a.height,y=a.isAnimationActive,m=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,x=dn("recharts-area",l),S=f&&f.allowDataOverflow,_=h&&h.allowDataOverflow,I=S||_,A=nn(m)?this.id:m,O=(n=tn(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},M=O.r,z=M===void 0?3:M,U=O.strokeWidth,D=U===void 0?2:U,T=jL(s)?s:{},R=T.clipDot,C=R===void 0?!0:R,N=z*2+D;return Je.createElement(ta,{className:x},S||_?Je.createElement("defs",null,Je.createElement("clipPath",{id:"clipPath-".concat(A)},Je.createElement("rect",{x:S?u:u-p/2,y:_?c:c-g/2,width:S?p:p*2,height:_?g:g*2})),!C&&Je.createElement("clipPath",{id:"clipPath-dots-".concat(A)},Je.createElement("rect",{x:u-N/2,y:c-N/2,width:p+N,height:g+N}))):null,b?null:this.renderArea(I,A),(s||b)&&this.renderDots(I,C,A),(!y||v)&&qu.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(ie.PureComponent);hU=od;Bc(od,"displayName","Area");Bc(od,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Xh.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Bc(od,"getBaseValue",function(r,t,e,n){var a=r.layout,i=r.baseValue,s=t.props.baseValue,o=s??i;if(ir(o)&&typeof o=="number")return o;var l=a==="horizontal"?n:e,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),f=Math.min(c[0],c[1]);return o==="dataMin"?f:o==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});Bc(od,"getComposedData",function(r){var t=r.props,e=r.item,n=r.xAxis,a=r.yAxis,i=r.xAxisTicks,s=r.yAxisTicks,o=r.bandSize,l=r.dataKey,c=r.stackedData,u=r.dataStartIndex,f=r.displayedData,h=r.offset,p=t.layout,g=c&&c.length,y=hU.getBaseValue(t,e,n,a),m=p==="horizontal",v=!1,b=f.map(function(S,_){var I;g?I=c[u+_]:(I=Gs(S,l),Array.isArray(I)?v=!0:I=[y,I]);var A=I[1]==null||g&&Gs(S,l)==null;return m?{x:kb({axis:n,ticks:i,bandSize:o,entry:S,index:_}),y:A?null:a.scale(I[1]),value:I,payload:S}:{x:A?null:n.scale(I[1]),y:kb({axis:a,ticks:s,bandSize:o,entry:S,index:_}),value:I,payload:S}}),x;return g||v?x=b.map(function(S){var _=Array.isArray(S.value)?S.value[0]:null;return m?{x:S.x,y:_!=null&&S.y!=null?a.scale(_):null}:{x:_!=null?n.scale(_):null,y:S.y}}):x=m?a.scale(y):n.scale(y),Qd({points:b,baseLine:x,layout:p,isRange:v},h)});Bc(od,"renderDotItem",function(r,t){var e;if(Je.isValidElement(r))e=Je.cloneElement(r,t);else if(Qr(r))e=r(t);else{var n=dn("recharts-area-dot",typeof r!="boolean"?r.className:""),a=t.key,i=pU(t,e0e);e=Je.createElement(n2,kh({},i,{key:a,className:n}))}return e});function Zp(r){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(r)}function c0e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function u0e(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,bU(n.key),n)}}function d0e(r,t,e){return t&&u0e(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function f0e(r,t,e){return t=Kb(t),h0e(r,yU()?Reflect.construct(t,e||[],Kb(r).constructor):t.apply(r,e))}function h0e(r,t){if(t&&(Zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p0e(r)}function p0e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function yU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yU=function(){return!!r})()}function Kb(r){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kb(r)}function m0e(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&T8(r,t)}function T8(r,t){return T8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},T8(r,t)}function vU(r,t,e){return t=bU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function bU(r){var t=g0e(r,"string");return Zp(t)=="symbol"?t:t+""}function g0e(r,t){if(Zp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function C8(){return C8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},C8.apply(this,arguments)}function y0e(r){var t=r.xAxisId,e=Nj(),n=jj(),a=Q$(t);return a==null?null:ie.createElement(ym,C8({},a,{className:dn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:e,height:n},ticksGenerator:function(s){return Fu(s,!0)}}))}var zu=(function(r){function t(){return c0e(this,t),f0e(this,t,arguments)}return m0e(t,r),d0e(t,[{key:"render",value:function(){return ie.createElement(y0e,this.props)}}])})(ie.Component);vU(zu,"displayName","XAxis");vU(zu,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qp(r){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(r)}function v0e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function b0e(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,_U(n.key),n)}}function x0e(r,t,e){return t&&b0e(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function w0e(r,t,e){return t=Xb(t),_0e(r,xU()?Reflect.construct(t,e||[],Xb(r).constructor):t.apply(r,e))}function _0e(r,t){if(t&&(Qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S0e(r)}function S0e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xU=function(){return!!r})()}function Xb(r){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xb(r)}function N0e(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&P8(r,t)}function P8(r,t){return P8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},P8(r,t)}function wU(r,t,e){return t=_U(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function _U(r){var t=j0e(r,"string");return Qp(t)=="symbol"?t:t+""}function j0e(r,t){if(Qp(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function O8(){return O8=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},O8.apply(this,arguments)}var k0e=function(t){var e=t.yAxisId,n=Nj(),a=jj(),i=eU(e);return i==null?null:ie.createElement(ym,O8({},i,{className:dn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Fu(o,!0)}}))},Wu=(function(r){function t(){return v0e(this,t),w0e(this,t,arguments)}return N0e(t,r),x0e(t,[{key:"render",value:function(){return ie.createElement(k0e,this.props)}}])})(ie.Component);wU(Wu,"displayName","YAxis");wU(Wu,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function YI(r){return C0e(r)||T0e(r)||A0e(r)||E0e()}function E0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A0e(r,t){if(r){if(typeof r=="string")return I8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return I8(r,t)}}function T0e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function C0e(r){if(Array.isArray(r))return I8(r)}function I8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var M8=function(t,e,n,a,i){var s=pl(t,Ej),o=pl(t,l2),l=[].concat(YI(s),YI(o)),c=pl(t,u2),u="".concat(a,"Id"),f=a[0],h=e;if(l.length&&(h=l.reduce(function(y,m){if(m.props[u]===n&&Hc(m.props,"extendDomain")&&ir(m.props[f])){var v=m.props[f];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},h)),c.length){var p="".concat(f,"1"),g="".concat(f,"2");h=c.reduce(function(y,m){if(m.props[u]===n&&Hc(m.props,"extendDomain")&&ir(m.props[p])&&ir(m.props[g])){var v=m.props[p],b=m.props[g];return[Math.min(y[0],v,b),Math.max(y[1],v,b)]}return y},h)}return i&&i.length&&(h=i.reduce(function(y,m){return ir(m)?[Math.min(y[0],m),Math.max(y[1],m)]:y},h)),h},dS={exports:{}},JI;function P0e(){return JI||(JI=1,(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function a(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new a(u,f||l,h),g=e?e+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)t.call(u,f)&&c.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=e?e+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(c){var u=e?e+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,h,p,g){var y=e?e+c:c;if(!this._events[y])return!1;var m=this._events[y],v=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,f),!0;case 4:return m.fn.call(m.context,u,f,h),!0;case 5:return m.fn.call(m.context,u,f,h,p),!0;case 6:return m.fn.call(m.context,u,f,h,p,g),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var S=m.length,_;for(x=0;x<S;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),v){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,u);break;case 3:m[x].fn.call(m[x].context,u,f);break;case 4:m[x].fn.call(m[x].context,u,f,h);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];m[x].fn.apply(m[x].context,b)}}return!0},o.prototype.on=function(c,u,f){return i(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return i(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,h){var p=e?e+c:c;if(!this._events[p])return this;if(!u)return s(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!h||g.once)&&(!f||g.context===f)&&s(this,p);else{for(var y=0,m=[],v=g.length;y<v;y++)(g[y].fn!==u||h&&!g[y].once||f&&g[y].context!==f)&&m.push(g[y]);m.length?this._events[p]=m.length===1?m[0]:m:s(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=e?e+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(dS)),dS.exports}var O0e=P0e();const I0e=In(O0e);var fS=new I0e,hS="recharts.syncMouseEvents";function Ny(r){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ny(r)}function M0e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function R0e(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,SU(n.key),n)}}function F0e(r,t,e){return t&&R0e(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function pS(r,t,e){return t=SU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function SU(r){var t=D0e(r,"string");return Ny(t)=="symbol"?t:t+""}function D0e(r,t){if(Ny(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(Ny(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var L0e=(function(){function r(){M0e(this,r),pS(this,"activeIndex",0),pS(this,"coordinateList",[]),pS(this,"layout","horizontal")}return F0e(r,[{key:"setDetails",value:function(e){var n,a=e.coordinateList,i=a===void 0?null:a,s=e.container,o=s===void 0?null:s,l=e.layout,c=l===void 0?null:l,u=e.offset,f=u===void 0?null:u,h=e.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(this.coordinateList.length!==0)switch(e.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,o=a.height,l=this.coordinateList[this.activeIndex].coordinate,c=((e=window)===null||e===void 0?void 0:e.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+l+c,h=s+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])})();function B0e(r,t,e){if(e==="number"&&t===!0&&Array.isArray(r)){var n=r==null?void 0:r[0],a=r==null?void 0:r[1];if(n&&a&&ir(n)&&ir(a))return!0}return!1}function $0e(r,t,e,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?t.x-a:e.left+.5,y:r==="horizontal"?e.top+.5:t.y-a,width:r==="horizontal"?n:e.width-1,height:r==="horizontal"?e.height-1:n}}function NU(r){var t=r.cx,e=r.cy,n=r.radius,a=r.startAngle,i=r.endAngle,s=Zi(t,e,n,a),o=Zi(t,e,n,i);return{points:[s,o],cx:t,cy:e,radius:n,startAngle:a,endAngle:i}}function U0e(r,t,e){var n,a,i,s;if(r==="horizontal")n=t.x,i=n,a=e.top,s=e.top+e.height;else if(r==="vertical")a=t.y,s=a,n=e.left,i=e.left+e.width;else if(t.cx!=null&&t.cy!=null)if(r==="centric"){var o=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,f=t.angle,h=Zi(o,l,c,f),p=Zi(o,l,u,f);n=h.x,a=h.y,i=p.x,s=p.y}else return NU(t);return[{x:n,y:a},{x:i,y:s}]}function jy(r){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jy(r)}function ZI(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function ov(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ZI(Object(e),!0).forEach(function(n){q0e(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ZI(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function q0e(r,t,e){return t=z0e(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function z0e(r){var t=W0e(r,"string");return jy(t)=="symbol"?t:t+""}function W0e(r,t){if(jy(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(jy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function H0e(r){var t,e,n=r.element,a=r.tooltipEventType,i=r.isActive,s=r.activeCoordinate,o=r.activePayload,l=r.offset,c=r.activeTooltipIndex,u=r.tooltipAxisBandSize,f=r.layout,h=r.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(e=n.type.defaultProps)===null||e===void 0?void 0:e.cursor;if(!n||!p||!i||!s||h!=="ScatterChart"&&a!=="axis")return null;var g,y=dp;if(h==="ScatterChart")g=s,y=Iue;else if(h==="BarChart")g=$0e(f,s,l,u),y=xj;else if(f==="radial"){var m=NU(s),v=m.cx,b=m.cy,x=m.radius,S=m.startAngle,_=m.endAngle;g={cx:v,cy:b,startAngle:S,endAngle:_,innerRadius:x,outerRadius:x},y=A$}else g={points:U0e(f,s,l)},y=dp;var I=ov(ov(ov(ov({stroke:"#ccc",pointerEvents:"none"},l),g),tn(p,!1)),{},{payload:o,payloadIndex:c,className:dn("recharts-tooltip-cursor",p.className)});return ie.isValidElement(p)?ie.cloneElement(p,I):ie.createElement(y,I)}var V0e=["item"],G0e=["children","className","width","height","style","compact","title","desc"];function em(r){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(r)}function Q0(){return Q0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Q0.apply(this,arguments)}function QI(r,t){return Y0e(r)||X0e(r,t)||kU(r,t)||K0e()}function K0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0e(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(e=e.call(r)).next,t!==0)for(;!(l=(n=i.call(e)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}function Y0e(r){if(Array.isArray(r))return r}function eM(r,t){if(r==null)return{};var e=J0e(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function J0e(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Z0e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Q0e(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,EU(n.key),n)}}function epe(r,t,e){return t&&Q0e(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function tpe(r,t,e){return t=Yb(t),rpe(r,jU()?Reflect.construct(t,e||[],Yb(r).constructor):t.apply(r,e))}function rpe(r,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return npe(r)}function npe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function jU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jU=function(){return!!r})()}function Yb(r){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yb(r)}function ape(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&R8(r,t)}function R8(r,t){return R8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R8(r,t)}function tm(r){return ope(r)||spe(r)||kU(r)||ipe()}function ipe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kU(r,t){if(r){if(typeof r=="string")return F8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return F8(r,t)}}function spe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function ope(r){if(Array.isArray(r))return F8(r)}function F8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function tM(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function It(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(e),!0).forEach(function(n){Br(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):tM(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Br(r,t,e){return t=EU(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function EU(r){var t=lpe(r,"string");return em(t)=="symbol"?t:t+""}function lpe(r,t){if(em(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(em(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var cpe={xAxis:["bottom","top"],yAxis:["left","right"]},upe={width:"100%",height:"100%"},AU={x:0,y:0};function lv(r){return r}var dpe=function(t,e){return e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius},fpe=function(t,e,n,a){var i=e.find(function(u){return u&&u.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,o=a.radius;return It(It(It({},a),Zi(a.cx,a.cy,o,s)),{},{angle:s,radius:o})}var l=i.coordinate,c=a.angle;return It(It(It({},a),Zi(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return AU},f2=function(t,e){var n=e.graphicalItems,a=e.dataStartIndex,i=e.dataEndIndex,s=(n??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(tm(o),tm(c)):o},[]);return s.length>0?s:t&&t.length&&ir(a)&&ir(i)?t.slice(a,i+1):[]};function TU(r){return r==="number"?[0,"auto"]:void 0}var D8=function(t,e,n,a){var i=t.graphicalItems,s=t.tooltipAxis,o=f2(e,t);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:e;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=f===void 0?o:f;h=Qv(p,s.dataKey,a)}else h=f&&f[n]||o[n];return h?[].concat(tm(l),[j$(c,h)]):l},[])},rM=function(t,e,n,a){var i=a||{x:t.chartX,y:t.chartY},s=dpe(i,n),o=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,u=moe(s,o,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,h=D8(t,e,u,f),p=fpe(n,o,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},hpe=function(t,e){var n=e.axes,a=e.graphicalItems,i=e.axisType,s=e.axisIdKey,o=e.stackGroups,l=e.dataStartIndex,c=e.dataEndIndex,u=t.layout,f=t.children,h=t.stackOffset,p=_$(u,i);return n.reduce(function(g,y){var m,v=y.type.defaultProps!==void 0?It(It({},y.type.defaultProps),y.props):y.props,b=v.type,x=v.dataKey,S=v.allowDataOverflow,_=v.allowDuplicatedCategory,I=v.scale,A=v.ticks,O=v.includeHidden,M=v[s];if(g[M])return g;var z=f2(t.data,{graphicalItems:a.filter(function(L){var K,Y=s in L.props?L.props[s]:(K=L.type.defaultProps)===null||K===void 0?void 0:K[s];return Y===M}),dataStartIndex:l,dataEndIndex:c}),U=z.length,D,T,R;B0e(v.domain,S,b)&&(D=e8(v.domain,null,S),p&&(b==="number"||I!=="auto")&&(R=Eg(z,x,"category")));var C=TU(b);if(!D||D.length===0){var N,E=(N=v.domain)!==null&&N!==void 0?N:C;if(x){if(D=Eg(z,x,b),b==="category"&&p){var k=oQ(D);_&&k?(T=D,D=Fb(0,U)):_||(D=dO(E,D,y).reduce(function(L,K){return L.indexOf(K)>=0?L:[].concat(tm(L),[K])},[]))}else if(b==="category")_?D=D.filter(function(L){return L!==""&&!nn(L)}):D=dO(E,D,y).reduce(function(L,K){return L.indexOf(K)>=0||K===""||nn(K)?L:[].concat(tm(L),[K])},[]);else if(b==="number"){var P=xoe(z,a.filter(function(L){var K,Y,Z=s in L.props?L.props[s]:(K=L.type.defaultProps)===null||K===void 0?void 0:K[s],V="hide"in L.props?L.props.hide:(Y=L.type.defaultProps)===null||Y===void 0?void 0:Y.hide;return Z===M&&(O||!V)}),x,i,u);P&&(D=P)}p&&(b==="number"||I!=="auto")&&(R=Eg(z,x,"category"))}else p?D=Fb(0,U):o&&o[M]&&o[M].hasStack&&b==="number"?D=h==="expand"?[0,1]:N$(o[M].stackGroups,l,c):D=w$(z,a.filter(function(L){var K=s in L.props?L.props[s]:L.type.defaultProps[s],Y="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return K===M&&(O||!Y)}),b,u,!0);if(b==="number")D=M8(f,D,M,i,A),E&&(D=e8(E,D,S));else if(b==="category"&&E){var q=E,H=D.every(function(L){return q.indexOf(L)>=0});H&&(D=q)}}return It(It({},g),{},Br({},M,It(It({},v),{},{axisType:i,domain:D,categoricalDomain:R,duplicateDomain:T,originalDomain:(m=v.domain)!==null&&m!==void 0?m:C,isCategorical:p,layout:u})))},{})},ppe=function(t,e){var n=e.graphicalItems,a=e.Axis,i=e.axisType,s=e.axisIdKey,o=e.stackGroups,l=e.dataStartIndex,c=e.dataEndIndex,u=t.layout,f=t.children,h=f2(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=h.length,g=_$(u,i),y=-1;return n.reduce(function(m,v){var b=v.type.defaultProps!==void 0?It(It({},v.type.defaultProps),v.props):v.props,x=b[s],S=TU("number");if(!m[x]){y++;var _;return g?_=Fb(0,p):o&&o[x]&&o[x].hasStack?(_=N$(o[x].stackGroups,l,c),_=M8(f,_,x,i)):(_=e8(S,w$(h,n.filter(function(I){var A,O,M=s in I.props?I.props[s]:(A=I.type.defaultProps)===null||A===void 0?void 0:A[s],z="hide"in I.props?I.props.hide:(O=I.type.defaultProps)===null||O===void 0?void 0:O.hide;return M===x&&!z}),"number",u),a.defaultProps.allowDataOverflow),_=M8(f,_,x,i)),It(It({},m),{},Br({},x,It(It({axisType:i},a.defaultProps),{},{hide:!0,orientation:hl(cpe,"".concat(i,".").concat(y%2),null),domain:_,originalDomain:S,isCategorical:g,layout:u})))}return m},{})},mpe=function(t,e){var n=e.axisType,a=n===void 0?"xAxis":n,i=e.AxisComp,s=e.graphicalItems,o=e.stackGroups,l=e.dataStartIndex,c=e.dataEndIndex,u=t.children,f="".concat(a,"Id"),h=pl(u,i),p={};return h&&h.length?p=hpe(t,{axes:h,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(p=ppe(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),p},gpe=function(t){var e=sf(t),n=Fu(e,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:GN(n,function(a){return a.coordinate}),tooltipAxis:e,tooltipAxisBandSize:Eb(e,n)}},nM=function(t){var e=t.children,n=t.defaultShowTooltip,a=Do(e,Wp),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},ype=function(t){return!t||!t.length?!1:t.some(function(e){var n=Lu(e&&e.type);return n&&n.indexOf("Bar")>=0})},aM=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},vpe=function(t,e){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,o=t.yAxisMap,l=o===void 0?{}:o,c=n.width,u=n.height,f=n.children,h=n.margin||{},p=Do(f,Wp),g=Do(f,$u),y=Object.keys(l).reduce(function(_,I){var A=l[I],O=A.orientation;return!A.mirror&&!A.hide?It(It({},_),{},Br({},O,_[O]+A.width)):_},{left:h.left||0,right:h.right||0}),m=Object.keys(s).reduce(function(_,I){var A=s[I],O=A.orientation;return!A.mirror&&!A.hide?It(It({},_),{},Br({},O,hl(_,"".concat(O))+A.height)):_},{top:h.top||0,bottom:h.bottom||0}),v=It(It({},m),y),b=v.bottom;p&&(v.bottom+=p.props.height||Wp.defaultProps.height),g&&e&&(v=voe(v,a,n,e));var x=c-v.left-v.right,S=u-v.top-v.bottom;return It(It({brushBottom:b},v),{},{width:Math.max(x,0),height:Math.max(S,0)})},bpe=function(t,e){if(e==="xAxis")return t[e].width;if(e==="yAxis")return t[e].height},CU=function(t){var e=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=t.axisComponents,c=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,h=function(v,b){var x=b.graphicalItems,S=b.stackGroups,_=b.offset,I=b.updateId,A=b.dataStartIndex,O=b.dataEndIndex,M=v.barSize,z=v.layout,U=v.barGap,D=v.barCategoryGap,T=v.maxBarSize,R=aM(z),C=R.numericAxisName,N=R.cateAxisName,E=ype(x),k=[];return x.forEach(function(P,q){var H=f2(v.data,{graphicalItems:[P],dataStartIndex:A,dataEndIndex:O}),L=P.type.defaultProps!==void 0?It(It({},P.type.defaultProps),P.props):P.props,K=L.dataKey,Y=L.maxBarSize,Z=L["".concat(C,"Id")],V=L["".concat(N,"Id")],ee={},B=l.reduce(function(Oe,Me){var Re=b["".concat(Me.axisType,"Map")],He=L["".concat(Me.axisType,"Id")];Re&&Re[He]||Me.axisType==="zAxis"||Dh();var qe=Re[He];return It(It({},Oe),{},Br(Br({},Me.axisType,qe),"".concat(Me.axisType,"Ticks"),Fu(qe)))},ee),F=B[N],X=B["".concat(N,"Ticks")],te=S&&S[Z]&&S[Z].hasStack&&Ooe(P,S[Z].stackGroups),se=Lu(P.type).indexOf("Bar")>=0,ce=Eb(F,X),ue=[],oe=E&&goe({barSize:M,stackGroups:S,totalSize:bpe(B,N)});if(se){var le,pe,ye=nn(Y)?T:Y,be=(le=(pe=Eb(F,X,!0))!==null&&pe!==void 0?pe:ye)!==null&&le!==void 0?le:0;ue=yoe({barGap:U,barCategoryGap:D,bandSize:be!==ce?be:ce,sizeList:oe[V],maxBarSize:ye}),be!==ce&&(ue=ue.map(function(Oe){return It(It({},Oe),{},{position:It(It({},Oe.position),{},{offset:Oe.position.offset-be/2})})}))}var Ie=P&&P.type&&P.type.getComposedData;Ie&&k.push({props:It(It({},Ie(It(It({},B),{},{displayedData:H,props:v,dataKey:K,item:P,bandSize:ce,barPosition:ue,offset:_,stackedData:te,layout:z,dataStartIndex:A,dataEndIndex:O}))),{},Br(Br(Br({key:P.key||"item-".concat(q)},C,B[C]),N,B[N]),"animationId",I)),childIndex:bQ(P,v.children),item:P})}),k},p=function(v,b){var x=v.props,S=v.dataStartIndex,_=v.dataEndIndex,I=v.updateId;if(!k7({props:x}))return null;var A=x.children,O=x.layout,M=x.stackOffset,z=x.data,U=x.reverseStackOrder,D=aM(O),T=D.numericAxisName,R=D.cateAxisName,C=pl(A,n),N=Toe(z,C,"".concat(T,"Id"),"".concat(R,"Id"),M,U),E=l.reduce(function(L,K){var Y="".concat(K.axisType,"Map");return It(It({},L),{},Br({},Y,mpe(x,It(It({},K),{},{graphicalItems:C,stackGroups:K.axisType===T&&N,dataStartIndex:S,dataEndIndex:_}))))},{}),k=vpe(It(It({},E),{},{props:x,graphicalItems:C}),b==null?void 0:b.legendBBox);Object.keys(E).forEach(function(L){E[L]=u(x,E[L],k,L.replace("Map",""),e)});var P=E["".concat(R,"Map")],q=gpe(P),H=h(x,It(It({},E),{},{dataStartIndex:S,dataEndIndex:_,updateId:I,graphicalItems:C,stackGroups:N,offset:k}));return It(It({formattedGraphicalItems:H,graphicalItems:C,offset:k,stackGroups:N},q),E)},g=(function(m){function v(b){var x,S,_;return Z0e(this,v),_=tpe(this,v,[b]),Br(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Br(_,"accessibilityManager",new L0e),Br(_,"handleLegendBBoxUpdate",function(I){if(I){var A=_.state,O=A.dataStartIndex,M=A.dataEndIndex,z=A.updateId;_.setState(It({legendBBox:I},p({props:_.props,dataStartIndex:O,dataEndIndex:M,updateId:z},It(It({},_.state),{},{legendBBox:I}))))}}),Br(_,"handleReceiveSyncEvent",function(I,A,O){if(_.props.syncId===I){if(O===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),Br(_,"handleBrushChange",function(I){var A=I.startIndex,O=I.endIndex;if(A!==_.state.dataStartIndex||O!==_.state.dataEndIndex){var M=_.state.updateId;_.setState(function(){return It({dataStartIndex:A,dataEndIndex:O},p({props:_.props,dataStartIndex:A,dataEndIndex:O,updateId:M},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:O})}}),Br(_,"handleMouseEnter",function(I){var A=_.getMouseInfo(I);if(A){var O=It(It({},A),{},{isTooltipActive:!0});_.setState(O),_.triggerSyncEvent(O);var M=_.props.onMouseEnter;Qr(M)&&M(O,I)}}),Br(_,"triggeredAfterMouseMove",function(I){var A=_.getMouseInfo(I),O=A?It(It({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(O),_.triggerSyncEvent(O);var M=_.props.onMouseMove;Qr(M)&&M(O,I)}),Br(_,"handleItemMouseEnter",function(I){_.setState(function(){return{isTooltipActive:!0,activeItem:I,activePayload:I.tooltipPayload,activeCoordinate:I.tooltipPosition||{x:I.cx,y:I.cy}}})}),Br(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Br(_,"handleMouseMove",function(I){I.persist(),_.throttleTriggeredAfterMouseMove(I)}),Br(_,"handleMouseLeave",function(I){_.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var O=_.props.onMouseLeave;Qr(O)&&O(A,I)}),Br(_,"handleOuterEvent",function(I){var A=vQ(I),O=hl(_.props,"".concat(A));if(A&&Qr(O)){var M,z;/.*touch.*/i.test(A)?z=_.getMouseInfo(I.changedTouches[0]):z=_.getMouseInfo(I),O((M=z)!==null&&M!==void 0?M:{},I)}}),Br(_,"handleClick",function(I){var A=_.getMouseInfo(I);if(A){var O=It(It({},A),{},{isTooltipActive:!0});_.setState(O),_.triggerSyncEvent(O);var M=_.props.onClick;Qr(M)&&M(O,I)}}),Br(_,"handleMouseDown",function(I){var A=_.props.onMouseDown;if(Qr(A)){var O=_.getMouseInfo(I);A(O,I)}}),Br(_,"handleMouseUp",function(I){var A=_.props.onMouseUp;if(Qr(A)){var O=_.getMouseInfo(I);A(O,I)}}),Br(_,"handleTouchMove",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(I.changedTouches[0])}),Br(_,"handleTouchStart",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&_.handleMouseDown(I.changedTouches[0])}),Br(_,"handleTouchEnd",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&_.handleMouseUp(I.changedTouches[0])}),Br(_,"handleDoubleClick",function(I){var A=_.props.onDoubleClick;if(Qr(A)){var O=_.getMouseInfo(I);A(O,I)}}),Br(_,"handleContextMenu",function(I){var A=_.props.onContextMenu;if(Qr(A)){var O=_.getMouseInfo(I);A(O,I)}}),Br(_,"triggerSyncEvent",function(I){_.props.syncId!==void 0&&fS.emit(hS,_.props.syncId,I,_.eventEmitterSymbol)}),Br(_,"applySyncEvent",function(I){var A=_.props,O=A.layout,M=A.syncMethod,z=_.state.updateId,U=I.dataStartIndex,D=I.dataEndIndex;if(I.dataStartIndex!==void 0||I.dataEndIndex!==void 0)_.setState(It({dataStartIndex:U,dataEndIndex:D},p({props:_.props,dataStartIndex:U,dataEndIndex:D,updateId:z},_.state)));else if(I.activeTooltipIndex!==void 0){var T=I.chartX,R=I.chartY,C=I.activeTooltipIndex,N=_.state,E=N.offset,k=N.tooltipTicks;if(!E)return;if(typeof M=="function")C=M(k,I);else if(M==="value"){C=-1;for(var P=0;P<k.length;P++)if(k[P].value===I.activeLabel){C=P;break}}var q=It(It({},E),{},{x:E.left,y:E.top}),H=Math.min(T,q.x+q.width),L=Math.min(R,q.y+q.height),K=k[C]&&k[C].value,Y=D8(_.state,_.props.data,C),Z=k[C]?{x:O==="horizontal"?k[C].coordinate:H,y:O==="horizontal"?L:k[C].coordinate}:AU;_.setState(It(It({},I),{},{activeLabel:K,activeCoordinate:Z,activePayload:Y,activeTooltipIndex:C}))}else _.setState(I)}),Br(_,"renderCursor",function(I){var A,O=_.state,M=O.isTooltipActive,z=O.activeCoordinate,U=O.activePayload,D=O.offset,T=O.activeTooltipIndex,R=O.tooltipAxisBandSize,C=_.getTooltipEventType(),N=(A=I.props.active)!==null&&A!==void 0?A:M,E=_.props.layout,k=I.key||"_recharts-cursor";return Je.createElement(H0e,{key:k,activeCoordinate:z,activePayload:U,activeTooltipIndex:T,chartName:e,element:I,isActive:N,layout:E,offset:D,tooltipAxisBandSize:R,tooltipEventType:C})}),Br(_,"renderPolarAxis",function(I,A,O){var M=hl(I,"type.axisType"),z=hl(_.state,"".concat(M,"Map")),U=I.type.defaultProps,D=U!==void 0?It(It({},U),I.props):I.props,T=z&&z[D["".concat(M,"Id")]];return ie.cloneElement(I,It(It({},T),{},{className:dn(M,T.className),key:I.key||"".concat(A,"-").concat(O),ticks:Fu(T,!0)}))}),Br(_,"renderPolarGrid",function(I){var A=I.props,O=A.radialLines,M=A.polarAngles,z=A.polarRadius,U=_.state,D=U.radiusAxisMap,T=U.angleAxisMap,R=sf(D),C=sf(T),N=C.cx,E=C.cy,k=C.innerRadius,P=C.outerRadius;return ie.cloneElement(I,{polarAngles:Array.isArray(M)?M:Fu(C,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(z)?z:Fu(R,!0).map(function(q){return q.coordinate}),cx:N,cy:E,innerRadius:k,outerRadius:P,key:I.key||"polar-grid",radialLines:O})}),Br(_,"renderLegend",function(){var I=_.state.formattedGraphicalItems,A=_.props,O=A.children,M=A.width,z=A.height,U=_.props.margin||{},D=M-(U.left||0)-(U.right||0),T=b$({children:O,formattedGraphicalItems:I,legendWidth:D,legendContent:c});if(!T)return null;var R=T.item,C=eM(T,V0e);return ie.cloneElement(R,It(It({},C),{},{chartWidth:M,chartHeight:z,margin:U,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Br(_,"renderTooltip",function(){var I,A=_.props,O=A.children,M=A.accessibilityLayer,z=Do(O,po);if(!z)return null;var U=_.state,D=U.isTooltipActive,T=U.activeCoordinate,R=U.activePayload,C=U.activeLabel,N=U.offset,E=(I=z.props.active)!==null&&I!==void 0?I:D;return ie.cloneElement(z,{viewBox:It(It({},N),{},{x:N.left,y:N.top}),active:E,label:C,payload:E?R:[],coordinate:T,accessibilityLayer:M})}),Br(_,"renderBrush",function(I){var A=_.props,O=A.margin,M=A.data,z=_.state,U=z.offset,D=z.dataStartIndex,T=z.dataEndIndex,R=z.updateId;return ie.cloneElement(I,{key:I.key||"_recharts-brush",onChange:nv(_.handleBrushChange,I.props.onChange),data:M,x:ir(I.props.x)?I.props.x:U.left,y:ir(I.props.y)?I.props.y:U.top+U.height+U.brushBottom-(O.bottom||0),width:ir(I.props.width)?I.props.width:U.width,startIndex:D,endIndex:T,updateId:"brush-".concat(R)})}),Br(_,"renderReferenceElement",function(I,A,O){if(!I)return null;var M=_,z=M.clipPathId,U=_.state,D=U.xAxisMap,T=U.yAxisMap,R=U.offset,C=I.type.defaultProps||{},N=I.props,E=N.xAxisId,k=E===void 0?C.xAxisId:E,P=N.yAxisId,q=P===void 0?C.yAxisId:P;return ie.cloneElement(I,{key:I.key||"".concat(A,"-").concat(O),xAxis:D[k],yAxis:T[q],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:z})}),Br(_,"renderActivePoints",function(I){var A=I.item,O=I.activePoint,M=I.basePoint,z=I.childIndex,U=I.isRange,D=[],T=A.props.key,R=A.item.type.defaultProps!==void 0?It(It({},A.item.type.defaultProps),A.item.props):A.item.props,C=R.activeDot,N=R.dataKey,E=It(It({index:z,dataKey:N,cx:O.x,cy:O.y,r:4,fill:bj(A.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},tn(C,!1)),eb(C));return D.push(v.renderActiveDot(C,E,"".concat(T,"-activePoint-").concat(z))),M?D.push(v.renderActiveDot(C,It(It({},E),{},{cx:M.x,cy:M.y}),"".concat(T,"-basePoint-").concat(z))):U&&D.push(null),D}),Br(_,"renderGraphicChild",function(I,A,O){var M=_.filterFormatItem(I,A,O);if(!M)return null;var z=_.getTooltipEventType(),U=_.state,D=U.isTooltipActive,T=U.tooltipAxis,R=U.activeTooltipIndex,C=U.activeLabel,N=_.props.children,E=Do(N,po),k=M.props,P=k.points,q=k.isRange,H=k.baseLine,L=M.item.type.defaultProps!==void 0?It(It({},M.item.type.defaultProps),M.item.props):M.item.props,K=L.activeDot,Y=L.hide,Z=L.activeBar,V=L.activeShape,ee=!!(!Y&&D&&E&&(K||Z||V)),B={};z!=="axis"&&E&&E.props.trigger==="click"?B={onClick:nv(_.handleItemMouseEnter,I.props.onClick)}:z!=="axis"&&(B={onMouseLeave:nv(_.handleItemMouseLeave,I.props.onMouseLeave),onMouseEnter:nv(_.handleItemMouseEnter,I.props.onMouseEnter)});var F=ie.cloneElement(I,It(It({},M.props),B));function X(Me){return typeof T.dataKey=="function"?T.dataKey(Me.payload):null}if(ee)if(R>=0){var te,se;if(T.dataKey&&!T.allowDuplicatedCategory){var ce=typeof T.dataKey=="function"?X:"payload.".concat(T.dataKey.toString());te=Qv(P,ce,C),se=q&&H&&Qv(H,ce,C)}else te=P==null?void 0:P[R],se=q&&H&&H[R];if(V||Z){var ue=I.props.activeIndex!==void 0?I.props.activeIndex:R;return[ie.cloneElement(I,It(It(It({},M.props),B),{},{activeIndex:ue})),null,null]}if(!nn(te))return[F].concat(tm(_.renderActivePoints({item:M,activePoint:te,basePoint:se,childIndex:R,isRange:q})))}else{var oe,le=(oe=_.getItemByXY(_.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:F},pe=le.graphicalItem,ye=pe.item,be=ye===void 0?I:ye,Ie=pe.childIndex,Oe=It(It(It({},M.props),B),{},{activeIndex:Ie});return[ie.cloneElement(be,Oe),null,null]}return q?[F,null,null]:[F,null]}),Br(_,"renderCustomized",function(I,A,O){return ie.cloneElement(I,It(It({key:"recharts-customized-".concat(O)},_.props),_.state))}),Br(_,"renderMap",{CartesianGrid:{handler:lv,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:lv},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:lv},YAxis:{handler:lv},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:fm("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=vB(_.triggeredAfterMouseMove,(S=b.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return ape(v,m),epe(v,[{key:"componentDidMount",value:function(){var x,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,S=x.children,_=x.data,I=x.height,A=x.layout,O=Do(S,po);if(O){var M=O.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,U=D8(this.state,_,M,z),D=this.state.tooltipTicks[M].coordinate,T=(this.state.offset.top+I)/2,R=A==="horizontal",C=R?{x:D,y:T}:{y:D,x:T},N=this.state.formattedGraphicalItems.find(function(k){var P=k.item;return P.type.name==="Scatter"});N&&(C=It(It({},C),N.props.points[M].tooltipPosition),U=N.props.points[M].tooltipPayload);var E={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:z,activePayload:U,activeCoordinate:C};this.setState(E),this.renderCursor(O),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var _,I;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0}})}return null}},{key:"componentDidUpdate",value:function(x){_6([Do(x.children,po)],[Do(this.props.children,po)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=Do(this.props.children,po);if(x&&typeof x.props.shared=="boolean"){var S=x.props.shared?"axis":"item";return o.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),I=ine(_),A={chartX:Math.round(x.pageX-I.left),chartY:Math.round(x.pageY-I.top)},O=_.width/S.offsetWidth||1,M=this.inRange(A.chartX,A.chartY,O);if(!M)return null;var z=this.state,U=z.xAxisMap,D=z.yAxisMap,T=this.getTooltipEventType(),R=rM(this.state,this.props.data,this.props.layout,M);if(T!=="axis"&&U&&D){var C=sf(U).scale,N=sf(D).scale,E=C&&C.invert?C.invert(A.chartX):null,k=N&&N.invert?N.invert(A.chartY):null;return It(It({},A),{},{xValue:E,yValue:k},R)}return R?It(It({},A),R):null}},{key:"inRange",value:function(x,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=this.props.layout,A=x/_,O=S/_;if(I==="horizontal"||I==="vertical"){var M=this.state.offset,z=A>=M.left&&A<=M.left+M.width&&O>=M.top&&O<=M.top+M.height;return z?{x:A,y:O}:null}var U=this.state,D=U.angleAxisMap,T=U.radiusAxisMap;if(D&&T){var R=sf(D);return pO({x:A,y:O},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,S=this.getTooltipEventType(),_=Do(x,po),I={};_&&S==="axis"&&(_.props.trigger==="click"?I={onClick:this.handleClick}:I={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=eb(this.props,this.handleOuterEvent);return It(It({},A),I)}},{key:"addListener",value:function(){fS.on(hS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){fS.removeListener(hS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,S,_){for(var I=this.state.formattedGraphicalItems,A=0,O=I.length;A<O;A++){var M=I[A];if(M.item===x||M.props.key===x.key||S===Lu(M.item.type)&&_===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,S=this.state.offset,_=S.left,I=S.top,A=S.height,O=S.width;return Je.createElement("defs",null,Je.createElement("clipPath",{id:x},Je.createElement("rect",{x:_,y:I,height:A,width:O})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(S,_){var I=QI(_,2),A=I[0],O=I[1];return It(It({},S),{},Br({},A,O.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(S,_){var I=QI(_,2),A=I[0],O=I[1];return It(It({},S),{},Br({},A,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var S=this.state,_=S.formattedGraphicalItems,I=S.activeItem;if(_&&_.length)for(var A=0,O=_.length;A<O;A++){var M=_[A],z=M.props,U=M.item,D=U.type.defaultProps!==void 0?It(It({},U.type.defaultProps),U.props):U.props,T=Lu(U.type);if(T==="Bar"){var R=(z.data||[]).find(function(k){return Sue(x,k)});if(R)return{graphicalItem:M,payload:R}}else if(T==="RadialBar"){var C=(z.data||[]).find(function(k){return pO(x,k)});if(C)return{graphicalItem:M,payload:C}}else if(a2(M,I)||i2(M,I)||by(M,I)){var N=hde({graphicalItem:M,activeTooltipItem:I,itemData:D.data}),E=D.activeIndex===void 0?N:D.activeIndex;return{graphicalItem:It(It({},M),{},{childIndex:E}),payload:by(M,I)?D.data[N]:M.props.data[N]}}}return null}},{key:"render",value:function(){var x=this;if(!k7(this))return null;var S=this.props,_=S.children,I=S.className,A=S.width,O=S.height,M=S.style,z=S.compact,U=S.title,D=S.desc,T=eM(S,G0e),R=tn(T,!1);if(z)return Je.createElement(OI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Je.createElement(N6,Q0({},R,{width:A,height:O,title:U,desc:D}),this.renderClipPath(),A7(_,this.renderMap)));if(this.props.accessibilityLayer){var C,N;R.tabIndex=(C=this.props.tabIndex)!==null&&C!==void 0?C:0,R.role=(N=this.props.role)!==null&&N!==void 0?N:"application",R.onKeyDown=function(k){x.accessibilityManager.keyboardEvent(k)},R.onFocus=function(){x.accessibilityManager.focus()}}var E=this.parseEventsOfWrapper();return Je.createElement(OI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Je.createElement("div",Q0({className:dn("recharts-wrapper",I),style:It({position:"relative",cursor:"default",width:A,height:O},M)},E,{ref:function(P){x.container=P}}),Je.createElement(N6,Q0({},R,{width:A,height:O,title:U,desc:D,style:upe}),this.renderClipPath(),A7(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(ie.Component);Br(g,"displayName",e),Br(g,"defaultProps",It({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Br(g,"getDerivedStateFromProps",function(m,v){var b=m.dataKey,x=m.data,S=m.children,_=m.width,I=m.height,A=m.layout,O=m.stackOffset,M=m.margin,z=v.dataStartIndex,U=v.dataEndIndex;if(v.updateId===void 0){var D=nM(m);return It(It(It({},D),{},{updateId:0},p(It(It({props:m},D),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:x,prevWidth:_,prevHeight:I,prevLayout:A,prevStackOffset:O,prevMargin:M,prevChildren:S})}if(b!==v.prevDataKey||x!==v.prevData||_!==v.prevWidth||I!==v.prevHeight||A!==v.prevLayout||O!==v.prevStackOffset||!lp(M,v.prevMargin)){var T=nM(m),R={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},C=It(It({},rM(v,x,A)),{},{updateId:v.updateId+1}),N=It(It(It({},T),R),C);return It(It(It({},N),p(It({props:m},N),v)),{},{prevDataKey:b,prevData:x,prevWidth:_,prevHeight:I,prevLayout:A,prevStackOffset:O,prevMargin:M,prevChildren:S})}if(!_6(S,v.prevChildren)){var E,k,P,q,H=Do(S,Wp),L=H&&(E=(k=H.props)===null||k===void 0?void 0:k.startIndex)!==null&&E!==void 0?E:z,K=H&&(P=(q=H.props)===null||q===void 0?void 0:q.endIndex)!==null&&P!==void 0?P:U,Y=L!==z||K!==U,Z=!nn(x),V=Z&&!Y?v.updateId:v.updateId+1;return It(It({updateId:V},p(It(It({props:m},v),{},{updateId:V,dataStartIndex:L,dataEndIndex:K}),v)),{},{prevChildren:S,dataStartIndex:L,dataEndIndex:K})}return null}),Br(g,"renderActiveDot",function(m,v,b){var x;return ie.isValidElement(m)?x=ie.cloneElement(m,v):Qr(m)?x=m(v):x=Je.createElement(n2,v),Je.createElement(ta,{className:"recharts-active-dot",key:b},x)});var y=ie.forwardRef(function(v,b){return Je.createElement(g,Q0({},v,{ref:b}))});return y.displayName=g.displayName,y},L8=CU({chartName:"BarChart",GraphicalChild:Xc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zu},{axisType:"yAxis",AxisComp:Wu}],formatAxisMap:H$}),PU=CU({chartName:"AreaChart",GraphicalChild:od,axisComponents:[{axisType:"xAxis",AxisComp:zu},{axisType:"yAxis",AxisComp:Wu}],formatAxisMap:H$});function Cj(){try{return ln()}catch{const[t,e]=ie.useState([]),[n,a]=ie.useState(!0),[i,s]=ie.useState(null),[o,l]=ie.useState(null),c=async()=>{a(!0),s(null);try{const{data:{user:f},error:h}=await De.auth.getUser();if(h)throw console.error("Auth error:",h),h;if(!f)throw console.error("No authenticated user found"),new Error("User not authenticated");console.log("Authenticated user:",f.id);const{data:p,error:g}=await De.from("companies").select(`
            *,
            company_users!inner (
              role,
              is_active
            )
          `).eq("company_users.user_id",f.id).eq("company_users.is_active",!0).order("created_at",{ascending:!1});if(g)throw console.error("Supabase query error:",g),g;console.log("Fetched companies data:",p);const y=(p==null?void 0:p.map(m=>{var v;return{...m,role:((v=m.company_users[0])==null?void 0:v.role)||"cashier"}}))||[];console.log("Transformed companies data:",y),y.length===0?(console.log("No companies found for user"),Ce("You are not associated with any companies. Create a new company or ask to be added to one.",{icon:"",duration:5e3})):o||l(y[0]),e(y)}catch(f){console.error("Error in fetchCompanies:",f);const h=f instanceof Error?f.message:"Failed to fetch companies";s(h),Ce.error(h)}finally{a(!1)}};return ie.useEffect(()=>{c()},[]),{companies:t,loading:n,error:i,addCompany:async f=>{a(!0),s(null);try{const{data:{user:h}}=await De.auth.getUser();if(!h){Ce.error("You must be logged in to create a company");return}const{data:p,error:g}=await De.rpc("create_company",{p_name:f.name||"",p_user_id:h.id,p_legal_name:f.legal_name||"",p_tax_number:f.tax_number||"",p_email:f.email||"",p_phone:f.phone||"",p_website:f.website||"",p_logo_url:f.logo_url||"",p_notes:f.notes||"",p_address_street:f.address_street||"",p_address_city:f.address_city||"",p_address_state:f.address_state||"",p_address_postal_code:f.address_postal_code||"",p_address_country:f.address_country||""});if(p&&!g){const b=f.business_type;if(b)try{const{error:S}=await De.from("companies").update({business_type:b}).eq("id",p);S&&console.error("Failed to update company business_type:",S)}catch(S){console.error("Error updating business_type after RPC creation:",S)}const{error:x}=await De.from("company_users").update({role:"owner"}).eq("company_id",p).eq("user_id",h.id);x&&console.error("Failed to set user role:",x)}if(g){Ce.error(g.message||"Failed to create company");return}if(!p)throw new Error("No company ID returned from RPC");const{data:y,error:m}=await De.from("companies").select("*").eq("id",p).single();if(m)throw m;if(!y)throw new Error("Could not fetch newly created company");const v={...y,role:"owner"};return e(b=>[v,...b]),l(v),Ce.success("Company added successfully"),v}catch(h){const p=(h==null?void 0:h.message)||JSON.stringify(h)||"Failed to add company";throw s(p),Ce.error(`Failed to add company: ${p}`),h}finally{a(!1)}},fetchCompanies:c,selectedCompany:o,setSelectedCompany:l,operableCompanies:t}}}const Wi=[];for(let r=0;r<256;++r)Wi.push((r+256).toString(16).slice(1));function xpe(r,t=0){return(Wi[r[t+0]]+Wi[r[t+1]]+Wi[r[t+2]]+Wi[r[t+3]]+"-"+Wi[r[t+4]]+Wi[r[t+5]]+"-"+Wi[r[t+6]]+Wi[r[t+7]]+"-"+Wi[r[t+8]]+Wi[r[t+9]]+"-"+Wi[r[t+10]]+Wi[r[t+11]]+Wi[r[t+12]]+Wi[r[t+13]]+Wi[r[t+14]]+Wi[r[t+15]]).toLowerCase()}let mS;const wpe=new Uint8Array(16);function _pe(){if(!mS){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mS=crypto.getRandomValues.bind(crypto)}return mS(wpe)}const Spe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iM={randomUUID:Spe};function Npe(r,t,e){var a;r=r||{};const n=r.random??((a=r.rng)==null?void 0:a.call(r))??_pe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,xpe(n)}function Gy(r,t,e){return iM.randomUUID&&!r?iM.randomUUID():Npe(r)}const Pj=["Garments","Footwear","Food","Bakery","Kirana","Confectionery","Retail","Other"],Jb=({isOpen:r,onClose:t,onSuccess:e,title:n="Create New Company"})=>{const{theme:a}=zr(),i=a==="dark",{addCompany:s}=Cj(),{fetchCompanies:o}=ln(),[l,c]=ie.useState(!1),[u,f]=ie.useState(!1),[h,p]=ie.useState(null),[g,y]=ie.useState(null),m=ie.useRef(null),[v,b]=ie.useState({name:"",legal_name:"",tax_number:"",email:"",phone:"",website:"",logo_url:null,address_street:"",address_city:"",address_state:"",address_postal_code:"",address_country:"",business_type:null}),x=(M,z)=>{b(U=>({...U,[M]:z}))},S=M=>{var D;const z=(D=M.target.files)==null?void 0:D[0];if(!z)return;if(!z.type.startsWith("image/")){Ce.error("Please upload an image file");return}if(z.size>2*1024*1024){Ce.error("File size should be less than 2MB");return}p(z);const U=new FileReader;U.onloadend=()=>{y(U.result)},U.readAsDataURL(z)},_=async()=>{if(!h)return null;try{f(!0);const M=h.name.split(".").pop(),U=`company-logos/${`${Gy()}.${M}`}`,{error:D}=await De.storage.from("company-logos").upload(U,h,{cacheControl:"3600",upsert:!1});if(D)throw D;const{data:{publicUrl:T}}=De.storage.from("company-logos").getPublicUrl(U);return T}catch(M){return console.error("Error uploading logo:",M),Ce.error("Failed to upload logo"),null}finally{f(!1)}},I=()=>{b({name:"",legal_name:"",tax_number:"",email:"",phone:"",website:"",logo_url:null,address_street:"",address_city:"",address_state:"",address_postal_code:"",address_country:"",business_type:null}),p(null),y(null)},A=async M=>{if(M.preventDefault(),!(l||u)){c(!0);try{let z=null;h&&(z=await _());let U=null;if(s)U=await s({name:v.name,legal_name:v.legal_name,tax_number:v.tax_number,email:v.email,phone:v.phone,website:v.website,logo_url:z??void 0,address_street:v.address_street,address_city:v.address_city,address_state:v.address_state,address_postal_code:v.address_postal_code,address_country:v.address_country});else{const{data:{user:T}}=await De.auth.getUser(),R=T==null?void 0:T.id;if(!R)throw new Error("User session is not available");const{data:C}=await De.rpc("create_company",{p_name:v.name,p_user_id:R,p_legal_name:v.legal_name,p_tax_number:v.tax_number,p_email:v.email,p_phone:v.phone,p_website:v.website,p_business_type:v.business_type||null,p_logo_url:z,p_address_street:v.address_street,p_address_city:v.address_city,p_address_state:v.address_state,p_address_postal_code:v.address_postal_code,p_address_country:v.address_country});U=C}const D=typeof U=="object"&&U!==null?U.id:U;if(D){if(v.business_type)try{const{error:R}=await De.from("companies").update({business_type:v.business_type}).eq("id",D);R&&console.error("Failed to update business_type for company:",R)}catch(R){console.error("Error updating business_type:",R)}await aK(D)||console.error("Failed to initialize tax settings for company:",D)}await o(),I(),t(),e&&e(),Ce.success(`${v.name} has been created successfully`)}catch(z){console.error("Error creating company:",z),Ce.error("Failed to create company")}finally{c(!1)}}},O=()=>{I(),t()};return r?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:O}),d.jsxs("div",{className:`relative w-full max-w-2xl transform rounded-lg ${i?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Pi,{className:"w-6 h-6 mr-2"}),d.jsx("h2",{className:"text-xl font-semibold",children:n})]}),d.jsx("button",{onClick:O,className:`rounded-full p-1 hover:bg-gray-100 ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:A,className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[d.jsx("div",{className:"relative w-32 h-32 mb-4 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:g?d.jsx("img",{src:g,alt:"Company logo preview",className:"w-full h-full object-cover"}):d.jsx("div",{className:"text-gray-400",children:d.jsx(Pi,{className:"w-12 h-12 mx-auto"})})}),d.jsx("input",{type:"file",ref:m,onChange:S,accept:"image/*",className:"hidden"}),d.jsxs(lt,{type:"button",variant:"secondary",size:"sm",onClick:()=>{var M;return(M=m.current)==null?void 0:M.click()},disabled:u,children:[d.jsx(Ex,{className:"w-4 h-4 mr-2"}),u?"Uploading...":"Upload Logo"]}),d.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"JPG, PNG (max 2MB)"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name *"}),d.jsx("input",{type:"text",value:v.name,onChange:M=>x("name",M.target.value),required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter company name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Legal Name"}),d.jsx("input",{type:"text",value:v.legal_name,onChange:M=>x("legal_name",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter legal name"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"GST Number"}),d.jsx("input",{type:"text",value:v.tax_number,onChange:M=>x("tax_number",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"15AABCU9603R1ZX"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Website"}),d.jsx("input",{type:"url",value:v.website,onChange:M=>x("website",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"https://example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Type (optional)"}),d.jsxs("select",{value:v.business_type||"",onChange:M=>x("business_type",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"Select business type"}),Pj.map(M=>d.jsx("option",{value:M,children:M},M))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),d.jsx("input",{type:"email",value:v.email,onChange:M=>x("email",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"company@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),d.jsx("input",{type:"tel",value:v.phone,onChange:M=>x("phone",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"+91 98765 43210"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street Address"}),d.jsx("input",{type:"text",value:v.address_street,onChange:M=>x("address_street",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter street address"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),d.jsx("input",{type:"text",value:v.address_city,onChange:M=>x("address_city",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter city"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"State"}),d.jsx("input",{type:"text",value:v.address_state,onChange:M=>x("address_state",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter state"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),d.jsx("input",{type:"text",value:v.address_postal_code,onChange:M=>x("address_postal_code",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter postal code"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),d.jsx("input",{type:"text",value:v.address_country,onChange:M=>x("address_country",M.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter country"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx(lt,{variant:"ghost",onClick:O,disabled:l,type:"button",children:"Cancel"}),d.jsx(lt,{variant:"primary",type:"submit",disabled:l,leftIcon:l?void 0:d.jsx(kx,{className:"w-4 h-4"}),children:l?d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Add Company"})]})]})]})]})}):null},rm=({disabled:r=!1,compact:t=!1})=>{const{theme:e}=zr(),n=e==="dark",{companies:a,selectedCompany:i,setSelectedCompany:s,loading:o,fetchCompanies:l}=ln(),[c,u]=ie.useState(!1),[f,h]=ie.useState(!1),p=ie.useRef(null),g=window.innerWidth<768;return ie.useEffect(()=>{const y=m=>{p.current&&!p.current.contains(m.target)&&u(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]),ie.useEffect(()=>{const y=()=>{c&&window.innerWidth<768&&u(!1)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[c]),o?d.jsx("div",{className:`h-10 px-3 flex items-center rounded-md ${n?"bg-gray-700":"bg-gray-100"}`,children:d.jsx("div",{className:"animate-pulse h-4 w-32 bg-gray-400 rounded"})}):a.length===0?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>h(!0),className:`h-10 px-3 flex items-center rounded-md ${n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"} transition-colors`,children:[d.jsx(ml,{className:`w-4 h-4 mr-2 ${n?"text-white":"text-gray-600"}`}),d.jsx("span",{className:n?"text-white":"text-gray-800",children:t||g?"Add":"Add Company"})]}),d.jsx(Jb,{isOpen:f,onClose:()=>h(!1),onSuccess:()=>{h(!1),l()},title:"Create New Company"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"relative",ref:p,children:[d.jsxs("button",{onClick:()=>!r&&u(!c),disabled:r,className:`h-10 px-3 flex items-center justify-between rounded-md ${r?"opacity-50 cursor-not-allowed ":""} ${n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"} transition-colors ${t||g?"min-w-[120px]":"min-w-[200px]"}`,children:[d.jsxs("div",{className:"flex items-center truncate",children:[d.jsx(Pi,{className:`w-4 h-4 mr-2 flex-shrink-0 ${n?"text-white":"text-gray-600"}`}),d.jsxs("div",{className:"truncate",children:[d.jsx("div",{className:`truncate ${n?"text-white":"text-gray-800"}`,children:(i==null?void 0:i.name)||"Select Company"}),(i==null?void 0:i.tax_number)&&!t&&!g&&d.jsxs("div",{className:`text-xs opacity-75 truncate ${n?"text-gray-300":"text-gray-600"}`,children:["GST: ",i.tax_number]})]})]}),d.jsx(Oh,{className:`w-4 h-4 ml-2 transition-transform ${c?"rotate-180":""} ${n?"text-white":"text-gray-600"}`})]}),c&&d.jsxs("div",{className:`${g?"fixed inset-x-0 bottom-0 rounded-t-lg max-h-[80vh] overflow-auto z-50":"absolute top-full left-0 mt-1 w-full rounded-md z-50"} shadow-lg ${n?"bg-gray-800":"bg-white"} border ${n?"border-gray-700":"border-gray-200"}`,children:[g&&d.jsxs("div",{className:`sticky top-0 p-3 border-b ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[d.jsx("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:"Select Company"}),d.jsx("button",{onClick:()=>u(!1),className:`p-1 rounded-full ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(Oh,{className:`w-5 h-5 ${n?"text-white":"text-gray-600"}`})})]})]}),d.jsx("div",{className:`py-1 ${g?"max-h-[60vh]":"max-h-60"} overflow-y-auto`,children:a.map(y=>d.jsxs("button",{onClick:()=>{s(y),u(!1)},className:`w-full text-left px-4 py-3 flex items-center ${(i==null?void 0:i.id)===y.id?n?"bg-blue-600 text-white":"bg-blue-50 text-blue-700":n?"hover:bg-gray-700 text-white":"hover:bg-gray-100 text-gray-800"}`,children:[d.jsx(Pi,{className:`w-4 h-4 mr-2 flex-shrink-0 ${(i==null?void 0:i.id)===y.id||n?"text-white":"text-gray-600"}`}),d.jsxs("div",{className:"truncate",children:[d.jsx("div",{className:`truncate ${(i==null?void 0:i.id)===y.id||n?"text-white":"text-gray-800"}`,children:y.name}),y.tax_number&&d.jsxs("div",{className:`text-xs truncate ${(i==null?void 0:i.id)===y.id?"text-blue-100":n?"text-gray-300":"text-gray-600"}`,children:["GST: ",y.tax_number]})]})]},y.id))}),d.jsxs("div",{className:`border-t ${n?"border-gray-700":"border-gray-200"} py-1`,children:[d.jsxs("button",{className:`w-full text-left px-4 py-3 flex items-center ${n?"hover:bg-gray-700 text-white":"hover:bg-gray-100 text-gray-800"}`,onClick:()=>{u(!1),h(!0)},children:[d.jsx(ml,{className:`w-4 h-4 mr-2 ${n?"text-white":"text-gray-600"}`}),d.jsx("span",{className:n?"text-white":"text-gray-800",children:"New Company"})]}),d.jsxs(Oa,{to:"/",className:`w-full text-left px-4 py-3 flex items-center ${n?"hover:bg-gray-700 text-white":"hover:bg-gray-100 text-gray-800"}`,onClick:()=>u(!1),children:[d.jsx(Vc,{className:`w-4 h-4 mr-2 ${n?"text-white":"text-gray-600"}`}),d.jsx("span",{className:n?"text-white":"text-gray-800",children:"Manage Companies"})]})]}),g&&d.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:d.jsx("button",{onClick:()=>u(!1),className:`w-full py-3 rounded-lg font-medium ${n?"bg-gray-700 text-white":"bg-gray-200 text-gray-800"}`,children:"Cancel"})})]})]}),d.jsx(Jb,{isOpen:f,onClose:()=>h(!1),onSuccess:()=>{h(!1),l()},title:"Create New Company"})]})},jpe=({title:r="Manager Dashboard",subtitle:t,actions:e})=>{const{theme:n,toggleTheme:a}=zr(),i=Jc(),{selectedCompany:s}=ln(),{userRole:o}=ts(),l=pi(),c=n==="dark",{user:u,signOut:f}=i||{user:null,signOut:async()=>{}},[h,p]=ie.useState(!1),g=ie.useRef(null);ie.useEffect(()=>{const x=S=>{g.current&&!g.current.contains(S.target)&&p(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const y=async()=>{try{await f(),l("/login"),Ce.success("Signed out successfully")}catch{Ce.error("Failed to sign out")}},m=()=>{var x;return(x=u==null?void 0:u.user_metadata)!=null&&x.full_name?u.user_metadata.full_name:u!=null&&u.email?u.email.split("@")[0]:"User"},v=()=>m().split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2),b=()=>o?o.charAt(0).toUpperCase()+o.slice(1):"User";return d.jsx("header",{className:`h-16 ${c?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-b shadow-sm`,children:d.jsxs("div",{className:"h-full px-6 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:`text-xl font-semibold ${c?"text-white":"text-gray-900"}`,children:r}),t&&d.jsx("p",{className:`text-sm ${c?"text-gray-300":"text-gray-600"}`,children:t})]}),d.jsx("div",{className:"hidden md:block",children:d.jsx(rm,{})})]}),d.jsx("div",{className:"flex-1 flex justify-center",children:e}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{className:`p-2 rounded-md transition-colors ${c?"text-gray-100 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,"aria-label":"Notifications",children:d.jsx(oD,{className:"w-5 h-5"})}),d.jsx("button",{onClick:a,className:`p-2 rounded-md transition-colors ${c?"text-gray-100 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,"aria-label":n==="dark"?"Switch to light mode":"Switch to dark mode",children:n==="dark"?d.jsx(Wv,{className:"w-5 h-5"}):d.jsx(zv,{className:"w-5 h-5"})}),d.jsx("div",{className:"md:hidden",children:d.jsx(rm,{})}),d.jsxs("div",{className:"relative",ref:g,children:[d.jsxs("button",{onClick:()=>p(!h),className:`flex items-center space-x-3 p-2 rounded-md transition-colors ${c?"text-gray-100 hover:bg-gray-700 hover:text-white":"text-gray-800 hover:bg-gray-100 hover:text-gray-900"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${c?"bg-blue-600 text-white":"bg-blue-500 text-white"}`,children:v()}),d.jsxs("div",{className:"hidden sm:block text-left",children:[d.jsx("div",{className:`text-sm font-medium ${c?"text-white":"text-gray-900"}`,children:m()}),d.jsx("div",{className:`text-xs ${c?"text-gray-400":"text-gray-500"}`,children:b()})]}),d.jsx(Oh,{className:`w-4 h-4 transition-transform ${h?"rotate-180":""} ${c?"text-gray-100":"text-gray-700"}`})]}),h&&d.jsx("div",{className:`absolute right-0 top-full mt-2 w-56 rounded-md shadow-lg z-50 ${c?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:d.jsxs("div",{className:"py-1",children:[d.jsxs("div",{className:`px-4 py-3 border-b ${c?"border-gray-700":"border-gray-200"}`,children:[d.jsx("div",{className:`text-sm font-medium ${c?"text-white":"text-gray-900"}`,children:m()}),d.jsx("div",{className:`text-xs ${c?"text-gray-300":"text-gray-600"}`,children:u==null?void 0:u.email}),s&&d.jsxs("div",{className:`text-xs mt-1 flex items-center ${c?"text-gray-300":"text-gray-600"}`,children:[d.jsx(Pi,{className:"w-3 h-3 mr-1"}),s.name]})]}),d.jsxs("button",{onClick:()=>{p(!1)},className:`w-full text-left px-4 py-2 text-sm flex items-center ${c?"text-gray-100 hover:bg-gray-700 hover:text-white":"text-gray-800 hover:bg-gray-100 hover:text-gray-900"}`,children:[d.jsx(Ax,{className:"w-4 h-4 mr-3"}),"Profile Settings"]}),d.jsx("div",{className:`border-t ${c?"border-gray-700":"border-gray-200"} my-1`}),d.jsxs("button",{onClick:()=>{p(!1),y()},className:`w-full text-left px-4 py-2 text-sm flex items-center ${c?"text-gray-100 hover:bg-gray-700 hover:text-red-400":"text-gray-800 hover:bg-gray-100 hover:text-red-600"}`,children:[d.jsx(a6,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})})]})]})]})})},kpe=({isCollapsed:r=!1,onToggleCollapse:t})=>{const{theme:e}=zr(),{userRole:n}=ts(),a=vl();pi();const i=e==="dark",o=(console.log("Sidebar getNavigationItems - userRole:",n),n==="manager"||n==="admin"||n==="owner"?[{name:"Dashboard",href:"/role-selection",icon:Pu,description:"Role selection"},{name:"Products",href:"/products",icon:Hn,description:"Manage inventory"},{name:"Barcode Printing",href:"/barcode-printing",icon:Uc,description:"Print product labels"},{name:"Sales",href:"/sales",icon:ui,description:"Process sales"},{name:"Sales Return",href:"/sales-return",icon:tc,description:"Process sales returns"},{name:"Purchase",href:"/purchase",icon:Tp,description:"Manage purchases"},{name:"Customers",href:"/customers",icon:wn,description:"Customer management"},{name:"Add Expense",href:"/expenses/add",icon:Eh,description:"Record daily expenses"},{name:"Expense Reports",href:"/expenses/reports",icon:Np,description:"View expense reports"},{name:"Gross Profit & Loss",href:"/profit-loss",icon:Du,description:"View profit and loss"},{name:"Reports",href:"/reports",icon:Np,description:"Business reports"},{name:"GST Reports",href:"/gst-reports",icon:lD,description:"Tax reports"},{name:"GST Settings",href:"/gst-settings",icon:tc,description:"Tax configuration"},{name:"Offers & Promotions",href:"/offers-promotions",icon:pN,description:"Manage offers and promotions"},{name:"WhatsApp Settings",href:"/whatsapp-settings",icon:By,description:"Configure WhatsApp integration"},{name:"User Management",href:"/users",icon:wn,description:"Manage users"}]:n==="cashier"?[{name:"Dashboard",href:"/role-selection",icon:Pu,description:"Role selection"},{name:"Sales",href:"/sales",icon:ui,description:"Process sales"},{name:"Products",href:"/products",icon:Hn,description:"View products"},{name:"Barcode Printing",href:"/barcode-printing",icon:Uc,description:"Print product labels"},{name:"Customers",href:"/customers",icon:wn,description:"Customer info"}]:n==="salesperson"||n==="staff"?[{name:"Dashboard",href:"/role-selection",icon:Pu,description:"Role selection"},{name:"Products",href:"/products",icon:Hn,description:"Product catalog"},{name:"Barcode Printing",href:"/barcode-printing",icon:Uc,description:"Print product labels"},{name:"Create Quotation",href:"/sales",icon:ui,description:"Create quotes"},{name:"Customers",href:"/customers",icon:wn,description:"Customer management"}]:[{name:"Dashboard",href:"/role-selection",icon:Pu,description:"Role selection"}]);console.log("Final navigation items:",o),n==="salesperson"&&(console.log("Sidebar navigation items for salesperson:",o),console.log("Current location:",a.pathname));const l=n==="manager"||n==="admin"||n==="owner"?[{name:"New Sale",href:"/sales",icon:ui,color:"bg-blue-500"},{name:"Add Product",href:"/products",icon:Hn,color:"bg-green-500"},{name:"New Purchase",href:"/purchase",icon:TK,color:"bg-purple-500"},{name:"Reports",href:"/reports",icon:Du,color:"bg-orange-500"}]:[];return d.jsxs("div",{className:`${r?"w-16":"w-64"} ${i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-r shadow-sm flex flex-col transition-all duration-300 ease-in-out`,children:[d.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-gray-700",children:[!r&&d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Pi,{className:`w-8 h-8 ${i?"text-blue-400":"text-blue-600"}`}),d.jsxs("div",{children:[d.jsx("h1",{className:`text-lg font-bold ${i?"text-white":"text-gray-900"}`,children:"Tallybooks"}),d.jsx("p",{className:`text-xs ${i?"text-blue-400":"text-blue-500"}`,children:n?`${n.charAt(0).toUpperCase()+n.slice(1)} Panel`:"Dashboard"})]})]}),t&&d.jsx("button",{onClick:t,className:`p-1.5 rounded-md transition-colors ${i?"text-gray-400 hover:bg-gray-700 hover:text-white":"text-gray-500 hover:bg-gray-100 hover:text-gray-700"}`,"aria-label":r?"Expand sidebar":"Collapse sidebar",children:r?d.jsx(cD,{className:"w-4 h-4"}):d.jsx(wK,{className:"w-4 h-4"})})]}),n==="salesperson"&&!1,d.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.map(c=>{const u=c.icon,f=a.pathname===c.href;return c.href==="/barcode-printing"&&console.log("Sidebar - Barcode Printing item:",{name:c.name,href:c.href,currentPath:a.pathname,isActive:f}),c.name==="Dashboard"&&n==="salesperson"&&console.log("Sidebar Dashboard item rendering:",{name:c.name,href:c.href,currentPath:a.pathname,isActive:f,userRole:n,isDark:i,isCollapsed:r}),d.jsxs(Oa,{to:c.href,title:r?c.name:void 0,onClick:()=>{c.name==="Dashboard"&&n==="salesperson"&&console.log("Dashboard link clicked:",c.href)},className:`
                flex items-center px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 cursor-pointer
                ${f?"bg-blue-600 text-white shadow-sm hover:bg-blue-700 active:bg-blue-800":`${i?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`}
            ${r?"justify-center":""}
            ${c.name==="Dashboard"&&n==="salesperson"?"ring-2 ring-blue-300 ring-opacity-50":""}
              `,children:[d.jsx(u,{className:`${r?"w-5 h-5":"w-5 h-5 mr-3"} flex-shrink-0`}),!r&&d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"truncate",children:[c.name,c.name==="Dashboard"&&n==="salesperson"&&!1]}),c.description&&!f&&d.jsx("div",{className:`text-xs mt-0.5 truncate ${i?"text-gray-400":"text-gray-500"}`,children:c.description})]}),!r&&c.badge&&d.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:c.badge})]},c.name)})}),!r&&l.length>0&&d.jsxs("div",{className:"px-3 py-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:`text-xs font-semibold uppercase tracking-wider mb-3 ${i?"text-gray-400":"text-gray-500"}`,children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(c=>{const u=c.icon;return d.jsxs(Oa,{to:c.href,className:`${c.color} text-white rounded-lg p-3 flex flex-col items-center text-center transition-transform hover:scale-105 shadow-sm`,children:[d.jsx(u,{className:"w-5 h-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:c.name})]},c.name)})})]}),!r&&d.jsx("div",{className:`px-3 py-3 border-t ${i?"border-gray-700":"border-gray-200"}`,children:d.jsx("div",{className:`text-xs ${i?"text-gray-400":"text-gray-500"} text-center`,children:" 2024 Tallybooks"})})]})},hp=({children:r,title:t,subtitle:e,actions:n,showSidebar:a=!0,showTopNavigation:i=!0})=>{const{theme:s}=zr(),o=s==="dark",[l,c]=ie.useState(!1),[u,f]=ie.useState(!1),h=()=>{c(!l)},p=()=>f(!1);return d.jsx("div",{className:`min-h-screen ${o?"dark bg-gray-900":"bg-gray-50"}`,children:d.jsxs("div",{className:"flex h-screen",children:[a&&d.jsx(kpe,{isCollapsed:l,onToggleCollapse:h,isMobileOpen:u,onCloseMobile:p}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i&&d.jsx(jpe,{title:t,subtitle:e,actions:n}),d.jsx("main",{className:`flex-1 overflow-y-auto p-6 ${o?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:r})]})]})})},Epe=()=>{const{theme:r}=zr(),{selectedCompany:t}=ln(),e=pi(),n=r==="dark",[a,i]=ie.useState(!1),[s,o]=ie.useState(null),[l,c]=ie.useState(new Date),[u,f]=ie.useState([{title:"Total Sales",value:"0",icon:Ti,change:"0%",trend:"neutral"},{title:"Active Orders",value:"0",icon:ui,change:"0%",trend:"neutral"},{title:"Low Stock Items",value:"0",icon:Hn,change:"0%",trend:"neutral"},{title:"Customers",value:"0",icon:wn,change:"0%",trend:"neutral"}]),[h,p]=ie.useState([]),[g]=ie.useState([{name:"Week 1",customers:0},{name:"Week 2",customers:0},{name:"Week 3",customers:0},{name:"Week 4",customers:0}]),[y]=ie.useState([{id:"1",title:"Monthly Sales Report",description:"Summary of all sales transactions for the current month",date:qt(new Date,"MMM d, yyyy"),type:"sales"},{id:"2",title:"Inventory Status Report",description:"Current stock levels and inventory valuation",date:qt(new Date,"MMM d, yyyy"),type:"inventory"},{id:"3",title:"GST Filing Summary",description:"Tax filing summary for the previous quarter",date:qt(new Date(Date.now()-864e5),"MMM d, yyyy"),type:"tax"}]),m=M=>{switch(M){case"sales":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"inventory":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"tax":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"financial":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},v=M=>{switch(console.log("Manager Dashboard - Navigating to report:",M.title,"Type:",M.type),M.type){case"tax":console.log("Manager Dashboard - Navigating to GST Reports page"),e("/gst-reports");break;case"sales":console.log("Manager Dashboard - Navigating to Sales Reports page"),e("/reports?type=sales");break;case"inventory":console.log("Manager Dashboard - Navigating to Inventory Reports page"),e("/reports?type=inventory");break;case"financial":console.log("Manager Dashboard - Navigating to Financial Reports page"),e("/reports?type=financial");break;default:console.log("Manager Dashboard - Navigating to default Reports page"),e("/reports")}},b=M=>{if(console.log("Manager Dashboard - Download clicked for report:",M.title,"Type:",M.type),M.type==="tax"){console.log("Manager Dashboard - Navigating to GST Reports page for download"),e("/gst-reports");return}alert("Please use the View Report button to access the full report with download options.")},x=async()=>{if(!t){Ce.error("Please select a company first");return}i(!0),o(null);try{const{data:M,error:z}=await De.from("sales").select(`
          total,
          created_at,
          sale_items (
            product:products (
              id,
              name,
              company_id
            )
          )
        `).eq("company_id",t.id).order("created_at",{ascending:!1}),U=(M==null?void 0:M.filter(ee=>ee.sale_items.every(B=>B.product.company_id===t.id)))||[];if(z)throw z;const D=U.reduce((ee,B)=>ee+B.total,0)||0,{data:T,error:R}=await De.from("sales").select(`
          id,
          status,
          sale_items (
            product:products (
              id,
              name,
              company_id
            )
          )
        `).eq("company_id",t.id).eq("status","pending"),N=((T==null?void 0:T.filter(ee=>ee.sale_items.every(B=>B.product.company_id===t.id)))||[]).length;if(R)throw R;const{data:E,error:k}=await De.from("products").select("*").eq("company_id",t.id).lt("stock",5);if(k)throw k;const{count:P,error:q}=await De.from("customers").select("*",{count:"exact",head:!0}).eq("company_id",t.id);if(q)throw q;const Z=[{title:"Total Sales",value:_(D),icon:Ti,change:"+12%",trend:"up"},{title:"Active Orders",value:String(N||0),icon:ui,change:"+5%",trend:"up"},{title:"Low Stock Items",value:String((E==null?void 0:E.length)||0),icon:Hn,change:"-2%",trend:"down"},{title:"Total Customers",value:String(P||0),icon:wn,change:"+8%",trend:"up"}];f(Z),c(new Date);const V=S(U);p(V)}catch(M){console.error("Error refreshing dashboard:",M),o(M instanceof Error?M.message:"Failed to refresh data"),Ce.error("Failed to update dashboard data")}finally{i(!1)}},S=M=>{const z={};return M.forEach(U=>{const D=qt(new Date(U.created_at),"MMM");z[D]||(z[D]={sales:0,orders:0}),z[D].sales+=U.total,z[D].orders+=1}),Object.entries(z).map(([U,D])=>({name:U,sales:D.sales,orders:D.orders}))};ie.useEffect(()=>{const M=localStorage.getItem("demoRole")!==null;if(t)x();else if(M){console.log("Demo mode: Showing sample data for Manager Dashboard");const z=[{title:"Total Sales",value:"125,000.00",icon:Ti,change:"+12%",trend:"up"},{title:"Active Orders",value:"24",icon:ui,change:"+5%",trend:"up"},{title:"Low Stock Items",value:"8",icon:Hn,change:"-2%",trend:"down"},{title:"Total Customers",value:"156",icon:wn,change:"+8%",trend:"up"}],U=[{name:"Jan",sales:45e3,orders:42},{name:"Feb",sales:52e3,orders:48},{name:"Mar",sales:49e3,orders:46},{name:"Apr",sales:63e3,orders:55},{name:"May",sales:59e3,orders:52},{name:"Jun",sales:68e3,orders:58}];f(z),p(U),c(new Date)}},[t]);const _=M=>`${M.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,I=localStorage.getItem("demoRole")?`DEMO MODE | Sample Data | Last updated: ${qt(l,"MMM d, yyyy HH:mm:ss")}`:t?`${t.name} | Last updated: ${qt(l,"MMM d, yyyy HH:mm:ss")}`:"Select a company to view your dashboard",A=d.jsxs("div",{className:"flex gap-3",children:[t&&d.jsx(lt,{variant:"primary",onClick:x,isLoading:a,leftIcon:d.jsx(nc,{className:"w-4 h-4"}),children:"Update Data"}),localStorage.getItem("demoRole")&&d.jsx(lt,{variant:"secondary",onClick:()=>{localStorage.removeItem("demoRole"),e("/role-selection"),Ce.success("Exited demo mode")},children:"Exit Demo"})]}),O=[{name:"New Sale",href:"/sales",icon:ui,color:"bg-blue-500"},{name:"Add Product",href:"/products",icon:Hn,color:"bg-green-500"},{name:"New Purchase",href:"/purchase",icon:Tp,color:"bg-purple-500"},{name:"Add Expense",href:"/expenses/add",icon:Eh,color:"bg-red-500"},{name:"Expense Reports",href:"/expenses/reports",icon:bg,color:"bg-amber-500"},{name:"Gross Profit & Loss",href:"/profit-loss",icon:Du,color:"bg-teal-500"},{name:"WhatsApp Settings",href:"/whatsapp-settings",icon:By,color:"bg-green-600"}];return d.jsx(hp,{title:"Manager Dashboard",subtitle:I,actions:A,children:d.jsxs("div",{className:"space-y-6",children:[s&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Wn,{className:"w-5 h-5 mr-2"}),d.jsx("span",{children:s})]})}),d.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:O.map(M=>{const z=M.icon;return d.jsxs(Oa,{to:M.href,className:`${M.color} text-white rounded-lg p-3 flex flex-col items-center text-center transition-transform hover:scale-105 shadow-sm`,children:[d.jsx(z,{className:"w-5 h-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:M.name})]},M.name)})})]}),d.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:u.map(M=>{const z=M.icon,U=M.trend==="up"?Du:vN,D=M.trend==="up"?"text-green-500":"text-red-500";return d.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm relative overflow-hidden transition-all duration-300 hover:shadow-md`,children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm font-medium ${n?"text-gray-400":"text-gray-500"}`,children:M.title}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:M.value})]}),d.jsx("div",{className:`p-2 rounded-full ${n?"bg-gray-700":"bg-gray-100"}`,children:d.jsx(z,{className:`w-6 h-6 ${n?"text-blue-400":"text-blue-500"}`})})]}),d.jsxs("div",{className:"flex items-center mt-4",children:[d.jsx(U,{className:`w-4 h-4 mr-1 ${D}`}),d.jsx("span",{className:`text-xs font-medium ${D}`,children:M.change}),d.jsx("span",{className:"text-xs ml-1 text-gray-500",children:"vs last month"})]})]},M.title)})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4",children:"Sales Overview"}),d.jsx("div",{className:"h-80",children:d.jsx(Ng,{width:"100%",height:"100%",children:d.jsxs(L8,{data:h,margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(fp,{strokeDasharray:"3 3",stroke:n?"#374151":"#f3f4f6"}),d.jsx(zu,{dataKey:"name",stroke:n?"#9ca3af":"#6b7280"}),d.jsx(Wu,{stroke:n?"#9ca3af":"#6b7280"}),d.jsx(po,{contentStyle:{backgroundColor:n?"#1f2937":"#ffffff",borderColor:n?"#374151":"#e5e7eb",color:n?"#ffffff":"#000000"}}),d.jsx(Xc,{dataKey:"sales",name:"Sales ()",fill:"#3b82f6",radius:[4,4,0,0]}),d.jsx(Xc,{dataKey:"orders",name:"Orders",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),d.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4",children:"Customer Growth"}),d.jsx("div",{className:"h-80",children:d.jsx(Ng,{width:"100%",height:"100%",children:d.jsxs(PU,{data:g,margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(fp,{strokeDasharray:"3 3",stroke:n?"#374151":"#f3f4f6"}),d.jsx(zu,{dataKey:"name",stroke:n?"#9ca3af":"#6b7280"}),d.jsx(Wu,{stroke:n?"#9ca3af":"#6b7280"}),d.jsx(po,{contentStyle:{backgroundColor:n?"#1f2937":"#ffffff",borderColor:n?"#374151":"#e5e7eb",color:n?"#ffffff":"#000000"}}),d.jsx(od,{type:"monotone",dataKey:"customers",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3})]})})})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg font-medium",children:"Recent Reports"}),d.jsx(Oa,{to:"/reports",className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:"View All Reports"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(M=>d.jsx("div",{className:`p-4 rounded-lg border ${n?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"} hover:shadow-md transition-shadow`,children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("h3",{className:"font-medium",children:M.title}),d.jsx("span",{className:`ml-3 px-2 py-1 text-xs rounded-full ${m(M.type)}`,children:M.type.charAt(0).toUpperCase()+M.type.slice(1)})]}),d.jsx("p",{className:`mt-1 text-sm ${n?"text-gray-400":"text-gray-500"}`,children:M.description}),d.jsxs("p",{className:`mt-2 text-xs ${n?"text-gray-500":"text-gray-400"}`,children:["Generated on ",M.date]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{className:`p-1.5 rounded-full ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,title:"View Report",onClick:()=>v(M),children:d.jsx(Ug,{className:"w-4 h-4"})}),d.jsx("button",{className:`p-1.5 rounded-full ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,title:"Download Report",onClick:()=>b(M),children:d.jsx(Nx,{className:"w-4 h-4"})})]})]})},M.id))})]})]})})};function Ape(){console.log("CashierDashboard component rendering");const{theme:r}=zr(),{selectedCompany:t}=ln(),{isRoleLoading:e,userRole:n,permissions:a}=ts(),i=r==="dark",s=vl(),o=pi(),l=ie.useRef(null),[c,u]=ie.useState(!1),[f,h]=ie.useState(null),[p,g]=ie.useState(new Date),[y,m]=ie.useState(""),[v,b]=ie.useState(!1),[x,S]=ie.useState(""),[_,I]=ie.useState(null),[A,O]=ie.useState(!1),[M,z]=ie.useState(null),[U,D]=ie.useState(new Date),[T,R]=ie.useState(!1),[,C]=ie.useState(!1),[N,E]=ie.useState([{title:"Today's Sales",value:"0",icon:Ti,change:"0%",trend:"neutral"},{title:"Transactions",value:"0",icon:tc,change:"0%",trend:"neutral"},{title:"Pending Orders",value:"0",icon:K0,change:"0%",trend:"neutral"}]);console.log("CashierDashboard - User Role:",n),console.log("CashierDashboard - Role Loading:",e),console.log("CashierDashboard - Selected Company:",t),console.log("CashierDashboard - Permissions:",a);const[k,P]=ie.useState([]);ie.useEffect(()=>{new URLSearchParams(s.search).get("search")==="active"&&(b(!0),setTimeout(()=>{l.current&&l.current.focus()},100))},[s]);const q=async F=>{if(F&&F.preventDefault(),!t){Ce.error("Please select a company first");return}if(!y.trim()){z("Please enter a search term");return}b(!0),O(!0),z(null);try{const{data:X,error:te}=await De.from("products").select("*").eq("company_id",t.id).or(`name.ilike.%${y}%,sku.ilike.%${y}%,barcode.eq.${y}`).order("name",{ascending:!0}).limit(1);if(te)throw te;X&&X.length>0?(I(X[0]),m(""),C(!0),Ce.success(`Found: ${X[0].name}`),setTimeout(()=>C(!1),2e3)):(I(null),z(`No product found matching: "${y}"`),Ce.error(`No product found matching: "${y}"`))}catch(X){console.error("Error searching product:",X),z("Error searching for product. Please try again."),I(null)}finally{O(!1)}},H=[{title:"New Sale",icon:ui,path:"/sales?from=cashier",color:"bg-blue-500 dark:bg-blue-600"},{title:"Scan Barcode",icon:X0,path:"/sales?scan=true&from=cashier",color:"bg-green-500 dark:bg-green-600"},{title:"Quick Sale",icon:rA,path:"/sales?quick=true&lock_nav=true&from=cashier",color:"bg-yellow-500 dark:bg-yellow-600"},{title:"View Products",icon:Hn,path:"/products?from=cashier",color:"bg-purple-500 dark:bg-purple-600"}],L=async F=>{if(F&&F.preventDefault(),!t){Ce.error("Please select a company first");return}if(!x.trim()){z("Please enter a barcode");return}O(!0),z(null);try{const{data:X,error:te}=await De.from("products").select("*").eq("company_id",t.id).or(`barcode.eq.${x},sku.eq.${x}`).limit(1);if(te)throw te;X&&X.length>0?(I(X[0]),S(""),C(!0),Ce.success(`Found: ${X[0].name}`),setTimeout(()=>C(!1),2e3)):(I(null),z(`No product found with barcode: ${x}`),Ce.error(`No product found with barcode: ${x}`))}catch(X){console.error("Error scanning barcode:",X),z("Error scanning barcode. Please try again."),I(null)}finally{O(!1)}},K=async()=>{if(!_){Ce.error("No product selected");return}if(!t){Ce.error("Please select a company first");return}if(_.stock<=0){Ce.error("Product is out of stock");return}R(!0);try{Ce.success(`Adding ${_.name} to sale...`),o(`/sales?product=${_.id}&from=cashier&auto_add=true`)}catch(F){console.error("Error adding product to sale:",F),Ce.error("Failed to add product to sale")}finally{R(!1)}},Y=()=>{I(null),z(null),S(""),m(""),b(!1),Ce.success("Scanner cleared")},Z=async()=>{if(!t){Ce.error("Please select a company first");return}u(!0),h(null);try{console.log("Starting dashboard refresh for company:",t.id);const F=new Date(U);F.setHours(0,0,0,0);const X=F.toISOString(),te=new Date(U);te.setDate(te.getDate()+1),te.setHours(0,0,0,0);const se=te.toISOString(),{data:ce,error:ue}=await De.from("sales").select(`
          id,
          total,
          subtotal,
          created_at,
          status,
          payment_method
        `).eq("company_id",t.id).gte("created_at",X).lt("created_at",se).order("created_at",{ascending:!1});if(ue)throw console.error("Error fetching sales data:",ue),new Error(`Failed to fetch sales data: ${ue.message}`);const oe=(ce==null?void 0:ce.map(Me=>({...Me,tax_amount:Me.total-(Me.subtotal||Me.total),customer_name:"Walk-in Customer",items_count:1,notes:""})))||[];P(oe);const le=oe.reduce((Me,Re)=>Me+(Re.total||0),0),pe=oe.length,ye=oe.filter(Me=>Me.status==="pending"&&Me.payment_method!=="cash").length,Oe=[{title:`${new Date(U).toDateString()===new Date().toDateString()?"Today's":qt(new Date(U),"MMM d, yyyy")} Sales`,value:ee(le),icon:Ti,change:"+0%",trend:"neutral"},{title:"Transactions",value:String(pe),icon:tc,change:"+0%",trend:"neutral"},{title:"Pending Orders",value:String(ye),icon:K0,change:"+0%",trend:"neutral"}];E(Oe),g(new Date),console.log("Dashboard refresh completed successfully")}catch(F){console.error("Error refreshing dashboard:",F),h(F instanceof Error?F.message:"Failed to refresh data"),Ce.error("Failed to update dashboard data")}finally{u(!1)}};ie.useEffect(()=>{try{console.log("CashierDashboard useEffect running");const F=localStorage.getItem("demoRole")!==null;if(console.log("Demo mode in useEffect:",F),!e&&t)console.log("Loading data with selected company:",t.id),Z();else if(F){console.log("Demo mode: Showing sample data for Cashier Dashboard");const X=[{title:"Today's Sales",value:"45,250.00",icon:Ti,change:"+15%",trend:"up"},{title:"Transactions",value:"32",icon:tc,change:"+8%",trend:"up"},{title:"Pending Orders",value:"5",icon:K0,change:"-2%",trend:"down"}],te=[{id:"DEMO-001",total:1250,subtotal:1100,tax_amount:150,created_at:new Date().toISOString(),customer_name:"John Smith",status:"completed",payment_method:"cash",items_count:3,notes:""},{id:"DEMO-002",total:3450.75,subtotal:3e3,tax_amount:450.75,created_at:new Date().toISOString(),customer_name:"Mary Johnson",status:"completed",payment_method:"card",items_count:5,notes:"Delivery required"},{id:"DEMO-003",total:750.25,subtotal:650,tax_amount:100.25,created_at:new Date().toISOString(),customer_name:"Walk-in Customer",status:"pending",payment_method:"upi",items_count:2,notes:""}];E(X),P(te),g(new Date)}else console.log("Not loading data - isRoleLoading:",e,"selectedCompany:",t)}catch(F){console.error("Error in CashierDashboard useEffect:",F),h(F instanceof Error?F.message:"An error occurred while loading the dashboard"),Ce.error("Failed to load dashboard data")}},[t,e]);const V=F=>{try{const X=new Date(F);isNaN(X.getTime())?Ce.error("Invalid date format"):(D(X),setTimeout(()=>Z(),100),Ce.success(`Viewing data for ${qt(X,"MMM d, yyyy")}`))}catch(X){Ce.error("Error setting date"),console.error("Error setting date:",X)}},ee=F=>`${F.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;if(ie.useEffect(()=>{const F=X=>{if(!(X.target instanceof HTMLInputElement||X.target instanceof HTMLTextAreaElement))switch(X.key){case"Enter":_&&!T&&(X.preventDefault(),K());break;case"Escape":_&&(X.preventDefault(),Y());break;case"F1":X.preventDefault(),o("/sales?from=cashier");break;case"F2":X.preventDefault(),o("/sales?scan=true&from=cashier");break}};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[_,T,o]),e)return console.log("Showing loading state for CashierDashboard"),d.jsx(hp,{title:"Cashier Dashboard",children:d.jsxs("div",{className:"flex items-center justify-center h-64",children:[d.jsx(Wn,{className:"w-6 h-6 text-yellow-500 mr-2"}),d.jsx("p",{children:"Loading dashboard..."})]})});const B=localStorage.getItem("demoRole")!==null;return console.log("Render check - Demo mode:",B),d.jsx(hp,{title:"Cashier Dashboard",subtitle:localStorage.getItem("demoRole")?"DEMO MODE - Sample Data":void 0,actions:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx($g,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),d.jsx("input",{type:"date",className:"px-2 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm",value:U.toISOString().split("T")[0],onChange:F=>{const X=F.target.value?new Date(F.target.value):new Date;D(X),setTimeout(()=>Z(),100)}}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>V("2025-05-15"),title:"View May 15, 2025 data",children:"May 15, 2025"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",qt(p,"MMM d, yyyy h:mm a")]}),localStorage.getItem("demoRole")?d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>{localStorage.removeItem("demoRole"),window.location.href="/role-selection",Ce.success("Exited demo mode")},children:"Exit Demo"}):c?d.jsxs(lt,{variant:"secondary",size:"sm",disabled:!0,children:[d.jsx(nc,{className:"w-4 h-4 mr-1 animate-spin"}),"Updating..."]}):d.jsxs(lt,{variant:"secondary",size:"sm",onClick:Z,children:[d.jsx(nc,{className:"w-4 h-4 mr-1"}),"Update Data"]})]})]}),children:d.jsxs("div",{className:"space-y-6",children:[f&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Wn,{className:"w-5 h-5 mr-2"}),d.jsx("span",{children:f})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:N.map((F,X)=>{const te=F.trend==="up"?Du:F.trend==="down"?vN:null,se=F.trend==="up"?"text-green-500":F.trend==="down"?"text-red-500":"text-gray-500";return d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm font-medium ${i?"text-gray-400":"text-gray-500"}`,children:F.title}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:F.value})]}),d.jsx("div",{className:`p-2 rounded-full ${i?"bg-gray-700":"bg-gray-100"}`,children:F.icon&&d.jsx(F.icon,{className:"w-5 h-5 text-blue-500"})})]}),te&&d.jsxs("div",{className:`flex items-center mt-2 ${se}`,children:[d.jsx(te,{className:"w-4 h-4 mr-1"}),d.jsx("span",{className:"text-sm",children:F.change})]})]},X)})}),d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:H.map((F,X)=>d.jsxs(Oa,{to:F.path,className:`${F.color} rounded-lg p-4 flex flex-col items-center justify-center text-white hover:opacity-90 transition-opacity`,children:[d.jsx(F.icon,{className:"w-8 h-8 mb-2"}),d.jsx("span",{className:"text-sm font-medium",children:F.title})]},X))})]}),_&&d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6 mb-6 border-2 border-green-500`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("h2",{className:"text-lg font-medium text-green-500",children:"Product Found"}),d.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),d.jsx("div",{className:"flex space-x-2",children:d.jsx(lt,{variant:"secondary",size:"sm",onClick:Y,className:"hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(nc,{className:"w-3 h-3"}),d.jsx("span",{children:"Clear"})]})})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-xl",children:_.name}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["SKU: ",_.sku," ",_.barcode&&`| Barcode: ${_.barcode}`]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-gray-100 dark:bg-gray-700",children:[d.jsx("span",{className:"font-medium",children:"Price:"}),d.jsxs("span",{className:"font-bold text-lg",children:["",_.price.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between items-center p-2 rounded",children:[d.jsx("span",{className:"font-medium",children:"MRP:"}),d.jsxs("span",{children:["",_.mrp.toFixed(2)]})]})]}),d.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg bg-opacity-20 ${_.stock>0?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"}`,children:[d.jsx("span",{className:"font-medium",children:"Stock:"}),d.jsxs("span",{className:`font-medium py-1 px-3 rounded-full ${_.stock>0?"bg-green-200 text-green-800 dark:bg-green-800 dark:text-green-200":"bg-red-200 text-red-800 dark:bg-red-800 dark:text-red-200"}`,children:[_.stock," ",_.stock===1?"unit":"units"]})]})]}),d.jsxs("div",{className:"mt-6 space-y-3",children:[d.jsx(lt,{variant:"primary",className:`w-full transition-all duration-200 ${T?"bg-green-600 hover:bg-green-700 transform scale-105":_.stock<=0?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 hover:transform hover:scale-105"} ${T?"animate-pulse":""}`,onClick:K,disabled:T||_.stock<=0,children:d.jsx("div",{className:"flex items-center justify-center space-x-2",children:T?d.jsxs(d.Fragment,{children:[d.jsx(nc,{className:"w-4 h-4 animate-spin"}),d.jsx("span",{children:"Adding to Sale..."})]}):_.stock<=0?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"w-4 h-4"}),d.jsx("span",{children:"Out of Stock"})]}):d.jsxs(d.Fragment,{children:[d.jsx(ui,{className:"w-4 h-4"}),d.jsx("span",{children:"Add to Sale"})]})})}),_.stock>0&&d.jsxs(d.Fragment,{children:[d.jsx(lt,{variant:"secondary",className:"w-full border-2 border-dashed border-yellow-400 hover:border-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-all duration-200",onClick:()=>o(`/sales?product=${_.id}&from=cashier&quick=true&auto_add=true`),disabled:T,children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(rA,{className:"w-4 h-4 text-yellow-600"}),d.jsx("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Quick Sale"})]})}),d.jsx("div",{className:"text-center",children:d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add to cart or process as quick sale"})})]})]})]}),d.jsxs("div",{className:"flex flex-col justify-center items-center",children:[d.jsx("div",{className:"w-40 h-40 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center mb-4",children:_.image_url?d.jsx("img",{src:_.image_url,alt:_.name,className:"max-w-full max-h-full object-contain rounded"}):d.jsx(Hn,{className:"w-20 h-20 text-gray-400"})}),_.category&&d.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 text-xs font-medium",children:_.category})]})]})]}),d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6 mb-6`,children:[d.jsx("div",{className:"flex items-center mb-4",children:d.jsx("h2",{className:"text-lg font-medium",children:"Barcode Scanner"})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:`p-4 rounded-lg ${v?i?"bg-red-900/20":"bg-red-50":i?"bg-gray-700":"bg-gray-50"} mb-4 ${v?"ring-2 ring-red-500":""} transition-all duration-200 ${A&&v?"animate-pulse":""}`,children:[d.jsx("h3",{className:`font-medium mb-2 ${v?"text-red-500":""}`,children:"Quick Product Search"}),d.jsx("form",{onSubmit:q,children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{ref:l,type:"text",value:y,onChange:F=>m(F.target.value),placeholder:"Enter product name or code...",className:`w-full pl-10 pr-12 py-2 rounded-md 
                      ${i?"bg-gray-800 text-white":"bg-white text-gray-900"} 
                      ${v?"border-2 border-red-500 focus:ring-2 focus:ring-red-500":`border ${i?"border-gray-600":"border-gray-300"}`} 
                      focus:outline-none transition-all duration-200`,"aria-label":"Quick product search",autoFocus:v,disabled:A}),d.jsx(nd,{className:`absolute left-3 top-2.5 w-4 h-4 ${v?"text-red-500":"text-gray-400"}`}),d.jsx("button",{type:"submit",className:`absolute right-2 top-1.5 p-1 rounded-full ${v?"bg-red-500 text-white":"bg-gray-200 text-gray-600"} hover:opacity-90`,"aria-label":"Search products",disabled:A,children:d.jsx(r6,{className:"w-4 h-4"})})]})}),M&&v&&d.jsxs("div",{className:"flex items-center mt-2 text-red-500 text-sm",children:[d.jsx(Wn,{className:"w-4 h-4 mr-1"}),d.jsx("span",{children:M})]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700":"bg-gray-50"} mb-4 ${A?"animate-pulse":""}`,children:[d.jsx("h3",{className:"font-medium mb-2",children:"Scan Barcode"}),d.jsx("form",{onSubmit:L,children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:x,onChange:F=>S(F.target.value),placeholder:"Scan or type barcode...",className:`w-full pl-10 pr-12 py-2 rounded-md 
                      ${i?"bg-gray-800 text-white":"bg-white text-gray-900"} 
                      ${M?"border-2 border-red-500":`border ${i?"border-gray-600":"border-gray-300"}`} 
                      focus:outline-none focus:ring-2 ${M?"focus:ring-red-500":"focus:ring-blue-500"}`,"aria-label":"Barcode input",autoFocus:!0}),d.jsx(X0,{className:`absolute left-3 top-2.5 w-4 h-4 ${A?"text-blue-500":"text-gray-400"}`}),d.jsx("button",{type:"submit",className:`absolute right-2 top-1.5 p-1 rounded-full 
                      bg-blue-500 text-white 
                      hover:opacity-90`,"aria-label":"Scan barcode",disabled:A,children:d.jsx(X0,{className:"w-4 h-4"})})]})}),M&&d.jsxs("div",{className:"flex items-center mt-2 text-red-500 text-sm",children:[d.jsx(Wn,{className:"w-4 h-4 mr-1"}),d.jsx("span",{children:M})]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700":"bg-gray-50"} space-y-4`,children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium mb-2",children:"Scanner Instructions"}),d.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[d.jsx("li",{children:"Type or scan barcode in the input field above"}),d.jsx("li",{children:"Use product search for name-based lookup"}),d.jsx("li",{children:'Click "Add to Sale" to add products to cart'}),d.jsx("li",{children:'Use "Quick Sale" for immediate checkout'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium mb-2",children:"Keyboard Shortcuts"}),d.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm text-gray-500 dark:text-gray-400",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Add to Sale:"}),d.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-xs",children:"Enter"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Clear Scanner:"}),d.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-xs",children:"Esc"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"New Sale:"}),d.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-xs",children:"F1"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Scan Mode:"}),d.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-xs",children:"F2"})]})]})]})]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-blue-900/20":"bg-blue-50"} flex flex-col justify-center items-center`,children:[d.jsx(X0,{className:`w-16 h-16 ${i?"text-blue-400":"text-blue-500"} mb-4`}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Quick Checkout Process"}),d.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Scan products, add customer details, and process payment in seconds."})]})]})]}),d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium",children:"Today's Sales Report"}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Detailed breakdown of all transactions for ",qt(new Date,"dd MMMM yyyy")]})]}),d.jsxs("div",{className:"flex flex-col items-end",children:[d.jsx("span",{className:"text-sm px-2 py-1 rounded bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 mb-1",children:qt(new Date,"dd MMM yyyy")}),d.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[k.length," transactions"]})]})]}),k.length===0?d.jsx("div",{className:"text-center py-8 px-4 border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"relative mb-6",children:[d.jsx("div",{className:"absolute -top-2 -right-2 w-10 h-10 flex items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900",children:d.jsx(Ti,{className:"w-5 h-5 text-blue-600 dark:text-blue-300"})}),d.jsx(tc,{className:"w-16 h-16 mx-auto text-gray-400"})]}),d.jsx("h3",{className:"text-xl font-medium mb-3",children:"Sales Report Summary"}),d.jsxs("div",{className:"mb-5 px-3 py-1 rounded-lg bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 text-sm",children:["No transactions have been recorded for ",qt(new Date,"MMMM d, yyyy")]}),d.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 mb-5 text-left",children:[d.jsx("h4",{className:"font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Quick Summary"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"p-3 rounded bg-gray-100 dark:bg-gray-600",children:[d.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's Sales"}),d.jsx("div",{className:"text-lg font-semibold",children:ee(0)})]}),d.jsxs("div",{className:"p-3 rounded bg-gray-100 dark:bg-gray-600",children:[d.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transactions"}),d.jsx("div",{className:"text-lg font-semibold",children:"0"})]})]})]}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-5",children:"Get started by scanning products or searching inventory to process new sales."})]})}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:i?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Time"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Invoice #"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Items"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Subtotal"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tax"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Payment"}),d.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),d.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${i?"bg-gray-800":"bg-white"}`,children:k.map(F=>d.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:qt(new Date(F.created_at),"HH:mm")}),d.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",F.id.toString().slice(-5)]}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:F.customer_name||"Walk-in Customer"}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-center text-gray-500 dark:text-gray-400",children:d.jsx("span",{className:"px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 font-medium",children:F.items_count||0})}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:ee(F.subtotal||0)}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:ee(F.tax_amount||0)}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ee(F.total)}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm",children:d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.payment_method==="cash"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-100":F.payment_method==="card"?"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-100":F.payment_method==="upi"?"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:F.payment_method?F.payment_method.charAt(0).toUpperCase()+F.payment_method.slice(1):"Unknown"}),F.status==="credit"&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-100",children:"Credit Sale"}),F.status==="debit"&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-100",children:"Cash Sale"})]})}),d.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium
                        ${F.status==="credit"?"bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100":F.payment_method==="cash"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":F.status==="pending"?"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:F.payment_method==="cash"?"Cash Sale":F.status==="credit"?"Credit Sale":F.status==="pending"?"Awaiting Payment":"Unknown"})})]},F.id))}),k.length>0&&d.jsx("tfoot",{className:`border-t-2 ${i?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:d.jsxs("tr",{children:[d.jsx("td",{colSpan:4,className:"px-3 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Daily Summary"}),d.jsx("td",{className:"px-3 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:ee(k.reduce((F,X)=>F+(X.subtotal||0),0))}),d.jsx("td",{className:"px-3 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:ee(k.reduce((F,X)=>F+(X.tax_amount||0),0))}),d.jsx("td",{className:"px-3 py-3 text-sm font-medium text-gray-900 dark:text-white",children:ee(k.reduce((F,X)=>F+X.total,0))}),d.jsx("td",{colSpan:2,className:"px-3 py-3 text-sm text-right font-medium",children:d.jsxs("span",{className:"px-2 py-1 rounded-md bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-100",children:[k.length," Sales"]})})]})})]})}),d.jsxs("div",{className:`mt-8 p-5 rounded-lg ${i?"bg-gray-700/50":"bg-gray-50"}`,children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:"Quick Summary Report"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Total Sales"}),d.jsx("p",{className:"text-lg font-semibold",children:ee(k.reduce((F,X)=>F+X.total,0))})]}),d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Transactions"}),d.jsx("p",{className:"text-lg font-semibold",children:k.length})]}),d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Average Sale"}),d.jsx("p",{className:"text-lg font-semibold",children:ee(k.length>0?k.reduce((F,X)=>F+X.total,0)/k.length:0)})]}),d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tax Collected"}),d.jsx("p",{className:"text-lg font-semibold",children:ee(k.reduce((F,X)=>F+(X.tax_amount||0),0))})]})]})]}),k.length>0&&d.jsxs("div",{className:`mt-8 p-5 rounded-lg ${i?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sales Report Summary"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Sales"}),d.jsx(Ti,{className:"w-5 h-5 text-blue-500"})]}),d.jsx("p",{className:"text-2xl font-bold",children:ee(k.reduce((F,X)=>F+X.total,0))}),d.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[k.length," transactions"]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Payment Methods"}),d.jsx(tc,{className:"w-5 h-5 text-green-500"})]}),d.jsx("div",{className:"space-y-2",children:["cash","card","upi"].map(F=>{const X=k.filter(ce=>ce.payment_method===F),te=X.reduce((ce,ue)=>ce+ue.total,0),se=k.length>0?Math.round(X.length/k.length*100):0;return te>0?d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"capitalize",children:F}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"mr-2",children:["",te.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),d.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200",children:[se,"%"]})]})]},F):null})})]}),d.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Time Analysis"}),d.jsx(K0,{className:"w-5 h-5 text-purple-500"})]}),d.jsxs("div",{className:"space-y-2",children:[(()=>{const F=k.filter(se=>new Date(se.created_at).getHours()<12),X=F.reduce((se,ce)=>se+ce.total,0),te=k.length>0?Math.round(F.length/k.length*100):0;return d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Morning"}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"mr-2",children:["",X.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),d.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200",children:[te,"%"]})]})]})})(),(()=>{const F=k.filter(se=>{const ce=new Date(se.created_at).getHours();return ce>=12&&ce<17}),X=F.reduce((se,ce)=>se+ce.total,0),te=k.length>0?Math.round(F.length/k.length*100):0;return d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Afternoon"}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"mr-2",children:["",X.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),d.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-200",children:[te,"%"]})]})]})})(),(()=>{const F=k.filter(se=>new Date(se.created_at).getHours()>=17),X=F.reduce((se,ce)=>se+ce.total,0),te=k.length>0?Math.round(F.length/k.length*100):0;return d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Evening"}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"mr-2",children:["",X.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),d.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:[te,"%"]})]})]})})()]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Average Sale"}),d.jsx("p",{className:"text-lg font-semibold",children:ee(k.length>0?k.reduce((F,X)=>F+X.total,0)/k.length:0)})]}),d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Highest Sale"}),d.jsx("p",{className:"text-lg font-semibold",children:ee(k.length>0?Math.max(...k.map(F=>F.total)):0)})]}),d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tax Collected"}),d.jsx("p",{className:"text-lg font-semibold",children:ee(k.reduce((F,X)=>F+(X.tax_amount||0),0))})]}),d.jsxs("div",{className:`p-3 rounded-lg ${i?"bg-gray-800":"bg-white"} shadow-sm`,children:[d.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Items Sold"}),d.jsx("p",{className:"text-lg font-semibold",children:k.reduce((F,X)=>F+(X.items_count||0),0)})]})]})]})]})]})})}const Tpe=()=>{console.log("SalespersonDashboard component rendering");const{theme:r}=zr(),{selectedCompany:t}=ln(),{hasPermission:e,isRoleLoading:n,userRole:a,permissions:i}=ts(),s=r==="dark",[o,l]=ie.useState(!1),[c,u]=ie.useState(null),[f,h]=ie.useState(new Date),[p,g]=ie.useState(!1),[y,m]=ie.useState([{title:"Draft Orders",value:"0",icon:z1},{title:"Products Available",value:"0",icon:Hn},{title:"Customers",value:"0",icon:wn}]);console.log("SalespersonDashboard - User Role:",a),console.log("SalespersonDashboard - Role Loading:",n),console.log("SalespersonDashboard - Selected Company:",t),console.log("SalespersonDashboard - Permissions:",i),console.log("SalespersonDashboard - Has Sales Create Permission:",e("sales","create"));const[v,b]=ie.useState([]),[x,S]=ie.useState(""),[_,I]=ie.useState([]),A=[{title:"Create Quotation",icon:NK,path:"/sales?type=quotation&from=salesperson",color:"bg-blue-500 dark:bg-blue-600"},{title:"Draft Order",icon:z1,path:"/sales?type=draft&from=salesperson",color:"bg-green-500 dark:bg-green-600"},{title:"Browse Products",icon:Hn,path:"/products?from=salesperson",color:"bg-purple-500 dark:bg-purple-600"},{title:"Customer List",icon:wn,path:"/customers?from=salesperson",color:"bg-orange-500 dark:bg-orange-600"}],O=async(U=!1)=>{if(!t){u("No company selected"),Ce.error("Please select a company first");return}l(!0),u(null);try{const{count:D,error:T}=await De.from("sales").select("*",{count:"exact",head:!0}).eq("company_id",t.id).eq("status","draft");if(T)throw T;const{count:R,error:C}=await De.from("products").select("*",{count:"exact",head:!0}).eq("company_id",t.id);if(C)throw C;const{count:N,error:E}=await De.from("customers").select("*",{count:"exact",head:!0}).eq("company_id",t.id);if(E)throw E;const k=[{title:"Draft Orders",value:String(D||0),icon:z1},{title:"Products Available",value:String(R||0),icon:Hn},{title:"Customers",value:String(N||0),icon:wn}];m(k);const{data:P,error:q}=await De.from("products").select("id, name, price, stock, category").eq("company_id",t.id).order("stock",{ascending:!1}).limit(10);if(q)throw q;b(P||[]),I(P||[]),h(new Date),U&&Ce.success("Dashboard data refreshed successfully")}catch(D){console.error("Error refreshing dashboard:",D),u(D instanceof Error?D.message:"Failed to refresh data"),Ce.error("Failed to update dashboard data")}finally{l(!1)}},M=()=>{O(!0)};ie.useEffect(()=>{try{if(console.log("SalespersonDashboard useEffect running"),console.log("Current state - isRoleLoading:",n,"userRole:",a,"permissions:",i),n){console.log("Role is still loading, skipping permission check");return}console.log("Granting access to salesperson dashboard"),g(!0),t?(console.log("Loading dashboard data with company:",t.id),O()):(console.log("No company selected, showing demo data"),m([{title:"Draft Orders",value:"0",icon:z1},{title:"Products Available",value:"0",icon:Hn},{title:"Customers",value:"0",icon:wn}]))}catch(U){console.error("Error in SalespersonDashboard useEffect:",U),u(U instanceof Error?U.message:"An error occurred while loading the dashboard"),Ce.error("Failed to load dashboard data")}},[t,n,a]),ie.useEffect(()=>{if(x.trim()==="")I(v);else{const U=v.filter(D=>D.name.toLowerCase().includes(x.toLowerCase())||D.category&&D.category.toLowerCase().includes(x.toLowerCase()));I(U)}},[x,v]);const z=U=>`${U.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return n?d.jsx(hp,{title:"Loading...",children:d.jsxs("div",{className:"flex items-center justify-center h-64",children:[d.jsx(Wn,{className:"w-6 h-6 text-yellow-500 mr-2"}),d.jsx("p",{children:"Loading dashboard..."})]})}):p?d.jsx(hp,{title:"Salesperson Dashboard",subtitle:t?`${t.name} | Last updated: ${qt(f,"MMM d, yyyy HH:mm:ss")}`:"Select a company to view your dashboard",actions:t&&d.jsx(lt,{variant:"primary",onClick:M,isLoading:o,leftIcon:d.jsx(nc,{className:"w-4 h-4"}),children:"Update Data"}),children:d.jsxs("div",{className:"space-y-6",children:[!1,c&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Wn,{className:"w-5 h-5 mr-2"}),d.jsx("span",{children:c})]})}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:A.map(U=>d.jsxs(Oa,{to:U.path,className:`${U.color} text-white rounded-lg p-6 flex flex-col items-center justify-center text-center transition-transform hover:scale-105`,children:[d.jsx(U.icon,{className:"w-10 h-10 mb-3"}),d.jsx("span",{className:"text-lg font-medium",children:U.title})]},U.title))}),d.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:y.map(U=>{const D=U.icon;return d.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm relative overflow-hidden transition-all duration-300 hover:shadow-md`,children:d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-500"}`,children:U.title}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:U.value})]}),d.jsx("div",{className:`p-2 rounded-full ${s?"bg-gray-700":"bg-gray-100"}`,children:d.jsx(D,{className:`w-6 h-6 ${s?"text-blue-400":"text-blue-500"}`})})]})},U.title)})}),d.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6 mb-6`,children:[d.jsx("div",{className:"mb-4",children:d.jsx("h2",{className:"text-lg font-medium",children:"Create New Quotation"})}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create professional quotations for your customers. Quotations can be converted to sales orders later."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[d.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[d.jsx(jp,{className:"w-4 h-4 mr-2"}),"Quotation Features"]}),d.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[d.jsx("li",{children:"Add multiple products with custom pricing"}),d.jsx("li",{children:"Apply discounts and taxes"}),d.jsx("li",{children:"Save as draft for later editing"}),d.jsx("li",{children:"Print or email to customers"})]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[d.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[d.jsx(ui,{className:"w-4 h-4 mr-2"}),"Draft Orders"]}),d.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[d.jsx("li",{children:"Create draft sales orders"}),d.jsx("li",{children:"Save customer information"}),d.jsx("li",{children:"Manager approval required for finalization"}),d.jsx("li",{children:"Convert to invoice when approved"})]})]})]})]}),d.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg font-medium",children:"Product Catalog"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search products...",value:x,onChange:U=>S(U.target.value),className:`pl-10 pr-4 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`}),d.jsx(nd,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"})]})]}),_.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Hn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:"text-gray-500",children:"No products found"})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:s?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Product Name"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stock"})]})}),d.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${s?"bg-gray-800":"bg-white"}`,children:_.map(U=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:U.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:U.category||"Uncategorized"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:z(U.price)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${U.stock>10?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":U.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"}`,children:U.stock})})]},U.id))})]})})]})]})}):d.jsx(hp,{title:"Salesperson Dashboard",children:d.jsxs("div",{className:"flex items-center justify-center h-64",children:[d.jsx(Wn,{className:"w-6 h-6 text-yellow-500 mr-2"}),d.jsx("p",{children:"Loading dashboard data..."})]})})},OU=({children:r,lastUpdate:t=new Date,onRefresh:e,isLoading:n=!1})=>{var I;const a=vl(),i=pi(),{theme:s,toggleTheme:o}=zr(),l=Jc(),{userRole:c}=ts(),{selectedCompany:u}=ln(),f=s==="dark",{signOut:h,user:p}=l||{signOut:async()=>{},user:null},[g,y]=ie.useState(!1),[m,v]=ie.useState(!1),[b,x]=ie.useState(!1),S=[{name:"Admin Dashboard",href:"/super-admin-dashboard",icon:Pu},{name:"Manage Companies",href:"/companies",icon:ec},{name:"User Management",href:"/users",icon:wn},{name:"System Settings",href:"/settings",icon:Vc},{name:"Database Tools",href:"/database",icon:xg},{name:"GST Settings",href:"/gst-settings",icon:jp},{name:"WhatsApp Settings",href:"/whatsapp-settings",icon:By},{name:"Offers & Promotions",href:"/offers-promotions",icon:pN},{name:"Reports",href:"/reports",icon:Oc},{name:"Profit-Loss Reports",href:"/profit-loss-reports",icon:Eh},{name:"Stock Report",href:"/stock-report",icon:Oc},{name:"Add Expense",href:"/expenses/add",icon:Eh},{name:"Expense Reports",href:"/expenses/reports",icon:Oc},{name:"Gross Profit & Loss",href:"/profit-loss",icon:Eh}],_=async()=>{await h(),i("/login")};return ie.useEffect(()=>{const A=O=>{const M=O.target;!M.closest("[data-user-menu]")&&m&&v(!1),!M.closest("[data-notifications]")&&b&&x(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[m,b]),ie.useEffect(()=>{y(!1)},[a.pathname]),d.jsxs("div",{className:`min-h-screen ${f?"dark bg-gray-900":"bg-gray-50"}`,children:[d.jsxs("header",{className:`fixed top-0 left-0 right-0 z-30 ${f?"bg-gray-800":"bg-white"} shadow-sm h-16 px-4 flex items-center justify-between`,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("button",{onClick:()=>y(!g),className:`md:hidden p-2 rounded-md ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:g?d.jsx(va,{className:"h-6 w-6"}):d.jsx(yD,{className:"h-6 w-6"})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("h1",{className:`text-xl font-bold ${f?"text-white":"text-gray-900"} ml-2 md:ml-0`,children:"Tallybooks"}),d.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-md ${f?"bg-blue-900/30 text-blue-300":"bg-blue-100 text-blue-700"}`,children:"Admin"})]})]}),d.jsx("div",{className:"hidden md:block",children:d.jsx(rm,{})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[e&&d.jsxs("div",{className:"hidden md:flex items-center mr-2",children:[d.jsxs("span",{className:`text-xs ${f?"text-gray-400":"text-gray-500"}`,children:["Last updated: ",qt(t,"MMM d, h:mm a")]}),d.jsx(lt,{variant:"primary",size:"sm",onClick:e,isLoading:n,className:`ml-2 ${f?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:d.jsx(nc,{className:"w-4 h-4"})})]}),d.jsx("button",{onClick:o,className:`p-2 rounded-md ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,"aria-label":f?"Switch to light mode":"Switch to dark mode",children:f?d.jsx(Wv,{className:"h-5 w-5"}):d.jsx(zv,{className:"h-5 w-5"})}),d.jsxs("div",{className:"relative","data-notifications":!0,children:[d.jsxs("button",{onClick:()=>x(!b),className:`p-2 rounded-md ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[d.jsx(oD,{className:"h-5 w-5"}),d.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500"})]}),b&&d.jsxs("div",{className:`absolute right-0 mt-2 w-80 rounded-md shadow-lg ${f?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[d.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:d.jsx("h3",{className:`text-sm font-medium ${f?"text-white":"text-gray-900"}`,children:"Notifications"})}),d.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.jsx("div",{className:`p-4 ${f?"text-gray-300":"text-gray-700"} text-sm`,children:d.jsx("p",{children:"No new notifications"})})})]})]}),d.jsxs("div",{className:"relative","data-user-menu":!0,children:[d.jsxs("button",{onClick:()=>v(!m),className:`flex items-center space-x-1 p-2 rounded-md ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[d.jsx(Ax,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden md:inline text-sm",children:((I=p==null?void 0:p.email)==null?void 0:I.split("@")[0])||"User"}),d.jsx(Oh,{className:`h-4 w-4 transition-transform ${m?"rotate-180":""}`})]}),m&&d.jsx("div",{className:`absolute right-0 mt-2 w-48 rounded-md shadow-lg ${f?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:d.jsxs("div",{className:"py-1",children:[d.jsxs("div",{className:`px-4 py-2 border-b ${f?"border-gray-700":"border-gray-200"}`,children:[d.jsx("p",{className:`text-sm font-medium ${f?"text-white":"text-gray-900"}`,children:(p==null?void 0:p.email)||"User"}),d.jsx("p",{className:`text-xs ${f?"text-gray-400":"text-gray-500"}`,children:c?`${c.charAt(0).toUpperCase()}${c.slice(1)}`:"Super Admin"})]}),d.jsx(Oa,{to:"/profile",className:`block px-4 py-2 text-sm ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Your Profile"}),d.jsx(Oa,{to:"/settings",className:`block px-4 py-2 text-sm ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Settings"}),d.jsx("button",{onClick:_,className:`block w-full text-left px-4 py-2 text-sm ${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Sign out"})]})})]})]})]}),g&&d.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-50 md:hidden",onClick:()=>y(!1)}),d.jsxs("div",{className:"flex pt-16 h-screen",children:[d.jsxs("aside",{className:`hidden md:block w-64 fixed left-0 top-16 bottom-0 overflow-y-auto ${f?"bg-gray-800":"bg-white"} shadow-lg z-10`,children:[d.jsx("nav",{className:"px-3 py-4",children:S.map(A=>{const O=A.icon,M=a.pathname===A.href;return d.jsxs(Oa,{to:A.href,className:`
                    flex items-center px-3 py-2 my-1 rounded-md text-sm font-medium
                    ${M?`${f?"bg-blue-600":"bg-blue-500"} text-white`:`${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`}
                  `,children:[d.jsx(O,{className:"mr-3 h-5 w-5"}),A.name]},A.name)})}),u&&d.jsxs("div",{className:`mt-auto p-4 border-t ${f?"border-gray-700":"border-gray-200"}`,children:[d.jsx("div",{className:`text-sm ${f?"text-gray-400":"text-gray-500"}`,children:"Current Company"}),d.jsx("div",{className:`font-medium ${f?"text-white":"text-gray-900"} truncate`,children:u.name}),u.tax_number&&d.jsxs("div",{className:"text-xs text-gray-500",children:["GST: ",u.tax_number]})]})]}),d.jsxs("aside",{className:`fixed inset-y-0 left-0 transform ${g?"translate-x-0":"-translate-x-full"} w-64 transition-transform duration-300 ease-in-out md:hidden z-30 pt-16 ${f?"bg-gray-800":"bg-white"} shadow-lg`,children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:d.jsx(rm,{})}),d.jsx("nav",{className:"px-3 py-4",children:S.map(A=>{const O=A.icon,M=a.pathname===A.href;return d.jsxs(Oa,{to:A.href,className:`
                    flex items-center px-3 py-2 my-1 rounded-md text-sm font-medium
                    ${M?`${f?"bg-blue-600":"bg-blue-500"} text-white`:`${f?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`}
                  `,children:[d.jsx(O,{className:"mr-3 h-5 w-5"}),A.name]},A.name)})})]}),d.jsx("main",{className:`flex-1 ${f?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} ml-0 md:ml-64 p-4 md:p-6 overflow-auto`,children:r})]})]})},sM=()=>{const{theme:r}=zr(),{selectedCompany:t}=ln(),{userRole:e,isRoleLoading:n}=ts(),a=pi(),i=r==="dark",[s,o]=ie.useState(!1),[l,c]=ie.useState(null),[u,f]=ie.useState(new Date),h=ie.useRef(null),[p,g]=ie.useState([{title:"Current Company",value:"Loading...",icon:ec},{title:"Total Users",value:"0",icon:wn},{title:"Active Users",value:"0",icon:Hv},{title:"Total Records",value:"0",icon:xg}]),y=[{title:"Manage Companies",icon:ec,path:"/companies",color:"bg-blue-500 dark:bg-blue-600"},{title:"User Management",icon:wn,path:"/users",color:"bg-green-500 dark:bg-green-600"},{title:"System Settings",icon:Vc,path:"/settings",color:"bg-purple-500 dark:bg-purple-600"},{title:"Database Tools",icon:xg,path:"/database",color:"bg-orange-500 dark:bg-orange-600"}],m=async(_=!1)=>{o(!0),c(null);try{if(!t){c("Please select a company to view dashboard data"),o(!1);return}const{data:{session:I},error:A}=await De.auth.getSession();A&&console.error("Error getting session:",A);let O=0,M=0,z=0;if(I)try{const{count:D,error:T}=await De.from("company_users").select("*",{count:"exact",head:!0}).eq("company_id",t.id);if(T){console.error("Error fetching company users:",T);const{count:R,error:C}=await De.from("auth_users").select("*",{count:"exact",head:!0});C||(O=R||0,M=Math.round(O*.7))}else{O=D||0;const{count:R,error:C}=await De.from("company_users").select("*",{count:"exact",head:!0}).eq("company_id",t.id).eq("is_active",!0);C?(console.error("Error fetching active users:",C),M=Math.round(O*.7)):M=R||0}try{const R=["customers","products","sales"];let C=0;for(const N of R){const{count:E,error:k}=await De.from(N).select("*",{count:"exact",head:!0}).eq("company_id",t.id);!k&&E!==null&&(C+=E)}z=C}catch(R){console.error("Error calculating total records:",R)}}catch(D){console.error("Error calculating user counts:",D)}const U=[{title:"Current Company",value:t.name,icon:ec},{title:"Total Users",value:String(O||0),icon:wn},{title:"Active Users",value:String(M||0),icon:Hv},{title:"Total Records",value:String(z||0),icon:xg}];g(U),f(new Date),_&&Ce.success("Dashboard data refreshed")}catch(I){console.error("Error fetching dashboard data:",I),c("Failed to load dashboard data"),Ce.error("Failed to load dashboard data")}finally{o(!1)}},v=()=>{m(!0)},b=async()=>{try{if(o(!0),Ce.loading("Preparing database backup...",{id:"backup-toast"}),!t)throw new Error("Please select a company before creating a backup");const{data:{session:_},error:I}=await De.auth.getSession();if(I)throw I;if(!_)throw new Error("No active session");const{runBackupSetup:A}=await yo(async()=>{const{runBackupSetup:N}=await import("./setupBackupSystem-CPhDMn_x.js");return{runBackupSetup:N}},[]),O=await A();if(!O.success)throw console.error("Backup system setup failed:",O.error),new Error("Failed to set up backup system");O.partial&&console.warn("Backup system setup was partially successful");let M;try{const{data:N,error:E}=await De.from("backups").insert([{created_by:_.user.id,status:"pending",type:"full"}]).select().single();if(E)if(console.error("Error creating backup record:",E),E.message.includes('relation "backups" does not exist'))console.log("Backups table does not exist, using temporary backup ID"),M={id:crypto.randomUUID()};else throw new Error("Failed to create backup record: "+E.message);else M=N}catch(N){console.error("Exception creating backup record:",N),M={id:crypto.randomUUID()},console.log("Using temporary backup ID due to error:",M.id)}if(!M||!M.id)throw new Error("Failed to create or generate backup ID");Ce.loading("Generating backup...",{id:"backup-toast"});let z;try{const{data:N,error:E}=await De.rpc("simple_backup",{backup_id:M.id,filter_company_id:t.id});if(E){console.error("Error generating backup using RPC:",E);const k=E.message.toLowerCase();if(k.includes("function")&&(k.includes("does not exist")||k.includes("could not find the function")||k.includes("schema cache"))||k.includes("simple_backup")||E.code==="42883"){console.log("Backup function does not exist, falling back to direct queries");const P=["companies","customers","products","sales","sale_items","purchases","purchase_items","tax_rates","tax_settings"],q={};for(const H of P)try{let L=De.from(H).select("*").limit(1e3);["customers","products","sales","sale_items","purchases","purchase_items","tax_rates","tax_settings"].includes(H)&&(L=L.eq("company_id",t.id));const{data:K,error:Y}=await L;Y?(console.warn(`Error fetching ${H}:`,Y),q[H]=[]):q[H]=K||[]}catch(L){console.warn(`Exception fetching ${H}:`,L),q[H]=[]}z={metadata:{version:"1.0",timestamp:new Date().toISOString(),backup_id:M.id,generated_by:"fallback_method",company_id:t.id,company_name:t.name},...q}}else throw new Error("Failed to generate backup: "+E.message)}else z=N}catch(N){throw console.error("Exception generating backup:",N),new Error("Failed to generate backup: "+(N instanceof Error?N.message:String(N)))}if(!z)throw new Error("No backup data was generated");const U=typeof z=="string"?z:JSON.stringify(z,null,2),D=new Blob([U],{type:"application/json"}),T=URL.createObjectURL(D),R=document.createElement("a");R.href=T;const C=t.name.toLowerCase().replace(/[^a-z0-9]/g,"-");R.download=`${C}-backup-${qt(new Date,"yyyy-MM-dd-HH-mm")}.json`,Ce.dismiss("backup-toast"),Ce.success("Database backup created successfully"),document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(T)}catch(_){console.error("Error creating backup:",_),Ce.dismiss("backup-toast"),Ce.error(_ instanceof Error?_.message:"Failed to create database backup")}finally{o(!1)}},x=()=>{h.current&&h.current.click()},S=async _=>{var A;const I=(A=_.target.files)==null?void 0:A[0];if(I)try{o(!0);const{handleBackupFileUpload:O}=await yo(async()=>{const{handleBackupFileUpload:M}=await import("./restoreBackup-D5HV95cz.js");return{handleBackupFileUpload:M}},[]);await O(I),m(!0)}catch(O){console.error("Error restoring backup:",O),Ce.error(O instanceof Error?O.message:"Failed to restore database backup")}finally{o(!1),h.current&&(h.current.value="")}};return ie.useEffect(()=>{if(!n&&e!=="admin"&&e!=="owner"){Ce.error("This dashboard is only accessible to administrators"),a("/");return}t&&m()},[e,n,a,t]),d.jsx(OU,{lastUpdate:u,onRefresh:v,isLoading:s,children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Database Management"}),t&&d.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Company: ",d.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]})]}),l&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(jp,{className:"h-5 w-5 text-red-500"})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:l})})]})}),!t&&!l&&d.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 p-4 rounded",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(ec,{className:"h-5 w-5 text-yellow-500"})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"Please select a company from the top navigation to view database management data."})})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((_,I)=>d.jsx("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`p-3 rounded-full ${i?"bg-blue-500/20":"bg-blue-100"} mr-4`,children:d.jsx(_.icon,{className:"h-6 w-6 text-blue-500"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-black dark:text-gray-300",children:_.title}),d.jsx("p",{className:"text-2xl font-semibold text-black dark:text-gray-100",children:_.value})]})]})},I))}),d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4 text-black dark:text-gray-100",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((_,I)=>d.jsx(Oa,{to:_.path,className:`${_.color} p-4 rounded-lg text-white transition-transform hover:scale-105`,children:d.jsxs("div",{className:"flex flex-col items-center text-center",children:[d.jsx(_.icon,{className:"h-8 w-8 mb-2"}),d.jsx("span",{className:"font-medium text-white",children:_.title})]})},I))})]}),d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4 text-black dark:text-gray-100",children:"System Overview"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[d.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center text-black dark:text-gray-200",children:[d.jsx(Oc,{className:"w-5 h-5 mr-2 text-blue-500"}),"System Statistics"]}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-black dark:text-gray-300",children:"System Version:"}),d.jsx("span",{className:"font-medium text-black dark:text-gray-200",children:"1.0.0"})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-black dark:text-gray-300",children:"Database Status:"}),d.jsx("span",{className:"font-medium text-green-500",children:"Healthy"})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-black dark:text-gray-300",children:"Last Backup:"}),d.jsx("span",{className:"font-medium text-black dark:text-gray-200",children:qt(new Date,"MMM d, yyyy")})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-black dark:text-gray-300",children:"Storage Usage:"}),d.jsx("span",{className:"font-medium text-black dark:text-gray-200",children:"42%"})]})]})]}),d.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[d.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center text-black dark:text-gray-200",children:[d.jsx(Vc,{className:"w-5 h-5 mr-2 text-blue-500"}),"Admin Tools"]}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsx("li",{children:d.jsxs("button",{onClick:b,disabled:s,className:"text-blue-500 hover:underline flex items-center w-full text-left",children:[d.jsx(Nx,{className:"w-4 h-4 mr-2"}),"Create Database Backup"]})}),d.jsxs("li",{children:[d.jsxs("button",{onClick:x,disabled:s,className:"text-blue-500 hover:underline flex items-center w-full text-left",children:[d.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Restore From Backup"]}),d.jsx("input",{type:"file",ref:h,onChange:S,accept:".json",className:"hidden"})]}),d.jsx("li",{children:d.jsxs(Oa,{to:"/users/permissions",className:"text-blue-500 hover:underline flex items-center",children:[d.jsx("span",{className:"mr-2",children:""}),"Manage User Permissions"]})}),d.jsx("li",{children:d.jsxs(Oa,{to:"/system/logs",className:"text-blue-500 hover:underline flex items-center",children:[d.jsx("span",{className:"mr-2",children:""}),"View System Logs"]})}),d.jsx("li",{children:d.jsxs(Oa,{to:"/settings/tax",className:"text-blue-500 hover:underline flex items-center",children:[d.jsx("span",{className:"mr-2",children:""}),"Configure Tax Settings"]})})]})]})]})]})]})})};function Cpe({isOpen:r,onClose:t,onCompanyCreated:e}){const n=pi(),{user:a}=Jc(),{theme:i}=zr(),{addCompanyToState:s}=ln();ie.useEffect(()=>{var E;if(r&&a){const k=(E=a.user_metadata)==null?void 0:E.role;if(!(localStorage.getItem(`needsCompanySetup_${a.id}`)==="true")&&k!=="admin"){Ce.error("This feature is only available to administrators"),D();return}}},[r,a,t]);const[o,l]=ie.useState(!1),[c,u]=ie.useState(1),[f,h]=ie.useState(!1),[p,g]=ie.useState(!1),y=ie.useRef(null),[m,v]=ie.useState({name:"",legal_name:"",gst_number:"",website:"",logo_url:"",notes:"",email:"",phone:"",street_address:"",city:"",state:"",postal_code:"",country:"",subscription_status:"active"}),[b,x]=ie.useState(!1),S=ie.useRef(null),_=i==="dark";ie.useEffect(()=>{r&&(u(1),v({name:"",legal_name:"",gst_number:"",website:"",logo_url:"",notes:"",email:"",phone:"",street_address:"",city:"",state:"",postal_code:"",country:"",subscription_status:"active"}))},[r]),ie.useEffect(()=>{const E=k=>{k.key==="Escape"&&r&&D()};if(r)return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[r,t]);const I=()=>{if(y.current){const{scrollTop:E,scrollHeight:k,clientHeight:P}=y.current;h(E>100),g(E<k-P-100)}},A=()=>{y.current&&y.current.scrollTo({top:0,behavior:"smooth"})},O=()=>{y.current&&y.current.scrollTo({top:y.current.scrollHeight,behavior:"smooth"})},M=E=>{const{name:k,value:P}=E.target;v(q=>({...q,[k]:P}))},z=async E=>{var P;const k=(P=E.target.files)==null?void 0:P[0];if(k){if(!k.type.startsWith("image/")){Ce.error("Please upload an image file (JPG, PNG)");return}if(k.size>2*1024*1024){Ce.error("File size should be less than 2MB");return}x(!0);try{const q=k.name.split(".").pop(),H=`company-logos/${Date.now()}-${Math.random().toString(36).substr(2,8)}.${q}`,{error:L}=await De.storage.from("company-logos").upload(H,k,{cacheControl:"3600",upsert:!1});if(L)throw L;const{data:K}=De.storage.from("company-logos").getPublicUrl(H);K!=null&&K.publicUrl?(v(Y=>({...Y,logo_url:K.publicUrl})),Ce.success("Logo uploaded successfully!")):Ce.error("Failed to get logo URL")}catch{Ce.error("Failed to upload logo")}finally{x(!1)}}},U=async E=>{E.preventDefault(),l(!0);try{if(!m.name||!m.legal_name||!m.phone||!m.email){Ce.error("Please fill in all required fields"),l(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)){Ce.error("Please enter a valid email address"),l(!1);return}if(!/^\+?[\d\s-]{10,}$/.test(m.phone)){Ce.error("Please enter a valid phone number"),l(!1);return}const{data:q,error:H}=await De.rpc("create_company",{p_name:m.name,p_user_id:a==null?void 0:a.id,p_legal_name:m.legal_name||null,p_tax_number:m.gst_number||null,p_email:m.email||null,p_phone:m.phone||null,p_website:m.website||null,p_business_type:null,p_logo_url:m.logo_url||null,p_notes:m.notes||null,p_address_street:m.street_address||null,p_address_city:m.city||null,p_address_state:m.state||null,p_address_postal_code:m.postal_code||null,p_address_country:m.country||null});if(H){console.error("Error creating company via RPC:",H),H.code==="23505"?Ce.error("A company with this name already exists"):Ce.error(`Failed to create company: ${H.message}`),l(!1);return}const{data:L,error:K}=await De.from("companies").select("*").eq("id",q).single();if(K||!L){console.error("Error fetching created company:",K),Ce.error("Company created but failed to load details"),l(!1);return}const{error:Y}=await De.auth.updateUser({data:{first_login_completed:!0,company_setup_completed:!0,role:"admin"}});Y&&(console.error("Error updating user metadata:",Y),Ce.error("Company created but user profile update failed")),localStorage.removeItem(`needsCompanySetup_${a==null?void 0:a.id}`),s({...L,role:"owner"}),e(L),Ce.success(`${m.name} has been created successfully!`),u(3)}catch(k){console.error("Error creating company:",k),Ce.error(k instanceof Error?k.message:"Failed to create company")}finally{l(!1)}},D=()=>{localStorage.removeItem(`needsCompanySetup_${a==null?void 0:a.id}`),t()},T=()=>{window.confirm("Are you sure you want to skip company setup? You can create a company later from the dashboard.")&&D()},R=()=>d.jsxs("div",{className:"text-center space-y-6",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:`p-4 rounded-full ${_?"bg-blue-500/20":"bg-blue-100"}`,children:d.jsx(SK,{className:"w-12 h-12 text-blue-500"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:`text-2xl font-bold ${_?"text-white":"text-gray-900"}`,children:"Company Setup"}),d.jsx("p",{className:`mt-2 text-sm ${_?"text-gray-400":"text-gray-600"}`,children:"Let's set up your company to get started."})]}),d.jsx("div",{className:`p-4 rounded-lg ${_?"bg-yellow-900/20":"bg-yellow-50"} border-l-4 border-yellow-500`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(Wn,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-3"}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:`font-medium ${_?"text-white":"text-gray-900"}`,children:"Company Setup Required"}),d.jsx("p",{className:`text-sm mt-1 ${_?"text-gray-300":"text-gray-700"}`,children:"As an administrator, you need to create your company profile to access all features of the POS system."})]})]})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(lt,{onClick:T,variant:"secondary",className:"flex-1",children:"Skip for Now"}),d.jsxs(lt,{onClick:()=>u(2),className:"flex-1",variant:"primary",children:["Create Company",d.jsx(r6,{className:"w-4 h-4 ml-2"})]})]})]}),C=()=>d.jsxs("div",{className:"flex flex-col h-[80vh] max-h-[80vh]",children:[d.jsxs("div",{className:"text-center mb-2",children:[d.jsx("h2",{className:`text-2xl font-bold ${_?"text-white":"text-gray-900"}`,children:"Company Information"}),d.jsx("p",{className:`mt-2 text-sm ${_?"text-gray-400":"text-gray-600"}`,children:"Please provide your company details"}),d.jsxs("div",{className:`mt-2 text-xs ${_?"text-gray-500":"text-gray-400"} flex items-center justify-center`,children:[d.jsx(Oh,{className:"w-3 h-3 mr-1"}),"Scroll to see all fields"]})]}),d.jsxs("div",{className:"flex flex-col items-center mb-4",children:[d.jsx("div",{className:`relative flex items-center justify-center h-24 w-24 rounded-lg border-2 ${_?"border-gray-600 bg-gray-800":"border-gray-300 bg-white"} shadow-sm`,children:m.logo_url?d.jsx("img",{src:m.logo_url,alt:"Company Logo Preview",className:"h-20 w-20 object-contain rounded",style:{maxHeight:80,maxWidth:80},onError:E=>{E.currentTarget.style.display="none"}}):d.jsx(kK,{className:"w-10 h-10 text-gray-400"})}),d.jsx("input",{type:"file",ref:S,onChange:z,accept:"image/jpeg,image/png",className:"hidden"}),d.jsx(lt,{type:"button",variant:"secondary",size:"sm",className:"mt-3",onClick:()=>{var E;return(E=S.current)==null?void 0:E.click()},disabled:b,children:b?"Uploading...":"Upload Logo"}),d.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"JPG, PNG (max 2MB)"})]}),d.jsx("div",{className:`border-b ${_?"border-gray-700":"border-gray-200"} mb-2`}),d.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto px-1",ref:y,onScroll:I,children:d.jsxs("form",{onSubmit:U,className:"space-y-4 pb-32",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Company Name *"}),d.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:m.name,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter company name"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"legal_name",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Legal Name *"}),d.jsx("input",{id:"legal_name",name:"legal_name",type:"text",required:!0,value:m.legal_name,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter legal company name"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"gst_number",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"GST Number"}),d.jsx("input",{id:"gst_number",name:"gst_number",type:"text",value:m.gst_number,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter GST number"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"website",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Website"}),d.jsx("input",{id:"website",name:"website",type:"url",value:m.website,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter website URL"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"notes",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Admin Notes"}),d.jsx("textarea",{id:"notes",name:"notes",rows:3,value:m.notes,onChange:M,placeholder:"Internal notes (not visible to company users)",className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"phone",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Phone *"}),d.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:m.phone,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter phone number"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Email *"}),d.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:m.email,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter email address"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"street_address",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Street Address *"}),d.jsx("input",{id:"street_address",name:"street_address",type:"text",required:!0,value:m.street_address,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter street address"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"city",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"City *"}),d.jsx("input",{id:"city",name:"city",type:"text",required:!0,value:m.city,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter city"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"state",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"State"}),d.jsx("input",{id:"state",name:"state",type:"text",value:m.state,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter state"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"postal_code",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Postal Code"}),d.jsx("input",{id:"postal_code",name:"postal_code",type:"text",value:m.postal_code,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter postal code"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"country",className:`block text-sm font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"Country"}),d.jsx("input",{id:"country",name:"country",type:"text",value:m.country,onChange:M,className:`mt-1 block w-full px-3 py-2 border ${_?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter country"})]})]})]})}),d.jsxs("div",{className:"sticky bottom-0 left-0 w-full bg-gradient-to-t from-gray-900/95 to-transparent pt-4 pb-2 flex items-center justify-between z-20 px-2",style:{background:_?"rgba(17,24,39,0.95)":"rgba(255,255,255,0.95)"},children:[d.jsx(lt,{type:"button",variant:"secondary",onClick:()=>u(1),disabled:o,children:"Back"}),d.jsx(lt,{type:"submit",variant:"primary",isLoading:o,disabled:o,form:void 0,onClick:()=>{var E,k;return(k=(E=y.current)==null?void 0:E.querySelector("form"))==null?void 0:k.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},children:"Create Company"})]})]}),N=()=>d.jsxs("div",{className:"text-center space-y-6",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:`p-4 rounded-full ${_?"bg-green-500/20":"bg-green-100"}`,children:d.jsx(Cw,{className:"w-12 h-12 text-green-500"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:`text-2xl font-bold ${_?"text-white":"text-gray-900"}`,children:"Company Created Successfully!"}),d.jsx("p",{className:`mt-2 text-sm ${_?"text-gray-400":"text-gray-600"}`,children:"Your company has been set up. You now have full access to the admin dashboard."})]}),d.jsx("div",{className:`p-4 rounded-lg ${_?"bg-gray-700":"bg-green-50"} border-l-4 border-green-500`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(Cw,{className:"w-5 h-5 text-green-500 mt-0.5 mr-3"}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:`font-medium ${_?"text-white":"text-gray-900"}`,children:"Setup Complete"}),d.jsx("p",{className:`text-sm mt-1 ${_?"text-gray-300":"text-gray-700"}`,children:"You can now access all admin features and start managing your business."})]})]})}),d.jsxs(lt,{onClick:()=>{D(),n("/admin-dashboard")},variant:"primary",className:"w-full",children:["Go to Dashboard",d.jsx(r6,{className:"w-4 h-4 ml-2"})]})]});return r?d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:E=>{E.target===E.currentTarget&&D()},children:[d.jsxs("div",{className:`max-w-2xl w-full ${_?"bg-gray-800":"bg-white"} rounded-xl shadow-xl p-8 relative`,children:[d.jsx("button",{onClick:D,className:`absolute top-4 right-4 p-2 rounded-full ${_?"hover:bg-gray-700":"hover:bg-gray-100"} transition-colors`,title:"Close",children:d.jsx(va,{className:"w-5 h-5"})}),d.jsx("div",{className:"flex items-center justify-center mb-8",children:d.jsx("div",{className:"flex items-center space-x-4",children:[1,2,3].map(E=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${c>=E?"bg-blue-500 text-white":_?"bg-gray-600 text-gray-400":"bg-gray-200 text-gray-500"}`,children:c>E?d.jsx(Cw,{className:"w-4 h-4"}):E}),E<3&&d.jsx("div",{className:`w-12 h-0.5 ${c>E?"bg-blue-500":_?"bg-gray-600":"bg-gray-200"}`})]},E))})}),c===1&&R(),c===2&&C(),c===3&&N()]}),c===2&&f&&d.jsx("button",{onClick:A,className:`fixed right-4 bottom-20 p-2 rounded-full ${_?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-100"} shadow-lg border transition-colors z-30`,title:"Scroll to top",children:d.jsx(uD,{className:"w-4 h-4"})}),c===2&&p&&d.jsx("button",{onClick:O,className:`fixed right-4 bottom-4 p-2 rounded-full ${_?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-100"} shadow-lg border transition-colors z-30`,title:"Scroll to bottom",children:d.jsx(Oh,{className:"w-4 h-4"})})]}):null}const IU=({isOpen:r,onClose:t,companyId:e,onCompanyUpdated:n})=>{const{theme:a}=zr(),i=a==="dark",[s,o]=ie.useState(!0),[l,c]=ie.useState(!1),[u,f]=ie.useState(!1),[h,p]=ie.useState(null),[g,y]=ie.useState(null),m=ie.useRef(null),[v,b]=ie.useState({id:"",name:"",legal_name:"",tax_number:"",email:"",phone:"",website:"",logo_url:null,address_street:"",address_city:"",address_state:"",address_postal_code:"",address_country:"",business_type:null});ie.useEffect(()=>{r&&e&&x()},[r,e]);const x=async()=>{o(!0);try{const{data:A,error:O}=await De.from("companies").select("*").eq("id",e).single();if(O)throw O;A&&(b({id:A.id,name:A.name||"",legal_name:A.legal_name||"",tax_number:A.tax_number||"",email:A.email||"",phone:A.phone||"",website:A.website||"",logo_url:A.logo_url||null,address_street:A.address_street||"",address_city:A.address_city||"",address_state:A.address_state||"",address_postal_code:A.address_postal_code||"",address_country:A.address_country||"",business_type:A.business_type||null}),A.logo_url?y(A.logo_url):y(null))}catch(A){console.error("Error loading company:",A),Ce.error("Failed to load company data")}finally{o(!1)}},S=(A,O)=>{b(M=>({...M,[A]:O}))},_=A=>{var M;const O=((M=A.target.files)==null?void 0:M[0])||null;if(O){if(!O.type.startsWith("image/")){Ce.error("Please upload an image file (JPG, PNG)");return}if(O.size>2*1024*1024){Ce.error("File size should be less than 2MB");return}p(O),y(URL.createObjectURL(O))}},I=async A=>{A.preventDefault(),c(!0);try{let O=v.logo_url;if(h){f(!0);const z=h.name.split(".").pop(),U=`company-logos/${Gy()}.${z}`,{error:D}=await De.storage.from("company-logos").upload(U,h,{cacheControl:"3600",upsert:!1});if(D)throw D;const{data:T}=De.storage.from("company-logos").getPublicUrl(U),R=(T==null?void 0:T.publicUrl)||null;R&&(O=R),f(!1)}const{error:M}=await De.from("companies").update({name:v.name,legal_name:v.legal_name,tax_number:v.tax_number,email:v.email,phone:v.phone,website:v.website,logo_url:O,address_street:v.address_street,address_city:v.address_city,address_state:v.address_state,address_postal_code:v.address_postal_code,address_country:v.address_country,business_type:v.business_type||null}).eq("id",e);if(M)throw M;Ce.success("Company updated successfully"),n(),t()}catch(O){console.error("Error updating company:",O),Ce.error(O instanceof Error?O.message:"Failed to update company")}finally{c(!1)}};return r?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-2xl transform rounded-lg ${i?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Pi,{className:"w-6 h-6 mr-2"}),d.jsx("h2",{className:"text-xl font-semibold",children:"Edit Company"})]}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),s?d.jsxs("div",{className:"py-8 text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),d.jsx("p",{className:"mt-4",children:"Loading company data..."})]}):d.jsxs("form",{onSubmit:I,className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[d.jsx("div",{className:"relative w-32 h-32 mb-4 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:g?d.jsx("img",{src:g,alt:"Company logo",className:"w-full h-full object-cover"}):d.jsx("div",{className:"text-gray-400",children:d.jsx(Pi,{className:"w-12 h-12 mx-auto"})})}),d.jsx("input",{type:"file",ref:m,onChange:_,accept:"image/*",className:"hidden"}),d.jsxs(lt,{type:"button",variant:"secondary",size:"sm",onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},disabled:u,children:[d.jsx(Ex,{className:"w-4 h-4 mr-2"}),u?"Uploading...":"Change Logo"]}),d.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"JPG, PNG (max 2MB)"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name *"}),d.jsx("input",{type:"text",value:v.name,onChange:A=>S("name",A.target.value),required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Legal Name"}),d.jsx("input",{type:"text",value:v.legal_name,onChange:A=>S("legal_name",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"GST Number"}),d.jsx("input",{type:"text",value:v.tax_number,onChange:A=>S("tax_number",A.target.value),placeholder:"15AABCU9603R1ZX",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Website"}),d.jsx("input",{type:"url",value:v.website,onChange:A=>S("website",A.target.value),placeholder:"https://example.com",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),d.jsx("input",{type:"email",value:v.email,onChange:A=>S("email",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),d.jsx("input",{type:"tel",value:v.phone,onChange:A=>S("phone",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street Address"}),d.jsx("input",{type:"text",value:v.address_street,onChange:A=>S("address_street",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),d.jsx("input",{type:"text",value:v.address_city,onChange:A=>S("address_city",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"State"}),d.jsx("input",{type:"text",value:v.address_state,onChange:A=>S("address_state",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),d.jsx("input",{type:"text",value:v.address_postal_code,onChange:A=>S("address_postal_code",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),d.jsx("input",{type:"text",value:v.address_country,onChange:A=>S("address_country",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Type (optional)"}),d.jsxs("select",{value:v.business_type||"",onChange:A=>S("business_type",A.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"Select business type"}),Pj.map(A=>d.jsx("option",{value:A,children:A},A))]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx(lt,{variant:"ghost",onClick:t,disabled:l||u,type:"button",children:"Cancel"}),d.jsx(lt,{variant:"primary",type:"submit",disabled:l||u,leftIcon:l||u?void 0:d.jsx(kx,{className:"w-4 h-4"}),children:l||u?d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),u?"Uploading...":"Saving..."]}):"Save Changes"})]})]})]})]})}):null},MU=({isOpen:r,onClose:t,companyId:e,companyName:n,onRemoved:a})=>{const{theme:i}=zr(),s=i==="dark",[o,l]=ie.useState(!1),[c,u]=ie.useState("");if(!r)return null;const f=async()=>{if(c!==n){Ce.error("Company name does not match");return}l(!0);try{const{error:h}=await De.from("companies").delete().eq("id",e);if(h)throw h;Ce.success("Company removed successfully"),a(),t()}catch(h){console.error("Error removing company:",h),Ce.error("Failed to remove company")}finally{l(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-md transform rounded-lg ${s?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(bN,{className:"w-6 h-6 text-red-500 mr-2"}),d.jsx("h2",{className:"text-xl font-semibold",children:"Remove Company"})]}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${s?"hover:bg-gray-700":"hover:bg-gray-100"}`,"aria-label":"Close modal",children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:`p-4 rounded-md ${s?"bg-red-900/20":"bg-red-50"} border border-red-200`,children:d.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["This action cannot be undone. This will permanently delete the company",d.jsxs("span",{className:"font-semibold",children:[" ",n," "]}),"and all associated data."]})}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Please type ",d.jsx("span",{className:"font-semibold",children:n})," to confirm"]}),d.jsx("input",{type:"text",value:c,onChange:h=>u(h.target.value),placeholder:"Enter company name",className:`w-full p-2 rounded-md border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${c&&c!==n?"border-red-500":""}`})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx(lt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),d.jsx(lt,{variant:"danger",onClick:f,isLoading:o,disabled:c!==n,children:"Remove Company"})]})]})]})]})})},Ppe=()=>{const{theme:r}=zr(),{selectedCompany:t,fetchCompanies:e,companies:n}=ln(),{userRole:a,isRoleLoading:i}=ts(),{user:s}=Jc(),o=pi(),l=r==="dark",[c,u]=ie.useState(!1),[f,h]=ie.useState(null),[p,g]=ie.useState(new Date),y=ie.useRef(null),[m,v]=ie.useState(!1),[b,x]=ie.useState(!1),[S,_]=ie.useState(!1),[I,A]=ie.useState(null),[O,M]=ie.useState(null),[z,U]=ie.useState([{title:"Company",value:(t==null?void 0:t.name)||"Not Selected",icon:ec},{title:"Total Users",value:"0",icon:wn},{title:"Active Users",value:"0",icon:Hv},{title:"Total Sales",value:"0",icon:Oc}]),D=[{title:"Manage Companies",icon:ec,path:"/companies",color:"bg-blue-500 dark:bg-blue-600"},{title:"User Management",icon:wn,path:"/users",color:"bg-green-500 dark:bg-green-600"},{title:"System Settings",icon:Vc,path:"/settings",color:"bg-purple-500 dark:bg-purple-600"},{title:"Database Tools",icon:xg,path:"/database",color:"bg-orange-500 dark:bg-orange-600"},{title:"GST Settings",icon:jp,path:"/gst-settings",color:"bg-indigo-500 dark:bg-indigo-600"},{title:"Reports",icon:Oc,path:"/reports",color:"bg-red-500 dark:bg-red-600"},{title:"Profit & Loss Report",icon:Oc,path:"/profit-loss-reports",color:"bg-teal-500 dark:bg-teal-600"},{title:"Stock Report",icon:Oc,path:"/stock-report",color:"bg-amber-500 dark:bg-amber-600"}],T=async(L=!1)=>{if(u(!0),h(null),!t){h("No company selected. Please select a company to view dashboard data."),u(!1);return}try{const{data:{session:K},error:Y}=await De.auth.getSession();Y&&console.error("Error getting session:",Y);let Z=0,V=0;if(K!=null&&K.user)try{const{count:F,error:X}=await De.from("company_users").select("*",{count:"exact",head:!0}).eq("company_id",t.id);X?console.error("Error fetching company_users:",X):Z=F||0;const{count:te,error:se}=await De.from("company_users").select("*",{count:"exact",head:!0}).eq("company_id",t.id).eq("is_active",!0);se?(V=Math.round(Z*.7),console.error("Error fetching active users:",se)):V=te||0}catch(F){console.error("Error calculating user counts:",F)}let ee=0;try{const{data:F,error:X}=await De.from("sales").select("total").eq("company_id",t.id);!X&&F?(console.log("Sales data received:",F),ee=F.reduce((te,se)=>te+(parseFloat(se.total)||0),0),console.log("Total sales calculated:",ee)):console.error("Error fetching sales data:",X)}catch(F){console.error("Error calculating total sales:",F)}const B=[{title:"Company",value:t.name,icon:ec},{title:"Total Users",value:String(Z||0),icon:wn},{title:"Active Users",value:String(V||0),icon:Hv},{title:"Total Sales",value:`${ee.toLocaleString("en-IN",{maximumFractionDigits:2})}`,icon:Oc}];U(B),g(new Date),L&&Ce.success(`Dashboard data refreshed for ${t.name}`)}catch(K){console.error("Error fetching dashboard data:",K),h("Failed to load dashboard data"),Ce.error("Failed to load dashboard data")}finally{u(!1)}},R=()=>{T(!0)},C=L=>{switch(L){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"trial":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"expired":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},N=L=>{switch(L){case"active":return d.jsx(dD,{className:"w-4 h-4"});case"trial":return d.jsx(K0,{className:"w-4 h-4"});case"expired":return d.jsx(Wn,{className:"w-4 h-4"});default:return null}},E=async()=>{try{u(!0),Ce.loading("Preparing database backup...",{id:"backup-toast"});const{data:{session:L},error:K}=await De.auth.getSession();if(K)throw K;if(!L)throw new Error("No active session");const{runBackupSetup:Y}=await yo(async()=>{const{runBackupSetup:ce}=await import("./setupBackupSystem-CPhDMn_x.js");return{runBackupSetup:ce}},[]),Z=await Y();if(!Z.success)throw console.error("Backup system setup failed:",Z.error),new Error("Failed to set up backup system");Z.partial&&console.warn("Backup system setup was partially successful");let V;try{const{data:ce,error:ue}=await De.from("backups").insert([{created_by:L.user.id,status:"pending",type:"full"}]).select().single();if(ue)if(console.error("Error creating backup record:",ue),ue.message.includes('relation "backups" does not exist'))console.log("Backups table does not exist, using temporary backup ID"),V={id:crypto.randomUUID()};else throw new Error("Failed to create backup record: "+ue.message);else V=ce}catch(ce){console.error("Exception creating backup record:",ce),V={id:crypto.randomUUID()},console.log("Using temporary backup ID due to error:",V.id)}if(!V||!V.id)throw new Error("Failed to create or generate backup ID");Ce.loading("Generating backup...",{id:"backup-toast"});let ee;try{const{data:ce,error:ue}=await De.rpc("simple_backup",{backup_id:V.id,filter_company_id:(t==null?void 0:t.id)||null});if(ue){console.error("Error generating backup using RPC:",ue);const oe=ue.message.toLowerCase();if(oe.includes("function")&&(oe.includes("does not exist")||oe.includes("could not find the function")||oe.includes("schema cache"))||oe.includes("simple_backup")||ue.code==="42883"){console.log("Backup function does not exist, falling back to direct queries");const le=["companies","customers","products","sales","sale_items","purchases","purchase_items","tax_rates","tax_settings"],pe={};for(const ye of le)try{let be=De.from(ye).select("*").limit(1e3);t&&["customers","products","sales","sale_items","purchases","purchase_items","tax_rates","tax_settings"].includes(ye)&&(be=be.eq("company_id",t.id));const{data:Ie,error:Oe}=await be;Oe?(console.warn(`Error fetching ${ye}:`,Oe),pe[ye]=[]):pe[ye]=Ie||[]}catch(be){console.warn(`Exception fetching ${ye}:`,be),pe[ye]=[]}ee={metadata:{version:"1.0",timestamp:new Date().toISOString(),backup_id:V.id,generated_by:"fallback_method",company_id:(t==null?void 0:t.id)||null,company_name:(t==null?void 0:t.name)||null,backup_type:t?"company_specific":"full_system"},...pe}}else throw new Error("Failed to generate backup: "+ue.message)}else ee=ce}catch(ce){throw console.error("Exception generating backup:",ce),new Error("Failed to generate backup: "+(ce instanceof Error?ce.message:String(ce)))}if(!ee)throw new Error("No backup data was generated");const B=typeof ee=="string"?ee:JSON.stringify(ee,null,2),F=new Blob([B],{type:"application/json"}),X=URL.createObjectURL(F),te=document.createElement("a");te.href=X;const se=t?`${t.name.toLowerCase().replace(/[^a-z0-9]/g,"-")}-backup-${qt(new Date,"yyyy-MM-dd-HH-mm")}.json`:`full-system-backup-${qt(new Date,"yyyy-MM-dd-HH-mm")}.json`;te.download=se,Ce.dismiss("backup-toast"),Ce.success("Database backup created successfully"),document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(X)}catch(L){console.error("Error creating backup:",L),Ce.dismiss("backup-toast"),Ce.error(L instanceof Error?L.message:"Failed to create database backup")}finally{u(!1)}},k=()=>{y.current&&y.current.click()},P=async L=>{var Y;const K=(Y=L.target.files)==null?void 0:Y[0];if(K)try{u(!0);const{handleBackupFileUpload:Z}=await yo(async()=>{const{handleBackupFileUpload:V}=await import("./restoreBackup-D5HV95cz.js");return{handleBackupFileUpload:V}},[]);await Z(K),T(!0)}catch(Z){console.error("Error restoring backup:",Z),Ce.error(Z instanceof Error?Z.message:"Failed to restore database backup")}finally{u(!1),y.current&&(y.current.value="")}},q=async()=>{var L,K;if(!(!s||a!=="admin"))try{const Y=(L=s.user_metadata)==null?void 0:L.first_login_completed,Z=(K=s.user_metadata)==null?void 0:K.company_setup_completed,{data:V,error:ee}=await De.from("company_users").select("company_id, companies(*)").eq("user_id",s.id).eq("role","admin");if(ee){console.error("Error checking admin companies:",ee);return}(!V||V.length===0||!Y||!Z)&&(x(!0),v(!0))}catch(Y){console.error("Error checking first-time admin status:",Y)}},H=async L=>{x(!1),v(!1),await e(),Ce.success(`Welcome to ${L.name}! Your company has been set up successfully.`)};return ie.useEffect(()=>{if(!i&&a!=="admin"&&a!=="owner"){Ce.error("This dashboard is only accessible to administrators"),o("/");return}!i&&a==="admin"&&q(),b||T()},[a,i,o,t,b]),d.jsxs(OU,{lastUpdate:p,onRefresh:R,isLoading:c,children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Super Admin Dashboard"}),a==="admin"&&d.jsx(lt,{variant:"primary",onClick:()=>o("/create-company"),children:"Create New Company"})]}),t&&d.jsx("div",{className:`${l?"bg-blue-900/20":"bg-blue-50"} border-l-4 border-blue-500 p-4 rounded mb-6`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(ec,{className:"h-5 w-5 text-blue-500"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:`font-medium ${l?"text-white":"text-gray-900"}`,children:"Welcome to your Super Admin Dashboard!"}),d.jsxs("p",{className:`text-sm mt-1 ${l?"text-gray-300":"text-gray-700"}`,children:["You're now managing ",d.jsx("strong",{children:t.name}),". From here you can manage all aspects of your business including users, companies, and system settings."]})]})]})}),f&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(jp,{className:"h-5 w-5 text-red-500"})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:f})})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:z.map((L,K)=>d.jsx("div",{className:`${l?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`p-3 rounded-full ${l?"bg-blue-500/20":"bg-blue-100"} mr-4`,children:d.jsx(L.icon,{className:"h-6 w-6 text-blue-500"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:L.title}),L.title==="Company"?d.jsx("p",{className:"text-2xl font-semibold text-green-600 dark:text-green-300",children:L.value}):d.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:L.value})]})]})},K))}),d.jsxs("div",{className:`${l?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:D.map((L,K)=>d.jsx(Oa,{to:L.path,className:`${L.color} p-4 rounded-lg text-white transition-transform hover:scale-105`,children:d.jsxs("div",{className:"flex flex-col items-center text-center",children:[d.jsx(L.icon,{className:"h-8 w-8 mb-2"}),d.jsx("span",{className:"font-medium text-white",children:L.title})]})},K))})]}),d.jsxs("div",{className:`${l?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Companies Management"}),d.jsx("p",{className:`mt-1 ${l?"text-gray-400":"text-gray-500"}`,children:"Manage all companies in the system"})]}),d.jsx(lt,{variant:"primary",onClick:()=>_(!0),leftIcon:d.jsx(ml,{className:"w-4 h-4"}),children:"Add Company"})]}),n.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(ec,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Companies Yet"}),d.jsx("p",{className:`${l?"text-gray-400":"text-gray-500"} max-w-md mx-auto`,children:"Get started by creating your first company to manage inventory, sales, and more."}),d.jsx(lt,{variant:"primary",className:"mt-6",onClick:()=>_(!0),leftIcon:d.jsx(ml,{className:"w-4 h-4"}),children:"Create Company"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(L=>d.jsxs("div",{className:`${l?"bg-gray-700":"bg-gray-50"} rounded-lg p-6 hover:shadow-md transition-shadow`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-semibold",children:L.name}),L.legal_name&&d.jsx("p",{className:`text-sm ${l?"text-gray-400":"text-gray-500"}`,children:L.legal_name})]}),d.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${C(L.subscription_status)}`,children:[N(L.subscription_status),d.jsx("span",{className:"capitalize",children:L.subscription_status})]})]}),d.jsxs("div",{className:"space-y-3",children:[L.tax_number&&d.jsxs("div",{className:"flex items-center text-sm",children:[d.jsx(n6,{className:"w-4 h-4 mr-2"}),d.jsxs("span",{children:["GST: ",L.tax_number]})]}),(L.address_street||L.address_city||L.address_state)&&d.jsxs("div",{className:"flex items-start text-sm",children:[d.jsx(gN,{className:"w-4 h-4 mr-2 mt-1"}),d.jsxs("div",{children:[L.address_street&&d.jsx("div",{children:L.address_street}),d.jsx("div",{children:[L.address_city,L.address_state,L.address_postal_code].filter(Boolean).join(", ")})]})]}),L.phone&&d.jsxs("div",{className:"flex items-center text-sm",children:[d.jsx(jx,{className:"w-4 h-4 mr-2"}),d.jsx("span",{children:L.phone})]}),L.email&&d.jsxs("div",{className:"flex items-center text-sm",children:[d.jsx(Ep,{className:"w-4 h-4 mr-2"}),d.jsx("span",{children:L.email})]}),L.notes&&d.jsxs("div",{className:"flex items-start text-sm",children:[d.jsx("div",{className:"w-4 h-4 mr-2 mt-1",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:`text-xs ${l?"text-gray-400":"text-gray-500"} mb-1`,children:"Admin Notes:"}),d.jsx("div",{className:"text-sm line-clamp-2",children:L.notes})]})]})]}),d.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[d.jsxs("div",{className:`text-sm ${l?"text-gray-400":"text-gray-500"}`,children:[d.jsx(wn,{className:"w-4 h-4 inline-block mr-1"}),L.role||"Admin"]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(Ih,{className:"w-4 h-4"}),onClick:()=>{A({id:L.id,name:L.name})},children:"Edit"}),d.jsx(lt,{variant:"danger",size:"sm",onClick:()=>M({id:L.id,name:L.name}),children:d.jsx(Xu,{className:"w-4 h-4"})})]})]})]},L.id))})]}),d.jsxs("div",{className:`${l?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[d.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"System Overview"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[d.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center text-gray-800 dark:text-gray-200",children:[d.jsx(Oc,{className:"w-5 h-5 mr-2 text-blue-500"}),"System Statistics"]}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"System Version:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"1.0.0"})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Database Status:"}),d.jsx("span",{className:"font-medium text-green-500",children:"Healthy"})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Last Backup:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:qt(new Date,"MMM d, yyyy")})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Storage Usage:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"42%"})]})]})]}),d.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[d.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center text-gray-800 dark:text-gray-200",children:[d.jsx(Vc,{className:"w-5 h-5 mr-2 text-blue-500"}),"Admin Tools"]}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsx("li",{children:d.jsxs("button",{onClick:E,disabled:c,className:"text-blue-500 hover:underline flex items-center w-full text-left",children:[d.jsx(Nx,{className:"w-4 h-4 mr-2"}),"Create Database Backup"]})}),d.jsxs("li",{children:[d.jsxs("button",{onClick:k,disabled:c,className:"text-blue-500 hover:underline flex items-center w-full text-left",children:[d.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Restore From Backup"]}),d.jsx("input",{type:"file",ref:y,onChange:P,accept:".json",className:"hidden"})]}),d.jsx("li",{children:d.jsxs(Oa,{to:"/users/permissions",className:"text-blue-500 hover:underline flex items-center",children:[d.jsx("span",{className:"mr-2",children:""}),"Manage User Permissions"]})}),d.jsx("li",{children:d.jsxs(Oa,{to:"/system/logs",className:"text-blue-500 hover:underline flex items-center",children:[d.jsx("span",{className:"mr-2",children:""}),"View System Logs"]})}),d.jsx("li",{children:d.jsxs(Oa,{to:"/settings/tax",className:"text-blue-500 hover:underline flex items-center",children:[d.jsx("span",{className:"mr-2",children:""}),"Configure Tax Settings"]})})]})]})]})]})]}),d.jsx(Jb,{isOpen:S,onClose:()=>_(!1),onSuccess:()=>{e()},title:"Create New Company"}),I&&d.jsx(IU,{isOpen:!0,onClose:()=>A(null),companyId:I.id,onCompanyUpdated:()=>{e()}}),O&&d.jsx(MU,{isOpen:!0,onClose:()=>M(null),companyId:O.id,companyName:O.name,onRemoved:e}),d.jsx(Cpe,{isOpen:m,onClose:()=>v(!1),onCompanyCreated:H})]})},RU=()=>{const r=pi(),[t,e]=ie.useState(""),[n,a]=ie.useState(""),[i,s]=ie.useState(""),[o,l]=ie.useState(!1),[c,u]=ie.useState(!1),[f,h]=ie.useState(!1),[p,g]=ie.useState(!1),y="admin",[m,v]=ie.useState({});ie.useEffect(()=>{a(""),s(""),v({})},[c]);const b=()=>{const S={};return t?/\S+@\S+\.\S+/.test(t)||(S.email="Email address is invalid"):S.email="Email is required",n?n.length<6&&(S.password="Password must be at least 6 characters"):S.password="Password is required",c&&(i?n!==i&&(S.confirmPassword="Passwords do not match"):S.confirmPassword="Please confirm your password"),v(S),Object.keys(S).length===0},x=async S=>{if(S.preventDefault(),!!b()){l(!0);try{if(c){const{data:_,error:I}=await fg.auth.signUp({email:t,password:n,options:{data:{display_name:t.split("@")[0],role:y}}});if(I)throw I;if(_.user){await new Promise(M=>setTimeout(M,200));const{data:A,error:O}=await fg.from("auth_users").select("id, display_name, email").eq("id",_.user.id).single();if(O){console.warn("Auth users trigger may have failed, creating record manually:",O);const M={id:_.user.id,display_name:t.split("@")[0],email:t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:z}=await fg.from("auth_users").insert({id:M.id,display_name:M.display_name,email:M.email,created_at:M.created_at,updated_at:M.updated_at});z&&z.code!=="23505"&&console.error("Error manually creating auth_users record:",z)}Ce.success("Account created successfully! Please check your email to confirm your account."),r("/create-company")}}else{const{data:_,error:I}=await fg.auth.signInWithPassword({email:t,password:n});if(I)throw I;_.user&&(sK(t),Ce.success("Successfully signed in!"),r("/role-selection"))}}catch(_){console.error(c?"Signup error:":"Login error:",_),Ce.error(_.message||"Authentication failed")}finally{l(!1)}}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800 py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg",children:[d.jsxs("div",{children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:"/logo.png",alt:"Tallybooks Logo",className:"w-16 h-16"})}),d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:c?"Create your account":"Sign in to your account"}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:[c?"Already have an account?":"Don't have an account?"," ",d.jsx("button",{onClick:()=>u(!c),className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:c?"Sign in":"Create one"})]})]}),d.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[d.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ep,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-t-md relative block w-full px-3 py-3 pl-10 border ${m.email?"border-red-500":"border-gray-300 dark:border-gray-600"} placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`,placeholder:"Email address",value:t,onChange:S=>e(S.target.value)})]}),m.email&&d.jsxs("div",{className:"flex items-center mt-1",children:[d.jsx(Wn,{className:"h-4 w-4 text-red-500 mr-1"}),d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:m.email})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(qv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:c?"new-password":"current-password",required:!0,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${m.password?"border-red-500":"border-gray-300 dark:border-gray-600"} placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm ${c?"":"rounded-b-md"}`,placeholder:c?"Create password":"Password",value:n,onChange:S=>a(S.target.value),minLength:6}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!f),children:f?d.jsx(Uv,{className:"h-5 w-5 text-gray-400"}):d.jsx(Ug,{className:"h-5 w-5 text-gray-400"})})]}),m.password&&d.jsxs("div",{className:"flex items-center mt-1",children:[d.jsx(Wn,{className:"h-4 w-4 text-red-500 mr-1"}),d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:m.password})]})]}),c&&d.jsx(d.Fragment,{children:d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(qv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"confirm-password",name:"confirm-password",type:p?"text":"password",required:!0,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${m.confirmPassword?"border-red-500":"border-gray-300 dark:border-gray-600"} placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-b-md`,placeholder:"Confirm password",value:i,onChange:S=>s(S.target.value),minLength:6}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!p),children:p?d.jsx(Uv,{className:"h-5 w-5 text-gray-400"}):d.jsx(Ug,{className:"h-5 w-5 text-gray-400"})})]}),m.confirmPassword&&d.jsxs("div",{className:"flex items-center mt-1",children:[d.jsx(Wn,{className:"h-4 w-4 text-red-500 mr-1"}),d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:m.confirmPassword})]})]})})]}),!c&&d.jsx("div",{className:"flex items-center justify-end",children:d.jsx("div",{className:"text-sm",children:d.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Forgot your password?"})})}),d.jsx("div",{className:"space-y-4",children:d.jsx(lt,{type:"submit",variant:"primary",className:"w-full",isLoading:o,children:c?"Create account":"Sign in"})})]})]})})},B0=({children:r,action:t,fallback:e})=>{const{hasPermission:n,userRole:a}=ts(),{theme:i}=zr(),s=i==="dark";let o=!1;return a==="manager"||a==="admin"||a==="owner"?o=!0:a==="cashier"||a==="salesperson"?o=t==="view":o=n("products",t),o?d.jsx(d.Fragment,{children:r}):e?d.jsx(d.Fragment,{children:e}):d.jsx("div",{className:`rounded-md p-4 ${s?"bg-red-900/20":"bg-red-50"}`,children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(Wn,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:`text-sm font-medium ${s?"text-red-300":"text-red-800"}`,children:"Access Restricted"}),d.jsx("div",{className:`mt-2 text-sm ${s?"text-red-200":"text-red-700"}`,children:d.jsx("p",{children:a==="cashier"||a==="salesperson"?`As a ${a}, you only have view access to products.`:"You do not have permission to perform this action."})})]})]})})},B8=({className:r="",label:t="Back",onClick:e,iconOnly:n=!1})=>{const a=pi(),i=vl(),{theme:s}=zr(),[o,l]=ie.useState(!1),c=window.innerWidth<768;ie.useEffect(()=>{l(window.history.state!==null)},[i]);const u=()=>{e?e():a(-1)};if(!o&&!e)return null;const f=n||c&&n!==!1;return d.jsxs("button",{onClick:u,className:`flex items-center ${f?"p-2":"px-3 py-2 md:py-1.5"} rounded-md text-sm font-medium
        ${s==="dark"?"bg-gray-700 text-white hover:bg-gray-600 active:bg-gray-800":"bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300"}
        transition-colors duration-200 android-ripple
        ${r}`,"aria-label":"Go back",children:[d.jsx(hN,{className:`h-5 w-5 ${f?"":"mr-1.5"}`}),!f&&t]})},Ope=({title:r,icon:t,rightContent:e,showBackButton:n=!0,className:a=""})=>d.jsxs("div",{className:`flex justify-between items-center mb-6 ${a}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[n&&d.jsx(B8,{}),t&&d.jsx("span",{className:"flex items-center",children:t}),d.jsx("h1",{className:"text-2xl font-bold",children:r})]}),e&&d.jsx("div",{children:e})]}),FU=Je.forwardRef(({children:r,label:t,className:e="",variant:n="primary",size:a="md",...i},s)=>{const o=r||t||"Add";return d.jsx(lt,{ref:s,variant:n,size:a,className:`group ${e}`,leftIcon:d.jsx(ml,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),"aria-label":`Add ${o.toString().toLowerCase()}`,...i,children:o})});FU.displayName="AddButton";const tf="product_images",Ipe=({isOpen:r,onClose:t,onUpdate:e,product:n})=>{const{theme:a}=zr(),i=a==="dark",[s,o]=ie.useState("basic"),[l,c]=ie.useState(!1),[u,f]=ie.useState([]),[h,p]=ie.useState(null),[g,y]=ie.useState({name:"",sku:"",price:0,purchasePrice:0,mrp:0,unit:"pcs",category:"electronics",hsnCode:"",taxRateId:"",taxInclusive:!1,imageUrl:"",artNo:"",color:"",size:""});ie.useEffect(()=>{m()},[]),ie.useEffect(()=>{n&&y({name:n.name,sku:n.sku,price:n.price,purchasePrice:n.purchasePrice,mrp:n.mrp,unit:n.unit,category:n.category,hsnCode:n.hsnCode||"",taxRateId:n.taxRateId||"",taxInclusive:n.taxInclusive||!1,imageUrl:n.imageUrl||"",artNo:n.artNo||"",color:n.color||"",size:n.size||""})},[n]);const m=async()=>{try{const A=await jN();if(A.length===0){const M=[{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"}].map(z=>({...z,hsn_code:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));f(M)}else f(A)}catch(A){console.error("Error loading tax rates:",A);const M=[{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"}].map(z=>({...z,hsn_code:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));f(M)}};if(!r)return null;const v=async()=>{if(g.sku===n.sku)return!0;try{const{data:A,error:O}=await De.from("products").select("id, sku").eq("sku",g.sku.trim()).neq("id",n.id);if(O)throw console.error("Error checking for duplicate SKU:",O),O;return A&&A.length>0?(Ce.error(`A product with SKU "${g.sku}" already exists. Please use a unique SKU.`),o("basic"),!1):!0}catch(A){return console.error("Error checking for duplicate SKU:",A),Ce.error("Error validating SKU. Please try again."),!1}},b=()=>g.name.trim()?g.sku.trim()?g.price<=0?(Ce.error("Valid selling price is required"),o("pricing"),!1):g.purchasePrice<=0?(Ce.error("Valid purchase price is required"),o("pricing"),!1):g.mrp<=0?(Ce.error("Valid MRP is required"),o("pricing"),!1):g.category?g.taxRateId?!0:(Ce.error("Tax rate is required"),o("tax"),!1):(Ce.error("Category is required"),o("basic"),!1):(Ce.error("SKU is required"),o("basic"),!1):(Ce.error("Product name is required"),o("basic"),!1),x=async A=>{if(A.preventDefault(),!!b()){c(!0);try{if(!await v()){c(!1);return}let M=g.imageUrl;if(h){const U=h.name.split(".").pop(),D=`${Gy()}.${U}`,T=`${n.id}/${D}`,{error:R}=await De.storage.from(tf).upload(T,h,{cacheControl:"3600",upsert:!0});if(R){console.error("Supabase upload error:",R),Ce.error(`Image upload failed: ${R.message}`),c(!1);return}const{data:C}=De.storage.from(tf).getPublicUrl(T);M=C.publicUrl}else if(g.imageUrl===""&&n.imageUrl){let U="";try{const D=new URL(n.imageUrl),T=`/storage/v1/object/public/${tf}/`;D.pathname.startsWith(T)&&(U=D.pathname.substring(T.length))}catch{const T=n.imageUrl.split("/");T.includes(tf)&&(U=T.slice(T.indexOf(tf)+1).join("/"))}if(U)try{const{error:D}=await De.storage.from(tf).remove([U]);if(D){console.error("Supabase delete error:",D),Ce.error(`Failed to delete old image: ${D.message}`),c(!1);return}}catch(D){console.error("Error deleting old image:",D),Ce.error("Failed to delete old image"),c(!1);return}}const z={...g,imageUrl:M};await e(z),Ce.success("Product updated successfully"),p(null),t()}catch(O){console.error("Error updating product:",O),Ce.error("Failed to update product")}finally{c(!1)}}},S=A=>{A.target.files&&A.target.files[0]?(p(A.target.files[0]),y(O=>({...O,imageUrl:URL.createObjectURL(A.target.files[0])}))):(p(null),y(O=>({...O,imageUrl:""})))},_=A=>{const{name:O,value:M,type:z}=A.target;y(U=>({...U,[O]:z==="checkbox"?A.target.checked:O==="price"||O==="purchasePrice"||O==="mrp"?Number(M):M}))},I=()=>{var A;switch(s){case"basic":return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name*"}),d.jsx("input",{type:"text",name:"name",value:g.name,onChange:_,required:!0,placeholder:"Enter product name",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU*"}),d.jsx("input",{type:"text",name:"sku",value:g.sku,onChange:_,required:!0,placeholder:"Unique identifier",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),g.sku!==n.sku&&d.jsx("p",{className:"mt-1 text-xs text-yellow-500",children:"Warning: Changing SKU will affect existing references"})]})}),(g.category==="garments"||g.category==="footwear"||g.category==="clothing")&&d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"ART No"}),d.jsx("input",{type:"text",name:"artNo",value:g.artNo||"",onChange:_,placeholder:"Article Number",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color"}),d.jsx("input",{type:"text",name:"color",value:g.color||"",onChange:_,placeholder:"Product Color",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Size"}),d.jsx("input",{type:"text",name:"size",value:g.size||"",onChange:_,placeholder:"Product Size",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),d.jsxs("select",{name:"category",value:g.category,onChange:_,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"Select Category"}),d.jsx("option",{value:"electronics",children:"Electronics"}),d.jsx("option",{value:"clothing",children:"Clothing"}),d.jsx("option",{value:"garments",children:"Garments"}),d.jsx("option",{value:"footwear",children:"Footwear"}),d.jsx("option",{value:"food",children:"Food"}),d.jsx("option",{value:"accessories",children:"Accessories"}),d.jsx("option",{value:"other",children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit*"}),d.jsxs("select",{name:"unit",value:g.unit,onChange:_,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"pcs",children:"Pieces"}),d.jsx("option",{value:"kg",children:"Kilograms"}),d.jsx("option",{value:"box",children:"Box"}),d.jsx("option",{value:"liters",children:"Liters"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Image"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:S,className:"hidden"}),d.jsxs("label",{htmlFor:"imageUpload",className:`flex items-center justify-center px-4 py-2 rounded-md border cursor-pointer ${i?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[d.jsx(fD,{className:"w-5 h-5 mr-2"}),h?h.name:"Upload Image"]}),d.jsx("input",{type:"url",name:"imageUrl",value:g.imageUrl||"",onChange:_,placeholder:"Or enter image URL",className:`flex-1 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Upload an image or provide a direct URL. Uploaded images will override URL."}),g.imageUrl&&d.jsx("div",{className:`mt-4 p-4 rounded-md border ${i?"border-gray-700":"border-gray-200"} flex justify-center`,children:d.jsx("img",{src:g.imageUrl,alt:"Product Preview",className:"h-32 object-contain",onError:O=>{O.target.src="https://via.placeholder.com/150?text=Image+Error"}})})]}),g.imageUrl&&d.jsx("div",{className:`p-4 rounded-md border ${i?"border-gray-700":"border-gray-200"} flex justify-center`,children:d.jsx("img",{src:g.imageUrl,alt:g.name,className:"h-32 object-contain",onError:O=>{O.target.src="https://via.placeholder.com/150?text=Image+Error"}})})]});case"pricing":return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:`p-3 rounded-md ${i?"bg-blue-900/20":"bg-blue-50"} mb-4`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(kp,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsx("p",{className:`text-sm ${i?"text-blue-300":"text-blue-700"}`,children:"Update your pricing strategy. MRP is the maximum retail price, purchase price is your cost, and selling price is what customers pay."})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purchase Price ()*"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ti,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"number",name:"purchasePrice",value:g.purchasePrice,onChange:_,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-10 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Your cost price for this product"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Selling Price ()*"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ti,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"number",name:"price",value:g.price,onChange:_,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-10 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Price at which you'll sell this product"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"MRP ()*"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ti,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"number",name:"mrp",value:g.mrp,onChange:_,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-10 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Maximum Retail Price printed on the product"})]}),g.price>0&&g.purchasePrice>0&&d.jsx("div",{className:`p-3 rounded-md ${i?"bg-green-900/20":"bg-green-50"} mt-4`,children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:`text-sm font-medium ${i?"text-green-300":"text-green-700"}`,children:"Profit Margin:"}),d.jsx("span",{className:`text-sm font-bold ${i?"text-green-300":"text-green-700"}`,children:(()=>{const O=g.price,M=g.purchasePrice;return O>0&&M>0?`${((O-M)/O*100).toFixed(2)}%`:"0.00%"})()})]})}),g.price>g.mrp&&d.jsx("div",{className:`p-3 rounded-md ${i?"bg-red-900/20":"bg-red-50"} mt-4`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(Wn,{className:"w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsx("p",{className:`text-sm ${i?"text-red-300":"text-red-700"}`,children:"Warning: Selling price is higher than MRP. This may not be legally compliant."})]})})]});case"tax":return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:`p-3 rounded-md ${i?"bg-blue-900/20":"bg-blue-50"} mb-4`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(kp,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsx("p",{className:`text-sm ${i?"text-blue-300":"text-blue-700"}`,children:"Configure GST settings for this product. These details will appear on invoices and tax reports."})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"HSN Code"}),d.jsx("input",{type:"text",name:"hsnCode",value:g.hsnCode||"",onChange:_,placeholder:"e.g., 8471",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Harmonized System Nomenclature code for the product"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tax Rate*"}),d.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"},{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"}].map(M=>d.jsxs("button",{type:"button",onClick:()=>y(z=>({...z,taxRateId:M.id})),className:`flex flex-col items-center justify-center p-2 rounded-md border ${g.taxRateId===M.id?i?"bg-blue-600 border-blue-500 text-white":"bg-blue-100 border-blue-300 text-blue-800":i?"bg-gray-700 border-gray-600 hover:bg-gray-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[d.jsx(Xi,{className:"w-4 h-4 mb-1"}),d.jsxs("span",{className:"text-sm font-medium",children:[M.rate,"%"]})]},M.id))}),d.jsxs("select",{name:"taxRateId",value:g.taxRateId||"",onChange:_,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"Select Tax Rate"}),u.map(O=>d.jsxs("option",{value:O.id,children:[O.description," (",O.rate,"%)"]},O.id))]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",name:"taxInclusive",checked:g.taxInclusive||!1,onChange:_,className:"rounded border-gray-300"}),d.jsx("span",{className:"text-sm",children:"Tax Inclusive Pricing"})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"When enabled, the selling price includes GST"})]}),((A=u.find(O=>O.id===g.taxRateId))==null?void 0:A.rate)===28&&d.jsx("div",{className:`p-3 rounded-md ${i?"bg-yellow-900/20":"bg-yellow-50"} border border-yellow-200`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(Wn,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"CESS Applicable"}),d.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:"Additional 15% CESS will be applied as this product falls under 28% GST category"})]})]})})]});default:return null}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-2xl transform rounded-lg ${i?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Hn,{className:`w-6 h-6 mr-2 ${i?"text-blue-400":"text-blue-600"}`}),d.jsx("h2",{className:"text-xl font-semibold",children:"Update Product"})]}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsx("div",{className:`mb-6 p-3 rounded-md ${i?"bg-gray-700":"bg-gray-100"}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:n.name}),d.jsx("div",{className:"flex items-center text-sm mt-1",children:d.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs ${i?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-700"}`,children:["SKU: ",n.sku]})})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:`text-sm ${i?"text-gray-300":"text-gray-600"}`,children:["Current Price: ",n.price.toFixed(2)]}),d.jsxs("div",{className:`text-xs ${i?"text-gray-400":"text-gray-500"}`,children:["MRP: ",n.mrp.toFixed(2)]})]})]})}),d.jsxs("div",{className:"flex border-b mb-6",children:[d.jsx("button",{onClick:()=>o("basic"),className:`px-4 py-2 font-medium text-sm ${s==="basic"?i?"border-b-2 border-blue-500 text-blue-400":"border-b-2 border-blue-600 text-blue-600":i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(yN,{className:"w-4 h-4 mr-2"}),"Basic Info"]})}),d.jsx("button",{onClick:()=>o("pricing"),className:`px-4 py-2 font-medium text-sm ${s==="pricing"?i?"border-b-2 border-blue-500 text-blue-400":"border-b-2 border-blue-600 text-blue-600":i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Pricing"]})}),d.jsx("button",{onClick:()=>o("tax"),className:`px-4 py-2 font-medium text-sm ${s==="tax"?i?"border-b-2 border-blue-500 text-blue-400":"border-b-2 border-blue-600 text-blue-600":i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-2"}),"Tax Settings"]})})]}),d.jsxs("form",{onSubmit:x,children:[I(),d.jsxs("div",{className:"flex justify-between mt-8 pt-4 border-t",children:[d.jsx("div",{children:s!=="basic"&&d.jsx(lt,{variant:"secondary",type:"button",onClick:()=>o(s==="pricing"?"basic":"pricing"),children:"Previous"})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(lt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),s!=="tax"?d.jsx(lt,{variant:"primary",type:"button",onClick:()=>o(s==="basic"?"pricing":"tax"),children:"Next"}):d.jsx(lt,{variant:"primary",type:"submit",isLoading:l,leftIcon:d.jsx(kx,{className:"w-4 h-4"}),children:"Update Product"})]})]})]})]})]})})},Mpe=({isOpen:r,onClose:t,onAdd:e,companyId:n})=>{const{theme:a}=zr(),i=a==="dark",[s,o]=ie.useState("basic"),[l,c]=ie.useState([]),[u]=ie.useState(null),[f,h]=ie.useState(!0),[p,g]=ie.useState(!1),[y,m]=ie.useState(null),[v,b]=ie.useState(!0),[x,S]=ie.useState(null),[_,I]=ie.useState({name:"",sku:"",barcode:"",price:"",purchase_price:"",mrp:"",unit:"pcs",stock:"",category:"",image_url:"",hsn_code:"",tax_rate_id:"",tax_type:"exclusive",tax_inclusive:!1,companyId:n,art_no:"",color:"",size:""});ie.useEffect(()=>{r&&(A(),(async()=>{try{const{data:R}=await De.from("company_settings").select("enable_barcode").eq("company_id",n).single();R&&typeof R.enable_barcode=="boolean"?b(R.enable_barcode):b(!0)}catch{}try{const{data:R}=await De.from("companies").select("business_type").eq("id",n).single();S((R==null?void 0:R.business_type)??null)}catch{}})())},[r]);const A=async()=>{h(!0);try{const{data:R,error:C}=await De.from("tax_rates").select("*").order("rate",{ascending:!0});if(C)throw C;c(R||[]);const N=(R==null?void 0:R.find(E=>E.rate===18))||(R==null?void 0:R[0]);N&&I(E=>({...E,tax_rate_id:N.id}))}catch(R){console.error("Error loading tax configuration:",R),Ce.error("Failed to load tax rates")}finally{h(!1)}};if(!r)return null;const O=async R=>{if(R.preventDefault(),!n){Ce.error("No company selected. Please select a company first.");return}const{data:{session:C}}=await De.auth.getSession();if(!C){Ce.error("You must be logged in to add a product");return}g(!0);try{if(!await D()){g(!1);return}let E=_.image_url;if(y){const P=y.name.split(".").pop(),q=`${Gy()}.${P}`,H=`${n}/${q}`,{error:L}=await De.storage.from(tf).upload(H,y,{cacheControl:"3600",upsert:!1});if(L){console.error("Supabase upload error:",L),L.message.includes("Bucket not found")?Ce.error('Image upload failed: Product images bucket not found. Please ensure the "product_images" bucket exists in Supabase Storage and has appropriate RLS policies.'):Ce.error(`Image upload failed: ${L.message}`),g(!1);return}const{data:K}=De.storage.from(tf).getPublicUrl(H);E=K.publicUrl}const k={name:_.name,sku:_.sku,barcode:_.barcode,category:_.category,unit:_.unit,price:parseFloat(_.price),purchasePrice:parseFloat(_.purchase_price),mrp:parseFloat(_.mrp),stock:parseInt(_.stock),companyId:n,artNo:_.art_no,color:_.color,size:_.size,hsnCode:_.hsn_code,taxRateId:_.tax_rate_id,taxType:_.tax_type,taxInclusive:_.tax_inclusive,imageUrl:E};await e(k),Ce.success("Product added successfully!"),t()}catch(N){console.error("Error adding product:",N),N instanceof Error&&N.message.includes("duplicate key value violates unique constraint")?Ce.error(`A product with SKU "${_.sku}" already exists. Please use a unique SKU.`):Ce.error("Failed to add product")}finally{g(!1)}},M=R=>{R.target.files&&R.target.files[0]?(m(R.target.files[0]),I(C=>({...C,image_url:URL.createObjectURL(R.target.files[0])}))):(m(null),I(C=>({...C,image_url:""})))},z=R=>{const{name:C,value:N,type:E}=R.target;I(k=>({...k,[C]:E==="checkbox"?R.target.checked:N}))},U=l.find(R=>R.id===_.tax_rate_id),D=async()=>{if(!_.name.trim())return Ce.error("Product name is required"),o("basic"),!1;if(!_.sku.trim())return Ce.error("SKU is required"),o("basic"),!1;try{const{data:R,error:C}=await De.from("products").select("id, sku").eq("sku",_.sku.trim()).eq("company_id",n);if(C)throw console.error("Error checking for duplicate SKU:",C),C;if(R&&R.length>0)return Ce.error(`A product with SKU "${_.sku}" already exists. Please use a unique SKU.`),o("basic"),!1}catch(R){return console.error("Error checking for duplicate SKU:",R),Ce.error("Error validating SKU. Please try again."),!1}return!_.price||parseFloat(_.price)<=0?(Ce.error("Valid selling price is required"),o("pricing"),!1):!_.purchase_price||parseFloat(_.purchase_price)<=0?(Ce.error("Valid purchase price is required"),o("pricing"),!1):!_.mrp||parseFloat(_.mrp)<=0?(Ce.error("Valid MRP is required"),o("pricing"),!1):!_.stock||parseInt(_.stock)<0?(Ce.error("Valid stock quantity is required"),o("basic"),!1):_.unit?_.category?_.tax_rate_id?_.tax_type?!0:(Ce.error("Tax type is required"),o("tax"),!1):(Ce.error("Tax rate is required"),o("tax"),!1):(Ce.error("Category is required"),o("basic"),!1):(Ce.error("Unit is required"),o("basic"),!1)},T=()=>{switch(s){case"basic":return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name*"}),d.jsx("input",{type:"text",name:"name",value:_.name,onChange:z,required:!0,placeholder:"Enter product name",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU*"}),d.jsx("input",{type:"text",name:"sku",value:_.sku,onChange:z,required:!0,placeholder:"Unique identifier",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),v&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Barcode"}),d.jsx("input",{type:"text",name:"barcode",value:_.barcode,onChange:z,placeholder:"Optional",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),(_.category==="garments"||_.category==="footwear"||_.category==="clothing")&&!(x==="Food"||x==="Bakery"||x==="Kirana"||x==="Confectionery")&&d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"ART No"}),d.jsx("input",{type:"text",name:"art_no",value:_.art_no,onChange:z,placeholder:"Article Number",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color"}),d.jsx("input",{type:"text",name:"color",value:_.color,onChange:z,placeholder:"Product Color",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Size"}),d.jsx("input",{type:"text",name:"size",value:_.size,onChange:z,placeholder:"Product Size",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),d.jsxs("select",{name:"category",value:_.category,onChange:z,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"Select Category"}),d.jsx("option",{value:"electronics",children:"Electronics"}),d.jsx("option",{value:"clothing",children:"Clothing"}),d.jsx("option",{value:"garments",children:"Garments"}),d.jsx("option",{value:"footwear",children:"Footwear"}),d.jsx("option",{value:"food",children:"Food"}),d.jsx("option",{value:"accessories",children:"Accessories"}),d.jsx("option",{value:"other",children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit*"}),d.jsxs("select",{name:"unit",value:_.unit,onChange:z,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"pcs",children:"Pieces"}),d.jsx("option",{value:"kg",children:"Kilograms"}),d.jsx("option",{value:"box",children:"Box"}),d.jsx("option",{value:"liters",children:"Liters"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Initial Stock*"}),d.jsx("input",{type:"number",name:"stock",value:_.stock,onChange:z,required:!0,min:"0",placeholder:"0",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Image"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:M,className:"hidden"}),d.jsxs("label",{htmlFor:"imageUpload",className:`flex items-center justify-center px-4 py-2 rounded-md border cursor-pointer ${i?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[d.jsx(fD,{className:"w-5 h-5 mr-2"}),y?y.name:"Upload Image"]}),d.jsx("input",{type:"url",name:"image_url",value:_.image_url,onChange:z,placeholder:"Or enter image URL",className:`flex-1 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Upload an image or provide a direct URL. Uploaded images will override URL."}),_.image_url&&d.jsx("div",{className:`mt-4 p-4 rounded-md border ${i?"border-gray-700":"border-gray-200"} flex justify-center`,children:d.jsx("img",{src:_.image_url,alt:"Product Preview",className:"h-32 object-contain",onError:R=>{R.target.src="https://via.placeholder.com/150?text=Image+Error"}})})]})]});case"pricing":return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:`p-3 rounded-md ${i?"bg-blue-900/20":"bg-blue-50"} mb-4`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(kp,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsx("p",{className:`text-sm ${i?"text-blue-300":"text-blue-700"}`,children:"Set your pricing strategy. MRP is the maximum retail price, purchase price is your cost, and selling price is what customers pay."})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purchase Price ()*"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ti,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"number",name:"purchase_price",value:_.purchase_price,onChange:z,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-10 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Your cost price for this product"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Selling Price ()*"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ti,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"number",name:"price",value:_.price,onChange:z,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-10 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Price at which you'll sell this product"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"MRP ()*"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ti,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"number",name:"mrp",value:_.mrp,onChange:z,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-10 p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Maximum Retail Price printed on the product"})]}),parseFloat(_.price)>0&&parseFloat(_.purchase_price)>0&&d.jsx("div",{className:`p-3 rounded-md ${i?"bg-green-900/20":"bg-green-50"} mt-4`,children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:`text-sm font-medium ${i?"text-green-300":"text-green-700"}`,children:"Profit Margin:"}),d.jsx("span",{className:`text-sm font-bold ${i?"text-green-300":"text-green-700"}`,children:(()=>{const R=parseFloat(_.price),C=parseFloat(_.purchase_price);return R>0&&C>0?`${((R-C)/R*100).toFixed(2)}%`:"0.00%"})()})]})})]});case"tax":return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:`p-3 rounded-md ${i?"bg-blue-900/20":"bg-blue-50"} mb-4`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(kp,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsx("p",{className:`text-sm ${i?"text-blue-300":"text-blue-700"}`,children:"Configure GST settings for this product. These details will appear on invoices and tax reports."})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"HSN Code"}),d.jsx("input",{type:"text",name:"hsn_code",value:_.hsn_code,onChange:z,placeholder:"e.g., 8471",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Harmonized System Nomenclature code for the product"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tax Rate*"}),f?d.jsx("div",{className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:"Loading tax rates..."}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"},{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"}].map(C=>d.jsxs("button",{type:"button",onClick:()=>I(N=>({...N,tax_rate_id:C.id})),className:`flex flex-col items-center justify-center p-2 rounded-md border ${_.tax_rate_id===C.id?i?"bg-blue-600 border-blue-500 text-white":"bg-blue-100 border-blue-300 text-blue-800":i?"bg-gray-700 border-gray-600 hover:bg-gray-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[d.jsx(Xi,{className:"w-4 h-4 mb-1"}),d.jsxs("span",{className:"text-sm font-medium",children:[C.rate,"%"]})]},C.id))}),d.jsxs("select",{name:"tax_rate_id",value:_.tax_rate_id,onChange:z,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"Select Tax Rate"}),(()=>{const R=[{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"}];return[...l,...R.filter(N=>!l.some(E=>E.id===N.id))].map(N=>d.jsxs("option",{value:N.id,children:[N.description," (",N.rate,"%)"]},N.id))})()]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tax Type*"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[d.jsx("button",{type:"button",onClick:()=>I(R=>({...R,tax_type:"exclusive"})),className:`flex items-center justify-center p-2 rounded-md border ${_.tax_type==="exclusive"?i?"bg-blue-600 border-blue-500 text-white":"bg-blue-100 border-blue-300 text-blue-800":i?"bg-gray-700 border-gray-600 hover:bg-gray-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:d.jsx("span",{className:"text-sm font-medium",children:"Exclusive"})}),d.jsx("button",{type:"button",onClick:()=>I(R=>({...R,tax_type:"inclusive"})),className:`flex items-center justify-center p-2 rounded-md border ${_.tax_type==="inclusive"?i?"bg-blue-600 border-blue-500 text-white":"bg-blue-100 border-blue-300 text-blue-800":i?"bg-gray-700 border-gray-600 hover:bg-gray-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:d.jsx("span",{className:"text-sm font-medium",children:"Inclusive"})})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:_.tax_type==="exclusive"?"Tax will be added on top of the selling price":"Selling price already includes tax"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",name:"tax_inclusive",checked:_.tax_inclusive,onChange:z,className:"rounded border-gray-300"}),d.jsx("span",{className:"text-sm",children:"Tax Inclusive Pricing"})]}),d.jsx("p",{className:`mt-1 text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"When enabled, the selling price includes GST"})]}),(U==null?void 0:U.rate)===28&&(u==null?void 0:u.cess_enabled)&&d.jsx("div",{className:`p-3 rounded-md ${i?"bg-yellow-900/20":"bg-yellow-50"} border border-yellow-200`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(Wn,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"CESS Applicable"}),d.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:"Additional 15% CESS will be applied as this product falls under 28% GST category"})]})]})})]});default:return null}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-2xl transform rounded-lg ${i?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Hn,{className:`w-6 h-6 mr-2 ${i?"text-blue-400":"text-blue-600"}`}),d.jsx("h2",{className:"text-xl font-semibold",children:"Add New Product"})]}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex border-b mb-6",children:[d.jsx("button",{onClick:()=>o("basic"),className:`px-4 py-2 font-medium text-sm ${s==="basic"?i?"border-b-2 border-blue-500 text-blue-400":"border-b-2 border-blue-600 text-blue-600":i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(yN,{className:"w-4 h-4 mr-2"}),"Basic Info"]})}),d.jsx("button",{onClick:()=>o("pricing"),className:`px-4 py-2 font-medium text-sm ${s==="pricing"?i?"border-b-2 border-blue-500 text-blue-400":"border-b-2 border-blue-600 text-blue-600":i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Pricing"]})}),d.jsx("button",{onClick:()=>o("tax"),className:`px-4 py-2 font-medium text-sm ${s==="tax"?i?"border-b-2 border-blue-500 text-blue-400":"border-b-2 border-blue-600 text-blue-600":i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-2"}),"Tax Settings"]})})]}),d.jsxs("form",{onSubmit:O,children:[T(),d.jsxs("div",{className:"flex justify-between mt-8 pt-4 border-t",children:[d.jsx("div",{children:s!=="basic"&&d.jsx(lt,{variant:"secondary",type:"button",onClick:()=>o(s==="pricing"?"basic":"pricing"),children:"Previous"})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(lt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),s!=="tax"?d.jsx(lt,{variant:"primary",type:"button",onClick:()=>o(s==="basic"?"pricing":"tax"),children:"Next"}):d.jsx(lt,{variant:"primary",type:"submit",isLoading:p,children:"Add Product"})]})]})]})]})]})})};async function Rpe(r){try{let{data:t,error:e}=await De.from("barcode_settings").select("*").eq("company_id",r).single();if(e)return console.error("Error fetching barcode settings:",e),null;if(!t){const a={company_id:r,default_paper_type:"a4",default_barcode_width:1.5,default_barcode_height:20,default_font_size_company:10,default_font_size_product:8,default_font_size_price:9,default_show_mrp:!0,default_show_company_name:!0,default_show_art_no:!1,default_show_color:!1,default_show_size:!1,default_barcode_format:"CODE128"},{data:i,error:s}=await De.from("barcode_settings").insert(a).select().single();if(s)return console.error("Error creating default barcode settings:",s),null;t=i}return{paperType:t.default_paper_type,width:t.default_paper_type==="roll"?100.25:210,height:t.default_paper_type==="roll"?25.25:297,fontSize:{company:t.default_font_size_company,product:t.default_font_size_product,price:t.default_font_size_price},barcodeWidth:t.default_barcode_width,barcodeHeight:t.default_barcode_height,copies:1,showMRP:t.default_show_mrp,showCompanyName:t.default_show_company_name,showArtNo:t.default_show_art_no,showColor:t.default_show_color,showSize:t.default_show_size,columns:5,rows:12}}catch(t){return console.error("Error in getCompanyBarcodeSettings:",t),null}}async function Fpe(r,t,e){try{const{data:{user:n}}=await De.auth.getUser(),a={company_id:r,product_id:t,user_id:n==null?void 0:n.id,copies:e.copies,paper_type:e.paperType,barcode_width:e.barcodeWidth,barcode_height:e.barcodeHeight,font_size_company:e.fontSize.company,font_size_product:e.fontSize.product,font_size_price:e.fontSize.price,show_mrp:e.showMRP,show_company_name:e.showCompanyName,show_art_no:e.showArtNo,show_color:e.showColor,show_size:e.showSize},{error:i}=await De.from("barcode_prints").insert(a);return i?(console.error("Error saving barcode print history:",i),!1):!0}catch(n){return console.error("Error in saveBarcodeHistory:",n),!1}}async function Dpe(r,t){try{const e={company_id:r,default_paper_type:t.paperType,default_barcode_width:t.barcodeWidth,default_barcode_height:t.barcodeHeight,default_font_size_company:t.fontSize.company,default_font_size_product:t.fontSize.product,default_font_size_price:t.fontSize.price,default_show_mrp:t.showMRP,default_show_company_name:t.showCompanyName,default_show_art_no:t.showArtNo,default_show_color:t.showColor,default_show_size:t.showSize},{data:n}=await De.from("barcode_settings").select("id").eq("company_id",r).single();let a;if(n){const{error:i}=await De.from("barcode_settings").update(e).eq("company_id",r);a=i}else{const{error:i}=await De.from("barcode_settings").insert(e);a=i}return a?(console.error("Error saving barcode settings:",a),Ce.error("Failed to save barcode settings"),!1):(Ce.success("Barcode settings saved successfully"),!0)}catch(e){return console.error("Error in saveCompanyBarcodeSettings:",e),Ce.error("Failed to save barcode settings"),!1}}async function Lpe(r){try{const{data:t,error:e}=await De.from("products").select("id, barcode, sku").eq("id",r).single();if(e)return console.error("Error fetching product:",e),null;if(t.barcode)return t.barcode;const n=`P${t.sku.replace(/[^a-zA-Z0-9]/g,"")}`,{error:a}=await De.from("products").update({barcode:n}).eq("id",r);return a?(console.error("Error updating product barcode:",a),null):n}catch(t){return console.error("Error in generateProductBarcode:",t),null}}const gg=100.25,yg=25.25,gS=210,yS=297,Bpe=5,$pe=12,og=10,Upe={paperType:"a4",width:gg,height:yg,fontSize:{company:10,product:8,price:9},barcodeWidth:1.5,barcodeHeight:20,copies:1,showMRP:!0,showCompanyName:!0,showArtNo:!1,showColor:!1,showSize:!1,columns:Bpe,rows:$pe},qpe=({isOpen:r,onClose:t,product:e,companyName:n="Your Company Name"})=>{const{theme:a}=zr(),i=a==="dark",[s,o]=ie.useState(Upe),[l,c]=ie.useState(!1),[u,f]=ie.useState(!1),h=Cj(),{selectedCompany:p,operableCompanies:g}=h||{selectedCompany:null,operableCompanies:[]},y=p||(g&&g.length>0?g[0]:null),[m,v]=ie.useState(e.barcode||e.sku);ie.useEffect(()=>{r&&(y!=null&&y.id)&&(b(),x())},[r,y==null?void 0:y.id]);const b=async()=>{if(y!=null&&y.id){c(!0);try{const I=await Rpe(y.id);I&&o(I)}catch(I){console.error("Error loading company barcode settings:",I)}finally{c(!1)}}},x=async()=>{if(e.barcode){v(e.barcode);return}try{const I=await Lpe(e.id);I?(v(I),Ce.success("Generated barcode for product")):v(e.sku)}catch(I){console.error("Error generating barcode:",I),v(e.sku)}},S=async()=>{if(!(y!=null&&y.id)){Ce.error("Company information not available");return}f(!0);try{await Dpe(y.id,s)&&Ce.success("Settings saved as company defaults")}catch(I){console.error("Error saving settings:",I),Ce.error("Failed to save settings")}finally{f(!1)}};if(!r)return null;const _=async()=>{const I=window.open("","_blank");if(!I){Ce.error("Please allow popups to print barcodes");return}const A=s.paperType==="a4"?s.columns*s.rows:2,O=Math.ceil(s.copies/A);if(I.document.write(`
      <html>
        <head>
          <title>Print Barcode - ${e.name}</title>
          <style>
            @page {
              size: ${s.paperType==="a4"?"A4":`${gg}mm ${yg}mm`};
              margin: ${s.paperType==="a4"?`${og}mm`:"0mm"};
            }
            @font-face {
              font-family: 'Arial Bold';
              src: local('Arial Bold'), local('Arial-BoldMT');
              font-weight: bold;
            }
            body {
              margin: 0;
              padding: 0;
              font-family: Arial, sans-serif;
            }
            .page {
              ${s.paperType==="a4"?`
                width: ${gS-og*2}mm;
                min-height: ${yS-og*2}mm;
                display: grid;
                grid-template-columns: repeat(${s.columns}, 1fr);
                grid-template-rows: repeat(${s.rows}, 1fr);
              `:`
                width: ${gg}mm;
                height: ${yg}mm;
                display: flex;
                justify-content: space-between;
              `}
              gap: 0;
              page-break-after: always;
            }
            .label {
              width: ${s.paperType==="a4"?(gS-og*2)/s.columns:gg/2}mm;
              height: ${s.paperType==="a4"?(yS-og*2)/s.rows:yg}mm;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              box-sizing: border-box;
              padding: 1mm;
              ${s.paperType==="a4"?"border: 0.1mm dashed #ccc;":""}
            }
            .company-name {
              font-family: 'Arial Bold', Arial, sans-serif;
              font-weight: bold;
              font-size: ${s.fontSize.company}px;
              color: #000;
              margin: 0.25mm 0;
              text-align: center;
              text-transform: uppercase;
              letter-spacing: 0.2mm;
              line-height: 1;
            }
            .product-name {
              font-size: ${s.fontSize.product}px;
              margin: 0.25mm 0;
              text-align: center;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              max-width: 95%;
              line-height: 1.1;
            }
            .mrp {
              font-size: ${s.fontSize.price}px;
              font-weight: bold;
              margin: 0.25mm 0;
              line-height: 1;
            }
            .product-detail {
              font-size: ${s.fontSize.product-1}px;
              margin: 0.25mm 0;
              text-align: center;
              line-height: 1;
            }
            .barcode-container {
              margin: 0.5mm 0;
              display: flex;
              justify-content: center;
              align-items: center;
            }
            .barcode-container svg {
              max-width: 90%;
              height: auto;
            }
            @media print {
              .page {
                page-break-after: always;
              }
              .label {
                break-inside: avoid;
                page-break-inside: avoid;
              }
            }
          </style>
        </head>
        <body>
          ${Array(O).fill(0).map(()=>`
            <div class="page">
              ${Array(Math.min(s.copies,A)).fill(0).map(()=>`
                <div class="label">
                  ${s.showCompanyName?`
                    <div class="company-name">${n}</div>
                  `:""}
                  <div class="product-name">${e.name}</div>
                  ${s.showArtNo&&(e.artNo||e.art_no)?`
                    <div class="product-detail">Art No: ${e.artNo||e.art_no}</div>
                  `:""}
                  ${s.showColor&&e.color?`
                    <div class="product-detail">Color: ${e.color}</div>
                  `:""}
                  ${s.showSize&&e.size?`
                    <div class="product-detail">Size: ${e.size}</div>
                  `:""}
                  <div class="barcode-container">
                    <svg class="barcode"></svg>
                  </div>
                  ${s.showMRP?`
                    <div class="mrp">MRP: ${e.mrp.toFixed(2)}</div>
                  `:""}
                </div>
              `).join("")}
            </div>
          `).join("")}
          <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
          <script>
            document.querySelectorAll('.barcode').forEach(element => {
              JsBarcode(element, "${m}", {
                width: ${s.barcodeWidth},
                height: ${s.barcodeHeight},
                fontSize: ${s.fontSize.product},
                margin: 1,
                background: "white"
              });
            });
            window.onload = () => {
              window.print();
              window.close();
            };
          <\/script>
        </body>
      </html>
    `),I.document.close(),y!=null&&y.id)try{await Fpe(y.id,e.id,s)}catch(M){console.error("Error saving barcode history:",M)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-md transform rounded-lg ${i?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Print Barcode Labels"}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,"aria-label":"Close modal",children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Paper Type"}),d.jsxs("select",{value:s.paperType,onChange:I=>o(A=>({...A,paperType:I.target.value,width:I.target.value==="roll"?gg:gS,height:I.target.value==="roll"?yg:yS})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"a4",children:"A4 Sheet (512 Labels)"}),d.jsx("option",{value:"roll",children:"Roll Paper (100.2525.25mm)"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Number of Labels"}),d.jsx("input",{type:"number",min:"1",max:s.paperType==="a4"?300:100,value:s.copies,onChange:I=>o(A=>({...A,copies:parseInt(I.target.value)})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),s.paperType==="a4"&&d.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[Math.ceil(s.copies/(s.columns*s.rows))," page(s) needed (",s.columns*s.rows," labels per page)"]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Barcode Width"}),d.jsx("input",{type:"number",min:"1",max:"2",step:"0.1",value:s.barcodeWidth,onChange:I=>o(A=>({...A,barcodeWidth:parseFloat(I.target.value)})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Barcode Height"}),d.jsx("input",{type:"number",min:"15",max:"25",value:s.barcodeHeight,onChange:I=>o(A=>({...A,barcodeHeight:parseInt(I.target.value)})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Font"}),d.jsx("input",{type:"number",min:"8",max:"12",value:s.fontSize.company,onChange:I=>o(A=>({...A,fontSize:{...A.fontSize,company:parseInt(I.target.value)}})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Font"}),d.jsx("input",{type:"number",min:"6",max:"10",value:s.fontSize.product,onChange:I=>o(A=>({...A,fontSize:{...A.fontSize,product:parseInt(I.target.value)}})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price Font"}),d.jsx("input",{type:"number",min:"7",max:"11",value:s.fontSize.price,onChange:I=>o(A=>({...A,fontSize:{...A.fontSize,price:parseInt(I.target.value)}})),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"showCompanyName",checked:s.showCompanyName,onChange:I=>o(A=>({...A,showCompanyName:I.target.checked})),className:"rounded border-gray-300"}),d.jsx("label",{htmlFor:"showCompanyName",className:"ml-2 text-sm",children:"Show Company Name"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"showMRP",checked:s.showMRP,onChange:I=>o(A=>({...A,showMRP:I.target.checked})),className:"rounded border-gray-300"}),d.jsx("label",{htmlFor:"showMRP",className:"ml-2 text-sm",children:"Show MRP"})]}),(e.artNo||e.art_no)&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"showArtNo",checked:s.showArtNo,onChange:I=>o(A=>({...A,showArtNo:I.target.checked})),className:"rounded border-gray-300"}),d.jsxs("label",{htmlFor:"showArtNo",className:"ml-2 text-sm",children:["Show Art No (",e.artNo||e.art_no,")"]})]}),e.color&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"showColor",checked:s.showColor,onChange:I=>o(A=>({...A,showColor:I.target.checked})),className:"rounded border-gray-300"}),d.jsx("label",{htmlFor:"showColor",className:"ml-2 text-sm",children:"Show Color"})]}),e.size&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"showSize",checked:s.showSize,onChange:I=>o(A=>({...A,showSize:I.target.checked})),className:"rounded border-gray-300"}),d.jsx("label",{htmlFor:"showSize",className:"ml-2 text-sm",children:"Show Size"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx(lt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),d.jsx(lt,{variant:"secondary",onClick:S,type:"button",leftIcon:d.jsx(kx,{className:"w-4 h-4"}),disabled:u||!(y!=null&&y.id),children:u?"Saving...":"Save Settings"}),d.jsx(lt,{variant:"primary",onClick:_,leftIcon:d.jsx(Uc,{className:"w-4 h-4"}),disabled:l,children:l?"Loading...":"Print Labels"})]})]})]})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Zb={};Zb.version="0.20.3";var Cu=1200,ky=function(r){Cu=r};function zpe(){ky(1200)}var cv=function(t){return String.fromCharCode(t)},oM=function(t){return String.fromCharCode(t)},Ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Qb(r){for(var t="",e=0,n=0,a=0,i=0,s=0,o=0,l=0,c=0;c<r.length;)e=r.charCodeAt(c++),i=e>>2,n=r.charCodeAt(c++),s=(e&3)<<4|n>>4,a=r.charCodeAt(c++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=Ns.charAt(i)+Ns.charAt(s)+Ns.charAt(o)+Ns.charAt(l);return t}function Wpe(r){for(var t="",e=0,n=0,a=0,i=0,s=0,o=0,l=0,c=0;c<r.length;)e=r.charCodeAt(c++),e>255&&(e=95),i=e>>2,n=r.charCodeAt(c++),n>255&&(n=95),s=(e&3)<<4|n>>4,a=r.charCodeAt(c++),a>255&&(a=95),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=Ns.charAt(i)+Ns.charAt(s)+Ns.charAt(o)+Ns.charAt(l);return t}function Hpe(r){for(var t="",e=0,n=0,a=0,i=0,s=0,o=0,l=0,c=0;c<r.length;)e=r[c++],i=e>>2,n=r[c++],s=(e&3)<<4|n>>4,a=r[c++],o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=Ns.charAt(i)+Ns.charAt(s)+Ns.charAt(o)+Ns.charAt(l);return t}function yf(r){var t="",e=0,n=0,a=0,i=0,s=0,o=0,l=0;if(r.slice(0,5)=="data:"){var c=r.slice(0,1024).indexOf(";base64,");c>-1&&(r=r.slice(c+8))}r=r.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<r.length;)i=Ns.indexOf(r.charAt(c++)),s=Ns.indexOf(r.charAt(c++)),e=i<<2|s>>4,t+=String.fromCharCode(e),o=Ns.indexOf(r.charAt(c++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=Ns.indexOf(r.charAt(c++)),a=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var En=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),eu=(function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(t,e){return e?new Buffer(t,e):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})(),ex=(function(){if(typeof Buffer>"u")return!1;var r=eu([65,0]);if(!r)return!1;var t=r.toString("utf16le");return t.length==1})();function Bh(r){return En?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function lM(r){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Lo=function(t){return En?eu(t,"binary"):t.split("").map(function(e){return e.charCodeAt(0)&255})};function h2(r){if(typeof ArrayBuffer>"u")return Lo(r);for(var t=new ArrayBuffer(r.length),e=new Uint8Array(t),n=0;n!=r.length;++n)e[n]=r.charCodeAt(n)&255;return t}function $h(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],e=0;e<r.length;++e)t[e]=String.fromCharCode(r[e]);return t.join("")}function Vpe(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var Ya=En?function(r){return Buffer.concat(r.map(function(t){return Buffer.isBuffer(t)?t:eu(t)}))}:function(r){if(typeof Uint8Array<"u"){var t=0,e=0;for(t=0;t<r.length;++t)e+=r[t].length;var n=new Uint8Array(e),a=0;for(t=0,e=0;t<r.length;e+=a,++t)a=r[t].length,r[t]instanceof Uint8Array?n.set(r[t],e):typeof r[t]=="string"?n.set(new Uint8Array(Lo(r[t])),e):n.set(new Uint8Array(r[t]),e);return n}return[].concat.apply([],r.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Gpe(r){for(var t=[],e=0,n=r.length+250,a=Bh(r.length+255),i=0;i<r.length;++i){var s=r.charCodeAt(i);if(s<128)a[e++]=s;else if(s<2048)a[e++]=192|s>>6&31,a[e++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=r.charCodeAt(++i)&1023;a[e++]=240|s>>8&7,a[e++]=128|s>>2&63,a[e++]=128|o>>6&15|(s&3)<<4,a[e++]=128|o&63}else a[e++]=224|s>>12&15,a[e++]=128|s>>6&63,a[e++]=128|s&63;e>n&&(t.push(a.slice(0,e)),e=0,a=Bh(65535),n=65530)}return t.push(a.slice(0,e)),Ya(t)}var Cg=/\u0000/g,uv=/[\u0001-\u0006]/g;function pp(r){for(var t="",e=r.length-1;e>=0;)t+=r.charAt(e--);return t}function ic(r,t){var e=""+r;return e.length>=t?e:ma("0",t-e.length)+e}function Oj(r,t){var e=""+r;return e.length>=t?e:ma(" ",t-e.length)+e}function tx(r,t){var e=""+r;return e.length>=t?e:e+ma(" ",t-e.length)}function Kpe(r,t){var e=""+Math.round(r);return e.length>=t?e:ma("0",t-e.length)+e}function Xpe(r,t){var e=""+r;return e.length>=t?e:ma("0",t-e.length)+e}var cM=Math.pow(2,32);function $0(r,t){if(r>cM||r<-cM)return Kpe(r,t);var e=Math.round(r);return Xpe(e,t)}function rx(r,t){return t=t||0,r.length>=7+t&&(r.charCodeAt(t)|32)===103&&(r.charCodeAt(t+1)|32)===101&&(r.charCodeAt(t+2)|32)===110&&(r.charCodeAt(t+3)|32)===101&&(r.charCodeAt(t+4)|32)===114&&(r.charCodeAt(t+5)|32)===97&&(r.charCodeAt(t+6)|32)===108}var uM=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],vS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Ype(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var la={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},dM={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Jpe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function nx(r,t,e){for(var n=r<0?-1:1,a=r*n,i=0,s=1,o=0,l=1,c=0,u=0,f=Math.floor(a);c<t&&(f=Math.floor(a),o=f*s+i,u=f*c+l,!(a-f<5e-8));)a=1/(a-f),i=s,s=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=i):(u=c,o=s)),!e)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function Zpe(r){var t=r.toPrecision(16);if(t.indexOf("e")>-1){var e=t.slice(0,t.indexOf("e"));return e=e.indexOf(".")>-1?e.slice(0,e.slice(0,2)=="0."?17:16):e.slice(0,15)+ma("0",e.length-15),e+t.slice(t.indexOf("e"))}var n=t.indexOf(".")>-1?t.slice(0,t.slice(0,2)=="0."?17:16):t.slice(0,15)+ma("0",t.length-15);return Number(n)}function U0(r,t,e){if(r>2958465||r<0)return null;r=Zpe(r);var n=r|0,a=Math.floor(86400*(r-n)),i=0,s=[],o={D:n,T:a,u:86400*(r-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)s=e?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=e?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),e&&(i=nme(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}function Ij(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Qpe(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function eme(r){var t=r<0?12:11,e=Ij(r.toFixed(12));return e.length<=t||(e=r.toPrecision(10),e.length<=t)?e:r.toExponential(5)}function tme(r){var t=Ij(r.toFixed(11));return t.length>(r<0?12:11)||t==="0"||t==="-0"?r.toPrecision(6):t}function rme(r){if(!isFinite(r))return isNaN(r)?"#NUM!":"#DIV/0!";var t=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),e;return t>=-4&&t<=-1?e=r.toPrecision(10+t):Math.abs(t)<=9?e=eme(r):t===10?e=r.toFixed(10).substr(0,12):e=tme(r),Ij(Qpe(e.toUpperCase()))}function $8(r,t){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):rme(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return ed(14,es(r,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+r)}function nme(r,t){t[0]-=581;var e=r.getDay();return r<60&&(e=(e+6)%7),e}function ame(r,t,e,n){var a="",i=0,s=0,o=e.y,l,c=0;switch(r){case 98:o=e.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=e.m,c=t.length;break;case 3:return vS[e.m-1][1];case 5:return vS[e.m-1][0];default:return vS[e.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=e.d,c=t.length;break;case 3:return uM[e.q][0];default:return uM[e.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(e.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=e.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=e.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return e.u===0&&(t=="s"||t=="ss")?ic(e.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(e.S+e.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=ic(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=e.D*24+e.H;break;case"[m]":case"[mm]":l=(e.D*24+e.H)*60+e.M;break;case"[s]":case"[ss]":l=((e.D*24+e.H)*60+e.M)*60+(n==0?Math.round(e.S+e.u):e.S);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?ic(l,c):"";return u}function df(r){var t=3;if(r.length<=t)return r;for(var e=r.length%t,n=r.substr(0,e);e!=r.length;e+=t)n+=(n.length>0?",":"")+r.substr(e,t);return n}var DU=/%/g;function ime(r,t,e){var n=t.replace(DU,""),a=t.length-n.length;return Hu(r,n,e*Math.pow(10,2*a))+ma("%",a)}function sme(r,t,e){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Hu(r,t.substr(0,n),e/Math.pow(10,3*(t.length-n)))}function LU(r,t){var e,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+LU(r,-t);var a=r.indexOf(".");a===-1&&(a=r.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),e=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),e.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(e.indexOf(".")===-1?e=e.charAt(0)+"."+e.substr(1)+"E+"+(s-e.length+i):e+="E+"+(s-i);e.substr(0,2)==="0.";)e=e.charAt(0)+e.substr(2,a)+"."+e.substr(2+a),e=e.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else e=t.toExponential(n);return r.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),r.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}var BU=/# (\?+)( ?)\/( ?)(\d+)/;function ome(r,t,e){var n=parseInt(r[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,o=n;return e+(i===0?"":""+i)+" "+(s===0?ma(" ",r[1].length+1+r[4].length):Oj(s,r[1].length)+r[2]+"/"+r[3]+ic(o,r[4].length))}function lme(r,t,e){return e+(t===0?"":""+t)+ma(" ",r[1].length+2+r[4].length)}var $U=/^#*0*\.([0#]+)/,UU=/\)[^)]*[0#]/,qU=/\(###\) ###\\?-####/;function qs(r){for(var t="",e,n=0;n!=r.length;++n)switch(e=r.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(e)}return t}function fM(r,t){var e=Math.pow(10,t);return""+Math.round(r*e)/e}function hM(r,t){var e=r-Math.floor(r),n=Math.pow(10,t);return t<(""+Math.round(e*n)).length?0:Math.round(e*n)}function cme(r,t){return t<(""+Math.round((r-Math.floor(r))*Math.pow(10,t))).length?1:0}function ume(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function ol(r,t,e){if(r.charCodeAt(0)===40&&!t.match(UU)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?ol("n",n,e):"("+ol("n",n,-e)+")"}if(t.charCodeAt(t.length-1)===44)return sme(r,t,e);if(t.indexOf("%")!==-1)return ime(r,t,e);if(t.indexOf("E")!==-1)return LU(t,e);if(t.charCodeAt(0)===36)return"$"+ol(r,t.substr(t.charAt(1)==" "?2:1),e);var a,i,s,o,l=Math.abs(e),c=e<0?"-":"";if(t.match(/^00+$/))return c+$0(l,t.length);if(t.match(/^[#?]+$/))return a=$0(e,0),a==="0"&&(a=""),a.length>t.length?a:qs(t.substr(0,t.length-a.length))+a;if(i=t.match(BU))return ome(i,l,c);if(t.match(/^#+0+$/))return c+$0(l,t.length-t.indexOf("0"));if(i=t.match($U))return a=fM(e,i[1].length).replace(/^([^\.]+)$/,"$1."+qs(i[1])).replace(/\.$/,"."+qs(i[1])).replace(/\.(\d*)$/,function(g,y){return"."+y+ma("0",qs(i[1]).length-y.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return c+fM(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return c+df($0(l,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+ol(r,t,-e):df(""+(Math.floor(e)+cme(e,i[1].length)))+"."+ic(hM(e,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return ol(r,t.replace(/^#,#*,/,""),e);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=pp(ol(r,t.replace(/[\\-]/g,""),e)),s=0,pp(pp(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<a.length?a.charAt(s++):g==="0"?"0":""}));if(t.match(qU))return a=ol(r,"##########",e),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=nx(l,Math.pow(10,s)-1,!1),a=""+c,u=Hu("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=tx(o[2],s),u.length<i[4].length&&(u=qs(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=nx(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Oj(o[1],s)+i[2]+"/"+i[3]+tx(o[2],s):ma(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=$0(e,0),t.length<=a.length?a:qs(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+e.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return qs(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=hM(e,i[1].length),e<0?"-"+ol(r,t,-e):df(ume(e)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ic(0,3-g.length):"")+g})+"."+ic(s,i[1].length);switch(t){case"###,##0.00":return ol(r,"#,##0.00",e);case"###,###":case"##,###":case"#,###":var p=df($0(l,0));return p!=="0"?c+p:"";case"###,###.00":return ol(r,"###,##0.00",e).replace(/^0\./,".");case"#,###.00":return ol(r,"#,##0.00",e).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function dme(r,t,e){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Hu(r,t.substr(0,n),e/Math.pow(10,3*(t.length-n)))}function fme(r,t,e){var n=t.replace(DU,""),a=t.length-n.length;return Hu(r,n,e*Math.pow(10,2*a))+ma("%",a)}function zU(r,t){var e,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+zU(r,-t);var a=r.indexOf(".");a===-1&&(a=r.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),e=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!e.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);e.indexOf(".")===-1?e=e.charAt(0)+"."+e.substr(1)+"E+"+(s-e.length+i):e+="E+"+(s-i),e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else e=t.toExponential(n);return r.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),r.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}function Tc(r,t,e){if(r.charCodeAt(0)===40&&!t.match(UU)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?Tc("n",n,e):"("+Tc("n",n,-e)+")"}if(t.charCodeAt(t.length-1)===44)return dme(r,t,e);if(t.indexOf("%")!==-1)return fme(r,t,e);if(t.indexOf("E")!==-1)return zU(t,e);if(t.charCodeAt(0)===36)return"$"+Tc(r,t.substr(t.charAt(1)==" "?2:1),e);var a,i,s,o,l=Math.abs(e),c=e<0?"-":"";if(t.match(/^00+$/))return c+ic(l,t.length);if(t.match(/^[#?]+$/))return a=""+e,e===0&&(a=""),a.length>t.length?a:qs(t.substr(0,t.length-a.length))+a;if(i=t.match(BU))return lme(i,l,c);if(t.match(/^#+0+$/))return c+ic(l,t.length-t.indexOf("0"));if(i=t.match($U))return a=(""+e).replace(/^([^\.]+)$/,"$1."+qs(i[1])).replace(/\.$/,"."+qs(i[1])),a=a.replace(/\.(\d*)$/,function(g,y){return"."+y+ma("0",qs(i[1]).length-y.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return c+df(""+l);if(i=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+Tc(r,t,-e):df(""+e)+"."+ma("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Tc(r,t.replace(/^#,#*,/,""),e);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=pp(Tc(r,t.replace(/[\\-]/g,""),e)),s=0,pp(pp(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<a.length?a.charAt(s++):g==="0"?"0":""}));if(t.match(qU))return a=Tc(r,"##########",e),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=nx(l,Math.pow(10,s)-1,!1),a=""+c,u=Hu("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=tx(o[2],s),u.length<i[4].length&&(u=qs(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=nx(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Oj(o[1],s)+i[2]+"/"+i[3]+tx(o[2],s):ma(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+e,t.length<=a.length?a:qs(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+e.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return qs(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return e<0?"-"+Tc(r,t,-e):df(""+e).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ic(0,3-g.length):"")+g})+"."+ic(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=df(""+l);return p!=="0"?c+p:"";default:if(t.match(/\.[0#?]*$/))return Tc(r,t.slice(0,t.lastIndexOf(".")),e)+qs(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Hu(r,t,e){return(e|0)===e?Tc(r,t,e):ol(r,t,e)}function hme(r){for(var t=[],e=!1,n=0,a=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:e=!e;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=r.substr(a,n-a),a=n+1}if(t[t.length]=r.substr(a),e===!0)throw new Error("Format |"+r+"| unterminated string ");return t}var WU=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Uh(r){for(var t=0,e="",n="";t<r.length;)switch(e=r.charAt(t)){case"G":rx(r,t)&&(t+=6),t++;break;case'"':for(;r.charCodeAt(++t)!==34&&t<r.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(r.charAt(t+1)==="1"||r.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(t,3).toUpperCase()==="A/P"||r.substr(t,5).toUpperCase()==="AM/PM"||r.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=e;r.charAt(t++)!=="]"&&t<r.length;)n+=r.charAt(t);if(n.match(WU))return!0;break;case".":case"0":case"#":for(;t<r.length&&("0#?.,E+-%".indexOf(e=r.charAt(++t))>-1||e=="\\"&&r.charAt(t+1)=="-"&&"0#".indexOf(r.charAt(t+2))>-1););break;case"?":for(;r.charAt(++t)===e;);break;case"*":++t,(r.charAt(t)==" "||r.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<r.length&&"0123456789".indexOf(r.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function pme(r,t,e,n){for(var a=[],i="",s=0,o="",l="t",c,u,f,h="H";s<r.length;)switch(o=r.charAt(s)){case"G":if(!rx(r,s))throw new Error("unrecognized character "+o+" in "+r);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=r.charCodeAt(++s))!==34&&s<r.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var p=r.charAt(++s),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(r.charAt(s+1)==="1"||r.charAt(s+1)==="2"){if(c==null&&(c=U0(t,e,r.charAt(s+1)==="2"),c==null))return"";a[a.length]={t:"X",v:r.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=U0(t,e),c==null))return"";for(i=o;++s<r.length&&r.charAt(s).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(c==null&&(c=U0(t,e)),r.substr(s,3).toUpperCase()==="A/P"?(c!=null&&(y.v=c.H>=12?r.charAt(s+2):o),y.t="T",h="h",s+=3):r.substr(s,5).toUpperCase()==="AM/PM"?(c!=null&&(y.v=c.H>=12?"PM":"AM"),y.t="T",s+=5,h="h"):r.substr(s,5).toUpperCase()==="/"?(c!=null&&(y.v=c.H>=12?"":""),y.t="T",s+=5,h="h"):(y.t="t",++s),c==null&&y.t==="T")return"";a[a.length]=y,l=o;break;case"[":for(i=o;r.charAt(s++)!=="]"&&s<r.length;)i+=r.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(WU)){if(c==null&&(c=U0(t,e),c==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Uh(r)||(a[a.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++s<r.length&&(o=r.charAt(s))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++s<r.length&&"0#?.,E+-%".indexOf(o=r.charAt(s))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;r.charAt(++s)===o;)i+=o;a[a.length]={t:o,v:i},l=o;break;case"*":++s,(r.charAt(s)==" "||r.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;s<r.length&&"0123456789".indexOf(r.charAt(++s))>-1;)i+=r.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+r);a[a.length]={t:"t",v:o},++s;break}var m=0,v=0,b;for(s=a.length-1,l="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=h,l="h",m<1&&(m=1);break;case"s":(b=a[s].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1),m=4),m<3&&(m=3);case"d":case"y":case"e":l=a[s].t;break;case"M":l=a[s].t,m<2&&(m=2);break;case"m":l==="s"&&(a[s].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&a[s].v.match(/[Hh]/)&&(m=1),m<2&&a[s].v.match(/[Mm]/)&&(m=2),m<3&&a[s].v.match(/[Ss]/)&&(m=3)}var x;switch(m){case 0:break;case 1:case 2:case 3:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H),c.H>=24&&(c.H=0,++c.D,x=U0(c.D),x.u=c.u,x.S=c.S,x.M=c.M,x.H=c.H,c=x);break;case 4:switch(v){case 1:c.u=Math.round(c.u*10)/10;break;case 2:c.u=Math.round(c.u*100)/100;break;case 3:c.u=Math.round(c.u*1e3)/1e3;break}c.u>=1&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H),c.H>=24&&(c.H=0,++c.D,x=U0(c.D),x.u=c.u,x.S=c.S,x.M=c.M,x.H=c.H,c=x);break}var S="",_;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=ame(a[s].t.charCodeAt(0),a[s].v,c,v),a[s].t="t";break;case"n":case"?":for(_=s+1;a[_]!=null&&((o=a[_].t)==="?"||o==="D"||(o===" "||o==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[s].v+=a[_].v,a[_]={v:"",t:";"},++_;S+=a[s].v,s=_-1;break;case"G":a[s].t="t",a[s].v=$8(t,e);break}var I="",A,O;if(S.length>0){S.charCodeAt(0)==40?(A=t<0&&S.charCodeAt(0)===45?-t:t,O=Hu("n",S,A)):(A=t<0&&n>1?-t:t,O=Hu("n",S,A),A<0&&a[0]&&a[0].t=="t"&&(O=O.substr(1),a[0].v="-"+a[0].v)),_=O.length-1;var M=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){M=s;break}var z=a.length;if(M===a.length&&O.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(_>=a[s].v.length-1?(_-=a[s].v.length,a[s].v=O.substr(_+1,a[s].v.length)):_<0?a[s].v="":(a[s].v=O.substr(0,_+1),_=-1),a[s].t="t",z=s);_>=0&&z<a.length&&(a[z].v=O.substr(0,_+1)+a[z].v)}else if(M!==a.length&&O.indexOf("E")===-1){for(_=O.indexOf(".")-1,s=M;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(u=a[s].v.indexOf(".")>-1&&s===M?a[s].v.indexOf(".")-1:a[s].v.length-1,I=a[s].v.substr(u+1);u>=0;--u)_>=0&&(a[s].v.charAt(u)==="0"||a[s].v.charAt(u)==="#")&&(I=O.charAt(_--)+I);a[s].v=I,a[s].t="t",z=s}for(_>=0&&z<a.length&&(a[z].v=O.substr(0,_+1)+a[z].v),_=O.indexOf(".")+1,s=M;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==M)){for(u=a[s].v.indexOf(".")>-1&&s===M?a[s].v.indexOf(".")+1:0,I=a[s].v.substr(0,u);u<a[s].v.length;++u)_<O.length&&(I+=O.charAt(_++));a[s].v=I,a[s].t="t",z=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(A=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=Hu(a[s].t,a[s].v,A),a[s].t="t");var U="";for(s=0;s!==a.length;++s)a[s]!=null&&(U+=a[s].v);return U}var pM=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function mM(r,t){if(t==null)return!1;var e=parseFloat(t[2]);switch(t[1]){case"=":if(r==e)return!0;break;case">":if(r>e)return!0;break;case"<":if(r<e)return!0;break;case"<>":if(r!=e)return!0;break;case">=":if(r>=e)return!0;break;case"<=":if(r<=e)return!0;break}return!1}function mme(r,t){var e=hme(r),n=e.length,a=e[n-1].indexOf("@");if(n<4&&a>-1&&--n,e.length>4)throw new Error("cannot find right format for |"+e.join("|")+"|");if(typeof t!="number")return[4,e.length===4||a>-1?e[e.length-1]:"@"];switch(typeof t=="number"&&!isFinite(t)&&(t=0),e.length){case 1:e=a>-1?["General","General","General",e[0]]:[e[0],e[0],e[0],"@"];break;case 2:e=a>-1?[e[0],e[0],e[0],e[1]]:[e[0],e[1],e[0],"@"];break;case 3:e=a>-1?[e[0],e[1],e[0],e[2]]:[e[0],e[1],e[2],"@"];break}var i=t>0?e[0]:t<0?e[1]:e[2];if(e[0].indexOf("[")===-1&&e[1].indexOf("[")===-1)return[n,i];if(e[0].match(/\[[=<>]/)!=null||e[1].match(/\[[=<>]/)!=null){var s=e[0].match(pM),o=e[1].match(pM);return mM(t,s)?[n,e[0]]:mM(t,o)?[n,e[1]]:[n,e[s!=null&&o!=null?2:1]]}return[n,i]}function ed(r,t,e){e==null&&(e={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&e.dateNF?n=e.dateNF:n=r;break;case"number":r==14&&e.dateNF?n=e.dateNF:n=(e.table!=null?e.table:la)[r],n==null&&(n=e.table&&e.table[dM[r]]||la[dM[r]]),n==null&&(n=Jpe[r]||"General");break}if(rx(n,0))return $8(t,e);t instanceof Date&&(t=es(t,e.date1904));var a=mme(n,t);if(rx(a[1]))return $8(t,e);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else{if(t===""||t==null)return"";if(isNaN(t)&&a[1].indexOf("0")>-1)return"#NUM!";if(!isFinite(t)&&a[1].indexOf("0")>-1)return"#DIV/0!"}return pme(a[1],t,e,a[0])}function HU(r,t){if(typeof t!="number"){t=+t||-1;for(var e=0;e<392;++e){if(la[e]==null){t<0&&(t=e);continue}if(la[e]==r){t=e;break}}t<0&&(t=391)}return la[t]=r,t}function p2(r){for(var t=0;t!=392;++t)r[t]!==void 0&&HU(r[t],t)}function m2(){la=Ype()}var ax=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function gme(r){var t=typeof r=="number"?la[r]:r;return t=t.replace(ax,"(\\d+)"),ax.lastIndex=0,new RegExp("^"+t+"$")}function yme(r,t,e){var n=-1,a=-1,i=-1,s=-1,o=-1,l=-1;(t.match(ax)||[]).forEach(function(f,h){var p=parseInt(e[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":s=p;break;case"s":l=p;break;case"m":s>=0?o=p:a=p;break}}),ax.lastIndex=0,l>=0&&o==-1&&a>=0&&(o=a,a=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?c:n==-1&&a==-1&&i==-1?u:c+"T"+u}var vme={"d.m":"d\\.m"};function bme(r,t){return HU(vme[r]||r,t)}var gM=(function(){var r={};r.version="1.2.0";function t(){for(var A=0,O=new Array(256),M=0;M!=256;++M)A=M,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,O[M]=A;return typeof Int32Array<"u"?new Int32Array(O):O}var e=t();function n(A){var O=0,M=0,z=0,U=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)U[z]=A[z];for(z=0;z!=256;++z)for(M=A[z],O=256+z;O<4096;O+=256)M=U[O]=M>>>8^A[M&255];var D=[];for(z=1;z!=16;++z)D[z-1]=typeof Int32Array<"u"&&typeof U.subarray=="function"?U.subarray(z*256,z*256+256):U.slice(z*256,z*256+256);return D}var a=n(e),i=a[0],s=a[1],o=a[2],l=a[3],c=a[4],u=a[5],f=a[6],h=a[7],p=a[8],g=a[9],y=a[10],m=a[11],v=a[12],b=a[13],x=a[14];function S(A,O){for(var M=O^-1,z=0,U=A.length;z<U;)M=M>>>8^e[(M^A.charCodeAt(z++))&255];return~M}function _(A,O){for(var M=O^-1,z=A.length-15,U=0;U<z;)M=x[A[U++]^M&255]^b[A[U++]^M>>8&255]^v[A[U++]^M>>16&255]^m[A[U++]^M>>>24]^y[A[U++]]^g[A[U++]]^p[A[U++]]^h[A[U++]]^f[A[U++]]^u[A[U++]]^c[A[U++]]^l[A[U++]]^o[A[U++]]^s[A[U++]]^i[A[U++]]^e[A[U++]];for(z+=15;U<z;)M=M>>>8^e[(M^A[U++])&255];return~M}function I(A,O){for(var M=O^-1,z=0,U=A.length,D=0,T=0;z<U;)D=A.charCodeAt(z++),D<128?M=M>>>8^e[(M^D)&255]:D<2048?(M=M>>>8^e[(M^(192|D>>6&31))&255],M=M>>>8^e[(M^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,T=A.charCodeAt(z++)&1023,M=M>>>8^e[(M^(240|D>>8&7))&255],M=M>>>8^e[(M^(128|D>>2&63))&255],M=M>>>8^e[(M^(128|T>>6&15|(D&3)<<4))&255],M=M>>>8^e[(M^(128|T&63))&255]):(M=M>>>8^e[(M^(224|D>>12&15))&255],M=M>>>8^e[(M^(128|D>>6&63))&255],M=M>>>8^e[(M^(128|D&63))&255]);return~M}return r.table=e,r.bstr=S,r.buf=_,r.str=I,r})(),Kn=(function(){var t={};t.version="1.2.2";function e(he,xe){for(var me=he.split("/"),Se=xe.split("/"),ke=0,Te=0,Ge=Math.min(me.length,Se.length);ke<Ge;++ke){if(Te=me[ke].length-Se[ke].length)return Te;if(me[ke]!=Se[ke])return me[ke]<Se[ke]?-1:1}return me.length-Se.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var xe=he.lastIndexOf("/");return xe===-1?he:he.slice(0,xe+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var xe=he.lastIndexOf("/");return xe===-1?he:he.slice(xe+1)}function i(he,xe){typeof xe=="string"&&(xe=new Date(xe));var me=xe.getHours();me=me<<6|xe.getMinutes(),me=me<<5|xe.getSeconds()>>>1,he.write_shift(2,me);var Se=xe.getFullYear()-1980;Se=Se<<4|xe.getMonth()+1,Se=Se<<5|xe.getDate(),he.write_shift(2,Se)}function s(he){var xe=he.read_shift(2)&65535,me=he.read_shift(2)&65535,Se=new Date,ke=me&31;me>>>=5;var Te=me&15;me>>>=4,Se.setMilliseconds(0),Se.setFullYear(me+1980),Se.setMonth(Te-1),Se.setDate(ke);var Ge=xe&31;xe>>>=5;var nt=xe&63;return xe>>>=6,Se.setHours(xe),Se.setMinutes(nt),Se.setSeconds(Ge<<1),Se}function o(he){zs(he,0);for(var xe={},me=0;he.l<=he.length-4;){var Se=he.read_shift(2),ke=he.read_shift(2),Te=he.l+ke,Ge={};switch(Se){case 21589:me=he.read_shift(1),me&1&&(Ge.mtime=he.read_shift(4)),ke>5&&(me&2&&(Ge.atime=he.read_shift(4)),me&4&&(Ge.ctime=he.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break;case 1:{var nt=he.read_shift(4),Ke=he.read_shift(4);Ge.usz=Ke*Math.pow(2,32)+nt,nt=he.read_shift(4),Ke=he.read_shift(4),Ge.csz=Ke*Math.pow(2,32)+nt}break}he.l=Te,xe[Se]=Ge}return xe}var l;function c(){return l||(l=xme)}function u(he,xe){if(he[0]==80&&he[1]==75)return Xt(he,xe);if((he[0]|32)==109&&(he[1]|32)==105)return et(he,xe);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var me=3,Se=512,ke=0,Te=0,Ge=0,nt=0,Ke=0,it=[],st=he.slice(0,512);zs(st,0);var Mt=f(st);switch(me=Mt[0],me){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(Mt[1]==0)return Xt(he,xe);default:throw new Error("Major Version: Expected 3 or 4 saw "+me)}Se!==512&&(st=he.slice(0,Se),zs(st,28));var $t=he.slice(0,Se);h(st,me);var er=st.read_shift(4,"i");if(me===3&&er!==0)throw new Error("# Directory Sectors: Expected 0 saw "+er);st.l+=4,Ge=st.read_shift(4,"i"),st.l+=4,st.chk("00100000","Mini Stream Cutoff Size: "),nt=st.read_shift(4,"i"),ke=st.read_shift(4,"i"),Ke=st.read_shift(4,"i"),Te=st.read_shift(4,"i");for(var je=-1,Le=0;Le<109&&(je=st.read_shift(4,"i"),!(je<0));++Le)it[Le]=je;var vt=p(he,Se);m(Ke,Te,vt,Se,it);var Et=b(vt,Ge,it,Se);Ge<Et.length&&(Et[Ge].name="!Directory"),ke>0&&nt!==T&&(Et[nt].name="!MiniFAT"),Et[it[0]].name="!FAT",Et.fat_addrs=it,Et.ssz=Se;var Qt={},Ut=[],Yt=[],Ur=[];x(Ge,Et,vt,Ut,ke,Qt,Yt,nt),g(Yt,Ur,Ut),Ut.shift();var Tr={FileIndex:Yt,FullPaths:Ur};return xe&&xe.raw&&(Tr.raw={header:$t,sectors:vt}),Tr}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(R,"Header Signature: "),he.l+=16;var xe=he.read_shift(2,"u");return[he.read_shift(2,"u"),xe]}function h(he,xe){var me=9;switch(he.l+=2,me=he.read_shift(2)){case 9:if(xe!=3)throw new Error("Sector Shift: Expected 9 saw "+me);break;case 12:if(xe!=4)throw new Error("Sector Shift: Expected 12 saw "+me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+me)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function p(he,xe){for(var me=Math.ceil(he.length/xe)-1,Se=[],ke=1;ke<me;++ke)Se[ke-1]=he.slice(ke*xe,(ke+1)*xe);return Se[me-1]=he.slice(me*xe),Se}function g(he,xe,me){for(var Se=0,ke=0,Te=0,Ge=0,nt=0,Ke=me.length,it=[],st=[];Se<Ke;++Se)it[Se]=st[Se]=Se,xe[Se]=me[Se];for(;nt<st.length;++nt)Se=st[nt],ke=he[Se].L,Te=he[Se].R,Ge=he[Se].C,it[Se]===Se&&(ke!==-1&&it[ke]!==ke&&(it[Se]=it[ke]),Te!==-1&&it[Te]!==Te&&(it[Se]=it[Te])),Ge!==-1&&(it[Ge]=Se),ke!==-1&&Se!=it[Se]&&(it[ke]=it[Se],st.lastIndexOf(ke)<nt&&st.push(ke)),Te!==-1&&Se!=it[Se]&&(it[Te]=it[Se],st.lastIndexOf(Te)<nt&&st.push(Te));for(Se=1;Se<Ke;++Se)it[Se]===Se&&(Te!==-1&&it[Te]!==Te?it[Se]=it[Te]:ke!==-1&&it[ke]!==ke&&(it[Se]=it[ke]));for(Se=1;Se<Ke;++Se)if(he[Se].type!==0){if(nt=Se,nt!=it[nt])do nt=it[nt],xe[Se]=xe[nt]+"/"+xe[Se];while(nt!==0&&it[nt]!==-1&&nt!=it[nt]);it[Se]=-1}for(xe[0]+="/",Se=1;Se<Ke;++Se)he[Se].type!==2&&(xe[Se]+="/")}function y(he,xe,me){for(var Se=he.start,ke=he.size,Te=[],Ge=Se;me&&ke>0&&Ge>=0;)Te.push(xe.slice(Ge*D,Ge*D+D)),ke-=D,Ge=vh(me,Ge*4);return Te.length===0?xt(0):Ya(Te).slice(0,he.size)}function m(he,xe,me,Se,ke){var Te=T;if(he===T){if(xe!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Ge=me[he],nt=(Se>>>2)-1;if(!Ge)return;for(var Ke=0;Ke<nt&&(Te=vh(Ge,Ke*4))!==T;++Ke)ke.push(Te);xe>=1&&m(vh(Ge,Se-4),xe-1,me,Se,ke)}}function v(he,xe,me,Se,ke){var Te=[],Ge=[];ke||(ke=[]);var nt=Se-1,Ke=0,it=0;for(Ke=xe;Ke>=0;){ke[Ke]=!0,Te[Te.length]=Ke,Ge.push(he[Ke]);var st=me[Math.floor(Ke*4/Se)];if(it=Ke*4&nt,Se<4+it)throw new Error("FAT boundary crossed: "+Ke+" 4 "+Se);if(!he[st])break;Ke=vh(he[st],it)}return{nodes:Te,data:SM([Ge])}}function b(he,xe,me,Se){var ke=he.length,Te=[],Ge=[],nt=[],Ke=[],it=Se-1,st=0,Mt=0,$t=0,er=0;for(st=0;st<ke;++st)if(nt=[],$t=st+xe,$t>=ke&&($t-=ke),!Ge[$t]){Ke=[];var je=[];for(Mt=$t;Mt>=0;){je[Mt]=!0,Ge[Mt]=!0,nt[nt.length]=Mt,Ke.push(he[Mt]);var Le=me[Math.floor(Mt*4/Se)];if(er=Mt*4&it,Se<4+er)throw new Error("FAT boundary crossed: "+Mt+" 4 "+Se);if(!he[Le]||(Mt=vh(he[Le],er),je[Mt]))break}Te[$t]={nodes:nt,data:SM([Ke])}}return Te}function x(he,xe,me,Se,ke,Te,Ge,nt){for(var Ke=0,it=Se.length?2:0,st=xe[he].data,Mt=0,$t=0,er;Mt<st.length;Mt+=128){var je=st.slice(Mt,Mt+128);zs(je,64),$t=je.read_shift(2),er=Bj(je,0,$t-it),Se.push(er);var Le={name:er,type:je.read_shift(1),color:je.read_shift(1),L:je.read_shift(4,"i"),R:je.read_shift(4,"i"),C:je.read_shift(4,"i"),clsid:je.read_shift(16),state:je.read_shift(4,"i"),start:0,size:0},vt=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);vt!==0&&(Le.ct=S(je,je.l-8));var Et=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);Et!==0&&(Le.mt=S(je,je.l-8)),Le.start=je.read_shift(4,"i"),Le.size=je.read_shift(4,"i"),Le.size<0&&Le.start<0&&(Le.size=Le.type=0,Le.start=T,Le.name=""),Le.type===5?(Ke=Le.start,ke>0&&Ke!==T&&(xe[Ke].name="!StreamData")):Le.size>=4096?(Le.storage="fat",xe[Le.start]===void 0&&(xe[Le.start]=v(me,Le.start,xe.fat_addrs,xe.ssz)),xe[Le.start].name=Le.name,Le.content=xe[Le.start].data.slice(0,Le.size)):(Le.storage="minifat",Le.size<0?Le.size=0:Ke!==T&&Le.start!==T&&xe[Ke]&&(Le.content=y(Le,xe[Ke].data,(xe[nt]||{}).data))),Le.content&&zs(Le.content,0),Te[er]=Le,Ge.push(Le)}}function S(he,xe){return new Date(($o(he,xe+4)/1e7*Math.pow(2,32)+$o(he,xe)/1e7-11644473600)*1e3)}function _(he,xe){return c(),u(l.readFileSync(he),xe)}function I(he,xe){var me=xe&&xe.type;switch(me||En&&Buffer.isBuffer(he)&&(me="buffer"),me||"base64"){case"file":return _(he,xe);case"base64":return u(Lo(yf(he)),xe);case"binary":return u(Lo(he),xe)}return u(he,xe)}function A(he,xe){var me=xe||{},Se=me.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=Se+"/",he.FileIndex[0]={name:Se,type:5}),me.CLSID&&(he.FileIndex[0].clsid=me.CLSID),O(he)}function O(he){var xe="Sh33tJ5";if(!Kn.find(he,"/"+xe)){var me=xt(4);me[0]=55,me[1]=me[3]=50,me[2]=54,he.FileIndex.push({name:xe,type:2,content:me,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+xe),M(he)}}function M(he,xe){A(he);for(var me=!1,Se=!1,ke=he.FullPaths.length-1;ke>=0;--ke){var Te=he.FileIndex[ke];switch(Te.type){case 0:Se?me=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(Te.R*Te.L*Te.C)&&(me=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(me=!0);break;default:me=!0;break}}if(!(!me&&!xe)){var Ge=new Date(1987,1,19),nt=0,Ke=Object.create?Object.create(null):{},it=[];for(ke=0;ke<he.FullPaths.length;++ke)Ke[he.FullPaths[ke]]=!0,he.FileIndex[ke].type!==0&&it.push([he.FullPaths[ke],he.FileIndex[ke]]);for(ke=0;ke<it.length;++ke){var st=n(it[ke][0]);for(Se=Ke[st];!Se;){for(;n(st)&&!Ke[n(st)];)st=n(st);it.push([st,{name:a(st).replace("/",""),type:1,clsid:N,ct:Ge,mt:Ge,content:null}]),Ke[st]=!0,st=n(it[ke][0]),Se=Ke[st]}}for(it.sort(function(er,je){return e(er[0],je[0])}),he.FullPaths=[],he.FileIndex=[],ke=0;ke<it.length;++ke)he.FullPaths[ke]=it[ke][0],he.FileIndex[ke]=it[ke][1];for(ke=0;ke<it.length;++ke){var Mt=he.FileIndex[ke],$t=he.FullPaths[ke];if(Mt.name=a($t).replace("/",""),Mt.L=Mt.R=Mt.C=-(Mt.color=1),Mt.size=Mt.content?Mt.content.length:0,Mt.start=0,Mt.clsid=Mt.clsid||N,ke===0)Mt.C=it.length>1?1:-1,Mt.size=0,Mt.type=5;else if($t.slice(-1)=="/"){for(nt=ke+1;nt<it.length&&n(he.FullPaths[nt])!=$t;++nt);for(Mt.C=nt>=it.length?-1:nt,nt=ke+1;nt<it.length&&n(he.FullPaths[nt])!=n($t);++nt);Mt.R=nt>=it.length?-1:nt,Mt.type=1}else n(he.FullPaths[ke+1]||"")==n($t)&&(Mt.R=ke+1),Mt.type=2}}}function z(he,xe){var me=xe||{};if(me.fileType=="mad")return ht(he,me);switch(M(he),me.fileType){case"zip":return vr(he,me)}var Se=(function(er){for(var je=0,Le=0,vt=0;vt<er.FileIndex.length;++vt){var Et=er.FileIndex[vt];if(Et.content){var Qt=Et.content.length;Qt>0&&(Qt<4096?je+=Qt+63>>6:Le+=Qt+511>>9)}}for(var Ut=er.FullPaths.length+3>>2,Yt=je+7>>3,Ur=je+127>>7,Tr=Yt+Le+Ut+Ur,Sr=Tr+127>>7,mr=Sr<=109?0:Math.ceil((Sr-109)/127);Tr+Sr+mr+127>>7>Sr;)mr=++Sr<=109?0:Math.ceil((Sr-109)/127);var Pr=[1,mr,Sr,Ur,Ut,Le,je,0];return er.FileIndex[0].size=je<<6,Pr[7]=(er.FileIndex[0].start=Pr[0]+Pr[1]+Pr[2]+Pr[3]+Pr[4]+Pr[5])+(Pr[6]+7>>3),Pr})(he),ke=xt(Se[7]<<9),Te=0,Ge=0;{for(Te=0;Te<8;++Te)ke.write_shift(1,C[Te]);for(Te=0;Te<8;++Te)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),Te=0;Te<3;++Te)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,Se[2]),ke.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:T),ke.write_shift(4,Se[3]),ke.write_shift(-4,Se[1]?Se[0]-1:T),ke.write_shift(4,Se[1]),Te=0;Te<109;++Te)ke.write_shift(-4,Te<Se[2]?Se[1]+Te:-1)}if(Se[1])for(Ge=0;Ge<Se[1];++Ge){for(;Te<236+Ge*127;++Te)ke.write_shift(-4,Te<Se[2]?Se[1]+Te:-1);ke.write_shift(-4,Ge===Se[1]-1?T:Ge+1)}var nt=function(er){for(Ge+=er;Te<Ge-1;++Te)ke.write_shift(-4,Te+1);er&&(++Te,ke.write_shift(-4,T))};for(Ge=Te=0,Ge+=Se[1];Te<Ge;++Te)ke.write_shift(-4,E.DIFSECT);for(Ge+=Se[2];Te<Ge;++Te)ke.write_shift(-4,E.FATSECT);nt(Se[3]),nt(Se[4]);for(var Ke=0,it=0,st=he.FileIndex[0];Ke<he.FileIndex.length;++Ke)st=he.FileIndex[Ke],st.content&&(it=st.content.length,!(it<4096)&&(st.start=Ge,nt(it+511>>9)));for(nt(Se[6]+7>>3);ke.l&511;)ke.write_shift(-4,E.ENDOFCHAIN);for(Ge=Te=0,Ke=0;Ke<he.FileIndex.length;++Ke)st=he.FileIndex[Ke],st.content&&(it=st.content.length,!(!it||it>=4096)&&(st.start=Ge,nt(it+63>>6)));for(;ke.l&511;)ke.write_shift(-4,E.ENDOFCHAIN);for(Te=0;Te<Se[4]<<2;++Te){var Mt=he.FullPaths[Te];if(!Mt||Mt.length===0){for(Ke=0;Ke<17;++Ke)ke.write_shift(4,0);for(Ke=0;Ke<3;++Ke)ke.write_shift(4,-1);for(Ke=0;Ke<12;++Ke)ke.write_shift(4,0);continue}st=he.FileIndex[Te],Te===0&&(st.start=st.size?st.start-1:T);var $t=Te===0&&me.root||st.name;if($t.length>31&&(console.error("Name "+$t+" will be truncated to "+$t.slice(0,31)),$t=$t.slice(0,31)),it=2*($t.length+1),ke.write_shift(64,$t,"utf16le"),ke.write_shift(2,it),ke.write_shift(1,st.type),ke.write_shift(1,st.color),ke.write_shift(-4,st.L),ke.write_shift(-4,st.R),ke.write_shift(-4,st.C),st.clsid)ke.write_shift(16,st.clsid,"hex");else for(Ke=0;Ke<4;++Ke)ke.write_shift(4,0);ke.write_shift(4,st.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,st.start),ke.write_shift(4,st.size),ke.write_shift(4,0)}for(Te=1;Te<he.FileIndex.length;++Te)if(st=he.FileIndex[Te],st.size>=4096)if(ke.l=st.start+1<<9,En&&Buffer.isBuffer(st.content))st.content.copy(ke,ke.l,0,st.size),ke.l+=st.size+511&-512;else{for(Ke=0;Ke<st.size;++Ke)ke.write_shift(1,st.content[Ke]);for(;Ke&511;++Ke)ke.write_shift(1,0)}for(Te=1;Te<he.FileIndex.length;++Te)if(st=he.FileIndex[Te],st.size>0&&st.size<4096)if(En&&Buffer.isBuffer(st.content))st.content.copy(ke,ke.l,0,st.size),ke.l+=st.size+63&-64;else{for(Ke=0;Ke<st.size;++Ke)ke.write_shift(1,st.content[Ke]);for(;Ke&63;++Ke)ke.write_shift(1,0)}if(En)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function U(he,xe){var me=he.FullPaths.map(function(Ke){return Ke.toUpperCase()}),Se=me.map(function(Ke){var it=Ke.split("/");return it[it.length-(Ke.slice(-1)=="/"?2:1)]}),ke=!1;xe.charCodeAt(0)===47?(ke=!0,xe=me[0].slice(0,-1)+xe):ke=xe.indexOf("/")!==-1;var Te=xe.toUpperCase(),Ge=ke===!0?me.indexOf(Te):Se.indexOf(Te);if(Ge!==-1)return he.FileIndex[Ge];var nt=!Te.match(uv);for(Te=Te.replace(Cg,""),nt&&(Te=Te.replace(uv,"!")),Ge=0;Ge<me.length;++Ge)if((nt?me[Ge].replace(uv,"!"):me[Ge]).replace(Cg,"")==Te||(nt?Se[Ge].replace(uv,"!"):Se[Ge]).replace(Cg,"")==Te)return he.FileIndex[Ge];return null}var D=64,T=-2,R="d0cf11e0a1b11ae1",C=[208,207,17,224,161,177,26,225],N="00000000000000000000000000000000",E={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:T,FREESECT:-1,HEADER_SIGNATURE:R,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:N,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function k(he,xe,me){c();var Se=z(he,me);l.writeFileSync(xe,Se)}function P(he){for(var xe=new Array(he.length),me=0;me<he.length;++me)xe[me]=String.fromCharCode(he[me]);return xe.join("")}function q(he,xe){var me=z(he,xe);switch(xe&&xe.type||"buffer"){case"file":return c(),l.writeFileSync(xe.filename,me),me;case"binary":return typeof me=="string"?me:P(me);case"base64":return Qb(typeof me=="string"?me:P(me));case"buffer":if(En)return Buffer.isBuffer(me)?me:eu(me);case"array":return typeof me=="string"?Lo(me):me}return me}var H;function L(he){try{var xe=he.InflateRaw,me=new xe;if(me._processChunk(new Uint8Array([3,0]),me._finishFlushFlag),me.bytesRead)H=he;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function K(he,xe){if(!H)return Bt(he,xe);var me=H.InflateRaw,Se=new me,ke=Se._processChunk(he.slice(he.l),Se._finishFlushFlag);return he.l+=Se.bytesRead,ke}function Y(he){return H?H.deflateRawSync(he):Ft(he)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function B(he){var xe=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(xe>>16|xe>>8|xe)&255}for(var F=typeof Uint8Array<"u",X=F?new Uint8Array(256):[],te=0;te<256;++te)X[te]=B(te);function se(he,xe){var me=X[he&255];return xe<=8?me>>>8-xe:(me=me<<8|X[he>>8&255],xe<=16?me>>>16-xe:(me=me<<8|X[he>>16&255],me>>>24-xe))}function ce(he,xe){var me=xe&7,Se=xe>>>3;return(he[Se]|(me<=6?0:he[Se+1]<<8))>>>me&3}function ue(he,xe){var me=xe&7,Se=xe>>>3;return(he[Se]|(me<=5?0:he[Se+1]<<8))>>>me&7}function oe(he,xe){var me=xe&7,Se=xe>>>3;return(he[Se]|(me<=4?0:he[Se+1]<<8))>>>me&15}function le(he,xe){var me=xe&7,Se=xe>>>3;return(he[Se]|(me<=3?0:he[Se+1]<<8))>>>me&31}function pe(he,xe){var me=xe&7,Se=xe>>>3;return(he[Se]|(me<=1?0:he[Se+1]<<8))>>>me&127}function ye(he,xe,me){var Se=xe&7,ke=xe>>>3,Te=(1<<me)-1,Ge=he[ke]>>>Se;return me<8-Se||(Ge|=he[ke+1]<<8-Se,me<16-Se)||(Ge|=he[ke+2]<<16-Se,me<24-Se)||(Ge|=he[ke+3]<<24-Se),Ge&Te}function be(he,xe,me){var Se=xe&7,ke=xe>>>3;return Se<=5?he[ke]|=(me&7)<<Se:(he[ke]|=me<<Se&255,he[ke+1]=(me&7)>>8-Se),xe+3}function Ie(he,xe,me){var Se=xe&7,ke=xe>>>3;return me=(me&1)<<Se,he[ke]|=me,xe+1}function Oe(he,xe,me){var Se=xe&7,ke=xe>>>3;return me<<=Se,he[ke]|=me&255,me>>>=8,he[ke+1]=me,xe+8}function Me(he,xe,me){var Se=xe&7,ke=xe>>>3;return me<<=Se,he[ke]|=me&255,me>>>=8,he[ke+1]=me&255,he[ke+2]=me>>>8,xe+16}function Re(he,xe){var me=he.length,Se=2*me>xe?2*me:xe+5,ke=0;if(me>=xe)return he;if(En){var Te=lM(Se);if(he.copy)he.copy(Te);else for(;ke<he.length;++ke)Te[ke]=he[ke];return Te}else if(F){var Ge=new Uint8Array(Se);if(Ge.set)Ge.set(he);else for(;ke<me;++ke)Ge[ke]=he[ke];return Ge}return he.length=Se,he}function He(he){for(var xe=new Array(he),me=0;me<he;++me)xe[me]=0;return xe}function qe(he,xe,me){var Se=1,ke=0,Te=0,Ge=0,nt=0,Ke=he.length,it=F?new Uint16Array(32):He(32);for(Te=0;Te<32;++Te)it[Te]=0;for(Te=Ke;Te<me;++Te)he[Te]=0;Ke=he.length;var st=F?new Uint16Array(Ke):He(Ke);for(Te=0;Te<Ke;++Te)it[ke=he[Te]]++,Se<ke&&(Se=ke),st[Te]=0;for(it[0]=0,Te=1;Te<=Se;++Te)it[Te+16]=nt=nt+it[Te-1]<<1;for(Te=0;Te<Ke;++Te)nt=he[Te],nt!=0&&(st[Te]=it[nt+16]++);var Mt=0;for(Te=0;Te<Ke;++Te)if(Mt=he[Te],Mt!=0)for(nt=se(st[Te],Se)>>Se-Mt,Ge=(1<<Se+4-Mt)-1;Ge>=0;--Ge)xe[nt|Ge<<Mt]=Mt&15|Te<<4;return Se}var ct=F?new Uint16Array(512):He(512),ft=F?new Uint16Array(32):He(32);if(!F){for(var St=0;St<512;++St)ct[St]=0;for(St=0;St<32;++St)ft[St]=0}(function(){for(var he=[],xe=0;xe<32;xe++)he.push(5);qe(he,ft,32);var me=[];for(xe=0;xe<=143;xe++)me.push(8);for(;xe<=255;xe++)me.push(9);for(;xe<=279;xe++)me.push(7);for(;xe<=287;xe++)me.push(8);qe(me,ct,288)})();var Rt=(function(){for(var xe=F?new Uint8Array(32768):[],me=0,Se=0;me<ee.length-1;++me)for(;Se<ee[me+1];++Se)xe[Se]=me;for(;Se<32768;++Se)xe[Se]=29;var ke=F?new Uint8Array(259):[];for(me=0,Se=0;me<V.length-1;++me)for(;Se<V[me+1];++Se)ke[Se]=me;function Te(nt,Ke){for(var it=0;it<nt.length;){var st=Math.min(65535,nt.length-it),Mt=it+st==nt.length;for(Ke.write_shift(1,+Mt),Ke.write_shift(2,st),Ke.write_shift(2,~st&65535);st-- >0;)Ke[Ke.l++]=nt[it++]}return Ke.l}function Ge(nt,Ke){for(var it=0,st=0,Mt=F?new Uint16Array(32768):[];st<nt.length;){var $t=Math.min(65535,nt.length-st);if($t<10){for(it=be(Ke,it,+(st+$t==nt.length)),it&7&&(it+=8-(it&7)),Ke.l=it/8|0,Ke.write_shift(2,$t),Ke.write_shift(2,~$t&65535);$t-- >0;)Ke[Ke.l++]=nt[st++];it=Ke.l*8;continue}it=be(Ke,it,+(st+$t==nt.length)+2);for(var er=0;$t-- >0;){var je=nt[st];er=(er<<5^je)&32767;var Le=-1,vt=0;if((Le=Mt[er])&&(Le|=st&-32768,Le>st&&(Le-=32768),Le<st))for(;nt[Le+vt]==nt[st+vt]&&vt<250;)++vt;if(vt>2){je=ke[vt],je<=22?it=Oe(Ke,it,X[je+1]>>1)-1:(Oe(Ke,it,3),it+=5,Oe(Ke,it,X[je-23]>>5),it+=3);var Et=je<8?0:je-4>>2;Et>0&&(Me(Ke,it,vt-V[je]),it+=Et),je=xe[st-Le],it=Oe(Ke,it,X[je]>>3),it-=3;var Qt=je<4?0:je-2>>1;Qt>0&&(Me(Ke,it,st-Le-ee[je]),it+=Qt);for(var Ut=0;Ut<vt;++Ut)Mt[er]=st&32767,er=(er<<5^nt[st])&32767,++st;$t-=vt-1}else je<=143?je=je+48:it=Ie(Ke,it,1),it=Oe(Ke,it,X[je]),Mt[er]=st&32767,++st}it=Oe(Ke,it,0)-1}return Ke.l=(it+7)/8|0,Ke.l}return function(Ke,it){return Ke.length<8?Te(Ke,it):Ge(Ke,it)}})();function Ft(he){var xe=xt(50+Math.floor(he.length*1.1)),me=Rt(he,xe);return xe.slice(0,me)}var ot=F?new Uint16Array(32768):He(32768),Kt=F?new Uint16Array(32768):He(32768),Pt=F?new Uint16Array(128):He(128),Ee=1,We=1;function ut(he,xe){var me=le(he,xe)+257;xe+=5;var Se=le(he,xe)+1;xe+=5;var ke=oe(he,xe)+4;xe+=4;for(var Te=0,Ge=F?new Uint8Array(19):He(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ke=1,it=F?new Uint8Array(8):He(8),st=F?new Uint8Array(8):He(8),Mt=Ge.length,$t=0;$t<ke;++$t)Ge[Z[$t]]=Te=ue(he,xe),Ke<Te&&(Ke=Te),it[Te]++,xe+=3;var er=0;for(it[0]=0,$t=1;$t<=Ke;++$t)st[$t]=er=er+it[$t-1]<<1;for($t=0;$t<Mt;++$t)(er=Ge[$t])!=0&&(nt[$t]=st[er]++);var je=0;for($t=0;$t<Mt;++$t)if(je=Ge[$t],je!=0){er=X[nt[$t]]>>8-je;for(var Le=(1<<7-je)-1;Le>=0;--Le)Pt[er|Le<<je]=je&7|$t<<3}var vt=[];for(Ke=1;vt.length<me+Se;)switch(er=Pt[pe(he,xe)],xe+=er&7,er>>>=3){case 16:for(Te=3+ce(he,xe),xe+=2,er=vt[vt.length-1];Te-- >0;)vt.push(er);break;case 17:for(Te=3+ue(he,xe),xe+=3;Te-- >0;)vt.push(0);break;case 18:for(Te=11+pe(he,xe),xe+=7;Te-- >0;)vt.push(0);break;default:vt.push(er),Ke<er&&(Ke=er);break}var Et=vt.slice(0,me),Qt=vt.slice(me);for($t=me;$t<286;++$t)Et[$t]=0;for($t=Se;$t<30;++$t)Qt[$t]=0;return Ee=qe(Et,ot,286),We=qe(Qt,Kt,30),xe}function wt(he,xe){if(he[0]==3&&!(he[1]&3))return[Bh(xe),2];for(var me=0,Se=0,ke=lM(xe||1<<18),Te=0,Ge=ke.length>>>0,nt=0,Ke=0;(Se&1)==0;){if(Se=ue(he,me),me+=3,Se>>>1)Se>>1==1?(nt=9,Ke=5):(me=ut(he,me),nt=Ee,Ke=We);else{me&7&&(me+=8-(me&7));var it=he[me>>>3]|he[(me>>>3)+1]<<8;if(me+=32,it>0)for(!xe&&Ge<Te+it&&(ke=Re(ke,Te+it),Ge=ke.length);it-- >0;)ke[Te++]=he[me>>>3],me+=8;continue}for(;;){!xe&&Ge<Te+32767&&(ke=Re(ke,Te+32767),Ge=ke.length);var st=ye(he,me,nt),Mt=Se>>>1==1?ct[st]:ot[st];if(me+=Mt&15,Mt>>>=4,(Mt>>>8&255)===0)ke[Te++]=Mt;else{if(Mt==256)break;Mt-=257;var $t=Mt<8?0:Mt-4>>2;$t>5&&($t=0);var er=Te+V[Mt];$t>0&&(er+=ye(he,me,$t),me+=$t),st=ye(he,me,Ke),Mt=Se>>>1==1?ft[st]:Kt[st],me+=Mt&15,Mt>>>=4;var je=Mt<4?0:Mt-2>>1,Le=ee[Mt];for(je>0&&(Le+=ye(he,me,je),me+=je),!xe&&Ge<er&&(ke=Re(ke,er+100),Ge=ke.length);Te<er;)ke[Te]=ke[Te-Le],++Te}}}return xe?[ke,me+7>>>3]:[ke.slice(0,Te),me+7>>>3]}function Bt(he,xe){var me=he.slice(he.l||0),Se=wt(me,xe);return he.l+=Se[1],Se[0]}function dr(he,xe){if(he)typeof console<"u"&&console.error(xe);else throw new Error(xe)}function Xt(he,xe){var me=he;zs(me,0);var Se=[],ke=[],Te={FileIndex:Se,FullPaths:ke};A(Te,{root:xe.root});for(var Ge=me.length-4;(me[Ge]!=80||me[Ge+1]!=75||me[Ge+2]!=5||me[Ge+3]!=6)&&Ge>=0;)--Ge;me.l=Ge+4,me.l+=4;var nt=me.read_shift(2);me.l+=6;var Ke=me.read_shift(4);for(me.l=Ke,Ge=0;Ge<nt;++Ge){me.l+=20;var it=me.read_shift(4),st=me.read_shift(4),Mt=me.read_shift(2),$t=me.read_shift(2),er=me.read_shift(2);me.l+=8;var je=me.read_shift(4),Le=o(me.slice(me.l+Mt,me.l+Mt+$t));me.l+=Mt+$t+er;var vt=me.l;me.l=je+4,Le&&Le[1]&&((Le[1]||{}).usz&&(st=Le[1].usz),(Le[1]||{}).csz&&(it=Le[1].csz)),pr(me,it,st,Te,Le),me.l=vt}return Te}function pr(he,xe,me,Se,ke){he.l+=2;var Te=he.read_shift(2),Ge=he.read_shift(2),nt=s(he);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var Ke=he.read_shift(4),it=he.read_shift(4),st=he.read_shift(4),Mt=he.read_shift(2),$t=he.read_shift(2),er="",je=0;je<Mt;++je)er+=String.fromCharCode(he[he.l++]);if($t){var Le=o(he.slice(he.l,he.l+$t));(Le[21589]||{}).mt&&(nt=Le[21589].mt),(Le[1]||{}).usz&&(st=Le[1].usz),(Le[1]||{}).csz&&(it=Le[1].csz),ke&&((ke[21589]||{}).mt&&(nt=ke[21589].mt),(ke[1]||{}).usz&&(st=ke[1].usz),(ke[1]||{}).csz&&(it=ke[1].csz))}he.l+=$t;var vt=he.slice(he.l,he.l+it);switch(Ge){case 8:vt=K(he,st);break;case 0:he.l+=it;break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var Et=!1;Te&8&&(Ke=he.read_shift(4),Ke==134695760&&(Ke=he.read_shift(4),Et=!0),it=he.read_shift(4),st=he.read_shift(4)),it!=xe&&dr(Et,"Bad compressed size: "+xe+" != "+it),st!=me&&dr(Et,"Bad uncompressed size: "+me+" != "+st),Wt(Se,er,vt,{unsafe:!0,mt:nt})}function vr(he,xe){var me=xe||{},Se=[],ke=[],Te=xt(1),Ge=me.compression?8:0,nt=0,Ke=0,it=0,st=0,Mt=0,$t=he.FullPaths[0],er=$t,je=he.FileIndex[0],Le=[],vt=0;for(Ke=1;Ke<he.FullPaths.length;++Ke)if(er=he.FullPaths[Ke].slice($t.length),je=he.FileIndex[Ke],!(!je.size||!je.content||Array.isArray(je.content)&&je.content.length==0||er=="Sh33tJ5")){var Et=st,Qt=xt(er.length);for(it=0;it<er.length;++it)Qt.write_shift(1,er.charCodeAt(it)&127);Qt=Qt.slice(0,Qt.l),Le[Mt]=typeof je.content=="string"?gM.bstr(je.content,0):gM.buf(je.content,0);var Ut=typeof je.content=="string"?Lo(je.content):je.content;Ge==8&&(Ut=Y(Ut)),Te=xt(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,nt),Te.write_shift(2,Ge),je.mt?i(Te,je.mt):Te.write_shift(4,0),Te.write_shift(-4,Le[Mt]),Te.write_shift(4,Ut.length),Te.write_shift(4,je.content.length),Te.write_shift(2,Qt.length),Te.write_shift(2,0),st+=Te.length,Se.push(Te),st+=Qt.length,Se.push(Qt),st+=Ut.length,Se.push(Ut),Te=xt(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,nt),Te.write_shift(2,Ge),Te.write_shift(4,0),Te.write_shift(-4,Le[Mt]),Te.write_shift(4,Ut.length),Te.write_shift(4,je.content.length),Te.write_shift(2,Qt.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,Et),vt+=Te.l,ke.push(Te),vt+=Qt.length,ke.push(Qt),++Mt}return Te=xt(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,Mt),Te.write_shift(2,Mt),Te.write_shift(4,vt),Te.write_shift(4,st),Te.write_shift(2,0),Ya([Ya(Se),Ya(ke),Te])}var rr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Zt(he,xe){if(he.ctype)return he.ctype;var me=he.name||"",Se=me.match(/\.([^\.]+)$/);return Se&&rr[Se[1]]||xe&&(Se=(me=xe).match(/[\.\\]([^\.\\])+$/),Se&&rr[Se[1]])?rr[Se[1]]:"application/octet-stream"}function lr(he){for(var xe=Qb(he),me=[],Se=0;Se<xe.length;Se+=76)me.push(xe.slice(Se,Se+76));return me.join(`\r
`)+`\r
`}function fr(he){var xe=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(it){var st=it.charCodeAt(0).toString(16).toUpperCase();return"="+(st.length==1?"0"+st:st)});xe=xe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),xe.charAt(0)==`
`&&(xe="=0D"+xe.slice(1)),xe=xe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var me=[],Se=xe.split(`\r
`),ke=0;ke<Se.length;++ke){var Te=Se[ke];if(Te.length==0){me.push("");continue}for(var Ge=0;Ge<Te.length;){var nt=76,Ke=Te.slice(Ge,Ge+nt);Ke.charAt(nt-1)=="="?nt--:Ke.charAt(nt-2)=="="?nt-=2:Ke.charAt(nt-3)=="="&&(nt-=3),Ke=Te.slice(Ge,Ge+nt),Ge+=nt,Ge<Te.length&&(Ke+="="),me.push(Ke)}}return me.join(`\r
`)}function xr(he){for(var xe=[],me=0;me<he.length;++me){for(var Se=he[me];me<=he.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+he[++me];xe.push(Se)}for(var ke=0;ke<xe.length;++ke)xe[ke]=xe[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return Lo(xe.join(`\r
`))}function Ue(he,xe,me){for(var Se="",ke="",Te="",Ge,nt=0;nt<10;++nt){var Ke=xe[nt];if(!Ke||Ke.match(/^\s*$/))break;var it=Ke.match(/^([^:]*?):\s*([^\s].*)$/);if(it)switch(it[1].toLowerCase()){case"content-location":Se=it[2].trim();break;case"content-type":Te=it[2].trim();break;case"content-transfer-encoding":ke=it[2].trim();break}}switch(++nt,ke.toLowerCase()){case"base64":Ge=Lo(yf(xe.slice(nt).join("")));break;case"quoted-printable":Ge=xr(xe.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var st=Wt(he,Se.slice(me.length),Ge,{unsafe:!0});Te&&(st.ctype=Te)}function et(he,xe){if(P(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var me=xe&&xe.root||"",Se=(En&&Buffer.isBuffer(he)?he.toString("binary"):P(he)).split(`\r
`),ke=0,Te="";for(ke=0;ke<Se.length;++ke)if(Te=Se[ke],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),me||(me=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,me.length)!=me))for(;me.length>0&&(me=me.slice(0,me.length-1),me=me.slice(0,me.lastIndexOf("/")+1),Te.slice(0,me.length)!=me););var Ge=(Se[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var nt="--"+(Ge[1]||""),Ke=[],it=[],st={FileIndex:Ke,FullPaths:it};A(st);var Mt,$t=0;for(ke=0;ke<Se.length;++ke){var er=Se[ke];er!==nt&&er!==nt+"--"||($t++&&Ue(st,Se.slice(Mt,ke),me),Mt=ke)}return st}function ht(he,xe){var me=xe||{},Se=me.boundary||"SheetJS";Se="------="+Se;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],Te=he.FullPaths[0],Ge=Te,nt=he.FileIndex[0],Ke=1;Ke<he.FullPaths.length;++Ke)if(Ge=he.FullPaths[Ke].slice(Te.length),nt=he.FileIndex[Ke],!(!nt.size||!nt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vt){return"_x"+vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vt){return"_u"+vt.charCodeAt(0).toString(16)+"_"});for(var it=nt.content,st=En&&Buffer.isBuffer(it)?it.toString("binary"):P(it),Mt=0,$t=Math.min(1024,st.length),er=0,je=0;je<=$t;++je)(er=st.charCodeAt(je))>=32&&er<128&&++Mt;var Le=Mt>=$t*4/5;ke.push(Se),ke.push("Content-Location: "+(me.root||"file:///C:/SheetJS/")+Ge),ke.push("Content-Transfer-Encoding: "+(Le?"quoted-printable":"base64")),ke.push("Content-Type: "+Zt(nt,Ge)),ke.push(""),ke.push(Le?fr(st):lr(st))}return ke.push(Se+`--\r
`),ke.join(`\r
`)}function kt(he){var xe={};return A(xe,he),xe}function Wt(he,xe,me,Se){var ke=Se&&Se.unsafe;ke||A(he);var Te=!ke&&Kn.find(he,xe);if(!Te){var Ge=he.FullPaths[0];xe.slice(0,Ge.length)==Ge?Ge=xe:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+xe).replace("//","/")),Te={name:a(xe),type:2},he.FileIndex.push(Te),he.FullPaths.push(Ge),ke||Kn.utils.cfb_gc(he)}return Te.content=me,Te.size=me?me.length:0,Se&&(Se.CLSID&&(Te.clsid=Se.CLSID),Se.mt&&(Te.mt=Se.mt),Se.ct&&(Te.ct=Se.ct)),Te}function Be(he,xe){A(he);var me=Kn.find(he,xe);if(me){for(var Se=0;Se<he.FileIndex.length;++Se)if(he.FileIndex[Se]==me)return he.FileIndex.splice(Se,1),he.FullPaths.splice(Se,1),!0}return!1}function Ve(he,xe,me){A(he);var Se=Kn.find(he,xe);if(Se){for(var ke=0;ke<he.FileIndex.length;++ke)if(he.FileIndex[ke]==Se)return he.FileIndex[ke].name=a(me),he.FullPaths[ke]=me,!0}return!1}function pt(he){M(he,!0)}return t.find=U,t.read=I,t.parse=u,t.write=q,t.writeFile=k,t.utils={cfb_new:kt,cfb_add:Wt,cfb_del:Be,cfb_mov:Ve,cfb_gc:pt,ReadShift:Pg,CheckField:lq,prep_blob:zs,bconcat:Ya,use_zlib:L,_deflateRaw:Ft,_inflateRaw:Bt,consts:E},t})(),xme;function yM(r){return typeof r=="string"?h2(r):Array.isArray(r)?Vpe(r):r}function Ky(r,t,e){if(typeof Deno<"u"){if(e&&typeof t=="string")switch(e){case"utf8":t=new TextEncoder(e).encode(t);break;case"binary":t=h2(t);break;default:throw new Error("Unsupported encoding "+e)}return Deno.writeFileSync(r,t)}var n=e=="utf8"?Ey(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var a=new Blob([yM(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,r);if(typeof saveAs<"u")return saveAs(a,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:r,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=r,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}else if(typeof URL<"u"&&!URL.createObjectURL&&typeof chrome=="object"){var o="data:application/octet-stream;base64,"+Hpe(new Uint8Array(yM(n)));return chrome.downloads.download({url:o,filename:r,saveAs:!0})}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(r);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=$h(t)),l.write(t),l.close(),t}catch(c){if(!c.message||c.message.indexOf("onstruct")==-1)throw c}throw new Error("cannot save file "+r)}function Ja(r){for(var t=Object.keys(r),e=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(r,t[n])&&e.push(t[n]);return e}function vM(r,t){for(var e=[],n=Ja(r),a=0;a!==n.length;++a)e[r[n[a]][t]]==null&&(e[r[n[a]][t]]=n[a]);return e}function Mj(r){for(var t=[],e=Ja(r),n=0;n!==e.length;++n)t[r[e[n]]]=e[n];return t}function g2(r){for(var t=[],e=Ja(r),n=0;n!==e.length;++n)t[r[e[n]]]=parseInt(e[n],10);return t}function wme(r){for(var t=[],e=Ja(r),n=0;n!==e.length;++n)t[r[e[n]]]==null&&(t[r[e[n]]]=[]),t[r[e[n]]].push(e[n]);return t}var VU=Date.UTC(1899,11,30,0,0,0),_me=Date.UTC(1899,11,31,0,0,0),Sme=Date.UTC(1904,0,1,0,0,0);function es(r,t){var e=r.getTime(),n=(e-VU)/(1440*60*1e3);return t?(n-=1462,n<-1402?n-1:n):n<60?n-1:n}function mp(r){if(r>=60&&r<61)return r;var t=new Date;return t.setTime((r>60?r:r+1)*24*60*60*1e3+VU),t}var Nme=/^(\d+):(\d+)(:\d+)?(\.\d+)?$/,jme=/^(\d+)-(\d+)-(\d+)$/,GU=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)?(\.\d+)?$/;function vo(r,t){if(r instanceof Date)return r;var e=r.match(Nme);if(e)return new Date((t?Sme:_me)+((parseInt(e[1],10)*60+parseInt(e[2],10))*60+(e[3]?parseInt(e[3].slice(1),10):0))*1e3+(e[4]?parseInt((e[4]+"000").slice(1,4),10):0));if(e=r.match(jme),e)return new Date(Date.UTC(+e[1],+e[2]-1,+e[3],0,0,0,0));if(e=r.match(GU),e)return new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4],+e[5],e[6]&&parseInt(e[6].slice(1),10)||0,e[7]&&parseInt((e[7]+"0000").slice(1,4),10)||0));var n=new Date(r);return n}function Rj(r,t){if(En&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var e={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(i){return e[i]||i})}catch{}var n=[],a=0;try{for(a=0;a<r.length-65536;a+=65536)n.push(String.fromCharCode.apply(0,r.slice(a,a+65536)));n.push(String.fromCharCode.apply(0,r.slice(a)))}catch{try{for(;a<r.length-16384;a+=16384)n.push(String.fromCharCode.apply(0,r.slice(a,a+16384)));n.push(String.fromCharCode.apply(0,r.slice(a)))}catch{for(;a!=r.length;++a)n.push(String.fromCharCode(r[a]))}}return n.join("")}function Es(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=Es(r[e]));return t}function ma(r,t){for(var e="";e.length<t;)e+=r;return e}function Vu(r){var t=Number(r);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(r))return t;var e=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return e*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(]([^()]*)[)]/,function(a,i){return e=-e,i}),!isNaN(t=Number(n)))?t/e:t}var kme=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/,Eme=/^([01]?\d|2[0-3])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))$/,Ame=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)(\.\d+)?[Z]?$/,Tme=new Date("6/9/69 00:00 UTC").valueOf()==-177984e5;function Cme(r){return r[2]?r[3]?r[4]?new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),+r[2],+r[4],parseFloat(r[3])*1e3)):new Date(Date.UTC(1899,11,31,r[7]=="p"?12:0,+r[1],+r[2],parseFloat(r[3])*1e3)):r[5]?new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),+r[2],+r[5],r[6]?parseFloat(r[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),+r[2],0,0)):new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),0,0,0))}function Pme(r){return r[2]?r[3]?r[4]?new Date(Date.UTC(1899,11,31,+r[1],+r[2],+r[4],parseFloat(r[3])*1e3)):new Date(Date.UTC(1899,11,31,0,+r[1],+r[2],parseFloat(r[3])*1e3)):r[5]?new Date(Date.UTC(1899,11,31,+r[1],+r[2],+r[5],r[6]?parseFloat(r[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+r[1],+r[2],0,0)):new Date(Date.UTC(1899,11,31,+r[1],0,0,0))}var Ome=["january","february","march","april","may","june","july","august","september","october","november","december"];function ix(r){if(Ame.test(r))return r.indexOf("Z")==-1?y2(new Date(r)):new Date(r);var t=r.toLowerCase(),e=t.replace(/\s+/g," ").trim(),n=e.match(kme);if(n)return Cme(n);if(n=e.match(Eme),n)return Pme(n);if(n=e.match(GU),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],n[6]&&parseInt(n[6].slice(1),10)||0,n[7]&&parseInt((n[7]+"0000").slice(1,4),10)||0));var a=new Date(Tme&&r.indexOf("UTC")==-1?r+" UTC":r),i=new Date(NaN),s=a.getYear();a.getMonth();var o=a.getDate();if(isNaN(o))return i;if(t.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(t=t.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),t.length>3&&Ome.indexOf(t)==-1)return i}else if(t.replace(/[ap]m?/,"").match(/[a-z]/))return i;return s<0||s>8099||r.match(/[^-0-9:,\/\\\ ]/)?i:a}function nm(r){return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}function y2(r){return new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))}function Zr(r,t,e){if(r.FullPaths){if(Array.isArray(e)&&typeof e[0]=="string"&&(e=e.join("")),typeof e=="string"){var n;return En?n=eu(e):n=Gpe(e),Kn.utils.cfb_add(r,t,n)}Kn.utils.cfb_add(r,t,e)}else r.file(t,e)}function Fj(){return Kn.utils.cfb_new()}var ei=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ime={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Dj=Mj(Ime),Lj=/[&<>'"]/g,Mme=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function en(r){var t=r+"";return t.replace(Lj,function(e){return Dj[e]}).replace(Mme,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function bM(r){return en(r).replace(/ /g,"_x0020_")}var KU=/[\u0000-\u001f]/g;function bS(r){var t=r+"";return t.replace(Lj,function(e){return Dj[e]}).replace(/\n/g,"<br/>").replace(KU,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Rme(r){var t=r+"";return t.replace(Lj,function(e){return Dj[e]}).replace(KU,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}function Fme(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function Dme(r){switch(r){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function xS(r){for(var t="",e=0,n=0,a=0,i=0,s=0,o=0;e<r.length;){if(n=r.charCodeAt(e++),n<128){t+=String.fromCharCode(n);continue}if(a=r.charCodeAt(e++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=r.charCodeAt(e++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=r.charCodeAt(e++),o=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function xM(r){var t=Bh(2*r.length),e,n,a=1,i=0,s=0,o;for(n=0;n<r.length;n+=a)a=1,(o=r.charCodeAt(n))<128?e=o:o<224?(e=(o&31)*64+(r.charCodeAt(n+1)&63),a=2):o<240?(e=(o&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),a=3):(a=4,e=(o&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),e-=65536,s=55296+(e>>>10&1023),e=56320+(e&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=e%256,t[i++]=e>>>8;return t.slice(0,i).toString("ucs2")}function wM(r){return eu(r,"binary").toString("utf8")}var dv="foo bar baz",gp=En&&(wM(dv)==xS(dv)&&wM||xM(dv)==xS(dv)&&xM)||xS,Ey=En?function(r){return eu(r,"utf8").toString("binary")}:function(r){for(var t=[],e=0,n=0,a=0;e<r.length;)switch(n=r.charCodeAt(e++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=r.charCodeAt(e++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Lme=(function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(e){for(var n=e.replace(/^[\t\n\r ]+/,"").replace(/(^|[^\t\n\r ])[\t\n\r ]+$/,"$1").replace(/>\s+/g,">").replace(/\b\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^<>]*>/g,""),a=0;a<r.length;++a)n=n.replace(r[a][0],r[a][1]);return n}})(),XU=/(^\s|\s$|\n)/;function Ji(r,t){return"<"+r+(t.match(XU)?' xml:space="preserve"':"")+">"+t+"</"+r+">"}function Ay(r){return Ja(r).map(function(t){return" "+t+'="'+r[t]+'"'}).join("")}function tr(r,t,e){return"<"+r+(e!=null?Ay(e):"")+(t!=null?(t.match(XU)?' xml:space="preserve"':"")+">"+t+"</"+r:"/")+">"}function U8(r,t){try{return r.toISOString().replace(/\.\d*/,"")}catch(e){if(t)throw e}return""}function Bme(r,t){switch(typeof r){case"string":var e=tr("vt:lpwstr",en(r));return e=e.replace(/&quot;/g,"_x0022_"),e;case"number":return tr((r|0)==r?"vt:i4":"vt:r8",en(String(r)));case"boolean":return tr("vt:bool",r?"true":"false")}if(r instanceof Date)return tr("vt:filetime",U8(r));throw new Error("Unable to serialize "+r)}var Ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},vm=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Bo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function $me(r,t){for(var e=1-2*(r[t+7]>>>7),n=((r[t+7]&127)<<4)+(r[t+6]>>>4&15),a=r[t+6]&15,i=5;i>=0;--i)a=a*256+r[t+i];return n==2047?a==0?e*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),e*Math.pow(2,n-52)*a)}function Ume(r,t,e){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)r[e+o]=i&255;r[e+6]=(a&15)<<4|i&15,r[e+7]=a>>4|n}var _M=function(r){for(var t=[],e=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var a=0,i=r[0][n].length;a<i;a+=e)t.push.apply(t,r[0][n].slice(a,a+e));return t},SM=En?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(t){return Buffer.isBuffer(t)?t:eu(t)})):_M(r)}:_M,NM=function(r,t,e){for(var n=[],a=t;a<e;a+=2)n.push(String.fromCharCode(vg(r,a)));return n.join("").replace(Cg,"")},Bj=En?function(r,t,e){return!Buffer.isBuffer(r)||!ex?NM(r,t,e):r.toString("utf16le",t,e).replace(Cg,"")}:NM,jM=function(r,t,e){for(var n=[],a=t;a<t+e;++a)n.push(("0"+r[a].toString(16)).slice(-2));return n.join("")},YU=En?function(r,t,e){return Buffer.isBuffer(r)?r.toString("hex",t,t+e):jM(r,t,e)}:jM,kM=function(r,t,e){for(var n=[],a=t;a<e;a++)n.push(String.fromCharCode(G0(r,a)));return n.join("")},Xy=En?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf8",e,n):kM(t,e,n)}:kM,JU=function(r,t){var e=$o(r,t);return e>0?Xy(r,t+4,t+4+e-1):""},ZU=JU,QU=function(r,t){var e=$o(r,t);return e>0?Xy(r,t+4,t+4+e-1):""},eq=QU,tq=function(r,t){var e=2*$o(r,t);return e>0?Xy(r,t+4,t+4+e-1):""},rq=tq,nq=function(t,e){var n=$o(t,e);return n>0?Bj(t,e+4,e+4+n):""},aq=nq,iq=function(r,t){var e=$o(r,t);return e>0?Xy(r,t+4,t+4+e):""},sq=iq,oq=function(r,t){return $me(r,t)},sx=oq,$j=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};En&&(ZU=function(t,e){if(!Buffer.isBuffer(t))return JU(t,e);var n=t.readUInt32LE(e);return n>0?t.toString("utf8",e+4,e+4+n-1):""},eq=function(t,e){if(!Buffer.isBuffer(t))return QU(t,e);var n=t.readUInt32LE(e);return n>0?t.toString("utf8",e+4,e+4+n-1):""},rq=function(t,e){if(!Buffer.isBuffer(t)||!ex)return tq(t,e);var n=2*t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+n-1)},aq=function(t,e){if(!Buffer.isBuffer(t)||!ex)return nq(t,e);var n=t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+n)},sq=function(t,e){if(!Buffer.isBuffer(t))return iq(t,e);var n=t.readUInt32LE(e);return t.toString("utf8",e+4,e+4+n)},sx=function(t,e){return Buffer.isBuffer(t)?t.readDoubleLE(e):oq(t,e)},$j=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var G0=function(r,t){return r[t]},vg=function(r,t){return r[t+1]*256+r[t]},qme=function(r,t){var e=r[t+1]*256+r[t];return e<32768?e:(65535-e+1)*-1},$o=function(r,t){return r[t+3]*(1<<24)+(r[t+2]<<16)+(r[t+1]<<8)+r[t]},vh=function(r,t){return r[t+3]<<24|r[t+2]<<16|r[t+1]<<8|r[t]},zme=function(r,t){return r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3]};function Pg(r,t){var e="",n,a,i=[],s,o,l,c;switch(t){case"dbcs":if(c=this.l,En&&Buffer.isBuffer(this)&&ex)e=this.slice(this.l,this.l+2*r).toString("utf16le");else for(l=0;l<r;++l)e+=String.fromCharCode(vg(this,c)),c+=2;r*=2;break;case"utf8":e=Xy(this,this.l,this.l+r);break;case"utf16le":r*=2,e=Bj(this,this.l,this.l+r);break;case"wstr":return Pg.call(this,r,"dbcs");case"lpstr-ansi":e=ZU(this,this.l),r=4+$o(this,this.l);break;case"lpstr-cp":e=eq(this,this.l),r=4+$o(this,this.l);break;case"lpwstr":e=rq(this,this.l),r=4+2*$o(this,this.l);break;case"lpp4":r=4+$o(this,this.l),e=aq(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+$o(this,this.l),e=sq(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,e="";(s=G0(this,this.l+r++))!==0;)i.push(cv(s));e=i.join("");break;case"_wstr":for(r=0,e="";(s=vg(this,this.l+r))!==0;)i.push(cv(s)),r+=2;r+=2,e=i.join("");break;case"dbcs-cont":for(e="",c=this.l,l=0;l<r;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=G0(this,c),this.l=c+1,o=Pg.call(this,r-l,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(cv(vg(this,c))),c+=2}e=i.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(e="",c=this.l,l=0;l!=r;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=G0(this,c),this.l=c+1,o=Pg.call(this,r-l,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(cv(G0(this,c))),c+=1}e=i.join("");break;default:switch(r){case 1:return n=G0(this,this.l),this.l++,n;case 2:return n=(t==="i"?qme:vg)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(r>0?vh:zme)(this,this.l),this.l+=4,n):(a=$o(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return r==8?a=sx(this,this.l):a=sx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;r=8;case 16:e=YU(this,this.l,r);break}}return this.l+=r,e}var Wme=function(r,t,e){r[e]=t&255,r[e+1]=t>>>8&255,r[e+2]=t>>>16&255,r[e+3]=t>>>24&255},Hme=function(r,t,e){r[e]=t&255,r[e+1]=t>>8&255,r[e+2]=t>>16&255,r[e+3]=t>>24&255},Vme=function(r,t,e){r[e]=t&255,r[e+1]=t>>>8&255};function Gme(r,t,e){var n=0,a=0;if(e==="dbcs"){for(a=0;a!=t.length;++a)Vme(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(e==="sbcs"||e=="cpstr"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(e==="hex"){for(;a<r;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(e==="utf16le"){var i=Math.min(this.l+r,this.length);for(a=0;a<Math.min(t.length,r);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Wme(this,t,this.l);break;case 8:if(n=8,e==="f"){Ume(this,t,this.l);break}case 16:break;case-4:n=4,Hme(this,t,this.l);break}return this.l+=n,this}function lq(r,t){var e=YU(this,this.l,r.length>>1);if(e!==r)throw new Error(t+"Expected "+r+" saw "+e);this.l+=r.length>>1}function zs(r,t){r.l=t,r.read_shift=Pg,r.chk=lq,r.write_shift=Gme}function Yc(r,t){r.l+=t}function xt(r){var t=Bh(r);return zs(t,0),t}function js(){var r=[],t=En?16384:2048;En&&xt(t).copy;var e=function(u){var f=xt(u);return zs(f,0),f},n=e(t),a=function(){n&&(n.l&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n)),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=e(Math.max(u+1,t)))},s=function(){return a(),Ya(r)},o=function(){return a(),r},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:s,_bufs:r,end2:o}}function Dt(r,t,e,n){var a=+t,i;if(!isNaN(a)){n||(n=e2e[a].p||(e||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=r.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&$j(e)&&r.push(e)}}function Og(r,t,e){var n=Es(r);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!e||e.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function EM(r,t,e){var n=Es(r);return n.s=Og(n.s,t.s,e),n.e=Og(n.e,t.s,e),n}function Ig(r,t){if(r.cRel&&r.c<0)for(r=Es(r);r.c<0;)r.c+=t>8?16384:256;if(r.rRel&&r.r<0)for(r=Es(r);r.r<0;)r.r+=t>8?1048576:t>5?65536:16384;var e=_a(r);return!r.cRel&&r.cRel!=null&&(e=Yme(e)),!r.rRel&&r.rRel!=null&&(e=Kme(e)),e}function wS(r,t){return r.s.r==0&&!r.s.rRel&&r.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+Bn(r.s.c)+":"+(r.e.cRel?"":"$")+Bn(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(t.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+zn(r.s.r)+":"+(r.e.rRel?"":"$")+zn(r.e.r):Ig(r.s,t.biff)+":"+Ig(r.e,t.biff)}function Uj(r){return parseInt(Xme(r),10)-1}function zn(r){return""+(r+1)}function Kme(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Xme(r){return r.replace(/\$(\d+)$/,"$1")}function qj(r){for(var t=Jme(r),e=0,n=0;n!==t.length;++n)e=26*e+t.charCodeAt(n)-64;return e-1}function Bn(r){if(r<0)throw new Error("invalid column "+r);var t="";for(++r;r;r=Math.floor((r-1)/26))t=String.fromCharCode((r-1)%26+65)+t;return t}function Yme(r){return r.replace(/^([A-Z])/,"$$$1")}function Jme(r){return r.replace(/^\$([A-Z])/,"$1")}function Zme(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ya(r){for(var t=0,e=0,n=0;n<r.length;++n){var a=r.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(e=26*e+(a-64))}return{c:e-1,r:t-1}}function _a(r){for(var t=r.c+1,e="";t;t=(t-1)/26|0)e=String.fromCharCode((t-1)%26+65)+e;return e+(r.r+1)}function Qi(r){var t=r.indexOf(":");return t==-1?{s:ya(r),e:ya(r)}:{s:ya(r.slice(0,t)),e:ya(r.slice(t+1))}}function Za(r,t){return typeof t>"u"||typeof t=="number"?Za(r.s,r.e):(typeof r!="string"&&(r=_a(r)),typeof t!="string"&&(t=_a(t)),r==t?r:r+":"+t)}function Ty(r){var t=Qi(r);return"$"+Bn(t.s.c)+"$"+zn(t.s.r)+":$"+Bn(t.e.c)+"$"+zn(t.e.r)}function Cy(r,t){if(!r&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r.replace(/'/g,"''")+"'":r}function ca(r){var t={s:{c:0,r:0},e:{c:0,r:0}},e=0,n=0,a=0,i=r.length;for(e=0;n<i&&!((a=r.charCodeAt(n)-64)<1||a>26);++n)e=26*e+a;for(t.s.c=--e,e=0;n<i&&!((a=r.charCodeAt(n)-48)<0||a>9);++n)e=10*e+a;if(t.s.r=--e,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,e=0;n!=i&&!((a=r.charCodeAt(n)-64)<1||a>26);++n)e=26*e+a;for(t.e.c=--e,e=0;n!=i&&!((a=r.charCodeAt(n)-48)<0||a>9);++n)e=10*e+a;return t.e.r=--e,t}function AM(r,t){var e=r.t=="d"&&t instanceof Date;if(r.z!=null)try{return r.w=ed(r.z,e?es(t):t)}catch{}try{return r.w=ed((r.XF||{}).numFmtId||(e?14:0),e?es(t):t)}catch{return""+t}}function td(r,t,e){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&e&&e.dateNF&&(r.z=e.dateNF),r.t=="e"?Vs[r.v]||r.v:t==null?AM(r,r.v):AM(r,t))}function bm(r,t){var e=t&&t.sheet?t.sheet:"Sheet1",n={};return n[e]=r,{SheetNames:[e],Sheets:n}}function Qme(r){var t={},e=r||{};return e.dense&&(t["!data"]=[]),t}function cq(r,t,e){var n=e||{},a=r?r["!data"]!=null:n.dense,i=r||(a?{"!data":[]}:{});a&&!i["!data"]&&(i["!data"]=[]);var s=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?ya(n.origin):n.origin;s=l.r,o=l.c}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=ca(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),s==-1&&(c.e.r=s=i["!ref"]?u.e.r+1:0)}else c.s.c=c.e.c=c.s.r=c.e.r=0;for(var f=[],h=!1,p=0;p!=t.length;++p)if(t[p]){if(!Array.isArray(t[p]))throw new Error("aoa_to_sheet expects an array of arrays");var g=s+p;a&&(i["!data"][g]||(i["!data"][g]=[]),f=i["!data"][g]);for(var y=t[p],m=0;m!=y.length;++m)if(!(typeof y[m]>"u")){var v={v:y[m],t:""},b=o+m;if(c.s.r>g&&(c.s.r=g),c.s.c>b&&(c.s.c=b),c.e.r<g&&(c.e.r=g),c.e.c<b&&(c.e.c=b),h=!0,y[m]&&typeof y[m]=="object"&&!Array.isArray(y[m])&&!(y[m]instanceof Date))v=y[m];else if(Array.isArray(v.v)&&(v.f=y[m][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(n.nullError)v.t="e",v.v=0;else if(n.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?isFinite(v.v)?v.t="n":isNaN(v.v)?(v.t="e",v.v=15):(v.t="e",v.v=7):typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=n.dateNF||la[14],n.UTC||(v.v=y2(v.v)),n.cellDates?(v.t="d",v.w=ed(v.z,es(v.v,n.date1904))):(v.t="n",v.v=es(v.v,n.date1904),v.w=ed(v.z,v.v))):v.t="s";if(a)f[b]&&f[b].z&&(v.z=f[b].z),f[b]=v;else{var x=Bn(b)+(g+1);i[x]&&i[x].z&&(v.z=i[x].z),i[x]=v}}}return h&&c.s.c<104e5&&(i["!ref"]=Za(c)),i}function xm(r,t){return cq(null,r,t)}function ege(r){return r.read_shift(4,"i")}function sc(r,t){return t||(t=xt(4)),t.write_shift(4,r),t}function ks(r){var t=r.read_shift(4);return t===0?"":r.read_shift(t,"dbcs")}function fi(r,t){var e=!1;return t==null&&(e=!0,t=xt(4+2*r.length)),t.write_shift(4,r.length),r.length>0&&t.write_shift(0,r,"dbcs"),e?t.slice(0,t.l):t}function tge(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function rge(r,t){return t||(t=xt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function zj(r,t){var e=r.l,n=r.read_shift(1),a=ks(r),i=[],s={t:a,h:a};if((n&1)!==0){for(var o=r.read_shift(4),l=0;l!=o;++l)i.push(tge(r));s.r=i}else s.r=[{ich:0,ifnt:0}];return r.l=e+t,s}function nge(r,t){var e=!1;return t==null&&(e=!0,t=xt(15+4*r.t.length)),t.write_shift(1,0),fi(r.t,t),e?t.slice(0,t.l):t}var age=zj;function ige(r,t){var e=!1;return t==null&&(e=!0,t=xt(23+4*r.t.length)),t.write_shift(1,1),fi(r.t,t),t.write_shift(4,1),rge({},t),e?t.slice(0,t.l):t}function xl(r){var t=r.read_shift(4),e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:t,iStyleRef:e}}function Qh(r,t){return t==null&&(t=xt(8)),t.write_shift(-4,r.c),t.write_shift(3,r.iStyleRef||r.s),t.write_shift(1,0),t}function e0(r){var t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:t}}function t0(r,t){return t==null&&(t=xt(4)),t.write_shift(3,r.iStyleRef||r.s),t.write_shift(1,0),t}var sge=ks,uq=fi;function v2(r){var t=r.read_shift(4);return t===0||t===4294967295?"":r.read_shift(t,"dbcs")}function Py(r,t){var e=!1;return t==null&&(e=!0,t=xt(127)),t.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&t.write_shift(0,r,"dbcs"),e?t.slice(0,t.l):t}var oge=ks,q8=v2,Wj=Py;function Hj(r){var t=r.slice(r.l,r.l+4),e=t[0]&1,n=t[0]&2;r.l+=4;var a=n===0?sx([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):vh(t,0)>>2;return e?a/100:a}function dq(r,t){t==null&&(t=xt(4));var e=0,n=0,a=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,e=1),n)t.write_shift(-4,((e?a:r)<<2)+(e+2));else throw new Error("unsupported RkNumber "+r)}function fq(r){var t={s:{},e:{}};return t.s.r=r.read_shift(4),t.e.r=r.read_shift(4),t.s.c=r.read_shift(4),t.e.c=r.read_shift(4),t}function lge(r,t){return t||(t=xt(16)),t.write_shift(4,r.s.r),t.write_shift(4,r.e.r),t.write_shift(4,r.s.c),t.write_shift(4,r.e.c),t}var r0=fq,wm=lge;function _m(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function qh(r,t){return(t||xt(8)).write_shift(8,r,"f")}function cge(r){var t={},e=r.read_shift(1),n=e>>>1,a=r.read_shift(1),i=r.read_shift(2,"i"),s=r.read_shift(1),o=r.read_shift(1),l=r.read_shift(1);switch(r.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var c=vge[a];c&&(t.rgb=$M(c));break;case 2:t.rgb=$M([s,o,l]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function ox(r,t){if(t||(t=xt(8)),!r||r.auto)return t.write_shift(4,0),t.write_shift(4,0),t;r.index!=null?(t.write_shift(1,2),t.write_shift(1,r.index)):r.theme!=null?(t.write_shift(1,6),t.write_shift(1,r.theme)):(t.write_shift(1,5),t.write_shift(1,0));var e=r.tint||0;if(e>0?e*=32767:e<0&&(e*=32768),t.write_shift(2,e),!r.rgb||r.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function uge(r){var t=r.read_shift(1);r.l++;var e={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return e}function dge(r,t){t||(t=xt(2));var e=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return t.write_shift(1,e),t.write_shift(1,0),t}var hq=2,Fo=3,fv=11,lx=19,hv=64,fge=65,hge=71,pge=4108,mge=4126,Ki=80,TM={1:{n:"CodePage",t:hq},2:{n:"Category",t:Ki},3:{n:"PresentationFormat",t:Ki},4:{n:"ByteCount",t:Fo},5:{n:"LineCount",t:Fo},6:{n:"ParagraphCount",t:Fo},7:{n:"SlideCount",t:Fo},8:{n:"NoteCount",t:Fo},9:{n:"HiddenCount",t:Fo},10:{n:"MultimediaClipCount",t:Fo},11:{n:"ScaleCrop",t:fv},12:{n:"HeadingPairs",t:pge},13:{n:"TitlesOfParts",t:mge},14:{n:"Manager",t:Ki},15:{n:"Company",t:Ki},16:{n:"LinksUpToDate",t:fv},17:{n:"CharacterCount",t:Fo},19:{n:"SharedDoc",t:fv},22:{n:"HyperlinksChanged",t:fv},23:{n:"AppVersion",t:Fo,p:"version"},24:{n:"DigSig",t:fge},26:{n:"ContentType",t:Ki},27:{n:"ContentStatus",t:Ki},28:{n:"Language",t:Ki},29:{n:"Version",t:Ki},255:{},2147483648:{n:"Locale",t:lx},2147483651:{n:"Behavior",t:lx},1919054434:{}},CM={1:{n:"CodePage",t:hq},2:{n:"Title",t:Ki},3:{n:"Subject",t:Ki},4:{n:"Author",t:Ki},5:{n:"Keywords",t:Ki},6:{n:"Comments",t:Ki},7:{n:"Template",t:Ki},8:{n:"LastAuthor",t:Ki},9:{n:"RevNumber",t:Ki},10:{n:"EditTime",t:hv},11:{n:"LastPrinted",t:hv},12:{n:"CreatedDate",t:hv},13:{n:"ModifiedDate",t:hv},14:{n:"PageCount",t:Fo},15:{n:"WordCount",t:Fo},16:{n:"CharCount",t:Fo},17:{n:"Thumbnail",t:hge},18:{n:"Application",t:Ki},19:{n:"DocSecurity",t:Fo},255:{},2147483648:{n:"Locale",t:lx},2147483651:{n:"Behavior",t:lx},1919054434:{}};function gge(r){return r.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var yge=gge([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),vge=Es(yge),Vs={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},$c={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},bge=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],xge={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},pv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function pq(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function mq(r,t,e){var n=wme(xge),a=[],i;a[a.length]=ei,a[a.length]=tr("Types",null,{xmlns:Ci.CT,"xmlns:xsd":Ci.xsd,"xmlns:xsi":Ci.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return tr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){r[c]&&r[c].length>0&&(i=r[c][0],a[a.length]=tr("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:pv[c][t.bookType]||pv[c].xlsx}))},o=function(c){(r[c]||[]).forEach(function(u){a[a.length]=tr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:pv[c][t.bookType]||pv[c].xlsx})})},l=function(c){(r[c]||[]).forEach(function(u){a[a.length]=tr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var mn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function gq(r){var t=r.lastIndexOf("/");return r.slice(0,t+1)+"_rels/"+r.slice(t+1)+".rels"}function yp(r){var t=[ei,tr("Relationships",null,{xmlns:Ci.RELS})];return Ja(r["!id"]).forEach(function(e){t[t.length]=tr("Relationship",null,r["!id"][e])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function kn(r,t,e,n,a,i){if(a||(a={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),t<0)for(t=r["!idx"];r["!id"]["rId"+t];++t);if(r["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=e,[mn.HLINK,mn.XPATH,mn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),r["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return r["!id"][a.Id]=a,r[("/"+a.Target).replace("//","/")]=a,t}function wge(r){var t=[ei];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var e=0;e<r.length;++e)t.push('  <manifest:file-entry manifest:full-path="'+r[e][0]+'" manifest:media-type="'+r[e][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function PM(r,t,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(e||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function _ge(r,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Sge(r){var t=[ei];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var e=0;e!=r.length;++e)t.push(PM(r[e][0],r[e][1])),t.push(_ge("",r[e][0]));return t.push(PM("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function yq(r,t){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Zb.version+"</meta:generator></office:meta></office:document-meta>"}var Ph=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function _S(r,t,e,n,a){a[r]!=null||t==null||t===""||(a[r]=t,t=en(t),n[n.length]=e?tr(r,t,e):Ji(r,t))}function vq(r,t){var e=t||{},n=[ei,tr("cp:coreProperties",null,{"xmlns:cp":Ci.CORE_PROPS,"xmlns:dc":Ci.dc,"xmlns:dcterms":Ci.dcterms,"xmlns:dcmitype":Ci.dcmitype,"xmlns:xsi":Ci.xsi})],a={};if(!r&&!e.Props)return n.join("");r&&(r.CreatedDate!=null&&_S("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:U8(r.CreatedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),r.ModifiedDate!=null&&_S("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:U8(r.ModifiedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=Ph.length;++i){var s=Ph[i],o=e.Props&&e.Props[s[1]]!=null?e.Props[s[1]]:r?r[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&_S(s[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var vp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],bq=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function xq(r){var t=[],e=tr;return r||(r={}),r.Application="SheetJS",t[t.length]=ei,t[t.length]=tr("Properties",null,{xmlns:Ci.EXT_PROPS,"xmlns:vt":Ci.vt}),vp.forEach(function(n){if(r[n[1]]!==void 0){var a;switch(n[2]){case"string":a=en(String(r[n[1]]));break;case"bool":a=r[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=e(n[0],a))}}),t[t.length]=e("HeadingPairs",e("vt:vector",e("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+e("vt:variant",e("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=e("TitlesOfParts",e("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+en(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function wq(r){var t=[ei,tr("Properties",null,{xmlns:Ci.CUST_PROPS,"xmlns:vt":Ci.vt})];if(!r)return t.join("");var e=1;return Ja(r).forEach(function(a){++e,t[t.length]=tr("property",Bme(r[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e,name:en(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var OM={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Nge(r,t){var e=[];return Ja(OM).map(function(n){for(var a=0;a<Ph.length;++a)if(Ph[a][1]==n)return Ph[a];for(a=0;a<vp.length;++a)if(vp[a][1]==n)return vp[a];throw n}).forEach(function(n){if(r[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:r[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),e.push(Ji(OM[n[1]]||n[1],a))}}),tr("DocumentProperties",e.join(""),{xmlns:Bo.o})}function jge(r,t){var e=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return r&&Ja(r).forEach(function(i){if(Object.prototype.hasOwnProperty.call(r,i)){for(var s=0;s<Ph.length;++s)if(i==Ph[s][1])return;for(s=0;s<vp.length;++s)if(i==vp[s][1])return;for(s=0;s<e.length;++s)if(i==e[s])return;var o=r[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(tr(bM(i),o,{"dt:dt":l}))}}),t&&Ja(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(r&&Object.prototype.hasOwnProperty.call(r,i))){var s=t[i],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),a.push(tr(bM(i),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Bo.o+'">'+a.join("")+"</"+n+">"}function kge(r){var t=typeof r=="string"?new Date(Date.parse(r)):r,e=t.getTime()/1e3+11644473600,n=e%Math.pow(2,32),a=(e-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=xt(8);return s.write_shift(4,n),s.write_shift(4,a),s}function IM(r,t){var e=xt(4),n=xt(4);switch(e.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,t);break;case 5:n=xt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=kge(t);break;case 31:case 80:for(n=xt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+t)}return Ya([e,n])}var _q=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Ege(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function MM(r,t,e){var n=xt(8),a=[],i=[],s=8,o=0,l=xt(8),c=xt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),i.push(l),a.push(c),s+=8+l.length,!t){c=xt(8),c.write_shift(4,0),a.unshift(c);var u=[xt(4)];for(u[0].write_shift(4,r.length),o=0;o<r.length;++o){var f=r[o][0];for(l=xt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Ya(u),i.unshift(l),s+=8+l.length}for(o=0;o<r.length;++o)if(!(t&&!t[r[o][0]])&&!(_q.indexOf(r[o][0])>-1||bq.indexOf(r[o][0])>-1)&&r[o][1]!=null){var h=r[o][1],p=0;if(t){p=+t[r[o][0]];var g=e[p];if(g.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}l=IM(g.t,h)}else{var m=Ege(h);m==-1&&(m=31,h=String(h)),l=IM(m,h)}i.push(l),c=xt(8),c.write_shift(4,t?p:2+o),a.push(c),s+=8+l.length}var v=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,v),v+=i[o].length;return n.write_shift(4,s),n.write_shift(4,i.length),Ya([n].concat(a).concat(i))}function RM(r,t,e,n,a,i){var s=xt(a?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,Kn.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var l=MM(r,e,n);if(o.push(l),a){var c=MM(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+l.length),o.push(c)}return Ya(o)}function Age(r,t){t||(t=xt(r));for(var e=0;e<r;++e)t.write_shift(1,0);return t}function Tge(r,t){return r.read_shift(t)===1}function xs(r,t){return t||(t=xt(2)),t.write_shift(2,+!!r),t}function Tv(r){return r.read_shift(2,"u")}function cl(r,t){return t||(t=xt(2)),t.write_shift(2,r),t}function Sq(r,t,e){return e||(e=xt(2)),e.write_shift(1,t=="e"?+r:+!!r),e.write_shift(1,t=="e"?1:0),e}function Nq(r,t,e){var n=r.read_shift(e&&e.biff>=12?2:1),a="sbcs-cont",i=Cu;if(e&&e.biff>=8&&(Cu=1200),!e||e.biff==8){var s=r.read_shift(1);s&&(a="dbcs-cont")}else e.biff==12&&(a="wstr");e.biff>=2&&e.biff<=5&&(a="cpstr");var o=n?r.read_shift(n,a):"";return Cu=i,o}function Cge(r){var t=r.t||"",e=xt(3);e.write_shift(2,t.length),e.write_shift(1,1);var n=xt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[e,n];return Ya(a)}function Pge(r,t,e){var n;if(e){if(e.biff>=2&&e.biff<=5)return r.read_shift(t,"cpstr");if(e.biff>=12)return r.read_shift(t,"dbcs-cont")}var a=r.read_shift(1);return a===0?n=r.read_shift(t,"sbcs-cont"):n=r.read_shift(t,"dbcs-cont"),n}function Oge(r,t,e){var n=r.read_shift(e&&e.biff==2?1:2);return n===0?(r.l++,""):Pge(r,n,e)}function Ige(r,t,e){if(e.biff>5)return Oge(r,t,e);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,e.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function jq(r,t,e){return e||(e=xt(3+2*r.length)),e.write_shift(2,r.length),e.write_shift(1,1),e.write_shift(31,r,"utf16le"),e}function FM(r,t){t||(t=xt(6+r.length*2)),t.write_shift(4,1+r.length);for(var e=0;e<r.length;++e)t.write_shift(2,r.charCodeAt(e));return t.write_shift(2,0),t}function Mge(r){var t=xt(512),e=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(e=0;e<s.length;++e)t.write_shift(4,s[e]);if(i==28)n=n.slice(1),FM(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),e=0;e<s.length;++e)t.write_shift(1,parseInt(s[e],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),e=0;e<o.length;++e)t.write_shift(2,o.charCodeAt(e));t.write_shift(2,0),i&8&&FM(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),e=0;e<s.length;++e)t.write_shift(1,parseInt(s[e],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),e=0;e<n.length-3*l;++e)t.write_shift(1,n.charCodeAt(e+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),e=0;e<6;++e)t.write_shift(4,0)}return t.slice(0,t.l)}function zh(r,t,e,n){return n||(n=xt(6)),n.write_shift(2,r),n.write_shift(2,t),n.write_shift(2,e||0),n}function Rge(r,t,e){var n=e.biff>8?4:2,a=r.read_shift(n),i=r.read_shift(n,"i"),s=r.read_shift(n,"i");return[a,i,s]}function Fge(r){var t=r.read_shift(2),e=r.read_shift(2),n=r.read_shift(2),a=r.read_shift(2);return{s:{c:n,r:t},e:{c:a,r:e}}}function kq(r,t){return t||(t=xt(8)),t.write_shift(2,r.s.r),t.write_shift(2,r.e.r),t.write_shift(2,r.s.c),t.write_shift(2,r.e.c),t}function Vj(r,t,e){var n=1536,a=16;switch(e.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=xt(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Dge(r,t){var e=!t||t.biff==8,n=xt(e?112:54);for(n.write_shift(t.biff==8?2:1,7),e&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(e?0:536870912));n.l<n.length;)n.write_shift(1,e?0:32);return n}function Lge(r,t){var e=!t||t.biff>=8?2:1,n=xt(8+e*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(e*r.name.length,r.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function Bge(r,t){var e=xt(8);e.write_shift(4,r.Count),e.write_shift(4,r.Unique);for(var n=[],a=0;a<r.length;++a)n[a]=Cge(r[a]);var i=Ya([e].concat(n));return i.parts=[e.length].concat(n.map(function(s){return s.length})),i}function $ge(){var r=xt(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function Uge(r){var t=xt(18),e=1718;return r&&r.RTL&&(e|=64),t.write_shift(2,e),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function qge(r,t){var e=r.name||"Arial",n=t&&t.biff==5,a=n?15+e.length:16+2*e.length,i=xt(a);return i.write_shift(2,r.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,e.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*e.length,e,n?"sbcs":"utf16le"),i}function zge(r,t,e,n){var a=xt(10);return zh(r,t,n,a),a.write_shift(4,e),a}function Wge(r,t,e,n,a){var i=!a||a.biff==8,s=xt(8+ +i+(1+i)*e.length);return zh(r,t,n,s),s.write_shift(2,e.length),i&&s.write_shift(1,1),s.write_shift((1+i)*e.length,e,i?"utf16le":"sbcs"),s}function Hge(r,t,e,n){var a=e&&e.biff==5;n||(n=xt(a?3+t.length:5+2*t.length)),n.write_shift(2,r),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function Vge(r){var t=xt(1+r.length);return t.write_shift(1,r.length),t.write_shift(r.length,r,"sbcs"),t}function Gge(r){var t=xt(3+r.length);return t.l+=2,t.write_shift(1,r.length),t.write_shift(r.length,r,"sbcs"),t}function Kge(r,t){var e=t.biff==8||!t.biff?4:2,n=xt(2*e+6);return n.write_shift(e,r.s.r),n.write_shift(e,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function DM(r,t,e,n){var a=e&&e.biff==5;n||(n=xt(a?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,t<<4));var i=0;return r.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Xge(r){var t=xt(4);return t.l+=2,t.write_shift(1,r.numFmtId),t.l++,t}function Eq(r){var t=xt(12);return t.l++,t.write_shift(1,r.numFmtId),t.l+=10,t}var Yge=Eq;function Jge(r){var t=xt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function SS(r,t,e,n,a,i){var s=xt(8);return zh(r,t,n,s),Sq(e,i,s),s}function Zge(r,t,e,n){var a=xt(14);return zh(r,t,n,a),qh(e,a),a}function Qge(r,t,e){if(e.biff<8||!(e.biff>8)&&t==r[r.l]+(r[r.l+1]==3?1:0)+1)return LM(r,t,e);for(var n=[],a=r.l+t,i=r.read_shift(e.biff>8?4:2);i--!==0;)n.push(Rge(r,e.biff>8?12:6,e));if(r.l!=a)throw new Error("Bad ExternSheet: "+r.l+" != "+a);return n}function LM(r,t,e){r[r.l+1]==3&&r[r.l]++;var n=Nq(r,t,e);return n.charCodeAt(0)==3?n.slice(1):n}function NS(r,t,e,n){var a=xt(6+(n||r.length));return a.write_shift(2,t),a.write_shift(2,e),a.write_shift(2,n||r.length),a.write_shift(r.length,r,"sbcs"),a}function eye(r){var t=xt(2+r.length*8);t.write_shift(2,r.length);for(var e=0;e<r.length;++e)kq(r[e],t);return t}function tye(r){var t=xt(24),e=ya(r[0]);t.write_shift(2,e.r),t.write_shift(2,e.r),t.write_shift(2,e.c),t.write_shift(2,e.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ya([t,Mge(r[1])])}function rye(r){var t=r[1].Tooltip,e=xt(10+2*(t.length+1));e.write_shift(2,2048);var n=ya(r[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var a=0;a<t.length;++a)e.write_shift(2,t.charCodeAt(a));return e.write_shift(2,0),e}function nye(r){return r||(r=xt(4)),r.write_shift(2,1),r.write_shift(2,1),r}function aye(r,t,e){if(!e.cellStyles)return Yc(r,t);var n=e&&e.biff>=12?4:2,a=r.read_shift(n),i=r.read_shift(n),s=r.read_shift(n),o=r.read_shift(n),l=r.read_shift(2);n==2&&(r.l+=2);var c={s:a,e:i,w:s,ixfe:o,flags:l};return(e.biff>=5||!e.biff)&&(c.level=l>>8&7),c}function iye(r,t){var e=xt(12);e.write_shift(2,t),e.write_shift(2,t),e.write_shift(2,r.width*256),e.write_shift(2,0);var n=0;return r.hidden&&(n|=1),e.write_shift(1,n),n=r.level||0,e.write_shift(1,n),e.write_shift(2,0),e}function sye(r){for(var t=xt(2*r),e=0;e<r;++e)t.write_shift(2,e+1);return t}function Yy(r,t,e,n,a){return r||(r=xt(7)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,n||0),r.write_shift(1,a||0),r.write_shift(1,0),r}function oye(r,t,e,n,a){var i=xt(15);return Yy(i,r,t,n||0,a||0),i.write_shift(8,e,"f"),i}function lye(r,t,e,n,a){var i=xt(9);return Yy(i,r,t,n||0,a||0),i.write_shift(2,e),i}var cye=(function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Mj({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function e(o,l){var c=[],u=Bh(1);switch(l.type){case"base64":u=Lo(yf(o));break;case"binary":u=Lo(o);break;case"buffer":case"array":u=o;break}zs(u,0);var f=u.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,m=521;f==2&&(y=u.read_shift(2)),u.l+=3,f!=2&&(y=u.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(m=u.read_shift(2));var v=u.read_shift(2);l.codepage,f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&r[u[u.l]],u.l+=1,u.l+=2),g&&(u.l+=36);for(var b=[],x={},S=Math.min(u.length,f==2?521:m-10-(p?264:0)),_=g?32:11;u.l<S&&u[u.l]!=13;)switch(x={},x.name=$h(u.slice(u.l,u.l+_)).replace(/[\u0000\r\n][\S\s]*$/g,""),u.l+=_,x.type=String.fromCharCode(u.read_shift(1)),f!=2&&!g&&(x.offset=u.read_shift(4)),x.len=u.read_shift(1),f==2&&(x.offset=u.read_shift(2)),x.dec=u.read_shift(1),x.name.length&&b.push(x),f!=2&&(u.l+=g?13:14),x.type){case"B":(!p||x.len!=8)&&l.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+x.type)}if(u[u.l]!==13&&(u.l=m-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=m;var I=0,A=0;for(c[0]=[],A=0;A!=b.length;++A)c[0][A]=b[A].name;for(;y-- >0;){if(u[u.l]===42){u.l+=v;continue}for(++u.l,c[++I]=[],A=0,A=0;A!=b.length;++A){var O=u.slice(u.l,u.l+b[A].len);u.l+=b[A].len,zs(O,0);var M=$h(O);switch(b[A].type){case"C":M.trim().length&&(c[I][A]=M.replace(/([^\s])\s+$/,"$1"));break;case"D":M.length===8?(c[I][A]=new Date(Date.UTC(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8),0,0,0,0)),l&&l.UTC||(c[I][A]=nm(c[I][A]))):c[I][A]=M;break;case"F":c[I][A]=parseFloat(M.trim());break;case"+":case"I":c[I][A]=g?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":c[I][A]=!0;break;case"N":case"F":c[I][A]=!1;break;case"":case"\0":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[I][A]="##MEMO##"+(g?parseInt(M.trim(),10):O.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(c[I][A]=+M||0);break;case"@":c[I][A]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":{var z=O.read_shift(4),U=O.read_shift(4);if(z==0&&U==0)break;c[I][A]=new Date((z-2440588)*864e5+U),l&&l.UTC||(c[I][A]=nm(c[I][A]))}break;case"Y":c[I][A]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[I][A]=-O.read_shift(-8,"f");break;case"B":if(p&&b[A].len==8){c[I][A]=O.read_shift(8,"f");break}case"G":case"P":O.l+=b[A].len;break;case"0":if(b[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[A].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=b,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=xm(e(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function a(o,l){try{var c=bm(n(o,l),l);return c.bookType="dbf",c}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){if(!o["!ref"])throw new Error("Cannot export empty sheet to DBF");var c=l||{},u=Cu;if(+c.codepage>=0&&ky(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var f=js(),h=V8(o,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),y=o["!cols"]||[],m=0,v=0,b=0,x=1;for(m=0;m<p.length;++m){if(((y[m]||{}).DBF||{}).name){p[m]=y[m].DBF.name,++b;continue}if(p[m]!=null){if(++b,typeof p[m]=="number"&&(p[m]=p[m].toString(10)),typeof p[m]!="string")throw new Error("DBF Invalid column name "+p[m]+" |"+typeof p[m]+"|");if(p.indexOf(p[m])!==m){for(v=0;v<1024;++v)if(p.indexOf(p[m]+"_"+v)==-1){p[m]+="_"+v;break}}}}var S=ca(o["!ref"]),_=[],I=[],A=[];for(m=0;m<=S.e.c-S.s.c;++m){var O="",M="",z=0,U=[];for(v=0;v<g.length;++v)g[v][m]!=null&&U.push(g[v][m]);if(U.length==0||p[m]==null){_[m]="?";continue}for(v=0;v<U.length;++v){switch(typeof U[v]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=U[v]instanceof Date?"D":"C";break;default:M="C"}z=Math.max(z,String(U[v]).length),O=O&&O!=M?"C":M}z>250&&(z=250),M=((y[m]||{}).DBF||{}).type,M=="C"&&y[m].DBF.len>z&&(z=y[m].DBF.len),O=="B"&&M=="N"&&(O="N",A[m]=y[m].DBF.dec,z=y[m].DBF.len),I[m]=O=="C"||M=="N"?z:i[O]||0,x+=I[m],_[m]=O}var D=f.next(32);for(D.write_shift(4,318902576),D.write_shift(4,g.length),D.write_shift(2,296+32*b),D.write_shift(2,x),m=0;m<4;++m)D.write_shift(4,0);var T=+t[Cu]||3;for(D.write_shift(4,0|T<<8),r[T]!=+c.codepage&&(c.codepage&&console.error("DBF Unsupported codepage "+Cu+", using 1252"),Cu=1252),m=0,v=0;m<p.length;++m)if(p[m]!=null){var R=f.next(32),C=(p[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,C,"sbcs"),R.write_shift(1,_[m]=="?"?"C":_[m],"sbcs"),R.write_shift(4,v),R.write_shift(1,I[m]||i[_[m]]||0),R.write_shift(1,A[m]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),v+=I[m]||i[_[m]]||0}var N=f.next(264);for(N.write_shift(4,13),m=0;m<65;++m)N.write_shift(4,0);for(m=0;m<g.length;++m){var E=f.next(x);for(E.write_shift(1,0),v=0;v<p.length;++v)if(p[v]!=null)switch(_[v]){case"L":E.write_shift(1,g[m][v]==null?63:g[m][v]?84:70);break;case"B":E.write_shift(8,g[m][v]||0,"f");break;case"N":var k="0";for(typeof g[m][v]=="number"&&(k=g[m][v].toFixed(A[v]||0)),k.length>I[v]&&(k=k.slice(0,I[v])),b=0;b<I[v]-k.length;++b)E.write_shift(1,32);E.write_shift(1,k,"sbcs");break;case"D":g[m][v]?(E.write_shift(4,("0000"+g[m][v].getFullYear()).slice(-4),"sbcs"),E.write_shift(2,("00"+(g[m][v].getMonth()+1)).slice(-2),"sbcs"),E.write_shift(2,("00"+g[m][v].getDate()).slice(-2),"sbcs")):E.write_shift(8,"00000000","sbcs");break;case"C":var P=E.l,q=String(g[m][v]!=null?g[m][v]:"").slice(0,I[v]);for(E.write_shift(1,q,"cpstr"),P+=I[v]-E.l,b=0;b<P;++b)E.write_shift(1,32);break}}return Cu=u,f.next(1).write_shift(1,26),f.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}})(),uye=(function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ja(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1").replace("{","\\{")+"|\\|)","gm");try{t=new RegExp("\x1BN("+Ja(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm")}catch{}var e=function(p,g){var y=r[g];return typeof y=="number"?oM(y):y},n=function(p,g,y){var m=g.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return m==59?p:oM(m)};r["|"]=254;var a=function(p){return p.replace(/\n/g,"\x1B :").replace(/\r/g,"\x1B =")};function i(p,g){switch(g.type){case"base64":return s(yf(p),g);case"binary":return s(p,g);case"buffer":return s(En&&Buffer.isBuffer(p)?p.toString("binary"):$h(p),g);case"array":return s(Rj(p),g)}throw new Error("Unrecognized type "+g.type)}function s(p,g){var y=p.split(/[\n\r]+/),m=-1,v=-1,b=0,x=0,S=[],_=[],I=null,A={},O=[],M=[],z=[],U=0,D,T={Workbook:{WBProps:{},Names:[]}};for(+g.codepage>=0&&ky(+g.codepage);b!==y.length;++b){U=0;var R=y[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,e),C=R.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),N=C[0],E;if(R.length>0)switch(N){case"ID":break;case"E":break;case"B":break;case"O":for(x=1;x<C.length;++x)switch(C[x].charAt(0)){case"V":{var k=parseInt(C[x].slice(1),10);k>=1&&k<=4&&(T.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(C[1].charAt(0)){case"P":_.push(R.slice(3).replace(/;;/g,";"));break}break;case"NN":{var P={Sheet:0};for(x=1;x<C.length;++x)switch(C[x].charAt(0)){case"N":P.Name=C[x].slice(1);break;case"E":P.Ref=(g&&g.sheet||"Sheet1")+"!"+zM(C[x].slice(1));break}T.Workbook.Names.push(P)}break;case"C":var q=!1,H=!1,L=!1,K=!1,Y=-1,Z=-1,V="",ee="z",B="";for(x=1;x<C.length;++x)switch(C[x].charAt(0)){case"A":B=C[x].slice(1);break;case"X":v=parseInt(C[x].slice(1),10)-1,H=!0;break;case"Y":for(m=parseInt(C[x].slice(1),10)-1,H||(v=0),D=S.length;D<=m;++D)S[D]=[];break;case"K":E=C[x].slice(1),E.charAt(0)==='"'?(E=E.slice(1,E.length-1),ee="s"):E==="TRUE"||E==="FALSE"?(E=E==="TRUE",ee="b"):E.charAt(0)=="#"&&$c[E]!=null?(ee="e",E=$c[E]):isNaN(Vu(E))||(E=Vu(E),ee="n",I!==null&&Uh(I)&&g.cellDates&&(E=mp(T.Workbook.WBProps.date1904?E+1462:E),ee=typeof E=="number"?"n":"d")),q=!0;break;case"E":K=!0,V=zM(C[x].slice(1),{r:m,c:v});break;case"S":L=!0;break;case"G":break;case"R":Y=parseInt(C[x].slice(1),10)-1;break;case"C":Z=parseInt(C[x].slice(1),10)-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+R)}if(q&&(S[m][v]?(S[m][v].t=ee,S[m][v].v=E):S[m][v]={t:ee,v:E},I&&(S[m][v].z=I),g.cellText!==!1&&I&&(S[m][v].w=ed(S[m][v].z,S[m][v].v,{date1904:T.Workbook.WBProps.date1904})),I=null),L){if(K)throw new Error("SYLK shared formula cannot have own formula");var F=Y>-1&&S[Y][Z];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");V=d1e(F[1],{r:m-Y,c:v-Z})}V&&(S[m][v]?S[m][v].f=V:S[m][v]={t:"n",f:V}),B&&(S[m][v]||(S[m][v]={t:"z"}),S[m][v].c=[{a:"SheetJSYLK",t:B}]);break;case"F":var X=0;for(x=1;x<C.length;++x)switch(C[x].charAt(0)){case"X":v=parseInt(C[x].slice(1),10)-1,++X;break;case"Y":for(m=parseInt(C[x].slice(1),10)-1,D=S.length;D<=m;++D)S[D]=[];break;case"M":U=parseInt(C[x].slice(1),10)/20;break;case"F":break;case"G":break;case"P":I=_[parseInt(C[x].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(z=C[x].slice(1).split(" "),D=parseInt(z[0],10);D<=parseInt(z[1],10);++D)U=parseInt(z[2],10),M[D-1]=U===0?{hidden:!0}:{wch:U};break;case"C":v=parseInt(C[x].slice(1),10)-1,M[v]||(M[v]={});break;case"R":m=parseInt(C[x].slice(1),10)-1,O[m]||(O[m]={}),U>0?(O[m].hpt=U,O[m].hpx=Pq(U)):U===0&&(O[m].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+R)}X<1&&(I=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+R)}}return O.length>0&&(A["!rows"]=O),M.length>0&&(A["!cols"]=M),M.forEach(function(te){Gj(te)}),g&&g.sheetRows&&(S=S.slice(0,g.sheetRows)),[S,A,T]}function o(p,g){var y=i(p,g),m=y[0],v=y[1],b=y[2],x=Es(g);x.date1904=(((b||{}).Workbook||{}).WBProps||{}).date1904;var S=xm(m,x);Ja(v).forEach(function(I){S[I]=v[I]});var _=bm(S,g);return Ja(b).forEach(function(I){_[I]=b[I]}),_.bookType="sylk",_}function l(p,g,y,m,v,b){var x="C;Y"+(y+1)+";X"+(m+1)+";K";switch(p.t){case"n":x+=isFinite(p.v)?p.v||0:Vs[isNaN(p.v)?36:7],p.f&&!p.F&&(x+=";E"+x2(p.f,{r:y,c:m}));break;case"b":x+=p.v?"TRUE":"FALSE";break;case"e":x+=p.w||Vs[p.v]||p.v;break;case"d":x+=es(vo(p.v,b),b);break;case"s":x+='"'+(p.v==null?"":String(p.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function c(p,g,y){var m="C;Y"+(g+1)+";X"+(y+1)+";A";return m+=a(p.map(function(v){return v.t}).join("")),m}function u(p,g){g.forEach(function(y,m){var v="F;W"+(m+1)+" "+(m+1)+" ";y.hidden?v+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=cx(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=ux(y.wpx)),typeof y.wch=="number"&&(v+=Math.round(y.wch))),v.charAt(v.length-1)!=" "&&p.push(v)})}function f(p,g){g.forEach(function(y,m){var v="F;";y.hidden?v+="M0;":y.hpt?v+="M"+20*y.hpt+";":y.hpx&&(v+="M"+20*dx(y.hpx)+";"),v.length>2&&p.push(v+"R"+(m+1))})}function h(p,g,y){g||(g={}),g._formats=["General"];var m=["ID;PSheetJS;N;E"],v=[],b=ca(p["!ref"]||"A1"),x,S=p["!data"]!=null,_=`\r
`,I=(((y||{}).Workbook||{}).WBProps||{}).date1904,A="General";m.push("P;PGeneral");var O=b.s.r,M=b.s.c,z=[];if(p["!ref"]){for(O=b.s.r;O<=b.e.r;++O)if(!(S&&!p["!data"][O])){for(z=[],M=b.s.c;M<=b.e.c;++M)x=S?p["!data"][O][M]:p[Bn(M)+zn(O)],!(!x||!x.c)&&z.push(c(x.c,O,M));z.length&&v.push(z.join(_))}}if(p["!ref"]){for(O=b.s.r;O<=b.e.r;++O)if(!(S&&!p["!data"][O])){for(z=[],M=b.s.c;M<=b.e.c;++M)if(x=S?p["!data"][O][M]:p[Bn(M)+zn(O)],!(!x||x.v==null&&(!x.f||x.F))){if((x.z||(x.t=="d"?la[14]:"General"))!=A){var U=g._formats.indexOf(x.z);U==-1&&(g._formats.push(x.z),U=g._formats.length-1,m.push("P;P"+x.z.replace(/;/g,";;"))),z.push("F;P"+U+";Y"+(O+1)+";X"+(M+1))}z.push(l(x,p,O,M,g,I))}v.push(z.join(_))}}return m.push("F;P0;DG0G8;M255"),p["!cols"]&&u(m,p["!cols"]),p["!rows"]&&f(m,p["!rows"]),p["!ref"]&&m.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" ")),m.push("O;L;D;B"+(I?";V4":"")+";K47;G100 0.001"),delete g._formats,m.join(_)+_+v.join(_)+_+"E"+_}return{to_workbook:o,from_sheet:h}})(),dye=(function(){function r(o,l){switch(l.type){case"base64":return t(yf(o),l);case"binary":return t(o,l);case"buffer":return t(En&&Buffer.isBuffer(o)?o.toString("binary"):$h(o),l);case"array":return t(Rj(o),l)}throw new Error("Unrecognized type "+l.type)}function t(o,l){for(var c=o.split(`
`),u=-1,f=-1,h=0,p=[];h!==c.length;++h){if(c[h].trim()==="BOT"){p[++u]=[],f=0;continue}if(!(u<0)){var g=c[h].trim().split(","),y=g[0],m=g[1];++h;for(var v=c[h]||"";(v.match(/["]/g)||[]).length&1&&h<c.length-1;)v+=`
`+c[++h];switch(v=v.trim(),+y){case-1:if(v==="BOT"){p[++u]=[],f=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?p[u][f]=!0:v==="FALSE"?p[u][f]=!1:isNaN(Vu(m))?isNaN(ix(m).getDate())?p[u][f]=m:(p[u][f]=vo(m),l&&l.UTC||(p[u][f]=nm(p[u][f]))):p[u][f]=Vu(m),++f;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),p[u][f++]=v!==""?v:null;break}if(v==="EOD")break}}return l&&l.sheetRows&&(p=p.slice(0,l.sheetRows)),p}function e(o,l){return xm(r(o,l),l)}function n(o,l){var c=bm(e(o,l),l);return c.bookType="dif",c}function a(o,l){return"0,"+String(o)+`\r
`+l}function i(o){return`1,0\r
"`+o.replace(/"/g,'""')+'"'}function s(o){if(!o["!ref"])throw new Error("Cannot export empty sheet to DIF");for(var l=ca(o["!ref"]),c=o["!data"]!=null,u=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(l.e.r-l.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(l.e.c-l.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],f=l.s.r;f<=l.e.r;++f){for(var h=c?o["!data"][f]:[],p=`-1,0\r
BOT\r
`,g=l.s.c;g<=l.e.c;++g){var y=c?h&&h[g]:o[_a({r:f,c:g})];if(y==null){p+=`1,0\r
""\r
`;continue}switch(y.t){case"n":y.w!=null?p+="0,"+y.w+`\r
V`:y.v!=null?p+=a(y.v,"V"):y.f!=null&&!y.F?p+=i("="+y.f):p+=`1,0\r
""`;break;case"b":p+=y.v?a(1,"TRUE"):a(0,"FALSE");break;case"s":p+=i(isNaN(+y.v)?y.v:'="'+y.v+'"');break;case"d":y.w||(y.w=ed(y.z||la[14],es(vo(y.v)))),p+=a(y.w,"V");break;default:p+=`1,0\r
""`}p+=`\r
`}u.push(p)}return u.join("")+`-1,0\r
EOD`}return{to_workbook:n,to_sheet:e,from_sheet:s}})(),Aq=(function(){function r(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function e(f,h){for(var p=f.split(`
`),g=-1,y=-1,m=0,v=[];m!==p.length;++m){var b=p[m].trim().split(":");if(b[0]==="cell"){var x=ya(b[1]);if(v.length<=x.r)for(g=v.length;g<=x.r;++g)v[g]||(v[g]=[]);switch(g=x.r,y=x.c,b[2]){case"t":v[g][y]=r(b[3]);break;case"v":v[g][y]=+b[3];break;case"vtf":var S=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[g][y]=!!+b[4];break;default:v[g][y]=b[b.length-1].charAt(0)=="#"?{t:"e",v:$c[b[b.length-1]]}:+b[4];break}b[2]=="vtf"&&(v[g][y]=[v[g][y],S])}}}return h&&h.sheetRows&&(v=v.slice(0,h.sheetRows)),v}function n(f,h){return xm(e(f,h),h)}function a(f,h){return bm(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,y="",m=Qi(f["!ref"]),v=f["!data"]!=null,b=m.s.r;b<=m.e.r;++b)for(var x=m.s.c;x<=m.e.c;++x)if(y=_a({r:b,c:x}),g=v?(f["!data"][b]||[])[x]:f[y],!(!g||g.v==null||g.t==="z")){switch(p=["cell",y,"t"],g.t){case"s":p.push(t(g.v));break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var S=es(vo(g.v));p[2]="vtc",p[3]="nd",p[4]=""+S,p[5]=g.w||ed(g.z||la[14],S);break;case"n":isFinite(g.v)?g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v):(p[2]="vt"+(g.f?"f":"c"),p[3]="e"+Vs[isNaN(g.v)?36:7],p[4]="0",p[5]=g.f||p[3].slice(1),p[6]="e",p[7]=p[3].slice(1));break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[i,s,o,s,c(f),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:u}})(),fye=(function(){function r(u,f,h,p,g){g.raw?f[h][p]=u:u===""||(u==="TRUE"?f[h][p]=!0:u==="FALSE"?f[h][p]=!1:isNaN(Vu(u))?isNaN(ix(u).getDate())?u.charCodeAt(0)==35&&$c[u]!=null?f[h][p]={t:"e",v:$c[u],w:u}:f[h][p]=u:f[h][p]=vo(u):f[h][p]=Vu(u))}function t(u,f){var h=f||{},p=[];if(!u||u.length===0)return p;for(var g=u.split(/[\r\n]/),y=g.length-1;y>=0&&g[y].length===0;)--y;for(var m=10,v=0,b=0;b<=y;++b)v=g[b].indexOf(" "),v==-1?v=g[b].length:v++,m=Math.max(m,v);for(b=0;b<=y;++b){p[b]=[];var x=0;for(r(g[b].slice(0,m).trim(),p,b,x,h),x=1;x<=(g[b].length-m)/10+1;++x)r(g[b].slice(m+(x-1)*10,m+x*10).trim(),p,b,x,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var e={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(u){for(var f={},h=!1,p=0,g=0;p<u.length;++p)(g=u.charCodeAt(p))==34?h=!h:!h&&g in e&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(y,m){return y[0]-m[0]||n[y[1]]-n[m[1]]}),e[g.pop()[1]]||44}function i(u,f){var h=f||{},p="",g={};h.dense&&(g["!data"]=[]);var y={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=a(u.slice(0,1024)):h&&h.FS?p=h.FS:p=a(u.slice(0,1024));var m=0,v=0,b=0,x=0,S=0,_=p.charCodeAt(0),I=!1,A=0,O=u.charCodeAt(0),M=h.dateNF!=null?gme(h.dateNF):null;function z(){var U=u.slice(x,S);U.slice(-1)=="\r"&&(U=U.slice(0,-1));var D={};if(U.charAt(0)=='"'&&U.charAt(U.length-1)=='"'&&(U=U.slice(1,-1).replace(/""/g,'"')),h.cellText!==!1&&(D.w=U),U.length===0)D.t="z";else if(h.raw)D.t="s",D.v=U;else if(U.trim().length===0)D.t="s",D.v=U;else if(U.charCodeAt(0)==61)U.charCodeAt(1)==34&&U.charCodeAt(U.length-1)==34?(D.t="s",D.v=U.slice(2,-1).replace(/""/g,'"')):f1e(U)?(D.t="s",D.f=U.slice(1),D.v=U):(D.t="s",D.v=U);else if(U=="TRUE")D.t="b",D.v=!0;else if(U=="FALSE")D.t="b",D.v=!1;else if(!isNaN(b=Vu(U)))D.t="n",D.v=b;else if(!isNaN((b=ix(U)).getDate())||M&&U.match(M)){if(D.z=h.dateNF||la[14],M&&U.match(M)){var T=yme(U,h.dateNF,U.match(M)||[]);b=vo(T),h&&h.UTC===!1&&(b=nm(b))}else h&&h.UTC===!1?b=nm(b):h.cellText!==!1&&h.dateNF&&(D.w=ed(D.z,b));h.cellDates?(D.t="d",D.v=b):(D.t="n",D.v=es(b)),h.cellNF||delete D.z}else U.charCodeAt(0)==35&&$c[U]!=null?(D.t="e",D.w=U,D.v=$c[U]):(D.t="s",D.v=U);if(D.t=="z"||(h.dense?(g["!data"][m]||(g["!data"][m]=[]),g["!data"][m][v]=D):g[_a({c:v,r:m})]=D),x=S+1,O=u.charCodeAt(x),y.e.c<v&&(y.e.c=v),y.e.r<m&&(y.e.r=m),A==_)++v;else if(v=0,++m,h.sheetRows&&h.sheetRows<=m)return!0}e:for(;S<u.length;++S)switch(A=u.charCodeAt(S)){case 34:O===34&&(I=!I);break;case 13:if(I)break;u.charCodeAt(S+1)==10&&++S;case _:case 10:if(!I&&z())break e;break}return S-x>0&&z(),g["!ref"]=Za(y),g}function s(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):xm(t(u,f),f)}function o(u,f){var h="",p=f.type=="string"?[0,0,0,0]:B2e(u,f);switch(f.type){case"base64":h=yf(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):(f.codepage,h=En&&Buffer.isBuffer(u)?u.toString("binary"):$h(u));break;case"array":h=Rj(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=gp(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=gp(h):f.type=="binary",h.slice(0,19)=="socialcalc:version:"?Aq.to_sheet(f.type=="string"?h:gp(h),f):s(h,f)}function l(u,f){return bm(o(u,f),f)}function c(u){var f=[];if(!u["!ref"])return"";for(var h=ca(u["!ref"]),p,g=u["!data"]!=null,y=h.s.r;y<=h.e.r;++y){for(var m=[],v=h.s.c;v<=h.e.c;++v){var b=_a({r:y,c:v});if(p=g?(u["!data"][y]||[])[v]:u[b],!p||p.v==null){m.push("          ");continue}for(var x=(p.w||(td(p),p.w)||"").slice(0,10);x.length<10;)x+=" ";m.push(x+(v===0?" ":""))}f.push(m.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}})(),BM=(function(){function r(B,F,X){if(B){zs(B,B.l||0);for(var te=X.Enum||K;B.l<B.length;){var se=B.read_shift(2),ce=te[se]||te[65535],ue=B.read_shift(2),oe=B.l+ue,le=ce.f&&ce.f(B,ue,X);if(B.l=oe,F(le,ce,se))return}}}function t(B,F){switch(F.type){case"base64":return n(Lo(yf(B)),F);case"binary":return n(Lo(B),F);case"buffer":case"array":return n(B,F)}throw"Unsupported type "+F.type}var e=["mmmm","dd-mmm-yyyy","dd-mmm","mmm-yyyy","@","mm/dd","hh:mm:ss AM/PM","hh:mm AM/PM","mm/dd/yyyy","mm/dd","hh:mm:ss","hh:mm"];function n(B,F){if(!B)return B;var X=F||{},te={},se="Sheet1",ce="",ue=0,oe={},le=[],pe=[],ye=[];X.dense&&(ye=te["!data"]=[]);var be={s:{r:0,c:0},e:{r:0,c:0}},Ie=X.sheetRows||0,Oe={};if(B[4]==81&&B[5]==80&&B[6]==87)return ee(B,F);if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)X.Enum=K,r(B,function(qe,ct,ft){switch(ft){case 0:X.vers=qe,qe>=4096&&(X.qpro=!0);break;case 255:X.vers=qe,X.works=!0;break;case 6:be=qe;break;case 204:qe&&(ce=qe);break;case 222:ce=qe;break;case 15:case 51:(!X.qpro&&!X.works||ft==51)&&qe[1].v.charCodeAt(0)<48&&(qe[1].v=qe[1].v.slice(1)),(X.works||X.works2)&&(qe[1].v=qe[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:(qe[2]&112)==112&&(qe[2]&15)>1&&(qe[2]&15)<15&&(qe[1].z=X.dateNF||e[(qe[2]&15)-1]||la[14],X.cellDates&&(qe[1].v=mp(qe[1].v),qe[1].t=typeof qe[1].v=="number"?"n":"d")),X.qpro&&qe[3]>ue&&(te["!ref"]=Za(be),oe[se]=te,le.push(se),te={},X.dense&&(ye=te["!data"]=[]),be={s:{r:0,c:0},e:{r:0,c:0}},ue=qe[3],se=ce||"Sheet"+(ue+1),ce="");var St=X.dense?(ye[qe[0].r]||[])[qe[0].c]:te[_a(qe[0])];if(St){St.t=qe[1].t,St.v=qe[1].v,qe[1].z!=null&&(St.z=qe[1].z),qe[1].f!=null&&(St.f=qe[1].f),Oe=St;break}X.dense?(ye[qe[0].r]||(ye[qe[0].r]=[]),ye[qe[0].r][qe[0].c]=qe[1]):te[_a(qe[0])]=qe[1],Oe=qe[1];break;case 21509:X.works2=!0;break;case 21506:qe==5281&&(Oe.z="hh:mm:ss",X.cellDates&&Oe.t=="n"&&(Oe.v=mp(Oe.v),Oe.t=typeof Oe.v=="number"?"n":"d"));break}},X);else if(B[2]==26||B[2]==14)X.Enum=Y,B[2]==14&&(X.qpro=!0,B.l=0),r(B,function(qe,ct,ft){switch(ft){case 204:se=qe;break;case 22:qe[1].v.charCodeAt(0)<48&&(qe[1].v=qe[1].v.slice(1)),qe[1].v=qe[1].v.replace(/\x0F./g,function(St){return String.fromCharCode(St.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(qe[3]>ue&&(te["!ref"]=Za(be),oe[se]=te,le.push(se),te={},X.dense&&(ye=te["!data"]=[]),be={s:{r:0,c:0},e:{r:0,c:0}},ue=qe[3],se="Sheet"+(ue+1)),Ie>0&&qe[0].r>=Ie)break;X.dense?(ye[qe[0].r]||(ye[qe[0].r]=[]),ye[qe[0].r][qe[0].c]=qe[1]):te[_a(qe[0])]=qe[1],be.e.c<qe[0].c&&(be.e.c=qe[0].c),be.e.r<qe[0].r&&(be.e.r=qe[0].r);break;case 27:qe[14e3]&&(pe[qe[14e3][0]]=qe[14e3][1]);break;case 1537:pe[qe[0]]=qe[1],qe[0]==ue&&(se=qe[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(te["!ref"]=Za(be),oe[ce||se]=te,le.push(ce||se),!pe.length)return{SheetNames:le,Sheets:oe};for(var Me={},Re=[],He=0;He<pe.length;++He)oe[le[He]]?(Re.push(pe[He]||le[He]),Me[pe[He]]=oe[pe[He]]||oe[le[He]]):(Re.push(pe[He]),Me[pe[He]]={"!ref":"A1"});return{SheetNames:Re,Sheets:Me}}function a(B,F){var X=F||{};if(+X.codepage>=0&&ky(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var te=js();if(!B["!ref"])throw new Error("Cannot export empty sheet to WK1");var se=ca(B["!ref"]),ce=B["!data"]!=null,ue=[];zt(te,0,s(1030)),zt(te,6,c(se));for(var oe=Math.min(se.e.r,8191),le=se.s.c;le<=se.e.c;++le)ue[le]=Bn(le);for(var pe=se.s.r;pe<=oe;++pe){var ye=zn(pe);for(le=se.s.c;le<=se.e.c;++le){var be=ce?(B["!data"][pe]||[])[le]:B[ue[le]+ye];if(!(!be||be.t=="z"))switch(be.t){case"n":(be.v|0)==be.v&&be.v>=-32768&&be.v<=32767?zt(te,13,m(pe,le,be)):zt(te,14,b(pe,le,be));break;case"d":var Ie=es(be.v);(Ie|0)==Ie&&Ie>=-32768&&Ie<=32767?zt(te,13,m(pe,le,{v:Ie,z:be.z||la[14]})):zt(te,14,b(pe,le,{v:Ie,z:be.z||la[14]}));break;default:var Oe=td(be);zt(te,15,p(pe,le,Oe.slice(0,239)))}}}return zt(te,1),te.end()}function i(B,F){var X=F||{};if(+X.codepage>=0&&ky(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var te=js();zt(te,0,o(B));for(var se=0,ce=0;se<B.SheetNames.length;++se)(B.Sheets[B.SheetNames[se]]||{})["!ref"]&&zt(te,27,L(B.SheetNames[se],ce++));var ue=0;for(se=0;se<B.SheetNames.length;++se){var oe=B.Sheets[B.SheetNames[se]];if(!(!oe||!oe["!ref"])){for(var le=ca(oe["!ref"]),pe=oe["!data"]!=null,ye=[],be=Math.min(le.e.r,8191),Ie=le.s.r;Ie<=be;++Ie)for(var Oe=zn(Ie),Me=le.s.c;Me<=le.e.c;++Me){Ie===le.s.r&&(ye[Me]=Bn(Me));var Re=ye[Me]+Oe,He=pe?(oe["!data"][Ie]||[])[Me]:oe[Re];if(!(!He||He.t=="z"))if(He.t=="n")zt(te,23,T(Ie,Me,ue,He.v));else{var qe=td(He);zt(te,22,z(Ie,Me,ue,qe.slice(0,239)))}}++ue}}return zt(te,1),te.end()}function s(B){var F=xt(2);return F.write_shift(2,B),F}function o(B){var F=xt(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var X=0,te=0,se=0,ce=0;ce<B.SheetNames.length;++ce){var ue=B.SheetNames[ce],oe=B.Sheets[ue];if(!(!oe||!oe["!ref"])){++se;var le=Qi(oe["!ref"]);X<le.e.r&&(X=le.e.r),te<le.e.c&&(te=le.e.c)}}return X>8191&&(X=8191),F.write_shift(2,X),F.write_shift(1,se),F.write_shift(1,te),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(B,F,X){var te={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&X.qpro?(te.s.c=B.read_shift(1),B.l++,te.s.r=B.read_shift(2),te.e.c=B.read_shift(1),B.l++,te.e.r=B.read_shift(2),te):(te.s.c=B.read_shift(2),te.s.r=B.read_shift(2),F==12&&X.qpro&&(B.l+=2),te.e.c=B.read_shift(2),te.e.r=B.read_shift(2),F==12&&X.qpro&&(B.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function c(B){var F=xt(8);return F.write_shift(2,B.s.c),F.write_shift(2,B.s.r),F.write_shift(2,B.e.c),F.write_shift(2,B.e.r),F}function u(B,F,X){var te=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(te[0].c=B.read_shift(1),te[3]=B.read_shift(1),te[0].r=B.read_shift(2),B.l+=2):X.works?(te[0].c=B.read_shift(2),te[0].r=B.read_shift(2),te[2]=B.read_shift(2)):(te[2]=B.read_shift(1),te[0].c=B.read_shift(2),te[0].r=B.read_shift(2)),te}function f(B){return B.z&&Uh(B.z)?240|(e.indexOf(B.z)+1||2):255}function h(B,F,X){var te=B.l+F,se=u(B,F,X);if(se[1].t="s",(X.vers&65534)==20768){B.l++;var ce=B.read_shift(1);return se[1].v=B.read_shift(ce,"utf8"),se}return X.qpro&&B.l++,se[1].v=B.read_shift(te-B.l,"cstr"),se}function p(B,F,X){var te=xt(7+X.length);te.write_shift(1,255),te.write_shift(2,F),te.write_shift(2,B),te.write_shift(1,39);for(var se=0;se<te.length;++se){var ce=X.charCodeAt(se);te.write_shift(1,ce>=128?95:ce)}return te.write_shift(1,0),te}function g(B,F,X){var te=B.l+F,se=u(B,F,X);if(se[1].t="s",X.vers==20768){var ce=B.read_shift(1);return se[1].v=B.read_shift(ce,"utf8"),se}return se[1].v=B.read_shift(te-B.l,"cstr"),se}function y(B,F,X){var te=u(B,F,X);return te[1].v=B.read_shift(2,"i"),te}function m(B,F,X){var te=xt(7);return te.write_shift(1,f(X)),te.write_shift(2,F),te.write_shift(2,B),te.write_shift(2,X.v,"i"),te}function v(B,F,X){var te=u(B,F,X);return te[1].v=B.read_shift(8,"f"),te}function b(B,F,X){var te=xt(13);return te.write_shift(1,f(X)),te.write_shift(2,F),te.write_shift(2,B),te.write_shift(8,X.v,"f"),te}function x(B,F,X){var te=B.l+F,se=u(B,F,X);if(se[1].v=B.read_shift(8,"f"),X.qpro)B.l=te;else{var ce=B.read_shift(2);A(B.slice(B.l,B.l+ce),se),B.l+=ce}return se}function S(B,F,X){var te=F&32768;return F&=-32769,F=(te?B:0)+(F>=8192?F-16384:F),(te?"":"$")+(X?Bn(F):zn(F))}var _={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],54:["DATE",3],63:["ROUND",2],64:["TIME",3],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(B,F){zs(B,0);for(var X=[],te=0,se="",ce="",ue="",oe="";B.l<B.length;){var le=B[B.l++];switch(le){case 0:X.push(B.read_shift(8,"f"));break;case 1:ce=S(F[0].c,B.read_shift(2),!0),se=S(F[0].r,B.read_shift(2),!1),X.push(ce+se);break;case 2:{var pe=S(F[0].c,B.read_shift(2),!0),ye=S(F[0].r,B.read_shift(2),!1);ce=S(F[0].c,B.read_shift(2),!0),se=S(F[0].r,B.read_shift(2),!1),X.push(pe+ye+":"+ce+se)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(B.read_shift(2));break;case 6:{for(var be="";le=B[B.l++];)be+=String.fromCharCode(le);X.push('"'+be.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:oe=X.pop(),ue=X.pop(),X.push(["AND","OR"][le-20]+"("+ue+","+oe+")");break;default:if(le<32&&I[le])oe=X.pop(),ue=X.pop(),X.push(ue+I[le]+oe);else if(_[le]){if(te=_[le][1],te==69&&(te=B[B.l++]),te>X.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+X.join("|")+"|");return}var Ie=X.slice(-te);X.length-=te,X.push(_[le][0]+"("+Ie.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}X.length==1?F[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function O(B){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=B.read_shift(2),F[3]=B[B.l++],F[0].c=B[B.l++],F}function M(B,F){var X=O(B);return X[1].t="s",X[1].v=B.read_shift(F-4,"cstr"),X}function z(B,F,X,te){var se=xt(6+te.length);se.write_shift(2,B),se.write_shift(1,X),se.write_shift(1,F),se.write_shift(1,39);for(var ce=0;ce<te.length;++ce){var ue=te.charCodeAt(ce);se.write_shift(1,ue>=128?95:ue)}return se.write_shift(1,0),se}function U(B,F){var X=O(B);X[1].v=B.read_shift(2);var te=X[1].v>>1;if(X[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return X[1].v=te,X}function D(B,F){var X=O(B),te=B.read_shift(4),se=B.read_shift(4),ce=B.read_shift(2);if(ce==65535)return te===0&&se===3221225472?(X[1].t="e",X[1].v=15):te===0&&se===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var ue=ce&32768;return ce=(ce&32767)-16446,X[1].v=(1-ue*2)*(se*Math.pow(2,ce+32)+te*Math.pow(2,ce)),X}function T(B,F,X,te){var se=xt(14);if(se.write_shift(2,B),se.write_shift(1,X),se.write_shift(1,F),te==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var ce=0,ue=0,oe=0,le=0;return te<0&&(ce=1,te=-te),ue=Math.log2(te)|0,te/=Math.pow(2,ue-31),le=te>>>0,(le&2147483648)==0&&(te/=2,++ue,le=te>>>0),te-=le,le|=2147483648,le>>>=0,te*=Math.pow(2,32),oe=te>>>0,se.write_shift(4,oe),se.write_shift(4,le),ue+=16383+(ce?32768:0),se.write_shift(2,ue),se}function R(B,F){var X=D(B);return B.l+=F-14,X}function C(B,F){var X=O(B),te=B.read_shift(4);return X[1].v=te>>6,X}function N(B,F){var X=O(B),te=B.read_shift(8,"f");return X[1].v=te,X}function E(B,F){var X=N(B);return B.l+=F-12,X}function k(B,F){return B[B.l+F-1]==0?B.read_shift(F,"cstr"):""}function P(B,F){var X=B[B.l++];X>F-1&&(X=F-1);for(var te="";te.length<X;)te+=String.fromCharCode(B[B.l++]);return te}function q(B,F,X){if(!(!X.qpro||F<21)){var te=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var se=B.read_shift(F-21,"cstr");return[te,se]}}function H(B,F){for(var X={},te=B.l+F;B.l<te;){var se=B.read_shift(2);if(se==14e3){for(X[se]=[0,""],X[se][0]=B.read_shift(2);B[B.l];)X[se][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return X}function L(B,F){var X=xt(5+B.length);X.write_shift(2,14e3),X.write_shift(2,F);for(var te=0;te<B.length;++te){var se=B.charCodeAt(te);X[X.l++]=se>127?95:se}return X[X.l++]=0,X}var K={0:{n:"BOF",f:Tv},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:g},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:k},222:{n:"SHEETNAMELP",f:P},255:{n:"BOF",f:Tv},21506:{n:"WKSNF",f:Tv},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:M},23:{n:"NUMBER17",f:D},24:{n:"NUMBER18",f:U},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:N},40:{n:"FORMULA28",f:E},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:k},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}},Z={5:"dd-mmm-yy",6:"dd-mmm",7:"mmm-yy",8:"mm/dd/yy",10:"hh:mm:ss AM/PM",11:"hh:mm AM/PM",14:"dd-mmm-yyyy",15:"mmm-yyyy",34:"0.00",50:"0.00;[Red]0.00",66:"0.00;(0.00)",82:"0.00;[Red](0.00)",162:'"$"#,##0.00;\\("$"#,##0.00\\)',288:"0%",304:"0E+00",320:"# ?/?"};function V(B){var F=B.read_shift(2),X=B.read_shift(1);if(X!=0)throw"unsupported QPW string type "+X.toString(16);return B.read_shift(F,"sbcs-cont")}function ee(B,F){zs(B,0);var X=F||{},te={};X.dense&&(te["!data"]=[]);var se=[],ce="",ue={s:{r:-1,c:-1},e:{r:-1,c:-1}},oe=0,le=0,pe=0,ye=0,be={SheetNames:[],Sheets:{}},Ie=[];e:for(;B.l<B.length;){var Oe=B.read_shift(2),Me=B.read_shift(2),Re=B.slice(B.l,B.l+Me);switch(zs(Re,0),Oe){case 1:if(Re.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 8:break;case 10:for(var He=Re.read_shift(4),qe=(Re.length-Re.l)/He|0,ct=0;ct<He;++ct){var ft=Re.l+qe,St={};Re.l+=2,St.numFmtId=Re.read_shift(2),Z[St.numFmtId]&&(St.z=Z[St.numFmtId]),Re.l=ft,Ie.push(St)}break;case 1025:break;case 1026:break;case 1031:for(Re.l+=12;Re.l<Re.length;)oe=Re.read_shift(2),le=Re.read_shift(1),se.push(Re.read_shift(oe,"cstr"));break;case 1032:break;case 1537:{var Rt=Re.read_shift(2);te={},X.dense&&(te["!data"]=[]),ue.s.c=Re.read_shift(2),ue.e.c=Re.read_shift(2),ue.s.r=Re.read_shift(4),ue.e.r=Re.read_shift(4),Re.l+=4,Re.l+2<Re.length&&(oe=Re.read_shift(2),le=Re.read_shift(1),ce=oe==0?"":Re.read_shift(oe,"cstr")),ce||(ce=Bn(Rt))}break;case 1538:{if(ue.s.c>255||ue.s.r>999999)break;ue.e.c<ue.s.c&&(ue.e.c=ue.s.c),ue.e.r<ue.s.r&&(ue.e.r=ue.s.r),te["!ref"]=Za(ue),Zj(be,te,ce)}break;case 2561:pe=Re.read_shift(2),ue.e.c<pe&&(ue.e.c=pe),ue.s.c>pe&&(ue.s.c=pe),ye=Re.read_shift(4),ue.s.r>ye&&(ue.s.r=ye),ye=Re.read_shift(4),ue.e.r<ye&&(ue.e.r=ye);break;case 3073:{ye=Re.read_shift(4),oe=Re.read_shift(4),ue.s.r>ye&&(ue.s.r=ye),ue.e.r<ye+oe-1&&(ue.e.r=ye+oe-1);for(var Ft=Bn(pe);Re.l<Re.length;){var ot={t:"z"},Kt=Re.read_shift(1),Pt=-1;Kt&128&&(Pt=Re.read_shift(2));var Ee=Kt&64?Re.read_shift(2)-1:0;switch(Kt&31){case 0:break;case 1:break;case 2:ot={t:"n",v:Re.read_shift(2)};break;case 3:ot={t:"n",v:Re.read_shift(2,"i")};break;case 4:ot={t:"n",v:Hj(Re)};break;case 5:ot={t:"n",v:Re.read_shift(8,"f")};break;case 7:ot={t:"s",v:se[le=Re.read_shift(4)-1]};break;case 8:ot={t:"n",v:Re.read_shift(8,"f")},Re.l+=2,Re.l+=4,isNaN(ot.v)&&(ot={t:"e",v:15});break;default:throw"Unrecognized QPW cell type "+(Kt&31)}Pt!=-1&&(Ie[Pt-1]||{}).z&&(ot.z=Ie[Pt-1].z);var We=0;if(Kt&32)switch(Kt&31){case 2:We=Re.read_shift(2);break;case 3:We=Re.read_shift(2,"i");break;case 7:We=Re.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(Kt&31)}if(!(!X.sheetStubs&&ot.t=="z")){var ut=Es(ot);ot.t=="n"&&ot.z&&Uh(ot.z)&&X.cellDates&&(ut.v=mp(ot.v),ut.t=typeof ut.v=="number"?"n":"d"),te["!data"]!=null?(te["!data"][ye]||(te["!data"][ye]=[]),te["!data"][ye][pe]=ut):te[Ft+zn(ye)]=ut}for(++ye,--oe;Ee-- >0&&oe>=0;){if(Kt&32)switch(Kt&31){case 2:ot={t:"n",v:ot.v+We&65535};break;case 3:ot={t:"n",v:ot.v+We&65535},ot.v>32767&&(ot.v-=65536);break;case 7:ot={t:"s",v:se[le=le+We>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(Kt&31)}else switch(Kt&31){case 1:ot={t:"z"};break;case 2:ot={t:"n",v:Re.read_shift(2)};break;case 7:ot={t:"s",v:se[le=Re.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(Kt&31)}!X.sheetStubs&&ot.t=="z"||(te["!data"]!=null?(te["!data"][ye]||(te["!data"][ye]=[]),te["!data"][ye][pe]=ot):te[Ft+zn(ye)]=ot),++ye,--oe}}}break;case 3074:{pe=Re.read_shift(2),ye=Re.read_shift(4);var wt=V(Re);te["!data"]!=null?(te["!data"][ye]||(te["!data"][ye]=[]),te["!data"][ye][pe]={t:"s",v:wt}):te[Bn(pe)+zn(ye)]={t:"s",v:wt}}break}B.l+=Me}return be}return{sheet_to_wk1:a,book_to_wk3:i,to_workbook:t}})(),hye=/^\s|\s$|[\t\n\r]/;function pye(r,t){if(!t.bookSST)return"";var e=[ei];e[e.length]=tr("sst",null,{xmlns:vm[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var a=r[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),typeof a.t!="string"&&(a.t=String(a.t)),a.t.match(hye)&&(i+=' xml:space="preserve"'),i+=">"+en(a.t)+"</t>"),i+="</si>",e[e.length]=i}return e.length>2&&(e[e.length]="</sst>",e[1]=e[1].replace("/>",">")),e.join("")}function mye(r){return[r.read_shift(4),r.read_shift(4)]}function gye(r,t){return t||(t=xt(8)),t.write_shift(4,r.Count),t.write_shift(4,r.Unique),t}var yye=nge;function vye(r){var t=js();Dt(t,159,gye(r));for(var e=0;e<r.length;++e)Dt(t,19,yye(r[e]));return Dt(t,160),t.end()}function bye(r){for(var t=[],e=r.split(""),n=0;n<e.length;++n)t[n]=e[n].charCodeAt(0);return t}function Tq(r){var t=0,e,n=bye(r),a=n.length+1,i,s,o,l,c;for(e=Bh(a),e[0]=n.length,i=1;i!=a;++i)e[i]=n[i-1];for(i=a-1;i>=0;--i)s=e[i],o=(t&16384)===0?0:1,l=t<<1&32767,c=o|l,t=c^s;return t^52811}function xye(r,t){var e=["{\\rtf1\\ansi"];if(!r["!ref"])return e[0]+"}";for(var n=ca(r["!ref"]),a,i=r["!data"]!=null,s=[],o=n.s.r;o<=n.e.r;++o){e.push("\\trowd\\trautofit1");for(var l=n.s.c;l<=n.e.c;++l)e.push("\\cellx"+(l+1));for(e.push("\\pard\\intbl"),i&&(s=r["!data"][o]||[]),l=n.s.c;l<=n.e.c;++l){var c=_a({r:o,c:l});if(a=i?s[l]:r[c],!a||a.v==null&&(!a.f||a.F)){e.push(" \\cell");continue}e.push(" "+(a.w||(td(a),a.w)||"").replace(/[\r\n]/g,"\\par ")),e.push("\\cell")}e.push("\\pard\\intbl\\row")}return e.join("")+"}"}function $M(r){for(var t=0,e=1;t!=3;++t)e=e*256+(r[t]>255?255:r[t]<0?0:r[t]);return e.toString(16).toUpperCase().slice(1)}var wye=6,Gu=wye;function cx(r){return Math.floor((r+Math.round(128/Gu)/256)*Gu)}function ux(r){return Math.floor((r-5)/Gu*100+.5)/100}function z8(r){return Math.round((r*Gu+5)/Gu*256)/256}function Gj(r){r.width?(r.wpx=cx(r.width),r.wch=ux(r.wpx),r.MDW=Gu):r.wpx?(r.wch=ux(r.wpx),r.width=z8(r.wch),r.MDW=Gu):typeof r.wch=="number"&&(r.width=z8(r.wch),r.wpx=cx(r.width),r.MDW=Gu),r.customWidth&&delete r.customWidth}var _ye=96,Cq=_ye;function dx(r){return r*96/Cq}function Pq(r){return r*Cq/96}function Sye(r){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)r[n]!=null&&(t[t.length]=tr("numFmt",null,{numFmtId:n,formatCode:en(r[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=tr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function Nye(r){var t=[];return t[t.length]=tr("cellXfs",null),r.forEach(function(e){t[t.length]=tr("xf",null,e)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=tr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function jye(r,t){var e=[ei,tr("styleSheet",null,{xmlns:vm[0],"xmlns:vt":Ci.vt})],n;return r.SSF&&(n=Sye(r.SSF))!=null&&(e[e.length]=n),e[e.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',e[e.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',e[e.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',e[e.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Nye(t.cellXfs))&&(e[e.length]=n),e[e.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',e[e.length]='<dxfs count="0"/>',e[e.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',e.length>2&&(e[e.length]="</styleSheet>",e[1]=e[1].replace("/>",">")),e.join("")}function kye(r,t){var e=r.read_shift(2),n=ks(r);return[e,n]}function Eye(r,t,e){e||(e=xt(6+4*t.length)),e.write_shift(2,r),fi(t,e);var n=e.length>e.l?e.slice(0,e.l):e;return e.l==null&&(e.l=e.length),n}function Aye(r,t,e){var n={};n.sz=r.read_shift(2)/20;var a=uge(r);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=r.read_shift(2);switch(i===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=r.read_shift(1);s!=0&&(n.underline=s);var o=r.read_shift(1);o>0&&(n.family=o);var l=r.read_shift(1);switch(l>0&&(n.charset=l),r.l++,n.color=cge(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ks(r),n}function Tye(r,t){t||(t=xt(153)),t.write_shift(2,r.sz*20),dge(r,t),t.write_shift(2,r.bold?700:400);var e=0;r.vertAlign=="superscript"?e=1:r.vertAlign=="subscript"&&(e=2),t.write_shift(2,e),t.write_shift(1,r.underline||0),t.write_shift(1,r.family||0),t.write_shift(1,r.charset||0),t.write_shift(1,0),ox(r.color,t);var n=0;return n=2,t.write_shift(1,n),fi(r.name,t),t.length>t.l?t.slice(0,t.l):t}var Cye=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],jS,Pye=Yc;function UM(r,t){t||(t=xt(84)),jS||(jS=Mj(Cye));var e=jS[r.patternType];e==null&&(e=40),t.write_shift(4,e);var n=0;if(e!=40)for(ox({auto:1},t),ox({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Oye(r,t){var e=r.l+t,n=r.read_shift(2),a=r.read_shift(2);return r.l=e,{ixfe:n,numFmtId:a}}function Oq(r,t,e){e||(e=xt(16)),e.write_shift(2,t||0),e.write_shift(2,r.numFmtId||0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);var n=0;return e.write_shift(1,n),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e}function lg(r,t){return t||(t=xt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Iye=Yc;function Mye(r,t){return t||(t=xt(51)),t.write_shift(1,0),lg(null,t),lg(null,t),lg(null,t),lg(null,t),lg(null,t),t.length>t.l?t.slice(0,t.l):t}function Rye(r,t){return t||(t=xt(52)),t.write_shift(4,r.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Py(r.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Fye(r,t,e){var n=xt(2052);return n.write_shift(4,r),Py(t,n),Py(e,n),n.length>n.l?n.slice(0,n.l):n}function Dye(r,t){if(t){var e=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++e}),e!=0&&(Dt(r,615,sc(e)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Dt(r,44,Eye(a,t[a]))}),Dt(r,616))}}function Lye(r){var t=1;Dt(r,611,sc(t)),Dt(r,43,Tye({sz:12,color:{theme:1},name:"Calibri",family:2})),Dt(r,612)}function Bye(r){var t=2;Dt(r,603,sc(t)),Dt(r,45,UM({patternType:"none"})),Dt(r,45,UM({patternType:"gray125"})),Dt(r,604)}function $ye(r){var t=1;Dt(r,613,sc(t)),Dt(r,46,Mye()),Dt(r,614)}function Uye(r){var t=1;Dt(r,626,sc(t)),Dt(r,47,Oq({numFmtId:0},65535)),Dt(r,627)}function qye(r,t){Dt(r,617,sc(t.length)),t.forEach(function(e){Dt(r,47,Oq(e,0))}),Dt(r,618)}function zye(r){var t=1;Dt(r,619,sc(t)),Dt(r,48,Rye({xfId:0,name:"Normal"})),Dt(r,620)}function Wye(r){var t=0;Dt(r,505,sc(t)),Dt(r,506)}function Hye(r){var t=0;Dt(r,508,Fye(t,"TableStyleMedium9","PivotStyleMedium4")),Dt(r,509)}function Vye(r,t){var e=js();return Dt(e,278),Dye(e,r.SSF),Lye(e),Bye(e),$ye(e),Uye(e),qye(e,t.cellXfs),zye(e),Wye(e),Hye(e),Dt(e,279),e.end()}function Iq(r,t){if(t&&t.themeXLSX)return t.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var e=[ei];return e[e.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',e[e.length]="<a:themeElements>",e[e.length]='<a:clrScheme name="Office">',e[e.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',e[e.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',e[e.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',e[e.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',e[e.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',e[e.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',e[e.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',e[e.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',e[e.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',e[e.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',e[e.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',e[e.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',e[e.length]="</a:clrScheme>",e[e.length]='<a:fontScheme name="Office">',e[e.length]="<a:majorFont>",e[e.length]='<a:latin typeface="Cambria"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface=" "/>',e[e.length]='<a:font script="Hang" typeface=" "/>',e[e.length]='<a:font script="Hans" typeface=""/>',e[e.length]='<a:font script="Hant" typeface=""/>',e[e.length]='<a:font script="Arab" typeface="Times New Roman"/>',e[e.length]='<a:font script="Hebr" typeface="Times New Roman"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="MoolBoran"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Times New Roman"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:majorFont>",e[e.length]="<a:minorFont>",e[e.length]='<a:latin typeface="Calibri"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface=" "/>',e[e.length]='<a:font script="Hang" typeface=" "/>',e[e.length]='<a:font script="Hans" typeface=""/>',e[e.length]='<a:font script="Hant" typeface=""/>',e[e.length]='<a:font script="Arab" typeface="Arial"/>',e[e.length]='<a:font script="Hebr" typeface="Arial"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="DaunPenh"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Arial"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:minorFont>",e[e.length]="</a:fontScheme>",e[e.length]='<a:fmtScheme name="Office">',e[e.length]="<a:fillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="1"/>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="0"/>',e[e.length]="</a:gradFill>",e[e.length]="</a:fillStyleLst>",e[e.length]="<a:lnStyleLst>",e[e.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]="</a:lnStyleLst>",e[e.length]="<a:effectStyleLst>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',e[e.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',e[e.length]="</a:effectStyle>",e[e.length]="</a:effectStyleLst>",e[e.length]="<a:bgFillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]="</a:bgFillStyleLst>",e[e.length]="</a:fmtScheme>",e[e.length]="</a:themeElements>",e[e.length]="<a:objectDefaults>",e[e.length]="<a:spDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',e[e.length]="</a:spDef>",e[e.length]="<a:lnDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',e[e.length]="</a:lnDef>",e[e.length]="</a:objectDefaults>",e[e.length]="<a:extraClrSchemeLst/>",e[e.length]="</a:theme>",e.join("")}function Gye(r,t){return{flags:r.read_shift(4),version:r.read_shift(4),name:ks(r)}}function Kye(r){var t=xt(12+2*r.name.length);return t.write_shift(4,r.flags),t.write_shift(4,r.version),fi(r.name,t),t.slice(0,t.l)}function Xye(r){for(var t=[],e=r.read_shift(4);e-- >0;)t.push([r.read_shift(4),r.read_shift(4)]);return t}function Yye(r){var t=xt(4+8*r.length);t.write_shift(4,r.length);for(var e=0;e<r.length;++e)t.write_shift(4,r[e][0]),t.write_shift(4,r[e][1]);return t}function Jye(r,t){var e=xt(8+2*t.length);return e.write_shift(4,r),fi(t,e),e.slice(0,e.l)}function Zye(r){return r.l+=4,r.read_shift(4)!=0}function Qye(r,t){var e=xt(8);return e.write_shift(4,r),e.write_shift(4,1),e}function e1e(){var r=js();return Dt(r,332),Dt(r,334,sc(1)),Dt(r,335,Kye({name:"XLDAPR",version:12e4,flags:3496657072})),Dt(r,336),Dt(r,339,Jye(1,"XLDAPR")),Dt(r,52),Dt(r,35,sc(514)),Dt(r,4096,sc(0)),Dt(r,4097,cl(1)),Dt(r,36),Dt(r,53),Dt(r,340),Dt(r,337,Qye(1)),Dt(r,51,Yye([[1,0]])),Dt(r,338),Dt(r,333),r.end()}function t1e(){var r=[ei];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function r1e(r){var t={};t.i=r.read_shift(4);var e={};e.r=r.read_shift(4),e.c=r.read_shift(4),t.r=_a(e);var n=r.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Mq(r,t,e){var n=[21600,21600],a=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[tr("xml",null,{"xmlns:v":Bo.v,"xmlns:o":Bo.o,"xmlns:x":Bo.x,"xmlns:mv":Bo.mv}).replace(/\/>/,">"),tr("o:shapelayout",tr("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"})],s=65536*r,o=t||[];return o.length>0&&i.push(tr("v:shapetype",[tr("v:stroke",null,{joinstyle:"miter"}),tr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:n.join(","),"o:spt":202,path:a})),o.forEach(function(l){++s,i.push(n1e(l,s))}),i.push("</xml>"),i.join("")}function n1e(r,t,e){var n=ya(r[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var i=a.type=="gradient"?tr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=tr("v:fill",i,a),o={on:"t",obscured:"t"};return["<v:shape"+Ay({id:"_x0000_s"+t,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(r[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,tr("v:shadow",null,o),tr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ji("x:Anchor",[n.c+1,0,n.r+1,0,n.c+3,20,n.r+5,20].join(",")),Ji("x:AutoFill","False"),Ji("x:Row",String(n.r)),Ji("x:Column",String(n.c)),r[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function a1e(r){var t=[ei,tr("comments",null,{xmlns:vm[0]})],e=[];return t.push("<authors>"),r.forEach(function(n){n[1].forEach(function(a){var i=en(a.a);e.indexOf(i)==-1&&(e.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&e.indexOf("tc="+a.ID)==-1&&(e.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),e.length==0&&(e.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),r.forEach(function(n){var a=0,i=[],s=0;if(n[1][0]&&n[1][0].T&&n[1][0].ID&&(a=e.indexOf("tc="+n[1][0].ID)),n[1].forEach(function(c){c.a&&(a=e.indexOf(en(c.a))),c.T&&++s,i.push(c.t==null?"":en(c.t))}),s===0)n[1].forEach(function(c){t.push('<comment ref="'+n[0]+'" authorId="'+e.indexOf(en(c.a))+'"><text>'),t.push(Ji("t",c.t==null?"":en(c.t))),t.push("</text></comment>")});else{n[1][0]&&n[1][0].T&&n[1][0].ID&&(a=e.indexOf("tc="+n[1][0].ID)),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>');for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Ji("t",en(o))),t.push("</text></comment>")}}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Rq(r,t,e){var n=[ei,tr("ThreadedComments",null,{xmlns:Ci.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+e.tcid++).slice(-12)+"}"};o==0?i=l.id:l.parentId=i,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(tr("threadedComment",Ji("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Fq(r){var t=[ei,tr("personList",null,{xmlns:Ci.TCMNT,"xmlns:x":vm[0]}).replace(/[\/]>/,">")];return r.forEach(function(e,n){t.push(tr("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}function i1e(r){var t={};t.iauthor=r.read_shift(4);var e=r0(r);return t.rfx=e.s,t.ref=_a(e.s),r.l+=16,t}function s1e(r,t){return t==null&&(t=xt(36)),t.write_shift(4,r[1].iauthor),wm(r[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var o1e=ks;function qM(r){return fi(r.slice(0,54))}function l1e(r){var t=js(),e=[];return Dt(t,628),Dt(t,630),r.forEach(function(n){n[1].forEach(function(a){e.indexOf(a.a)>-1||(e.push(a.a.slice(0,54)),Dt(t,632,qM(a.a)),a.T&&a.ID&&e.indexOf("tc="+a.ID)==-1&&(e.push("tc="+a.ID),Dt(t,632,qM("tc="+a.ID))))})}),Dt(t,631),Dt(t,633),r.forEach(function(n){n[1].forEach(function(a){var i=-1;a.ID&&(i=e.indexOf("tc="+a.ID)),i==-1&&n[1][0].T&&n[1][0].ID&&(i=e.indexOf("tc="+n[1][0].ID)),i==-1&&(i=e.indexOf(a.a)),a.iauthor=i;var s={s:ya(n[0]),e:ya(n[0])};Dt(t,635,s1e([s,a])),a.t&&a.t.length>0&&Dt(t,637,ige(a)),Dt(t,636),delete a.iauthor})}),Dt(t,634),Dt(t,629),t.end()}function c1e(r,t){t.FullPaths.forEach(function(e,n){if(n!=0){var a=e.replace(/^[\/]*[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Kn.utils.cfb_add(r,a,t.FileIndex[n].content)}})}var u1e=["xlsb","xlsm","xlam","biff8","xla"],zM=(function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function e(n,a,i,s){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=s.length>0?parseInt(s,10)|0:0;return o?u+=t.c:--u,l?c+=t.r:--c,a+(o?"":"$")+Bn(u)+(l?"":"$")+zn(c)}return function(a,i){return t=i,a.replace(r,e)}})(),b2=/(^|[^._A-Z0-9])(\$?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])(\$?)(\d{1,7})(?![_.\(A-Za-z0-9])/g;try{b2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g}catch{}var x2=(function(){return function(t,e){return t.replace(b2,function(n,a,i,s,o,l){var c=qj(s)-(i?0:e.c),u=Uj(l)-(o?0:e.r),f=o=="$"?u+1:u==0?"":"["+u+"]",h=i=="$"?c+1:c==0?"":"["+c+"]";return a+"R"+f+"C"+h})}})();function d1e(r,t){return r.replace(b2,function(e,n,a,i,s,o){return n+(a=="$"?a+i:Bn(qj(i)+t.c))+(s=="$"?s+o:zn(Uj(o)+t.r))})}function f1e(r){return r.length!=1}function Ha(r){r.l+=1}function vf(r,t){var e=r.read_shift(2);return[e&16383,e>>14&1,e>>15&1]}function Dq(r,t,e){var n=2;if(e){if(e.biff>=2&&e.biff<=5)return Lq(r);e.biff==12&&(n=4)}var a=r.read_shift(n),i=r.read_shift(n),s=vf(r),o=vf(r);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function Lq(r){var t=vf(r),e=vf(r),n=r.read_shift(1),a=r.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:e[0],c:a,cRel:e[1],rRel:e[2]}}}function h1e(r,t,e){if(e.biff<8)return Lq(r);var n=r.read_shift(e.biff==12?4:2),a=r.read_shift(e.biff==12?4:2),i=vf(r),s=vf(r);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function Bq(r,t,e){if(e&&e.biff>=2&&e.biff<=5)return p1e(r);var n=r.read_shift(e&&e.biff==12?4:2),a=vf(r);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function p1e(r){var t=vf(r),e=r.read_shift(1);return{r:t[0],c:e,cRel:t[1],rRel:t[2]}}function m1e(r){var t=r.read_shift(2),e=r.read_shift(2);return{r:t,c:e&255,fQuoted:!!(e&16384),cRel:e>>15,rRel:e>>15}}function g1e(r,t,e){var n=e&&e.biff?e.biff:8;if(n>=2&&n<=5)return y1e(r);var a=r.read_shift(n>=12?4:2),i=r.read_shift(2),s=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:o}}function y1e(r){var t=r.read_shift(2),e=r.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&e>=128&&(e=e-256),{r:t,c:e,cRel:a,rRel:n}}function v1e(r,t,e){var n=(r[r.l++]&96)>>5,a=Dq(r,e.biff>=2&&e.biff<=5?6:8,e);return[n,a]}function b1e(r,t,e){var n=(r[r.l++]&96)>>5,a=r.read_shift(2,"i"),i=8;if(e)switch(e.biff){case 5:r.l+=12,i=6;break;case 12:i=12;break}var s=Dq(r,i,e);return[n,a,s]}function x1e(r,t,e){var n=(r[r.l++]&96)>>5;return r.l+=e&&e.biff>8?12:e.biff<8?6:8,[n]}function w1e(r,t,e){var n=(r[r.l++]&96)>>5,a=r.read_shift(2),i=8;if(e)switch(e.biff){case 5:r.l+=12,i=6;break;case 12:i=12;break}return r.l+=i,[n,a]}function _1e(r,t,e){var n=(r[r.l++]&96)>>5,a=h1e(r,t-1,e);return[n,a]}function S1e(r,t,e){var n=(r[r.l++]&96)>>5;return r.l+=e.biff==2?6:e.biff==12?14:7,[n]}function WM(r){var t=r[r.l+1]&1,e=1;return r.l+=4,[t,e]}function N1e(r,t,e){r.l+=2;for(var n=r.read_shift(e&&e.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(r.read_shift(e&&e.biff==2?1:2));return a}function j1e(r,t,e){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(e&&e.biff==2?1:2)]}function k1e(r,t,e){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(e&&e.biff==2?1:2)]}function E1e(r){var t=r[r.l+1]&255?1:0;return r.l+=2,[t,r.read_shift(2)]}function A1e(r,t,e){var n=r[r.l+1]&255?1:0;return r.l+=e&&e.biff==2?3:4,[n]}function $q(r){var t=r.read_shift(1),e=r.read_shift(1);return[t,e]}function T1e(r){return r.read_shift(2),$q(r)}function C1e(r){return r.read_shift(2),$q(r)}function P1e(r,t,e){var n=(r[r.l]&96)>>5;r.l+=1;var a=Bq(r,0,e);return[n,a]}function O1e(r,t,e){var n=(r[r.l]&96)>>5;r.l+=1;var a=g1e(r,0,e);return[n,a]}function I1e(r,t,e){var n=(r[r.l]&96)>>5;r.l+=1;var a=r.read_shift(2);e&&e.biff==5&&(r.l+=12);var i=Bq(r,0,e);return[n,a,i]}function M1e(r,t,e){var n=(r[r.l]&96)>>5;r.l+=1;var a=r.read_shift(e&&e.biff<=3?1:2);return[Hve[a],zq[a],n]}function R1e(r,t,e){var n=r[r.l++],a=r.read_shift(1),i=e&&e.biff<=3?[n==88?-1:0,r.read_shift(1)]:F1e(r);return[a,(i[0]===0?zq:Wve)[i[1]]]}function F1e(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function D1e(r,t,e){r.l+=e&&e.biff==2?3:4}function L1e(r,t,e){if(r.l++,e&&e.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),a=r.read_shift(e&&e.biff==2?1:2);return[n,a]}function B1e(r){return r.l++,Vs[r.read_shift(1)]}function $1e(r){return r.l++,r.read_shift(2)}function U1e(r){return r.l++,r.read_shift(1)!==0}function q1e(r){return r.l++,_m(r)}function z1e(r,t,e){return r.l++,Nq(r,t-1,e)}function W1e(r,t){var e=[r.read_shift(1)];if(t==12)switch(e[0]){case 2:e[0]=4;break;case 4:e[0]=16;break;case 0:e[0]=1;break;case 1:e[0]=2;break}switch(e[0]){case 4:e[1]=Tge(r,1)?"TRUE":"FALSE",t!=12&&(r.l+=7);break;case 37:case 16:e[1]=Vs[r[r.l]],r.l+=t==12?4:8;break;case 0:r.l+=8;break;case 1:e[1]=_m(r);break;case 2:e[1]=Ige(r,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+e[0])}return e}function H1e(r,t,e){for(var n=r.read_shift(e.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((e.biff==12?r0:Fge)(r));return a}function V1e(r,t,e){var n=0,a=0;e.biff==12?(n=r.read_shift(4),a=r.read_shift(4)):(a=1+r.read_shift(1),n=1+r.read_shift(2)),e.biff>=2&&e.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var o=0;o!=a;++o)s[i][o]=W1e(r,e.biff);return s}function G1e(r,t,e){var n=r.read_shift(1)>>>5&3,a=!e||e.biff>=8?4:2,i=r.read_shift(a);switch(e.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,i]}function K1e(r,t,e){if(e.biff==5)return X1e(r);var n=r.read_shift(1)>>>5&3,a=r.read_shift(2),i=r.read_shift(4);return[n,a,i]}function X1e(r){var t=r.read_shift(1)>>>5&3,e=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[t,e,n]}function Y1e(r,t,e){var n=r.read_shift(1)>>>5&3;r.l+=e&&e.biff==2?3:4;var a=r.read_shift(e&&e.biff==2?1:2);return[n,a]}function J1e(r,t,e){var n=r.read_shift(1)>>>5&3,a=r.read_shift(e&&e.biff==2?1:2);return[n,a]}function Z1e(r,t,e){var n=r.read_shift(1)>>>5&3;return r.l+=4,e.biff<8&&r.l--,e.biff==12&&(r.l+=2),[n]}function Q1e(r,t,e){var n=(r[r.l++]&96)>>5,a=r.read_shift(2),i=4;if(e)switch(e.biff){case 5:i=15;break;case 12:i=6;break}return r.l+=i,[n,a]}var eve=Yc,tve=Yc,rve=Yc;function Jy(r,t,e){return r.l+=2,[m1e(r)]}function Kj(r){return r.l+=6,[]}var nve=Jy,ave=Kj,ive=Kj,sve=Jy;function Uq(r){return r.l+=2,[Tv(r),r.read_shift(2)&1]}var ove=Jy,lve=Uq,cve=Kj,uve=Jy,dve=Jy,fve=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function hve(r){r.l+=2;var t=r.read_shift(2),e=r.read_shift(2),n=r.read_shift(4),a=r.read_shift(2),i=r.read_shift(2),s=fve[e>>2&31];return{ixti:t,coltype:e&3,rt:s,idx:n,c:a,C:i}}function pve(r){return r.l+=2,[r.read_shift(4)]}function mve(r,t,e){return r.l+=5,r.l+=2,r.l+=e.biff==2?1:4,["PTGSHEET"]}function gve(r,t,e){return r.l+=e.biff==2?4:5,["PTGENDSHEET"]}function yve(r){var t=r.read_shift(1)>>>5&3,e=r.read_shift(2);return[t,e]}function vve(r){var t=r.read_shift(1)>>>5&3,e=r.read_shift(2);return[t,e]}function bve(r){return r.l+=4,[0,0]}var HM={1:{n:"PtgExp",f:L1e},2:{n:"PtgTbl",f:rve},3:{n:"PtgAdd",f:Ha},4:{n:"PtgSub",f:Ha},5:{n:"PtgMul",f:Ha},6:{n:"PtgDiv",f:Ha},7:{n:"PtgPower",f:Ha},8:{n:"PtgConcat",f:Ha},9:{n:"PtgLt",f:Ha},10:{n:"PtgLe",f:Ha},11:{n:"PtgEq",f:Ha},12:{n:"PtgGe",f:Ha},13:{n:"PtgGt",f:Ha},14:{n:"PtgNe",f:Ha},15:{n:"PtgIsect",f:Ha},16:{n:"PtgUnion",f:Ha},17:{n:"PtgRange",f:Ha},18:{n:"PtgUplus",f:Ha},19:{n:"PtgUminus",f:Ha},20:{n:"PtgPercent",f:Ha},21:{n:"PtgParen",f:Ha},22:{n:"PtgMissArg",f:Ha},23:{n:"PtgStr",f:z1e},26:{n:"PtgSheet",f:mve},27:{n:"PtgEndSheet",f:gve},28:{n:"PtgErr",f:B1e},29:{n:"PtgBool",f:U1e},30:{n:"PtgInt",f:$1e},31:{n:"PtgNum",f:q1e},32:{n:"PtgArray",f:S1e},33:{n:"PtgFunc",f:M1e},34:{n:"PtgFuncVar",f:R1e},35:{n:"PtgName",f:G1e},36:{n:"PtgRef",f:P1e},37:{n:"PtgArea",f:v1e},38:{n:"PtgMemArea",f:Y1e},39:{n:"PtgMemErr",f:eve},40:{n:"PtgMemNoMem",f:tve},41:{n:"PtgMemFunc",f:J1e},42:{n:"PtgRefErr",f:Z1e},43:{n:"PtgAreaErr",f:x1e},44:{n:"PtgRefN",f:O1e},45:{n:"PtgAreaN",f:_1e},46:{n:"PtgMemAreaN",f:yve},47:{n:"PtgMemNoMemN",f:vve},57:{n:"PtgNameX",f:K1e},58:{n:"PtgRef3d",f:I1e},59:{n:"PtgArea3d",f:b1e},60:{n:"PtgRefErr3d",f:Q1e},61:{n:"PtgAreaErr3d",f:w1e},255:{}},xve={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},wve={1:{n:"PtgElfLel",f:Uq},2:{n:"PtgElfRw",f:uve},3:{n:"PtgElfCol",f:nve},6:{n:"PtgElfRwV",f:dve},7:{n:"PtgElfColV",f:sve},10:{n:"PtgElfRadical",f:ove},11:{n:"PtgElfRadicalS",f:cve},13:{n:"PtgElfColS",f:ave},15:{n:"PtgElfColSV",f:ive},16:{n:"PtgElfRadicalLel",f:lve},25:{n:"PtgList",f:hve},29:{n:"PtgSxName",f:pve},255:{}},_ve={0:{n:"PtgAttrNoop",f:bve},1:{n:"PtgAttrSemi",f:A1e},2:{n:"PtgAttrIf",f:k1e},4:{n:"PtgAttrChoose",f:N1e},8:{n:"PtgAttrGoto",f:j1e},16:{n:"PtgAttrSum",f:D1e},32:{n:"PtgAttrBaxcel",f:WM},33:{n:"PtgAttrBaxcel",f:WM},64:{n:"PtgAttrSpace",f:T1e},65:{n:"PtgAttrSpaceSemi",f:C1e},128:{n:"PtgAttrIfError",f:E1e},255:{}};function Sve(r,t,e,n){if(n.biff<8)return Yc(r,t);for(var a=r.l+t,i=[],s=0;s!==e.length;++s)switch(e[s][0]){case"PtgArray":e[s][1]=V1e(r,0,n),i.push(e[s][1]);break;case"PtgMemArea":e[s][2]=H1e(r,e[s][1],n),i.push(e[s][2]);break;case"PtgExp":n&&n.biff==12&&(e[s][1][1]=r.read_shift(4),i.push(e[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+e[s][0]}return t=a-r.l,t!==0&&i.push(Yc(r,t)),i}function Nve(r,t,e){for(var n=r.l+t,a,i,s=[];n!=r.l;)t=n-r.l,i=r[r.l],a=HM[i]||HM[xve[i]],(i===24||i===25)&&(a=(i===24?wve:_ve)[r[r.l+1]]),!a||!a.f?Yc(r,t):s.push([a.n,a.f(r,t,e)]);return s}function jve(r){for(var t=[],e=0;e<r.length;++e){for(var n=r[e],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var kve={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Eve(r,t){var e=r.lastIndexOf("!"),n=t.lastIndexOf("!");return e==-1&&n==-1?r+":"+t:e>0&&n>0&&r.slice(0,e).toLowerCase()==t.slice(0,n).toLowerCase()?r+":"+t.slice(n+1):(console.error("Cannot hydrate range",r,t),r+":"+t)}function qq(r,t,e){if(!r)return"SH33TJSERR0";if(e.biff>8&&(!r.XTI||!r.XTI[t]))return r.SheetNames[t];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[t];if(e.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":r.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(e.biff>8)switch(r[n[0]][0]){case 357:return a=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?a:a+":"+r.SheetNames[n[2]];case 358:return e.SID!=null?r.SheetNames[e.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return r[n[0]][0][3]?(a=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function VM(r,t,e){var n=qq(r,t,e);return n=="#REF"?n:Cy(n,e)}function am(r,t,e,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},o=[],l,c,u,f=0,h=0,p,g="";if(!r[0]||!r[0][0])return"";for(var y=-1,m="",v=0,b=r[0].length;v<b;++v){var x=r[0][v];switch(x[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),y>=0){switch(r[0][y][1][0]){case 0:m=ma(" ",r[0][y][1][1]);break;case 1:m=ma("\r",r[0][y][1][1]);break;default:if(m="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][y][1][0])}c=c+m,y=-1}o.push(c+kve[x[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(Eve(c,l));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Og(x[1][1],s,a),o.push(Ig(u,i));break;case"PtgRefN":u=e?Og(x[1][1],e,a):x[1][1],o.push(Ig(u,i));break;case"PtgRef3d":f=x[1][1],u=Og(x[1][2],s,a),g=VM(n,f,a),o.push(g+"!"+Ig(u,i));break;case"PtgFunc":case"PtgFuncVar":var S=x[1][0],_=x[1][1];S||(S=0),S&=127;var I=S==0?[]:o.slice(-S);o.length-=S,_==="User"&&(_=I.shift()),o.push(_+"("+I.join(",")+")");break;case"PtgBool":o.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(x[1]);break;case"PtgNum":o.push(String(x[1]));break;case"PtgStr":o.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(x[1]);break;case"PtgAreaN":p=EM(x[1][1],e?{s:e}:s,a),o.push(wS(p,a));break;case"PtgArea":p=EM(x[1][1],s,a),o.push(wS(p,a));break;case"PtgArea3d":f=x[1][1],p=x[1][2],g=VM(n,f,a),o.push(g+"!"+wS(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=x[1][2];var A=(n.names||[])[h-1]||(n[0]||[])[h],O=A?A.Name:"SH33TJSNAME"+String(h);O&&O.slice(0,6)=="_xlfn."&&!a.xlfn&&(O=O.slice(6)),o.push(O);break;case"PtgNameX":var M=x[1][1];h=x[1][2];var z;if(a.biff<=5)M<0&&(M=-M),n[M]&&(z=n[M][h]);else{var U="";if(((n[M]||[])[0]||[])[0]==14849||(((n[M]||[])[0]||[])[0]==1025?n[M][h]&&n[M][h].itab>0&&(U=n.SheetNames[n[M][h].itab-1]+"!"):U=n.SheetNames[h-1]+"!"),n[M]&&n[M][h])U+=n[M][h].Name;else if(n[0]&&n[0][h])U+=n[0][h].Name;else{var D=(qq(n,M,a)||"").split(";;");D[h-1]?U=D[h-1]:U+="SH33TJSERRX"}o.push(U);break}z||(z={Name:"SH33TJSERRY"}),o.push(z.Name);break;case"PtgParen":var T="(",R=")";if(y>=0){switch(m="",r[0][y][1][0]){case 2:T=ma(" ",r[0][y][1][1])+T;break;case 3:T=ma("\r",r[0][y][1][1])+T;break;case 4:R=ma(" ",r[0][y][1][1])+R;break;case 5:R=ma("\r",r[0][y][1][1])+R;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][y][1][0])}y=-1}o.push(T+o.pop()+R);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:x[1][1],r:x[1][0]};var C={c:e.c,r:e.r};if(n.sharedf[_a(u)]){var N=n.sharedf[_a(u)];o.push(am(N,s,C,n,a))}else{var E=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(am(c[1],s,C,n,a)),E=!0;break}E||o.push(x[1])}break;case"PtgArray":o.push("{"+jve(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var k=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&y>=0&&k.indexOf(r[0][v][0])==-1){x=r[0][y];var P=!0;switch(x[1][0]){case 4:P=!1;case 0:m=ma(" ",x[1][1]);break;case 5:P=!1;case 1:m=ma("\r",x[1][1]);break;default:if(m="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}o.push((P?m:"")+o.pop()+(P?"":m)),y=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]=="TRUE"?!0:o[0]=="FALSE"?!1:o[0]}function Ave(r){if(r==null){var t=xt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof r=="number")return qh(r);return qh(0)}function Tve(r,t,e,n,a){var i=zh(t,e,a),s=Ave(r.v),o=xt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=xt(r.bf.length),u=0;u<r.bf.length;++u)c[u]=r.bf[u];var f=Ya([i,s,o,c]);return f}function w2(r,t,e){var n=r.read_shift(4),a=Nve(r,n,e),i=r.read_shift(4),s=i>0?Sve(r,i,a,e):null;return[a,s]}var Cve=w2,_2=w2,Pve=w2,Ove=w2;function GM(r){if((r|0)==r&&r<Math.pow(2,16)&&r>=0){var t=xt(11);return t.write_shift(4,3),t.write_shift(1,30),t.write_shift(2,r),t.write_shift(4,0),t}var e=xt(17);return e.write_shift(4,11),e.write_shift(1,31),e.write_shift(8,r),e.write_shift(4,0),e}function Ive(r){var t=xt(10);return t.write_shift(4,2),t.write_shift(1,28),t.write_shift(1,r),t.write_shift(4,0),t}function Mve(r){var t=xt(10);return t.write_shift(4,2),t.write_shift(1,29),t.write_shift(1,r?1:0),t.write_shift(4,0),t}function Rve(r){var t=xt(7);t.write_shift(4,3+2*r.length),t.write_shift(1,23),t.write_shift(2,r.length);var e=xt(2*r.length);e.write_shift(2*r.length,r,"utf16le");var n=xt(4);return n.write_shift(4,0),Ya([t,e,n])}function Fve(r){var t=ya(r),e=xt(15);return e.write_shift(4,7),e.write_shift(1,36),e.write_shift(4,t.r),e.write_shift(2,t.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),e.write_shift(4,0),e}function Dve(r,t){var e=r.lastIndexOf("!"),n=r.slice(0,e);r=r.slice(e+1);var a=ya(r);n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var i=xt(17);return i.write_shift(4,9),i.write_shift(1,58),i.write_shift(2,2+t.SheetNames.map(function(s){return s.toLowerCase()}).indexOf(n.toLowerCase())),i.write_shift(4,a.r),i.write_shift(2,a.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),i.write_shift(4,0),i}function Lve(r,t){var e=r.lastIndexOf("!"),n=r.slice(0,e);r=r.slice(e+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var a=xt(17);return a.write_shift(4,9),a.write_shift(1,60),a.write_shift(2,2+t.SheetNames.map(function(i){return i.toLowerCase()}).indexOf(n.toLowerCase())),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(4,0),a}function Bve(r){var t=r.split(":"),e=t[0],n=xt(23);n.write_shift(4,15),e=t[0];var a=ya(e);return n.write_shift(1,36),n.write_shift(4,a.r),n.write_shift(2,a.c|(e.charAt(0)=="$"?0:1)<<14|(e.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),e=t[1],a=ya(e),n.write_shift(1,36),n.write_shift(4,a.r),n.write_shift(2,a.c|(e.charAt(0)=="$"?0:1)<<14|(e.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),n.write_shift(1,17),n.write_shift(4,0),n}function $ve(r,t){var e=r.lastIndexOf("!"),n=r.slice(0,e);r=r.slice(e+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var a=r.split(":"),i=xt(27);i.write_shift(4,19);var s=a[0],o=ya(s);return i.write_shift(1,58),i.write_shift(2,2+t.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(n.toLowerCase())),i.write_shift(4,o.r),i.write_shift(2,o.c|(s.charAt(0)=="$"?0:1)<<14|(s.match(/\$\d/)?0:1)<<15),s=a[1],o=ya(s),i.write_shift(1,58),i.write_shift(2,2+t.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(n.toLowerCase())),i.write_shift(4,o.r),i.write_shift(2,o.c|(s.charAt(0)=="$"?0:1)<<14|(s.match(/\$\d/)?0:1)<<15),i.write_shift(1,17),i.write_shift(4,0),i}function Uve(r,t){var e=r.lastIndexOf("!"),n=r.slice(0,e);r=r.slice(e+1),n.charAt(0)=="'"&&(n=n.slice(1,-1).replace(/''/g,"'"));var a=Qi(r),i=xt(23);return i.write_shift(4,15),i.write_shift(1,59),i.write_shift(2,2+t.SheetNames.map(function(s){return s.toLowerCase()}).indexOf(n.toLowerCase())),i.write_shift(4,a.s.r),i.write_shift(4,a.e.r),i.write_shift(2,a.s.c),i.write_shift(2,a.e.c),i.write_shift(4,0),i}function qve(r,t){if(typeof r=="number")return GM(r);if(typeof r=="boolean")return Mve(r);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(r))return Ive(+$c[r]);if(r.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return Fve(r);if(r.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return Bve(r);if(r.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return Uve(r,t);if(r.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return Dve(r,t);if(r.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return $ve(r,t);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(r))return Lve(r,t);if(/^".*"$/.test(r))return Rve(r);if(/^[+-]\d+$/.test(r))return GM(parseInt(r,10));throw"Formula |"+r+"| not supported for XLSB"}var zve=qve,Wve={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},zq={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Hve={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Vve(r){var t="of:="+r.replace(b2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Wq(r){return r.replace(/!/,".").replace(/:/,":.")}var Mg=typeof Map<"u";function Xj(r,t,e){var n=0,a=r.length;if(e){if(Mg?e.has(t):Object.prototype.hasOwnProperty.call(e,t)){for(var i=Mg?e.get(t):e[t];n<i.length;++n)if(r[i[n]].t===t)return r.Count++,i[n]}}else for(;n<a;++n)if(r[n].t===t)return r.Count++,n;return r[a]={t},r.Count++,r.Unique++,e&&(Mg?(e.has(t)||e.set(t,[]),e.get(t).push(a)):(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),e[t].push(a))),a}function S2(r,t){var e={min:r+1,max:r+1},n=-1;return t.MDW&&(Gu=t.MDW),t.width!=null?e.customWidth=1:t.wpx!=null?n=ux(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(e.width=z8(n),e.customWidth=1):t.width!=null&&(e.width=t.width),t.hidden&&(e.hidden=!0),t.level!=null&&(e.outlineLevel=e.level=t.level),e}function Hq(r,t){if(r){var e=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=e[0]),r.right==null&&(r.right=e[1]),r.top==null&&(r.top=e[2]),r.bottom==null&&(r.bottom=e[3]),r.header==null&&(r.header=e[4]),r.footer==null&&(r.footer=e[5])}}function Af(r,t,e){var n=e.revssf[t.z!=null?t.z:"General"],a=60,i=r.length;if(n==null&&e.ssf){for(;a<392;++a)if(e.ssf[a]==null){bme(t.z,a),e.ssf[a]=t.z,e.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(r[a].numFmtId===n)return a;return r[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Gve(r,t,e){if(r&&r["!ref"]){var n=ca(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+e+"): "+r["!ref"])}}function Kve(r){if(r.length===0)return"";for(var t='<mergeCells count="'+r.length+'">',e=0;e!=r.length;++e)t+='<mergeCell ref="'+Za(r[e])+'"/>';return t+"</mergeCells>"}function Xve(r,t,e,n,a){var i=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[e];try{t.Workbook&&(l=t.Workbook.Sheets[e].CodeName||l)}catch{}i=!0,s.codeName=Ey(en(l))}if(r&&r["!outline"]){var c={summaryBelow:1,summaryRight:1};r["!outline"].above&&(c.summaryBelow=0),r["!outline"].left&&(c.summaryRight=0),o=(o||"")+tr("outlinePr",null,c)}!i&&!o||(a[a.length]=tr("sheetPr",o,s))}var Yve=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Jve=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Zve(r){var t={sheet:1};return Yve.forEach(function(e){r[e]!=null&&r[e]&&(t[e]="1")}),Jve.forEach(function(e){r[e]!=null&&!r[e]&&(t[e]="0")}),r.password&&(t.password=Tq(r.password).toString(16).toUpperCase()),tr("sheetProtection",null,t)}function Qve(r){return Hq(r),tr("pageMargins",null,r)}function ebe(r,t){for(var e=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(e[e.length]=tr("col",null,S2(a,n)));return e[e.length]="</cols>",e.join("")}function tbe(r,t,e,n){var a=typeof r.ref=="string"?r.ref:Za(r.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var i=e.Workbook.Names,s=Qi(a);s.s.r==s.e.r&&(s.e.r=Qi(t["!ref"]).e.r,a=Za(s));for(var o=0;o<i.length;++o){var l=i[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref=Cy(e.SheetNames[n])+"!"+Ty(a);break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+e.SheetNames[n]+"'!"+a}),tr("autoFilter",null,{ref:a})}function rbe(r,t,e,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),tr("sheetViews",tr("sheetView",null,a),{})}function nbe(r,t,e,n,a,i,s){if(r.c&&e["!comments"].push([t,r.c]),(r.v===void 0||r.t==="z"&&!(n||{}).sheetStubs)&&typeof r.f!="string"&&typeof r.z>"u")return"";var o="",l=r.t,c=r.v;if(r.t!=="z")switch(r.t){case"b":o=r.v?"1":"0";break;case"n":isNaN(r.v)?(r.t="e",o=Vs[r.v=36]):isFinite(r.v)?o=""+r.v:(r.t="e",o=Vs[r.v=7]);break;case"e":o=Vs[r.v];break;case"d":if(n&&n.cellDates){var u=vo(r.v,s);o=u.toISOString(),u.getUTCFullYear()<1900&&(o=o.slice(o.indexOf("T")+1).replace("Z",""))}else r=Es(r),r.t="n",o=""+(r.v=es(vo(r.v,s),s));typeof r.z>"u"&&(r.z=la[14]);break;default:o=r.v;break}var f=r.t=="z"||r.v==null?"":Ji("v",en(o)),h={r:t},p=Af(n.cellXfs,r,n);switch(p!==0&&(h.s=p),r.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){f=Ji("v",""+Xj(n.Strings,r.v,n.revStrings)),h.t="s";break}else h.t="str";break}if(r.t!=l&&(r.t=l,r.v=c),typeof r.f=="string"&&r.f){var g=r.F&&r.F.slice(0,t.length)==t?{t:"array",ref:r.F}:null;f=tr("f",en(r.f),g)+(r.v!=null?f:"")}return r.l&&(r.l.display=en(o),e["!links"].push([t,r.l])),r.D&&(h.cm=1),tr("c",f,h)}function abe(r,t,e,n){var a=[],i=[],s=ca(r["!ref"]),o="",l,c="",u=[],f=0,h=0,p=r["!rows"],g=r["!data"]!=null,y=g?r["!data"]:[],m={r:c},v,b=-1,x=(((n||{}).Workbook||{}).WBProps||{}).date1904;for(h=s.s.c;h<=s.e.c;++h)u[h]=Bn(h);for(f=s.s.r;f<=s.e.r;++f){i=[],c=zn(f);var S=g?y[f]:[];for(h=s.s.c;h<=s.e.c;++h){l=u[h]+c;var _=g?S[h]:r[l];_!==void 0&&(o=nbe(_,l,r,t,e,n,x))!=null&&i.push(o)}(i.length>0||p&&p[f])&&(m={r:c},p&&p[f]&&(v=p[f],v.hidden&&(m.hidden=1),b=-1,v.hpx?b=dx(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(m.ht=b,m.customHeight=1),v.level&&(m.outlineLevel=v.level)),a[a.length]=tr("row",i.join(""),m))}if(p)for(;f<p.length;++f)p&&p[f]&&(m={r:f+1},v=p[f],v.hidden&&(m.hidden=1),b=-1,v.hpx?b=dx(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(m.ht=b,m.customHeight=1),v.level&&(m.outlineLevel=v.level),a[a.length]=tr("row","",m));return a.join("")}function ibe(r,t,e,n){var a=[ei,tr("worksheet",null,{xmlns:vm[0],"xmlns:r":Ci.r})],i=e.SheetNames[r],s=0,o="",l=e.Sheets[i];l==null&&(l={});var c=l["!ref"]||"A1",u=ca(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Za(u)}n||(n={}),l["!comments"]=[];var f=[];Xve(l,e,r,t,a),a[a.length]=tr("dimension",null,{ref:c}),a[a.length]=rbe(l,t,r,e),t.sheetFormat&&(a[a.length]=tr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=ebe(l,l["!cols"])),a[s=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=abe(l,t,r,e),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),l["!protect"]&&(a[a.length]=Zve(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=tbe(l["!autofilter"],l,e,r)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=Kve(l["!merges"]));var h=-1,p,g=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(p={ref:y[0]},y[1].Target.charAt(0)!="#"&&(g=kn(n,-1,en(y[1].Target).replace(/#[\s\S]*$/,""),mn.HLINK),p["r:id"]="rId"+g),(h=y[1].Target.indexOf("#"))>-1&&(p.location=en(y[1].Target.slice(h+1))),y[1].Tooltip&&(p.tooltip=en(y[1].Tooltip)),p.display=y[1].display,a[a.length]=tr("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=Qve(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Ji("ignoredErrors",tr("ignoredError",null,{numberStoredAsText:1,sqref:c}))),f.length>0&&(g=kn(n,-1,"../drawings/drawing"+(r+1)+".xml",mn.DRAW),a[a.length]=tr("drawing",null,{"r:id":"rId"+g}),l["!drawing"]=f),l["!comments"].length>0&&(g=kn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",mn.VML),a[a.length]=tr("legacyDrawing",null,{"r:id":"rId"+g}),l["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function sbe(r,t){var e={},n=r.l+t;e.r=r.read_shift(4),r.l+=4;var a=r.read_shift(2);r.l+=1;var i=r.read_shift(1);return r.l=n,i&7&&(e.level=i&7),i&16&&(e.hidden=!0),i&32&&(e.hpt=a/20),e}function obe(r,t,e){var n=xt(145),a=(e["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var i=320;a.hpx?i=dx(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r,c:0},u=e["!data"]!=null,f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var h=-1,p=-1,g=f<<10;g<f+1<<10;++g){c.c=g;var y=u?(e["!data"][c.r]||[])[c.c]:e[_a(c)];y&&(h<0&&(h=g),p=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,p))}var m=n.l;return n.l=l,n.write_shift(4,o),n.l=m,n.length>n.l?n.slice(0,n.l):n}function lbe(r,t,e,n){var a=obe(n,e,t);(a.length>17||(t["!rows"]||[])[n])&&Dt(r,0,a)}var cbe=r0,ube=wm;function dbe(){}function fbe(r,t){var e={},n=r[r.l];return++r.l,e.above=!(n&64),e.left=!(n&128),r.l+=18,e.name=sge(r),e}function hbe(r,t,e){e==null&&(e=xt(84+4*r.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),e.write_shift(1,n);for(var a=1;a<3;++a)e.write_shift(1,0);return ox({auto:1},e),e.write_shift(-4,-1),e.write_shift(-4,-1),uq(r,e),e.slice(0,e.l)}function pbe(r){var t=xl(r);return[t]}function mbe(r,t,e){return e==null&&(e=xt(8)),Qh(t,e)}function gbe(r){var t=e0(r);return[t]}function ybe(r,t,e){return e==null&&(e=xt(4)),t0(t,e)}function vbe(r){var t=xl(r),e=r.read_shift(1);return[t,e,"b"]}function bbe(r,t,e){return e==null&&(e=xt(9)),Qh(t,e),e.write_shift(1,r.v?1:0),e}function xbe(r){var t=e0(r),e=r.read_shift(1);return[t,e,"b"]}function wbe(r,t,e){return e==null&&(e=xt(5)),t0(t,e),e.write_shift(1,r.v?1:0),e}function _be(r){var t=xl(r),e=r.read_shift(1);return[t,e,"e"]}function kS(r,t,e){return e==null&&(e=xt(9)),Qh(t,e),e.write_shift(1,r.v),e}function Sbe(r){var t=e0(r),e=r.read_shift(1);return[t,e,"e"]}function ES(r,t,e){return e==null&&(e=xt(8)),t0(t,e),e.write_shift(1,r.v),e.write_shift(2,0),e.write_shift(1,0),e}function Nbe(r){var t=xl(r),e=r.read_shift(4);return[t,e,"s"]}function jbe(r,t,e){return e==null&&(e=xt(12)),Qh(t,e),e.write_shift(4,t.v),e}function kbe(r){var t=e0(r),e=r.read_shift(4);return[t,e,"s"]}function Ebe(r,t,e){return e==null&&(e=xt(8)),t0(t,e),e.write_shift(4,t.v),e}function Abe(r){var t=xl(r),e=_m(r);return[t,e,"n"]}function Tbe(r,t,e){return e==null&&(e=xt(16)),Qh(t,e),qh(r.v,e),e}function Cbe(r){var t=e0(r),e=_m(r);return[t,e,"n"]}function Pbe(r,t,e){return e==null&&(e=xt(12)),t0(t,e),qh(r.v,e),e}function Obe(r){var t=xl(r),e=Hj(r);return[t,e,"n"]}function Ibe(r,t,e){return e==null&&(e=xt(12)),Qh(t,e),dq(r.v,e),e}function Mbe(r){var t=e0(r),e=Hj(r);return[t,e,"n"]}function Rbe(r,t,e){return e==null&&(e=xt(8)),t0(t,e),dq(r.v,e),e}function Fbe(r){var t=xl(r),e=zj(r);return[t,e,"is"]}function Dbe(r){var t=xl(r),e=ks(r);return[t,e,"str"]}function Lbe(r,t,e){var n=r.v==null?"":String(r.v);return e==null&&(e=xt(12+4*r.v.length)),Qh(t,e),fi(n,e),e.length>e.l?e.slice(0,e.l):e}function Bbe(r){var t=e0(r),e=ks(r);return[t,e,"str"]}function $be(r,t,e){var n=r.v==null?"":String(r.v);return e==null&&(e=xt(8+4*n.length)),t0(t,e),fi(n,e),e.length>e.l?e.slice(0,e.l):e}function Ube(r,t,e){var n=r.l+t,a=xl(r);a.r=e["!row"];var i=r.read_shift(1),s=[a,i,"b"];if(e.cellFormula){r.l+=2;var o=_2(r,n-r.l,e);s[3]=am(o,null,a,e.supbooks,e)}else r.l=n;return s}function qbe(r,t,e){var n=r.l+t,a=xl(r);a.r=e["!row"];var i=r.read_shift(1),s=[a,i,"e"];if(e.cellFormula){r.l+=2;var o=_2(r,n-r.l,e);s[3]=am(o,null,a,e.supbooks,e)}else r.l=n;return s}function zbe(r,t,e){var n=r.l+t,a=xl(r);a.r=e["!row"];var i=_m(r),s=[a,i,"n"];if(e.cellFormula){r.l+=2;var o=_2(r,n-r.l,e);s[3]=am(o,null,a,e.supbooks,e)}else r.l=n;return s}function Wbe(r,t,e){var n=r.l+t,a=xl(r);a.r=e["!row"];var i=ks(r),s=[a,i,"str"];if(e.cellFormula){r.l+=2;var o=_2(r,n-r.l,e);s[3]=am(o,null,a,e.supbooks,e)}else r.l=n;return s}var Hbe=r0,Vbe=wm;function Gbe(r,t){return t==null&&(t=xt(4)),t.write_shift(4,r),t}function Kbe(r,t){var e=r.l+t,n=r0(r),a=v2(r),i=ks(r),s=ks(r),o=ks(r);r.l=e;var l={rfx:n,relId:a,loc:i,display:o};return s&&(l.Tooltip=s),l}function Xbe(r,t){var e=xt(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));wm({s:ya(r[0]),e:ya(r[0])},e),Wj("rId"+t,e);var n=r[1].Target.indexOf("#"),a=n==-1?"":r[1].Target.slice(n+1);return fi(a||"",e),fi(r[1].Tooltip||"",e),fi("",e),e.slice(0,e.l)}function Ybe(){}function Jbe(r,t,e){var n=r.l+t,a=fq(r),i=r.read_shift(1),s=[a];if(s[2]=i,e.cellFormula){var o=Cve(r,n-r.l,e);s[1]=o}else r.l=n;return s}function Zbe(r,t,e){var n=r.l+t,a=r0(r),i=[a];if(e.cellFormula){var s=Ove(r,n-r.l,e);i[1]=s,r.l=n}else r.l=n;return i}function Qbe(r,t,e){e==null&&(e=xt(18));var n=S2(r,t);e.write_shift(-4,r),e.write_shift(-4,r),e.write_shift(4,(n.width||10)*256),e.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),e.write_shift(2,a),e}var Vq=["left","right","top","bottom","header","footer"];function exe(r){var t={};return Vq.forEach(function(e){t[e]=_m(r)}),t}function txe(r,t){return t==null&&(t=xt(48)),Hq(r),Vq.forEach(function(e){qh(r[e],t)}),t}function rxe(r){var t=r.read_shift(2);return r.l+=28,{RTL:t&32}}function nxe(r,t,e){e==null&&(e=xt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,100),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(4,0),e}function axe(r){var t=xt(24);return t.write_shift(4,4),t.write_shift(4,1),wm(r,t),t}function ixe(r,t){return t==null&&(t=xt(66)),t.write_shift(2,r.password?Tq(r.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?t.write_shift(4,r[e[0]]!=null&&!r[e[0]]?1:0):t.write_shift(4,r[e[0]]!=null&&r[e[0]]?0:1)}),t}function sxe(){}function oxe(){}function lxe(r,t,e,n,a,i,s,o){var l={r:e,c:n};if(t.c&&i["!comments"].push([_a(l),t.c]),t.v===void 0)return!1;var c="";switch(t.t){case"b":c=t.v?"1":"0";break;case"d":t=Es(t),t.z=t.z||la[14],t.v=es(vo(t.v,o),o),t.t="n";break;case"n":case"e":c=""+t.v;break;default:c=t.v;break}switch(l.s=Af(a.cellXfs,t,a),t.l&&i["!links"].push([_a(l),t.l]),t.t){case"s":case"str":return a.bookSST?(c=Xj(a.Strings,t.v==null?"":String(t.v),a.revStrings),l.t="s",l.v=c,s?Dt(r,18,Ebe(t,l)):Dt(r,7,jbe(t,l))):(l.t="str",s?Dt(r,17,$be(t,l)):Dt(r,6,Lbe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Dt(r,13,Rbe(t,l)):Dt(r,2,Ibe(t,l)):isFinite(t.v)?s?Dt(r,16,Pbe(t,l)):Dt(r,5,Tbe(t,l)):(l.t="e",isNaN(t.v)?s?Dt(r,14,ES({v:36},l)):Dt(r,3,kS({v:36},l)):s?Dt(r,14,ES({v:7},l)):Dt(r,3,kS({v:7},l))),!0;case"b":return l.t="b",s?Dt(r,15,wbe(t,l)):Dt(r,4,bbe(t,l)),!0;case"e":return l.t="e",s?Dt(r,14,ES(t,l)):Dt(r,3,kS(t,l)),!0}return s?Dt(r,12,ybe(t,l)):Dt(r,1,mbe(t,l)),!0}function cxe(r,t,e,n,a){var i=ca(t["!ref"]||"A1"),s="",o=[],l=(((a||{}).Workbook||{}).WBProps||{}).date1904;Dt(r,145);var c=t["!data"]!=null,u=c?t["!data"][i.s.r]:[],f=i.e.r;t["!rows"]&&(f=Math.max(i.e.r,t["!rows"].length-1));for(var h=i.s.r;h<=f;++h)if(s=zn(h),c&&(u=t["!data"][h]),lbe(r,t,i,h),!(c&&!u)){var p=!1;if(h<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){h===i.s.r&&(o[g]=Bn(g));var y=c?u[g]:t[o[g]+s];if(!y){p=!1;continue}p=lxe(r,y,h,g,n,t,p,l)}}Dt(r,146)}function uxe(r,t){!t||!t["!merges"]||(Dt(r,177,Gbe(t["!merges"].length)),t["!merges"].forEach(function(e){Dt(r,176,Vbe(e))}),Dt(r,178))}function dxe(r,t){!t||!t["!cols"]||(Dt(r,390),t["!cols"].forEach(function(e,n){e&&Dt(r,60,Qbe(n,e))}),Dt(r,391))}function fxe(r,t){!t||!t["!ref"]||(Dt(r,648),Dt(r,649,axe(ca(t["!ref"]))),Dt(r,650))}function hxe(r,t,e){t["!links"].forEach(function(n){if(n[1].Target){var a=kn(e,-1,n[1].Target.replace(/#[\s\S]*$/,""),mn.HLINK);Dt(r,494,Xbe(n,a))}}),delete t["!links"]}function pxe(r,t,e,n){if(t["!comments"].length>0){var a=kn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",mn.VML);Dt(r,551,Wj("rId"+a)),t["!legacy"]=a}}function mxe(r,t,e,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:Za(a.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var s=e.Workbook.Names,o=Qi(i);o.s.r==o.e.r&&(o.e.r=Qi(t["!ref"]).e.r,i=Za(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref=Cy(e.SheetNames[n])+"!"+Ty(i);break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:Cy(e.SheetNames[n])+"!"+Ty(i)}),Dt(r,161,wm(ca(i))),Dt(r,162)}}function gxe(r,t,e){Dt(r,133),Dt(r,137,nxe(t,e)),Dt(r,138),Dt(r,134)}function yxe(r,t){t["!protect"]&&Dt(r,535,ixe(t["!protect"]))}function vxe(r,t,e,n){var a=js(),i=e.SheetNames[r],s=e.Sheets[i]||{},o=i;try{e&&e.Workbook&&(o=e.Workbook.Sheets[r].CodeName||o)}catch{}var l=ca(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Dt(a,129),(e.vbaraw||s["!outline"])&&Dt(a,147,hbe(o,s["!outline"])),Dt(a,148,ube(l)),gxe(a,s,e.Workbook),dxe(a,s),cxe(a,s,r,t,e),yxe(a,s),mxe(a,s,e,r),uxe(a,s),hxe(a,s,n),s["!margins"]&&Dt(a,476,txe(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&fxe(a,s),pxe(a,s,r,n),Dt(a,130),a.end()}function bxe(r,t){r.l+=10;var e=ks(r);return{name:e}}var xxe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function wxe(r){return!r.Workbook||!r.Workbook.WBProps?"false":Dme(r.Workbook.WBProps.date1904)?"true":"false"}var _xe=":][*?/\\".split("");function Gq(r,t){try{if(r=="")throw new Error("Sheet name cannot be blank");if(r.length>31)throw new Error("Sheet name cannot exceed 31 chars");if(r.charCodeAt(0)==39||r.charCodeAt(r.length-1)==39)throw new Error("Sheet name cannot start or end with apostrophe (')");if(r.toLowerCase()=="history")throw new Error("Sheet name cannot be 'History'");_xe.forEach(function(e){if(r.indexOf(e)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")})}catch(e){throw e}return!0}function Sxe(r,t,e){r.forEach(function(n,a){Gq(n);for(var i=0;i<a;++i)if(n==r[i])throw new Error("Duplicate Sheet Name: "+n);if(e){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function Nxe(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var t=r.Workbook&&r.Workbook.Sheets||[];Sxe(r.SheetNames,t,!!r.vbaraw);for(var e=0;e<r.SheetNames.length;++e)Gve(r.Sheets[r.SheetNames[e]],r.SheetNames[e],e);r.SheetNames.forEach(function(n,a){var i=r.Sheets[n];if(!(!i||!i["!autofilter"])){var s;r.Workbook||(r.Workbook={}),r.Workbook.Names||(r.Workbook.Names=[]),r.Workbook.Names.forEach(function(l){l.Name=="_xlnm._FilterDatabase"&&l.Sheet==a&&(s=l)});var o=Cy(n)+"!"+Ty(i["!autofilter"].ref);s?s.Ref=o:r.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:o})}})}function jxe(r){var t=[ei];t[t.length]=tr("workbook",null,{xmlns:vm[0],"xmlns:r":Ci.r});var e=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(xxe.forEach(function(o){r.Workbook.WBProps[o[0]]!=null&&r.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=r.Workbook.WBProps[o[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=tr("workbookPr",null,n);var a=r.Workbook&&r.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=r.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==r.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=r.SheetNames.length;++i){var s={name:en(r.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=tr("sheet",null,s)}return t[t.length]="</sheets>",e&&(t[t.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=tr("definedName",en(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function kxe(r,t){var e={};return e.Hidden=r.read_shift(4),e.iTabID=r.read_shift(4),e.strRelID=q8(r),e.name=ks(r),e}function Exe(r,t){return t||(t=xt(127)),t.write_shift(4,r.Hidden),t.write_shift(4,r.iTabID),Wj(r.strRelID,t),fi(r.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Axe(r,t){var e={},n=r.read_shift(4);e.defaultThemeVersion=r.read_shift(4);var a=t>8?ks(r):"";return a.length>0&&(e.CodeName=a),e.autoCompressPictures=!!(n&65536),e.backupFile=!!(n&64),e.checkCompatibility=!!(n&4096),e.date1904=!!(n&1),e.filterPrivacy=!!(n&8),e.hidePivotFieldList=!!(n&1024),e.promptedSolutions=!!(n&16),e.publishItems=!!(n&2048),e.refreshAllConnections=!!(n&262144),e.saveExternalLinkValues=!!(n&128),e.showBorderUnselectedTables=!!(n&4),e.showInkAnnotation=!!(n&32),e.showObjects=["all","placeholders","none"][n>>13&3],e.showPivotChartFilter=!!(n&32768),e.updateLinks=["userSet","never","always"][n>>8&3],e}function Txe(r,t){t||(t=xt(72));var e=0;return r&&(r.date1904&&(e|=1),r.filterPrivacy&&(e|=8)),t.write_shift(4,e),t.write_shift(4,0),uq(r&&r.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Cxe(r,t,e){var n=r.l+t,a=r.read_shift(4);r.l+=1;var i=r.read_shift(4),s=oge(r),o,l="";try{o=Pve(r,0,e);try{l=v2(r)}catch{}}catch{console.error("Could not parse defined name "+s)}a&32&&(s="_xlnm."+s),r.l=n;var c={Name:s,Ptg:o,Flags:a};return i<268435455&&(c.Sheet=i),l&&(c.Comment=l),c}function Pxe(r,t){var e=xt(9),n=0,a=r.Name;bge.indexOf(a)>-1&&(n|=32,a=a.slice(6)),e.write_shift(4,n),e.write_shift(1,0),e.write_shift(4,r.Sheet==null?4294967295:r.Sheet);var i=[e,fi(a),zve(r.Ref,t)];if(r.Comment)i.push(Py(r.Comment));else{var s=xt(4);s.write_shift(4,4294967295),i.push(s)}return Ya(i)}function Oxe(r,t){Dt(r,143);for(var e=0;e!=t.SheetNames.length;++e){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[e]&&t.Workbook.Sheets[e].Hidden||0,a={Hidden:n,iTabID:e+1,strRelID:"rId"+(e+1),name:t.SheetNames[e]};Dt(r,156,Exe(a))}Dt(r,144)}function Ixe(r,t){t||(t=xt(127));for(var e=0;e!=4;++e)t.write_shift(4,0);return fi("SheetJS",t),fi(Zb.version,t),fi(Zb.version,t),fi("7262",t),t.length>t.l?t.slice(0,t.l):t}function Mxe(r,t){t||(t=xt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,r),t.write_shift(4,r);var e=120;return t.write_shift(1,e),t.length>t.l?t.slice(0,t.l):t}function Rxe(r,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var e=t.Workbook.Sheets,n=0,a=-1,i=-1;n<e.length;++n)!e[n]||!e[n].Hidden&&a==-1?a=n:e[n].Hidden==1&&i==-1&&(i=n);i>a||(Dt(r,135),Dt(r,158,Mxe(a)),Dt(r,136))}}function Fxe(r,t){!t.Workbook||!t.Workbook.Names||t.Workbook.Names.forEach(function(e){try{if(e.Flags&14)return;Dt(r,39,Pxe(e,t))}catch{console.error("Could not serialize defined name "+JSON.stringify(e))}})}function Dxe(r){var t=r.SheetNames.length,e=xt(12*t+28);e.write_shift(4,t+2),e.write_shift(4,0),e.write_shift(4,-2),e.write_shift(4,-2),e.write_shift(4,0),e.write_shift(4,-1),e.write_shift(4,-1);for(var n=0;n<t;++n)e.write_shift(4,0),e.write_shift(4,n),e.write_shift(4,n);return e}function Lxe(r,t){Dt(r,353),Dt(r,357),Dt(r,362,Dxe(t)),Dt(r,354)}function Bxe(r,t){var e=js();return Dt(e,131),Dt(e,128,Ixe()),Dt(e,153,Txe(r.Workbook&&r.Workbook.WBProps||null)),Rxe(e,r),Oxe(e,r),Lxe(e,r),(r.Workbook||{}).Names&&Fxe(e,r),Dt(e,132),e.end()}function $xe(r,t){var e=[];return r.Props&&e.push(Nge(r.Props,t)),r.Custprops&&e.push(jge(r.Props,r.Custprops)),e.join("")}function Uxe(r){return(((r||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function qxe(r,t){var e=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(tr("NumberFormat",null,{"ss:Format":en(la[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};e.push(tr("Style",i.join(""),s))}),tr("Styles",e.join(""))}function Kq(r){return tr("NamedRange",null,{"ss:Name":r.Name.slice(0,6)=="_xlnm."?r.Name.slice(6):r.Name,"ss:RefersTo":"="+x2(r.Ref,{r:0,c:0})})}function zxe(r){if(!((r||{}).Workbook||{}).Names)return"";for(var t=r.Workbook.Names,e=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||e.push(Kq(a)))}return tr("Names",e.join(""))}function Wxe(r,t,e,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var o=a[s];o.Sheet==e&&(o.Name.match(/^_xlfn\./)||i.push(Kq(o)))}return i.join("")}function Hxe(r,t,e,n){if(!r)return"";var a=[];if(r["!margins"]&&(a.push("<PageSetup>"),r["!margins"].header&&a.push(tr("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&a.push(tr("Footer",null,{"x:Margin":r["!margins"].footer})),a.push(tr("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[e])if(n.Workbook.Sheets[e].Hidden)a.push(tr("Visible",n.Workbook.Sheets[e].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<e&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==e&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),r["!protect"]&&(a.push(Ji("ProtectContents","True")),r["!protect"].objects&&a.push(Ji("ProtectObjects","True")),r["!protect"].scenarios&&a.push(Ji("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?a.push(Ji("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&a.push(Ji("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){r["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":tr("WorksheetOptions",a.join(""),{xmlns:Bo.x})}function Vxe(r){return r.map(function(t){var e=Fme(t.t||""),n=tr("ss:Data",e,{xmlns:"http://www.w3.org/TR/REC-html40"}),a={};return t.a&&(a["ss:Author"]=t.a),r.hidden||(a["ss:ShowAlways"]="1"),tr("Comment",n,a)}).join("")}function Gxe(r,t,e,n,a,i,s){if(!r||r.v==null&&r.f==null)return"";var o={};if(r.f&&(o["ss:Formula"]="="+en(x2(r.f,s))),r.F&&r.F.slice(0,t.length)==t){var l=ya(r.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(r.l&&r.l.Target&&(o["ss:HRef"]=en(r.l.Target),r.l.Tooltip&&(o["x:HRefScreenTip"]=en(r.l.Tooltip))),e["!merges"])for(var c=e["!merges"],u=0;u!=c.length;++u)c[u].s.c!=s.c||c[u].s.r!=s.r||(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var f="",h="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":isFinite(r.v)?(f="Number",h=String(r.v)):(f="Error",h=Vs[isNaN(r.v)?36:7]);break;case"b":f="Boolean",h=r.v?"1":"0";break;case"e":f="Error",h=Vs[r.v];break;case"d":f="DateTime",h=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||la[14]);break;case"s":f="String",h=Rme(r.v||"");break}var p=Af(n.cellXfs,r,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=s.c+1;var g=r.v!=null?h:"",y=r.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(r.c||[]).length>0&&(y+=Vxe(r.c)),tr("Cell",y,o)}function Kxe(r,t){var e='<Row ss:Index="'+(r+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Pq(t.hpt)),t.hpx&&(e+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(e+=' ss:Hidden="1"')),e+">"}function Xxe(r,t,e,n){if(!r["!ref"])return"";var a=ca(r["!ref"]),i=r["!merges"]||[],s=0,o=[];r["!cols"]&&r["!cols"].forEach(function(m,v){Gj(m);var b=!!m.width,x=S2(v,m),S={"ss:Index":v+1};b&&(S["ss:Width"]=cx(x.width)),m.hidden&&(S["ss:Hidden"]="1"),o.push(tr("Column",null,S))});for(var l=r["!data"]!=null,c={r:0,c:0},u=a.s.r;u<=a.e.r;++u){var f=[Kxe(u,(r["!rows"]||[])[u])];c.r=u;for(var h=a.s.c;h<=a.e.c;++h){c.c=h;var p=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>h)&&!(i[s].s.r>u)&&!(i[s].e.c<h)&&!(i[s].e.r<u)){(i[s].s.c!=h||i[s].s.r!=u)&&(p=!0);break}if(!p){var g=Bn(h)+zn(u),y=l?(r["!data"][u]||[])[h]:r[g];f.push(Gxe(y,g,r,t,e,n,c))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function Yxe(r,t,e){var n=[],a=e.SheetNames[r],i=e.Sheets[a],s=i?Wxe(i,t,r,e):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?Xxe(i,t,r,e):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(Hxe(i,t,r,e)),i&&i["!autofilter"]&&n.push('<AutoFilter x:Range="'+x2(Ty(i["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),n.join("")}function Jxe(r,t){t||(t={}),r.SSF||(r.SSF=Es(la)),r.SSF&&(m2(),p2(r.SSF),t.revssf=g2(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF,t.cellXfs=[],Af(t.cellXfs,{},{revssf:{General:0}}));var e=[];e.push($xe(r,t)),e.push(Uxe(r)),e.push(""),e.push(zxe(r));for(var n=0;n<r.SheetNames.length;++n)e.push(tr("Worksheet",Yxe(n,t,r),{"ss:Name":en(r.SheetNames[n])}));return e[2]=qxe(r,t),ei+tr("Workbook",e.join(""),{xmlns:Bo.ss,"xmlns:o":Bo.o,"xmlns:x":Bo.x,"xmlns:ss":Bo.ss,"xmlns:dt":Bo.dt,"xmlns:html":Bo.html})}var AS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Zxe(r,t){var e=[],n=[],a=[],i=0,s,o=vM(TM,"n"),l=vM(CM,"n");if(r.Props)for(s=Ja(r.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(o,s[i])?e:Object.prototype.hasOwnProperty.call(l,s[i])?n:a).push([s[i],r.Props[s[i]]]);if(r.Custprops)for(s=Ja(r.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(r.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(o,s[i])?e:Object.prototype.hasOwnProperty.call(l,s[i])?n:a).push([s[i],r.Custprops[s[i]]]);var c=[];for(i=0;i<a.length;++i)_q.indexOf(a[i][0])>-1||bq.indexOf(a[i][0])>-1||a[i][1]!=null&&c.push(a[i]);n.length&&Kn.utils.cfb_add(t,"/SummaryInformation",RM(n,AS.SI,l,CM)),(e.length||c.length)&&Kn.utils.cfb_add(t,"/DocumentSummaryInformation",RM(e,AS.DSI,o,TM,c.length?c:null,AS.UDI))}function Qxe(r,t){var e=t||{},n=Kn.utils.cfb_new({root:"R"}),a="/Workbook";switch(e.bookType||"xls"){case"xls":e.bookType="biff8";case"xla":e.bookType||(e.bookType="xla");case"biff8":a="/Workbook",e.biff=8;break;case"biff5":a="/Book",e.biff=5;break;default:throw new Error("invalid type "+e.bookType+" for XLS CFB")}return Kn.utils.cfb_add(n,a,Yq(r,e)),e.biff==8&&(r.Props||r.Custprops)&&Zxe(r,n),e.biff==8&&r.vbaraw&&c1e(n,Kn.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var e2e={0:{f:sbe},1:{f:pbe},2:{f:Obe},3:{f:_be},4:{f:vbe},5:{f:Abe},6:{f:Dbe},7:{f:Nbe},8:{f:Wbe},9:{f:zbe},10:{f:Ube},11:{f:qbe},12:{f:gbe},13:{f:Mbe},14:{f:Sbe},15:{f:xbe},16:{f:Cbe},17:{f:Bbe},18:{f:kbe},19:{f:zj},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Cxe},40:{},42:{},43:{f:Aye},44:{f:kye},45:{f:Pye},46:{f:Iye},47:{f:Oye},48:{},49:{f:ege},50:{},51:{f:Xye},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:aye},62:{f:Fbe},63:{f:r1e},64:{f:sxe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Yc,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:rxe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:fbe},148:{f:cbe,p:16},151:{f:Ybe},152:{},153:{f:Axe},154:{},155:{},156:{f:kxe},157:{},158:{},159:{T:1,f:mye},160:{T:-1},161:{T:1,f:r0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Hbe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Gye},336:{T:-1},337:{f:Zye,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:q8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Qge},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Jbe},427:{f:Zbe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:exe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:dbe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Kbe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:q8},551:{f:v2},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:o1e},633:{T:1},634:{T:-1},635:{T:1,f:i1e},636:{T:-1},637:{f:age},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:bxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:oxe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function zt(r,t,e,n){var a=t;if(!isNaN(a)){var i=n||(e||[]).length||0,s=r.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&$j(e)&&r.push(e)}}function t2e(r,t,e,n){var a=(e||[]).length||0;if(a<=8224)return zt(r,t,e,a);var i=t;if(!isNaN(i)){for(var s=e.parts||[],o=0,l=0,c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;var u=r.next(4);for(u.write_shift(2,i),u.write_shift(2,c),r.push(e.slice(l,l+c)),l+=c;l<a;){for(u=r.next(4),u.write_shift(2,60),c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;u.write_shift(2,c),r.push(e.slice(l,l+c)),l+=c}}}function TS(r,t,e,n){var a=xt(9);return Yy(a,r,t),Sq(e,n||"b",a),a}function r2e(r,t,e){var n=xt(8+2*e.length);return Yy(n,r,t),n.write_shift(1,e.length),n.write_shift(e.length,e,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Xq(r,t){t.forEach(function(e){var n=e[0].map(function(i){return i.t}).join("");if(n.length<=2048)return zt(r,28,NS(n,e[1],e[2]));zt(r,28,NS(n.slice(0,2048),e[1],e[2],n.length));for(var a=2048;a<n.length;a+=2048)zt(r,28,NS(n.slice(a,Math.min(a+2048,n.length)),-1,-1,Math.min(2048,n.length-a)))})}function n2e(r,t,e,n,a,i){var s=0;t.z!=null&&(s=a._BIFF2FmtTable.indexOf(t.z),s==-1&&(a._BIFF2FmtTable.push(t.z),s=a._BIFF2FmtTable.length-1));var o=0;if(t.z!=null){for(;o<a.cellXfs.length&&a.cellXfs[o].numFmtId!=s;++o);o==a.cellXfs.length&&a.cellXfs.push({numFmtId:s})}if(t.v!=null)switch(t.t){case"d":case"n":var l=t.t=="d"?es(vo(t.v,i),i):t.v;a.biff==2&&l==(l|0)&&l>=0&&l<65536?zt(r,2,lye(e,n,l,o,s)):isNaN(l)?zt(r,5,TS(e,n,36,"e")):isFinite(l)?zt(r,3,oye(e,n,l,o,s)):zt(r,5,TS(e,n,7,"e"));return;case"b":case"e":zt(r,5,TS(e,n,t.v,t.t));return;case"s":case"str":zt(r,4,r2e(e,n,t.v==null?"":String(t.v).slice(0,255)));return}zt(r,1,Yy(null,e,n))}function a2e(r,t,e,n,a){var i=t["!data"]!=null,s=ca(t["!ref"]||"A1"),o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.r,16383)}for(var c=(((a||{}).Workbook||{}).WBProps||{}).date1904,u=[],f=[],h=s.s.c;h<=s.e.c;++h)l[h]=Bn(h);for(var p=s.s.r;p<=s.e.r;++p)for(i&&(u=t["!data"][p]||[]),o=zn(p),h=s.s.c;h<=s.e.c;++h){var g=i?u[h]:t[l[h]+o];g&&(n2e(r,g,p,h,n,c),g.c&&f.push([g.c,p,h]))}Xq(r,f)}function i2e(r,t){for(var e=t||{},n=js(),a=0,i=0;i<r.SheetNames.length;++i)r.SheetNames[i]==e.sheet&&(a=i);if(a==0&&e.sheet&&r.SheetNames[0]!=e.sheet)throw new Error("Sheet not found: "+e.sheet);zt(n,e.biff==4?1033:e.biff==3?521:9,Vj(r,16,e)),((r.Workbook||{}).WBProps||{}).date1904&&zt(n,34,xs(!0)),e.cellXfs=[{numFmtId:0}],e._BIFF2FmtTable=["General"],e._Fonts=[];var s=js();return a2e(s,r.Sheets[r.SheetNames[a]],a,e,r),e._BIFF2FmtTable.forEach(function(o){e.biff<=3?zt(n,30,Vge(o)):zt(n,1054,Gge(o))}),e.cellXfs.forEach(function(o){switch(e.biff){case 2:zt(n,67,Xge(o));break;case 3:zt(n,579,Eq(o));break;case 4:zt(n,1091,Yge(o));break}}),delete e._BIFF2FmtTable,delete e.cellXfs,delete e._Fonts,n.push(s.end()),zt(n,10),n.end()}var Kl=1,ll=[];function s2e(){var r=xt(82+8*ll.length);r.write_shift(2,15),r.write_shift(2,61440),r.write_shift(4,74+8*ll.length);{r.write_shift(2,0),r.write_shift(2,61446),r.write_shift(4,16+8*ll.length);{r.write_shift(4,Kl),r.write_shift(4,ll.length+1);for(var t=0,e=0;e<ll.length;++e)t+=ll[e]&&ll[e][1]||0;r.write_shift(4,t),r.write_shift(4,ll.length)}ll.forEach(function(n){r.write_shift(4,n[0]),r.write_shift(4,n[2])})}return r.write_shift(2,51),r.write_shift(2,61451),r.write_shift(4,18),r.write_shift(2,191),r.write_shift(4,524296),r.write_shift(2,385),r.write_shift(4,134217793),r.write_shift(2,448),r.write_shift(4,134217792),r.write_shift(2,64),r.write_shift(2,61726),r.write_shift(4,16),r.write_shift(4,134217741),r.write_shift(4,134217740),r.write_shift(4,134217751),r.write_shift(4,268435703),r}function o2e(r,t){var e=[],n=0,a=js(),i=Kl,s;t.forEach(function(l,c){var u="",f=l[0].map(function(x){return x.a&&!u&&(u=x.a),x.t}).join("");++Kl;{var h=xt(150);h.write_shift(2,15),h.write_shift(2,61444),h.write_shift(4,150),h.write_shift(2,3234),h.write_shift(2,61450),h.write_shift(4,8),h.write_shift(4,Kl),h.write_shift(4,2560),h.write_shift(2,227),h.write_shift(2,61451),h.write_shift(4,84),h.write_shift(2,128),h.write_shift(4,0),h.write_shift(2,139),h.write_shift(4,2),h.write_shift(2,191),h.write_shift(4,524296),h.write_shift(2,344),h.l+=4,h.write_shift(2,385),h.write_shift(4,134217808),h.write_shift(2,387),h.write_shift(4,134217808),h.write_shift(2,389),h.write_shift(4,268435700),h.write_shift(2,447),h.write_shift(4,1048592),h.write_shift(2,448),h.write_shift(4,134217809),h.write_shift(2,451),h.write_shift(4,268435700),h.write_shift(2,513),h.write_shift(4,134217809),h.write_shift(2,515),h.write_shift(4,268435700),h.write_shift(2,575),h.write_shift(4,196609),h.write_shift(2,959),h.write_shift(4,131072|(l[0].hidden?2:0)),h.l+=2,h.write_shift(2,61456),h.write_shift(4,18),h.write_shift(2,3),h.write_shift(2,l[2]+2),h.l+=2,h.write_shift(2,l[1]+1),h.l+=2,h.write_shift(2,l[2]+4),h.l+=2,h.write_shift(2,l[1]+5),h.l+=2,h.l+=2,h.write_shift(2,61457),h.l+=4,h.l=150,c==0?s=h:zt(a,236,h)}n+=150;{var p=xt(52);p.write_shift(2,21),p.write_shift(2,18),p.write_shift(2,25),p.write_shift(2,Kl),p.write_shift(2,0),p.l=22,p.write_shift(2,13),p.write_shift(2,22),p.write_shift(4,1651663474),p.write_shift(4,2503426821),p.write_shift(4,2150634280),p.write_shift(4,1768515844+Kl*256),p.write_shift(2,0),p.write_shift(4,0),p.l+=4,zt(a,93,p)}{var g=xt(8);g.l+=2,g.write_shift(2,61453),g.l+=4,zt(a,236,g)}n+=8;{var y=xt(18);y.write_shift(2,18),y.l+=8,y.write_shift(2,f.length),y.write_shift(2,16),y.l+=4,zt(a,438,y);{var m=xt(1+f.length);m.write_shift(1,0),m.write_shift(f.length,f,"sbcs"),zt(a,60,m)}{var v=xt(16);v.l+=8,v.write_shift(2,f.length),v.l+=6,zt(a,60,v)}}{var b=xt(12+u.length);b.write_shift(2,l[1]),b.write_shift(2,l[2]),b.write_shift(2,0|(l[0].hidden?0:2)),b.write_shift(2,Kl),b.write_shift(2,u.length),b.write_shift(1,0),b.write_shift(u.length,u,"sbcs"),b.l++,e.push(b)}});{var o=xt(80);o.write_shift(2,15),o.write_shift(2,61442),o.write_shift(4,n+o.length-8),o.write_shift(2,16),o.write_shift(2,61448),o.write_shift(4,8),o.write_shift(4,t.length+1),o.write_shift(4,Kl),o.write_shift(2,15),o.write_shift(2,61443),o.write_shift(4,n+48),o.write_shift(2,15),o.write_shift(2,61444),o.write_shift(4,40),o.write_shift(2,1),o.write_shift(2,61449),o.write_shift(4,16),o.l+=16,o.write_shift(2,2),o.write_shift(2,61450),o.write_shift(4,8),o.write_shift(4,i),o.write_shift(4,5),zt(r,236,s?Ya([o,s]):o)}r.push(a.end()),e.forEach(function(l){zt(r,28,l)}),ll.push([i,t.length+1,Kl]),++Kl}function l2e(r,t,e){zt(r,49,qge({sz:12,name:"Arial"},e))}function c2e(r,t,e){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&zt(r,1054,Hge(a,t[a],e))})}function u2e(r,t){var e=xt(19);e.write_shift(4,2151),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,1),e.write_shift(4,0),zt(r,2151,e),e=xt(39),e.write_shift(4,2152),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(2,1),e.write_shift(4,4),e.write_shift(2,0),kq(ca(t["!ref"]||"A1"),e),e.write_shift(4,4),zt(r,2152,e)}function d2e(r,t){for(var e=0;e<16;++e)zt(r,224,DM({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){zt(r,224,DM(n,0,t))})}function f2e(r,t){for(var e=0;e<t["!links"].length;++e){var n=t["!links"][e];zt(r,440,tye(n)),n[1].Tooltip&&zt(r,2048,rye(n))}delete t["!links"]}function h2e(r,t){if(t){var e=0;t.forEach(function(n,a){++e<=256&&n&&zt(r,125,iye(S2(a,n),a))})}}function p2e(r,t,e,n,a,i){var s=16+Af(a.cellXfs,t,a);if(t.v==null&&!t.bf){zt(r,513,zh(e,n,s));return}if(t.bf)zt(r,6,Tve(t,e,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?es(vo(t.v,i),i):t.v;isNaN(o)?zt(r,517,SS(e,n,36,s,a,"e")):isFinite(o)?zt(r,515,Zge(e,n,o,s)):zt(r,517,SS(e,n,7,s,a,"e"));break;case"b":case"e":zt(r,517,SS(e,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=Xj(a.Strings,t.v==null?"":String(t.v),a.revStrings);zt(r,253,zge(e,n,l,s))}else zt(r,516,Wge(e,n,(t.v==null?"":String(t.v)).slice(0,255),s,a));break;default:zt(r,513,zh(e,n,s))}}function m2e(r,t,e){var n=js(),a=e.SheetNames[r],i=e.Sheets[a]||{},s=(e||{}).Workbook||{},o=(s.Sheets||[])[r]||{},l=i["!data"]!=null,c=t.biff==8,u="",f=[],h=ca(i["!ref"]||"A1"),p=c?65536:16384;if(h.e.c>255||h.e.r>=p){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV"+p);h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.r,p-1)}zt(n,2057,Vj(e,16,t)),zt(n,13,cl(1)),zt(n,12,cl(100)),zt(n,15,xs(!0)),zt(n,17,xs(!1)),zt(n,16,qh(.001)),zt(n,95,xs(!0)),zt(n,42,xs(!1)),zt(n,43,xs(!1)),zt(n,130,cl(1)),zt(n,128,Jge()),zt(n,131,xs(!1)),zt(n,132,xs(!1)),c&&h2e(n,i["!cols"]),zt(n,512,Kge(h,t));var g=(((e||{}).Workbook||{}).WBProps||{}).date1904;c&&(i["!links"]=[]);for(var y=h.s.c;y<=h.e.c;++y)f[y]=Bn(y);for(var m=[],v=[],b=h.s.r;b<=h.e.r;++b)for(l&&(v=i["!data"][b]||[]),u=zn(b),y=h.s.c;y<=h.e.c;++y){var x=l?v[y]:i[f[y]+u];x&&(p2e(n,x,b,y,t,g),c&&x.l&&i["!links"].push([f[y]+u,x.l]),x.c&&m.push([x.c,b,y]))}var S=o.CodeName||o.name||a;return c?o2e(n,m):Xq(n,m),c&&zt(n,574,Uge((s.Views||[])[0])),c&&(i["!merges"]||[]).length&&zt(n,229,eye(i["!merges"])),c&&f2e(n,i),zt(n,442,jq(S)),c&&u2e(n,i),zt(n,10),n.end()}function g2e(r,t,e){var n=js(),a=(r||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},o=e.biff==8,l=e.biff==5;if(zt(n,2057,Vj(r,5,e)),e.bookType=="xla"&&zt(n,135),zt(n,225,o?cl(1200):null),zt(n,193,Age(2)),l&&zt(n,191),l&&zt(n,192),zt(n,226),zt(n,92,Dge("SheetJS",e)),zt(n,66,cl(o?1200:1252)),o&&zt(n,353,cl(0)),o&&zt(n,448),zt(n,317,sye(r.SheetNames.length)),o&&r.vbaraw&&zt(n,211),o&&r.vbaraw){var c=s.CodeName||"ThisWorkbook";zt(n,442,jq(c))}zt(n,156,cl(17)),zt(n,25,xs(!1)),zt(n,18,xs(!1)),zt(n,19,cl(0)),o&&zt(n,431,xs(!1)),o&&zt(n,444,cl(0)),zt(n,61,$ge()),zt(n,64,xs(!1)),zt(n,141,cl(0)),zt(n,34,xs(wxe(r)=="true")),zt(n,14,xs(!0)),o&&zt(n,439,xs(!1)),zt(n,218,cl(0)),l2e(n,r,e),c2e(n,r.SSF,e),d2e(n,e),o&&zt(n,352,xs(!1));var u=n.end(),f=js();o&&zt(f,140,nye()),o&&ll.length&&zt(f,235,s2e()),o&&e.Strings&&t2e(f,252,Bge(e.Strings)),zt(f,10);var h=f.end(),p=js(),g=0,y=0;for(y=0;y<r.SheetNames.length;++y)g+=(o?12:11)+(o?2:1)*r.SheetNames[y].length;var m=u.length+g+h.length;for(y=0;y<r.SheetNames.length;++y){var v=i[y]||{};zt(p,133,Lge({pos:m,hs:v.Hidden||0,dt:0,name:r.SheetNames[y]},e)),m+=t[y].length}var b=p.end();if(g!=b.length)throw new Error("BS8 "+g+" != "+b.length);var x=[];return u.length&&x.push(u),b.length&&x.push(b),h.length&&x.push(h),Ya(x)}function y2e(r,t){var e=t||{},n=[];r&&!r.SSF&&(r.SSF=Es(la)),r&&r.SSF&&(m2(),p2(r.SSF),e.revssf=g2(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),Kl=1,ll=[],e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Yj(e),e.cellXfs=[],Af(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var a=0;a<r.SheetNames.length;++a)n[n.length]=m2e(a,e,r);return n.unshift(g2e(r,n,e)),Ya(n)}function Yq(r,t){for(var e=0;e<=r.SheetNames.length;++e){var n=r.Sheets[r.SheetNames[e]];if(!(!n||!n["!ref"])){var a=Qi(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[e]+"' extends beyond column IV (255).  Data may be lost."),a.e.r>65535&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[e]+"' extends beyond row 65536.  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return y2e(r,t);case 4:case 3:case 2:return i2e(r,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function v2e(r,t,e,n){for(var a=r["!merges"]||[],i=[],s={},o=r["!data"]!=null,l=t.s.c;l<=t.e.c;++l){for(var c=0,u=0,f=0;f<a.length;++f)if(!(a[f].s.r>e||a[f].s.c>l)&&!(a[f].e.r<e||a[f].e.c<l)){if(a[f].s.r<e||a[f].s.c<l){c=-1;break}c=a[f].e.r-a[f].s.r+1,u=a[f].e.c-a[f].s.c+1;break}if(!(c<0)){var h=Bn(l)+zn(e),p=o?(r["!data"][e]||[])[l]:r[h];p&&p.t=="n"&&p.v!=null&&!isFinite(p.v)&&(isNaN(p.v)?p={t:"e",v:36,w:Vs[36]}:p={t:"e",v:7,w:Vs[7]});var g=p&&p.v!=null&&(p.h||bS(p.w||(td(p),p.w)||""))||"";s={},c>1&&(s.rowspan=c),u>1&&(s.colspan=u),n.editable?g='<span contenteditable="true">'+g+"</span>":p&&(s["data-t"]=p&&p.t||"z",p.v!=null&&(s["data-v"]=bS(p.v instanceof Date?p.v.toISOString():p.v)),p.z!=null&&(s["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+bS(p.l.Target)+'">'+g+"</a>")),s.id=(n.id||"sjs")+"-"+h,i.push(tr("td",g,s))}}var y="<tr>";return y+i.join("")+"</tr>"}var b2e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',x2e="</body></html>";function w2e(r,t,e){var n=[];return n.join("")+"<table"+(e&&e.id?' id="'+e.id+'"':"")+">"}function Jq(r,t){var e=t||{},n=e.header!=null?e.header:b2e,a=e.footer!=null?e.footer:x2e,i=[n],s=Qi(r["!ref"]||"A1");if(i.push(w2e(r,s,e)),r["!ref"])for(var o=s.s.r;o<=s.e.r;++o)i.push(v2e(r,s,o,e));return i.push("</table>"+a),i.join("")}function Zq(r,t,e){var n=t.rows;if(!n)throw"Unsupported origin when "+t.tagName+" is not a TABLE";var a=e||{},i=r["!data"]!=null,s=0,o=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var l=typeof a.origin=="string"?ya(a.origin):a.origin;s=l.r,o=l.c}var c=Math.min(a.sheetRows||1e7,n.length),u={s:{r:0,c:0},e:{r:s,c:o}};if(r["!ref"]){var f=Qi(r["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var h=[],p=0,g=r["!rows"]||(r["!rows"]=[]),y=0,m=0,v=0,b=0,x=0,S=0;for(r["!cols"]||(r["!cols"]=[]);y<n.length&&m<c;++y){var _=n[y];if(KM(_)){if(a.display)continue;g[m]={hidden:!0}}var I=_.cells;for(v=b=0;v<I.length;++v){var A=I[v];if(!(a.display&&KM(A))){var O=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):Lme(A.innerHTML),M=A.getAttribute("data-z")||A.getAttribute("z");for(p=0;p<h.length;++p){var z=h[p];z.s.c==b+o&&z.s.r<m+s&&m+s<=z.e.r&&(b=z.e.c+1-o,p=-1)}S=+A.getAttribute("colspan")||1,((x=+A.getAttribute("rowspan")||1)>1||S>1)&&h.push({s:{r:m+s,c:b+o},e:{r:m+s+(x||1)-1,c:b+o+(S||1)-1}});var U={t:"s",v:O},D=A.getAttribute("data-t")||A.getAttribute("t")||"";O!=null&&(O.length==0?U.t=D||"z":a.raw||O.trim().length==0||D=="s"||(D=="e"&&Vs[+O]?U={t:"e",v:+O,w:Vs[+O]}:O==="TRUE"?U={t:"b",v:!0}:O==="FALSE"?U={t:"b",v:!1}:isNaN(Vu(O))?isNaN(ix(O).getDate())?O.charCodeAt(0)==35&&$c[O]!=null&&(U={t:"e",v:$c[O],w:O}):(U={t:"d",v:vo(O)},a.UTC&&(U.v=y2(U.v)),a.cellDates||(U={t:"n",v:es(U.v)}),U.z=a.dateNF||la[14]):U={t:"n",v:Vu(O)})),U.z===void 0&&M!=null&&(U.z=M);var T="",R=A.getElementsByTagName("A");if(R&&R.length)for(var C=0;C<R.length&&!(R[C].hasAttribute("href")&&(T=R[C].getAttribute("href"),T.charAt(0)!="#"));++C);T&&T.charAt(0)!="#"&&T.slice(0,11).toLowerCase()!="javascript:"&&(U.l={Target:T}),i?(r["!data"][m+s]||(r["!data"][m+s]=[]),r["!data"][m+s][b+o]=U):r[_a({c:b+o,r:m+s})]=U,u.e.c<b+o&&(u.e.c=b+o),b+=S}}++m}return h.length&&(r["!merges"]=(r["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,m-1+s),r["!ref"]=Za(u),m>=c&&(r["!fullref"]=Za((u.e.r=n.length-y+m-1+s,u))),r}function Qq(r,t){var e=t||{},n={};return e.dense&&(n["!data"]=[]),Zq(n,r,t)}function _2e(r,t){var e=bm(Qq(r,t),t);return e}function KM(r){var t="",e=S2e(r);return e&&(t=e(r).getPropertyValue("display")),t||(t=r.style&&r.style.display),t==="none"}function S2e(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var N2e=(function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Ay({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return ei+t}})();function j2e(r,t){var e="number",n="",a={"style:name":t},i="",s=0;r=r.replace(/"[$]"/g,"$");e:{if(r.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+r),r=r.slice(0,r.indexOf(";"))),r=="@"){e="text",n="<number:text-content/>";break e}if(r.indexOf(/\$/)>-1&&(e="currency"),r[s]=='"'){for(i="";r[++s]!='"'||r[++s]=='"';)i+=r[s];--s,r[s+1]=="*"?(s++,n+="<number:fill-character>"+en(i.replace(/""/g,'"'))+"</number:fill-character>"):n+="<number:text>"+en(i.replace(/""/g,'"'))+"</number:text>",r=r.slice(s+1),s=0}var o=r.match(/# (\?+)\/(\?+)/);if(o){n+=tr("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":o[1].length,"number:max-denominator-value":Math.max(+o[1].replace(/./g,"9"),+o[2].replace(/./g,"9"))});break e}if(o=r.match(/# (\?+)\/(\d+)/)){n+=tr("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":o[1].length,"number:denominator-value":+o[2]});break e}if(o=r.match(/\b(\d+)(|\.\d+)%/)){e="percentage",n+=tr("number:number",null,{"number:decimal-places":o[2]&&o.length-1||0,"number:min-decimal-places":o[2]&&o.length-1||0,"number:min-integer-digits":o[1].length})+"<number:text>%</number:text>";break e}var l=!1;if(["y","m","d"].indexOf(r[0])>-1){e="date";t:for(;s<r.length;++s)switch(i=r[s].toLowerCase()){case"h":case"s":l=!0,--s;break t;case"m":r:for(var c=s+1;c<r.length;++c)switch(r[c]){case"y":case"d":break r;case"h":case"s":l=!0,--s;break t}case"y":case"d":for(;(r[++s]||"").toLowerCase()==i[0];)i+=i[0];switch(--s,i){case"y":case"yy":n+="<number:year/>";break;case"yyy":case"yyyy":n+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":n+='<number:month number:style="'+(i.length%2?"short":"long")+'" number:textual="'+(i.length>=3?"true":"false")+'"/>';break;case"d":case"dd":n+='<number:day number:style="'+(i.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":n+='<number:day-of-week number:style="'+(i.length%2?"short":"long")+'"/>';break}break;case'"':for(;r[++s]!='"'||r[++s]=='"';)i+=r[s];--s,n+="<number:text>"+en(i.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"\\":i=r[++s],n+="<number:text>"+en(i)+"</number:text>";break;case"/":case":":n+="<number:text>"+en(i)+"</number:text>";break;default:console.error("unrecognized character "+i+" in ODF format "+r)}if(!l)break e;r=r.slice(s+1),s=0}if(r.match(/^\[?[hms]/)){for(e=="number"&&(e="time"),r.match(/\[/)&&(r=r.replace(/[\[\]]/g,""),a["number:truncate-on-overflow"]="false");s<r.length;++s)switch(i=r[s].toLowerCase()){case"h":case"m":case"s":for(;(r[++s]||"").toLowerCase()==i[0];)i+=i[0];switch(--s,i){case"h":case"hh":n+='<number:hours number:style="'+(i.length%2?"short":"long")+'"/>';break;case"m":case"mm":n+='<number:minutes number:style="'+(i.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(r[s+1]==".")do i+=r[s+1],++s;while(r[s+1]=="0");n+='<number:seconds number:style="'+(i.match("ss")?"long":"short")+'"'+(i.match(/\./)?' number:decimal-places="'+(i.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;r[++s]!='"'||r[++s]=='"';)i+=r[s];--s,n+="<number:text>"+en(i.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":case":":n+="<number:text>"+en(i)+"</number:text>";break;case"a":if(r.slice(s,s+3).toLowerCase()=="a/p"){n+="<number:am-pm/>",s+=2;break}if(r.slice(s,s+5).toLowerCase()=="am/pm"){n+="<number:am-pm/>",s+=4;break}default:console.error("unrecognized character "+i+" in ODF format "+r)}break e}if(r.indexOf(/\$/)>-1&&(e="currency"),r[0]=="$"&&(n+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',r=r.slice(1),s=0),s=0,r[s]=='"'){for(;r[++s]!='"'||r[++s]=='"';)i+=r[s];--s,r[s+1]=="*"?(s++,n+="<number:fill-character>"+en(i.replace(/""/g,'"'))+"</number:fill-character>"):n+="<number:text>"+en(i.replace(/""/g,'"'))+"</number:text>",r=r.slice(s+1),s=0}var u=r.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!u||!u[0])console.error("Could not find numeric part of "+r);else{var f=u[1].replace(/,/g,"");n+="<number:"+(u[3]?"scientific-":"")+'number number:min-integer-digits="'+(f.indexOf("0")==-1?"0":f.length-f.indexOf("0"))+'"'+(u[0].indexOf(",")>-1?' number:grouping="true"':"")+(u[2]&&' number:decimal-places="'+(u[2].length-1)+'"'||' number:decimal-places="0"')+(u[3]&&u[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(u[3]?' number:min-exponent-digits="'+u[3].match(/0+/)[0].length+'"':"")+"></number:"+(u[3]?"scientific-":"")+"number>",s=u.index+u[0].length}if(r[s]=='"'){for(i="";r[++s]!='"'||r[++s]=='"';)i+=r[s];--s,n+="<number:text>"+en(i.replace(/""/g,'"'))+"</number:text>"}}return n?tr("number:"+e+"-style",n,a):(console.error("Could not generate ODS number format for |"+r+"|"),"")}function XM(r,t,e){for(var n=[],a=0;a<r.length;++a){var i=r[a];i&&i.Sheet==(e==-1?null:e)&&n.push(i)}return n.length?`      <table:named-expressions>
`+n.map(function(s){var o=(e==-1?"$":"")+Wq(s.Ref);return"        "+tr("table:named-range",null,{"table:name":s.Name,"table:cell-range-address":o,"table:base-cell-address":o.replace(/[\.][^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var YM=(function(){var r=function(a,i){return en(a).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,e=function(a,i,s,o,l,c){var u=[];u.push('      <table:table table:name="'+en(i.SheetNames[s])+`" table:style-name="ta1">
`);var f=0,h=0,p=Qi(a["!ref"]||"A1"),g=a["!merges"]||[],y=0,m=a["!data"]!=null;if(a["!cols"])for(h=0;h<=p.e.c;++h)u.push("        <table:table-column"+(a["!cols"][h]?' table:style-name="co'+a["!cols"][h].ods+'"':"")+`></table:table-column>
`);var v="",b=a["!rows"]||[];for(f=0;f<p.s.r;++f)v=b[f]?' table:style-name="ro'+b[f].ods+'"':"",u.push("        <table:table-row"+v+`></table:table-row>
`);for(;f<=p.e.r;++f){for(v=b[f]?' table:style-name="ro'+b[f].ods+'"':"",u.push("        <table:table-row"+v+`>
`),h=0;h<p.s.c;++h)u.push(t);for(;h<=p.e.c;++h){var x=!1,S={},_="";for(y=0;y!=g.length;++y)if(!(g[y].s.c>h)&&!(g[y].s.r>f)&&!(g[y].e.c<h)&&!(g[y].e.r<f)){(g[y].s.c!=h||g[y].s.r!=f)&&(x=!0),S["table:number-columns-spanned"]=g[y].e.c-g[y].s.c+1,S["table:number-rows-spanned"]=g[y].e.r-g[y].s.r+1;break}if(x){u.push(`          <table:covered-table-cell/>
`);continue}var I=_a({r:f,c:h}),A=m?(a["!data"][f]||[])[h]:a[I];if(A&&A.f&&(S["table:formula"]=en(Vve(A.f)),A.F&&A.F.slice(0,I.length)==I)){var O=Qi(A.F);S["table:number-matrix-columns-spanned"]=O.e.c-O.s.c+1,S["table:number-matrix-rows-spanned"]=O.e.r-O.s.r+1}if(!A){u.push(t);continue}switch(A.t){case"b":_=A.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=A.v?"true":"false";break;case"n":isFinite(A.v)?(_=A.w||String(A.v||0),S["office:value-type"]="float",S["office:value"]=A.v||0):(isNaN(A.v)?(_="#NUM!",S["table:formula"]="of:=#NUM!"):(_="#DIV/0!",S["table:formula"]="of:="+(A.v<0?"-":"")+"1/0"),S["office:string-value"]="",S["office:value-type"]="string",S["calcext:value-type"]="error");break;case"s":case"str":_=A.v==null?"":A.v,S["office:value-type"]="string";break;case"d":_=A.w||vo(A.v,c).toISOString(),S["office:value-type"]="date",S["office:date-value"]=vo(A.v,c).toISOString(),S["table:style-name"]="ce1";break;default:u.push(t);continue}var M=r(_);if(A.l&&A.l.Target){var z=A.l.Target;z=z.charAt(0)=="#"?"#"+Wq(z.slice(1)):z,z.charAt(0)!="#"&&!z.match(/^\w+:/)&&(z="../"+z),M=tr("text:a",M,{"xlink:href":z.replace(/&/g,"&amp;")})}l[A.z]&&(S["table:style-name"]="ce"+l[A.z].slice(1));var U=tr("text:p",M,{});if(A.c){for(var D="",T="",R={},C=0;C<A.c.length;++C)!D&&A.c[C].a&&(D=A.c[C].a),T+="<text:p>"+r(A.c[C].t)+"</text:p>";A.c.hidden||(R["office:display"]=!0),U=tr("office:annotation",T,R)+U}u.push("          "+tr("table:table-cell",U,S)+`
`)}u.push(`        </table:table-row>
`)}return(i.Workbook||{}).Names&&u.push(XM(i.Workbook.Names,i.SheetNames,s)),u.push(`      </table:table>
`),u.join("")},n=function(a,i){a.push(` <office:automatic-styles>
`);var s=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var h=u["!cols"][f];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Gj(h),h.ods=s;var p=u["!cols"][f].wpx+"px";a.push('  <style:style style:name="co'+s+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++s}}});var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=o;var h=u["!rows"][f].hpx+"px";a.push('  <style:style style:name="ro'+o+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var l={},c=69;return i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u){var f=u["!data"]!=null;if(u["!ref"])for(var h=Qi(u["!ref"]),p=0;p<=h.e.r;++p)for(var g=0;g<=h.e.c;++g){var y=f?(u["!data"][p]||[])[g]:u[_a({r:p,c:g})];if(!(!y||!y.z||y.z.toLowerCase()=="general")&&!l[y.z]){var m=j2e(y.z,"N"+c);m&&(l[y.z]="N"+c,++c,a.push(m+`
`))}}}}),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),Ja(l).forEach(function(u){a.push('<style:style style:name="ce'+l[u].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+l[u]+`"/>
`)}),a.push(` </office:automatic-styles>
`),l};return function(i,s){var o=[ei],l=Ay({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),c=Ay({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});s.bookType=="fods"?(o.push("<office:document"+l+c+`>
`),o.push(yq().replace(/<office:document-meta[^<>]*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):o.push("<office:document-content"+l+`>
`);var u=n(o,i);o.push(`  <office:body>
`),o.push(`    <office:spreadsheet>
`),((i.Workbook||{}).WBProps||{}).date1904&&o.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var f=0;f!=i.SheetNames.length;++f)o.push(e(i.Sheets[i.SheetNames[f]],i,f,s,u,((i.Workbook||{}).WBProps||{}).date1904));return(i.Workbook||{}).Names&&o.push(XM(i.Workbook.Names,i.SheetNames,-1)),o.push(`    </office:spreadsheet>
`),o.push(`  </office:body>
`),s.bookType=="fods"?o.push("</office:document>"):o.push("</office:document-content>"),o.join("")}})();function ez(r,t){if(t.bookType=="fods")return YM(r,t);var e=Fj(),n="",a=[],i=[];return n="mimetype",Zr(e,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Zr(e,n,YM(r,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Zr(e,n,N2e(r,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Zr(e,n,ei+yq()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Zr(e,n,Sge(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Zr(e,n,wge(a)),e}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var Hs=(function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}})();function fx(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Oy(r){return typeof TextDecoder<"u"?new TextDecoder().decode(r):gp($h(r))}function Us(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Lo(Ey(r))}function bf(r){for(var t=0,e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),a=0;for(e=0;e<r.length;++e){var i=r[e],s=i.length;if(s<250)for(var o=0;o<s;++o)n[a++]=i[o];else n.set(i,a),a+=s}return n}function k2e(r,t,e){var n=Math.floor(e==0?0:Math.LOG10E*Math.log(Math.abs(e)))+6176-16,a=e/Math.pow(10,n-6176);r[t+15]|=n>>7,r[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)r[t+i]=a&255;r[t+15]|=e>=0?0:128}function Iy(r,t){var e=t.l,n=r[e]&127;e:if(r[e++]>=128&&(n|=(r[e]&127)<<7,r[e++]<128||(n|=(r[e]&127)<<14,r[e++]<128)||(n|=(r[e]&127)<<21,r[e++]<128)||(n+=(r[e]&127)*Math.pow(2,28),++e,r[e++]<128)||(n+=(r[e]&127)*Math.pow(2,35),++e,r[e++]<128)||(n+=(r[e]&127)*Math.pow(2,42),++e,r[e++]<128)))break e;return t.l=e,n}function jr(r){var t=new Uint8Array(7);t[0]=r&127;var e=1;e:if(r>127){if(t[e-1]|=128,t[e]=r>>7&127,++e,r<=16383||(t[e-1]|=128,t[e]=r>>14&127,++e,r<=2097151)||(t[e-1]|=128,t[e]=r>>21&127,++e,r<=268435455)||(t[e-1]|=128,t[e]=r/256>>>21&127,++e,r<=34359738367)||(t[e-1]|=128,t[e]=r/65536>>>21&127,++e,r<=4398046511103))break e;t[e-1]|=128,t[e]=r/16777216>>>21&127,++e}return t[Hs](0,e)}function tz(r){for(var t={l:0},e=[];t.l<r.length;)e.push(Iy(r,t));return e}function rz(r){return bf(r.map(function(t){return jr(t)}))}function Wo(r){var t=0,e=r[t]&127;return r[t++]<128||(e|=(r[t]&127)<<7,r[t++]<128)||(e|=(r[t]&127)<<14,r[t++]<128)||(e|=(r[t]&127)<<21,r[t++]<128)||(e|=(r[t]&15)<<28),e}function Rr(r){for(var t=[],e={l:0};e.l<r.length;){var n=e.l,a=Iy(r,e),i=a&7;a=a/8|0;var s,o=e.l;switch(i){case 0:{for(;r[o++]>=128;);s=r[Hs](e.l,o),e.l=o}break;case 1:s=r[Hs](o,o+8),e.l=o+8;break;case 2:{var l=Iy(r,e);s=r[Hs](e.l,e.l+l),e.l+=l}break;case 5:s=r[Hs](o,o+4),e.l=o+4;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var c={data:s,type:i};t[a]==null&&(t[a]=[]),t[a].push(c)}return t}function Ar(r){var t=[];return r.forEach(function(e,n){n!=0&&e.forEach(function(a){a.data&&(t.push(jr(n*8+a.type)),a.type==2&&t.push(jr(a.data.length)),t.push(a.data))})}),bf(t)}function hx(r,t){return(r==null?void 0:r.map(function(e){return t(e.data)}))||[]}function px(r){for(var t,e=[],n={l:0};n.l<r.length;){var a=Iy(r,n),i=Rr(r[Hs](n.l,n.l+a));n.l+=a;var s={id:Wo(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Rr(o.data),c=Wo(l[3][0].data);s.messages.push({meta:l,data:r[Hs](n.l,n.l+c)}),n.l+=c}),(t=i[3])!=null&&t[0]&&(s.merge=Wo(i[3][0].data)>>>0>0),e.push(s)}return e}function bp(r){var t=[];return r.forEach(function(e){var n=[[],[{data:jr(e.id),type:0}],[]];e.merge!=null&&(n[3]=[{data:jr(+!!e.merge),type:0}]);var a=[];e.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:jr(s.data.length)}],n[2].push({data:Ar(s.meta),type:2})});var i=Ar(n);t.push(jr(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),bf(t)}function E2e(r,t){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var e={l:0},n=Iy(t,e),a=[],i=e.l;i<t.length;){var s=t[i]&3;if(s==0){var o=t[i++]>>2;if(o<60)++o;else{var l=o-59;o=t[i],l>1&&(o|=t[i+1]<<8),l>2&&(o|=t[i+2]<<16),l>3&&(o|=t[i+3]<<24),o>>>=0,o++,i+=l}a.push(t[Hs](i,i+o)),i+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[i]>>2&7)+4,c=(t[i++]&224)<<3,c|=t[i++]):(u=(t[i++]>>2)+1,s==2?(c=t[i]|t[i+1]<<8,i+=2):(c=(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0,i+=4)),c==0)throw new Error("Invalid offset 0");for(var f=a.length-1,h=c;f>=0&&h>=a[f].length;)h-=a[f].length,--f;if(f<0)if(h==0)h=a[f=0].length;else throw new Error("Invalid offset beyond length");if(u<h)a.push(a[f][Hs](a[f].length-h,a[f].length-h+u));else{for(h>0&&(a.push(a[f][Hs](a[f].length-h)),u-=h),++f;u>=a[f].length;)a.push(a[f]),u-=a[f].length,++f;u&&a.push(a[f][Hs](0,u))}a.length>25&&(a=[bf(a)])}}for(var p=0,g=0;g<a.length;++g)p+=a[g].length;if(p!=n)throw new Error("Unexpected length: ".concat(p," != ").concat(n));return a}function mx(r){Array.isArray(r)&&(r=new Uint8Array(r));for(var t=[],e=0;e<r.length;){var n=r[e++],a=r[e]|r[e+1]<<8|r[e+2]<<16;e+=3,t.push.apply(t,E2e(n,r[Hs](e,e+a))),e+=a}if(e!==r.length)throw new Error("data is not a valid framed stream!");return t.length==1?t[0]:bf(t)}function xp(r){for(var t=[],e=0;e<r.length;){var n=Math.min(r.length-e,268435455),a=new Uint8Array(4);t.push(a);var i=jr(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(r[Hs](e,e+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,e+=n}return bf(t)}function CS(r,t){var e=new Uint8Array(32),n=fx(e),a=12,i=0;switch(e[0]=5,r.t){case"n":if(r.z&&Uh(r.z)){e[1]=5,n.setFloat64(a,(mp(r.v+1462).getTime()-Date.UTC(2001,0,1))/1e3,!0),i|=4,a+=8;break}else e[1]=2,k2e(e,a,r.v),i|=1,a+=16;break;case"b":e[1]=6,n.setFloat64(a,r.v?1:0,!0),i|=2,a+=8;break;case"s":{var s=r.v==null?"":String(r.v);if(r.l){var o=t.rsst.findIndex(function(c){var u;return c.v==s&&c.l==((u=r.l)==null?void 0:u.Target)});o==-1&&(t.rsst[o=t.rsst.length]={v:s,l:r.l.Target}),e[1]=9,n.setUint32(a,o,!0),i|=16,a+=4}else{var l=t.sst.indexOf(s);l==-1&&(t.sst[l=t.sst.length]=s),e[1]=3,n.setUint32(a,l,!0),i|=8,a+=4}}break;case"d":e[1]=5,n.setFloat64(a,(r.v.getTime()-Date.UTC(2001,0,1))/1e3,!0),i|=4,a+=8;break;case"z":e[1]=0;break;default:throw"unsupported cell type "+r.t}return r.c&&(t.cmnt.push(A2e(r.c)),n.setUint32(a,t.cmnt.length-1,!0),i|=524288,a+=4),n.setUint32(8,i,!0),e[Hs](0,a)}function PS(r,t){var e=new Uint8Array(32),n=fx(e),a=12,i=0,s="";switch(e[0]=4,r.t){case"n":break;case"b":break;case"s":if(s=r.v==null?"":String(r.v),r.l){var o=t.rsst.findIndex(function(c){var u;return c.v==s&&c.l==((u=r.l)==null?void 0:u.Target)});o==-1&&(t.rsst[o=t.rsst.length]={v:s,l:r.l.Target}),e[1]=9,n.setUint32(a,o,!0),i|=512,a+=4}break;case"d":break;case"e":break;case"z":break;default:throw"unsupported cell type "+r.t}switch(r.c&&(n.setUint32(a,t.cmnt.length-1,!0),i|=4096,a+=4),r.t){case"n":e[1]=2,n.setFloat64(a,r.v,!0),i|=32,a+=8;break;case"b":e[1]=6,n.setFloat64(a,r.v?1:0,!0),i|=32,a+=8;break;case"s":if(s=r.v==null?"":String(r.v),!r.l){var l=t.sst.indexOf(s);l==-1&&(t.sst[l=t.sst.length]=s),e[1]=3,n.setUint32(a,l,!0),i|=16,a+=4}break;case"d":e[1]=5,n.setFloat64(a,(r.v.getTime()-Date.UTC(2001,0,1))/1e3,!0),i|=64,a+=8;break;case"z":e[1]=0;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,i,!0),e[Hs](0,a)}function Xa(r){var t=Rr(r);return Wo(t[1][0].data)}function bs(r){return Ar([[],[{type:0,data:jr(r)}]])}function vs(r,t){var e,n=(e=r.messages[0].meta[5])!=null&&e[0]?tz(r.messages[0].meta[5][0].data):[],a=n.indexOf(t);a==-1&&(n.push(t),r.messages[0].meta[5]=[{type:2,data:rz(n)}])}function Tu(r,t){var e,n=(e=r.messages[0].meta[5])!=null&&e[0]?tz(r.messages[0].meta[5][0].data):[];r.messages[0].meta[5]=[{type:2,data:rz(n.filter(function(a){return a!=t}))}]}function A2e(r){for(var t={a:"",t:"",replies:[]},e=0;e<r.length;++e)e==0?(t.a=r[e].a,t.t=r[e].t):t.replies.push({a:r[e].a,t:r[e].t});return t}function T2e(r,t,e){var n,a,i,s=[[],[{type:0,data:jr(0)}],[{type:0,data:jr(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:jr(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:jr(1)}]];if(!((n=s[6])!=null&&n[0])||!((a=s[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=0;if(s[7][0].data.length<2*r.length){var l=new Uint8Array(2*r.length);l.set(s[7][0].data),s[7][0].data=l}if(s[4][0].data.length<2*r.length){var c=new Uint8Array(2*r.length);c.set(s[4][0].data),s[4][0].data=c}for(var u=fx(s[7][0].data),f=0,h=[],p=fx(s[4][0].data),g=0,y=[],m=4,v=0;v<r.length;++v){if(r[v]==null||r[v].t=="z"&&!((i=r[v].c)!=null&&i.length)||r[v].t=="e"){u.setUint16(v*2,65535,!0),p.setUint16(v*2,65535);continue}u.setUint16(v*2,f/m,!0),p.setUint16(v*2,g/m,!0);var b,x;switch(r[v].t){case"d":if(r[v].v instanceof Date){b=CS(r[v],t),x=PS(r[v],t);break}b=CS(r[v],t),x=PS(r[v],t);break;case"s":case"n":case"b":case"z":b=CS(r[v],t),x=PS(r[v],t);break;default:throw new Error("Unsupported value "+r[v])}h.push(b),f+=b.length,y.push(x),g+=x.length,++o}for(s[2][0].data=jr(o),s[5][0].data=jr(5);v<s[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),p.setUint16(v*2,65535,!0);return s[6][0].data=bf(h),s[3][0].data=bf(y),s[8]=[{type:0,data:jr(1)}],s}function W8(r,t){return{meta:[[],[{type:0,data:jr(r)}]],data:t}}function Mc(r,t){t.last||(t.last=927262);for(var e=t.last;e<2e6;++e)if(!t[e])return t[t.last=e]=r,e;throw new Error("Too many messages")}function C2e(r){var t={},e=[];return r.FileIndex.map(function(n,a){return[n,r.FullPaths[a]]}).forEach(function(n){var a=n[0],i=n[1];a.type==2&&a.name.match(/\.iwa/)&&a.content[0]==0&&px(mx(a.content)).forEach(function(s){e.push(s.id),t[s.id]={deps:[],location:i,type:Wo(s.messages[0].meta[1][0].data)}})}),r.FileIndex.forEach(function(n){n.name.match(/\.iwa/)&&n.content[0]==0&&px(mx(n.content)).forEach(function(a){a.messages.forEach(function(i){[5,6].forEach(function(s){i.meta[s]&&i.meta[s].forEach(function(o){t[a.id].deps.push(Wo(o.data))})})})})}),t}function mv(r,t,e){return Ar([[],[{type:0,data:jr(1)}],[],[{type:5,data:new Uint8Array(Float32Array.from([r/255]).buffer)}],[{type:5,data:new Uint8Array(Float32Array.from([t/255]).buffer)}],[{type:5,data:new Uint8Array(Float32Array.from([e/255]).buffer)}],[{type:5,data:new Uint8Array(Float32Array.from([1]).buffer)}],[],[],[],[],[],[{type:0,data:jr(1)}]])}function JM(r){switch(r){case 0:return mv(99,222,171);case 1:return mv(162,197,240);case 2:return mv(255,189,189)}return mv(Math.random()*255,Math.random()*255,Math.random()*255)}function P2e(r,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var e=Kn.read(t.numbers,{type:"base64"}),n=C2e(e),a=Rc(e,n,1);if(a==null)throw"Could not find message ".concat(1," in Numbers template");var i=hx(Rr(a.messages[0].data)[1],Xa);if(i.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return r.SheetNames.forEach(function(s,o){o>=1&&(I2e(e,n,o+1),a=Rc(e,n,1),i=hx(Rr(a.messages[0].data)[1],Xa)),M2e(e,n,r.Sheets[s],s,o,i[o])}),e}function Ln(r,t,e,n){var a=Kn.find(r,t[e].location);if(!a)throw"Could not find ".concat(t[e].location," in Numbers template");var i=px(mx(a.content)),s=i.find(function(o){return o.id==e});n(s,i),a.content=xp(bp(i)),a.size=a.content.length}function Rc(r,t,e){var n=Kn.find(r,t[e].location);if(!n)throw"Could not find ".concat(t[e].location," in Numbers template");var a=px(mx(n.content)),i=a.find(function(s){return s.id==e});return i}function H8(r,t,e){r[3].push({type:2,data:Ar([[],[{type:0,data:jr(t)}],[{type:2,data:Us(e.replace(/-[\s\S]*$/,""))}],[{type:2,data:Us(e)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:jr(0)}],[],[{type:0,data:jr(0)}]])}),r[1]=[{type:0,data:jr(Math.max(t+1,Wo(r[1][0].data)))}]}function ah(r,t,e,n,a,i){i||(i=Mc({deps:[],location:"",type:t},a));var s="".concat(n,"-").concat(i,".iwa");a[i].location="Root Entry"+s,Kn.utils.cfb_add(r,s,xp(bp([{id:i,messages:[W8(t,Ar(e))]}])));var o=s.replace(/^[\/]/,"").replace(/^Index\//,"").replace(/\.iwa$/,"");return Ln(r,a,2,function(l){var c=Rr(l.messages[0].data);H8(c,i||0,o),l.messages[0].data=Ar(c)}),i}function ho(r,t,e,n){var a=t[e].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,""),i=r[3].findIndex(function(o){var l,c,u=Rr(o.data);return(l=u[3])!=null&&l[0]?Oy(u[3][0].data)==a:!!((c=u[2])!=null&&c[0]&&Oy(u[2][0].data)==a)}),s=Rr(r[3][i].data);s[6]||(s[6]=[]),(Array.isArray(n)?n:[n]).forEach(function(o){s[6].push({type:2,data:Ar([[],[{type:0,data:jr(o)}]])})}),r[3][i].data=Ar(s)}function O2e(r,t,e,n){var a=t[e].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,""),i=r[3].findIndex(function(o){var l,c,u=Rr(o.data);return(l=u[3])!=null&&l[0]?Oy(u[3][0].data)==a:!!((c=u[2])!=null&&c[0]&&Oy(u[2][0].data)==a)}),s=Rr(r[3][i].data);s[6]||(s[6]=[]),s[6]=s[6].filter(function(o){return Wo(Rr(o.data)[1][0].data)!=n}),r[3][i].data=Ar(s)}function I2e(r,t,e){var n=-1,a=-1,i={};Ln(r,t,1,function(l,c){var u=Rr(l.messages[0].data);n=Xa(Rr(l.messages[0].data)[1][0].data),a=Mc({deps:[1],location:t[n].location,type:2},t),i[n]=a,vs(l,a),u[1].push({type:2,data:bs(a)});var f=Rc(r,t,n);f.id=a,t[1].location==t[a].location?c.push(f):Ln(r,t,a,function(h,p){return p.push(f)}),l.messages[0].data=Ar(u)});var s=-1;Ln(r,t,a,function(l,c){for(var u=Rr(l.messages[0].data),f=3;f<=69;++f)delete u[f];var h=hx(u[2],Xa);h.forEach(function(g){return Tu(l,g)}),s=Mc({deps:[a],location:t[h[0]].location,type:t[h[0]].type},t),vs(l,s),i[h[0]]=s,u[2]=[{type:2,data:bs(s)}];var p=Rc(r,t,h[0]);p.id=s,t[h[0]].location==t[a].location?c.push(p):(Ln(r,t,2,function(g){var y=Rr(g.messages[0].data);ho(y,t,a,s),g.messages[0].data=Ar(y)}),Ln(r,t,s,function(g,y){return y.push(p)})),l.messages[0].data=Ar(u)});var o=-1;Ln(r,t,s,function(l,c){for(var u=Rr(l.messages[0].data),f=Rr(u[1][0].data),h=3;h<=69;++h)delete f[h];var p=Xa(f[2][0].data);f[2][0].data=bs(i[p]),u[1][0].data=Ar(f);var g=Xa(u[2][0].data);Tu(l,g),o=Mc({deps:[s],location:t[g].location,type:t[g].type},t),vs(l,o),i[g]=o,u[2][0].data=bs(o);var y=Rc(r,t,g);y.id=o,t[s].location==t[o].location?c.push(y):Ln(r,t,o,function(m,v){return v.push(y)}),l.messages[0].data=Ar(u)}),Ln(r,t,o,function(l,c){var u,f,h=Rr(l.messages[0].data),p=Oy(h[1][0].data),g=p.replace(/-[A-Z0-9]*/,"-".concat(("0000"+e.toString(16)).slice(-4)));if(h[1][0].data=Us(g),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(_){return delete h[_]}),h[45]){var y=Rr(h[45][0].data),m=Xa(y[1][0].data);Tu(l,m),delete h[45]}if(h[70]){var v=Rr(h[70][0].data);(u=v[2])==null||u.forEach(function(_){var I=Rr(_.data);[2,3].map(function(A){return I[A][0]}).forEach(function(A){var O=Rr(A.data);if(O[8]){var M=Xa(O[8][0].data);Tu(l,M)}})}),delete h[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(_){if(h[_]){var I=Xa(h[_][0].data);delete h[_],Tu(l,I)}});var b=Rr(h[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(_){var I;if((I=b[_])!=null&&I[0]){var A=Xa(b[_][0].data),O=Mc({deps:[o],location:t[A].location,type:t[A].type},t);Tu(l,A),vs(l,O),i[A]=O;var M=Rc(r,t,A);if(M.id=O,t[A].location==t[o].location)c.push(M);else{t[O].location=t[A].location.replace(A.toString(),O.toString()),t[O].location==t[A].location&&(t[O].location=t[O].location.replace(/\.iwa/,"-".concat(O,".iwa"))),Kn.utils.cfb_add(r,t[O].location,xp(bp([M])));var z=t[O].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,"");Ln(r,t,2,function(U){var D=Rr(U.messages[0].data);H8(D,O,z),ho(D,t,o,O),U.messages[0].data=Ar(D)})}b[_][0].data=bs(O)}});var x=Rr(b[1][0].data);(f=x[2])==null||f.forEach(function(_){var I=Xa(_.data),A=Mc({deps:[o],location:t[I].location,type:t[I].type},t);Tu(l,I),vs(l,A),i[I]=A;var O=Rc(r,t,I);if(O.id=A,t[I].location==t[o].location)c.push(O);else{t[A].location=t[I].location.replace(I.toString(),A.toString()),t[A].location==t[I].location&&(t[A].location=t[A].location.replace(/\.iwa/,"-".concat(A,".iwa"))),Kn.utils.cfb_add(r,t[A].location,xp(bp([O])));var M=t[A].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,"");Ln(r,t,2,function(z){var U=Rr(z.messages[0].data);H8(U,A,M),ho(U,t,o,A),z.messages[0].data=Ar(U)})}_.data=bs(A)}),b[1][0].data=Ar(x);var S=Rr(b[3][0].data);S[1].forEach(function(_){var I=Rr(_.data),A=Xa(I[2][0].data),O=i[A];if(!i[A]){O=Mc({deps:[o],location:"",type:t[A].type},t),t[O].location="Root Entry/Index/Tables/Tile-".concat(O,".iwa"),i[A]=O;var M=Rc(r,t,A);M.id=O,Tu(l,A),vs(l,O),Kn.utils.cfb_add(r,"/Index/Tables/Tile-".concat(O,".iwa"),xp(bp([M]))),Ln(r,t,2,function(z){var U=Rr(z.messages[0].data);U[3].push({type:2,data:Ar([[],[{type:0,data:jr(O)}],[{type:2,data:Us("Tables/Tile")}],[{type:2,data:Us("Tables/Tile-".concat(O))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:jr(0)}],[],[{type:0,data:jr(0)}]])}),U[1]=[{type:0,data:jr(Math.max(O+1,Wo(U[1][0].data)))}],ho(U,t,o,O),z.messages[0].data=Ar(U)})}I[2][0].data=bs(O),_.data=Ar(I)}),b[3][0].data=Ar(S)}h[4][0].data=Ar(b),l.messages[0].data=Ar(h)})}function M2e(r,t,e,n,a,i){var s=[];Ln(r,t,i,function(c){var u=Rr(c.messages[0].data);u[1]=[{type:2,data:Us(n)}],s=hx(u[2],Xa),c.messages[0].data=Ar(u)});var o=Rc(r,t,s[0]),l=Xa(Rr(o.messages[0].data)[2][0].data);Ln(r,t,l,function(c,u){return R2e(r,t,e,c,u,l)})}function R2e(r,t,e,n,a,i){if(!e["!ref"])throw new Error("Cannot export empty sheet to NUMBERS");var s=Qi(e["!ref"]);s.s.r=s.s.c=0;var o=!1;s.e.c>999&&(o=!0,s.e.c=999),s.e.r>999999&&(o=!0,s.e.r=999999),o&&console.error("Truncating to ".concat(Za(s)));var l=[];if(e["!data"])l=e["!data"];else{for(var c=[],u=0;u<=s.e.c;++u)c[u]=Bn(u);for(var f=0;f<=s.e.r;++f){l[f]=[];var h=""+(f+1);for(u=0;u<=s.e.c;++u){var p=e[c[u]+h];p&&(l[f][u]=p)}}}var g={cmnt:[{a:"~54ee77S~",t:"... the people who are crazy enough to think they can change the world, are the ones who do."}],rsst:[{v:"~54ee77S~",l:"https://sheetjs.com/"}],sst:["~Sh33tJ5~"]},y=Rr(n.messages[0].data);{y[6][0].data=jr(s.e.r+1),y[7][0].data=jr(s.e.c+1),delete y[46];var m=Rr(y[4][0].data);{var v=Xa(Rr(m[1][0].data)[2][0].data);Ln(r,t,v,function(L,K){var Y,Z=Rr(L.messages[0].data);if((Y=Z==null?void 0:Z[2])!=null&&Y[0])for(var V=0;V<l.length;++V){var ee=Rr(Z[2][0].data);ee[1][0].data=jr(V),ee[4][0].data=jr(l[V].length),Z[2][V]={type:Z[2][0].type,data:Ar(ee)}}L.messages[0].data=Ar(Z)});var b=Xa(m[2][0].data);Ln(r,t,b,function(L,K){for(var Y=Rr(L.messages[0].data),Z=0;Z<=s.e.c;++Z){var V=Rr(Y[2][0].data);V[1][0].data=jr(Z),V[4][0].data=jr(s.e.r+1),Y[2][Z]={type:Y[2][0].type,data:Ar(V)}}L.messages[0].data=Ar(Y)});var x=Rr(m[9][0].data);x[1]=[];var S=Rr(m[3][0].data);{var _=256;S[2]=[{type:0,data:jr(_)}];var I=Xa(Rr(S[1][0].data)[2][0].data),A=(function(){var L=Rc(r,t,2),K=Rr(L.messages[0].data),Y=K[3].filter(function(Z){return Wo(Rr(Z.data)[1][0].data)==I});return Y!=null&&Y.length?Wo(Rr(Y[0].data)[12][0].data):0})();Kn.utils.cfb_del(r,t[I].location),Ln(r,t,2,function(L){var K=Rr(L.messages[0].data);K[3]=K[3].filter(function(Y){return Wo(Rr(Y.data)[1][0].data)!=I}),O2e(K,t,i,I),L.messages[0].data=Ar(K)}),Tu(n,I),S[1]=[];for(var O=Math.ceil((s.e.r+1)/_),M=0;M<O;++M){var z=Mc({deps:[],location:"",type:6002},t);t[z].location="Root Entry/Index/Tables/Tile-".concat(z,".iwa");for(var U=[[],[{type:0,data:jr(0)}],[{type:0,data:jr(Math.min(s.e.r+1,(M+1)*_))}],[{type:0,data:jr(0)}],[{type:0,data:jr(Math.min((M+1)*_,s.e.r+1)-M*_)}],[],[{type:0,data:jr(5)}],[{type:0,data:jr(1)}],[{type:0,data:jr(1)}]],D=M*_;D<=Math.min(s.e.r,(M+1)*_-1);++D){var T=T2e(l[D],g);T[1][0].data=jr(D-M*_),U[5].push({data:Ar(T),type:2})}S[1].push({type:2,data:Ar([[],[{type:0,data:jr(M)}],[{type:2,data:bs(z)}]])});var R={id:z,messages:[W8(6002,Ar(U))]},C=xp(bp([R]));Kn.utils.cfb_add(r,"/Index/Tables/Tile-".concat(z,".iwa"),C),Ln(r,t,2,function(L){var K=Rr(L.messages[0].data);K[3].push({type:2,data:Ar([[],[{type:0,data:jr(z)}],[{type:2,data:Us("Tables/Tile")}],[{type:2,data:Us("Tables/Tile-".concat(z))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:jr(0)}],[],[{type:0,data:jr(A)}]])}),K[1]=[{type:0,data:jr(Math.max(z+1,Wo(K[1][0].data)))}],ho(K,t,i,z),L.messages[0].data=Ar(K)}),vs(n,z),x[1].push({type:2,data:Ar([[],[{type:0,data:jr(M*_)}],[{type:0,data:jr(M)}]])})}}if(m[3][0].data=Ar(S),m[9][0].data=Ar(x),m[10]=[{type:2,data:new Uint8Array([])}],e["!merges"]){var N=Mc({type:6144,deps:[i],location:t[i].location},t);a.push({id:N,messages:[W8(6144,Ar([[],e["!merges"].map(function(L){return{type:2,data:Ar([[],[{type:2,data:Ar([[],[{type:5,data:new Uint8Array(new Uint16Array([L.s.r,L.s.c]).buffer)}]])}],[{type:2,data:Ar([[],[{type:5,data:new Uint8Array(new Uint16Array([L.e.r-L.s.r+1,L.e.c-L.s.c+1]).buffer)}]])}]])}})]))]}),m[13]=[{type:2,data:bs(N)}],Ln(r,t,2,function(L){var K=Rr(L.messages[0].data);ho(K,t,i,N),L.messages[0].data=Ar(K)}),vs(n,N)}else delete m[13];var E=Xa(m[4][0].data);Ln(r,t,E,function(L){var K=Rr(L.messages[0].data);K[3]=[],g.sst.forEach(function(Y,Z){Z!=0&&K[3].push({type:2,data:Ar([[],[{type:0,data:jr(Z)}],[{type:0,data:jr(1)}],[{type:2,data:Us(Y)}]])})}),L.messages[0].data=Ar(K)});var k=Xa(m[17][0].data);if(Ln(r,t,k,function(L){var K=Rr(L.messages[0].data);K[3]=[];var Y=[904980,903835,903815,903845];g.rsst.forEach(function(Z,V){if(V!=0){var ee=[[],[{type:0,data:new Uint8Array([5])}],[],[{type:2,data:Us(Z.v)}]];ee[10]=[{type:0,data:new Uint8Array([1])}],ee[19]=[{type:2,data:new Uint8Array([10,6,8,0,18,2,101,110])}],ee[5]=[{type:2,data:new Uint8Array([10,8,8,0,18,4,8,155,149,55])}],ee[2]=[{type:2,data:new Uint8Array([8,148,158,55])}],ee[6]=[{type:2,data:new Uint8Array([10,6,8,0,16,0,24,0])}],ee[7]=[{type:2,data:new Uint8Array([10,8,8,0,18,4,8,135,149,55])}],ee[8]=[{type:2,data:new Uint8Array([10,8,8,0,18,4,8,165,149,55])}],ee[14]=[{type:2,data:new Uint8Array([10,6,8,0,16,0,24,0])}],ee[24]=[{type:2,data:new Uint8Array([10,6,8,0,16,0,24,0])}];var B=Mc({deps:[],location:"",type:2001},t),F=[];if(Z.l){var X=ah(r,2032,[[],[],[{type:2,data:Us(Z.l)}]],"/Index/Tables/DataList",t);ee[11]=[];var te=[[],[]];te[1]||(te[1]=[]),te[1].push({type:2,data:Ar([[],[{type:0,data:jr(0)}],[{type:2,data:bs(X)}]])}),ee[11][0]={type:2,data:Ar(te)},F.push(X)}ah(r,2001,ee,"/Index/Tables/DataList",t,B),Ln(r,t,B,function(ce){Y.forEach(function(ue){return vs(ce,ue)}),F.forEach(function(ue){return vs(ce,ue)})});var se=ah(r,6218,[[],[{type:2,data:bs(B)}],[],[{type:2,data:new Uint8Array([13,255,255,255,0,18,10,16,255,255,1,24,255,255,255,255,7])}]],"/Index/Tables/DataList",t);Ln(r,t,se,function(ce){return vs(ce,B)}),K[3].push({type:2,data:Ar([[],[{type:0,data:jr(V)}],[{type:0,data:jr(1)}],[],[],[],[],[],[],[{type:2,data:bs(se)}]])}),vs(L,se),Ln(r,t,2,function(ce){var ue=Rr(ce.messages[0].data);ho(ue,t,k,se),ho(ue,t,se,B),ho(ue,t,B,F),ho(ue,t,B,Y),ce.messages[0].data=Ar(ue)})}}),L.messages[0].data=Ar(K)}),g.cmnt.length>1){var P=Xa(m[19][0].data),q={},H=0;Ln(r,t,P,function(L){var K=Rr(L.messages[0].data);K[3]=[],g.cmnt.forEach(function(Y,Z){if(Z!=0){var V=[];Y.replies&&Y.replies.forEach(function(F){q[F.a||""]||(q[F.a||""]=ah(r,212,[[],[{type:2,data:Us(F.a||"")}],[{type:2,data:JM(++H)}],[],[{type:0,data:jr(0)}]],"/Index/Tables/DataList",t));var X=q[F.a||""],te=ah(r,3056,[[],[{type:2,data:Us(F.t||"")}],[{type:2,data:Ar([[],[{type:1,data:new Uint8Array([0,0,0,128,116,109,182,65])}]])}],[{type:2,data:bs(X)}]],"/Index/Tables/DataList",t);Ln(r,t,te,function(se){return vs(se,X)}),V.push(te),Ln(r,t,2,function(se){var ce=Rr(se.messages[0].data);ho(ce,t,te,X),se.messages[0].data=Ar(ce)})}),q[Y.a||""]||(q[Y.a||""]=ah(r,212,[[],[{type:2,data:Us(Y.a||"")}],[{type:2,data:JM(++H)}],[],[{type:0,data:jr(0)}]],"/Index/Tables/DataList",t));var ee=q[Y.a||""],B=ah(r,3056,[[],[{type:2,data:Us(Y.t||"")}],[{type:2,data:Ar([[],[{type:1,data:new Uint8Array([0,0,0,128,116,109,182,65])}]])}],[{type:2,data:bs(ee)}],V.map(function(F){return{type:2,data:bs(F)}}),[{type:2,data:Ar([[],[{type:0,data:jr(Z)}],[{type:0,data:jr(0)}]])}]],"/Index/Tables/DataList",t);Ln(r,t,B,function(F){vs(F,ee),V.forEach(function(X){return vs(F,X)})}),K[3].push({type:2,data:Ar([[],[{type:0,data:jr(Z)}],[{type:0,data:jr(1)}],[],[],[],[],[],[],[],[{type:2,data:bs(B)}]])}),vs(L,B),Ln(r,t,2,function(F){var X=Rr(F.messages[0].data);ho(X,t,P,B),ho(X,t,B,ee),V.length&&ho(X,t,B,V),F.messages[0].data=Ar(X)})}}),K[2][0].data=jr(g.cmnt.length+1),L.messages[0].data=Ar(K)})}}y[4][0].data=Ar(m)}n.messages[0].data=Ar(y)}function F2e(r){return function(e){for(var n=0;n!=r.length;++n){var a=r[n];e[a[0]]===void 0&&(e[a[0]]=a[1]),a[2]==="n"&&(e[a[0]]=Number(e[a[0]]))}}}function Yj(r){F2e([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function D2e(r,t){r&&!r.SSF&&(r.SSF=Es(la)),r&&r.SSF&&(m2(),p2(r.SSF),t.revssf=g2(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Mg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e="bin",n=!0,a=pq();Yj(t=t||{});var i=Fj(),s="",o=0;if(t.cellXfs=[],Af(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),s="docProps/core.xml",Zr(i,s,vq(r.Props,t)),a.coreprops.push(s),kn(t.rels,2,s,mn.CORE_PROPS),s="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var l=[],c=0;c<r.SheetNames.length;++c)(r.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(r.SheetNames[c]);r.Props.SheetNames=l}r.Props.Worksheets=r.Props.SheetNames.length,Zr(i,s,xq(r.Props)),a.extprops.push(s),kn(t.rels,3,s,mn.EXT_PROPS),r.Custprops!==r.Props&&Ja(r.Custprops||{}).length>0&&(s="docProps/custom.xml",Zr(i,s,wq(r.Custprops)),a.custprops.push(s),kn(t.rels,4,s,mn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=r.SheetNames.length;++o){var f={"!id":{}},h=r.Sheets[r.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+e,Zr(i,s,vxe(o-1,t,r,f)),a.sheets.push(s),kn(t.wbrels,-1,"worksheets/sheet"+o+"."+e,mn.WS[0])}if(h){var g=h["!comments"],y=!1,m="";if(g&&g.length>0){var v=!1;g.forEach(function(x){x[1].forEach(function(S){S.T==!0&&(v=!0)})}),v&&(m="xl/threadedComments/threadedComment"+o+".xml",Zr(i,m,Rq(g,u,t)),a.threadedcomments.push(m),kn(f,-1,"../threadedComments/threadedComment"+o+".xml",mn.TCMNT)),m="xl/comments"+o+"."+e,Zr(i,m,l1e(g)),a.comments.push(m),kn(f,-1,"../comments"+o+"."+e,mn.CMNT),y=!0}h["!legacy"]&&y&&Zr(i,"xl/drawings/vmlDrawing"+o+".vml",Mq(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Zr(i,gq(s),yp(f))}t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+e,Zr(i,s,vye(t.Strings)),a.strs.push(s),kn(t.wbrels,-1,"sharedStrings."+e,mn.SST)),s="xl/workbook."+e,Zr(i,s,Bxe(r)),a.workbooks.push(s),kn(t.rels,1,s,mn.WB),s="xl/theme/theme1.xml";var b=Iq(r.Themes,t);return Zr(i,s,b),a.themes.push(s),kn(t.wbrels,-1,"theme/theme1.xml",mn.THEME),s="xl/styles."+e,Zr(i,s,Vye(r,t)),a.styles.push(s),kn(t.wbrels,-1,"styles."+e,mn.STY),r.vbaraw&&n&&(s="xl/vbaProject.bin",Zr(i,s,r.vbaraw),a.vba.push(s),kn(t.wbrels,-1,"vbaProject.bin",mn.VBA)),s="xl/metadata."+e,Zr(i,s,e1e()),a.metadata.push(s),kn(t.wbrels,-1,"metadata."+e,mn.XLMETA),u.length>1&&(s="xl/persons/person.xml",Zr(i,s,Fq(u)),a.people.push(s),kn(t.wbrels,-1,"persons/person.xml",mn.PEOPLE)),Zr(i,"[Content_Types].xml",mq(a,t)),Zr(i,"_rels/.rels",yp(t.rels)),Zr(i,"xl/_rels/workbook."+e+".rels",yp(t.wbrels)),delete t.revssf,delete t.ssf,i}function L2e(r,t){r&&!r.SSF&&(r.SSF=Es(la)),r&&r.SSF&&(m2(),p2(r.SSF),t.revssf=g2(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Mg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e="xml",n=u1e.indexOf(t.bookType)>-1,a=pq();Yj(t=t||{});var i=Fj(),s="",o=0;if(t.cellXfs=[],Af(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),s="docProps/core.xml",Zr(i,s,vq(r.Props,t)),a.coreprops.push(s),kn(t.rels,2,s,mn.CORE_PROPS),s="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var l=[],c=0;c<r.SheetNames.length;++c)(r.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(r.SheetNames[c]);r.Props.SheetNames=l}r.Props.Worksheets=r.Props.SheetNames.length,Zr(i,s,xq(r.Props)),a.extprops.push(s),kn(t.rels,3,s,mn.EXT_PROPS),r.Custprops!==r.Props&&Ja(r.Custprops||{}).length>0&&(s="docProps/custom.xml",Zr(i,s,wq(r.Custprops)),a.custprops.push(s),kn(t.rels,4,s,mn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=r.SheetNames.length;++o){var f={"!id":{}},h=r.Sheets[r.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+e,Zr(i,s,ibe(o-1,t,r,f)),a.sheets.push(s),kn(t.wbrels,-1,"worksheets/sheet"+o+"."+e,mn.WS[0])}if(h){var g=h["!comments"],y=!1,m="";if(g&&g.length>0){var v=!1;g.forEach(function(b){b[1].forEach(function(x){x.T==!0&&(v=!0)})}),v&&(m="xl/threadedComments/threadedComment"+o+".xml",Zr(i,m,Rq(g,u,t)),a.threadedcomments.push(m),kn(f,-1,"../threadedComments/threadedComment"+o+".xml",mn.TCMNT)),m="xl/comments"+o+"."+e,Zr(i,m,a1e(g)),a.comments.push(m),kn(f,-1,"../comments"+o+"."+e,mn.CMNT),y=!0}h["!legacy"]&&y&&Zr(i,"xl/drawings/vmlDrawing"+o+".vml",Mq(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Zr(i,gq(s),yp(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+e,Zr(i,s,pye(t.Strings,t)),a.strs.push(s),kn(t.wbrels,-1,"sharedStrings."+e,mn.SST)),s="xl/workbook."+e,Zr(i,s,jxe(r)),a.workbooks.push(s),kn(t.rels,1,s,mn.WB),s="xl/theme/theme1.xml",Zr(i,s,Iq(r.Themes,t)),a.themes.push(s),kn(t.wbrels,-1,"theme/theme1.xml",mn.THEME),s="xl/styles."+e,Zr(i,s,jye(r,t)),a.styles.push(s),kn(t.wbrels,-1,"styles."+e,mn.STY),r.vbaraw&&n&&(s="xl/vbaProject.bin",Zr(i,s,r.vbaraw),a.vba.push(s),kn(t.wbrels,-1,"vbaProject.bin",mn.VBA)),s="xl/metadata."+e,Zr(i,s,t1e()),a.metadata.push(s),kn(t.wbrels,-1,"metadata."+e,mn.XLMETA),u.length>1&&(s="xl/persons/person.xml",Zr(i,s,Fq(u)),a.people.push(s),kn(t.wbrels,-1,"persons/person.xml",mn.PEOPLE)),Zr(i,"[Content_Types].xml",mq(a,t)),Zr(i,"_rels/.rels",yp(t.rels)),Zr(i,"xl/_rels/workbook."+e+".rels",yp(t.wbrels)),delete t.revssf,delete t.ssf,i}function B2e(r,t){var e="";switch((t||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":e=yf(r.slice(0,12));break;case"binary":e=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3),e.charCodeAt(4),e.charCodeAt(5),e.charCodeAt(6),e.charCodeAt(7)]}function nz(r,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Ky(t.file,Kn.write(r,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Kn.write(r,t)}function $2e(r,t){switch(t.bookType){case"ods":return ez(r,t);case"numbers":return P2e(r,t);case"xlsb":return D2e(r,t);default:return L2e(r,t)}}function U2e(r,t){var e=Es(t||{}),n=$2e(r,e);return q2e(n,e)}function q2e(r,t){var e={},n=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(e.compression="DEFLATE"),t.password)e.type=n;else switch(t.type){case"base64":e.type="base64";break;case"binary":e.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":e.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=r.FullPaths?Kn.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[e.type]||e.type,compression:!!t.compression}):r.generate(e);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(h2(a))}return t.password&&typeof encrypt_agile<"u"?nz(encrypt_agile(a,t.password),t):t.type==="file"?Ky(t.file,a):t.type=="string"?gp(a):a}function z2e(r,t){var e=t||{},n=Qxe(r,e);return nz(n,e)}function Cc(r,t,e){e||(e="");var n=e+r;switch(t.type){case"base64":return Qb(Ey(n));case"binary":return Ey(n);case"string":return r;case"file":return Ky(t.file,n,"utf8");case"buffer":return En?eu(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Cc(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function W2e(r,t){switch(t.type){case"base64":return Wpe(r);case"binary":return r;case"string":return r;case"file":return Ky(t.file,r,"binary");case"buffer":return En?eu(r,"binary"):r.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function gv(r,t){switch(t.type){case"string":case"base64":case"binary":for(var e="",n=0;n<r.length;++n)e+=String.fromCharCode(r[n]);return t.type=="base64"?Qb(e):t.type=="string"?gp(e):e;case"file":return Ky(t.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+t.type)}}function az(r,t){zpe(),Nxe(r);var e=Es(t||{});if(e.cellStyles&&(e.cellNF=!0,e.sheetStubs=!0),e.type=="array"){e.type="binary";var n=az(r,e);return e.type="array",h2(n)}var a=0;if(e.sheet&&(typeof e.sheet=="number"?a=e.sheet:a=r.SheetNames.indexOf(e.sheet),!r.SheetNames[a]))throw new Error("Sheet not found: "+e.sheet+" : "+typeof e.sheet);switch(e.bookType||"xlsb"){case"xml":case"xlml":return Cc(Jxe(r,e),e);case"slk":case"sylk":return Cc(uye.from_sheet(r.Sheets[r.SheetNames[a]],e,r),e);case"htm":case"html":return Cc(Jq(r.Sheets[r.SheetNames[a]],e),e);case"txt":return W2e(iz(r.Sheets[r.SheetNames[a]],e),e);case"csv":return Cc(Jj(r.Sheets[r.SheetNames[a]],e),e,"\uFEFF");case"dif":return Cc(dye.from_sheet(r.Sheets[r.SheetNames[a]],e),e);case"dbf":return gv(cye.from_sheet(r.Sheets[r.SheetNames[a]],e),e);case"prn":return Cc(fye.from_sheet(r.Sheets[r.SheetNames[a]],e),e);case"rtf":return Cc(xye(r.Sheets[r.SheetNames[a]]),e);case"eth":return Cc(Aq.from_sheet(r.Sheets[r.SheetNames[a]],e),e);case"fods":return Cc(ez(r,e),e);case"wk1":return gv(BM.sheet_to_wk1(r.Sheets[r.SheetNames[a]],e),e);case"wk3":return gv(BM.book_to_wk3(r,e),e);case"biff2":e.biff||(e.biff=2);case"biff3":e.biff||(e.biff=3);case"biff4":return e.biff||(e.biff=4),gv(Yq(r,e),e);case"biff5":e.biff||(e.biff=5);case"biff8":case"xla":case"xls":return e.biff||(e.biff=8),z2e(r,e);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return U2e(r,e);default:throw new Error("Unrecognized bookType |"+e.bookType+"|")}}function H2e(r){if(!r.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},e=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();e.match(/^\.[a-z]+$/)&&(r.bookType=e.slice(1)),r.bookType=t[r.bookType]||r.bookType}}function N2(r,t,e){var n=e||{};return n.type="file",n.file=t,H2e(n),az(r,n)}function V2e(r,t,e,n,a,i,s){var o=zn(e),l=s.defval,c=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),u=!0,f=r["!data"]!=null,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:e,enumerable:!1})}catch{h.__rowNum__=e}else h.__rowNum__=e;if(!f||r["!data"][e])for(var p=t.s.c;p<=t.e.c;++p){var g=f?(r["!data"][e]||[])[p]:r[n[p]+o];if(g==null||g.t===void 0){if(l===void 0)continue;i[p]!=null&&(h[i[p]]=l);continue}var y=g.v;switch(g.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"b":case"n":if(!g.z||!Uh(g.z)||(y=mp(y),typeof y=="number"))break;case"d":s&&(s.UTC||s.raw===!1)||(y=nm(new Date(y)));break;default:throw new Error("unrecognized type "+g.t)}if(i[p]!=null){if(y==null)if(g.t=="e"&&y===null)h[i[p]]=null;else if(l!==void 0)h[i[p]]=l;else if(c&&y===null)h[i[p]]=null;else continue;else h[i[p]]=(g.t==="n"&&typeof s.rawNumbers=="boolean"?s.rawNumbers:c)?y:td(g,y,s);y!=null&&(u=!1)}}return{row:h,isempty:u}}function V8(r,t){if(r==null||r["!ref"]==null)return[];var e={t:"n",v:0},n=0,a=1,i=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=c.range!=null?c.range:r["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=ca(u);break;case"number":l=ca(r["!ref"]),l.s.r=u;break;default:l=u}n>0&&(a=0);var f=zn(l.s.r),h=[],p=[],g=0,y=0,m=r["!data"]!=null,v=l.s.r,b=0,x={};m&&!r["!data"][v]&&(r["!data"][v]=[]);var S=c.skipHidden&&r["!cols"]||[],_=c.skipHidden&&r["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(S[b]||{}).hidden)switch(h[b]=Bn(b),e=m?r["!data"][v][b]:r[h[b]+f],n){case 1:i[b]=b-l.s.c;break;case 2:i[b]=h[b];break;case 3:i[b]=c.header[b-l.s.c];break;default:if(e==null&&(e={w:"__EMPTY",t:"s"}),o=s=td(e,null,c),y=x[s]||0,!y)x[s]=1;else{do o=s+"_"+y++;while(x[o]);x[s]=y,x[o]=1}i[b]=o}for(v=l.s.r+a;v<=l.e.r;++v)if(!(_[v]||{}).hidden){var I=V2e(r,l,v,h,n,i,c);(I.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[g++]=I.row)}return p.length=g,p}var ZM=/"/g;function G2e(r,t,e,n,a,i,s,o,l){for(var c=!0,u=[],f="",h=zn(e),p=r["!data"]!=null,g=p&&r["!data"][e]||[],y=t.s.c;y<=t.e.c;++y)if(n[y]){var m=p?g[y]:r[n[y]+h];if(m==null)f="";else if(m.v!=null){c=!1,f=""+(l.rawNumbers&&m.t=="n"?m.v:td(m,null,l));for(var v=0,b=0;v!==f.length;++v)if((b=f.charCodeAt(v))===a||b===i||b===34||l.forceQuotes){f='"'+f.replace(ZM,'""')+'"';break}f=="ID"&&o==0&&u.length==0&&(f='"ID"')}else m.f!=null&&!m.F?(c=!1,f="="+m.f,f.indexOf(",")>=0&&(f='"'+f.replace(ZM,'""')+'"')):f="";u.push(f)}if(l.strip)for(;u[u.length-1]==="";)--u.length;return l.blankrows===!1&&c?null:u.join(s)}function Jj(r,t){var e=[],n=t??{};if(r==null||r["!ref"]==null)return"";for(var a=ca(r["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c="",u=[],f=n.skipHidden&&r["!cols"]||[],h=n.skipHidden&&r["!rows"]||[],p=a.s.c;p<=a.e.c;++p)(f[p]||{}).hidden||(u[p]=Bn(p));for(var g=0,y=a.s.r;y<=a.e.r;++y)(h[y]||{}).hidden||(c=G2e(r,a,y,u,s,l,i,g,n),c!=null&&(c||n.blankrows!==!1)&&e.push((g++?o:"")+c));return e.join("")}function iz(r,t){t||(t={}),t.FS="	",t.RS=`
`;var e=Jj(r,t);return e}function K2e(r,t){var e="",n,a="";if(r==null||r["!ref"]==null)return[];var i=ca(r["!ref"]),s="",o=[],l,c=[],u=r["!data"]!=null;for(l=i.s.c;l<=i.e.c;++l)o[l]=Bn(l);for(var f=i.s.r;f<=i.e.r;++f)for(s=zn(f),l=i.s.c;l<=i.e.c;++l)if(e=o[l]+s,n=u?(r["!data"][f]||[])[l]:r[e],a="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;a=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)a=n.f;else{if(t&&t.values===!1)continue;if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}c[c.length]=e+"="+a}return c}function sz(r,t,e){var n=e||{},a=r?r["!data"]!=null:n.dense,i=+!n.skipHeader,s=r||{};!r&&a&&(s["!data"]=[]);var o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ya(n.origin):n.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+i}};if(s["!ref"]){var f=ca(s["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+i)}else o==-1&&(o=0,u.e.r=t.length-1+i);var h=n.header||[],p=0,g=[];t.forEach(function(m,v){a&&!s["!data"][o+v+i]&&(s["!data"][o+v+i]=[]),a&&(g=s["!data"][o+v+i]),Ja(m).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var x=m[b],S="z",_="",I=a?"":Bn(l+p)+zn(o+v+i),A=a?g[l+p]:s[I];x&&typeof x=="object"&&!(x instanceof Date)?a?g[l+p]=x:s[I]=x:(typeof x=="number"?S="n":typeof x=="boolean"?S="b":typeof x=="string"?S="s":x instanceof Date?(S="d",n.UTC||(x=y2(x)),n.cellDates||(S="n",x=es(x)),_=A!=null&&A.z&&Uh(A.z)?A.z:n.dateNF||la[14]):x===null&&n.nullError&&(S="e",x=0),A?(A.t=S,A.v=x,delete A.w,delete A.R,_&&(A.z=_)):a?g[l+p]=A={t:S,v:x}:s[I]=A={t:S,v:x},_&&(A.z=_))})}),u.e.c=Math.max(u.e.c,l+h.length-1);var y=zn(o);if(a&&!s["!data"][o]&&(s["!data"][o]=[]),i)for(p=0;p<h.length;++p)a?s["!data"][o][p+l]={t:"s",v:h[p]}:s[Bn(p+l)+y]={t:"s",v:h[p]};return s["!ref"]=Za(u),s}function X2e(r,t){return sz(null,r,t)}function gx(r,t,e){if(typeof t=="string"){if(r["!data"]!=null){var n=ya(t);return r["!data"][n.r]||(r["!data"][n.r]=[]),r["!data"][n.r][n.c]||(r["!data"][n.r][n.c]={t:"z"})}return r[t]||(r[t]={t:"z"})}return typeof t!="number"?gx(r,_a(t)):gx(r,Bn(e||0)+zn(t))}function Y2e(r,t){if(typeof t=="number"){if(t>=0&&r.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var e=r.SheetNames.indexOf(t);if(e>-1)return e;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function J2e(r,t){var e={SheetNames:[],Sheets:{}};return r&&Zj(e,r,t||"Sheet1"),e}function Zj(r,t,e,n){var a=1;if(!e)for(;a<=65535&&r.SheetNames.indexOf(e="Sheet"+a)!=-1;++a,e=void 0);if(!e||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(e)>=0&&e.length<32){var i=e.match(/\d+$/);a=i&&+i[0]||0;var s=i&&e.slice(0,i.index)||e;for(++a;a<=65535&&r.SheetNames.indexOf(e=s+a)!=-1;++a);}if(Gq(e),r.SheetNames.indexOf(e)>=0)throw new Error("Worksheet with name |"+e+"| already exists!");return r.SheetNames.push(e),r.Sheets[e]=t,e}function Z2e(r,t,e){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=Y2e(r,t);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),e){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+e)}r.Workbook.Sheets[n].Hidden=e}function Q2e(r,t){return r.z=t,r}function oz(r,t,e){return t?(r.l={Target:t},e&&(r.l.Tooltip=e)):delete r.l,r}function ewe(r,t,e){return oz(r,"#"+t,e)}function twe(r,t,e){r.c||(r.c=[]),r.c.push({t,a:e||"SheetJS"})}function rwe(r,t,e,n){for(var a=typeof t!="string"?t:ca(t),i=typeof t=="string"?t:Za(t),s=a.s.r;s<=a.e.r;++s)for(var o=a.s.c;o<=a.e.c;++o){var l=gx(r,s,o);l.t="n",l.F=i,delete l.v,s==a.s.r&&o==a.s.c&&(l.f=e,n&&(l.D=!0))}var c=Qi(r["!ref"]);return c.s.r>a.s.r&&(c.s.r=a.s.r),c.s.c>a.s.c&&(c.s.c=a.s.c),c.e.r<a.e.r&&(c.e.r=a.e.r),c.e.c<a.e.c&&(c.e.c=a.e.c),r["!ref"]=Za(c),r}var Aa={encode_col:Bn,encode_row:zn,encode_cell:_a,encode_range:Za,decode_col:qj,decode_row:Uj,split_cell:Zme,decode_cell:ya,decode_range:Qi,format_cell:td,sheet_new:Qme,sheet_add_aoa:cq,sheet_add_json:sz,sheet_add_dom:Zq,aoa_to_sheet:xm,json_to_sheet:X2e,table_to_sheet:Qq,table_to_book:_2e,sheet_to_csv:Jj,sheet_to_txt:iz,sheet_to_json:V8,sheet_to_html:Jq,sheet_to_formulae:K2e,sheet_to_row_object_array:V8,sheet_get_cell:gx,book_new:J2e,book_append_sheet:Zj,book_set_sheet_visibility:Z2e,cell_set_number_format:Q2e,cell_set_hyperlink:oz,cell_set_internal_link:ewe,cell_add_comment:twe,sheet_set_array_formula:rwe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const nwe=()=>{const{theme:r}=zr(),t=r==="dark",{selectedCompany:e}=ln(),{userRole:n}=ts(),[a,i]=ie.useState(!1),[s,o]=ie.useState(null),[l,c]=ie.useState(!1),[u,f]=ie.useState(!1),[h,p]=ie.useState(""),[g,y]=ie.useState(""),[m,v]=ie.useState("name"),[b,x]=ie.useState("asc"),[S,_]=ie.useState("grid"),[I,A]=ie.useState([0,1e4]),[O,M]=ie.useState("all"),[z,U]=ie.useState({}),D=ie.useMemo(()=>e?[{column:"company_id",operator:"eq",value:e.id}]:[],[e==null?void 0:e.id]),{data:T=[],loading:R,error:C,add:N,update:E,remove:k}=qg("products",{filters:D}),[P,q]=ie.useState({}),[,H]=ie.useState(!1);ie.useEffect(()=>{(async()=>{if(T.length>0&&e){H(!0);try{const le=T.map(ye=>ye.id),pe=await kN(le,e.id);q(pe)}catch(le){console.error("Error calculating live stock:",le)}finally{H(!1)}}})()},[T,e]),ie.useEffect(()=>{L()},[]);const L=async()=>{try{const{data:oe,error:le}=await De.from("tax_rates").select("*");if(le)throw le;const be={...oe.reduce((Ie,Oe)=>({...Ie,[Oe.id]:{rate:Oe.rate,description:Oe.description}}),{}),...[{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"}].reduce((Ie,Oe)=>({...Ie,[Oe.id]:{rate:Oe.rate,description:Oe.description}}),{})};U(be)}catch(oe){console.error("Error loading tax rates:",oe),U([{id:"0a93172b-21a3-42ac-b372-fc16acf44a06",rate:28,description:"GST 28%"},{id:"73fe4609-6047-4e3e-ae44-64e7d68b6df1",rate:12,description:"GST 12%"},{id:"76f65d10-41c4-4b47-92d0-d300bb86e81d",rate:0,description:"GST Exempt"},{id:"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d",rate:5,description:"GST 5%"},{id:"ef3d6f7b-9d32-4f5b-8b75-425b6723c122",rate:18,description:"GST 18%"}].reduce((pe,ye)=>({...pe,[ye.id]:{rate:ye.rate,description:ye.description}}),{}))}},K=async oe=>{if(window.confirm("Are you sure you want to delete this product?"))try{await k(oe),Ce.success("Product deleted successfully")}catch{Ce.error("Failed to delete product")}},Y=async oe=>{if(!e){Ce.error("No active company selected. Please select a company first.");return}try{await N({...oe,companyId:e.id}),Ce.success("Product added successfully"),i(!1)}catch(le){console.error("Error adding product:",le),le instanceof Error?Ce.error(le.message):Ce.error("Failed to add product")}},Z=async oe=>{if(s)try{const le={...oe,companyId:s.companyId};await E(s.id,le),Ce.success("Product updated successfully"),c(!1),o(null)}catch(le){console.error("Error updating product:",le),Ce.error("Failed to update product")}},V=oe=>{o(oe),c(!0)},ee=()=>{c(!1),o(null)},B=oe=>{o(oe),f(!0)},F=T.filter(oe=>oe.name.toLowerCase().includes(h.toLowerCase())||oe.sku.toLowerCase().includes(h.toLowerCase())).filter(oe=>g?oe.category===g:!0).filter(oe=>oe.price>=I[0]&&oe.price<=I[1]).filter(oe=>{if(O==="all")return!0;const le=P[oe.id]!==void 0?P[oe.id]:0;return O==="inStock"?le>0:O==="lowStock"?le>0&&le<=10:O==="outOfStock"?le===0:!0}).sort((oe,le)=>{if(m==="name")return b==="asc"?oe.name.localeCompare(le.name):le.name.localeCompare(oe.name);if(m==="price")return b==="asc"?oe.price-le.price:le.price-oe.price;if(m==="stock"){const pe=P[oe.id]!==void 0?P[oe.id]:0,ye=P[le.id]!==void 0?P[le.id]:0;return b==="asc"?pe-ye:ye-pe}return m==="category"?b==="asc"?oe.category.localeCompare(le.category):le.category.localeCompare(oe.category):0}),X=oe=>`${oe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te=[...new Set(T.map(oe=>oe.category))],se=Math.min(...T.map(oe=>oe.price),0),ce=Math.max(...T.map(oe=>oe.price),1e4),ue=oe=>{m===oe?x(b==="asc"?"desc":"asc"):(v(oe),x("asc"))};return C?d.jsx("div",{className:"text-center py-12",children:d.jsxs("p",{className:"text-red-500",children:["Error loading products: ",C.message]})}):e?d.jsxs("div",{className:"space-y-6",children:[d.jsx(Ope,{title:"Products",rightContent:e&&d.jsxs(d.Fragment,{children:[d.jsx(B0,{action:"create",fallback:d.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:n==="cashier"||n==="salesperson"?`View-only mode (${n})`:"No permission to add products"}),children:d.jsx(FU,{onClick:()=>i(!0),children:"Add Product"})}),(n==="admin"||n==="manager"||n==="owner")&&d.jsx(lt,{variant:"secondary",size:"sm",className:"ml-2",onClick:()=>{const oe=F.map(ye=>({Name:ye.name,SKU:ye.sku,"Art No":ye.artNo||"",Color:ye.color||"",Size:ye.size||"",Category:ye.category,Stock:P[ye.id]!==void 0?P[ye.id]:0,Unit:ye.unit,Price:ye.price,MRP:ye.mrp})),le=Aa.json_to_sheet(oe),pe=Aa.book_new();Aa.book_append_sheet(pe,le,"Stock Report"),N2(pe,`stock-report-${new Date().toISOString().slice(0,10)}.xlsx`)},children:"Export Stock Report"})]})}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",value:h,onChange:oe=>p(oe.target.value),className:`w-full pl-10 pr-4 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx(nd,{className:`absolute left-3 top-2.5 w-5 h-5 ${t?"text-gray-400":"text-gray-500"}`})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:`flex rounded-md overflow-hidden border ${t?"border-gray-600":"border-gray-300"}`,children:[d.jsx("button",{onClick:()=>_("grid"),className:`p-2 ${S==="grid"?t?"bg-blue-600 text-white":"bg-blue-500 text-white":t?"bg-gray-700 text-gray-300":"bg-white text-gray-700"}`,"aria-label":"Grid view",children:d.jsx(mD,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>_("list"),className:`p-2 ${S==="list"?t?"bg-blue-600 text-white":"bg-blue-500 text-white":t?"bg-gray-700 text-gray-300":"bg-white text-gray-700"}`,"aria-label":"List view",children:d.jsx(gD,{className:"w-5 h-5"})})]}),d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(jK,{className:"w-4 h-4"}),onClick:()=>{},children:"Filter"}),d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(Hm,{className:"w-4 h-4"}),onClick:()=>{m==="name"?x(b==="asc"?"desc":"asc"):(v("name"),x("asc"))},children:"Sort"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 content-section",children:[d.jsxs("div",{children:[d.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Category"}),d.jsxs("select",{value:g,onChange:oe=>y(oe.target.value),className:`w-full px-3 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"",children:"All Categories"}),te.map(oe=>d.jsx("option",{value:oe,children:oe.charAt(0).toUpperCase()+oe.slice(1)},oe))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Stock Status"}),d.jsxs("select",{value:O,onChange:oe=>M(oe.target.value),className:`w-full px-3 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"all",children:"All Products"}),d.jsx("option",{value:"inStock",children:"In Stock"}),d.jsx("option",{value:"lowStock",children:"Low Stock ( 10)"}),d.jsx("option",{value:"outOfStock",children:"Out of Stock"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Sort By"}),d.jsxs("select",{value:`${m}-${b}`,onChange:oe=>{const[le,pe]=oe.target.value.split("-");v(le),x(pe)},className:`w-full px-3 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),d.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),d.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),d.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),d.jsx("option",{value:"stock-asc",children:"Stock (Low to High)"}),d.jsx("option",{value:"stock-desc",children:"Stock (High to Low)"}),d.jsx("option",{value:"category-asc",children:"Category (A-Z)"}),d.jsx("option",{value:"category-desc",children:"Category (Z-A)"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Price Range"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"number",min:"0",value:I[0],onChange:oe=>A([Number(oe.target.value),I[1]]),className:`w-full px-3 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{className:t?"text-gray-400":"text-gray-500",children:"to"}),d.jsx("input",{type:"number",min:"0",value:I[1],onChange:oe=>A([I[0],Number(oe.target.value)]),className:`w-full px-3 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]})]}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["Showing ",F.length," of ",T.length," products"]})}),R?S==="grid"?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map(oe=>d.jsxs("div",{className:`animate-pulse ${t?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg`,children:[d.jsx("div",{className:"h-40 bg-gray-400 rounded-md mb-4"}),d.jsx("div",{className:"h-6 bg-gray-400 rounded w-3/4 mb-2"}),d.jsx("div",{className:"h-4 bg-gray-400 rounded w-1/2 mb-2"}),d.jsx("div",{className:"h-4 bg-gray-400 rounded w-1/4"})]},oe))}):d.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3,4,5].map(oe=>d.jsx("div",{className:`animate-pulse ${t?"bg-gray-700":"bg-gray-100"} p-4 rounded-md`,children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"h-16 w-16 bg-gray-400 rounded-md mr-4"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"h-6 bg-gray-400 rounded w-1/4 mb-2"}),d.jsx("div",{className:"h-4 bg-gray-400 rounded w-1/2"})]})]})},oe))}):F.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Hn,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),d.jsx("h3",{className:`text-xl font-semibold mb-2 ${t?"text-gray-200":"text-gray-700"}`,children:"No products found"}),d.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-6 max-w-md mx-auto`,children:h||g||O!=="all"||I[0]>se||I[1]<ce?"Try adjusting your filters to see more products.":"Start by adding your first product to your inventory."}),d.jsx(B0,{action:"create",fallback:null,children:d.jsx("div",{className:"flex justify-center",children:d.jsx(lt,{onClick:()=>i(!0),leftIcon:d.jsx(ml,{className:"h-4 w-4"}),size:"lg",children:"Add Product"})})})]}):S==="grid"?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:F.map(oe=>{var le,pe;return d.jsxs("div",{className:`rounded-lg overflow-hidden border ${t?"bg-gray-700 border-gray-600":"bg-white border-gray-200"} transition-all duration-200 hover:shadow-md`,children:[d.jsx("div",{className:`h-48 overflow-hidden ${t?"bg-gray-800":"bg-gray-100"} flex items-center justify-center`,children:oe.imageUrl?d.jsx("img",{src:oe.imageUrl,alt:oe.name,className:"w-full h-full object-cover"}):d.jsx(Hn,{className:"w-16 h-16 text-gray-400"})}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-800"} line-clamp-2`,children:oe.name}),d.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${(P[oe.id]!==void 0?P[oe.id]:0)===0?"bg-red-100 text-red-800":(P[oe.id]!==void 0?P[oe.id]:0)<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:(P[oe.id]!==void 0?P[oe.id]:0)===0?"0":(P[oe.id]!==void 0?P[oe.id]:0)<=10?`${P[oe.id]!==void 0?P[oe.id]:0}`:`${P[oe.id]!==void 0?P[oe.id]:0}`})]}),d.jsxs("div",{className:"flex items-center text-sm mb-2",children:[d.jsx(yN,{className:`w-4 h-4 mr-1 ${t?"text-gray-400":"text-gray-500"}`}),d.jsx("span",{className:t?"text-gray-300":"text-gray-600",children:oe.sku})]}),d.jsx("div",{className:"mb-2",children:d.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:oe.category.charAt(0).toUpperCase()+oe.category.slice(1)})}),(oe.category==="garments"||oe.category==="footwear"||oe.category==="clothing")&&d.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-2 text-xs",children:[oe.artNo&&d.jsxs("span",{className:`px-2 py-1 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:["ART: ",oe.artNo]}),oe.color&&d.jsxs("span",{className:`px-2 py-1 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:["Color: ",oe.color]}),oe.size&&d.jsxs("span",{className:`px-2 py-1 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:["Size: ",oe.size]})]}),d.jsxs("div",{className:"flex justify-between items-center mt-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:X(oe.price)}),d.jsxs("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["MRP: ",X(oe.mrp)]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(bg,{className:`w-4 h-4 mr-1 ${t?"text-gray-400":"text-gray-500"}`}),d.jsxs("span",{className:`${t?"text-gray-300":"text-gray-700"}`,children:[P[oe.id]!==void 0?P[oe.id]:0," ",oe.unit]})]})]}),oe.taxRateId&&d.jsx("div",{className:"mt-2",children:d.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[d.jsx(Xi,{className:"w-3 h-3 mr-1"}),((le=z[oe.taxRateId])==null?void 0:le.description)||"Tax","(",((pe=z[oe.taxRateId])==null?void 0:pe.rate)||0,"%)"]})}),d.jsxs("div",{className:"flex justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:[d.jsx(B0,{action:"edit",fallback:d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>B(oe),leftIcon:d.jsx(Uc,{className:"w-4 h-4"}),children:"Print"}),children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>V(oe),leftIcon:d.jsx(Ih,{className:"w-4 h-4"}),children:"Edit"}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>B(oe),leftIcon:d.jsx(Uc,{className:"w-4 h-4"}),children:"Print"})]})}),d.jsx(B0,{action:"delete",children:d.jsx(lt,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>K(oe.id),children:d.jsx(Xu,{className:"w-4 h-4"})})})]})]})]},oe.id)})}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:`text-left ${t?"text-gray-300":"text-gray-600"}`,children:[d.jsx("th",{className:"pb-4",children:d.jsxs("button",{className:"flex items-center",onClick:()=>ue("name"),children:["Product",m==="name"&&d.jsx(Hm,{className:"ml-1 w-4 h-4"})]})}),d.jsx("th",{className:"pb-4",children:"SKU"}),d.jsx("th",{className:"pb-4",children:d.jsxs("button",{className:"flex items-center",onClick:()=>ue("price"),children:["Price",m==="price"&&d.jsx(Hm,{className:"ml-1 w-4 h-4"})]})}),d.jsx("th",{className:"pb-4",children:"MRP"}),d.jsx("th",{className:"pb-4",children:d.jsxs("button",{className:"flex items-center",onClick:()=>ue("stock"),children:["Stock",m==="stock"&&d.jsx(Hm,{className:"ml-1 w-4 h-4"})]})}),d.jsx("th",{className:"pb-4",children:d.jsxs("button",{className:"flex items-center",onClick:()=>ue("category"),children:["Category",m==="category"&&d.jsx(Hm,{className:"ml-1 w-4 h-4"})]})}),d.jsx("th",{className:"pb-4",children:"Tax"}),d.jsx("th",{className:"pb-4",children:"Actions"})]})}),d.jsx("tbody",{className:t?"text-gray-300":"text-gray-800",children:F.map(oe=>{var le,pe;return d.jsxs("tr",{className:`border-t ${t?"border-gray-700":"border-gray-200"} hover:bg-gray-50 dark:hover:bg-gray-750`,children:[d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"flex items-center",children:[oe.imageUrl?d.jsx("img",{src:oe.imageUrl,alt:oe.name,className:"w-10 h-10 rounded-md object-cover mr-3"}):d.jsx("div",{className:`w-10 h-10 rounded-md ${t?"bg-gray-700":"bg-gray-100"} flex items-center justify-center mr-3`,children:d.jsx(Hn,{className:"w-6 h-6 text-gray-400"})}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:oe.name}),d.jsxs("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["Purchase: ",X(oe.purchasePrice)]}),(oe.category==="garments"||oe.category==="footwear"||oe.category==="clothing")&&d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.artNo&&d.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:["ART: ",oe.artNo]}),oe.color&&d.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:oe.color}),oe.size&&d.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:["Size: ",oe.size]})]})]})]})}),d.jsx("td",{className:"py-4",children:oe.sku}),d.jsx("td",{className:"py-4 font-medium",children:X(oe.price)}),d.jsx("td",{className:"py-4",children:X(oe.mrp)}),d.jsx("td",{className:"py-4",children:d.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(P[oe.id]!==void 0?P[oe.id]:0)===0?"bg-red-100 text-red-800":(P[oe.id]!==void 0?P[oe.id]:0)<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[P[oe.id]!==void 0?P[oe.id]:0," ",oe.unit]})}),d.jsx("td",{className:"py-4 capitalize",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t?"bg-gray-600 text-gray-200":"bg-gray-100 text-gray-800"}`,children:oe.category})}),d.jsx("td",{className:"py-4",children:oe.taxRateId?d.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[((le=z[oe.taxRateId])==null?void 0:le.description)||"Unknown"," (",((pe=z[oe.taxRateId])==null?void 0:pe.rate)||0,"%)"]}):d.jsx("span",{className:"text-gray-500",children:"No tax"})}),d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(B0,{action:"edit",children:d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>V(oe),leftIcon:d.jsx(Ih,{className:"w-4 h-4"}),children:"Edit"})}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>B(oe),leftIcon:d.jsx(Uc,{className:"w-4 h-4"}),children:"Print"}),d.jsx(B0,{action:"delete",children:d.jsx(lt,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>K(oe.id),children:d.jsx(Xu,{className:"w-4 h-4"})})})]})})]},oe.id)})})]})})]}),a&&e&&d.jsx(Mpe,{isOpen:a,onClose:()=>i(!1),onAdd:Y,companyId:e.id}),s&&d.jsxs(d.Fragment,{children:[d.jsx(Ipe,{isOpen:l,onClose:ee,onUpdate:Z,product:s}),d.jsx(qpe,{isOpen:u,onClose:()=>{f(!1),o(null)},product:s,companyName:(e==null?void 0:e.name)||"Tallybooks"})]})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex justify-between items-center",children:d.jsx("h1",{className:"text-2xl font-semibold",children:"Products"})}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm text-center py-12`,children:[d.jsx(Hn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-4`,children:"No company selected"}),d.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Please select a company to view and manage products"})]})]})},lz="https://pdxyqlxbucoghoetyzmv.supabase.co",awe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc";console.log("Supabase URL:",lz);console.log("Supabase Key:","Present");const wp=dN(lz,awe,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}},global:{headers:{"X-Client-Info":"tallybooks-pos-app"},fetch:(r,t={})=>{const e=new AbortController,n=setTimeout(()=>e.abort(),3e4),a={...t,signal:e.signal};return fetch(r,a).finally(()=>{clearTimeout(n)})}},db:{schema:"public"}}),iwe=async r=>{var t;try{if(!r.items.length)throw new Error("No items in purchase");let e=null;if(r.companyId)try{const s=await swe(r.companyId);s&&s.error?console.error("Error generating purchase invoice number:",s.error):s&&s.invoiceNumber&&(e=((t=s.invoiceNumber)==null?void 0:t.toString())||null)}catch(s){console.error("Error calling getNextPurchaseInvoiceNumber:",s)}const n={creditor_id:ul(r.creditorId),subtotal:Qe(r.subtotal),tax:Qe(r.tax),total:Qe(r.total),payment_method:r.paymentMethod,status:"completed",company_id:r.companyId,invoice_number:e,tax_inclusive:r.taxInclusive||!1};r.taxType&&(n.tax_type=r.taxType),r.cgst!==void 0&&(n.cgst=Qe(r.cgst)),r.sgst!==void 0&&(n.sgst=Qe(r.sgst)),r.igst!==void 0&&(n.igst=Qe(r.igst)),r.cess!==void 0&&(n.cess=Qe(r.cess)),console.log("Creating purchase entry with data:",n);const{data:a,error:i}=await wp.from("purchase_entries").insert(n).select().single();if(i)throw console.error("Purchase entry error:",i),new Error(`Failed to create purchase entry: ${i.message||i.toString()}`);console.log("Purchase record created successfully:",a);for(const[s,o]of r.items.entries()){console.log(`Processing item ${s+1}/${r.items.length}:`,{purchase_id:a.id,product_id:o.id,quantity:o.quantity,purchase_price:o.price,total:o.quantity*o.price,tax_rate_id:o.taxRateId,tax_amount:o.taxAmount||0,discount_amount:o.discountAmount||0,discount_percentage:o.discountPercentage||0});const l=Qe(o.quantity),c=Qe(o.price),u=Qe(o.discountAmount)||0,f=Qe(o.discountPercentage)||0;let h,p,g,y;r.taxInclusive?(h=l*c,y=h-u,g=Qe(o.taxAmount)||0,p=y-g,h=y):(h=l*c,p=h-u,g=Qe(o.taxAmount)||0,y=p+g);const{error:m}=await wp.from("purchase_items").insert({purchase_id:a.id,product_id:o.id,quantity:gh(l),purchase_price:Qe(c),total:Qe(p),tax_rate_id:ul(o.taxRateId),tax_amount:Qe(g),discount_amount:Qe(u),discount_percentage:Qe(f),gross_amount:Qe(h),net_amount:Qe(y),company_id:r.companyId});if(m)throw console.error("Purchase item error:",m),new Error(`Failed to create purchase item for "${o.name}": ${m.message||m.toString()}`);const{success:v,error:b}=await UF(o.id,gh(l),a.company_id);if(!v)throw console.error("Error updating product stock:",b),new Error(b||`Failed to update product stock for "${o.name}"`);console.log(`Successfully processed item "${o.name}"`)}console.log("All items processed successfully");try{const{triggerEventMessage:s}=await yo(async()=>{const{triggerEventMessage:o}=await Promise.resolve().then(()=>rp);return{triggerEventMessage:o}},void 0);if(r.creditorId){const{data:o,error:l}=await wp.from("customers").select("id, name, phone").eq("id",r.creditorId).single();!l&&(o!=null&&o.phone)&&s("purchase_created",{creditor_id:o.id,creditor_name:o.name,creditor_phone:o.phone,total_amount:Qe(r.total),payment_method:r.paymentMethod},r.companyId).catch(c=>{console.error("Failed to send WhatsApp notification for purchase creation:",c)})}}catch(s){console.error("Error importing or triggering WhatsApp event for purchase creation:",s)}return a.id}catch(e){console.error("Process purchase error:",e);const n=e instanceof Error?e.message:"Failed to process purchase: Unknown error occurred";throw Ce.error(n),new Error(n)}};async function swe(r){try{const{data:t,error:e}=await wp.from("company_settings").select("purchase_invoice_prefix").eq("company_id",r).single();if(e||!t){e?console.error("Error getting company settings:",e):console.error("No company settings found for company ID:",r);const{data:s,error:o}=await wp.rpc("get_next_invoice_number",{p_company_id:r,p_prefix:"PUR"});return o?(console.error("Error calling get_next_invoice_number function:",o),{invoiceNumber:void 0,error:`Database function error: ${o.message}`}):{invoiceNumber:s}}const n=t.purchase_invoice_prefix||"PUR",{data:a,error:i}=await wp.rpc("get_next_invoice_number",{p_company_id:r,p_prefix:n});return i?(console.error("Error calling get_next_invoice_number function:",i),{invoiceNumber:void 0,error:`Database function error: ${i.message}`}):{invoiceNumber:a}}catch(t){return console.error("Error in getNextPurchaseInvoiceNumber:",t),{invoiceNumber:void 0,error:t instanceof Error?t.message:"Unknown error"}}}const cz=async(r,t)=>{var b,x,S,_,I,A,O;const e=new Fr("p","mm","a4"),n=e.internal.pageSize.width,a=10;let i=a;e.setFontSize(20),e.setFont("helvetica","bold"),e.text(r.legal_name||r.name||"Tallybooks",a,i),i+=8,r.name&&r.name!==(r.legal_name||"")&&(e.setFontSize(14),e.setFont("helvetica","normal"),e.text(r.name,a,i),i+=6),e.setFontSize(10),e.setFont("helvetica","normal");const s=[];if(r.address_street&&s.push(r.address_street),r.address_city&&s.push(r.address_city),r.address_state&&s.push(r.address_state),r.address_postal_code&&s.push(r.address_postal_code),r.address_country&&s.push(r.address_country),s.length>0){const M=s.join(", "),z=e.splitTextToSize(M,n-2*a-30);e.text(z,a,i),i+=4+z.length*4}const o=[];r.phone&&o.push(`Phone: ${r.phone}`),r.email&&o.push(`Email: ${r.email}`),r.website&&o.push(`Website: ${r.website}`),o.length>0&&(e.setFontSize(10),e.text(o.join(" | "),a,i),i+=6),r.tax_number&&(e.setFont("helvetica","bold"),e.setFontSize(10),e.text(`GSTIN: ${r.tax_number}`,a,i),i+=8);try{const M=`INV:${t.invoiceNumber||t.id}|DATE:${qt(new Date(t.date),"dd/MM/yyyy")}|AMT:${t.grandTotal.toFixed(2)}|GST:${r.tax_number||"NA"}`,z=await Rx.toDataURL(M,{width:80}),U=25,D=(n-U)/2,T=i;e.addImage(z,"PNG",D,T,U,U),e.setFontSize(8),e.setFont("helvetica","normal"),e.text("Scan QR Code for Invoice Details",n/2,T+U+5,{align:"center"}),i+=U+10}catch(M){console.warn("Failed to generate QR code:",M),i+=10}e.setDrawColor(0),e.setLineWidth(.5),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(14),e.text("TAX INVOICE",a,i),i+=8,e.setFontSize(10),e.setFont("helvetica","normal");const l=[`Invoice No: ${t.invoiceNumber||t.id}`,`Date: ${qt(new Date(t.date),"dd/MM/yyyy")}`,`Time: ${t.time||"-"}`,"Payment Method: Cash"];let c=i;l.forEach(M=>{e.text(M,a,c),c+=5});const u=n-a-70;let f=i;if(e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Customer Details:",u,f),f+=5,e.setFont("helvetica","normal"),e.setFontSize(10),(b=t.customer)!=null&&b.name&&(e.text(`Name: ${t.customer.name}`,u,f),f+=5),(x=t.customer)!=null&&x.gstNumber&&(e.text(`GST No: ${t.customer.gstNumber}`,u,f),f+=5),(S=t.customer)!=null&&S.address){const M=e.splitTextToSize(t.customer.address,65);e.text(M,u,f),f+=5*M.length}i=Math.max(c,f)+8,i+=5;const h=t.items.map((M,z)=>{var U,D,T,R,C,N,E,k;return[(z+1).toString(),M.name||"-",M.quantity.toFixed(0),M.rate.toFixed(2),M.grossAmount.toFixed(2),((U=M.discountPercentage)==null?void 0:U.toFixed(2))||"0.00",((D=M.discountAmount)==null?void 0:D.toFixed(2))||"0.00",((T=M.taxableValue)==null?void 0:T.toFixed(2))||"0.00",((R=M.gstPercentage)==null?void 0:R.toFixed(2))||"0.00",((C=M.gstAmount)==null?void 0:C.toFixed(2))||"0.00",((N=M.cessPercentage)==null?void 0:N.toFixed(2))||"0.00",((E=M.cessAmount)==null?void 0:E.toFixed(2))||"0.00",((k=M.netAmount)==null?void 0:k.toFixed(2))||"0.00"]});Ic(e,{startY:i,head:[["S.No","Item Name","Qty","Rate","Gross Amt","Disc%","Disc Amt","Taxable Value","GST%","GST Amt","CESS%","CESS Amt","Net Amt"]],body:h,theme:"grid",styles:{fontSize:8,cellPadding:2,halign:"right",valign:"middle",fontStyle:"bold"},headStyles:{fillColor:[50,50,50],textColor:[255,255,255],fontStyle:"bold",halign:"center",fontSize:9},columnStyles:{0:{cellWidth:10,halign:"center"},1:{cellWidth:25,halign:"left"},2:{cellWidth:10,halign:"center"},3:{cellWidth:15,halign:"right"},4:{cellWidth:18,halign:"right"},5:{cellWidth:10,halign:"right"},6:{cellWidth:15,halign:"right"},7:{cellWidth:18,halign:"right"},8:{cellWidth:10,halign:"right"},9:{cellWidth:15,halign:"right"},10:{cellWidth:10,halign:"right"},11:{cellWidth:15,halign:"right"},12:{cellWidth:18,halign:"right"}}}),i=e.lastAutoTable.finalY+5,e.setLineWidth(.3),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(12),e.text("GST Summary",a,i),i+=8;const p=n-a-60,g=n-a-5;e.setFont("helvetica","normal"),e.setFontSize(10),[["Total Taxable Value:",t.totalTaxableValue.toFixed(2)],["CGST Amount:",((_=t.totalCGST)==null?void 0:_.toFixed(2))||"0.00"],["SGST Amount:",((I=t.totalSGST)==null?void 0:I.toFixed(2))||"0.00"],["IGST Amount:",((A=t.totalIGST)==null?void 0:A.toFixed(2))||"0.00"],["CESS Amount:",((O=t.totalCESS)==null?void 0:O.toFixed(2))||"0.00"],["Total GST:",t.totalGST.toFixed(2)]].forEach(([M,z])=>{e.setFont("helvetica","bold"),e.text(M,p,i),e.setFont("helvetica","normal"),e.text(z,g,i,{align:"right"}),i+=6}),i+=4,e.setLineWidth(.3),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(12),e.text("Bill Summary",a,i),i+=8,[["Total Discount:",t.totalDiscount.toFixed(2)],["Round-off:",t.roundOff.toFixed(2)],["Grand Total:",t.grandTotal.toFixed(2)]].forEach(([M,z])=>{e.setFont("helvetica","bold"),e.text(M,p,i),e.setFont("helvetica","normal"),e.text(z,g,i,{align:"right"}),i+=6}),(t.customerPaid!==void 0||t.changeReturned!==void 0||t.amountInWords)&&(i+=4,e.setLineWidth(.3),e.line(a,i,n-a,i),i+=6,e.setFont("helvetica","bold"),e.setFontSize(12),e.text("Payment Details",a,i),i+=8,e.setFont("helvetica","normal"),e.setFontSize(10),t.customerPaid!==void 0&&(e.text("Customer Paid:",a,i),e.text(t.customerPaid.toFixed(2),n-a-20,i,{align:"right"}),i+=6),t.changeReturned!==void 0&&(e.text("Change Returned:",a,i),e.text(t.changeReturned.toFixed(2),n-a-20,i,{align:"right"}),i+=6),t.amountInWords&&(e.text("Amount in Words:",a,i),e.text(t.amountInWords,n-a,i,{align:"right"}),i+=6)),e.setLineWidth(.7),e.line(a,i,n-a,i),i+=8,e.setFont("helvetica","bold"),e.setFontSize(18);const v=n/2;e.text("TOTAL BILL AMOUNT",v,i,{align:"center"}),i+=10,e.setFontSize(22),e.text(t.grandTotal.toFixed(2),v,i,{align:"center"}),i+=8,e.setLineWidth(.7),e.line(a,i,n-a,i),i+=12,e.setLineWidth(.3),e.line(a,i,a+50,i),i+=5,e.setFont("helvetica","normal"),e.setFontSize(10),e.text("Authorized Signatory",a+25,i,{align:"center"}),i-=5,e.line(n-a-50,i,n-a,i),i+=5,e.text("Customer Signature",n-a-25,i,{align:"center"}),e.save(`Invoice_${t.invoiceNumber||t.id}_${qt(new Date(t.date),"yyyy-MM-dd")}.pdf`)},owe=async(r,t)=>{var e;try{const n=JSON.stringify({invoice:t.invoiceNumber||t.id,date:qt(new Date(t.date),"dd/MM/yyyy"),amount:t.grandTotal.toFixed(2),gstin:r.tax_number||"NA"}),a=await Rx.toDataURL(n,{width:113});let i=t.items.length,s=0,o=0,l=0,c=0,u=0,f=0;t.items.forEach(v=>{s+=v.quantity||0,o+=v.grossAmount||0,l+=v.discountAmount||0,c+=v.taxableValue||0,u+=v.gstAmount||0,f+=v.cessAmount||0});const h=[];r.address_street&&h.push(r.address_street),r.address_city&&h.push(r.address_city),r.address_state&&h.push(r.address_state),r.address_postal_code&&h.push(r.address_postal_code);const p=h.join(", "),g=t.items.map((v,b)=>`
      <tr>
        <td>${b+1}</td>
        <td class="truncate">${v.name}</td>
        <td class="text-right">${v.quantity.toFixed(0)}</td>
        <td class="text-right">${v.rate.toFixed(2)}</td>
        <td class="text-right">${v.grossAmount.toFixed(2)}</td>
        <td class="text-right">${v.discountAmount.toFixed(2)}</td>
        <td class="text-right">${v.taxableValue.toFixed(2)}</td>
        <td class="text-right">${v.gstAmount.toFixed(2)}</td>
        <td class="text-right">${v.cessAmount.toFixed(2)}</td>
        <td class="text-right">${v.netAmount.toFixed(2)}</td>
      </tr>
    `).join(""),y=`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice ${t.invoiceNumber||t.id}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            size: 80mm auto;
            margin: 0;
        }
        
        @media print {
            body {
                width: 80mm;
            }
        }
        
        body {
            width: 80mm;
            font-family: 'Courier New', monospace;
            font-size: 9px;
            line-height: 1.2;
            padding: 2mm;
            background: white;
            color: black;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3mm;
        }
        
        .store-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 1mm;
        }
        
        .address {
            font-size: 8px;
            margin-bottom: 2mm;
        }
        
        .invoice-title {
            font-size: 12px;
            font-weight: bold;
            margin: 2mm 0;
            text-align: center;
        }
        
        .invoice-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2mm;
            font-size: 8px;
        }
        
        .customer-info {
            margin-bottom: 3mm;
            font-size: 8px;
        }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 3mm;
            font-size: 8px;
        }
        
        .items-table th,
        .items-table td {
            padding: 1px 2px;
            text-align: right;
            border: 0.5px solid #000;
        }
        
        .items-table th {
            font-weight: bold;
            background-color: #f0f0f0;
        }
        
        .items-table .left {
            text-align: left;
        }
        
        .items-table .center {
            text-align: center;
        }
        
        .gst-summary,
        .bill-summary {
            margin-bottom: 3mm;
            font-size: 8px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1mm;
        }
        
        .summary-label {
            font-weight: bold;
        }
        
        .total-section {
            text-align: center;
            margin: 3mm 0;
            padding: 2mm 0;
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
        }
        
        .total-label {
            font-size: 12px;
            font-weight: bold;
        }
        
        .total-amount {
            font-size: 14px;
            font-weight: bold;
            margin-top: 1mm;
        }
        
        .qr-section {
            text-align: center;
            margin: 3mm 0;
        }
        
        .qr-code {
            width: 30mm;
            height: 30mm;
            margin: 0 auto 2mm;
        }
        
        .signature-section {
            display: flex;
            justify-content: space-between;
            margin-top: 5mm;
            font-size: 8px;
        }
        
        .signature-line {
            width: 35mm;
            border-top: 0.5px solid #000;
            text-align: center;
            padding-top: 1mm;
        }
        
        .footer {
            text-align: center;
            font-size: 7px;
            margin-top: 2mm;
            padding-top: 1mm;
            border-top: 0.5px solid #000;
        }
        
        .truncate {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 30px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="store-name">${r.legal_name||r.name||"Tallybooks"}</div>
        ${r.name&&r.name!==(r.legal_name||"")?`<div>${r.name}</div>`:""}
        ${p?`<div class="address">${p}</div>`:""}
        ${r.phone?`<div>Phone: ${r.phone}</div>`:""}
        ${r.tax_number?`<div><strong>GSTIN: ${r.tax_number}</strong></div>`:""}
    </div>
    
    <div class="invoice-title">TAX INVOICE</div>
    
    <div class="invoice-details">
        <div>Inv No: ${t.invoiceNumber||t.id}</div>
        <div>Date: ${qt(new Date(t.date),"dd/MM/yyyy")}</div>
    </div>
    
    ${(e=t.customer)!=null&&e.name?`
    <div class="customer-info">
        <div><strong>Customer:</strong> ${t.customer.name}</div>
        ${t.customer.gstNumber?`<div><strong>GST:</strong> ${t.customer.gstNumber}</div>`:""}
        ${t.customer.address?`<div>${t.customer.address}</div>`:""}
    </div>
    `:""}
    
    <table class="items-table">
        <thead>
            <tr>
                <th class="center">#</th>
                <th class="left">Item</th>
                <th>Qty</th>
                <th>Rate</th>
                <th>Gross</th>
                <th>Disc</th>
                <th>Taxable</th>
                <th>GST</th>
                <th>CESS</th>
                <th>Net</th>
            </tr>
        </thead>
        <tbody>
            ${g}
        </tbody>
    </table>
    
    <div class="gst-summary">
        <div class="summary-row">
            <span class="summary-label">Taxable Value:</span>
            <span>${t.totalTaxableValue.toFixed(2)}</span>
        </div>
        <!-- Handle tax display based on tax type -->
        ${t.taxType==="integrated"&&t.totalIGST?`
        <div class="summary-row">
            <span class="summary-label">IGST:</span>
            <span>${t.totalIGST.toFixed(2)}</span>
        </div>`:""}
        ${t.totalCESS!==void 0?`
        <div class="summary-row">
            <span class="summary-label">CESS (1%):</span>
            <span>${t.totalCESS.toFixed(2)}</span>
        </div>`:""}
        ${t.taxType==="split"&&t.totalCGST&&t.totalSGST?`
        <div class="summary-row">
            <span class="summary-label">CGST:</span>
            <span>${t.totalCGST.toFixed(2)}</span>
        </div>
        <div class="summary-row">
            <span class="summary-label">SGST:</span>
            <span>${t.totalSGST.toFixed(2)}</span>
        </div>`:""}
        <!-- Total GST (sum of all taxes) -->
        <div class="summary-row">
            <span class="summary-label">Total GST:</span>
            <span>${(t.totalGST||0).toFixed(2)}</span>
        </div>
    </div>
    
    <div class="bill-summary">
        <div class="summary-row">
            <span class="summary-label">Total Discount:</span>
            <span>${t.totalDiscount.toFixed(2)}</span>
        </div>
        <div class="summary-row">
            <span class="summary-label">Round-off:</span>
            <span>${t.roundOff.toFixed(2)}</span>
        </div>
        <div class="summary-row">
            <span class="summary-label">Total Items:</span>
            <span>${i}</span>
        </div>
    </div>
    
    <!-- PAYMENT DETAILS -->
    ${t.customerPaid!==void 0||t.changeReturned!==void 0||t.amountInWords?`
    <div class="bill-summary" style="margin-top: 5mm;">
        <div style="font-weight: bold; font-size: 10px; margin-bottom: 2mm;">PAYMENT DETAILS</div>
        
        ${t.customerPaid!==void 0?`
        <div class="summary-row">
            <span>Customer Paid:</span>
            <span>${t.customerPaid.toFixed(2)}</span>
        </div>`:""}
        
        ${t.changeReturned!==void 0?`
        <div class="summary-row">
            <span>Change Returned:</span>
            <span>${t.changeReturned.toFixed(2)}</span>
        </div>`:""}
        
        ${t.amountInWords?`
        <div class="summary-row">
            <span>Amount in Words:</span>
            <span>${t.amountInWords}</span>
        </div>`:""}
    </div>
    `:""}
    
    <div class="total-section">
        <div class="total-label">TOTAL AMOUNT</div>
        <div class="total-amount">${t.grandTotal.toFixed(2)}</div>
    </div>
    
    <div class="qr-section">
        <img src="${a}" alt="QR Code" class="qr-code">
        <div>Scan for Invoice Details</div>
    </div>
    
    <div class="signature-section">
        <div class="signature-line">Authorized Signatory</div>
        <div class="signature-line">Customer Signature</div>
    </div>
    
    <div class="footer">
        Thank you for your business!
    </div>
    
    <script>
        // Auto-print when opened
        window.onload = function() {
            window.print();
        };
    <\/script>
</body>
</html>
`,m=window.open("","_blank");m&&(m.document.write(y),m.document.close())}catch(n){throw console.error("Error generating thermal invoice:",n),n}},co=r=>r.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2});function Ca(r){return Math.round(r*100)/100}function G8(r){const t=Ca(r.rate*r.quantity);let e=0;r.discount_percent_item>0?e=Ca(t*r.discount_percent_item/100):e=Ca(r.discount_amount_item||0);const n=Ca(t-e);let a,i,s,o,l,c;if(r.tax_type==="exclusive")a=n,i=Ca(a*(r.gst_rate/100)),s=Ca(a*(r.cess_rate/100)),o=Ca(a+i+s);else{l=n;const u=1+(r.gst_rate+r.cess_rate)/100,f=l/u;a=Ca(f),i=Ca(f*(r.gst_rate/100)),s=Ca(f*(r.cess_rate/100));const h=Ca(a+i+s);c=Ca(l-h),o=l}return{gross:t,discount_amount:e,taxable:a,gst_amount:i,cess_amount:s,total:o,discounted_inclusive:l,round_off:c,tax_type:r.tax_type}}function cg(r,t,e){let n=0,a=0,i=0,s=0,o=0,l=0,c=0;for(const h of r){const p=G8(h);n=Ca(n+p.gross),a=Ca(a+p.discount_amount),i=Ca(i+p.taxable),s=Ca(s+p.gst_amount),o=Ca(o+p.cess_amount),l=Ca(l+p.total),p.round_off!==void 0&&(c=Ca(c+p.round_off))}let u=0;t>0?u=Ca(l*t/100):u=Ca(e||0);const f=Ca(l-u);return{sumGross:n,sumItemDiscount:a,invoiceDisc:u,taxable:i,gst:s,cess:o,roundOff:c,total:f}}const uz=({isOpen:r,onClose:t,onConfirm:e,title:n,message:a,confirmText:i="Confirm",cancelText:s="Cancel",isLoading:o=!1})=>r?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[d.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[d.jsx(bN,{className:"h-5 w-5 text-red-500 mr-2"}),n]}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",disabled:o,children:d.jsx(va,{className:"h-5 w-5"})})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:a}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(lt,{type:"button",variant:"secondary",onClick:t,disabled:o,children:s}),d.jsx(lt,{type:"button",variant:"danger",onClick:e,isLoading:o,children:i})]})]})]})}):null,lwe=({isOpen:r,onClose:t,onApply:e,itemId:n,itemPrice:a=0})=>{const[i,s]=ie.useState("percentage"),[o,l]=ie.useState(0),{theme:c}=zr(),u=c==="dark";if(!r||!n)return null;const h=i==="percentage"?a*o/100:o,p=a-h;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:`w-96 p-6 rounded-lg shadow-lg ${u?"bg-gray-800":"bg-white"}`,children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:"Apply Item Discount"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount Type"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>s("percentage"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${i==="percentage"?"bg-blue-500 text-white":u?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:"Percentage (%)"}),d.jsx("button",{onClick:()=>s("fixed"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${i==="fixed"?"bg-blue-500 text-white":u?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:"Fixed Amount ()"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:i==="percentage"?"Discount Percentage":"Discount Amount"}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"number",min:"0",max:i==="percentage"?100:a,step:i==="percentage"?1:.01,value:o,onChange:g=>{const y=Qe(g.target.value);l(Math.min(i==="percentage"?100:a,Math.max(0,y)))},className:`w-full pl-3 pr-10 py-2 rounded-md border ${u?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})})]}),i==="percentage"&&d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quick Apply"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:[5,10,15,20,25].map(g=>d.jsxs("button",{onClick:()=>l(g),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${o===g?"bg-blue-500 text-white":u?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:[g,"%"]},g))})]}),d.jsx("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-md",children:d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Original Price:"}),d.jsxs("span",{children:["",a.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between text-green-600",children:[d.jsx("span",{children:"Discount:"}),d.jsxs("span",{children:["-",h.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Final Price:"}),d.jsxs("span",{children:["",p.toFixed(2)]})]})]})}),d.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(lt,{variant:"primary",onClick:()=>{e(n,i,o),l(0)},disabled:o===0,children:"Apply Discount"})]})]})})},cwe=()=>{var Pt;const{theme:r}=zr(),{selectedCompany:t}=ln(),e=pi(),n=r==="dark",[a,i]=ie.useState([]),[s,o]=ie.useState(""),[l,c]=ie.useState(!1),[u,f]=ie.useState(null),[,h]=ie.useState(""),[p,g]=ie.useState(!1),[y,m]=ie.useState(!1),[v,b]=ie.useState({}),[x,S]=ie.useState(null),[_,I]=ie.useState("split"),[A,O]=ie.useState(0),[M,z]=ie.useState(0),[U,D]=ie.useState({}),[T,R]=ie.useState(null),[C,N]=ie.useState(!1),E=()=>_==="none",k=()=>_!=="none",P=ie.useMemo(()=>t?[{column:"company_id",operator:"eq",value:t.id}]:[],[t==null?void 0:t.id]),q=ie.useMemo(()=>t?[{column:"company_id",operator:"eq",value:t.id}]:[],[t==null?void 0:t.id]),{data:H=[],loading:L}=qg("products",{filters:P,realtime:!0}),{data:K=[],loading:Y}=qg("customers",{filters:q}),[Z,V]=ie.useState({}),[,ee]=ie.useState(!1);ie.useEffect(()=>{(async()=>{if(H.length>0&&t){ee(!0);try{const We=H.map(wt=>wt.id),ut=await kN(We,t.id);V(ut)}catch(We){console.error("Error calculating live stock:",We)}finally{ee(!1)}}})()},[H,t]),ie.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){console.log("No selected company, skipping tax configuration load");return}try{console.log(`Loading tax configuration for company ${t.id}...`);const We=await NN(t.id);console.log("Tax settings loaded:",We),We?(S(We),I(We.tax_type)):(console.warn("No tax settings found, using defaults"),S({id:"default",company_id:t.id,tax_inclusive:!1,tax_type:"split",cess_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));const ut=await jN(t.id);if(console.log("Tax rates loaded:",ut),ut&&ut.length>0){const wt=ut.reduce((Bt,dr)=>(Bt[dr.id]={rate:dr.rate,description:dr.description,hsn_code:dr.hsn_code||void 0},Bt),{});b(wt)}else console.warn("No tax rates found, using default rates"),b({"00000000-0000-0000-0000-000000000000":{rate:0,description:"GST 0%"},"b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d":{rate:5,description:"GST 5%"},"73fe4609-6047-4e3e-ae44-64e7d68b6df1":{rate:12,description:"GST 12%"},"ef3d6f7b-9d32-4f5b-8b75-425b6723c122":{rate:18,description:"GST 18%"},"0a93172b-21a3-42ac-b372-fc16acf44a06":{rate:28,description:"GST 28%"}})}catch(We){console.error("Error loading tax configuration:",We),Ce.error("Failed to load tax configuration. Please refresh the page.")}})()},[t==null?void 0:t.id]);const B=Ee=>`${Ee.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,F=K.filter(Ee=>Ee.customerType==="creditor"),X=H.filter(Ee=>Ee.name.toLowerCase().includes(s.toLowerCase())||Ee.sku.toLowerCase().includes(s.toLowerCase())),te=ie.useCallback(Ee=>{if(!u){Ce.error("Please select a creditor first");return}const We=a.findIndex(ut=>ut.id===Ee.id);if(We>=0){const ut=[...a];ut[We].quantity=Qe(ut[We].quantity+1),ut[We].discountPercentage=ut[We].discountPercentage||0,ut[We].discountAmount=ut[We].discountAmount||0,i(ut)}else{const ut={...Ee,quantity:1,discountPercentage:0,discountAmount:0,company_id:t?t.id:void 0};i([...a,ut])}o("")},[a,u,t,o]),se=ie.useCallback(Ee=>{i(We=>We.filter(ut=>ut.id!==Ee))},[]),ce=ie.useCallback((Ee,We)=>{i(ut=>ut.map(wt=>{if(wt.id===Ee){const Bt=Math.max(0,Qe(wt.quantity)+Qe(We));return Bt===0?null:{...wt,quantity:Qe(Bt),discountPercentage:wt.discountPercentage||0,discountAmount:wt.discountAmount||0}}return wt}).filter(wt=>wt!==null))},[]),ue=ie.useCallback(()=>{i([]),f(null),h(""),O(0),z(0)},[]),oe=Ee=>{try{if(_==="none")return 0;if(!Ee)return console.log("No item provided to calculateItemTax"),0;const We={rate:Qe(Ee.purchasePrice),quantity:Qe(Ee.quantity),discount_percent_item:Qe(Ee.discountPercentage||0),discount_amount_item:Qe(Ee.discountAmount||0),gst_rate:0,cess_rate:0,tax_type:x!=null&&x.tax_inclusive?"inclusive":"exclusive"};if(_==="none"&&(We.gst_rate=0,We.cess_rate=0,We.tax_type="exclusive"),_!=="none"){if(!v||Object.keys(v).length===0)console.log("No tax rates available, using default 5% for item:",Ee.name),We.gst_rate=5;else{const wt=Ee.taxRateId;wt&&(v[wt]?We.gst_rate=v[wt].rate:(console.log("Tax rate ID not found in available rates for item:",Ee.name,"taxRateId:",wt,"using default 5%"),We.gst_rate=5))}x!=null&&x.cess_enabled&&We.gst_rate===28&&(We.cess_rate=1)}const ut=G8(We);return console.log("Calculated tax amount for",Ee.name,":",ut.gst_amount),Qe(ut.gst_amount)}catch(We){return console.error("Error calculating tax for item:",Ee.name,We),Qe(Ee.purchasePrice)*Qe(Ee.quantity)*.05}},le=()=>{try{if(!a||a.length===0)return console.log("CESS calculation skipped: No items in cart"),0;if(E())return 0;if(!(x!=null&&x.cess_enabled))return console.log("CESS calculation skipped: CESS not enabled in settings"),0;const Ee=a.map(ut=>{let wt=0;if(k())if(!v||Object.keys(v).length===0)wt=5;else{const Xt=ut.taxRateId;Xt&&v[Xt]?wt=v[Xt].rate:wt=5}let Bt=0;x!=null&&x.cess_enabled&&wt===28&&k()&&(Bt=1);const dr=E()?"exclusive":x!=null&&x.tax_inclusive?"inclusive":"exclusive";return E()&&(wt=0,Bt=0),{rate:Qe(ut.purchasePrice),quantity:Qe(ut.quantity),discount_percent_item:Qe(ut.discountPercentage||0),discount_amount_item:Qe(ut.discountAmount||0),gst_rate:wt,cess_rate:Bt,tax_type:dr}}),We=cg(Ee,Qe(A),Qe(M));return console.log("CESS calculation result using GST Calculator:",We.cess),Qe(We.cess)}catch(Ee){return console.error("Error calculating CESS:",Ee),0}},pe=Ee=>{try{if(E())return{cgst:0,sgst:0,igst:0};if(console.log("Calculating GST components with tax type:",_),!a||a.length===0)return console.log("No items in cart, returning zero tax"),{cgst:0,sgst:0,igst:0};const We=a.map(wt=>{let Bt=0;if(_!=="none")if(!v||Object.keys(v).length===0)Bt=5;else{const Xt=wt.taxRateId;Xt&&v[Xt]?Bt=v[Xt].rate:Bt=5}let dr=0;return _!=="none"&&(x!=null&&x.cess_enabled)&&Bt===28&&(dr=1),{rate:Qe(wt.purchasePrice),quantity:Qe(wt.quantity),discount_percent_item:Qe(wt.discountPercentage||0),discount_amount_item:Qe(wt.discountAmount||0),gst_rate:Bt,cess_rate:dr,tax_type:x!=null&&x.tax_inclusive?"inclusive":"exclusive"}}),ut=cg(We,Qe(A),Qe(M));if(console.log("Invoice GST calculation result using GST Calculator:",ut),_==="split"){const Bt=ut.gst/2,dr=ut.cess;return console.log("Split tax - CGST:",Bt,"SGST:",Bt,"CESS:",dr),{cgst:Qe(Bt),sgst:Qe(Bt),igst:0}}else return console.log("Integrated tax - IGST:",ut.gst,"CESS:",ut.cess),{cgst:0,sgst:0,igst:Qe(ut.gst)}}catch(We){console.error("Error calculating GST components:",We);const ut=Qe(Ee)*.05;if(_==="split"){const wt=ut/2;return{cgst:Qe(wt),sgst:Qe(wt),igst:0}}else return{cgst:0,sgst:0,igst:Qe(ut)}}};ie.useEffect(()=>{if(a.length>0&&Object.keys(v).length>0){console.log("Updating cart items with tax rates and amounts");const Ee="b5aa2c3d-fe26-47f3-bd25-7e6b76c36a2d";i(We=>{const ut=We.map(wt=>{const Bt={...wt,taxRateId:wt.taxRateId||Ee},dr=oe(Bt);return{...Bt,taxAmount:Qe(dr)}});return console.log("Updated cart with tax rates:",ut.map(wt=>({id:wt.id,name:wt.name,taxRateId:wt.taxRateId,taxAmount:wt.taxAmount}))),ut})}},[v,_,x]);const ye=Qe(a.reduce((Ee,We)=>Ee+Qe(We.purchasePrice)*Qe(We.quantity),0)),be=Qe(a.reduce((Ee,We)=>Ee+Qe(We.discountAmount||0),0)),Ie=Qe(ye*Qe(A)/100),Oe=Qe(ye-be-Ie-Qe(M)),Me=ie.useMemo(()=>{try{const Ee=a.map(ut=>{let wt=0;if(_!=="none")if(!v||Object.keys(v).length===0)wt=5;else{const dr=ut.taxRateId;dr&&v[dr]?wt=v[dr].rate:wt=5}let Bt=0;return _!=="none"&&(x!=null&&x.cess_enabled)&&wt===28&&(Bt=1),{rate:Qe(ut.purchasePrice),quantity:Qe(ut.quantity),discount_percent_item:Qe(ut.discountPercentage||0),discount_amount_item:Qe(ut.discountAmount||0),gst_rate:wt,cess_rate:Bt,tax_type:x!=null&&x.tax_inclusive?"inclusive":"exclusive"}});return cg(Ee,Qe(A),Qe(M)).roundOff||0}catch(Ee){return console.error("Error calculating round-off amount:",Ee),0}},[a,v,x,A,M]),{cgst:Re,sgst:He,igst:qe}=pe(Oe),ct=Qe(le()),ft=ie.useMemo(()=>{try{const Ee=a.map(ut=>{let wt=0;if(_!=="none")if(!v||Object.keys(v).length===0)wt=5;else{const dr=ut.taxRateId;dr&&v[dr]?wt=v[dr].rate:wt=5}let Bt=0;return _!=="none"&&(x!=null&&x.cess_enabled)&&wt===28&&(Bt=1),{rate:Qe(ut.purchasePrice),quantity:Qe(ut.quantity),discount_percent_item:Qe(ut.discountPercentage||0),discount_amount_item:Qe(ut.discountAmount||0),gst_rate:wt,cess_rate:Bt,tax_type:x!=null&&x.tax_inclusive?"inclusive":"exclusive"}});return cg(Ee,Qe(A),Qe(M)).total}catch(Ee){if(console.error("Error calculating total:",Ee),x!=null&&x.tax_inclusive)return Oe;{const We=Qe(Re+He+qe+ct);return Qe(Oe+We)}}},[a,v,x,A,M,Re,He,qe,Oe]),St=Ee=>{m(!1),Rt(Ee)},Rt=async(Ee=!1)=>{if(!u){Ce.error("Please select a creditor");return}if(a.length===0){Ce.error("Cart is empty");return}c(!0);try{const We=a.map(Ue=>{let et=0;if(_!=="none")if(!v||Object.keys(v).length===0)et=5;else{const Ve=Ue.taxRateId;Ve&&v[Ve]?et=v[Ve].rate:et=5}let ht=0;_!=="none"&&(x!=null&&x.cess_enabled)&&et===28&&(ht=1);const kt=U[Ue.id];let Wt=0,Be=0;return kt&&(kt.type==="percentage"?(Wt=kt.value,Be=Ue.purchasePrice*Ue.quantity*(Wt/100)):(Be=kt.value,Ue.purchasePrice*Ue.quantity>0&&(Wt=Be/(Ue.purchasePrice*Ue.quantity)*100))),{rate:Qe(Ue.purchasePrice),quantity:Qe(Ue.quantity),discount_percent_item:Number(Wt||0),discount_amount_item:Number(Be||0),gst_rate:et,cess_rate:ht,tax_type:x!=null&&x.tax_inclusive?"inclusive":"exclusive"}}),ut=cg(We,Qe(A),Qe(M)),wt=ut.sumGross,Bt=ut.sumItemDiscount,dr=ut.invoiceDisc,Xt=ut.taxable,pr=ut.gst,vr=ut.cess,rr=ut.total;console.log("Purchase calculation breakdown using GST Calculator:",{subtotal:wt,itemDiscounts:Bt,invoiceDiscount:dr,taxableAmount:Xt,gstAmount:pr,cessAmount:vr,totalAmount:rr});const Zt=a.map((Ue,et)=>{const ht=We[et],kt=G8(ht);return{...Ue,grossAmount:kt.gross,itemDiscount:kt.discount_amount,taxableAmount:kt.taxable,taxAmount:kt.gst_amount,cessAmount:kt.cess_amount,netAmount:kt.total}}),lr={cgst:_==="split"?pr/2:0,sgst:_==="split"?pr/2:0,igst:_==="integrated"?pr:0},fr={items:Zt.map(Ue=>{const et=U[Ue.id];let ht=0,kt=0;return et&&(et.type==="percentage"?(ht=et.value,kt=Ue.purchasePrice*Ue.quantity*(ht/100)):(kt=et.value,Ue.purchasePrice*Ue.quantity>0&&(ht=kt/(Ue.purchasePrice*Ue.quantity)*100))),{id:Ue.id,quantity:Qe(Ue.quantity),name:Ue.name,price:Qe(Ue.purchasePrice),taxRateId:ul(Ue.taxRateId),taxAmount:Qe(Ue.taxAmount||0),discountAmount:Number(kt||0),discountPercentage:Number(ht||0),companyId:ul(t==null?void 0:t.id)}}),subtotal:Qe(wt),discountPercentage:Qe(A),discountAmount:Qe(M),tax:Qe(pr+vr),total:Qe(rr),paymentMethod:"credit",taxType:_,taxInclusive:(x==null?void 0:x.tax_inclusive)||!1,cgst:_==="split"?Qe(lr.cgst):0,sgst:_==="split"?Qe(lr.sgst):0,igst:_==="integrated"?Qe(lr.igst):0,cess:_!=="none"?Qe(vr):0,creditorId:ul(u.id),customerName:u.name||"",customerGst:u.gstNumber||"",customerAddress:[u.addressStreet,u.address_city,u.address_state,u.address_postal_code].filter(Boolean).join(", "),customerPhone:u.phone||"",customerEmail:u.email||"",companyId:ul(t==null?void 0:t.id)};if(console.log("Sending purchase data with accurate GST calculations:",JSON.stringify(fr,null,2)),!(t!=null&&t.id)){console.error("No company selected when attempting to process purchase"),Ce.error("No company selected. Please select a company before completing the purchase."),c(!1);return}const xr=fr.items.filter(Ue=>!Ue.taxRateId);if(xr.length>0){console.error("Some items are missing tax rate IDs:",xr),Ce.error("Some items are missing tax information. Please try again."),c(!1);return}if(Object.keys(v).length===0){console.error("No tax rates loaded"),Ce.error("Tax rates not loaded. Please try again."),c(!1);return}try{console.log("Calling processPurchase with accurate GST data...");const Ue=await iwe({...fr,companyId:t.id});console.log("Purchase completed successfully with ID:",Ue);let et=null;if(Ue&&(t!=null&&t.id))try{const{data:ht,error:kt}=await De.from("purchase_entries").select("id, invoice_number, created_at").eq("id",Ue).eq("company_id",t.id).single();kt?console.error("Error fetching purchase record:",kt):et=ht}catch(ht){console.error("Error fetching purchase record:",ht)}if(Ee){console.log("Generating invoice PDF with accurate GST calculations...");const ht=Zt.map(he=>{var Ge;const xe=he.taxRateId,me=xe?(Ge=v[xe])==null?void 0:Ge.rate:0,Se=U[he.id];let ke=0,Te=0;return Se&&(Se.type==="percentage"?(ke=Se.value,Te=he.purchasePrice*he.quantity*(ke/100)):(Te=Se.value,he.purchasePrice*he.quantity>0&&(ke=Te/(he.purchasePrice*he.quantity)*100))),{name:he.name||"Item",quantity:Qe(he.quantity)||1,rate:Qe(he.purchasePrice)||0,discountPercentage:Qe(ke)||0,discountAmount:Qe(he.itemDiscount)||0,grossAmount:Qe(he.grossAmount)||0,itemDiscount:Qe(he.itemDiscount)||0,taxableAmount:Qe(he.taxableAmount)||0,taxAmount:Qe(he.taxAmount)||0,cessAmount:Qe(he.cessAmount)||0,netAmount:Qe(he.netAmount)||0,taxRate:me||0}}),kt={totalQuantity:Zt.reduce((he,xe)=>he+(xe.quantity||0),0),totalDiscount:Zt.reduce((he,xe)=>he+(xe.itemDiscount||0),0),totalTaxableValue:Zt.reduce((he,xe)=>he+(xe.taxableAmount||0),0),totalGST:Zt.reduce((he,xe)=>he+(xe.taxAmount||0),0),totalCESS:Zt.reduce((he,xe)=>he+(xe.cessAmount||0),0),roundOff:Me,grandTotal:ft},Wt={name:u.name||"",email:u.email||void 0,phone:u.phone||void 0,gstNumber:u.gstNumber||void 0,address:[u.addressStreet,u.address_city,u.address_state,u.address_postal_code].filter(Boolean).join(", ")||void 0},Be={id:Ue,invoiceNumber:(et==null?void 0:et.invoice_number)||Ue,date:OK(et==null?void 0:et.created_at)||new Date().toISOString(),time:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),items:ht,customer:Wt,taxType:_,totalQuantity:kt.totalQuantity,totalDiscount:kt.totalDiscount,totalTaxableValue:kt.totalTaxableValue,totalGST:kt.totalGST,totalCESS:kt.totalCESS,roundOff:kt.roundOff,grandTotal:kt.grandTotal,totalCGST:_==="split"?Qe(lr.cgst):void 0,totalSGST:_==="split"?Qe(lr.sgst):void 0,totalIGST:_==="integrated"?Qe(lr.igst):void 0},Ve=t?{name:t.name||"Unknown Company",legal_name:t.legal_name||t.name||"Unknown Company",tax_number:t.tax_number||void 0,email:t.email||void 0,phone:t.phone||void 0,website:t.website||void 0,address_street:t.address_street||void 0,address_city:t.address_city||void 0,address_state:t.address_state||void 0,address_postal_code:t.address_postal_code||void 0,address_country:t.address_country||void 0,state_code:t.state_code||void 0,pan:t.pan||void 0,logo_url:t.logo_url||void 0}:{name:"Unknown Company",legal_name:"Unknown Company"},pt=structuredClone(Be);await cz(Ve,pt),console.log("Invoice PDF generated and saved with accurate GST calculations")}ue(),Ce.success("Purchase completed successfully with accurate GST calculations!")}catch(Ue){console.error("Error completing purchase:",Ue);const et=Ue instanceof Error?Ue.message:"Unknown error occurred while completing purchase";Ce.error(`Failed to complete purchase: ${et}`),c(!1);return}}catch(We){console.error("Purchase error with GST calculator:",We);const ut=We instanceof Error?We.message:"Unknown error occurred during purchase processing";Ce.error(ut)}finally{c(!1)}},Ft=()=>{if(a.length===0){Ce.error("Cart is empty");return}if(!u){Ce.error("Please select a creditor");return}m(!0)},ot=(Ee,We,ut)=>{D(wt=>({...wt,[Ee]:{type:We,value:ut}})),N(!1),R(null)},Kt=Ee=>{D(We=>{const ut={...We};return delete ut[Ee],ut})};return ie.useEffect(()=>{i(Ee=>Ee.map(We=>{const ut=U[We.id];if(ut){let wt=0,Bt=0;return ut.type==="percentage"?(Bt=ut.value,wt=We.purchasePrice*We.quantity*(Bt/100)):(wt=ut.value,We.purchasePrice*We.quantity>0&&(Bt=wt/(We.purchasePrice*We.quantity)*100)),{...We,discountAmount:Number(wt),discountPercentage:Number(Bt)}}return{...We,discountAmount:We.discountAmount||0,discountPercentage:We.discountPercentage||0}}))},[U]),t?F.length===0&&!Y?d.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)]",children:[d.jsx(kp,{className:"w-16 h-16 text-blue-500 mb-4"}),d.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Creditors Available"}),d.jsx("p",{className:`text-center max-w-md ${n?"text-gray-400":"text-gray-600"}`,children:"To make purchases, you need to have creditors in your system. Please add creditors through the Customers page first."}),d.jsx(lt,{variant:"primary",className:"mt-6",onClick:()=>e("/customers"),children:"Go to Customers"})]}):d.jsxs("div",{className:"flex gap-6 min-h-full",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[d.jsxs("div",{className:"relative flex-1 mr-4",children:[d.jsx("input",{type:"text",placeholder:"Search products...",value:s,onChange:Ee=>o(Ee.target.value),className:`w-full pl-10 pr-4 py-2 rounded-md border ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx(nd,{className:`absolute left-3 top-2.5 w-5 h-5 ${n?"text-gray-400":"text-gray-500"}`})]}),d.jsx(lt,{variant:"secondary",onClick:()=>g(!0),leftIcon:d.jsx(wn,{className:"w-4 h-4"}),children:u?u.name:"Select Creditor"})]}),p?d.jsxs("div",{className:`p-6 rounded-lg ${n?"bg-gray-800":"bg-white"} mb-6`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("span",{className:"font-medium",children:"Select Creditor"}),d.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:F.map(Ee=>d.jsxs("button",{onClick:()=>{f(Ee),g(!1)},className:`w-full text-left p-4 rounded-md ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[d.jsx("div",{className:"font-medium",children:Ee.name}),d.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:Ee.email}),d.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:["Credit Limit: ",B(Ee.creditLimit)]})]},Ee.id))})]}):d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:L?[...Array(8)].map((Ee,We)=>d.jsxs("div",{className:`animate-pulse ${n?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm`,children:[d.jsx("div",{className:"aspect-square bg-gray-300 rounded-md mb-3"}),d.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),d.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]},We)):X.map(Ee=>d.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow`,children:[Ee.imageUrl?d.jsx("img",{src:Ee.imageUrl,alt:Ee.name,className:"aspect-square object-cover rounded-md mb-3"}):d.jsx("div",{className:`aspect-square ${n?"bg-gray-700":"bg-gray-100"} rounded-md mb-3 flex items-center justify-center`,children:d.jsx(Hn,{className:"w-12 h-12 text-gray-400"})}),d.jsx("h3",{className:"font-medium",children:Ee.name}),d.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:["SKU: ",Ee.sku]}),d.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[d.jsx("p",{className:"font-semibold",children:B(Ee.purchasePrice)}),d.jsxs("p",{className:`text-sm ${(Z[Ee.id]!==void 0?Z[Ee.id]:0)<5?"text-red-500":n?"text-gray-400":"text-gray-500"}`,children:["Available: ",Z[Ee.id]!==void 0?Z[Ee.id]:0]})]}),d.jsx(lt,{variant:"primary",size:"sm",className:"w-full mt-3",onClick:()=>te(Ee),children:"Add to Cart"})]},Ee.id))})]}),d.jsxs("div",{className:`w-96 ${n?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm max-h-screen overflow-y-auto`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Current Purchase"}),d.jsx("div",{className:"flex space-x-2",children:d.jsx(ui,{className:"w-6 h-6"})})]}),a.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"Tax Type"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>I("split"),className:`px-2 py-1 text-xs rounded-md ${_==="split"?n?"bg-blue-600 text-white":"bg-blue-100 text-blue-800":n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:"CGST + SGST"}),d.jsx("button",{onClick:()=>I("integrated"),className:`px-2 py-1 text-xs rounded-md ${_==="integrated"?n?"bg-blue-600 text-white":"bg-blue-100 text-blue-800":n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:"IGST"}),d.jsx("button",{onClick:()=>I("none"),className:`px-2 py-1 text-xs rounded-md ${_==="none"?n?"bg-blue-600 text-white":"bg-blue-100 text-blue-800":n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:"Nil Tax"})]})]}),d.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-500"}`,children:_==="split"?"Use CGST + SGST for intra-state transactions (same state)":_==="none"?"No tax applied to this transaction":"Use IGST for inter-state transactions (different states)"})]}),u?a.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(ui,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:`${n?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"})]}):d.jsxs("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:[a.map(Ee=>d.jsxs("div",{className:`p-4 rounded-md ${n?"bg-gray-700":"bg-gray-50"}`,children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:Ee.name}),d.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:[B(Ee.purchasePrice)," each"]}),Ee.taxRateId&&v[Ee.taxRateId]&&d.jsx("span",{className:"inline-flex items-center px-2 py-0.5 mt-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:v[Ee.taxRateId].description}),U[Ee.id]&&d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 mt-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[d.jsx(Xi,{className:"w-3 h-3 mr-1"}),U[Ee.id].value,U[Ee.id].type==="percentage"?"%":""," off"]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"font-semibold",children:B(Ee.purchasePrice*Ee.quantity)}),Ee.taxAmount!==void 0&&Ee.taxAmount>0&&d.jsxs("p",{className:`text-xs ${n?"text-gray-400":"text-gray-500"}`,children:["+",B(Ee.taxAmount)," tax"]})]}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(lt,{variant:"ghost",size:"sm",className:"text-blue-500 hover:text-blue-600",onClick:()=>{R(Ee.id),N(!0)},"aria-label":"Apply discount",children:d.jsx(Xi,{className:"w-4 h-4"})}),U[Ee.id]&&d.jsx(lt,{variant:"ghost",size:"sm",className:"text-orange-500 hover:text-orange-600",onClick:()=>Kt(Ee.id),"aria-label":"Remove discount",children:d.jsx(va,{className:"w-4 h-4"})}),d.jsx(lt,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",onClick:()=>se(Ee.id),"aria-label":"Remove item",children:d.jsx(Xu,{className:"w-4 h-4"})})]})]})]}),d.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>ce(Ee.id,-1),"aria-label":"Decrease quantity",children:d.jsx(vD,{className:"w-4 h-4"})}),d.jsx("span",{className:"w-8 text-center",children:Ee.quantity}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>ce(Ee.id,1),"aria-label":"Increase quantity",children:d.jsx(ml,{className:"w-4 h-4"})})]})]},Ee.id)),d.jsxs("div",{className:"border-t pt-4 space-y-4",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Subtotal"}),d.jsx("span",{children:B(Oe)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Disc %"}),d.jsx("input",{type:"number",min:"0",max:"100",value:A,onChange:Ee=>O(Qe(Ee.target.value)||0),className:`w-20 px-2 py-1 text-right rounded border ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Disc Amount"}),d.jsx("input",{type:"number",min:"0",value:M,onChange:Ee=>z(Qe(Ee.target.value)||0),className:`w-20 px-2 py-1 text-right rounded border ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),_==="split"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-1"}),"CGST"]}),d.jsx("span",{children:B(Re)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-1"}),"SGST"]}),d.jsx("span",{children:B(He)})]})]}):d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-1"}),"IGST"]}),d.jsx("span",{children:B(qe)})]}),ct>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-1"}),"CESS"]}),d.jsx("span",{children:B(ct)})]}),Me!==0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Round Off"}),d.jsx("span",{children:B(Me)})]}),(A>0||M>0||be>0)&&d.jsxs("div",{className:"flex justify-between text-green-600",children:[d.jsx("span",{children:"Total Discount"}),d.jsxs("span",{children:["-",B(be+Ie+M)]})]}),d.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[d.jsx("span",{children:"Total"}),d.jsx("span",{children:B(ft)})]}),u&&d.jsxs("div",{className:`p-3 rounded-md ${n?"bg-gray-700":"bg-gray-100"}`,children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:"Credit Limit"}),d.jsx("span",{children:B(u.creditLimit)})]}),d.jsxs("div",{className:"flex justify-between items-center mt-1",children:[d.jsx("span",{children:"Current Balance"}),d.jsx("span",{children:B(u.currentBalance)})]}),d.jsxs("div",{className:"flex justify-between items-center mt-1",children:[d.jsx("span",{children:"Available Credit"}),d.jsx("span",{className:ft>u.creditLimit-u.currentBalance?"text-red-500":"text-green-500",children:B(u.creditLimit-u.currentBalance)})]}),ft>u.creditLimit-u.currentBalance&&d.jsxs("div",{className:"flex items-center mt-2 text-red-500 text-sm",children:[d.jsx(Wn,{className:"w-4 h-4 mr-1"}),d.jsx("span",{children:"Purchase amount exceeds available credit"})]})]})]}),d.jsxs(d.Fragment,{children:[d.jsx(lt,{variant:"primary",size:"lg",className:"w-full mt-6",leftIcon:d.jsx(tc,{className:"w-5 h-5"}),isLoading:l,onClick:Ft,disabled:!u||a.length===0||ft>u.creditLimit-u.currentBalance,children:"Complete Purchase"}),(u==null?void 0:u.phone)&&(t==null?void 0:t.id)&&d.jsx("div",{className:"mt-4",children:d.jsx(Tx,{phoneNumber:u.phone,messageType:"purchase_receipt",messageData:{total:ft,customer_name:u.name},companyId:t.id,customerId:u.id,variant:"secondary",size:"lg",className:"w-full"})})]})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(wn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:`${n?"text-gray-400":"text-gray-500"}`,children:"Please select a creditor first"}),d.jsx(lt,{variant:"primary",size:"sm",className:"mt-4",onClick:()=>g(!0),children:"Select Creditor"})]})]}),d.jsx(uz,{isOpen:y,onClose:()=>St(!1),onConfirm:()=>St(!0),title:"Print Receipt",message:"Would you like to print the purchase receipt?",confirmText:"Print Receipt",cancelText:"Complete Without Printing"}),d.jsx(lwe,{isOpen:C,onClose:()=>{N(!1),R(null)},onApply:ot,itemId:T,itemPrice:T&&((Pt=a.find(Ee=>Ee.id===T))==null?void 0:Pt.purchasePrice)||0})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)]",children:[d.jsx(Wn,{className:"w-16 h-16 text-yellow-500 mb-4"}),d.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Company Selection Required"}),d.jsx("p",{className:`text-center max-w-md ${n?"text-gray-400":"text-gray-600"}`,children:"Please select a company from the company selector to view purchase data."})]})},uwe=({isOpen:r,onClose:t,onAdd:e})=>{const{theme:n}=zr(),a=n==="dark",[i,s]=ie.useState(!1),[o,l]=ie.useState({name:"",email:"",phone:"",alternatePhone:"",gstNumber:"",date_of_birth:"",customerType:"regular",creditLimit:0,currentBalance:0,addressStreet:"",addressCity:"",addressState:"",addressPostalCode:"",addressCountry:"India"});if(!r)return null;const c=async f=>{f.preventDefault(),s(!0);try{await e(o),Ce.success("Customer added successfully"),t()}catch(h){const p=h instanceof Error?h.message:"Failed to add customer";Ce.error(p),console.error("Error adding customer:",h)}finally{s(!1)}},u=f=>{const{name:h,value:p}=f.target;l(h==="creditLimit"?g=>({...g,[h]:parseFloat(p)||0}):g=>({...g,[h]:p}))};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-md transform rounded-lg ${a?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Add New Customer"}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:c,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Customer Name"}),d.jsx("input",{type:"text",name:"name",value:o.name,onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Customer Type"}),d.jsxs("select",{name:"customerType",value:o.customerType,onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"regular",children:"Regular"}),d.jsx("option",{value:"creditor",children:"Creditor"}),d.jsx("option",{value:"debitor",children:"Debitor"})]})]}),o.customerType!=="regular"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Credit Limit"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"number",name:"creditLimit",value:o.creditLimit,onChange:u,min:"0",step:"0.01",required:!0,className:`w-full p-2 pl-8 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{className:"absolute left-3 top-2.5",children:""})]}),d.jsxs("p",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[d.jsx(Wn,{className:"w-4 h-4 mr-1"}),o.customerType==="creditor"?"Maximum amount this customer can be credited":"Maximum amount this customer can owe"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:o.email||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),d.jsx("input",{type:"tel",name:"phone",value:o.phone||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alternate Phone"}),d.jsx("input",{type:"tel",name:"alternatePhone",value:o.alternatePhone||"",onChange:u,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date of Birth"}),d.jsx("input",{type:"date",name:"date_of_birth",value:o.date_of_birth||"",onChange:u,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"GST Number"}),d.jsx("input",{type:"text",name:"gstNumber",value:o.gstNumber||"",onChange:u,placeholder:"15AABCU9603R1ZX",className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street Address"}),d.jsx("input",{type:"text",name:"addressStreet",value:o.addressStreet||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),d.jsx("input",{type:"text",name:"addressCity",value:o.addressCity||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"State"}),d.jsx("input",{type:"text",name:"addressState",value:o.addressState||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),d.jsx("input",{type:"text",name:"addressPostalCode",value:o.addressPostalCode||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),d.jsx("input",{type:"text",name:"addressCountry",value:o.addressCountry||"",onChange:u,required:!0,className:`w-full p-2 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx(lt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),d.jsx(lt,{variant:"primary",type:"submit",isLoading:i,children:"Add Customer"})]})]})]})]})})},dwe=({isOpen:r,onClose:t,onUpdate:e,customer:n})=>{const{theme:a}=zr(),i=a==="dark",[s,o]=ie.useState(!1),[l,c]=ie.useState({name:"",email:"",phone:"",alternatePhone:"",addressStreet:"",addressCity:"",addressState:"",addressPostalCode:"",addressCountry:"",creditLimit:0,currentBalance:0,customerType:"regular",gstNumber:"",date_of_birth:"",company_id:""});if(ie.useEffect(()=>{if(console.log(" UpdateCustomerModal received customer:",n),n){const h={name:n.name,email:n.email||"",phone:n.phone||"",alternatePhone:n.alternatePhone||"",addressStreet:n.addressStreet||"",addressCity:n.addressCity||"",addressState:n.addressState||"",addressPostalCode:n.addressPostalCode||"",addressCountry:n.addressCountry||"",creditLimit:n.creditLimit,currentBalance:n.currentBalance,customerType:n.customerType,gstNumber:n.gstNumber||"",date_of_birth:n.date_of_birth||"",company_id:n.company_id||""};console.log(" Setting form data:",h),c(h)}},[n]),!r)return null;const u=async h=>{h.preventDefault(),o(!0);try{await e(n.id,l),t()}finally{o(!1)}},f=h=>{const{name:p,value:g}=h.target;c(p==="creditLimit"?y=>({...y,[p]:parseFloat(g)||0}):p==="dateOfBirth"?y=>({...y,[p]:g||null}):y=>({...y,[p]:g}))};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-md transform rounded-lg ${i?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Update Customer"}),d.jsx("button",{onClick:t,className:`rounded-full p-1 hover:bg-gray-100 ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:u,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Customer Name"}),d.jsx("input",{type:"text",name:"name",value:l.name,onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Customer Type"}),d.jsxs("select",{name:"customerType",value:l.customerType,onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"regular",children:"Regular"}),d.jsx("option",{value:"creditor",children:"Creditor"}),d.jsx("option",{value:"debitor",children:"Debitor"})]})]}),l.customerType!=="regular"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Credit Limit"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"number",name:"creditLimit",value:l.creditLimit,onChange:f,min:"0",step:"0.01",required:!0,className:`w-full p-2 pl-8 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{className:"absolute left-3 top-2.5",children:""})]}),d.jsxs("p",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[d.jsx(Wn,{className:"w-4 h-4 mr-1"}),l.customerType==="creditor"?"Maximum amount this customer can be credited":"Maximum amount this customer can owe"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:l.email||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),d.jsx("input",{type:"tel",name:"phone",value:l.phone||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date of Birth"}),d.jsx("input",{type:"date",name:"date_of_birth",value:l.date_of_birth||"",onChange:f,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"GST Number"}),d.jsx("input",{type:"text",name:"gstNumber",value:l.gstNumber||"",onChange:f,placeholder:"15AABCU9603R1ZX",className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street Address"}),d.jsx("input",{type:"text",name:"addressStreet",value:l.addressStreet||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),d.jsx("input",{type:"text",name:"addressCity",value:l.addressCity||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"State"}),d.jsx("input",{type:"text",name:"addressState",value:l.addressState||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),d.jsx("input",{type:"text",name:"addressPostalCode",value:l.addressPostalCode||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),d.jsx("input",{type:"text",name:"addressCountry",value:l.addressCountry||"",onChange:f,required:!0,className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx(lt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),d.jsx(lt,{variant:"primary",type:"submit",isLoading:s,children:"Update Customer"})]})]})]})]})})};class yv{static isSchemaCacheError(t){if(!t)return!1;const e=(t.message||t.toString()).toLowerCase();return e.includes("schema cache")||e.includes("column")||e.includes("company_id")||e.includes("could not find")||e.includes("does not exist")||e.includes("unknown column")||e.includes("missing column")}static async refreshSchemaCache(){try{console.log("Attempting to refresh schema cache...");const{error:t}=await De.rpc("pg_catalog_refresh");if(!t)return console.log("Schema cache refreshed successfully via RPC"),!0;console.warn("RPC method failed, trying alternative approach...");const{error:e}=await De.from("information_schema.columns").select("column_name").limit(1);if(!e)return console.log("Schema cache refreshed successfully via query"),!0;console.warn("Query method failed, trying SQL execution...");const{error:n}=await De.rpc("execute_sql",{sql_query:`
          SELECT 1;
        `});return n?(console.error("All schema refresh methods failed:",{rpcError:t==null?void 0:t.message,queryError:e==null?void 0:e.message,sqlError:n==null?void 0:n.message}),!1):(console.log("Schema cache refreshed successfully via SQL"),!0)}catch(t){return console.error("Error during schema cache refresh:",t),!1}}static async handleSchemaError(t,e=3){let n=null;for(let a=1;a<=e;a++)try{return console.log(`Attempt ${a}/${e} to execute operation`),await t()}catch(i){if(n=i,console.error(`Attempt ${a} failed:`,i),this.isSchemaCacheError(i))if(console.log("Schema cache error detected, attempting to refresh..."),await this.refreshSchemaCache()){console.log("Schema cache refresh successful, retrying operation..."),await new Promise(o=>setTimeout(o,1e3));continue}else console.warn("Schema cache refresh failed, continuing with retry...");if(a<e){const s=Math.min(1e3*Math.pow(2,a),5e3);console.log(`Waiting ${s}ms before retry...`),await new Promise(o=>setTimeout(o,s))}}throw n}}function fwe(){const{selectedCompany:r}=ln(),[t,e]=ie.useState([]),[n,a]=ie.useState(!0),[i,s]=ie.useState(null);ie.useEffect(()=>{o()},[r]);const o=async()=>{try{const{data:{session:f},error:h}=await De.auth.getSession();if(h)throw console.error("Authentication error:",h),new Error("Authentication failed");if(!f)throw console.error("No active session"),new Error("No active session");if(!r){console.log("No company selected, clearing customers"),e([]),a(!1);return}console.log("Fetching customers for company:",r.id),await yv.handleSchemaError(async()=>{console.log("Using direct REST API approach to avoid schema cache issues");try{const p="https://pdxyqlxbucoghoetyzmv.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc",y=(f==null?void 0:f.access_token)||g,m=`${p}/rest/v1/customers?order=created_at.desc`;console.log("Fetching all customers via REST API (will filter by company_id client-side if needed):",m);const v=await fetch(m,{method:"GET",headers:{"Content-Type":"application/json",apikey:g,Authorization:`Bearer ${y}`}});if(!v.ok){const _=await v.text();console.error("REST API error response:",_);let I=`Failed to fetch customers: ${v.status} ${v.statusText}`;try{const A=JSON.parse(_);(A.message||A.error)&&(I=`Database error: ${A.message||A.error}`,(I.includes("schema cache")||I.includes("column")||I.includes("company_id"))&&(console.error("Schema cache issue detected in REST API response"),I="Database schema issue detected. Please try again later or contact support.")),console.error("REST API error details:",A)}catch{console.error("REST API error (raw):",_),(_.includes("schema cache")||_.includes("column")||_.includes("company_id"))&&(console.error("Schema cache issue detected in REST API response"),I="Database schema issue detected. Please try again later or contact support.")}throw new Error(I)}const b=await v.json();console.log("Fetched all customers with REST API:",(b==null?void 0:b.length)||0);const S=b.filter(_=>_.company_id===r.id).map(_=>{console.log("Raw customer data from database:",_);const I={id:_.id,name:_.name,email:_.email,phone:_.phone,alternatePhone:_.alternate_phone||null,addressStreet:_.address_street||null,addressCity:_.address_city||null,addressState:_.address_state||null,addressPostalCode:_.address_postal_code||null,addressCountry:_.address_country||null,creditLimit:_.credit_limit||0,currentBalance:_.current_balance||0,customerType:_.customer_type||"regular",gstNumber:_.gst_number||null,date_of_birth:_.date_of_birth||null,createdAt:_.created_at||null,updatedAt:_.updated_at||null,company_id:_.company_id||null};return console.log("Transformed customer data:",I),I});console.log("Filtered customers for company_id:",r.id,"Count:",S.length),e(S||[])}catch(p){throw console.error("Error in REST API approach:",p),p}})}catch(f){console.error("Error in fetchCustomers:",f);const h=f instanceof Error?f.message:"Failed to fetch customers";s(new Error(h)),Ce.error(h)}finally{a(!1)}};return{customers:t,loading:n,error:i,addCustomer:async f=>{try{const{data:{session:h},error:p}=await De.auth.getSession();if(p)throw console.error("Authentication error:",p),new Error("Authentication failed: Please log in again");if(!h)throw console.error("No active session"),new Error("No active session: Please log in");if(!r)throw console.error("No company selected"),new Error("Please select a company first");const g=f,m=[{name:"name",value:f.name},{name:"email",value:f.email},{name:"phone",value:f.phone},{name:"addressStreet",value:g.addressStreet},{name:"addressCity",value:g.addressCity},{name:"addressState",value:g.addressState},{name:"addressPostalCode",value:g.addressPostalCode},{name:"addressCountry",value:g.addressCountry}].filter(b=>!b.value).map(b=>b.name);if(m.length>0)throw new Error(`Missing required fields: ${m.join(", ")}`);const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(f.email&&!v.test(f.email))throw new Error("Invalid email format");if(f.phone&&f.phone.length<10)throw new Error("Phone number must be at least 10 digits");return await yv.handleSchemaError(async()=>{const b={name:g.name||f.name,email:g.email||f.email,phone:g.phone||f.phone,company_id:r.id,current_balance:g.currentBalance||f.currentBalance||0,credit_limit:g.creditLimit||f.creditLimit||0,customer_type:g.customerType||f.customerType||"regular",gst_number:g.gstNumber||f.gst_number||null,alternate_phone:g.alternatePhone||f.alternate_phone||null,address_street:g.addressStreet||f.addressStreet||"",address_city:g.addressCity||f.address_city||"",address_state:g.addressState||f.address_state||"",address_postal_code:g.addressPostalCode||f.address_postal_code||"",address_country:g.addressCountry||f.address_country||"",date_of_birth:g.date_of_birth||f.date_of_birth||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Adding customer with data:",b),console.log("Using direct REST API approach to avoid schema cache issues");const x="https://pdxyqlxbucoghoetyzmv.supabase.co",S="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc",{data:{session:_}}=await De.auth.getSession(),I=(_==null?void 0:_.access_token)||S,A={name:b.name,email:b.email,phone:b.phone,alternate_phone:b.alternate_phone,gst_number:b.gst_number,customer_type:b.customer_type,credit_limit:b.credit_limit,current_balance:b.current_balance,address_street:b.address_street,address_city:b.address_city,address_state:b.address_state,address_postal_code:b.address_postal_code,address_country:b.address_country,company_id:r.id,date_of_birth:b.date_of_birth,created_at:b.created_at,updated_at:b.updated_at};console.log("Sending customer data to REST API:",A);const O=await fetch(`${x}/rest/v1/customers`,{method:"POST",headers:{"Content-Type":"application/json",apikey:S,Authorization:`Bearer ${I}`,Prefer:"return=representation"},body:JSON.stringify(A)});if(!O.ok){const D=await O.text();let T="Failed to create customer via REST API";try{const R=JSON.parse(D);if(T=R.message||R.error||T,console.error("REST API error details:",R),T.includes("customers_email_key")||T.includes("duplicate key"))throw new Error("This email address is already in use by another customer. Please use a different email.")}catch{if(console.error("REST API error (raw):",D),D.includes("customers_email_key")||D.includes("duplicate key"))throw new Error("This email address is already in use by another customer. Please use a different email.")}throw new Error(`Database error: ${T}`)}const M=await O.json();if(console.log("Customer created successfully via REST API:",M),!M||!Array.isArray(M)||M.length===0)throw console.error("Invalid response format:",M),new Error("Invalid response from server");const z=M[0],U={id:z.id,name:z.name,email:z.email,phone:z.phone,alternatePhone:z.alternate_phone||null,addressStreet:z.address_street||null,addressCity:z.address_city||null,addressState:z.address_state||null,addressPostalCode:z.address_postal_code||null,addressCountry:z.address_country||null,creditLimit:z.credit_limit||0,currentBalance:z.current_balance||0,customerType:z.customer_type||"regular",gstNumber:z.gst_number||null,date_of_birth:z.date_of_birth||null,createdAt:z.created_at||null,updatedAt:z.updated_at||null,company_id:z.company_id||null};e(D=>[U,...D]);try{const{triggerEventMessage:D}=await yo(async()=>{const{triggerEventMessage:T}=await Promise.resolve().then(()=>rp);return{triggerEventMessage:T}},void 0);U.phone&&D("customer_created",{customer_id:U.id,phone:U.phone,name:U.name},r.id).catch(T=>{console.error("Failed to send WhatsApp notification for new customer:",T)})}catch(D){console.error("Error importing or triggering WhatsApp event:",D)}return U.id})}catch(h){throw console.error("Error in addCustomer:",h),h}},updateCustomer:async(f,h)=>{try{const{data:{session:p},error:g}=await De.auth.getSession();if(g)throw console.error("Authentication error:",g),new Error("Authentication failed");if(!p)throw console.error("No active session"),new Error("No active session");await yv.handleSchemaError(async()=>{console.log("Using direct REST API approach to update customer");try{const y="https://pdxyqlxbucoghoetyzmv.supabase.co",m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc",v=(p==null?void 0:p.access_token)||m,b={};h.name!==void 0&&(b.name=h.name),h.email!==void 0&&(b.email=h.email),h.phone!==void 0&&(b.phone=h.phone),h.alternatePhone!==void 0&&(b.alternate_phone=h.alternatePhone),h.gstNumber!==void 0&&(b.gst_number=h.gstNumber),h.customerType!==void 0&&(b.customer_type=h.customerType),h.creditLimit!==void 0&&(b.credit_limit=h.creditLimit),h.currentBalance!==void 0&&(b.current_balance=h.currentBalance),h.addressStreet!==void 0&&(b.address_street=h.addressStreet),h.addressCity!==void 0&&(b.address_city=h.addressCity),h.addressState!==void 0&&(b.address_state=h.addressState),h.addressPostalCode!==void 0&&(b.address_postal_code=h.addressPostalCode),h.addressCountry!==void 0&&(b.address_country=h.addressCountry),h.date_of_birth!==void 0&&(b.date_of_birth=h.date_of_birth),h.company_id!==void 0&&(b.company_id=h.company_id),b.updated_at=new Date().toISOString();const x=await fetch(`${y}/rest/v1/customers?id=eq.${f}`,{method:"PATCH",headers:{"Content-Type":"application/json",apikey:m,Authorization:`Bearer ${v}`,Prefer:"return=representation"},body:JSON.stringify(b)});if(!x.ok){const A=await x.text();console.error("REST API error response:",A);let O=`Failed to update customer: ${x.status} ${x.statusText}`;try{const M=JSON.parse(A);(M.message||M.error)&&(O=`Database error: ${M.message||M.error}`,O.includes("customers_email_key")||O.includes("duplicate key")?(console.error("Duplicate email detected"),O="This email address is already in use by another customer. Please use a different email."):(O.includes("schema cache")||O.includes("column")||O.includes("company_id"))&&(console.error("Schema cache issue detected in REST API response"),O="Database schema issue detected. Please try again later or contact support.")),console.error("REST API error details:",M)}catch{console.error("REST API error (raw):",A),(A.includes("schema cache")||A.includes("column")||A.includes("company_id"))&&(console.error("Schema cache issue detected in REST API response"),O="Database schema issue detected. Please try again later or contact support.")}throw new Error(O)}const S=await x.json();if(console.log("Customer updated successfully via REST API"),!S||!Array.isArray(S)||S.length===0)throw new Error("Invalid response from server");const _=S[0],I={id:_.id,name:_.name,email:_.email,phone:_.phone,alternatePhone:_.alternate_phone||null,addressStreet:_.address_street||null,addressCity:_.address_city||null,addressState:_.address_state||null,addressPostalCode:_.address_postal_code||null,addressCountry:_.address_country||null,creditLimit:_.credit_limit||0,currentBalance:_.current_balance||0,customerType:_.customer_type||"regular",gstNumber:_.gst_number||null,date_of_birth:_.date_of_birth||null,createdAt:_.created_at||null,updatedAt:_.updated_at||null,company_id:_.company_id||null};e(A=>A.map(O=>O.id===f?I:O)),Ce.success("Customer updated successfully")}catch(y){throw console.error("Error in REST API approach:",y),y}})}catch(p){console.error("Error in updateCustomer:",p);const g=p instanceof Error?p.message:"Failed to update customer";throw Ce.error(g),p}},deleteCustomer:async f=>{try{const{data:{session:h},error:p}=await De.auth.getSession();if(p)throw console.error("Authentication error:",p),new Error("Authentication failed");if(!h)throw console.error("No active session"),new Error("No active session");await yv.handleSchemaError(async()=>{console.log("Using direct REST API approach to delete customer");try{const g="https://pdxyqlxbucoghoetyzmv.supabase.co",y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc",m=(h==null?void 0:h.access_token)||y,v=await fetch(`${g}/rest/v1/customers?id=eq.${f}`,{method:"DELETE",headers:{"Content-Type":"application/json",apikey:y,Authorization:`Bearer ${m}`}});if(!v.ok){const b=await v.text();console.error("REST API error response:",b);let x=`Failed to delete customer: ${v.status} ${v.statusText}`;try{const S=JSON.parse(b);(S.message||S.error)&&(x=`Database error: ${S.message||S.error}`,(x.includes("schema cache")||x.includes("column")||x.includes("company_id"))&&(console.error("Schema cache issue detected in REST API response"),x="Database schema issue detected. Please try again later or contact support.")),console.error("REST API error details:",S)}catch{console.error("REST API error (raw):",b),(b.includes("schema cache")||b.includes("column")||b.includes("company_id"))&&(console.error("Schema cache issue detected in REST API response"),x="Database schema issue detected. Please try again later or contact support.")}throw new Error(x)}console.log("Customer deleted successfully via REST API"),e(b=>b.filter(x=>x.id!==f)),Ce.success("Customer deleted successfully")}catch(g){throw console.error("Error in REST API approach:",g),g}})}catch(h){console.error("Error in deleteCustomer:",h);const p=h instanceof Error?h.message:"Failed to delete customer";throw Ce.error(p),h}},refresh:o}}const hwe=()=>{const{theme:r}=zr(),{selectedCompany:t}=ln(),e=r==="dark",[n,a]=ie.useState(""),[i,s]=ie.useState(!1),[o,l]=ie.useState(!1),[c,u]=ie.useState(null),{customers:f,loading:h,error:p,addCustomer:g,updateCustomer:y,deleteCustomer:m}=fwe(),v=async A=>{if(window.confirm("Are you sure you want to delete this customer?"))try{await m(A)}catch(O){console.error("Delete customer error:",O)}},b=async A=>{try{await g(A),s(!1)}catch(O){console.error("Add customer error:",O);const M=O instanceof Error?O.message:"Failed to add customer";Ce.error(M)}},x=async(A,O)=>{try{await y(A,O),l(!1),u(null)}catch(M){throw console.error("Update customer error:",M),M}},S=A=>{console.log(" Opening update modal with customer data:",A),u(A),l(!0)},I=f.map(A=>({id:A.id,name:A.name,email:A.email,phone:A.phone,alternatePhone:A.alternatePhone,addressStreet:A.addressStreet,addressCity:A.addressCity,addressState:A.addressState,addressPostalCode:A.addressPostalCode,addressCountry:A.addressCountry,creditLimit:A.creditLimit,currentBalance:A.currentBalance,customerType:A.customerType,gstNumber:A.gstNumber,date_of_birth:A.date_of_birth,createdAt:A.createdAt,updatedAt:A.updatedAt,company_id:A.company_id})).filter(A=>{var O,M,z;return A.name.toLowerCase().includes(n.toLowerCase())||(((O=A.email)==null?void 0:O.toLowerCase())||"").includes(n.toLowerCase())||(((M=A.phone)==null?void 0:M.toLowerCase())||"").includes(n.toLowerCase())||(((z=A.gstNumber)==null?void 0:z.toLowerCase())||"").includes(n.toLowerCase())}).map(A=>({id:A.id,name:A.name,email:A.email,phone:A.phone,alternatePhone:A.alternatePhone,addressStreet:A.addressStreet,addressCity:A.addressCity,addressState:A.addressState,addressPostalCode:A.addressPostalCode,addressCountry:A.addressCountry,creditLimit:A.creditLimit,currentBalance:A.currentBalance,customerType:A.customerType,gstNumber:A.gstNumber,date_of_birth:A.date_of_birth,createdAt:A.createdAt,updatedAt:A.updatedAt,company_id:A.company_id}));return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Customers"}),d.jsx(lt,{variant:"primary",onClick:()=>s(!0),leftIcon:d.jsx(xD,{className:"w-4 h-4"}),children:"Add Customer"})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("div",{className:"flex items-center space-x-4 mb-6",children:d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:A=>a(A.target.value),className:`w-full pl-10 pr-4 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx(nd,{className:`absolute left-3 top-2.5 w-5 h-5 ${e?"text-gray-400":"text-gray-500"}`})]})}),p?d.jsx("div",{className:"text-center py-12",children:d.jsxs("p",{className:"text-red-500",children:["Error loading customers: ",p.message]})}):h?d.jsx("div",{className:"space-y-4",children:[1,2,3].map(A=>d.jsxs("div",{className:`animate-pulse ${e?"bg-gray-700":"bg-gray-100"} p-4 rounded-md`,children:[d.jsx("div",{className:"h-6 bg-gray-400 rounded w-1/4 mb-4"}),d.jsx("div",{className:"h-4 bg-gray-400 rounded w-1/2"})]},A))}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:`text-left ${e?"text-gray-300":"text-gray-600"}`,children:[d.jsx("th",{className:"pb-4",children:"Name"}),d.jsx("th",{className:"pb-4",children:"Contact"}),d.jsx("th",{className:"pb-4",children:"GST Number"}),d.jsx("th",{className:"pb-4",children:"Address"}),d.jsx("th",{className:"pb-4",children:"Actions"})]})}),d.jsx("tbody",{className:e?"text-gray-300":"text-gray-800",children:I.map(A=>d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"py-4",children:A.name}),d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ep,{className:"w-4 h-4 mr-2"}),A.email]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(jx,{className:"w-4 h-4 mr-2"}),A.phone]})]})}),d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(tc,{className:"w-4 h-4 mr-2"}),A.gstNumber||"Not provided"]})}),d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(gN,{className:"w-4 h-4 mr-2 mt-1"}),d.jsxs("div",{children:[d.jsx("p",{children:A.addressStreet}),d.jsxs("p",{className:"text-sm text-gray-500",children:[A.addressCity,", ",A.addressState," ",A.addressPostalCode]})]})]})}),d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>S(A),children:"Edit"}),A.phone&&d.jsx(Tx,{phoneNumber:A.phone,messageType:"feedback_request",companyId:(t==null?void 0:t.id)||"",customerId:A.id,variant:"secondary",size:"sm",iconOnly:!0}),d.jsx(lt,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>v(A.id),children:d.jsx(Xu,{className:"w-4 h-4"})})]})})]},A.id))})]})})]}),d.jsx(uwe,{isOpen:i,onClose:()=>s(!1),onAdd:b}),c&&d.jsx(dwe,{isOpen:o,onClose:()=>{l(!1),u(null)},onUpdate:x,customer:c})]})},pwe=async()=>{try{if(!navigator.onLine)return{success:!1,message:"Device is offline. Please check your internet connection."};if("connection"in navigator){const t=navigator.connection;if(t){const e=t.effectiveType,n=t.downlink;if(e==="slow-2g"||n&&n<.5)return{success:!0,message:"Slow network connection detected. Reports may take longer to load.",warning:!0}}}return{success:!0,message:"Network connection is good."}}catch(r){return{success:!1,message:"Unable to determine network status.",error:r instanceof Error?r.message:"Unknown error"}}},QM=r=>{const t=[];return r.includes("timeout")&&(t.push("Try selecting a smaller date range (e.g., 7 days instead of 30 days)"),t.push("Check your internet connection speed"),t.push("Try again during off-peak hours")),(r.includes("Network")||r.includes("Failed to fetch"))&&(t.push("Check if you have a stable internet connection"),t.push("Try refreshing the page"),t.push("Disable any ad blockers or VPN services temporarily"),t.push("Clear your browser cache and cookies")),t.length===0&&(t.push("Check your internet connection"),t.push("Try refreshing the page"),t.push("Contact support if the issue persists")),t},mwe=()=>{const{theme:r}=zr(),t=r==="dark",{selectedCompany:e}=ln(),[,n]=ie.useState(!0),[a,i]=ie.useState(null),[s,o]=ie.useState({totalSales:0,totalOrders:0,averageOrderValue:0,totalCustomers:0}),[l,c]=ie.useState({totalPurchases:0,totalItems:0,averagePurchaseValue:0,monthlyGrowth:0}),[u,f]=ie.useState([]),[h,p]=ie.useState([]),[g,y]=ie.useState("both"),[m,v]=ie.useState("date"),[b,x]=ie.useState("date"),[S,_]=ie.useState([]),[I,A]=ie.useState("30d"),[O,M]=ie.useState(qt(dl(new Date,30),"yyyy-MM-dd")),[z,U]=ie.useState(qt(new Date,"yyyy-MM-dd")),[D,T]=ie.useState([]),[R,C]=ie.useState([]),[N,E]=ie.useState([]),[k,P]=ie.useState([]);ie.useEffect(()=>{q()},[I,O,z,e]);const q=async(Z=0)=>{n(!0),i(null);try{if(!(e!=null&&e.id)){i("Please select a company first"),n(!1);return}const ee=await pwe();if(!ee.success)throw new Error(ee.message);let B,F=hf(new Date);if(I==="custom"){if(!O||!z){i("Please select both start and end dates"),n(!1);return}B=zc(Cp(O)),F=hf(Cp(z))}else B=zc(dl(new Date,I==="7d"?7:I==="30d"?30:90));const X=B.toISOString(),te=F.toISOString();if(console.log("Fetching report data with parameters:",{company_id:e.id,start_date:X,end_date:te}),!e.id||typeof e.id!="string")throw new Error("Invalid company ID");const se=De.rpc("get_report_data",{company_id_param:e.id,start_date_param:X,end_date_param:te}),ce=new Promise((Ee,We)=>{setTimeout(()=>We(new Error("Request timeout - the server is taking too long to respond. This might be due to a large dataset or network issues.")),3e4)}),{data:ue,error:oe}=await Promise.race([se,ce]);if(oe){if(console.error("RPC Error:",oe),oe.message){if(oe.message.includes("operator does not exist: text = uuid"))throw new Error("Database type mismatch error. Please contact system administrator to apply database fixes.");if(oe.message.includes("NetworkError")||oe.message.includes("Failed to fetch")||oe.message.includes("network"))if(Z<2){console.log(`Network error, retrying... (${Z+1}/2)`),setTimeout(()=>q(Z+1),2e3);return}else throw new Error("Network error. Please check your connection and try again. If the problem persists, the dataset might be too large.")}throw new Error(`Database error: ${oe.message||"Unknown database error"}`)}if(ue&&ue.error)throw console.error("Function Error:",ue.error,ue.error_code),new Error(`Database function error: ${ue.error} (Code: ${ue.error_code})`);if(!ue)throw new Error("No data returned from report function");console.log("Report data received:",ue);const le=Array.isArray(ue.detailedSales)?ue.detailedSales.map(Ee=>({...Ee,total:Qe(Ee.total),discount_amount:Qe(Ee.discount_amount),discount_percentage:Qe(Ee.discount_percentage),cgst:Qe(Ee.cgst),sgst:Qe(Ee.sgst),igst:Qe(Ee.igst),cess:Qe(Ee.cess)})):[],pe=Array.isArray(ue.detailedPurchases)?ue.detailedPurchases.map(Ee=>({...Ee,total:Qe(Ee.total),discount_amount:Qe(Ee.discount_amount),discount_percentage:Qe(Ee.discount_percentage),cgst:Qe(Ee.cgst),sgst:Qe(Ee.sgst),igst:Qe(Ee.igst),cess:Qe(Ee.cess)})):[],ye=Array.isArray(ue.detailedSaleItems)?ue.detailedSaleItems.map(Ee=>({...Ee,quantity:gh(Ee.quantity),price:Qe(Ee.price),total:Qe(Ee.total),discount_percentage:Qe(Ee.discount_percentage),discount_amount:Qe(Ee.discount_amount),tax_rate:Qe(Ee.tax_rate),tax_amount:Qe(Ee.tax_amount),net_amount:Qe(Ee.net_amount),calculated_gross_amount:Ee.gross_amount?Qe(Ee.gross_amount):Qe(Ee.quantity)*Qe(Ee.price),calculated_discount_amount:Ee.calculated_discount_amount?Qe(Ee.calculated_discount_amount):Qe(Ee.discount_amount),discounted_inclusive:Ee.discounted_inclusive?Qe(Ee.discounted_inclusive):void 0,taxable_value:Ee.taxable_value?Qe(Ee.taxable_value):void 0,sgst_amount:Ee.sgst_amount?Qe(Ee.sgst_amount):0,cgst_amount:Ee.cgst_amount?Qe(Ee.cgst_amount):0,igst_amount:Ee.igst_amount?Qe(Ee.igst_amount):0,cess_amount:Ee.cess_amount?Qe(Ee.cess_amount):0,calculated_tax_amount:Ee.total_taxes?Qe(Ee.total_taxes):Qe(Ee.tax_amount),cess:Ee.cess_amount?Qe(Ee.cess_amount):0})):[],be=Array.isArray(ue.detailedPurchaseItems)?ue.detailedPurchaseItems.map(Ee=>({...Ee,quantity:gh(Ee.quantity),purchase_price:Qe(Ee.purchase_price),total:Qe(Ee.total),discount_percentage:Qe(Ee.discount_percentage),discount_amount:Qe(Ee.discount_amount),tax_rate:Qe(Ee.tax_rate),tax_amount:Qe(Ee.tax_amount),net_amount:Qe(Ee.net_amount),calculated_gross_amount:Ee.gross_amount?Qe(Ee.gross_amount):Qe(Ee.quantity)*Qe(Ee.purchase_price),calculated_discount_amount:Ee.calculated_discount_amount?Qe(Ee.calculated_discount_amount):Qe(Ee.discount_amount),discounted_inclusive:Ee.discounted_inclusive?Qe(Ee.discounted_inclusive):void 0,taxable_value:Ee.taxable_value?Qe(Ee.taxable_value):void 0,sgst_amount:Ee.sgst_amount?Qe(Ee.sgst_amount):0,cgst_amount:Ee.cgst_amount?Qe(Ee.cgst_amount):0,igst_amount:Ee.igst_amount?Qe(Ee.igst_amount):0,cess_amount:Ee.cess_amount?Qe(Ee.cess_amount):0,calculated_tax_amount:Ee.total_taxes?Qe(Ee.total_taxes):Qe(Ee.tax_amount),cess:Ee.cess_amount?Qe(Ee.cess_amount):0})):[],Ie=le.reduce((Ee,We)=>Ee+Qe(We.total||0),0),Oe=le.length,Me=Oe>0?Ie/Oe:0,Re=Qe(ue.totalCustomers||0),He=pe.reduce((Ee,We)=>Ee+Qe(We.total||0),0),qe=be.reduce((Ee,We)=>Ee+gh(We.quantity||0),0),ct=qe>0?He/qe:0,ft=0;o({totalSales:Ie,totalOrders:Oe,averageOrderValue:Me,totalCustomers:Re}),c({totalPurchases:He,totalItems:qe,averagePurchaseValue:ct,monthlyGrowth:ft}),T(le),C(pe),E(ye),P(be);const St=new Map;le.forEach(Ee=>{if(!Ee.created_at)return;const We=qt(new Date(Ee.created_at),"yyyy-MM-dd"),ut=St.get(We)||{sales:0,purchases:0};St.set(We,{...ut,sales:ut.sales+Qe(Ee.total||0)})}),pe.forEach(Ee=>{if(!Ee.created_at)return;const We=qt(new Date(Ee.created_at),"yyyy-MM-dd"),ut=St.get(We)||{sales:0,purchases:0};St.set(We,{...ut,purchases:ut.purchases+Qe(Ee.total||0)})});const Rt=Array.from(St.entries()).map(([Ee,{sales:We,purchases:ut}])=>({date:Ee,fullDate:Ee,sales:We,purchases:ut,profit:We-ut})).sort((Ee,We)=>new Date(Ee.date).getTime()-new Date(We.date).getTime());f(Rt);const Ft=new Map;ye.forEach(Ee=>{if(!Ee.product_id||!Ee.product_name)return;const We=Ft.get(Ee.product_id)||{sales:0,purchases:0,name:Ee.product_name};Ft.set(Ee.product_id,{...We,sales:We.sales+Qe(Ee.total||0)})}),be.forEach(Ee=>{if(!Ee.product_id||!Ee.product_name)return;const We=Ft.get(Ee.product_id)||{sales:0,purchases:0,name:Ee.product_name};Ft.set(Ee.product_id,{...We,purchases:We.purchases+Qe(Ee.total||0)})});const ot=Array.from(Ft.entries()).map(([,{name:Ee,sales:We,purchases:ut}])=>({date:Ee,fullDate:"",sales:We,purchases:ut,profit:We-ut})).sort((Ee,We)=>We.sales-Ee.sales).slice(0,15);p(ot);const Kt=new Map;ye.forEach(Ee=>{if(!Ee.product_id)return;const We=Kt.get(Ee.product_id)||{name:Ee.product_name||"Unknown Product",quantity:0,sales:0,profit:0};Kt.set(Ee.product_id,{name:We.name,quantity:We.quantity+gh(Ee.quantity||0),sales:We.sales+Qe(Ee.total||0),profit:We.profit+(Qe(Ee.net_amount||0)-gh(Ee.quantity||0)*Qe(Ee.price||0))})});const Pt=Array.from(Kt.entries()).map(([,Ee])=>({name:Ee.name,total_quantity:Ee.quantity,total_sales:Ee.sales,profit:Ee.profit})).sort((Ee,We)=>We.profit-Ee.profit).slice(0,10);_(Pt)}catch(ee){if(console.error("Error fetching report data:",ee),ee instanceof Error){if(ee.message.includes("timeout")){const B=QM(ee.message);i("Request timeout - the server is taking too long to respond.\\n\\nSuggestions:\\n"+B.join("\\n"))}else if(ee.message.includes("Network")){const B=QM(ee.message);i("Network error. Please check your internet connection and try again.\\n\\nSuggestions:\\n"+B.join("\\n"))}else i(`Failed to load report data: ${ee.message}`);Ce.error(ee.message)}else i("An unexpected error occurred while fetching report data"),Ce.error("An unexpected error occurred while fetching report data")}finally{n(!1)}},H=async()=>{try{try{const{triggerEventMessage:X}=await yo(async()=>{const{triggerEventMessage:te}=await Promise.resolve().then(()=>rp);return{triggerEventMessage:te}},void 0);if(e!=null&&e.id){const te=new Date,se=te.toLocaleDateString("en-US",{month:"long",year:"numeric"});X("monthly_sales_summary",{month:te.toISOString(),total_sales:s.totalSales,total_transactions:s.totalOrders,top_product:S.length>0?S[0].name:"N/A",recipient_phone:""},e.id).catch(ce=>{console.error("Failed to send WhatsApp notification for monthly sales summary:",ce)})}}catch(X){console.error("Error importing or triggering WhatsApp event for monthly sales summary:",X)}const Z=Aa.book_new();if(g!=="purchases"){const X=[["Sales Summary"],["Metric","Value"],["Total Sales",K(s.totalSales)],["Total Orders",s.totalOrders],["Average Order Value",K(s.averageOrderValue)],["Total Customers",s.totalCustomers]],te=Aa.aoa_to_sheet(X);Aa.book_append_sheet(Z,te,"Sales Summary")}if(g!=="sales"){const X=[["Purchase Summary"],["Metric","Value"],["Total Purchases",l.totalPurchases],["Total Items",l.totalItems],["Average Purchase Value",K(l.averagePurchaseValue)],["Monthly Growth",`${l.monthlyGrowth.toFixed(2)}%`]],te=Aa.aoa_to_sheet(X);Aa.book_append_sheet(Z,te,"Purchase Summary");const ce=[["ID","Date","Item Name","Qty","Rate","Gross Amount","Discount %","Discount Amt","Discounted Incl","Taxable Value","SGST","CGST","IGST","CESS","Total Taxes","Net Amount"]];k.forEach(oe=>{const le=R.find(Re=>Re.id===oe.purchase_id),pe=le?qt(new Date(le.created_at),"dd/MM/yyyy"):"N/A",ye=oe.sgst_amount||0,be=oe.cgst_amount||0,Ie=oe.igst_amount||0,Oe=oe.cess_amount||0,Me=ye+be+Ie+Oe;ce.push([(oe.purchase_id||"").substring(0,8),pe,oe.product_name||"Unknown Product",(oe.quantity||0).toString(),K(oe.purchase_price||0),K(oe.calculated_gross_amount||oe.quantity*oe.purchase_price),(oe.discount_percentage||0).toFixed(2)+"%",K(oe.calculated_discount_amount||oe.discount_amount||0),K(oe.discounted_inclusive||oe.total),K(oe.taxable_value||0),K(ye),K(be),K(Ie),K(Oe),K(Me),K(oe.net_amount||0)])});const ue=Aa.aoa_to_sheet(ce);Aa.book_append_sheet(Z,ue,"Detailed Purchase Items")}const V=["Date"];g!=="purchases"&&V.push("Sales"),g!=="sales"&&V.push("Purchases"),g==="both"&&V.push("Profit");const ee=[V];u.forEach(X=>{const te=[X.date];g!=="purchases"&&te.push(K(X.sales)),g!=="sales"&&te.push(K(X.purchases)),g==="both"&&te.push(K(X.profit)),ee.push(te)});const B=Aa.aoa_to_sheet(ee);if(Aa.book_append_sheet(Z,B,"Daily Data"),g!=="purchases"){const X=[["Top Products by Profit"],["Product Name","Units Sold","Total Sales","Profit"]];S.forEach(oe=>{X.push([oe.name,(oe.total_quantity||0).toString(),K(oe.total_sales),K(oe.profit)])});const te=Aa.aoa_to_sheet(X);Aa.book_append_sheet(Z,te,"Top Products");const ce=[["Invoice No","Date","Item Name","Qty","Rate","Gross Amount","Discount %","Discount Amt","Discounted Incl","Taxable Value","GST Tax","CESS","GST + CESS","Net Amount"]];N.forEach(oe=>{const le=D.find(qe=>qe.id===oe.sale_id),pe=(le==null?void 0:le.invoice_number)||"N/A";let ye="N/A";if(le&&le.created_at)try{const qe=new Date(le.created_at);isNaN(qe.getTime())||(ye=qt(qe,"dd/MM/yyyy"))}catch(qe){console.warn("Error formatting sale date:",le.created_at,qe),ye="Invalid Date"}const be=oe.sgst_amount||0,Ie=oe.cgst_amount||0,Oe=oe.igst_amount||0,Me=be+Ie+Oe,Re=oe.cess_amount||0,He=Me+Re;ce.push([pe,ye,oe.product_name||"Unknown Product",String(oe.quantity||0),K(oe.price||0),K(oe.calculated_gross_amount||oe.quantity*oe.price),(oe.discount_percentage||0).toFixed(2)+"%",K(oe.calculated_discount_amount||oe.discount_amount||0),K(oe.discounted_inclusive||oe.total),K(oe.taxable_value||0),K(Me),K(Re),K(He),K(oe.net_amount||0)])});const ue=Aa.aoa_to_sheet(ce);Aa.book_append_sheet(Z,ue,"Detailed Sales Items")}const F=`${g==="sales"?"sales":g==="purchases"?"purchases":"sales-purchases"}-report-${qt(new Date,"yyyy-MM-dd")}.xlsx`;N2(Z,F),Ce.success("Excel report generated successfully");try{const{triggerEventMessage:X}=await yo(async()=>{const{triggerEventMessage:te}=await Promise.resolve().then(()=>rp);return{triggerEventMessage:te}},void 0);if(e!=null&&e.id){const te=new Date,se=te.toLocaleDateString("en-US",{month:"long",year:"numeric"});X("monthly_sales_summary",{month:te.toISOString(),total_sales:s.totalSales,total_transactions:s.totalOrders,top_product:S.length>0?S[0].name:"N/A",recipient_phone:""},e.id).catch(ce=>{console.error("Failed to send WhatsApp notification for monthly sales summary:",ce)})}}catch(X){console.error("Error importing or triggering WhatsApp event for monthly sales summary:",X)}}catch(Z){console.error("Error generating Excel:",Z),Ce.error("Failed to generate Excel report")}},L=async()=>{try{const Z=new Fr,V=Z.internal.pageSize.width;let ee=20;if(Z.setFontSize(20),Z.text(`${g==="sales"?"Sales":g==="purchases"?"Purchase":"Sales & Purchase"} Report`,V/2,ee,{align:"center"}),ee+=15,Z.setFontSize(12),Z.text(`Report Period: ${O} to ${z}`,V/2,ee,{align:"center"}),ee+=20,g!=="purchases"){Z.setFontSize(16),Z.text("Sales Summary",14,ee),ee+=10;const te=[["Metric","Value"],["Total Sales",Y(s.totalSales)],["Total Orders",String(s.totalOrders||0)],["Average Order Value",Y(s.averageOrderValue)],["Total Customers",String(s.totalCustomers||0)]];te.push(["TOTAL",""]),Ic(Z,{startY:ee,head:[["Metric","Value"]],body:te.slice(1),theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(se){se.row.index===te.length-2&&se.cell.section==="body"&&(se.cell.styles={...se.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}}),ee=Z.lastAutoTable.finalY+20}if(g!=="sales"){Z.setFontSize(16),Z.text("Purchase Summary",14,ee),ee+=10;const te=[["Metric","Value"],["Total Purchases",String(l.totalPurchases||0)],["Total Items",String(l.totalItems||0)],["Average Purchase Value",Y(l.averagePurchaseValue)],["Monthly Growth",`${l.monthlyGrowth.toFixed(2)}%`]];te.push(["TOTAL",""]),Ic(Z,{startY:ee,head:[["Metric","Value"]],body:te.slice(1),theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(ue){ue.row.index===te.length-2&&ue.cell.section==="body"&&(ue.cell.styles={...ue.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}}),ee=Z.lastAutoTable.finalY+20,Z.addPage(),ee=20,Z.setFontSize(16),Z.text("Detailed Purchase Items",14,ee),ee+=10;const se=["Invoice No","Date","Item Name","Qty","Rate","Gross Amount","Discount %","Discount Amt","Discounted Incl","Taxable Value","GST Tax","CESS","GST + CESS","Net Amount"],ce=k.map(ue=>{const oe=R.find(Re=>Re.id===ue.purchase_id);let le="N/A";if(oe&&oe.created_at)try{const Re=new Date(oe.created_at);isNaN(Re.getTime())||(le=qt(Re,"dd/MM/yyyy"))}catch(Re){console.warn("Error formatting purchase date:",oe.created_at,Re),le="Invalid Date"}const pe=ue.sgst_amount||0,ye=ue.cgst_amount||0,be=ue.igst_amount||0,Ie=pe+ye+be,Oe=ue.cess_amount||0,Me=Ie+Oe;return[(oe==null?void 0:oe.invoice_number)||ue.purchase_id.substring(0,8),le,ue.product_name||"Unknown Product",String(ue.quantity||0),Y(ue.purchase_price||0),Y(ue.calculated_gross_amount||ue.quantity*ue.purchase_price),(ue.discount_percentage||0).toFixed(2)+"%",Y(ue.calculated_discount_amount||ue.discount_amount||0),Y(ue.discounted_inclusive||ue.total),Y(ue.taxable_value||0),Y(Ie),Y(Oe),Y(Me),Y(ue.net_amount||0)]});if(k.length>0){const ue=k.reduce((ct,ft)=>ct+(ft.quantity||0),0),oe=k.reduce((ct,ft)=>ct+(ft.calculated_gross_amount||ft.quantity*ft.purchase_price||0),0),le=k.reduce((ct,ft)=>ct+(ft.calculated_discount_amount||ft.discount_amount||0),0),pe=k.reduce((ct,ft)=>ct+(ft.discounted_inclusive||ft.total||0),0),ye=k.reduce((ct,ft)=>ct+(ft.taxable_value||0),0),be=k.reduce((ct,ft)=>ct+(ft.sgst_amount||0),0),Ie=k.reduce((ct,ft)=>ct+(ft.cgst_amount||0),0),Oe=k.reduce((ct,ft)=>ct+(ft.igst_amount||0),0),Me=k.reduce((ct,ft)=>ct+(ft.cess_amount||ft.cess||0),0),Re=be+Ie+Oe,He=Re+Me,qe=k.reduce((ct,ft)=>ct+(ft.net_amount||0),0);ce.push(["TOTAL","","",String(ue),Y(oe),"",Y(le),Y(pe),Y(ye),Y(Re),Y(Me),Y(He),Y(qe)])}Ic(Z,{startY:ee,head:[se],body:ce,theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(ue){k.length>0&&ue.row.index===ce.length-1&&ue.cell.section==="body"&&(ue.cell.styles={...ue.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}})}Z.setFontSize(16),Z.text(`${m==="date"?"Date-wise":m==="month"?"Month-wise":"Year-wise"} Report`,14,ee),ee+=10;const B=["Date"];g!=="purchases"&&B.push("Sales"),g!=="sales"&&B.push("Purchases"),g==="both"&&B.push("Profit");const F=u.map(te=>{const se=[te.date];return g!=="purchases"&&se.push(Y(te.sales)),g!=="sales"&&se.push(Y(te.purchases)),g==="both"&&se.push(Y(te.profit)),se});if(u.length>0){const te=u.reduce((oe,le)=>oe+(le.sales||0),0),se=u.reduce((oe,le)=>oe+(le.purchases||0),0),ce=u.reduce((oe,le)=>oe+(le.profit||0),0),ue=["TOTAL"];g!=="purchases"&&ue.push(Y(te)),g!=="sales"&&ue.push(Y(se)),g==="both"&&ue.push(Y(ce)),F.push(ue)}if(Ic(Z,{startY:ee,head:[B],body:F,theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(te){u.length>0&&te.row.index===F.length-1&&te.cell.section==="body"&&(te.cell.styles={...te.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}}),g!=="purchases"){Z.addPage(),ee=20,Z.setFontSize(16),Z.text("Top Products by Profit",14,ee),ee+=10;const te=S.map(ue=>[ue.name,ue.total_quantity.toString(),Y(ue.total_sales),Y(ue.profit)]);if(S.length>0){const ue=S.reduce((pe,ye)=>pe+(ye.total_quantity||0),0),oe=S.reduce((pe,ye)=>pe+(ye.total_sales||0),0),le=S.reduce((pe,ye)=>pe+(ye.profit||0),0);te.push(["TOTAL",ue.toString(),Y(oe),Y(le)])}Ic(Z,{startY:ee,head:[["Product Name","Units Sold","Total Sales","Profit"]],body:te,theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(ue){S.length>0&&ue.row.index===te.length-1&&ue.cell.section==="body"&&(ue.cell.styles={...ue.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}}),Z.addPage(),ee=20,Z.setFontSize(16),Z.text("Detailed Sales Items",14,ee),ee+=10;const se=["Invoice No","Date","Item Name","Qty","Rate","Gross Amount","Discount %","Discount Amt","Discounted Incl","Taxable Value","GST Tax","CESS","GST + CESS","Net Amount"],ce=N.map(ue=>{const oe=D.find(He=>He.id===ue.sale_id),le=(oe==null?void 0:oe.invoice_number)||"N/A",pe=oe?qt(new Date(oe.created_at),"dd/MM/yyyy"):"N/A",ye=ue.sgst_amount||0,be=ue.cgst_amount||0,Ie=ue.igst_amount||0,Oe=ye+be+Ie,Me=ue.cess_amount||0,Re=Oe+Me;return[le,pe,ue.product_name||"Unknown Product",(ue.quantity||0).toString(),Y(ue.price||0),Y(ue.calculated_gross_amount||ue.quantity*ue.price),(ue.discount_percentage||0).toFixed(2)+"%",Y(ue.calculated_discount_amount||ue.discount_amount||0),Y(ue.discounted_inclusive||ue.total),Y(ue.taxable_value||0),Y(Oe),Y(Me),Y(Re),Y(ue.net_amount||0)]});if(N.length>0){const ue=N.reduce((ct,ft)=>ct+(ft.quantity||0),0),oe=N.reduce((ct,ft)=>ct+(ft.calculated_gross_amount||ft.quantity*ft.price||0),0),le=N.reduce((ct,ft)=>ct+(ft.calculated_discount_amount||ft.discount_amount||0),0),pe=N.reduce((ct,ft)=>ct+(ft.discounted_inclusive||ft.total||0),0),ye=N.reduce((ct,ft)=>ct+(ft.taxable_value||0),0),be=N.reduce((ct,ft)=>ct+(ft.sgst_amount||0),0),Ie=N.reduce((ct,ft)=>ct+(ft.cgst_amount||0),0),Oe=N.reduce((ct,ft)=>ct+(ft.igst_amount||0),0),Me=N.reduce((ct,ft)=>ct+(ft.cess_amount||ft.cess||0),0),Re=be+Ie+Oe,He=Re+Me,qe=N.reduce((ct,ft)=>ct+(ft.net_amount||0),0);ce.push(["TOTAL","","",String(ue),Y(oe),"",Y(le),Y(pe),Y(ye),Y(Re),Y(Me),Y(He),Y(qe)])}Ic(Z,{startY:ee,head:[se],body:ce,theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(ue){N.length>0&&ue.row.index===ce.length-1&&ue.cell.section==="body"&&(ue.cell.styles={...ue.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}})}const X=`${g==="sales"?"sales":g==="purchases"?"purchases":"sales-purchases"}-report-${qt(new Date,"yyyy-MM-dd")}.pdf`;Z.save(X),Ce.success("PDF report generated successfully");try{const{triggerEventMessage:te}=await yo(async()=>{const{triggerEventMessage:se}=await Promise.resolve().then(()=>rp);return{triggerEventMessage:se}},void 0);if(e!=null&&e.id){const se=s.totalSales||0,ce=0,ue=se,oe=0,le=ce+ue-oe;te("daily_closing_summary",{date:new Date().toISOString(),opening_balance:ce,total_sales:se,cash_in:ue,cash_out:oe,closing_balance:le,recipient_phone:""},e.id).catch(pe=>{console.error("Failed to send WhatsApp notification for daily closing summary:",pe)})}}catch(te){console.error("Error importing or triggering WhatsApp event for daily closing summary:",te)}}catch(Z){console.error("Error generating PDF:",Z),Ce.error("Failed to generate PDF report")}},K=Z=>{if(Z==null)return"0.00";let V;return typeof Z=="number"?V=Z:V=parseFloat(String(Z))||0,`${V.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`},Y=Z=>{if(Z==null)return"Rs. 0.00";let V;typeof Z=="number"?V=Z:V=parseFloat(String(Z))||0;const B=V.toFixed(2).split("."),F=B[0],X=B[1];let te="",se=0;for(let ce=F.length-1;ce>=0;ce--)se>0&&se%3===0&&(te=","+te),te=F[ce]+te,se++;return`Rs. ${te}.${X}`};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Reports"}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(lt,{variant:I==="7d"?"primary":"secondary",size:"sm",onClick:()=>{A("7d"),M(qt(dl(new Date,7),"yyyy-MM-dd")),U(qt(new Date,"yyyy-MM-dd"))},children:"7 Days"}),d.jsx(lt,{variant:I==="30d"?"primary":"secondary",size:"sm",onClick:()=>{A("30d"),M(qt(dl(new Date,30),"yyyy-MM-dd")),U(qt(new Date,"yyyy-MM-dd"))},children:"30 Days"}),d.jsx(lt,{variant:I==="90d"?"primary":"secondary",size:"sm",onClick:()=>{A("90d"),M(qt(dl(new Date,90),"yyyy-MM-dd")),U(qt(new Date,"yyyy-MM-dd"))},children:"90 Days"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx($g,{className:"w-5 h-5"}),d.jsx("input",{type:"date",value:O,onChange:Z=>{A("custom"),M(Z.target.value)},className:`px-3 py-1 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{children:"to"}),d.jsx("input",{type:"date",value:z,onChange:Z=>{A("custom"),U(Z.target.value)},className:`px-3 py-1 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(lt,{variant:m==="date"?"primary":"secondary",size:"sm",onClick:()=>v("date"),children:"Date-wise"}),d.jsx(lt,{variant:m==="month"?"primary":"secondary",size:"sm",onClick:()=>v("month"),children:"Month-wise"}),d.jsx(lt,{variant:m==="year"?"primary":"secondary",size:"sm",onClick:()=>v("year"),children:"Year-wise"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(lt,{variant:b==="date"?"primary":"secondary",size:"sm",onClick:()=>x("date"),children:"By Date"}),d.jsx(lt,{variant:b==="product"?"primary":"secondary",size:"sm",onClick:()=>x("product"),children:"By Product"})]})]})]}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsx(lt,{variant:g==="sales"?"primary":"secondary",onClick:()=>y("sales"),children:"Sales Report"}),d.jsx(lt,{variant:g==="purchases"?"primary":"secondary",onClick:()=>y("purchases"),children:"Purchase Report"}),d.jsx(lt,{variant:g==="both"?"primary":"secondary",onClick:()=>y("both"),children:"Both"}),d.jsx(lt,{variant:"secondary",onClick:H,leftIcon:d.jsx(hD,{className:"w-4 h-4"}),children:"Export to Excel"}),d.jsx(lt,{variant:"secondary",onClick:L,leftIcon:d.jsx(pD,{className:"w-4 h-4"}),children:"Export to PDF"})]})]}),a?d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Wn,{className:"w-5 h-5 mr-2"}),d.jsx("span",{children:a})]})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g!=="purchases"&&d.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Sales"}),d.jsx("p",{className:"mt-2 text-3xl font-semibold",children:K(s.totalSales)})]}),d.jsx(Ti,{className:`w-8 h-8 ${t?"text-gray-400":"text-gray-500"}`})]})}),g!=="sales"&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Purchases"}),d.jsx("p",{className:"mt-2 text-3xl font-semibold",children:K(l.totalItems*l.averagePurchaseValue)})]}),d.jsx(Tp,{className:`w-8 h-8 ${t?"text-gray-400":"text-gray-500"}`})]}),d.jsxs("div",{className:"mt-2 flex items-center",children:[l.monthlyGrowth>0?d.jsx(Du,{className:"w-4 h-4 text-green-500 mr-1"}):d.jsx(vN,{className:"w-4 h-4 text-red-500 mr-1"}),d.jsxs("span",{className:l.monthlyGrowth>0?"text-green-500":"text-red-500",children:[Math.abs(l.monthlyGrowth).toFixed(1),"% from last month"]})]})]}),g==="both"&&d.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Net Profit"}),d.jsx("p",{className:"mt-2 text-3xl font-semibold",children:K(s.totalSales-l.totalItems*l.averagePurchaseValue)})]}),d.jsx(Du,{className:`w-8 h-8 ${t?"text-gray-400":"text-gray-500"}`})]})}),g!=="purchases"&&d.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Customers"}),d.jsx("p",{className:"mt-2 text-3xl font-semibold",children:s.totalCustomers})]}),d.jsx(wn,{className:`w-8 h-8 ${t?"text-gray-400":"text-gray-500"}`})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(g==="both"||g==="sales")&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Sales Chart"}),d.jsx(Np,{className:"w-6 h-6"})]}),d.jsx("div",{className:"h-80",children:d.jsx(Ng,{width:"100%",height:"100%",children:d.jsxs(L8,{data:b==="product"?h:u,children:[d.jsx(fp,{strokeDasharray:"3 3",strokeOpacity:.3}),d.jsx(zu,{dataKey:"date",tick:{fontSize:b==="product"?10:12},tickMargin:10,angle:b==="product"?-45:0,textAnchor:b==="product"?"end":"middle",height:b==="product"?60:40}),d.jsx(Wu,{tickFormatter:Z=>`${Z}`,tick:{fontSize:12},tickMargin:10,domain:[0,"dataMax + 1000"]}),d.jsx(po,{contentStyle:{backgroundColor:t?"#1f2937":"white",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"12px"},formatter:Z=>[`${Number(Z).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,""],labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),d.jsx($u,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"10px"}}),d.jsx(Xc,{dataKey:"sales",name:"Sales",fill:"#3b82f6",radius:[4,4,0,0],maxBarSize:30})]})})})]}),(g==="both"||g==="purchases")&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Purchases Chart"}),d.jsx(Tp,{className:"w-6 h-6"})]}),d.jsx("div",{className:"h-80",children:d.jsx(Ng,{width:"100%",height:"100%",children:d.jsxs(L8,{data:b==="product"?h:u,children:[d.jsx(fp,{strokeDasharray:"3 3",strokeOpacity:.3}),d.jsx(zu,{dataKey:"date",tick:{fontSize:b==="product"?10:12},tickMargin:10,angle:b==="product"?-45:0,textAnchor:b==="product"?"end":"middle",height:b==="product"?60:40}),d.jsx(Wu,{tickFormatter:Z=>`${Z}`,tick:{fontSize:12},tickMargin:10,domain:[0,"dataMax + 1000"]}),d.jsx(po,{contentStyle:{backgroundColor:t?"#1f2937":"white",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"12px"},formatter:Z=>[`${Number(Z).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,""],labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),d.jsx($u,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"10px"}}),d.jsx(Xc,{dataKey:"purchases",name:"Purchases",fill:"#ef4444",radius:[4,4,0,0],maxBarSize:30})]})})})]}),g==="both"&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Profit Trend"}),d.jsx(Du,{className:"w-6 h-6"})]}),d.jsx("div",{className:"h-80",children:d.jsx(Ng,{width:"100%",height:"100%",children:d.jsxs(PU,{data:b==="product"?h:u,children:[d.jsx(fp,{strokeDasharray:"3 3",strokeOpacity:.3}),d.jsx(zu,{dataKey:"date",tick:{fontSize:b==="product"?10:12},tickMargin:10,angle:b==="product"?-45:0,textAnchor:b==="product"?"end":"middle",height:b==="product"?60:40}),d.jsx(Wu,{tickFormatter:Z=>`${Z}`,tick:{fontSize:12},tickMargin:10,domain:["dataMin - 1000","dataMax + 1000"]}),d.jsx(po,{contentStyle:{backgroundColor:t?"#1f2937":"white",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"12px"},formatter:Z=>[`${Number(Z).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,""],labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),d.jsx($u,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"10px"}}),d.jsx(od,{type:"monotone",dataKey:"profit",name:"Profit",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.1}),d.jsx(d2,{type:"monotone",dataKey:"profit",name:"Profit Trend",stroke:"#16a34a",strokeWidth:2,dot:{r:3,fill:"#16a34a"},activeDot:{r:6,fill:"#16a34a"}})]})})})]})]}),g!=="purchases"&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Top Products by Profit"}),d.jsx("div",{className:"space-y-4",children:S.map((Z,V)=>d.jsxs("div",{className:`flex items-center justify-between p-4 rounded-md ${t?"bg-gray-700":"bg-gray-50"}`,children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium",children:Z.name}),d.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[Z.total_quantity," units sold"]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold",children:["Sales: ",K(Z.total_sales)]}),d.jsxs("p",{className:`text-sm ${Z.profit>=0?"text-green-500":"text-red-500"}`,children:["Profit: ",K(Z.profit)]})]})]},V))})]}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"text-lg font-semibold",children:[m==="date"?"Date-wise":m==="month"?"Month-wise":"Year-wise"," ",g==="sales"?"Sales":g==="purchases"?"Purchases":"Sales & Purchases"]}),d.jsx($g,{className:"w-5 h-5"})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:t?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left",children:m==="date"?"Date":m==="month"?"Month":"Year"}),g!=="purchases"&&d.jsx("th",{className:"px-4 py-2 text-right",children:"Sales"}),g!=="sales"&&d.jsx("th",{className:"px-4 py-2 text-right",children:"Purchases"}),g==="both"&&d.jsx("th",{className:"px-4 py-2 text-right",children:"Profit"})]})}),d.jsxs("tbody",{className:t?"bg-gray-900 text-gray-100":"bg-white text-gray-900",children:[u.length===0?d.jsx("tr",{children:d.jsx("td",{className:"px-4 py-6 text-center",colSpan:g==="both"?4:2,children:"No data"})}):Object.entries(u.reduce((Z,V)=>{const ee=new Date(V.fullDate),B=m==="date"?ee.toISOString().slice(0,10):m==="month"?`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}`:`${ee.getFullYear()}`,F=m==="date"?V.date:m==="month"?qt(ee,"MMM yyyy"):String(ee.getFullYear());return Z[B]||(Z[B]={label:F,sales:0,purchases:0,profit:0}),Z[B].sales+=V.sales,Z[B].purchases+=V.purchases,Z[B].profit+=V.profit,Z},{})).map(([,Z],V)=>d.jsxs("tr",{className:V%2===0?"":t?"bg-gray-800":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-2",children:Z.label}),g!=="purchases"&&d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.sales)}),g!=="sales"&&d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.purchases)}),g==="both"&&d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.profit)})]},V)),u.length>0&&d.jsxs("tr",{className:t?"bg-gray-700 font-semibold":"bg-gray-200 font-semibold",children:[d.jsx("td",{className:"px-4 py-2",children:"Total"}),g!=="purchases"&&d.jsx("td",{className:"px-4 py-2 text-right",children:K(u.reduce((Z,V)=>Z+V.sales,0))}),g!=="sales"&&d.jsx("td",{className:"px-4 py-2 text-right",children:K(u.reduce((Z,V)=>Z+V.purchases,0))}),g==="both"&&d.jsx("td",{className:"px-4 py-2 text-right",children:K(u.reduce((Z,V)=>Z+V.profit,0))})]})]})]})})]}),g!=="purchases"&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Detailed Sales Report"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:t?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No"}),d.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),d.jsx("th",{className:"px-4 py-2 text-left",children:"Item Name"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Qty"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Rate"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Gross Amount"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Discount %"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Discount Amt"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Discounted Incl"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Taxable Value"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"GST Tax"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"CESS"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"GST + CESS"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Net Amount"})]})}),d.jsx("tbody",{className:t?"bg-gray-900 text-gray-100":"bg-white text-gray-900",children:N.length===0?d.jsx("tr",{children:d.jsx("td",{className:"px-4 py-4 text-center",colSpan:12,children:"No sales data"})}):N.map((Z,V)=>{var ee;return d.jsxs("tr",{className:V%2===0?"":t?"bg-gray-800":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-2",children:((ee=D.find(B=>B.id===Z.sale_id))==null?void 0:ee.invoice_number)||"N/A"}),d.jsx("td",{className:"px-4 py-2",children:(()=>{const B=D.find(F=>F.id===Z.sale_id);if(B&&B.created_at)try{const F=new Date(B.created_at);if(!isNaN(F.getTime()))return qt(F,"dd/MM/yyyy")}catch(F){return console.warn("Error formatting sale date in table:",B.created_at,F),"Invalid Date"}return"N/A"})()}),d.jsx("td",{className:"px-4 py-2",children:Z.product_name}),d.jsx("td",{className:"px-4 py-2 text-right",children:Z.quantity}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.price)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.calculated_gross_amount||Z.quantity*Z.price)}),d.jsxs("td",{className:"px-4 py-2 text-right",children:[(Z.discount_percentage||0).toFixed(2),"%"]}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.calculated_discount_amount||Z.discount_amount||0)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.discounted_inclusive||Z.total)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.taxable_value||0)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K((()=>{const B=Z.sgst_amount||0,F=Z.cgst_amount||0,X=Z.igst_amount||0;return B>0&&F>0?B+F:X>0?X:B+F+X})())}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.cess_amount||Z.cess||0)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K((()=>{const B=Z.sgst_amount||0,F=Z.cgst_amount||0,X=Z.igst_amount||0,te=Z.cess_amount||Z.cess||0;return B>0&&F>0?B+F+te:X>0?X+te:B+F+X+te})())}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.net_amount)})]},`${Z.sale_id}-${Z.id}`)})}),N.length>0&&d.jsx("tfoot",{className:t?"bg-gray-700 font-semibold":"bg-gray-200 font-semibold",children:d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-2",colSpan:3,children:"Total"}),d.jsx("td",{className:"px-4 py-2 text-right",children:N.reduce((Z,V)=>Z+V.quantity,0)}),d.jsx("td",{className:"px-4 py-2 text-right"}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>Z+(V.calculated_gross_amount||V.quantity*V.price),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:(()=>{const Z=N.reduce((B,F)=>B+(F.calculated_gross_amount||F.quantity*F.price),0),V=N.reduce((B,F)=>B+(F.calculated_discount_amount||F.discount_amount||0),0);return`${(Z>0?V/Z*100:0).toFixed(2)}%`})()}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>Z+(V.calculated_discount_amount||V.discount_amount||0),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>Z+(V.discounted_inclusive||V.total),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>Z+(V.taxable_value||0),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>{const ee=V.sgst_amount||0,B=V.cgst_amount||0,F=V.igst_amount||0;return ee>0&&B>0?Z+ee+B:F>0?Z+F:Z+ee+B+F},0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>Z+(V.cess_amount||V.cess||0),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>{const ee=V.sgst_amount||0,B=V.cgst_amount||0,F=V.igst_amount||0,X=V.cess_amount||V.cess||0;return ee>0&&B>0?Z+ee+B+X:F>0?Z+F+X:Z+ee+B+F+X},0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(N.reduce((Z,V)=>Z+V.net_amount,0))})]})})]})})]}),g!=="sales"&&d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Detailed Purchase Report"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:t?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No"}),d.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),d.jsx("th",{className:"px-4 py-2 text-left",children:"Item Name"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Qty"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Rate"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Gross Amount"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Discount %"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Discount Amt"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Discounted Incl"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Taxable Value"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"GST Tax"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"CESS"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"GST + CESS"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Net Amount"})]})}),d.jsx("tbody",{className:t?"bg-gray-900 text-gray-100":"bg-white text-gray-900",children:k.length===0?d.jsx("tr",{children:d.jsx("td",{className:"px-4 py-4 text-center",colSpan:12,children:"No purchase data"})}):k.map((Z,V)=>d.jsxs("tr",{className:V%2===0?"":t?"bg-gray-800":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-2",children:(()=>{const ee=R.find(B=>B.id===Z.purchase_id);return(ee==null?void 0:ee.invoice_number)||Z.purchase_id.substring(0,8)})()}),d.jsx("td",{className:"px-4 py-2",children:(()=>{const ee=R.find(B=>B.id===Z.purchase_id);if(ee&&ee.created_at)try{const B=new Date(ee.created_at);if(!isNaN(B.getTime()))return qt(B,"dd/MM/yyyy")}catch(B){return console.warn("Error formatting purchase date in table:",ee.created_at,B),"Invalid Date"}return"N/A"})()}),d.jsx("td",{className:"px-4 py-2",children:Z.product_name}),d.jsx("td",{className:"px-4 py-2 text-right",children:Z.quantity}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.purchase_price)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.calculated_gross_amount||Z.quantity*Z.purchase_price)}),d.jsxs("td",{className:"px-4 py-2 text-right",children:[(Z.discount_percentage||0).toFixed(2),"%"]}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.calculated_discount_amount||Z.discount_amount||0)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.discounted_inclusive||Z.total)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.taxable_value||0)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K((()=>{const ee=Z.sgst_amount||0,B=Z.cgst_amount||0,F=Z.igst_amount||0;return ee>0&&B>0?ee+B:F>0?F:ee+B+F})())}),"                          ",d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.cess_amount||Z.cess||0)}),d.jsx("td",{className:"px-4 py-2 text-right",children:K((()=>{const ee=Z.sgst_amount||0,B=Z.cgst_amount||0,F=Z.igst_amount||0,X=Z.cess_amount||Z.cess||0;return ee>0&&B>0?ee+B+X:F>0?F+X:ee+B+F+X})())}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(Z.net_amount)})]},`${Z.purchase_id}-${Z.id}`))}),k.length>0&&d.jsx("tfoot",{className:t?"bg-gray-700 font-semibold":"bg-gray-200 font-semibold",children:d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-2",colSpan:3,children:"Total"}),d.jsx("td",{className:"px-4 py-2 text-right",children:k.reduce((Z,V)=>Z+V.quantity,0)}),d.jsx("td",{className:"px-4 py-2 text-right"}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>Z+(V.calculated_gross_amount||V.quantity*V.purchase_price),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:(()=>{const Z=k.reduce((B,F)=>B+(F.calculated_gross_amount||F.quantity*F.purchase_price),0),V=k.reduce((B,F)=>B+(F.calculated_discount_amount||F.discount_amount||0),0);return`${(Z>0?V/Z*100:0).toFixed(2)}%`})()}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>Z+(V.calculated_discount_amount||V.discount_amount||0),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>Z+(V.discounted_inclusive||V.total),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>Z+(V.taxable_value||0),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>{const ee=V.sgst_amount||0,B=V.cgst_amount||0,F=V.igst_amount||0;return ee>0&&B>0?Z+ee+B:F>0?Z+F:Z+ee+B+F},0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>Z+(V.cess_amount||V.cess||0),0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>{const ee=V.sgst_amount||0,B=V.cgst_amount||0,F=V.igst_amount||0,X=V.cess_amount||V.cess||0;return ee>0&&B>0?Z+ee+B+X:F>0?Z+F+X:Z+ee+B+F+X},0))}),d.jsx("td",{className:"px-4 py-2 text-right",children:K(k.reduce((Z,V)=>Z+V.net_amount,0))})]})})]})})]})]})]})};function vv(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var OS={exports:{}};/*! ExcelJS 19-10-2023 */var eR;function gwe(){return eR||(eR=1,(function(r,t){(function(e){r.exports=e()})((function(){return(function e(n,a,i){function s(c,u){if(!a[c]){if(!n[c]){var f=typeof vv=="function"&&vv;if(!u&&f)return f(c,!0);if(o)return o(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var p=a[c]={exports:{}};n[c][0].call(p.exports,(function(g){return s(n[c][1][g]||g)}),p,p.exports,e,n,a,i)}return a[c].exports}for(var o=typeof vv=="function"&&vv,l=0;l<i.length;l++)s(i[l]);return s})({1:[function(e,n,a){const i=e("fs"),s=e("fast-csv"),o=e("dayjs/plugin/customParseFormat"),l=e("dayjs/plugin/utc"),c=e("dayjs").extend(o).extend(l),u=e("../utils/stream-buf"),{fs:{exists:f}}=e("../utils/utils"),h={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};n.exports=class{constructor(p){this.workbook=p,this.worksheet=null}async readFile(p,g){if(g=g||{},!await f(p))throw new Error("File not found: "+p);const y=i.createReadStream(p),m=await this.read(y,g);return y.close(),m}read(p,g){return g=g||{},new Promise((y,m)=>{const v=this.workbook.addWorksheet(g.sheetName),b=g.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],x=g.map||function(_){if(_==="")return null;const I=Number(_);if(!Number.isNaN(I)&&I!==1/0)return I;const A=b.reduce((M,z)=>{if(M)return M;const U=c(_,z,!0);return U.isValid()?U:null},null);if(A)return new Date(A.valueOf());const O=h[_];return O!==void 0?O:_},S=s.parse(g.parserOptions).on("data",_=>{v.addRow(_.map(x))}).on("end",()=>{S.emit("worksheet",v)});S.on("worksheet",y).on("error",m),p.pipe(S)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(p,g){return new Promise((y,m)=>{g=g||{};const v=this.workbook.getWorksheet(g.sheetName||g.sheetId),b=s.format(g.formatterOptions);p.on("finish",()=>{y()}),b.on("error",m),b.pipe(p);const{dateFormat:x,dateUTC:S}=g,_=g.map||(O=>{if(O){if(O.text||O.hyperlink)return O.hyperlink||O.text||"";if(O.formula||O.result)return O.result||"";if(O instanceof Date)return x?S?c.utc(O).format(x):c(O).format(x):S?c.utc(O).format():c(O).format();if(O.error)return O.error;if(typeof O=="object")return JSON.stringify(O)}return O}),I=g.includeEmptyRows===void 0||g.includeEmptyRows;let A=1;v&&v.eachRow((O,M)=>{if(I)for(;A++<M-1;)b.write([]);const{values:z}=O;z.shift(),b.write(z.map(_)),A=M}),b.end()})}writeFile(p,g){const y={encoding:(g=g||{}).encoding||"utf8"},m=i.createWriteStream(p,y);return this.write(m,g)}async writeBuffer(p){const g=new u;return await this.write(g,p),g.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(e,n,a){const i=e("../utils/col-cache");class s{constructor(l,c){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=l,c)if(typeof c=="string"){const f=i.decodeAddress(c);this.nativeCol=f.col+u,this.nativeColOff=0,this.nativeRow=f.row+u,this.nativeRowOff=0}else c.nativeCol!==void 0?(this.nativeCol=c.nativeCol||0,this.nativeColOff=c.nativeColOff||0,this.nativeRow=c.nativeRow||0,this.nativeRowOff=c.nativeRowOff||0):c.col!==void 0?(this.col=c.col+u,this.row=c.row+u):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(l){return l instanceof s||l==null?l:new s(l)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(l){this.nativeCol=Math.floor(l),this.nativeColOff=Math.floor((l-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(l){this.nativeRow=Math.floor(l),this.nativeRowOff=Math.floor((l-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(l){this.nativeCol=l.nativeCol,this.nativeColOff=l.nativeColOff,this.nativeRow=l.nativeRow,this.nativeRowOff=l.nativeRowOff}}n.exports=s},{"../utils/col-cache":19}],3:[function(e,n,a){const i=e("../utils/col-cache"),s=e("../utils/under-dash"),o=e("./enums"),{slideFormula:l}=e("../utils/shared-formula"),c=e("./note");class u{constructor(p,g,y){if(!p||!g)throw new Error("A Cell needs a Row");this._row=p,this._column=g,i.validateAddress(y),this._address=y,this._value=f.create(u.Types.Null,this),this.style=this._mergeStyle(p.style,g.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(p){this.style.numFmt=p}get font(){return this.style.font}set font(p){this.style.font=p}get alignment(){return this.style.alignment}set alignment(p){this.style.alignment=p}get border(){return this.style.border}set border(p){this.style.border=p}get fill(){return this.style.fill}set fill(p){this.style.fill=p}get protection(){return this.style.protection}set protection(p){this.style.protection=p}_mergeStyle(p,g,y){const m=p&&p.numFmt||g&&g.numFmt;m&&(y.numFmt=m);const v=p&&p.font||g&&g.font;v&&(y.font=v);const b=p&&p.alignment||g&&g.alignment;b&&(y.alignment=b);const x=p&&p.border||g&&g.border;x&&(y.border=x);const S=p&&p.fill||g&&g.fill;S&&(y.fill=S);const _=p&&p.protection||g&&g.protection;return _&&(y.protection=_),y}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===u.Types.Merge}merge(p,g){this._value.release(),this._value=f.create(u.Types.Merge,this,p),g||(this.style=p.style)}unmerge(){this.type===u.Types.Merge&&(this._value.release(),this._value=f.create(u.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(p){return this._value.type===u.Types.Merge&&this._value.isMergedTo(p)}get master(){return this.type===u.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===u.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(p){this.type!==u.Types.Merge?(this._value.release(),this._value=f.create(f.getType(p),this,p)):this._value.master.value=p}get note(){return this._comment&&this._comment.note}set note(p){this._comment=new c(p)}get text(){return this._value.toString()}get html(){return s.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(p){this.type===u.Types.String&&(this._value=f.create(u.Types.Hyperlink,this,{text:this._value.value,hyperlink:p}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:p}=this._row;return{sheetName:p.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(p){this.names=[p]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(p){const{definedNames:g}=this.workbook;g.removeAllNames(this.fullAddress),p.forEach(y=>{g.addEx(this.fullAddress,y)})}addName(p){this.workbook.definedNames.addEx(this.fullAddress,p)}removeName(p){this.workbook.definedNames.removeEx(this.fullAddress,p)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(p){this._dataValidations.add(this.address,p)}get model(){const{model:p}=this._value;return p.style=this.style,this._comment&&(p.comment=this._comment.model),p}set model(p){if(this._value.release(),this._value=f.create(p.type,this),this._value.model=p,p.comment)switch(p.comment.type){case"note":this._comment=c.fromModel(p.comment)}p.style?this.style=p.style:this.style={}}}u.Types=o.ValueType;const f={getType:h=>h==null?u.Types.Null:h instanceof String||typeof h=="string"?u.Types.String:typeof h=="number"?u.Types.Number:typeof h=="boolean"?u.Types.Boolean:h instanceof Date?u.Types.Date:h.text&&h.hyperlink?u.Types.Hyperlink:h.formula||h.sharedFormula?u.Types.Formula:h.richText?u.Types.RichText:h.sharedString?u.Types.SharedString:h.error?u.Types.Error:u.Types.JSON,types:[{t:u.Types.Null,f:class{constructor(h){this.model={address:h.address,type:u.Types.Null}}get value(){return null}set value(h){}get type(){return u.Types.Null}get effectiveType(){return u.Types.Null}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){}toString(){return""}}},{t:u.Types.Number,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Number,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Number}get effectiveType(){return u.Types.Number}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.String,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.String,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:u.Types.Date,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Date,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Date}get effectiveType(){return u.Types.Date}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Hyperlink,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Hyperlink,text:p?p.text:void 0,hyperlink:p?p.hyperlink:void 0},p&&p.tooltip&&(this.model.tooltip=p.tooltip)}get value(){const h={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(h.tooltip=this.model.tooltip),h}set value(h){this.model={text:h.text,hyperlink:h.hyperlink},h.tooltip&&(this.model.tooltip=h.tooltip)}get text(){return this.model.text}set text(h){this.model.text=h}get hyperlink(){return this.model.hyperlink}set hyperlink(h){this.model.hyperlink=h}get type(){return u.Types.Hyperlink}get effectiveType(){return u.Types.Hyperlink}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:u.Types.Formula,f:class{constructor(h,p){this.cell=h,this.model={address:h.address,type:u.Types.Formula,shareType:p?p.shareType:void 0,ref:p?p.ref:void 0,formula:p?p.formula:void 0,sharedFormula:p?p.sharedFormula:void 0,result:p?p.result:void 0}}_copyModel(h){const p={},g=y=>{const m=h[y];m&&(p[y]=m)};return g("formula"),g("result"),g("ref"),g("shareType"),g("sharedFormula"),p}get value(){return this._copyModel(this.model)}set value(h){this.model=this._copyModel(h)}validate(h){switch(f.getType(h)){case u.Types.Null:case u.Types.String:case u.Types.Number:case u.Types.Date:break;case u.Types.Hyperlink:case u.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(h){this.model.formula=h}get formulaType(){return this.model.formula?o.FormulaType.Master:this.model.sharedFormula?o.FormulaType.Shared:o.FormulaType.None}get result(){return this.model.result}set result(h){this.model.result=h}get type(){return u.Types.Formula}get effectiveType(){const h=this.model.result;return h==null?o.ValueType.Null:h instanceof String||typeof h=="string"?o.ValueType.String:typeof h=="number"?o.ValueType.Number:h instanceof Date?o.ValueType.Date:h.text&&h.hyperlink?o.ValueType.Hyperlink:h.formula?o.ValueType.Formula:o.ValueType.Null}get address(){return this.model.address}set address(h){this.model.address=h}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:h}=this.cell,p=h.findCell(this.model.sharedFormula);this._translatedFormula=p&&l(p.formula,p.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:u.Types.Merge,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Merge,master:p?p.address:void 0},this._master=p,p&&p.addMergeRef()}get value(){return this._master.value}set value(h){h instanceof u?(this._master&&this._master.releaseMergeRef(),h.addMergeRef(),this._master=h):this._master.value=h}isMergedTo(h){return h===this._master}get master(){return this._master}get type(){return u.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:u.Types.JSON,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.String,value:JSON.stringify(p),rawValue:p}}get value(){return this.model.rawValue}set value(h){this.model.rawValue=h,this.model.value=JSON.stringify(h)}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:u.Types.SharedString,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.SharedString,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.SharedString}get effectiveType(){return u.Types.SharedString}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.RichText,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.String,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}toString(){return this.model.value.richText.map(h=>h.text).join("")}get type(){return u.Types.RichText}get effectiveType(){return u.Types.RichText}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:u.Types.Boolean,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Boolean,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Boolean}get effectiveType(){return u.Types.Boolean}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Error,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Error,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Error}get effectiveType(){return u.Types.Error}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((h,p)=>(h[p.t]=p.f,h),[]),create(h,p,g){const y=this.types[h];if(!y)throw new Error("Could not create Value of type "+h);return new y(p,g)}};n.exports=u},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(e,n,a){const i=e("../utils/under-dash"),s=e("./enums"),o=e("../utils/col-cache");class l{constructor(u,f,h){this._worksheet=u,this._number=f,h!==!1&&(this.defn=h)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return o.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(u){u?(this.key=u.key,this.width=u.width!==void 0?u.width:9,this.outlineLevel=u.outlineLevel,u.style?this.style=u.style:this.style={},this.header=u.header,this._hidden=!!u.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(u){u!==void 0?(this._header=u,this.headers.forEach((f,h)=>{this._worksheet.getCell(h+1,this.number).value=f})):this._header=void 0}get key(){return this._key}set key(u){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=u,u&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(u){this._hidden=u}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(u){this._outlineLevel=u}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(u){return this.width===u.width&&this.hidden===u.hidden&&this.outlineLevel===u.outlineLevel&&i.isEqual(this.style,u.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const u=this.style;return!u||!(u.font||u.numFmt||u.alignment||u.border||u.fill||u.protection)}get headerCount(){return this.headers.length}eachCell(u,f){const h=this.number;f||(f=u,u=null),this._worksheet.eachRow(u,(p,g)=>{f(p.getCell(h),g)})}get values(){const u=[];return this.eachCell((f,h)=>{f&&f.type!==s.ValueType.Null&&(u[h]=f.value)}),u}set values(u){if(!u)return;const f=this.number;let h=0;u.hasOwnProperty("0")&&(h=1),u.forEach((p,g)=>{this._worksheet.getCell(g+h,f).value=p})}_applyStyle(u,f){return this.style[u]=f,this.eachCell(h=>{h[u]=f}),f}get numFmt(){return this.style.numFmt}set numFmt(u){this._applyStyle("numFmt",u)}get font(){return this.style.font}set font(u){this._applyStyle("font",u)}get alignment(){return this.style.alignment}set alignment(u){this._applyStyle("alignment",u)}get protection(){return this.style.protection}set protection(u){this._applyStyle("protection",u)}get border(){return this.style.border}set border(u){this._applyStyle("border",u)}get fill(){return this.style.fill}set fill(u){this._applyStyle("fill",u)}static toModel(u){const f=[];let h=null;return u&&u.forEach((p,g)=>{p.isDefault?h&&(h=null):h&&p.equivalentTo(h)?h.max=g+1:(h={min:g+1,max:g+1,width:p.width!==void 0?p.width:9,style:p.style,isCustomWidth:p.isCustomWidth,hidden:p.hidden,outlineLevel:p.outlineLevel,collapsed:p.collapsed},f.push(h))}),f.length?f:void 0}static fromModel(u,f){const h=[];let p=1,g=0;for(f=(f=f||[]).sort((function(y,m){return y.min-m.min}));g<f.length;){const y=f[g++];for(;p<y.min;)h.push(new l(u,p++));for(;p<=y.max;)h.push(new l(u,p++,y))}return h.length?h:null}}n.exports=l},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(e,n,a){n.exports=class{constructor(i){this.model=i||{}}add(i,s){return this.model[i]=s}find(i){return this.model[i]}remove(i){this.model[i]=void 0}}},{}],6:[function(e,n,a){const i=e("../utils/under-dash"),s=e("../utils/col-cache"),o=e("../utils/cell-matrix"),l=e("./range"),c=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;n.exports=class{constructor(){this.matrixMap={}}getMatrix(u){return this.matrixMap[u]||(this.matrixMap[u]=new o)}add(u,f){const h=s.decodeEx(u);this.addEx(h,f)}addEx(u,f){const h=this.getMatrix(f);if(u.top)for(let p=u.left;p<=u.right;p++)for(let g=u.top;g<=u.bottom;g++){const y={sheetName:u.sheetName,address:s.n2l(p)+g,row:g,col:p};h.addCellEx(y)}else h.addCellEx(u)}remove(u,f){const h=s.decodeEx(u);this.removeEx(h,f)}removeEx(u,f){this.getMatrix(f).removeCellEx(u)}removeAllNames(u){i.each(this.matrixMap,f=>{f.removeCellEx(u)})}forEach(u){i.each(this.matrixMap,(f,h)=>{f.forEach(p=>{u(h,p)})})}getNames(u){return this.getNamesEx(s.decodeEx(u))}getNamesEx(u){return i.map(this.matrixMap,(f,h)=>f.findCellEx(u)&&h).filter(Boolean)}_explore(u,f){f.mark=!1;const{sheetName:h}=f,p=new l(f.row,f.col,f.row,f.col,h);let g,y;function m(b,x){const S=u.findCellAt(h,b,f.col);return!(!S||!S.mark)&&(p[x]=b,S.mark=!1,!0)}for(y=f.row-1;m(y,"top");y--);for(y=f.row+1;m(y,"bottom");y++);function v(b,x){const S=[];for(y=p.top;y<=p.bottom;y++){const _=u.findCellAt(h,y,b);if(!_||!_.mark)return!1;S.push(_)}p[x]=b;for(let _=0;_<S.length;_++)S[_].mark=!1;return!0}for(g=f.col-1;v(g,"left");g--);for(g=f.col+1;v(g,"right");g++);return p}getRanges(u,f){return(f=f||this.matrixMap[u])?(f.forEach(h=>{h.mark=!0}),{name:u,ranges:f.map(h=>h.mark&&this._explore(f,h)).filter(Boolean).map(h=>h.$shortRange)}):{name:u,ranges:[]}}normaliseMatrix(u,f){u.forEachInSheet(f,(h,p,g)=>{h&&(h.row===p&&h.col===g||(h.row=p,h.col=g,h.address=s.n2l(g)+p))})}spliceRows(u,f,h,p){i.each(this.matrixMap,g=>{g.spliceRows(u,f,h,p),this.normaliseMatrix(g,u)})}spliceColumns(u,f,h,p){i.each(this.matrixMap,g=>{g.spliceColumns(u,f,h,p),this.normaliseMatrix(g,u)})}get model(){return i.map(this.matrixMap,(u,f)=>this.getRanges(f,u)).filter(u=>u.ranges.length)}set model(u){const f=this.matrixMap={};u.forEach(h=>{const p=f[h.name]=new o;h.ranges.forEach(g=>{c.test(g.split("!").pop()||"")&&p.addCell(g)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(e,n,a){n.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,n,a){const i=e("../utils/col-cache"),s=e("./anchor");n.exports=class{constructor(o,l){this.worksheet=o,this.model=l}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(o){let{type:l,imageId:c,range:u,hyperlinks:f}=o;if(this.type=l,this.imageId=c,l==="image")if(typeof u=="string"){const h=i.decode(u);this.range={tl:new s(this.worksheet,{col:h.left,row:h.top},-1),br:new s(this.worksheet,{col:h.right,row:h.bottom},0),editAs:"oneCell"}}else this.range={tl:new s(this.worksheet,u.tl,0),br:u.br&&new s(this.worksheet,u.br,0),ext:u.ext,editAs:u.editAs,hyperlinks:f||u.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,n,a){const i=e("../utils/under-dash");class s{constructor(l){this.note=l}get model(){let l=null;switch(typeof this.note){case"string":l={type:"note",note:{texts:[{text:this.note}]}};break;default:l={type:"note",note:this.note}}return i.deepMerge({},s.DEFAULT_CONFIGS,l)}set model(l){const{note:c}=l,{texts:u}=c;u.length===1&&Object.keys(u[0]).length===1?this.note=u[0].text:this.note=c}static fromModel(l){const c=new s;return c.model=l,c}}s.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},n.exports=s},{"../utils/under-dash":26}],10:[function(e,n,a){const i=e("../utils/col-cache");class s{constructor(){this.decode(arguments)}setTLBR(l,c,u,f,h){if(arguments.length<4){const p=i.decodeAddress(l),g=i.decodeAddress(c);this.model={top:Math.min(p.row,g.row),left:Math.min(p.col,g.col),bottom:Math.max(p.row,g.row),right:Math.max(p.col,g.col),sheetName:u},this.setTLBR(p.row,p.col,g.row,g.col,h)}else this.model={top:Math.min(l,u),left:Math.min(c,f),bottom:Math.max(l,u),right:Math.max(c,f),sheetName:h}}decode(l){switch(l.length){case 5:this.setTLBR(l[0],l[1],l[2],l[3],l[4]);break;case 4:this.setTLBR(l[0],l[1],l[2],l[3]);break;case 3:this.setTLBR(l[0],l[1],l[2]);break;case 2:this.setTLBR(l[0],l[1]);break;case 1:{const c=l[0];if(c instanceof s)this.model={top:c.model.top,left:c.model.left,bottom:c.model.bottom,right:c.model.right,sheetName:c.sheetName};else if(c instanceof Array)this.decode(c);else if(c.top&&c.left&&c.bottom&&c.right)this.model={top:c.top,left:c.left,bottom:c.bottom,right:c.right,sheetName:c.sheetName};else{const u=i.decodeEx(c);u.top?this.model={top:u.top,left:u.left,bottom:u.bottom,right:u.right,sheetName:u.sheetName}:this.model={top:u.row,left:u.col,bottom:u.row,right:u.col,sheetName:u.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+l.length)}}get top(){return this.model.top||1}set top(l){this.model.top=l}get left(){return this.model.left||1}set left(l){this.model.left=l}get bottom(){return this.model.bottom||1}set bottom(l){this.model.bottom=l}get right(){return this.model.right||1}set right(l){this.model.right=l}get sheetName(){return this.model.sheetName}set sheetName(l){this.model.sheetName=l}get _serialisedSheetName(){const{sheetName:l}=this.model;return l?/^[a-zA-Z0-9]*$/.test(l)?l+"!":`'${l}'!`:""}expand(l,c,u,f){(!this.model.top||l<this.top)&&(this.top=l),(!this.model.left||c<this.left)&&(this.left=c),(!this.model.bottom||u>this.bottom)&&(this.bottom=u),(!this.model.right||f>this.right)&&(this.right=f)}expandRow(l){if(l){const{dimensions:c,number:u}=l;c&&this.expand(u,c.min,u,c.max)}}expandToAddress(l){const c=i.decodeEx(l);this.expand(c.row,c.col,c.row,c.col)}get tl(){return i.n2l(this.left)+this.top}get $t$l(){return`$${i.n2l(this.left)}$${this.top}`}get br(){return i.n2l(this.right)+this.bottom}get $b$r(){return`$${i.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&!(l.bottom<this.top)&&!(l.top>this.bottom)&&!(l.right<this.left)&&!(l.left>this.right)}contains(l){const c=i.decodeEx(l);return this.containsEx(c)}containsEx(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&l.row>=this.top&&l.row<=this.bottom&&l.col>=this.left&&l.col<=this.right}forEachAddress(l){for(let c=this.left;c<=this.right;c++)for(let u=this.top;u<=this.bottom;u++)l(i.encodeAddress(u,c),u,c)}}n.exports=s},{"../utils/col-cache":19}],11:[function(e,n,a){const i=e("../utils/under-dash"),s=e("./enums"),o=e("../utils/col-cache"),l=e("./cell");n.exports=class{constructor(c,u){this._worksheet=c,this._number=u,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(c){return this._cells[c-1]}getCellEx(c){let u=this._cells[c.col-1];if(!u){const f=this._worksheet.getColumn(c.col);u=new l(this,f,c.address),this._cells[c.col-1]=u}return u}getCell(c){if(typeof c=="string"){const u=this._worksheet.getColumnKey(c);c=u?u.number:o.l2n(c)}return this._cells[c-1]||this.getCellEx({address:o.encodeAddress(this._number,c),row:this._number,col:c})}splice(c,u){const f=c+u;for(var h=arguments.length,p=new Array(h>2?h-2:0),g=2;g<h;g++)p[g-2]=arguments[g];const y=p.length-u,m=this._cells.length;let v,b,x;if(y<0)for(v=c+p.length;v<=m;v++)x=this._cells[v-1],b=this._cells[v-y-1],b?(x=this.getCell(v),x.value=b.value,x.style=b.style,x._comment=b._comment):x&&(x.value=null,x.style={},x._comment=void 0);else if(y>0)for(v=m;v>=f;v--)b=this._cells[v-1],b?(x=this.getCell(v+y),x.value=b.value,x.style=b.style,x._comment=b._comment):this._cells[v+y-1]=void 0;for(v=0;v<p.length;v++)x=this.getCell(c+v),x.value=p[v],x.style={},x._comment=void 0}eachCell(c,u){if(u||(u=c,c=null),c&&c.includeEmpty){const f=this._cells.length;for(let h=1;h<=f;h++)u(this.getCell(h),h)}else this._cells.forEach((f,h)=>{f&&f.type!==s.ValueType.Null&&u(f,h+1)})}addPageBreak(c,u){const f=this._worksheet,h=Math.max(0,c-1)||0,p=Math.max(0,u-1)||16838,g={id:this._number,max:p,man:1};h&&(g.min=h),f.rowBreaks.push(g)}get values(){const c=[];return this._cells.forEach(u=>{u&&u.type!==s.ValueType.Null&&(c[u.col]=u.value)}),c}set values(c){if(this._cells=[],c)if(c instanceof Array){let u=0;c.hasOwnProperty("0")&&(u=1),c.forEach((f,h)=>{f!==void 0&&(this.getCellEx({address:o.encodeAddress(this._number,h+u),row:this._number,col:h+u}).value=f)})}else this._worksheet.eachColumnKey((u,f)=>{c[f]!==void 0&&(this.getCellEx({address:o.encodeAddress(this._number,u.number),row:this._number,col:u.number}).value=c[f])})}get hasValues(){return i.some(this._cells,c=>c&&c.type!==s.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let c=0;return this.eachCell(()=>{c++}),c}get dimensions(){let c=0,u=0;return this._cells.forEach(f=>{f&&f.type!==s.ValueType.Null&&((!c||c>f.col)&&(c=f.col),u<f.col&&(u=f.col))}),c>0?{min:c,max:u}:null}_applyStyle(c,u){return this.style[c]=u,this._cells.forEach(f=>{f&&(f[c]=u)}),u}get numFmt(){return this.style.numFmt}set numFmt(c){this._applyStyle("numFmt",c)}get font(){return this.style.font}set font(c){this._applyStyle("font",c)}get alignment(){return this.style.alignment}set alignment(c){this._applyStyle("alignment",c)}get protection(){return this.style.protection}set protection(c){this._applyStyle("protection",c)}get border(){return this.style.border}set border(c){this._applyStyle("border",c)}get fill(){return this.style.fill}set fill(c){this._applyStyle("fill",c)}get hidden(){return!!this._hidden}set hidden(c){this._hidden=c}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(c){this._outlineLevel=c}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const c=[];let u=0,f=0;return this._cells.forEach(h=>{if(h){const p=h.model;p&&((!u||u>h.col)&&(u=h.col),f<h.col&&(f=h.col),c.push(p))}}),this.height||c.length?{cells:c,number:this.number,min:u,max:f,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(c){if(c.number!==this._number)throw new Error("Invalid row number in model");let u;this._cells=[],c.cells.forEach(f=>{switch(f.type){case l.Types.Merge:break;default:{let h;if(f.address)h=o.decodeAddress(f.address);else if(u){const{row:p}=u,g=u.col+1;h={row:p,col:g,address:o.encodeAddress(p,g),$col$row:`$${o.n2l(g)}$${p}`}}u=h,this.getCellEx(h).model=f;break}}}),c.height?this.height=c.height:delete this.height,this.hidden=c.hidden,this.outlineLevel=c.outlineLevel||0,this.style=c.style&&JSON.parse(JSON.stringify(c.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(e,n,a){const i=e("../utils/col-cache");class s{constructor(l,c,u){this.table=l,this.column=c,this.index=u}_set(l,c){this.table.cacheState(),this.column[l]=c}get name(){return this.column.name}set name(l){this._set("name",l)}get filterButton(){return this.column.filterButton}set filterButton(l){this.column.filterButton=l}get style(){return this.column.style}set style(l){this.column.style=l}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(l){this._set("totalsRowLabel",l)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(l){this._set("totalsRowFunction",l)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(l){this._set("totalsRowResult",l)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(l){this._set("totalsRowFormula",l)}}n.exports=class{constructor(o,l){this.worksheet=o,l&&(this.table=l,this.validate(),this.store())}getFormula(o){switch(o.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${o.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${o.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${o.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${o.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${o.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${o.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${o.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${o.name}])`;case"custom":return o.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+o.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:o}=this,l=(y,m,v)=>{y[m]===void 0&&(y[m]=v)};l(o,"headerRow",!0),l(o,"totalsRow",!1),l(o,"style",{}),l(o.style,"theme","TableStyleMedium2"),l(o.style,"showFirstColumn",!1),l(o.style,"showLastColumn",!1),l(o.style,"showRowStripes",!1),l(o.style,"showColumnStripes",!1);const c=(y,m)=>{if(!y)throw new Error(m)};c(o.ref,"Table must have ref"),c(o.columns,"Table must have column definitions"),c(o.rows,"Table must have row definitions"),o.tl=i.decodeAddress(o.ref);const{row:u,col:f}=o.tl;c(u>0,"Table must be on valid row"),c(f>0,"Table must be on valid col");const{width:h,filterHeight:p,tableHeight:g}=this;o.autoFilterRef=i.encode(u,f,u+p-1,f+h-1),o.tableRef=i.encode(u,f,u+g-1,f+h-1),o.columns.forEach((y,m)=>{c(y.name,`Column ${m} must have a name`),m===0?l(y,"totalsRowLabel","Total"):(l(y,"totalsRowFunction","none"),y.totalsRowFormula=this.getFormula(y))})}store(){const o=(p,g)=>{g&&Object.keys(g).forEach(y=>{p[y]=g[y]})},{worksheet:l,table:c}=this,{row:u,col:f}=c.tl;let h=0;if(c.headerRow){const p=l.getRow(u+h++);c.columns.forEach((g,y)=>{const{style:m,name:v}=g,b=p.getCell(f+y);b.value=v,o(b,m)})}if(c.rows.forEach(p=>{const g=l.getRow(u+h++);p.forEach((y,m)=>{const v=g.getCell(f+m);v.value=y,o(v,c.columns[m].style)})}),c.totalsRow){const p=l.getRow(u+h++);c.columns.forEach((g,y)=>{const m=p.getCell(f+y);if(y===0)m.value=g.totalsRowLabel;else{const v=this.getFormula(g);m.value=v?{formula:g.totalsRowFormula,result:g.totalsRowResult}:null}o(m,g.style)})}}load(o){const{table:l}=this,{row:c,col:u}=l.tl;let f=0;if(l.headerRow){const h=o.getRow(c+f++);l.columns.forEach((p,g)=>{h.getCell(u+g).value=p.name})}if(l.rows.forEach(h=>{const p=o.getRow(c+f++);h.forEach((g,y)=>{p.getCell(u+y).value=g})}),l.totalsRow){const h=o.getRow(c+f++);l.columns.forEach((p,g)=>{const y=h.getCell(u+g);g===0?y.value=p.totalsRowLabel:this.getFormula(p)&&(y.value={formula:p.totalsRowFormula,result:p.totalsRowResult})})}}get model(){return this.table}set model(o){this.table=o}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const o=i.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let l=0;l<this._cache.tableHeight;l++){const c=this.worksheet.getRow(o.row+l);for(let u=0;u<this._cache.width;u++)c.getCell(o.col+u).value=null}else{for(let l=this.tableHeight;l<this._cache.tableHeight;l++){const c=this.worksheet.getRow(o.row+l);for(let u=0;u<this._cache.width;u++)c.getCell(o.col+u).value=null}for(let l=0;l<this.tableHeight;l++){const c=this.worksheet.getRow(o.row+l);for(let u=this.width;u<this._cache.width;u++)c.getCell(o.col+u).value=null}}this.store()}addRow(o,l){this.cacheState(),l===void 0?this.table.rows.push(o):this.table.rows.splice(l,0,o)}removeRows(o){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(o,l)}getColumn(o){const l=this.table.columns[o];return new s(this,l,o)}addColumn(o,l,c){this.cacheState(),c===void 0?(this.table.columns.push(o),this.table.rows.forEach((u,f)=>{u.push(l[f])})):(this.table.columns.splice(c,0,o),this.table.rows.forEach((u,f)=>{u.splice(c,0,l[f])}))}removeColumns(o){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(o,l),this.table.rows.forEach(c=>{c.splice(o,l)})}_assign(o,l,c){this.cacheState(),o[l]=c}get ref(){return this.table.ref}set ref(o){this._assign(this.table,"ref",o)}get name(){return this.table.name}set name(o){this.table.name=o}get displayName(){return this.table.displyName||this.table.name}set displayNamename(o){this.table.displayName=o}get headerRow(){return this.table.headerRow}set headerRow(o){this._assign(this.table,"headerRow",o)}get totalsRow(){return this.table.totalsRow}set totalsRow(o){this._assign(this.table,"totalsRow",o)}get theme(){return this.table.style.name}set theme(o){this.table.style.name=o}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(o){this.table.style.showFirstColumn=o}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(o){this.table.style.showLastColumn=o}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(o){this.table.style.showRowStripes=o}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(o){this.table.style.showColumnStripes=o}}},{"../utils/col-cache":19}],13:[function(e,n,a){const i=e("./worksheet"),s=e("./defined-names"),o=e("../xlsx/xlsx"),l=e("../csv/csv");n.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new s}get xlsx(){return this._xlsx||(this._xlsx=new o(this)),this._xlsx}get csv(){return this._csv||(this._csv=new l(this)),this._csv}get nextId(){for(let c=1;c<this._worksheets.length;c++)if(!this._worksheets[c])return c;return this._worksheets.length||1}addWorksheet(c,u){const f=this.nextId;u&&(typeof u=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),u={properties:{tabColor:{argb:u}}}):(u.argb||u.theme||u.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),u={properties:{tabColor:u}}));const h=this._worksheets.reduce((y,m)=>(m&&m.orderNo)>y?m.orderNo:y,0),p=Object.assign({},u,{id:f,name:c,orderNo:h+1,workbook:this}),g=new i(p);return this._worksheets[f]=g,g}removeWorksheetEx(c){delete this._worksheets[c.id]}removeWorksheet(c){const u=this.getWorksheet(c);u&&u.destroy()}getWorksheet(c){return c===void 0?this._worksheets.find(Boolean):typeof c=="number"?this._worksheets[c]:typeof c=="string"?this._worksheets.find(u=>u&&u.name===c):void 0}get worksheets(){return this._worksheets.slice(1).sort((c,u)=>c.orderNo-u.orderNo).filter(Boolean)}eachSheet(c){this.worksheets.forEach(u=>{c(u,u.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(c){const u=this.media.length;return this.media.push(Object.assign({},c,{type:"image"})),u}getImage(c){return this.media[c]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(c=>c.model),sheets:this.worksheets.map(c=>c.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(c){this.creator=c.creator,this.lastModifiedBy=c.lastModifiedBy,this.lastPrinted=c.lastPrinted,this.created=c.created,this.modified=c.modified,this.company=c.company,this.manager=c.manager,this.title=c.title,this.subject=c.subject,this.keywords=c.keywords,this.category=c.category,this.description=c.description,this.language=c.language,this.revision=c.revision,this.contentStatus=c.contentStatus,this.properties=c.properties,this.calcProperties=c.calcProperties,this._worksheets=[],c.worksheets.forEach(u=>{const{id:f,name:h,state:p}=u,g=c.sheets&&c.sheets.findIndex(y=>y.id===f);(this._worksheets[f]=new i({id:f,name:h,orderNo:g,state:p,workbook:this})).model=u}),this._definedNames.model=c.definedNames,this.views=c.views,this._themes=c.themes,this.media=c.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(e,n,a){const i=e("../utils/under-dash"),s=e("../utils/col-cache"),o=e("./range"),l=e("./row"),c=e("./column"),u=e("./enums"),f=e("./image"),h=e("./table"),p=e("./data-validations"),g=e("../utils/encryptor"),{copyStyle:y}=e("../utils/copy-style");n.exports=class{constructor(m){m=m||{},this._workbook=m.workbook,this.id=m.id,this.orderNo=m.orderNo,this.name=m.name,this.state=m.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},m.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!m.pageSetup||!m.pageSetup.fitToWidth&&!m.pageSetup.fitToHeight||m.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},m.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},m.headerFooter),this.dataValidations=new p,this.views=m.views||[],this.autoFilter=m.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(m){if(m===void 0&&(m="sheet"+this.id),this._name!==m){if(typeof m!="string")throw new Error("The name has to be a string.");if(m==="")throw new Error("The name can't be empty.");if(m==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(m))throw new Error(`Worksheet name ${m} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(m))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+m);if(m&&m.length>31&&(console.warn(`Worksheet name ${m} exceeds 31 chars. This will be truncated`),m=m.substring(0,31)),this._workbook._worksheets.find(v=>v&&v.name.toLowerCase()===m.toLowerCase()))throw new Error("Worksheet name already exists: "+m);this._name=m}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const m=new o;return this._rows.forEach(v=>{if(v){const b=v.dimensions;b&&m.expand(v.number,b.min,v.number,b.max)}}),m}get columns(){return this._columns}set columns(m){this._headerRowCount=m.reduce((x,S)=>{const _=(S.header?1:S.headers&&S.headers.length)||0;return Math.max(x,_)},0);let v=1;const b=this._columns=[];m.forEach(x=>{const S=new c(this,v++,!1);b.push(S),S.defn=x})}getColumnKey(m){return this._keys[m]}setColumnKey(m,v){this._keys[m]=v}deleteColumnKey(m){delete this._keys[m]}eachColumnKey(m){i.each(this._keys,m)}getColumn(m){if(typeof m=="string"){const v=this._keys[m];if(v)return v;m=s.l2n(m)}if(this._columns||(this._columns=[]),m>this._columns.length){let v=this._columns.length+1;for(;v<=m;)this._columns.push(new c(this,v++))}return this._columns[m-1]}spliceColumns(m,v){const b=this._rows.length;for(var x=arguments.length,S=new Array(x>2?x-2:0),_=2;_<x;_++)S[_-2]=arguments[_];if(S.length>0)for(let M=0;M<b;M++){const z=[m,v];S.forEach(D=>{z.push(D[M]||null)});const U=this.getRow(M+1);U.splice.apply(U,z)}else this._rows.forEach(M=>{M&&M.splice(m,v)});const I=S.length-v,A=m+v,O=this._columns.length;if(I<0)for(let M=m+S.length;M<=O;M++)this.getColumn(M).defn=this.getColumn(M-I).defn;else if(I>0)for(let M=O;M>=A;M--)this.getColumn(M+I).defn=this.getColumn(M).defn;for(let M=m;M<m+S.length;M++)this.getColumn(M).defn=null;this.workbook.definedNames.spliceColumns(this.name,m,v,S.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let m=0;return this.eachRow(v=>{m=Math.max(m,v.cellCount)}),m}get actualColumnCount(){const m=[];let v=0;return this.eachRow(b=>{b.eachCell(x=>{let{col:S}=x;m[S]||(m[S]=!0,v++)})}),v}_commitRow(){}get _lastRowNumber(){const m=this._rows;let v=m.length;for(;v>0&&m[v-1]===void 0;)v--;return v}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(m){return this._rows[m-1]}findRows(m,v){return this._rows.slice(m-1,m-1+v)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let m=0;return this.eachRow(()=>{m++}),m}getRow(m){let v=this._rows[m-1];return v||(v=this._rows[m-1]=new l(this,m)),v}getRows(m,v){if(v<1)return;const b=[];for(let x=m;x<m+v;x++)b.push(this.getRow(x));return b}addRow(m){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const b=this._nextRow,x=this.getRow(b);return x.values=m,this._setStyleOption(b,v[0]==="i"?v:"n"),x}addRows(m){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const b=[];return m.forEach(x=>{b.push(this.addRow(x,v))}),b}insertRow(m,v){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(m,0,v),this._setStyleOption(m,b),this.getRow(m)}insertRows(m,v){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(m,0,...v),b!=="n")for(let x=0;x<v.length;x++)b[0]==="o"&&this.findRow(v.length+m+x)!==void 0?this._copyStyle(v.length+m+x,m+x,b[1]==="+"):b[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m+x,b[1]==="+");return this.getRows(m,v.length)}_setStyleOption(m){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";v[0]==="o"&&this.findRow(m+1)!==void 0?this._copyStyle(m+1,m,v[1]==="+"):v[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m,v[1]==="+")}_copyStyle(m,v){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const x=this.getRow(m),S=this.getRow(v);S.style=y(x.style),x.eachCell({includeEmpty:b},(_,I)=>{S.getCell(I).style=y(_.style)}),S.height=x.height}duplicateRow(m,v){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const x=this._rows[m-1],S=new Array(v).fill(x.values);this.spliceRows(m+1,b?0:v,...S);for(let _=0;_<v;_++){const I=this._rows[m+_];I.style=x.style,I.height=x.height,x.eachCell({includeEmpty:!0},(A,O)=>{I.getCell(O).style=A.style})}}spliceRows(m,v){const b=m+v;for(var x=arguments.length,S=new Array(x>2?x-2:0),_=2;_<x;_++)S[_-2]=arguments[_];const I=S.length,A=I-v,O=this._rows.length;let M,z;if(A<0)for(m===O&&(this._rows[O-1]=void 0),M=b;M<=O;M++)if(z=this._rows[M-1],z){const U=this.getRow(M+A);U.values=z.values,U.style=z.style,U.height=z.height,z.eachCell({includeEmpty:!0},(D,T)=>{U.getCell(T).style=D.style}),this._rows[M-1]=void 0}else this._rows[M+A-1]=void 0;else if(A>0)for(M=O;M>=b;M--)if(z=this._rows[M-1],z){const U=this.getRow(M+A);U.values=z.values,U.style=z.style,U.height=z.height,z.eachCell({includeEmpty:!0},(D,T)=>{if(U.getCell(T).style=D.style,D._value.constructor.name==="MergeValue"){const R=this.getRow(D._row._number+I).getCell(T),C=D._value._master,N=this.getRow(C._row._number+I).getCell(C._column._number);R.merge(N)}})}else this._rows[M+A-1]=void 0;for(M=0;M<I;M++){const U=this.getRow(m+M);U.style={},U.values=S[M]}this.workbook.definedNames.spliceRows(this.name,m,v,I)}eachRow(m,v){if(v||(v=m,m=void 0),m&&m.includeEmpty){const b=this._rows.length;for(let x=1;x<=b;x++)v(this.getRow(x),x)}else this._rows.forEach(b=>{b&&b.hasValues&&v(b,b.number)})}getSheetValues(){const m=[];return this._rows.forEach(v=>{v&&(m[v.number]=v.values)}),m}findCell(m,v){const b=s.getAddress(m,v),x=this._rows[b.row-1];return x?x.findCell(b.col):void 0}getCell(m,v){const b=s.getAddress(m,v);return this.getRow(b.row).getCellEx(b)}mergeCells(){for(var m=arguments.length,v=new Array(m),b=0;b<m;b++)v[b]=arguments[b];const x=new o(v);this._mergeCellsInternal(x)}mergeCellsWithoutStyle(){for(var m=arguments.length,v=new Array(m),b=0;b<m;b++)v[b]=arguments[b];const x=new o(v);this._mergeCellsInternal(x,!0)}_mergeCellsInternal(m,v){i.each(this._merges,x=>{if(x.intersects(m))throw new Error("Cannot merge already merged cells")});const b=this.getCell(m.top,m.left);for(let x=m.top;x<=m.bottom;x++)for(let S=m.left;S<=m.right;S++)(x>m.top||S>m.left)&&this.getCell(x,S).merge(b,v);this._merges[b.address]=m}_unMergeMaster(m){const v=this._merges[m.address];if(v){for(let b=v.top;b<=v.bottom;b++)for(let x=v.left;x<=v.right;x++)this.getCell(b,x).unmerge();delete this._merges[m.address]}}get hasMerges(){return i.some(this._merges,Boolean)}unMergeCells(){for(var m=arguments.length,v=new Array(m),b=0;b<m;b++)v[b]=arguments[b];const x=new o(v);for(let S=x.top;S<=x.bottom;S++)for(let _=x.left;_<=x.right;_++){const I=this.findCell(S,_);I&&(I.type===u.ValueType.Merge?this._unMergeMaster(I.master):this._merges[I.address]&&this._unMergeMaster(I))}}fillFormula(m,v,b){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const S=s.decode(m),{top:_,left:I,bottom:A,right:O}=S,M=O-I+1,z=s.encodeAddress(_,I),U=x==="shared";let D;D=typeof b=="function"?b:Array.isArray(b)?Array.isArray(b[0])?(R,C)=>b[R-_][C-I]:(R,C)=>b[(R-_)*M+(C-I)]:()=>{};let T=!0;for(let R=_;R<=A;R++)for(let C=I;C<=O;C++)T?(this.getCell(R,C).value={shareType:x,formula:v,ref:m,result:D(R,C)},T=!1):this.getCell(R,C).value=U?{sharedFormula:z,result:D(R,C)}:D(R,C)}addImage(m,v){const b={type:"image",imageId:m,range:v};this._media.push(new f(this,b))}getImages(){return this._media.filter(m=>m.type==="image")}addBackgroundImage(m){const v={type:"background",imageId:m};this._media.push(new f(this,v))}getBackgroundImageId(){const m=this._media.find(v=>v.type==="background");return m&&m.imageId}protect(m,v){return new Promise(b=>{this.sheetProtection={sheet:!0},v&&"spinCount"in v&&(v.spinCount=Number.isFinite(v.spinCount)?Math.round(Math.max(0,v.spinCount)):1e5),m&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=g.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=v&&"spinCount"in v?v.spinCount:1e5,this.sheetProtection.hashValue=g.convertPasswordToHash(m,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),v&&(this.sheetProtection=Object.assign(this.sheetProtection,v),!m&&"spinCount"in v&&delete this.sheetProtection.spinCount),b()})}unprotect(){this.sheetProtection=null}addTable(m){const v=new h(this,m);return this.tables[m.name]=v,v}getTable(m){return this.tables[m]}removeTable(m){delete this.tables[m]}getTables(){return Object.values(this.tables)}addConditionalFormatting(m){this.conditionalFormattings.push(m)}removeConditionalFormatting(m){typeof m=="number"?this.conditionalFormattings.splice(m,1):this.conditionalFormattings=m instanceof Function?this.conditionalFormattings.filter(m):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(m){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=m}get model(){const m={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(x=>x.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(x=>x.model),conditionalFormattings:this.conditionalFormattings};m.cols=c.toModel(this.columns);const v=m.rows=[],b=m.dimensions=new o;return this._rows.forEach(x=>{const S=x&&x.model;S&&(b.expand(S.number,S.min,S.number,S.max),v.push(S))}),m.merges=[],i.each(this._merges,x=>{m.merges.push(x.range)}),m}_parseRows(m){this._rows=[],m.rows.forEach(v=>{const b=new l(this,v.number);this._rows[b.number-1]=b,b.model=v})}_parseMergeCells(m){i.each(m.mergeCells,v=>{this.mergeCellsWithoutStyle(v)})}set model(m){this.name=m.name,this._columns=c.fromModel(this,m.cols),this._parseRows(m),this._parseMergeCells(m),this.dataValidations=new p(m.dataValidations),this.properties=m.properties,this.pageSetup=m.pageSetup,this.headerFooter=m.headerFooter,this.views=m.views,this.autoFilter=m.autoFilter,this._media=m.media.map(v=>new f(this,v)),this.sheetProtection=m.sheetProtection,this.tables=m.tables.reduce((v,b)=>{const x=new h;return x.model=b,v[b.name]=x,v},{}),this.conditionalFormattings=m.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,n,a){e("core-js/modules/es.promise"),e("core-js/modules/es.promise.finally"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");const i={Workbook:e("./doc/workbook")},s=e("./doc/enums");Object.keys(s).forEach(o=>{i[o]=s[o]}),n.exports=i},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(e,n,a){const i=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");a.bufferToString=function(s){return typeof s=="string"?s:i?i.decode(s):s.toString()}},{}],17:[function(e,n,a){const i=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:s}=e("buffer");a.stringToBuffer=function(o){return typeof o!="string"?o:i?s.from(i.encode(o).buffer):s.from(o)}},{buffer:220}],18:[function(e,n,a){const i=e("./under-dash"),s=e("./col-cache");n.exports=class{constructor(o){this.template=o,this.sheets={}}addCell(o){this.addCellEx(s.decodeEx(o))}getCell(o){return this.findCellEx(s.decodeEx(o),!0)}findCell(o){return this.findCellEx(s.decodeEx(o),!1)}findCellAt(o,l,c){const u=this.sheets[o],f=u&&u[l];return f&&f[c]}addCellEx(o){if(o.top)for(let l=o.top;l<=o.bottom;l++)for(let c=o.left;c<=o.right;c++)this.getCellAt(o.sheetName,l,c);else this.findCellEx(o,!0)}getCellEx(o){return this.findCellEx(o,!0)}findCellEx(o,l){const c=this.findSheet(o,l),u=this.findSheetRow(c,o,l);return this.findRowCell(u,o,l)}getCellAt(o,l,c){const u=this.sheets[o]||(this.sheets[o]=[]),f=u[l]||(u[l]=[]);return f[c]||(f[c]={sheetName:o,address:s.n2l(c)+l,row:l,col:c})}removeCellEx(o){const l=this.findSheet(o);if(!l)return;const c=this.findSheetRow(l,o);c&&delete c[o.col]}forEachInSheet(o,l){const c=this.sheets[o];c&&c.forEach((u,f)=>{u&&u.forEach((h,p)=>{h&&l(h,f,p)})})}forEach(o){i.each(this.sheets,(l,c)=>{this.forEachInSheet(c,o)})}map(o){const l=[];return this.forEach(c=>{l.push(o(c))}),l}findSheet(o,l){const c=o.sheetName;return this.sheets[c]?this.sheets[c]:l?this.sheets[c]=[]:void 0}findSheetRow(o,l,c){const{row:u}=l;return o&&o[u]?o[u]:c?o[u]=[]:void 0}findRowCell(o,l,c){const{col:u}=l;return o&&o[u]?o[u]:c?o[u]=this.template?Object.assign(l,JSON.parse(JSON.stringify(this.template))):l:void 0}spliceRows(o,l,c,u){const f=this.sheets[o];if(f){const h=[];for(let p=0;p<u;p++)h.push([]);f.splice(l,c,...h)}}spliceColumns(o,l,c,u){const f=this.sheets[o];if(f){const h=[];for(let p=0;p<u;p++)h.push(null);i.each(f,p=>{p.splice(l,c,...h)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(e,n,a){const i=/^[A-Z]+\d+$/,s={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:o=>o<=26?1:o<=676?2:3,_fill(o){let l,c,u,f,h,p=1;if(o>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&o>=1){for(;p<=26;)l=this._dictionary[p-1],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=1}if(this._l2nFill<2&&o>=2){for(p=27;p<=702;)c=p-27,u=c%26,f=Math.floor(c/26),l=this._dictionary[f]+this._dictionary[u],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=2}if(this._l2nFill<3&&o>=3){for(p=703;p<=16384;)c=p-703,u=c%26,f=Math.floor(c/26)%26,h=Math.floor(c/676),l=this._dictionary[h]+this._dictionary[f]+this._dictionary[u],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=3}},l2n(o){if(this._l2n[o]||this._fill(o.length),!this._l2n[o])throw new Error("Out of bounds. Invalid column letter: "+o);return this._l2n[o]},n2l(o){if(o<1||o>16384)throw new Error(o+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[o]||this._fill(this._level(o)),this._n2l[o]},_hash:{},validateAddress(o){if(!i.test(o))throw new Error("Invalid Address: "+o);return!0},decodeAddress(o){const l=o.length<5&&this._hash[o];if(l)return l;let c=!1,u="",f=0,h=!1,p="",g=0;for(let m,v=0;v<o.length;v++)if(m=o.charCodeAt(v),!h&&m>=65&&m<=90)c=!0,u+=o[v],f=26*f+m-64;else if(m>=48&&m<=57)h=!0,p+=o[v],g=10*g+m-48;else if(h&&c&&m!==36)break;if(c){if(f>16384)throw new Error("Out of bounds. Invalid column letter: "+u)}else f=void 0;h||(g=void 0);const y={address:o=u+p,col:f,row:g,$col$row:`$${u}$${p}`};return f<=100&&g<=100&&(this._hash[o]=y,this._hash[y.$col$row]=y),y},getAddress(o,l){if(l){const c=this.n2l(l)+o;return this.decodeAddress(c)}return this.decodeAddress(o)},decode(o){const l=o.split(":");if(l.length===2){const c=this.decodeAddress(l[0]),u=this.decodeAddress(l[1]),f={top:Math.min(c.row,u.row),left:Math.min(c.col,u.col),bottom:Math.max(c.row,u.row),right:Math.max(c.col,u.col)};return f.tl=this.n2l(f.left)+f.top,f.br=this.n2l(f.right)+f.bottom,f.dimensions=`${f.tl}:${f.br}`,f}return this.decodeAddress(o)},decodeEx(o){const l=o.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),c=l[1]||l[2],u=l[3],f=u.split(":");if(f.length>1){let p=this.decodeAddress(f[0]),g=this.decodeAddress(f[1]);const y=Math.min(p.row,g.row),m=Math.min(p.col,g.col),v=Math.max(p.row,g.row),b=Math.max(p.col,g.col);return p=this.n2l(m)+y,g=this.n2l(b)+v,{top:y,left:m,bottom:v,right:b,sheetName:c,tl:{address:p,col:m,row:y,$col$row:`$${this.n2l(m)}$${y}`,sheetName:c},br:{address:g,col:b,row:v,$col$row:`$${this.n2l(b)}$${v}`,sheetName:c},dimensions:`${p}:${g}`}}if(u.startsWith("#"))return c?{sheetName:c,error:u}:{error:u};const h=this.decodeAddress(u);return c?{sheetName:c,...h}:h},encodeAddress:(o,l)=>s.n2l(l)+o,encode(){switch(arguments.length){case 2:return s.encodeAddress(arguments[0],arguments[1]);case 4:return`${s.encodeAddress(arguments[0],arguments[1])}:${s.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(o,l){const[c,u,,f,h]=o,[p,g]=l;return p>=c&&p<=f&&g>=u&&g<=h}};n.exports=s},{}],20:[function(e,n,a){const i=(o,l)=>({...o,...l.reduce((c,u)=>(o[u]&&(c[u]={...o[u]}),c),{})}),s=function(o,l,c){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];o[c]&&(l[c]=i(o[c],u))};a.copyStyle=o=>{if(!o)return o;if(l=o,Object.keys(l).length===0)return{};var l;const c={...o};return s(o,c,"font",["color"]),s(o,c,"alignment"),s(o,c,"protection"),o.border&&(s(o,c,"border"),s(o.border,c.border,"top",["color"]),s(o.border,c.border,"left",["color"]),s(o.border,c.border,"bottom",["color"]),s(o.border,c.border,"right",["color"]),s(o.border,c.border,"diagonal",["color"])),o.fill&&(s(o,c,"fill",["fgColor","bgColor","center"]),o.fill.stops&&(c.fill.stops=o.fill.stops.map(u=>i(u,["color"])))),c}},{}],21:[function(e,n,a){(function(i){(function(){const s=e("crypto"),o={hash(l){const c=s.createHash(l);for(var u=arguments.length,f=new Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];return c.update(i.concat(f)),c.digest()},convertPasswordToHash(l,c,u,f){if(c=c.toLowerCase(),s.getHashes().indexOf(c)<0)throw new Error(`Hash algorithm '${c}' not supported!`);const h=i.from(l,"utf16le");let p=this.hash(c,i.from(u,"base64"),h);for(let g=0;g<f;g++){const y=i.alloc(4);y.writeUInt32LE(g,0),p=this.hash(c,p,y)}return p.toString("base64")},randomBytes:l=>s.randomBytes(l)};n.exports=o}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(e,n,a){const{SaxesParser:i}=e("saxes"),{PassThrough:s}=e("readable-stream"),{bufferToString:o}=e("./browser-buffer-decode");n.exports=async function*(l){l.pipe&&!l[Symbol.asyncIterator]&&(l=l.pipe(new s));const c=new i;let u;c.on("error",h=>{u=h});let f=[];c.on("opentag",h=>f.push({eventType:"opentag",value:h})),c.on("text",h=>f.push({eventType:"text",value:h})),c.on("closetag",h=>f.push({eventType:"closetag",value:h}));for await(const h of l){if(c.write(o(h)),u)throw u;yield f,f=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(e,n,a){const i=e("./col-cache"),s=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,o=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;n.exports={slideFormula:function(l,c,u){const f=i.decode(c),h=i.decode(u);return l.replace(s,(p,g,y,m,v)=>{if(v)return p;const b=o.exec(m);if(b){const x=b[1],S=b[2].toUpperCase(),_=b[3],I=b[4];if(S.length>3||S.length===3&&S>"XFD")return p;let A=i.l2n(S),O=parseInt(I,10);return x||(A+=h.col-f.col),_||(O+=h.row-f.row),(g||"")+(x||"")+i.n2l(A)+(_||"")+O}return p})}}},{"./col-cache":19}],24:[function(e,n,a){(function(i,s){(function(){const o=e("readable-stream"),l=e("./utils"),c=e("./string-buf");class u{constructor(m,v){this._data=m,this._encoding=v}get length(){return this.toBuffer().length}copy(m,v,b,x){return this.toBuffer().copy(m,v,b,x)}toBuffer(){return this._buffer||(this._buffer=s.from(this._data,this._encoding)),this._buffer}}class f{constructor(m){this._data=m}get length(){return this._data.length}copy(m,v,b,x){return this._data._buf.copy(m,v,b,x)}toBuffer(){return this._data.toBuffer()}}class h{constructor(m){this._data=m}get length(){return this._data.length}copy(m,v,b,x){this._data.copy(m,v,b,x)}toBuffer(){return this._data}}class p{constructor(m){this.size=m,this.buffer=s.alloc(m),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const m=s.alloc(this.iWrite-this.iRead);return this.buffer.copy(m,0,this.iRead,this.iWrite),m}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(m){let v;return m===0?null:m===void 0||m>=this.length?(v=this.toBuffer(),this.iRead=this.iWrite,v):(v=s.alloc(m),this.buffer.copy(v,0,this.iRead,m),this.iRead+=m,v)}write(m,v,b){const x=Math.min(b,this.size-this.iWrite);return m.copy(this.buffer,this.iWrite,v,v+x),this.iWrite+=x,x}}const g=function(y){y=y||{},this.bufSize=y.bufSize||1048576,this.buffers=[],this.batch=y.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};l.inherits(g,o.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return s.concat(this.buffers.map(y=>y.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const m=this.buffers[this.buffers.length-1];if(!m.full)return m}const y=new p(this.bufSize);return this.buffers.push(y),y},async _pipe(y){await Promise.all(this.pipes.map((function(m){return new Promise(v=>{m.write(y.toBuffer(),()=>{v()})})})))},_writeToBuffers(y){let m=0;const v=y.length;for(;m<v;)m+=this._getWritableBuffer().write(y,m,v-m)},async write(y,m,v){let b;if(m instanceof Function&&(v=m,m="utf8"),v=v||l.nop,y instanceof c)b=new f(y);else if(y instanceof s)b=new h(y);else{if(!(typeof y=="string"||y instanceof String||y instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");b=new u(y,m)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(b);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(b),i.nextTick(v)):(await this._pipe(b),v());else this.paused||this.emit("data",b.toBuffer()),this._writeToBuffers(b),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(y,m,v){const b=x=>{x?v(x):(this._flush(),this.pipes.forEach(S=>{S.end()}),this.emit("finish"))};y?this.write(y,m,b):b()},read(y){let m;if(y){for(m=[];y&&this.buffers.length&&!this.buffers[0].eod;){const v=this.buffers[0],b=v.read(y);y-=b.length,m.push(b),v.eod&&v.full&&this.buffers.shift()}return s.concat(m)}return m=this.buffers.map(v=>v.toBuffer()).filter(Boolean),this.buffers=[],s.concat(m)},setEncoding(y){this.encoding=y},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(y){this.pipes.push(y),!this.paused&&this.buffers.length&&this.end()},unpipe(y){this.pipes=this.pipes.filter(m=>m!==y)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),n.exports=g}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(e,n,a){(function(i){(function(){n.exports=class{constructor(s){this._buf=i.alloc(s&&s.size||16384),this._encoding=s&&s.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=i.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(s){s=s||0,this._buffer=void 0,this._inPos=s}_grow(s){let o=2*this._buf.length;for(;o<s;)o*=2;const l=i.alloc(o);this._buf.copy(l,0),this._buf=l}addText(s){this._buffer=void 0;let o=this._inPos+this._buf.write(s,this._inPos,this._encoding);for(;o>=this._buf.length-4;)this._grow(this._inPos+s.length),o=this._inPos+this._buf.write(s,this._inPos,this._encoding);this._inPos=o}addStringBuf(s){s.length&&(this._buffer=void 0,this.length+s.length>this.capacity&&this._grow(this.length+s.length),s._buf.copy(this._buf,this._inPos,0,s.length),this._inPos+=s.length)}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],26:[function(e,n,a){const{toString:i}=Object.prototype,s=/["&<>]/,o={each:function(l,c){l&&(Array.isArray(l)?l.forEach(c):Object.keys(l).forEach(u=>{c(l[u],u)}))},some:function(l,c){return!!l&&(Array.isArray(l)?l.some(c):Object.keys(l).some(u=>c(l[u],u)))},every:function(l,c){return!l||(Array.isArray(l)?l.every(c):Object.keys(l).every(u=>c(l[u],u)))},map:function(l,c){return l?Array.isArray(l)?l.map(c):Object.keys(l).map(u=>c(l[u],u)):[]},keyBy:(l,c)=>l.reduce((u,f)=>(u[f[c]]=f,u),{}),isEqual:function(l,c){const u=typeof l,f=typeof c,h=Array.isArray(l),p=Array.isArray(c);let g;if(u!==f)return!1;switch(typeof l){case"object":if(h||p)return!(!h||!p)&&l.length===c.length&&l.every((y,m)=>{const v=c[m];return o.isEqual(y,v)});if(l===null||c===null)return l===c;if(g=Object.keys(l),Object.keys(c).length!==g.length)return!1;for(const y of g)if(!c.hasOwnProperty(y))return!1;return o.every(l,(y,m)=>{const v=c[m];return o.isEqual(y,v)});default:return l===c}},escapeHtml(l){const c=s.exec(l);if(!c)return l;let u="",f="",h=0,p=c.index;for(;p<l.length;p++){switch(l.charAt(p)){case'"':f="&quot;";break;case"&":f="&amp;";break;case"'":f="&apos;";break;case"<":f="&lt;";break;case">":f="&gt;";break;default:continue}h!==p&&(u+=l.substring(h,p)),h=p+1,u+=f}return h!==p?u+l.substring(h,p):u},strcmp:(l,c)=>l<c?-1:l>c?1:0,isUndefined:l=>i.call(l)==="[object Undefined]",isObject:l=>i.call(l)==="[object Object]",deepMerge(){const l=arguments[0]||{},{length:c}=arguments;let u,f,h;function p(g,y){u=l[y],h=Array.isArray(g),o.isObject(g)||h?(h?(h=!1,f=u&&Array.isArray(u)?u:[]):f=u&&o.isObject(u)?u:{},l[y]=o.deepMerge(f,g)):o.isUndefined(g)||(l[y]=g)}for(let g=0;g<c;g++)o.each(arguments[g],p);return l}};n.exports=o},{}],27:[function(e,n,a){(function(i,s){(function(){const o=e("fs"),l=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,c={nop(){},promiseImmediate:u=>new Promise(f=>{i.setImmediate?s(()=>{f(u)}):setTimeout(()=>{f(u)},1)}),inherits:function(u,f,h,p){u.super_=f,p||(p=h,h=null),h&&Object.keys(h).forEach(y=>{Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(h,y))});const g={constructor:{value:u,enumerable:!1,writable:!1,configurable:!0}};p&&Object.keys(p).forEach(y=>{g[y]=Object.getOwnPropertyDescriptor(p,y)}),u.prototype=Object.create(f.prototype,g)},dateToExcel:(u,f)=>25569+u.getTime()/864e5-(f?1462:0),excelToDate(u,f){const h=Math.round(24*(u-25569+(f?1462:0))*3600*1e3);return new Date(h)},parsePath(u){const f=u.lastIndexOf("/");return{path:u.substring(0,f),name:u.substring(f+1)}},getRelsPath(u){const f=c.parsePath(u);return`${f.path}/_rels/${f.name}.rels`},xmlEncode(u){const f=l.exec(u);if(!f)return u;let h="",p="",g=0,y=f.index;for(;y<u.length;y++){const m=u.charCodeAt(y);switch(m){case 34:p="&quot;";break;case 38:p="&amp;";break;case 39:p="&apos;";break;case 60:p="&lt;";break;case 62:p="&gt;";break;case 127:p="";break;default:if(m<=31&&(m<=8||m>=11&&m!==13)){p="";break}continue}g!==y&&(h+=u.substring(g,y)),g=y+1,p&&(h+=p)}return g!==y?h+u.substring(g,y):h},xmlDecode:u=>u.replace(/&([a-z]*);/g,f=>{switch(f){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return f}}),validInt(u){const f=parseInt(u,10);return Number.isNaN(f)?0:f},isDateFmt(u){return u?(u=(u=u.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:u=>new Promise(f=>{o.access(u,o.constants.F_OK,h=>{f(!h)})})},toIsoDateString:u=>u.toIsoString().subsstr(0,10),parseBoolean:u=>u===!0||u==="true"||u===1||u==="1"};n.exports=c}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{fs:216,timers:523}],28:[function(e,n,a){const i=e("./under-dash"),s=e("./utils");function o(u,f,h){u.push(` ${f}="${s.xmlEncode(h.toString())}"`)}function l(u,f){if(f){const h=[];i.each(f,(p,g)=>{p!==void 0&&o(h,g,p)}),u.push(h.join(""))}}class c{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(f){const h=this._xml;h.push("<?xml"),l(h,f),h.push(`?>
`)}openNode(f,h){const p=this.tos,g=this._xml;p&&this.open&&g.push(">"),this._stack.push(f),g.push("<"),g.push(f),l(g,h),this.leaf=!0,this.open=!0}addAttribute(f,h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");h!==void 0&&o(this._xml,f,h)}addAttributes(f){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");l(this._xml,f)}writeText(f){const h=this._xml;this.open&&(h.push(">"),this.open=!1),this.leaf=!1,h.push(s.xmlEncode(f.toString()))}writeXml(f){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(f)}closeNode(){const f=this._stack.pop(),h=this._xml;this.leaf?h.push("/>"):(h.push("</"),h.push(f),h.push(">")),this.open=!1,this.leaf=!1}leafNode(f,h,p){this.openNode(f,h),p!==void 0&&this.writeText(p),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const f=this._rollbacks.pop();this._xml.length>f.xml&&this._xml.splice(f.xml,this._xml.length-f.xml),this._stack.length>f.stack&&this._stack.splice(f.stack,this._stack.length-f.stack),this.leaf=f.leaf,this.open=f.open}get xml(){return this.closeAll(),this._xml.join("")}}c.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},n.exports=c},{"./under-dash":26,"./utils":27}],29:[function(e,n,a){(function(i){(function(){const s=e("events"),o=e("jszip"),l=e("./stream-buf"),{stringToBuffer:c}=e("./browser-buffer-encode");class u extends s.EventEmitter{constructor(h){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},h),this.zip=new o,this.stream=new l}append(h,p){p.hasOwnProperty("base64")&&p.base64?this.zip.file(p.name,h,{base64:!0}):(i.browser&&typeof h=="string"&&(h=c(h)),this.zip.file(p.name,h))}async finalize(){const h=await this.zip.generateAsync(this.options);this.stream.end(h),this.emit("finish")}read(h){return this.stream.read(h)}setEncoding(h){return this.stream.setEncoding(h)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(h,p){return this.stream.pipe(h,p)}unpipe(h){return this.stream.unpipe(h)}unshift(h){return this.stream.unshift(h)}wrap(h){return this.stream.wrap(h)}}n.exports={ZipWriter:u}}).call(this)}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(e,n,a){n.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(e,n,a){n.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(e,n,a){const i=e("../../utils/parse-sax"),s=e("../../utils/xml-stream");class o{prepare(){}render(){}parseOpen(c){}parseText(c){}parseClose(c){}reconcile(c,u){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(c=>{c instanceof o?c.reset():c.xform&&c.xform.reset()})}mergeModel(c){this.model=Object.assign(this.model||{},c)}async parse(c){for await(const u of c)for(const{eventType:f,value:h}of u)if(f==="opentag")this.parseOpen(h);else if(f==="text")this.parseText(h);else if(f==="closetag"&&!this.parseClose(h.name))return this.model;return this.model}async parseStream(c){return this.parse(i(c))}get xml(){return this.toXml(this.model)}toXml(c){const u=new s;return this.render(u,c),u.xml}static toAttribute(c,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(c===void 0){if(f)return u}else if(f||c!==u)return c.toString()}static toStringAttribute(c,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(c,u,f)}static toStringValue(c,u){return c===void 0?u:c}static toBoolAttribute(c,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(c===void 0){if(f)return u}else if(f||c!==u)return c?"1":"0"}static toBoolValue(c,u){return c===void 0?u:c==="1"}static toIntAttribute(c,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(c,u,f)}static toIntValue(c,u){return c===void 0?u:parseInt(c,10)}static toFloatAttribute(c,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(c,u,f)}static toFloatValue(c,u){return c===void 0?u:parseFloat(c)}}n.exports=o},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(e,n,a){const i=e("../base-xform"),s=e("../../../utils/col-cache");function o(c){try{return s.decodeEx(c),!0}catch{return!1}}function l(c){const u=[];let f=!1,h="";return c.split(",").forEach(p=>{if(!p)return;const g=(p.match(/'/g)||[]).length;if(!g)return void(f?h+=p+",":o(p)&&u.push(p));const y=g%2==0;!f&&y&&o(p)?u.push(p):f&&!y?(f=!1,o(h+p)&&u.push(h+p),h=""):(f=!0,h+=p+",")}),u}n.exports=class extends i{render(c,u){c.openNode("definedName",{name:u.name,localSheetId:u.localSheetId}),c.writeText(u.ranges.join(",")),c.closeNode()}parseOpen(c){switch(c.name){case"definedName":return this._parsedName=c.attributes.name,this._parsedLocalSheetId=c.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(c){this._parsedText.push(c)}parseClose(){return this.model={name:this._parsedName,ranges:l(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(e,n,a){const i=e("../../../utils/utils"),s=e("../base-xform");n.exports=class extends s{render(o,l){o.leafNode("sheet",{sheetId:l.id,name:l.name,state:l.state,"r:id":l.rId})}parseOpen(o){return o.name==="sheet"&&(this.model={name:i.xmlDecode(o.attributes.name),id:parseInt(o.attributes.sheetId,10),state:o.attributes.state,rId:o.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{render(s,o){s.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:o.fullCalcOnLoad?1:void 0})}parseOpen(s){return s.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{render(s,o){s.leafNode("workbookPr",{date1904:o.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(s){return s.name==="workbookPr"&&(this.model={date1904:s.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{render(s,o){const l={xWindow:o.x||0,yWindow:o.y||0,windowWidth:o.width||12e3,windowHeight:o.height||24e3,firstSheet:o.firstSheet,activeTab:o.activeTab};o.visibility&&o.visibility!=="visible"&&(l.visibility=o.visibility),s.leafNode("workbookView",l)}parseOpen(s){if(s.name==="workbookView"){const o=this.model={},l=function(u,f,h){const p=f!==void 0?o[u]=f:h;p!==void 0&&(o[u]=p)},c=function(u,f,h){const p=f!==void 0?o[u]=parseInt(f,10):h;p!==void 0&&(o[u]=p)};return c("x",s.attributes.xWindow,0),c("y",s.attributes.yWindow,0),c("width",s.attributes.windowWidth,25e3),c("height",s.attributes.windowHeight,1e4),l("visibility",s.attributes.visibility,"visible"),c("activeTab",s.attributes.activeTab,void 0),c("firstSheet",s.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),o=e("../../../utils/xml-stream"),l=e("../base-xform"),c=e("../static-xform"),u=e("../list-xform"),f=e("./defined-name-xform"),h=e("./sheet-xform"),p=e("./workbook-view-xform"),g=e("./workbook-properties-xform"),y=e("./workbook-calc-properties-xform");class m extends l{constructor(){super(),this.map={fileVersion:m.STATIC_XFORMS.fileVersion,workbookPr:new g,bookViews:new u({tag:"bookViews",count:!1,childXform:new p}),sheets:new u({tag:"sheets",count:!1,childXform:new h}),definedNames:new u({tag:"definedNames",count:!1,childXform:new f}),calcPr:new y}}prepare(b){b.sheets=b.worksheets;const x=[];let S=0;b.sheets.forEach(_=>{if(_.pageSetup&&_.pageSetup.printArea&&_.pageSetup.printArea.split("&&").forEach(I=>{const A=I.split(":"),O={name:"_xlnm.Print_Area",ranges:[`'${_.name}'!$${A[0]}:$${A[1]}`],localSheetId:S};x.push(O)}),_.pageSetup&&(_.pageSetup.printTitlesRow||_.pageSetup.printTitlesColumn)){const I=[];if(_.pageSetup.printTitlesColumn){const O=_.pageSetup.printTitlesColumn.split(":");I.push(`'${_.name}'!$${O[0]}:$${O[1]}`)}if(_.pageSetup.printTitlesRow){const O=_.pageSetup.printTitlesRow.split(":");I.push(`'${_.name}'!$${O[0]}:$${O[1]}`)}const A={name:"_xlnm.Print_Titles",ranges:I,localSheetId:S};x.push(A)}S++}),x.length&&(b.definedNames=b.definedNames.concat(x)),(b.media||[]).forEach((_,I)=>{_.name=_.type+(I+1)})}render(b,x){b.openXml(o.StdDocAttributes),b.openNode("workbook",m.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(b),this.map.workbookPr.render(b,x.properties),this.map.bookViews.render(b,x.views),this.map.sheets.render(b,x.sheets),this.map.definedNames.render(b,x.definedNames),this.map.calcPr.render(b,x.calcProperties),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;switch(b.name){case"workbook":return!0;default:return this.parser=this.map[b.name],this.parser&&this.parser.parseOpen(b),!0}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser)return this.parser.parseClose(b)||(this.parser=void 0),!0;switch(b){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(b){const x=(b.workbookRels||[]).reduce((O,M)=>(O[M.Id]=M,O),{}),S=[];let _,I=0;(b.sheets||[]).forEach(O=>{const M=x[O.rId];M&&(_=b.worksheetHash["xl/"+M.Target.replace(/^(\s|\/xl\/)+/,"")],_&&(_.name=O.name,_.id=O.id,_.state=O.state,S[I++]=_))});const A=[];i.each(b.definedNames,O=>{if(O.name==="_xlnm.Print_Area"){if(_=S[O.localSheetId],_){_.pageSetup||(_.pageSetup={});const M=s.decodeEx(O.ranges[0]);_.pageSetup.printArea=_.pageSetup.printArea?`${_.pageSetup.printArea}&&${M.dimensions}`:M.dimensions}}else if(O.name==="_xlnm.Print_Titles"){if(_=S[O.localSheetId],_){_.pageSetup||(_.pageSetup={});const M=O.ranges.join(","),z=/\$/g,U=/\$\d+:\$\d+/,D=M.match(U);if(D&&D.length){const C=D[0];_.pageSetup.printTitlesRow=C.replace(z,"")}const T=/\$[A-Z]+:\$[A-Z]+/,R=M.match(T);if(R&&R.length){const C=R[0];_.pageSetup.printTitlesColumn=C.replace(z,"")}}}else A.push(O)}),b.definedNames=A,b.media.forEach((O,M)=>{O.index=M})}}m.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},m.STATIC_XFORMS={fileVersion:new c({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},n.exports=m},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(e,n,a){const i=e("../strings/rich-text-xform"),s=e("../../../utils/utils"),o=e("../base-xform"),l=n.exports=function(c){this.model=c};s.inherits(l,o,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new i),this._richTextXform},render(c,u){u=u||this.model,c.openNode("comment",{ref:u.ref,authorId:0}),c.openNode("text"),u&&u.note&&u.note.texts&&u.note.texts.forEach(f=>{this.richTextXform.render(c,f)}),c.closeNode(),c.closeNode()},parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"comment":return this.model={type:"note",note:{texts:[]},...c.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(c),!0;default:return!1}},parseText(c){this.parser&&this.parser.parseText(c)},parseClose(c){switch(c){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../../../utils/utils"),o=e("../base-xform"),l=e("./comment-xform"),c=n.exports=function(){this.map={comment:new l}};s.inherits(c,o,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(u,f){f=f||this.model,u.openXml(i.StdDocAttributes),u.openNode("comments",c.COMMENTS_ATTRIBUTES),u.openNode("authors"),u.leafNode("author",null,"Author"),u.closeNode(),u.openNode("commentList"),f.comments.forEach(h=>{this.map.comment.render(u,h)}),u.closeNode(),u.closeNode()},parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(u),!0;default:return!1}},parseText(u){this.parser&&this.parser.parseText(u)},parseClose(u){switch(u){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,o,l){(o===l[2]||this.tag==="x:SizeWithCells"&&o===l[1])&&s.leafNode(this.tag)}parseOpen(s){switch(s.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"x:Anchor"}getAnchorRect(s){const o=Math.floor(s.left),l=Math.floor(68*(s.left-o)),c=Math.floor(s.top),u=Math.floor(18*(s.top-c)),f=Math.floor(s.right),h=Math.floor(68*(s.right-f)),p=Math.floor(s.bottom);return[o,l,c,u,f,h,p,Math.floor(18*(s.bottom-p))]}getDefaultRect(s){const o=s.col,l=Math.max(s.row-2,0);return[o,6,l,14,o+2,2,l+4,16]}render(s,o){const l=o.anchor?this.getAnchorRect(o.anchor):this.getDefaultRect(o.refAddress);s.leafNode("x:Anchor",null,l.join(", "))}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../base-xform":32}],44:[function(e,n,a){const i=e("../base-xform"),s=e("./vml-anchor-xform"),o=e("./style/vml-protection-xform"),l=e("./style/vml-position-xform"),c=["twoCells","oneCells","absolute"];n.exports=class extends i{constructor(){super(),this.map={"x:Anchor":new s,"x:Locked":new o({tag:"x:Locked"}),"x:LockText":new o({tag:"x:LockText"}),"x:SizeWithCells":new l({tag:"x:SizeWithCells"}),"x:MoveWithCells":new l({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(u,f){const{protection:h,editAs:p}=f.note;u.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(u,p,c),this.map["x:SizeWithCells"].render(u,p,c),this.map["x:Anchor"].render(u,f),this.map["x:Locked"].render(u,h.locked),u.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(u,h.lockText),u.leafNode("x:Row",null,f.refAddress.row-1),u.leafNode("x:Column",null,f.refAddress.col-1),u.closeNode()}parseOpen(u){switch(u.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const u=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),f=Object.keys(u).length;this.model.editAs=c[f],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("./vml-shape-xform");class l extends s{constructor(){super(),this.map={"v:shape":new o}}get tag(){return"xml"}render(u,f){u.openXml(i.StdDocAttributes),u.openNode(this.tag,l.DRAWING_ATTRIBUTES),u.openNode("o:shapelayout",{"v:ext":"edit"}),u.leafNode("o:idmap",{"v:ext":"edit",data:1}),u.closeNode(),u.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),u.leafNode("v:stroke",{joinstyle:"miter"}),u.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),u.closeNode(),f.comments.forEach((h,p)=>{this.map["v:shape"].render(u,h,p)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,f){u.anchors.forEach(h=>{h.br?this.map["xdr:twoCellAnchor"].reconcile(h,f):this.map["xdr:oneCellAnchor"].reconcile(h,f)})}}l.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(e,n,a){const i=e("../base-xform"),s=e("./vml-textbox-xform"),o=e("./vml-client-data-xform");class l extends i{constructor(){super(),this.map={"v:textbox":new s,"x:ClientData":new o}}get tag(){return"v:shape"}render(u,f,h){u.openNode("v:shape",l.V_SHAPE_ATTRIBUTES(f,h)),u.leafNode("v:fill",{color2:"infoBackground [80]"}),u.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),u.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(u,f),this.map["x:ClientData"].render(u,f),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={margins:{insetmode:u.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}l.V_SHAPE_ATTRIBUTES=(c,u)=>({id:"_x0000_s"+(1025+u),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":c.note.margins&&c.note.margins.insetmode}),n.exports=l},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"v:textbox"}conversionUnit(s,o,l){return`${parseFloat(s)*o.toFixed(2)}${l}`}reverseConversionUnit(s){return(s||"").split(",").map(o=>Number(parseFloat(this.conversionUnit(parseFloat(o),.1,"")).toFixed(2)))}render(s,o){const l={style:"mso-direction-alt:auto"};if(o&&o.note){let{inset:c}=o.note&&o.note.margins;Array.isArray(c)&&(c=c.map(u=>this.conversionUnit(u,10,"mm")).join(",")),c&&(l.inset=c)}s.openNode("v:textbox",l),s.leafNode("div",{style:"text-align:left"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:return this.model={inset:this.reverseConversionUnit(s.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(e,n,a){const i=e("./base-xform");n.exports=class extends i{createNewModel(s){return{}}parseOpen(s){return this.parser=this.parser||this.map[s.name],this.parser?(this.parser.parseOpen(s),!0):s.name===this.tag&&(this.model=this.createNewModel(s),!0)}parseText(s){this.parser&&this.parser.parseText(s)}onParserClose(s,o){this.model[s]=o.model}parseClose(s){return this.parser?(this.parser.parseClose(s)||(this.onParserClose(s,this.parser),this.parser=void 0),!0):s!==this.tag}}},{"./base-xform":32}],49:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{render(s,o){s.openNode("HeadingPairs"),s.openNode("vt:vector",{size:2,baseType:"variant"}),s.openNode("vt:variant"),s.leafNode("vt:lpstr",void 0,"Worksheets"),s.closeNode(),s.openNode("vt:variant"),s.leafNode("vt:i4",void 0,o.length),s.closeNode(),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="HeadingPairs"}parseText(){}parseClose(s){return s!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{render(s,o){s.openNode("TitlesOfParts"),s.openNode("vt:vector",{size:o.length,baseType:"lpstr"}),o.forEach(l=>{s.leafNode("vt:lpstr",void 0,l.name)}),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="TitlesOfParts"}parseText(){}parseClose(s){return s!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("../simple/string-xform"),l=e("./app-heading-pairs-xform"),c=e("./app-titles-of-parts-xform");class u extends s{constructor(){super(),this.map={Company:new o({tag:"Company"}),Manager:new o({tag:"Manager"}),HeadingPairs:new l,TitleOfParts:new c}}render(h,p){h.openXml(i.StdDocAttributes),h.openNode("Properties",u.PROPERTY_ATTRIBUTES),h.leafNode("Application",void 0,"Microsoft Excel"),h.leafNode("DocSecurity",void 0,"0"),h.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(h,p.worksheets),this.map.TitleOfParts.render(h,p.worksheets),this.map.Company.render(h,p.company||""),this.map.Manager.render(h,p.manager),h.leafNode("LinksUpToDate",void 0,"false"),h.leafNode("SharedDoc",void 0,"false"),h.leafNode("HyperlinksChanged",void 0,"false"),h.leafNode("AppVersion",void 0,"16.0300"),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"Properties":return!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}u.DateFormat=function(f){return f.toISOString().replace(/[.]\d{3,6}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},n.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform");class o extends s{render(c,u){c.openXml(i.StdDocAttributes),c.openNode("Types",o.PROPERTY_ATTRIBUTES);const f={};(u.media||[]).forEach(h=>{if(h.type==="image"){const p=h.extension;f[p]||(f[p]=!0,c.leafNode("Default",{Extension:p,ContentType:"image/"+p}))}}),c.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),c.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),c.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),u.worksheets.forEach(h=>{const p=`/xl/worksheets/sheet${h.id}.xml`;c.leafNode("Override",{PartName:p,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),c.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),c.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),u.sharedStrings&&u.sharedStrings.count&&c.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),u.tables&&u.tables.forEach(h=>{c.leafNode("Override",{PartName:"/xl/tables/"+h.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),u.drawings&&u.drawings.forEach(h=>{c.leafNode("Override",{PartName:`/xl/drawings/${h.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),u.commentRefs&&(c.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),u.commentRefs.forEach(h=>{let{commentName:p}=h;c.leafNode("Override",{PartName:`/xl/${p}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),c.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),c.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),c.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}o.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},n.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("../simple/date-xform"),l=e("../simple/string-xform"),c=e("../simple/integer-xform");class u extends s{constructor(){super(),this.map={"dc:creator":new l({tag:"dc:creator"}),"dc:title":new l({tag:"dc:title"}),"dc:subject":new l({tag:"dc:subject"}),"dc:description":new l({tag:"dc:description"}),"dc:identifier":new l({tag:"dc:identifier"}),"dc:language":new l({tag:"dc:language"}),"cp:keywords":new l({tag:"cp:keywords"}),"cp:category":new l({tag:"cp:category"}),"cp:lastModifiedBy":new l({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new o({tag:"cp:lastPrinted",format:u.DateFormat}),"cp:revision":new c({tag:"cp:revision"}),"cp:version":new l({tag:"cp:version"}),"cp:contentStatus":new l({tag:"cp:contentStatus"}),"cp:contentType":new l({tag:"cp:contentType"}),"dcterms:created":new o({tag:"dcterms:created",attrs:u.DateAttrs,format:u.DateFormat}),"dcterms:modified":new o({tag:"dcterms:modified",attrs:u.DateAttrs,format:u.DateFormat})}}render(h,p){h.openXml(i.StdDocAttributes),h.openNode("cp:coreProperties",u.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(h,p.creator),this.map["dc:title"].render(h,p.title),this.map["dc:subject"].render(h,p.subject),this.map["dc:description"].render(h,p.description),this.map["dc:identifier"].render(h,p.identifier),this.map["dc:language"].render(h,p.language),this.map["cp:keywords"].render(h,p.keywords),this.map["cp:category"].render(h,p.category),this.map["cp:lastModifiedBy"].render(h,p.lastModifiedBy),this.map["cp:lastPrinted"].render(h,p.lastPrinted),this.map["cp:revision"].render(h,p.revision),this.map["cp:version"].render(h,p.version),this.map["cp:contentStatus"].render(h,p.contentStatus),this.map["cp:contentType"].render(h,p.contentType),this.map["dcterms:created"].render(h,p.created),this.map["dcterms:modified"].render(h,p.modified),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[h.name],this.parser)return this.parser.parseOpen(h),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(h))}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+h)}}}u.DateFormat=function(f){return f.toISOString().replace(/[.]\d{3}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},n.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{render(s,o){s.leafNode("Relationship",o)}parseOpen(s){switch(s.name){case"Relationship":return this.model=s.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("./relationship-xform");class l extends s{constructor(){super(),this.map={Relationship:new o}}render(u,f){f=f||this._values,u.openXml(i.StdDocAttributes),u.openNode("Relationships",l.RELATIONSHIPS_ATTRIBUTES),f.forEach(h=>{this.map.Relationship.render(u,h)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(u){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}l.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset(),this.model={range:{editAs:s.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}reconcilePicture(s,o){if(s&&s.rId){const l=o.rels[s.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(l){const c=l[1],u=o.mediaIndex[c];return o.media[u]}}}}},{"../base-xform":32}],57:[function(e,n,a){const i=e("../base-xform"),s=e("./blip-xform");n.exports=class extends i{constructor(){super(),this.map={"a:blip":new s}}get tag(){return"xdr:blipFill"}render(o,l){o.openNode(this.tag),this.map["a:blip"].render(o,l),o.openNode("a:stretch"),o.leafNode("a:fillRect"),o.closeNode(),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"a:blip"}render(s,o){s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":o.rId,cstate:"print"})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"xdr:cNvPicPr"}render(s){s.openNode(this.tag),s.leafNode("a:picLocks",{noChangeAspect:"1"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(e,n,a){const i=e("../base-xform"),s=e("./hlink-click-xform"),o=e("./ext-lst-xform");n.exports=class extends i{constructor(){super(),this.map={"a:hlinkClick":new s,"a:extLst":new o}}get tag(){return"xdr:cNvPr"}render(l,c){l.openNode(this.tag,{id:c.index,name:"Picture "+c.index}),this.map["a:hlinkClick"].render(l,c),this.map["a:extLst"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(e,n,a){const i=e("../base-xform"),s=e("../simple/integer-xform");n.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.map={"xdr:col":new s({tag:"xdr:col",zero:!0}),"xdr:colOff":new s({tag:"xdr:colOff",zero:!0}),"xdr:row":new s({tag:"xdr:row",zero:!0}),"xdr:rowOff":new s({tag:"xdr:rowOff",zero:!0})}}render(o,l){o.openNode(this.tag),this.map["xdr:col"].render(o,l.nativeCol),this.map["xdr:colOff"].render(o,l.nativeColOff),this.map["xdr:row"].render(o,l.nativeRow),this.map["xdr:rowOff"].render(o,l.nativeRowOff),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(e,n,a){const i=e("../../../utils/col-cache"),s=e("../../../utils/xml-stream"),o=e("../base-xform"),l=e("./two-cell-anchor-xform"),c=e("./one-cell-anchor-xform");class u extends o{constructor(){super(),this.map={"xdr:twoCellAnchor":new l,"xdr:oneCellAnchor":new c}}prepare(h){h.anchors.forEach((p,g)=>{p.anchorType=(function(y){return(typeof y.range=="string"?i.decode(y.range):y.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"})(p),this.map[p.anchorType].prepare(p,{index:g})})}get tag(){return"xdr:wsDr"}render(h,p){h.openXml(s.StdDocAttributes),h.openNode(this.tag,u.DRAWING_ATTRIBUTES),p.anchors.forEach(g=>{this.map[g.anchorType].render(h,g)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(h){case this.tag:return!1;default:return!0}}reconcile(h,p){h.anchors.forEach(g=>{g.br?this.map["xdr:twoCellAnchor"].reconcile(g,p):this.map["xdr:oneCellAnchor"].reconcile(g,p)})}}u.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},n.exports=u},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"a:extLst"}render(s){s.openNode(this.tag),s.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),s.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),s.closeNode(),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.map={}}render(s,o){s.openNode(this.tag);const l=Math.floor(9525*o.width),c=Math.floor(9525*o.height);s.addAttribute("cx",l),s.addAttribute("cy",c),s.closeNode()}parseOpen(s){return s.name===this.tag&&(this.model={width:parseInt(s.attributes.cx||"0",10)/9525,height:parseInt(s.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"a:hlinkClick"}render(s,o){o.hyperlinks&&o.hyperlinks.rId&&s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":o.hyperlinks.rId,tooltip:o.hyperlinks.tooltip})}parseOpen(s){switch(s.name){case this.tag:return this.model={hyperlinks:{rId:s.attributes["r:id"],tooltip:s.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(e,n,a){const i=e("../base-xform"),s=e("./c-nv-pr-xform"),o=e("./c-nv-pic-pr-xform");n.exports=class extends i{constructor(){super(),this.map={"xdr:cNvPr":new s,"xdr:cNvPicPr":new o}}get tag(){return"xdr:nvPicPr"}render(l,c){l.openNode(this.tag),this.map["xdr:cNvPr"].render(l,c),this.map["xdr:cNvPicPr"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(e,n,a){const i=e("./base-cell-anchor-xform"),s=e("../static-xform"),o=e("./cell-position-xform"),l=e("./ext-xform"),c=e("./pic-xform");n.exports=class extends i{constructor(){super(),this.map={"xdr:from":new o({tag:"xdr:from"}),"xdr:ext":new l({tag:"xdr:ext"}),"xdr:pic":new c,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(u,f){this.map["xdr:pic"].prepare(u.picture,f)}render(u,f){u.openNode(this.tag,{editAs:f.range.editAs||"oneCell"}),this.map["xdr:from"].render(u,f.range.tl),this.map["xdr:ext"].render(u,f.range.ext),this.map["xdr:pic"].render(u,f.picture),this.map["xdr:clientData"].render(u,{}),u.closeNode()}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(u,f){u.medium=this.reconcilePicture(u.picture,f)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(e,n,a){const i=e("../base-xform"),s=e("../static-xform"),o=e("./blip-fill-xform"),l=e("./nv-pic-pr-xform"),c=e("./sp-pr");n.exports=class extends i{constructor(){super(),this.map={"xdr:nvPicPr":new l,"xdr:blipFill":new o,"xdr:spPr":new s(c)}}get tag(){return"xdr:pic"}prepare(u,f){u.index=f.index+1}render(u,f){u.openNode(this.tag),this.map["xdr:nvPicPr"].render(u,f),this.map["xdr:blipFill"].render(u,f),this.map["xdr:spPr"].render(u,f),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(e,n,a){n.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(e,n,a){const i=e("./base-cell-anchor-xform"),s=e("../static-xform"),o=e("./cell-position-xform"),l=e("./pic-xform");n.exports=class extends i{constructor(){super(),this.map={"xdr:from":new o({tag:"xdr:from"}),"xdr:to":new o({tag:"xdr:to"}),"xdr:pic":new l,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(c,u){this.map["xdr:pic"].prepare(c.picture,u)}render(c,u){c.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(c,u.range.tl),this.map["xdr:to"].render(c,u.range.br),this.map["xdr:pic"].render(c,u.picture),this.map["xdr:clientData"].render(c,{}),c.closeNode()}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(c,u){c.medium=this.reconcilePicture(c.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(e,n,a){const i=e("./base-xform");n.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.always=!!s.always,this.count=s.count,this.empty=s.empty,this.$count=s.$count||"count",this.$=s.$,this.childXform=s.childXform,this.maxItems=s.maxItems}prepare(s,o){const{childXform:l}=this;s&&s.forEach((c,u)=>{o.index=u,l.prepare(c,o)})}render(s,o){if(this.always||o&&o.length){s.openNode(this.tag,this.$),this.count&&s.addAttribute(this.$count,o&&o.length||0);const{childXform:l}=this;(o||[]).forEach((c,u)=>{l.render(s,c,u)}),s.closeNode()}else this.empty&&s.leafNode(this.tag)}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(s)&&(this.parser=this.childXform,!0)}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser){if(!this.parser.parseClose(s)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(s,o){if(s){const{childXform:l}=this;s.forEach(c=>{l.reconcile(c,o)})}}}},{"./base-xform":32}],72:[function(e,n,a){const i=e("../../../utils/col-cache"),s=e("../base-xform");n.exports=class extends s{get tag(){return"autoFilter"}render(o,l){if(l)if(typeof l=="string")o.leafNode("autoFilter",{ref:l});else{const c=function(h){return typeof h=="string"?h:i.getAddress(h.row,h.column).address},u=c(l.from),f=c(l.to);u&&f&&o.leafNode("autoFilter",{ref:`${u}:${f}`})}}parseOpen(o){o.name==="autoFilter"&&(this.model=o.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(e,n,a){const i=e("../../../utils/utils"),s=e("../base-xform"),o=e("../../../doc/range"),l=e("../../../doc/enums"),c=e("../strings/rich-text-xform");function u(f){if(f==null)return l.ValueType.Null;if(f instanceof String||typeof f=="string")return l.ValueType.String;if(typeof f=="number")return l.ValueType.Number;if(typeof f=="boolean")return l.ValueType.Boolean;if(f instanceof Date)return l.ValueType.Date;if(f.text&&f.hyperlink)return l.ValueType.Hyperlink;if(f.formula)return l.ValueType.Formula;if(f.error)return l.ValueType.Error;throw new Error("I could not understand type of value")}n.exports=class extends s{constructor(){super(),this.richTextXForm=new c}get tag(){return"c"}prepare(f,h){const p=h.styles.addStyleModel(f.style||{},(function(g){switch(g.type){case l.ValueType.Formula:return u(g.result);default:return g.type}})(f));switch(p&&(f.styleId=p),f.comment&&h.comments.push({...f.comment,ref:f.address}),f.type){case l.ValueType.String:case l.ValueType.RichText:h.sharedStrings&&(f.ssId=h.sharedStrings.add(f.value));break;case l.ValueType.Date:h.date1904&&(f.date1904=!0);break;case l.ValueType.Hyperlink:h.sharedStrings&&f.text!==void 0&&f.text!==null&&(f.ssId=h.sharedStrings.add(f.text)),h.hyperlinks.push({address:f.address,target:f.hyperlink,tooltip:f.tooltip});break;case l.ValueType.Merge:h.merges.add(f);break;case l.ValueType.Formula:if(h.date1904&&(f.date1904=!0),f.shareType==="shared"&&(f.si=h.siFormulae++),f.formula)h.formulae[f.address]=f;else if(f.sharedFormula){const g=h.formulae[f.sharedFormula];if(!g)throw new Error("Shared Formula master must exist above and or left of clone for cell "+f.address);g.si===void 0?(g.shareType="shared",g.si=h.siFormulae++,g.range=new o(g.address,f.address)):g.range&&g.range.expandToAddress(f.address),f.si=g.si}}}renderFormula(f,h){let p=null;switch(h.shareType){case"shared":p={t:"shared",ref:h.ref||h.range.range,si:h.si};break;case"array":p={t:"array",ref:h.ref};break;default:h.si!==void 0&&(p={t:"shared",si:h.si})}switch(u(h.result)){case l.ValueType.Null:f.leafNode("f",p,h.formula);break;case l.ValueType.String:f.addAttribute("t","str"),f.leafNode("f",p,h.formula),f.leafNode("v",null,h.result);break;case l.ValueType.Number:f.leafNode("f",p,h.formula),f.leafNode("v",null,h.result);break;case l.ValueType.Boolean:f.addAttribute("t","b"),f.leafNode("f",p,h.formula),f.leafNode("v",null,h.result?1:0);break;case l.ValueType.Error:f.addAttribute("t","e"),f.leafNode("f",p,h.formula),f.leafNode("v",null,h.result.error);break;case l.ValueType.Date:f.leafNode("f",p,h.formula),f.leafNode("v",null,i.dateToExcel(h.result,h.date1904));break;default:throw new Error("I could not understand type of value")}}render(f,h){if(h.type!==l.ValueType.Null||h.styleId){switch(f.openNode("c"),f.addAttribute("r",h.address),h.styleId&&f.addAttribute("s",h.styleId),h.type){case l.ValueType.Null:break;case l.ValueType.Number:f.leafNode("v",null,h.value);break;case l.ValueType.Boolean:f.addAttribute("t","b"),f.leafNode("v",null,h.value?"1":"0");break;case l.ValueType.Error:f.addAttribute("t","e"),f.leafNode("v",null,h.value.error);break;case l.ValueType.String:case l.ValueType.RichText:h.ssId!==void 0?(f.addAttribute("t","s"),f.leafNode("v",null,h.ssId)):h.value&&h.value.richText?(f.addAttribute("t","inlineStr"),f.openNode("is"),h.value.richText.forEach(p=>{this.richTextXForm.render(f,p)}),f.closeNode("is")):(f.addAttribute("t","str"),f.leafNode("v",null,h.value));break;case l.ValueType.Date:f.leafNode("v",null,i.dateToExcel(h.value,h.date1904));break;case l.ValueType.Hyperlink:h.ssId!==void 0?(f.addAttribute("t","s"),f.leafNode("v",null,h.ssId)):(f.addAttribute("t","str"),f.leafNode("v",null,h.text));break;case l.ValueType.Formula:this.renderFormula(f,h);break;case l.ValueType.Merge:}f.closeNode()}}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"c":return this.model={address:f.attributes.r},this.t=f.attributes.t,f.attributes.s&&(this.model.styleId=parseInt(f.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=f.attributes.si,this.model.shareType=f.attributes.t,this.model.ref=f.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){if(this.parser)this.parser.parseText(f);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+f:f;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+f:f:this.model.value=this.model.value?this.model.value+f:f}}parseClose(f){switch(f){case"c":{const{model:h}=this;if(h.formula||h.shareType)h.type=l.ValueType.Formula,h.value&&(this.t==="str"?h.result=i.xmlDecode(h.value):this.t==="b"?h.result=parseInt(h.value,10)!==0:this.t==="e"?h.result={error:h.value}:h.result=parseFloat(h.value),h.value=void 0);else if(h.value!==void 0)switch(this.t){case"s":h.type=l.ValueType.String,h.value=parseInt(h.value,10);break;case"str":h.type=l.ValueType.String,h.value=i.xmlDecode(h.value);break;case"inlineStr":h.type=l.ValueType.String;break;case"b":h.type=l.ValueType.Boolean,h.value=parseInt(h.value,10)!==0;break;case"e":h.type=l.ValueType.Error,h.value={error:h.value};break;default:h.type=l.ValueType.Number,h.value=parseFloat(h.value)}else h.styleId?h.type=l.ValueType.Null:h.type=l.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(f),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(f),!0)}}reconcile(f,h){const p=f.styleId&&h.styles&&h.styles.getStyleModel(f.styleId);switch(p&&(f.style=p),f.styleId!==void 0&&(f.styleId=void 0),f.type){case l.ValueType.String:typeof f.value=="number"&&h.sharedStrings&&(f.value=h.sharedStrings.getString(f.value)),f.value.richText&&(f.type=l.ValueType.RichText);break;case l.ValueType.Number:p&&i.isDateFmt(p.numFmt)&&(f.type=l.ValueType.Date,f.value=i.excelToDate(f.value,h.date1904));break;case l.ValueType.Formula:f.result!==void 0&&p&&i.isDateFmt(p.numFmt)&&(f.result=i.excelToDate(f.result,h.date1904)),f.shareType==="shared"&&(f.ref?h.formulae[f.si]=f.address:(f.sharedFormula=h.formulae[f.si],delete f.shareType),delete f.si)}const g=h.hyperlinkMap[f.address];g&&(f.type===l.ValueType.Formula?(f.text=f.result,f.result=void 0):(f.text=f.value,f.value=void 0),f.type=l.ValueType.Hyperlink,f.hyperlink=g);const y=h.commentsMap&&h.commentsMap[f.address];y&&(f.comment=y)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{get tag(){return"x14:cfIcon"}render(s,o){s.leafNode(this.tag,{iconSet:o.iconSet,iconId:o.iconId})}parseOpen(s){let{attributes:o}=s;this.model={iconSet:o.iconSet,iconId:i.toIntValue(o.iconId)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],75:[function(e,n,a){const{v4:i}=e("uuid"),s=e("../../base-xform"),o=e("../../composite-xform"),l=e("./databar-ext-xform"),c=e("./icon-set-ext-xform"),u={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class f extends o{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new l,"x14:iconSet":this.iconSetXform=new c}}get tag(){return"x14:cfRule"}static isExt(p){return p.type==="dataBar"?l.isExt(p):!(p.type!=="iconSet"||!p.custom&&!u[p.iconSet])}prepare(p){f.isExt(p)&&(p.x14Id=`{${i()}}`.toUpperCase())}render(p,g){if(f.isExt(g))switch(g.type){case"dataBar":this.renderDataBar(p,g);break;case"iconSet":this.renderIconSet(p,g)}}renderDataBar(p,g){p.openNode(this.tag,{type:"dataBar",id:g.x14Id}),this.databarXform.render(p,g),p.closeNode()}renderIconSet(p,g){p.openNode(this.tag,{type:"iconSet",priority:g.priority,id:g.x14Id||`{${i()}}`}),this.iconSetXform.render(p,g),p.closeNode()}createNewModel(p){let{attributes:g}=p;return{type:g.type,x14Id:g.id,priority:s.toIntValue(g.priority)}}onParserClose(p,g){Object.assign(this.model,g.model)}}n.exports=f},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(e,n,a){const i=e("../../composite-xform"),s=e("./f-ext-xform");n.exports=class extends i{constructor(){super(),this.map={"xm:f":this.fExtXform=new s}}get tag(){return"x14:cfvo"}render(o,l){o.openNode(this.tag,{type:l.type}),l.value!==void 0&&this.fExtXform.render(o,l.value),o.closeNode()}createNewModel(o){return{type:o.attributes.type}}onParserClose(o,l){switch(o){case"xm:f":this.model.value=l.model?parseFloat(l.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(e,n,a){const i=e("../../composite-xform"),s=e("./sqref-ext-xform"),o=e("./cf-rule-ext-xform");n.exports=class extends i{constructor(){super(),this.map={"xm:sqref":this.sqRef=new s,"x14:cfRule":this.cfRule=new o}}get tag(){return"x14:conditionalFormatting"}prepare(l,c){l.rules.forEach(u=>{this.cfRule.prepare(u,c)})}render(l,c){c.rules.some(o.isExt)&&(l.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),c.rules.filter(o.isExt).forEach(u=>this.cfRule.render(l,u)),this.sqRef.render(l,c.ref),l.closeNode())}createNewModel(){return{rules:[]}}onParserClose(l,c){switch(l){case"xm:sqref":this.model.ref=c.model;break;case"x14:cfRule":this.model.rules.push(c.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(e,n,a){const i=e("../../composite-xform"),s=e("./cf-rule-ext-xform"),o=e("./conditional-formatting-ext-xform");n.exports=class extends i{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new o}}get tag(){return"x14:conditionalFormattings"}hasContent(l){return l.hasExtContent===void 0&&(l.hasExtContent=l.some(c=>c.rules.some(s.isExt))),l.hasExtContent}prepare(l,c){l.forEach(u=>{this.cfXform.prepare(u,c)})}render(l,c){this.hasContent(c)&&(l.openNode(this.tag),c.forEach(u=>this.cfXform.render(l,u)),l.closeNode())}createNewModel(){return[]}onParserClose(l,c){this.model.push(c.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(e,n,a){const i=e("../../base-xform"),s=e("../../composite-xform"),o=e("../../style/color-xform"),l=e("./cfvo-ext-xform");n.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:borderColor":this.borderColorXform=new o("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new o("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new o("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new o("x14:axisColor")}}static isExt(c){return!c.gradient}get tag(){return"x14:dataBar"}render(c,u){c.openNode(this.tag,{minLength:i.toIntAttribute(u.minLength,0,!0),maxLength:i.toIntAttribute(u.maxLength,100,!0),border:i.toBoolAttribute(u.border,!1),gradient:i.toBoolAttribute(u.gradient,!0),negativeBarColorSameAsPositive:i.toBoolAttribute(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolAttribute(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toAttribute(u.axisPosition,"auto"),direction:i.toAttribute(u.direction,"leftToRight")}),u.cfvo.forEach(f=>{this.cfvoXform.render(c,f)}),this.borderColorXform.render(c,u.borderColor),this.negativeBorderColorXform.render(c,u.negativeBorderColor),this.negativeFillColorXform.render(c,u.negativeFillColor),this.axisColorXform.render(c,u.axisColor),c.closeNode()}createNewModel(c){let{attributes:u}=c;return{cfvo:[],minLength:i.toIntValue(u.minLength,0),maxLength:i.toIntValue(u.maxLength,100),border:i.toBoolValue(u.border,!1),gradient:i.toBoolValue(u.gradient,!0),negativeBarColorSameAsPositive:i.toBoolValue(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolValue(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toStringValue(u.axisPosition,"auto"),direction:i.toStringValue(u.direction,"leftToRight")}}onParserClose(c,u){const[,f]=c.split(":");switch(f){case"cfvo":this.model.cfvo.push(u.model);break;default:this.model[f]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{get tag(){return"xm:f"}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],81:[function(e,n,a){const i=e("../../base-xform"),s=e("../../composite-xform"),o=e("./cfvo-ext-xform"),l=e("./cf-icon-ext-xform");n.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new o,"x14:cfIcon":this.cfIconXform=new l}}get tag(){return"x14:iconSet"}render(c,u){c.openNode(this.tag,{iconSet:i.toStringAttribute(u.iconSet),reverse:i.toBoolAttribute(u.reverse,!1),showValue:i.toBoolAttribute(u.showValue,!0),custom:i.toBoolAttribute(u.icons,!1)}),u.cfvo.forEach(f=>{this.cfvoXform.render(c,f)}),u.icons&&u.icons.forEach((f,h)=>{f.iconId=h,this.cfIconXform.render(c,f)}),c.closeNode()}createNewModel(c){let{attributes:u}=c;return{cfvo:[],iconSet:i.toStringValue(u.iconSet,"3TrafficLights"),reverse:i.toBoolValue(u.reverse,!1),showValue:i.toBoolValue(u.showValue,!0)}}onParserClose(c,u){const[,f]=c.split(":");switch(f){case"cfvo":this.model.cfvo.push(u.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(u.model);break;default:this.model[f]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{get tag(){return"xm:sqref"}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],83:[function(e,n,a){const i=e("../../base-xform"),s=e("../../composite-xform"),o=e("../../../../doc/range"),l=e("./databar-xform"),c=e("./ext-lst-ref-xform"),u=e("./formula-xform"),f=e("./color-scale-xform"),h=e("./icon-set-xform"),p={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},g=m=>{const{type:v,operator:b}=m;switch(v){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:v};default:return{type:v,operator:b}}};class y extends s{constructor(){super(),this.map={dataBar:this.databarXform=new l,extLst:this.extLstRefXform=new c,formula:this.formulaXform=new u,colorScale:this.colorScaleXform=new f,iconSet:this.iconSetXform=new h}}get tag(){return"cfRule"}static isPrimitive(v){return v.type!=="iconSet"||!v.custom&&!p[v.iconSet]}render(v,b){switch(b.type){case"expression":this.renderExpression(v,b);break;case"cellIs":this.renderCellIs(v,b);break;case"top10":this.renderTop10(v,b);break;case"aboveAverage":this.renderAboveAverage(v,b);break;case"dataBar":this.renderDataBar(v,b);break;case"colorScale":this.renderColorScale(v,b);break;case"iconSet":this.renderIconSet(v,b);break;case"containsText":this.renderText(v,b);break;case"timePeriod":this.renderTimePeriod(v,b)}}renderExpression(v,b){v.openNode(this.tag,{type:"expression",dxfId:b.dxfId,priority:b.priority}),this.formulaXform.render(v,b.formulae[0]),v.closeNode()}renderCellIs(v,b){v.openNode(this.tag,{type:"cellIs",dxfId:b.dxfId,priority:b.priority,operator:b.operator}),b.formulae.forEach(x=>{this.formulaXform.render(v,x)}),v.closeNode()}renderTop10(v,b){v.leafNode(this.tag,{type:"top10",dxfId:b.dxfId,priority:b.priority,percent:i.toBoolAttribute(b.percent,!1),bottom:i.toBoolAttribute(b.bottom,!1),rank:i.toIntValue(b.rank,10,!0)})}renderAboveAverage(v,b){v.leafNode(this.tag,{type:"aboveAverage",dxfId:b.dxfId,priority:b.priority,aboveAverage:i.toBoolAttribute(b.aboveAverage,!0)})}renderDataBar(v,b){v.openNode(this.tag,{type:"dataBar",priority:b.priority}),this.databarXform.render(v,b),this.extLstRefXform.render(v,b),v.closeNode()}renderColorScale(v,b){v.openNode(this.tag,{type:"colorScale",priority:b.priority}),this.colorScaleXform.render(v,b),v.closeNode()}renderIconSet(v,b){y.isPrimitive(b)&&(v.openNode(this.tag,{type:"iconSet",priority:b.priority}),this.iconSetXform.render(v,b),v.closeNode())}renderText(v,b){v.openNode(this.tag,{type:b.operator,dxfId:b.dxfId,priority:b.priority,operator:i.toStringAttribute(b.operator,"containsText")});const x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];const _=new o(S.ref),{tl:I}=_;switch(S.operator){case"containsText":return`NOT(ISERROR(SEARCH("${S.text}",${I})))`;case"containsBlanks":return`LEN(TRIM(${I}))=0`;case"notContainsBlanks":return`LEN(TRIM(${I}))>0`;case"containsErrors":return`ISERROR(${I})`;case"notContainsErrors":return`NOT(ISERROR(${I}))`;default:return}})(b);x&&this.formulaXform.render(v,x),v.closeNode()}renderTimePeriod(v,b){v.openNode(this.tag,{type:"timePeriod",dxfId:b.dxfId,priority:b.priority,timePeriod:b.timePeriod});const x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];const _=new o(S.ref),{tl:I}=_;switch(S.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${I},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${I},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${I},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${I},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${I},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${I},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${I},1)=TODAY()-1`;case"today":return`FLOOR(${I},1)=TODAY()`;case"tomorrow":return`FLOOR(${I},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${I},1)<=6,FLOOR(${I},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${I})=MONTH(EDATE(TODAY(),0-1)),YEAR(${I})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${I})=MONTH(TODAY()),YEAR(${I})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${I})=MONTH(EDATE(TODAY(),0+1)),YEAR(${I})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(b);x&&this.formulaXform.render(v,x),v.closeNode()}createNewModel(v){let{attributes:b}=v;return{...g(b),dxfId:i.toIntValue(b.dxfId),priority:i.toIntValue(b.priority),timePeriod:b.timePeriod,percent:i.toBoolValue(b.percent),bottom:i.toBoolValue(b.bottom),rank:i.toIntValue(b.rank),aboveAverage:i.toBoolValue(b.aboveAverage)}}onParserClose(v,b){switch(v){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,b.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(b.model)}}}n.exports=y},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{get tag(){return"cfvo"}render(s,o){s.leafNode(this.tag,{type:o.type,val:o.value})}parseOpen(s){this.model={type:s.attributes.type,value:i.toFloatValue(s.attributes.val)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],85:[function(e,n,a){const i=e("../../composite-xform"),s=e("../../style/color-xform"),o=e("./cfvo-xform");n.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new o,color:this.colorXform=new s}}get tag(){return"colorScale"}render(l,c){l.openNode(this.tag),c.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),c.color.forEach(u=>{this.colorXform.render(l,u)}),l.closeNode()}createNewModel(l){return{cfvo:[],color:[]}}onParserClose(l,c){this.model[l].push(c.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(e,n,a){const i=e("../../composite-xform"),s=e("./cf-rule-xform");n.exports=class extends i{constructor(){super(),this.map={cfRule:new s}}get tag(){return"conditionalFormatting"}render(o,l){l.rules.some(s.isPrimitive)&&(o.openNode(this.tag,{sqref:l.ref}),l.rules.forEach(c=>{s.isPrimitive(c)&&(c.ref=l.ref,this.map.cfRule.render(o,c))}),o.closeNode())}createNewModel(o){let{attributes:l}=o;return{ref:l.sqref,rules:[]}}onParserClose(o,l){this.model.rules.push(l.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(e,n,a){const i=e("../../base-xform"),s=e("./conditional-formatting-xform");n.exports=class extends i{constructor(){super(),this.cfXform=new s}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(o,l){let c=o.reduce((u,f)=>Math.max(u,...f.rules.map(h=>h.priority||0)),1);o.forEach(u=>{u.rules.forEach(f=>{f.priority||(f.priority=c++),f.style&&(f.dxfId=l.styles.addDxfStyle(f.style))})})}render(o,l){l.forEach(c=>{this.cfXform.render(o,c)})}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(o),!0;default:return!1}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){return!!this.parser&&(!!this.parser.parseClose(o)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(o,l){o.forEach(c=>{c.rules.forEach(u=>{u.dxfId!==void 0&&(u.style=l.styles.getDxfStyle(u.dxfId),delete u.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(e,n,a){const i=e("../../composite-xform"),s=e("../../style/color-xform"),o=e("./cfvo-xform");n.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new o,color:this.colorXform=new s}}get tag(){return"dataBar"}render(l,c){l.openNode(this.tag),c.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),this.colorXform.render(l,c.color),l.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(l,c){switch(l){case"cfvo":this.model.cfvo.push(c.model);break;case"color":this.model.color=c.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(e,n,a){const i=e("../../base-xform"),s=e("../../composite-xform");class o extends i{get tag(){return"x14:id"}render(u,f){u.leafNode(this.tag,null,f)}parseOpen(){this.model=""}parseText(u){this.model+=u}parseClose(u){return u!==this.tag}}class l extends s{constructor(){super(),this.map={"x14:id":this.idXform=new o}}get tag(){return"ext"}render(u,f){u.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(u,f.x14Id),u.closeNode()}createNewModel(){return{}}onParserClose(u,f){this.model.x14Id=f.model}}n.exports=class extends s{constructor(){super(),this.map={ext:new l}}get tag(){return"extLst"}render(c,u){c.openNode(this.tag),this.map.ext.render(c,u),c.closeNode()}createNewModel(){return{}}onParserClose(c,u){Object.assign(this.model,u.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(e,n,a){const i=e("../../base-xform");n.exports=class extends i{get tag(){return"formula"}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],91:[function(e,n,a){const i=e("../../base-xform"),s=e("../../composite-xform"),o=e("./cfvo-xform");n.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new o}}get tag(){return"iconSet"}render(l,c){l.openNode(this.tag,{iconSet:i.toStringAttribute(c.iconSet,"3TrafficLights"),reverse:i.toBoolAttribute(c.reverse,!1),showValue:i.toBoolAttribute(c.showValue,!0)}),c.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),l.closeNode()}createNewModel(l){let{attributes:c}=l;return{iconSet:i.toStringValue(c.iconSet,"3TrafficLights"),reverse:i.toBoolValue(c.reverse),showValue:i.toBoolValue(c.showValue),cfvo:[]}}onParserClose(l,c){this.model[l].push(c.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(e,n,a){const i=e("../../../utils/utils"),s=e("../base-xform");n.exports=class extends s{get tag(){return"col"}prepare(o,l){const c=l.styles.addStyleModel(o.style||{});c&&(o.styleId=c)}render(o,l){o.openNode("col"),o.addAttribute("min",l.min),o.addAttribute("max",l.max),l.width&&o.addAttribute("width",l.width),l.styleId&&o.addAttribute("style",l.styleId),l.hidden&&o.addAttribute("hidden","1"),l.bestFit&&o.addAttribute("bestFit","1"),l.outlineLevel&&o.addAttribute("outlineLevel",l.outlineLevel),l.collapsed&&o.addAttribute("collapsed","1"),o.addAttribute("customWidth","1"),o.closeNode()}parseOpen(o){if(o.name==="col"){const l=this.model={min:parseInt(o.attributes.min||"0",10),max:parseInt(o.attributes.max||"0",10),width:o.attributes.width===void 0?void 0:parseFloat(o.attributes.width||"0")};return o.attributes.style&&(l.styleId=parseInt(o.attributes.style,10)),i.parseBoolean(o.attributes.hidden)&&(l.hidden=!0),i.parseBoolean(o.attributes.bestFit)&&(l.bestFit=!0),o.attributes.outlineLevel&&(l.outlineLevel=parseInt(o.attributes.outlineLevel,10)),i.parseBoolean(o.attributes.collapsed)&&(l.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(o,l){o.styleId&&(o.style=l.styles.getStyleModel(o.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../../../utils/utils"),o=e("../../../utils/col-cache"),l=e("../base-xform"),c=e("../../../doc/range");function u(h,p,g,y){const m=p[g];m!==void 0?h[g]=m:y!==void 0&&(h[g]=y)}function f(h,p,g,y){const m=p[g];m!==void 0&&(h[g]=s.parseBoolean(m))}n.exports=class extends l{get tag(){return"dataValidations"}render(h,p){const g=(function(y){const m=i.map(y,(x,S)=>({address:S,dataValidation:x,marked:!1})).sort((x,S)=>i.strcmp(x.address,S.address)),v=i.keyBy(m,"address"),b=(x,S,_)=>{for(let I=0;I<S;I++){const A=o.encodeAddress(x.row+I,_);if(!y[A]||!i.isEqual(y[x.address],y[A]))return!1}return!0};return m.map(x=>{if(!x.marked){const S=o.decodeEx(x.address);if(S.dimensions)return v[S.dimensions].marked=!0,{...x.dataValidation,sqref:x.address};let _=1,I=o.encodeAddress(S.row+_,S.col);for(;y[I]&&i.isEqual(x.dataValidation,y[I]);)_++,I=o.encodeAddress(S.row+_,S.col);let A=1;for(;b(S,_,S.col+A);)A++;for(let O=0;O<_;O++)for(let M=0;M<A;M++)I=o.encodeAddress(S.row+O,S.col+M),v[I].marked=!0;if(_>1||A>1){const O=S.row+(_-1),M=S.col+(A-1);return{...x.dataValidation,sqref:`${x.address}:${o.encodeAddress(O,M)}`}}return{...x.dataValidation,sqref:x.address}}return null}).filter(Boolean)})(p);g.length&&(h.openNode("dataValidations",{count:g.length}),g.forEach(y=>{h.openNode("dataValidation"),y.type!=="any"&&(h.addAttribute("type",y.type),y.operator&&y.type!=="list"&&y.operator!=="between"&&h.addAttribute("operator",y.operator),y.allowBlank&&h.addAttribute("allowBlank","1")),y.showInputMessage&&h.addAttribute("showInputMessage","1"),y.promptTitle&&h.addAttribute("promptTitle",y.promptTitle),y.prompt&&h.addAttribute("prompt",y.prompt),y.showErrorMessage&&h.addAttribute("showErrorMessage","1"),y.errorStyle&&h.addAttribute("errorStyle",y.errorStyle),y.errorTitle&&h.addAttribute("errorTitle",y.errorTitle),y.error&&h.addAttribute("error",y.error),h.addAttribute("sqref",y.sqref),(y.formulae||[]).forEach((m,v)=>{h.openNode("formula"+(v+1)),y.type==="date"?h.writeText(s.dateToExcel(new Date(m))):h.writeText(m),h.closeNode()}),h.closeNode()}),h.closeNode())}parseOpen(h){switch(h.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=h.attributes.sqref;const p={type:h.attributes.type||"any",formulae:[]};switch(h.attributes.type&&f(p,h.attributes,"allowBlank"),f(p,h.attributes,"showInputMessage"),f(p,h.attributes,"showErrorMessage"),p.type){case"any":case"list":case"custom":break;default:u(p,h.attributes,"operator","between")}return u(p,h.attributes,"promptTitle"),u(p,h.attributes,"prompt"),u(p,h.attributes,"errorStyle"),u(p,h.attributes,"errorTitle"),u(p,h.attributes,"error"),this._dataValidation=p,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(h){this._formula&&this._formula.push(h)}parseClose(h){switch(h){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(p=>{p.includes(":")?new c(p).forEachAddress(g=>{this.model[g]=this._dataValidation}):this.model[p]=this._dataValidation}),!0;case"formula1":case"formula2":{let p=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":p=parseInt(p,10);break;case"decimal":p=parseFloat(p);break;case"date":p=s.excelToDate(parseFloat(p))}return this._dataValidation.formulae.push(p),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"dimension"}render(s,o){o&&s.leafNode("dimension",{ref:o})}parseOpen(s){return s.name==="dimension"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"drawing"}render(s,o){o&&s.leafNode(this.tag,{"r:id":o.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(e,n,a){const i=e("../composite-xform"),s=e("./cf-ext/conditional-formattings-ext-xform");class o extends i{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new s}}get tag(){return"ext"}hasContent(c){return this.conditionalFormattings.hasContent(c.conditionalFormattings)}prepare(c,u){this.conditionalFormattings.prepare(c.conditionalFormattings,u)}render(c,u){c.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(c,u.conditionalFormattings),c.closeNode()}createNewModel(){return{}}onParserClose(c,u){this.model[c]=u.model}}n.exports=class extends i{constructor(){super(),this.map={ext:this.ext=new o}}get tag(){return"extLst"}prepare(l,c){this.ext.prepare(l,c)}hasContent(l){return this.ext.hasContent(l)}render(l,c){this.hasContent(c)&&(l.openNode("extLst"),this.ext.render(l,c),l.closeNode())}createNewModel(){return{}}onParserClose(l,c){Object.assign(this.model,c.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"headerFooter"}render(s,o){if(o){s.addRollback();let l=!1;s.openNode("headerFooter"),o.differentFirst&&(s.addAttribute("differentFirst","1"),l=!0),o.differentOddEven&&(s.addAttribute("differentOddEven","1"),l=!0),o.oddHeader&&typeof o.oddHeader=="string"&&(s.leafNode("oddHeader",null,o.oddHeader),l=!0),o.oddFooter&&typeof o.oddFooter=="string"&&(s.leafNode("oddFooter",null,o.oddFooter),l=!0),o.evenHeader&&typeof o.evenHeader=="string"&&(s.leafNode("evenHeader",null,o.evenHeader),l=!0),o.evenFooter&&typeof o.evenFooter=="string"&&(s.leafNode("evenFooter",null,o.evenFooter),l=!0),o.firstHeader&&typeof o.firstHeader=="string"&&(s.leafNode("firstHeader",null,o.firstHeader),l=!0),o.firstFooter&&typeof o.firstFooter=="string"&&(s.leafNode("firstFooter",null,o.firstFooter),l=!0),l?(s.closeNode(),s.commit()):s.rollback()}}parseOpen(s){switch(s.name){case"headerFooter":return this.model={},s.attributes.differentFirst&&(this.model.differentFirst=parseInt(s.attributes.differentFirst,0)===1),s.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(s.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(s){switch(this.currentNode){case"oddHeader":this.model.oddHeader=s;break;case"oddFooter":this.model.oddFooter=s;break;case"evenHeader":this.model.evenHeader=s;break;case"evenFooter":this.model.evenFooter=s;break;case"firstHeader":this.model.firstHeader=s;break;case"firstFooter":this.model.firstFooter=s}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"hyperlink"}render(s,o){this.isInternalLink(o)?s.leafNode("hyperlink",{ref:o.address,"r:id":o.rId,tooltip:o.tooltip,location:o.target}):s.leafNode("hyperlink",{ref:o.address,"r:id":o.rId,tooltip:o.tooltip})}parseOpen(s){return s.name==="hyperlink"&&(this.model={address:s.attributes.ref,rId:s.attributes["r:id"],tooltip:s.attributes.tooltip},s.attributes.location&&(this.model.target=s.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(s){return s.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(s.target)}}},{"../base-xform":32}],99:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"mergeCell"}render(s,o){s.leafNode("mergeCell",{ref:o})}parseOpen(s){return s.name==="mergeCell"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../../../doc/range"),o=e("../../../utils/col-cache"),l=e("../../../doc/enums");n.exports=class{constructor(){this.merges={}}add(c){if(this.merges[c.master])this.merges[c.master].expandToAddress(c.address);else{const u=`${c.master}:${c.address}`;this.merges[c.master]=new s(u)}}get mergeCells(){return i.map(this.merges,c=>c.range)}reconcile(c,u){i.each(c,f=>{const h=o.decode(f);for(let p=h.top;p<=h.bottom;p++){const g=u[p-1];for(let y=h.left;y<=h.right;y++){const m=g.cells[y-1];m?m.type===l.ValueType.Merge&&(m.master=h.tl):g.cells[y]={type:l.ValueType.Null,address:o.encodeAddress(p,y)}}}})}getMasterAddress(c){const u=this.hash[c];return u&&u.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(e,n,a){const i=e("../base-xform"),s=o=>o!==void 0;n.exports=class extends i{get tag(){return"outlinePr"}render(o,l){return!(!l||!s(l.summaryBelow)&&!s(l.summaryRight))&&(o.leafNode(this.tag,{summaryBelow:s(l.summaryBelow)?Number(l.summaryBelow):void 0,summaryRight:s(l.summaryRight)?Number(l.summaryRight):void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={summaryBelow:s(o.attributes.summaryBelow)?!!Number(o.attributes.summaryBelow):void 0,summaryRight:s(o.attributes.summaryRight)?!!Number(o.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"brk"}render(s,o){s.leafNode("brk",o)}parseOpen(s){return s.name==="brk"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../base-xform");n.exports=class extends s{get tag(){return"pageMargins"}render(o,l){if(l){const c={left:l.left,right:l.right,top:l.top,bottom:l.bottom,header:l.header,footer:l.footer};i.some(c,u=>u!==void 0)&&o.leafNode(this.tag,c)}}parseOpen(o){switch(o.name){case this.tag:return this.model={left:parseFloat(o.attributes.left||.7),right:parseFloat(o.attributes.right||.7),top:parseFloat(o.attributes.top||.75),bottom:parseFloat(o.attributes.bottom||.75),header:parseFloat(o.attributes.header||.3),footer:parseFloat(o.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"pageSetUpPr"}render(s,o){return!(!o||!o.fitToPage)&&(s.leafNode(this.tag,{fitToPage:o.fitToPage?"1":void 0}),!0)}parseOpen(s){return s.name===this.tag&&(this.model={fitToPage:s.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../base-xform");function o(f){return f?"1":void 0}function l(f){switch(f){case"overThenDown":return f;default:return}}function c(f){switch(f){case"atEnd":case"asDisplyed":return f;default:return}}function u(f){switch(f){case"dash":case"blank":case"NA":return f;default:return}}n.exports=class extends s{get tag(){return"pageSetup"}render(f,h){if(h){const p={paperSize:h.paperSize,orientation:h.orientation,horizontalDpi:h.horizontalDpi,verticalDpi:h.verticalDpi,pageOrder:l(h.pageOrder),blackAndWhite:o(h.blackAndWhite),draft:o(h.draft),cellComments:c(h.cellComments),errors:u(h.errors),scale:h.scale,fitToWidth:h.fitToWidth,fitToHeight:h.fitToHeight,firstPageNumber:h.firstPageNumber,useFirstPageNumber:o(h.firstPageNumber),usePrinterDefaults:o(h.usePrinterDefaults),copies:h.copies};i.some(p,g=>g!==void 0)&&f.leafNode(this.tag,p)}}parseOpen(f){switch(f.name){case this.tag:return this.model={paperSize:(h=f.attributes.paperSize,h!==void 0?parseInt(h,10):void 0),orientation:f.attributes.orientation||"portrait",horizontalDpi:parseInt(f.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(f.attributes.verticalDpi||"4294967295",10),pageOrder:f.attributes.pageOrder||"downThenOver",blackAndWhite:f.attributes.blackAndWhite==="1",draft:f.attributes.draft==="1",cellComments:f.attributes.cellComments||"None",errors:f.attributes.errors||"displayed",scale:parseInt(f.attributes.scale||"100",10),fitToWidth:parseInt(f.attributes.fitToWidth||"1",10),fitToHeight:parseInt(f.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(f.attributes.firstPageNumber||"1",10),useFirstPageNumber:f.attributes.useFirstPageNumber==="1",usePrinterDefaults:f.attributes.usePrinterDefaults==="1",copies:parseInt(f.attributes.copies||"1",10)},!0;default:return!1}var h}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"picture"}render(s,o){o&&s.leafNode(this.tag,{"r:id":o.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../base-xform");function o(l){return l?"1":void 0}n.exports=class extends s{get tag(){return"printOptions"}render(l,c){if(c){const u={headings:o(c.showRowColHeaders),gridLines:o(c.showGridLines),horizontalCentered:o(c.horizontalCentered),verticalCentered:o(c.verticalCentered)};i.some(u,f=>f!==void 0)&&l.leafNode(this.tag,u)}}parseOpen(l){switch(l.name){case this.tag:return this.model={showRowColHeaders:l.attributes.headings==="1",showGridLines:l.attributes.gridLines==="1",horizontalCentered:l.attributes.horizontalCentered==="1",verticalCentered:l.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(e,n,a){const i=e("./page-breaks-xform"),s=e("../list-xform");n.exports=class extends s{constructor(){super({tag:"rowBreaks",count:!0,childXform:new i})}render(o,l){if(l&&l.length){o.openNode(this.tag,this.$),this.count&&(o.addAttribute(this.$count,l.length),o.addAttribute("manualBreakCount",l.length));const{childXform:c}=this;l.forEach(u=>{c.render(o,u)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(e,n,a){const i=e("../base-xform"),s=e("../../../utils/utils"),o=e("./cell-xform");n.exports=class extends i{constructor(l){super(),this.maxItems=l&&l.maxItems,this.map={c:new o}}get tag(){return"row"}prepare(l,c){const u=c.styles.addStyleModel(l.style);u&&(l.styleId=u);const f=this.map.c;l.cells.forEach(h=>{f.prepare(h,c)})}render(l,c,u){l.openNode("row"),l.addAttribute("r",c.number),c.height&&(l.addAttribute("ht",c.height),l.addAttribute("customHeight","1")),c.hidden&&l.addAttribute("hidden","1"),c.min>0&&c.max>0&&c.min<=c.max&&l.addAttribute("spans",`${c.min}:${c.max}`),c.styleId&&(l.addAttribute("s",c.styleId),l.addAttribute("customFormat","1")),l.addAttribute("x14ac:dyDescent","0.25"),c.outlineLevel&&l.addAttribute("outlineLevel",c.outlineLevel),c.collapsed&&l.addAttribute("collapsed","1");const f=this.map.c;c.cells.forEach(h=>{f.render(l,h,u)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;if(l.name==="row"){this.numRowsSeen+=1;const c=l.attributes.spans?l.attributes.spans.split(":").map(f=>parseInt(f,10)):[void 0,void 0],u=this.model={number:parseInt(l.attributes.r,10),min:c[0],max:c[1],cells:[]};return l.attributes.s&&(u.styleId=parseInt(l.attributes.s,10)),s.parseBoolean(l.attributes.hidden)&&(u.hidden=!0),s.parseBoolean(l.attributes.bestFit)&&(u.bestFit=!0),l.attributes.ht&&(u.height=parseFloat(l.attributes.ht)),l.attributes.outlineLevel&&(u.outlineLevel=parseInt(l.attributes.outlineLevel,10)),s.parseBoolean(l.attributes.collapsed)&&(u.collapsed=!0),!0}return this.parser=this.map[l.name],!!this.parser&&(this.parser.parseOpen(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(l,c){l.style=l.styleId?c.styles.getStyleModel(l.styleId):{},l.styleId!==void 0&&(l.styleId=void 0);const u=this.map.c;l.cells.forEach(f=>{u.reconcile(f,c)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../base-xform");n.exports=class extends s{get tag(){return"sheetFormatPr"}render(o,l){if(l){const c={defaultRowHeight:l.defaultRowHeight,outlineLevelRow:l.outlineLevelRow,outlineLevelCol:l.outlineLevelCol,"x14ac:dyDescent":l.dyDescent};l.defaultColWidth&&(c.defaultColWidth=l.defaultColWidth),l.defaultRowHeight&&l.defaultRowHeight===15||(c.customHeight="1"),i.some(c,u=>u!==void 0)&&o.leafNode("sheetFormatPr",c)}}parseOpen(o){return o.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(o.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(o.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(o.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(o.attributes.outlineLevelCol||"0",10)},o.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(o.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(e,n,a){const i=e("../base-xform"),s=e("../style/color-xform"),o=e("./page-setup-properties-xform"),l=e("./outline-properties-xform");n.exports=class extends i{constructor(){super(),this.map={tabColor:new s("tabColor"),pageSetUpPr:new o,outlinePr:new l}}get tag(){return"sheetPr"}render(c,u){if(u){c.addRollback(),c.openNode("sheetPr");let f=!1;f=this.map.tabColor.render(c,u.tabColor)||f,f=this.map.pageSetUpPr.render(c,u.pageSetup)||f,f=this.map.outlinePr.render(c,u.outlineProperties)||f,f?(c.closeNode(),c.commit()):c.rollback()}}parseOpen(c){return this.parser?(this.parser.parseOpen(c),!0):c.name===this.tag?(this.reset(),!0):!!this.map[c.name]&&(this.parser=this.map[c.name],this.parser.parseOpen(c),!0)}parseText(c){return!!this.parser&&(this.parser.parseText(c),!0)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../base-xform");function o(c,u){return c?u:void 0}function l(c,u){return c===u||void 0}n.exports=class extends s{get tag(){return"sheetProtection"}render(c,u){if(u){const f={sheet:o(u.sheet,"1"),selectLockedCells:u.selectLockedCells===!1?"1":void 0,selectUnlockedCells:u.selectUnlockedCells===!1?"1":void 0,formatCells:o(u.formatCells,"0"),formatColumns:o(u.formatColumns,"0"),formatRows:o(u.formatRows,"0"),insertColumns:o(u.insertColumns,"0"),insertRows:o(u.insertRows,"0"),insertHyperlinks:o(u.insertHyperlinks,"0"),deleteColumns:o(u.deleteColumns,"0"),deleteRows:o(u.deleteRows,"0"),sort:o(u.sort,"0"),autoFilter:o(u.autoFilter,"0"),pivotTables:o(u.pivotTables,"0")};u.sheet&&(f.algorithmName=u.algorithmName,f.hashValue=u.hashValue,f.saltValue=u.saltValue,f.spinCount=u.spinCount,f.objects=o(u.objects===!1,"1"),f.scenarios=o(u.scenarios===!1,"1")),i.some(f,h=>h!==void 0)&&c.leafNode(this.tag,f)}}parseOpen(c){switch(c.name){case this.tag:return this.model={sheet:l(c.attributes.sheet,"1"),objects:c.attributes.objects!=="1"&&void 0,scenarios:c.attributes.scenarios!=="1"&&void 0,selectLockedCells:c.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:c.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:l(c.attributes.formatCells,"0"),formatColumns:l(c.attributes.formatColumns,"0"),formatRows:l(c.attributes.formatRows,"0"),insertColumns:l(c.attributes.insertColumns,"0"),insertRows:l(c.attributes.insertRows,"0"),insertHyperlinks:l(c.attributes.insertHyperlinks,"0"),deleteColumns:l(c.attributes.deleteColumns,"0"),deleteRows:l(c.attributes.deleteRows,"0"),sort:l(c.attributes.sort,"0"),autoFilter:l(c.attributes.autoFilter,"0"),pivotTables:l(c.attributes.pivotTables,"0")},c.attributes.algorithmName&&(this.model.algorithmName=c.attributes.algorithmName,this.model.hashValue=c.attributes.hashValue,this.model.saltValue=c.attributes.saltValue,this.model.spinCount=parseInt(c.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(e,n,a){const i=e("../../../utils/col-cache"),s=e("../base-xform"),o={frozen:"frozen",frozenSplit:"frozen",split:"split"};n.exports=class extends s{get tag(){return"sheetView"}prepare(l){switch(l.state){case"frozen":case"split":break;default:l.state="normal"}}render(l,c){l.openNode("sheetView",{workbookViewId:c.workbookViewId||0});const u=function(y,m,v){v&&l.addAttribute(y,m)};let f,h,p,g;switch(u("rightToLeft","1",c.rightToLeft===!0),u("tabSelected","1",c.tabSelected),u("showRuler","0",c.showRuler===!1),u("showRowColHeaders","0",c.showRowColHeaders===!1),u("showGridLines","0",c.showGridLines===!1),u("zoomScale",c.zoomScale,c.zoomScale),u("zoomScaleNormal",c.zoomScaleNormal,c.zoomScaleNormal),u("view",c.style,c.style),c.state){case"frozen":h=c.xSplit||0,p=c.ySplit||0,f=c.topLeftCell||i.getAddress(p+1,h+1).address,g=(c.xSplit&&c.ySplit?"bottomRight":c.xSplit&&"topRight")||"bottomLeft",l.leafNode("pane",{xSplit:c.xSplit||void 0,ySplit:c.ySplit||void 0,topLeftCell:f,activePane:g,state:"frozen"}),l.leafNode("selection",{pane:g,activeCell:c.activeCell,sqref:c.activeCell});break;case"split":c.activePane==="topLeft"&&(c.activePane=void 0),l.leafNode("pane",{xSplit:c.xSplit||void 0,ySplit:c.ySplit||void 0,topLeftCell:c.topLeftCell,activePane:c.activePane}),l.leafNode("selection",{pane:c.activePane,activeCell:c.activeCell,sqref:c.activeCell});break;case"normal":c.activeCell&&l.leafNode("selection",{activeCell:c.activeCell,sqref:c.activeCell})}l.closeNode()}parseOpen(l){switch(l.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(l.attributes.workbookViewId,10),rightToLeft:l.attributes.rightToLeft==="1",tabSelected:l.attributes.tabSelected==="1",showRuler:l.attributes.showRuler!=="0",showRowColHeaders:l.attributes.showRowColHeaders!=="0",showGridLines:l.attributes.showGridLines!=="0",zoomScale:parseInt(l.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(l.attributes.zoomScaleNormal||"100",10),style:l.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(l.attributes.xSplit||"0",10),ySplit:parseInt(l.attributes.ySplit||"0",10),topLeftCell:l.attributes.topLeftCell,activePane:l.attributes.activePane||"topLeft",state:l.attributes.state},!0;case"selection":{const c=l.attributes.pane||"topLeft";return this.selections[c]={pane:c,activeCell:l.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(l){let c,u;switch(l){case"sheetView":return this.sheetView&&this.pane?(c=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:o[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(c.activePane=this.pane.activePane),u=this.selections[this.pane.activePane],u&&u.activeCell&&(c.activeCell=u.activeCell),this.sheetView.style&&(c.style=this.sheetView.style)):(c=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},u=this.selections.topLeft,u&&u.activeCell&&(c.activeCell=u.activeCell),this.sheetView.style&&(c.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"tablePart"}render(s,o){o&&s.leafNode(this.tag,{"r:id":o.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),o=e("../../../utils/xml-stream"),l=e("../../rel-type"),c=e("./merges"),u=e("../base-xform"),f=e("../list-xform"),h=e("./row-xform"),p=e("./col-xform"),g=e("./dimension-xform"),y=e("./hyperlink-xform"),m=e("./merge-cell-xform"),v=e("./data-validations-xform"),b=e("./sheet-properties-xform"),x=e("./sheet-format-properties-xform"),S=e("./sheet-view-xform"),_=e("./sheet-protection-xform"),I=e("./page-margins-xform"),A=e("./page-setup-xform"),O=e("./print-options-xform"),M=e("./auto-filter-xform"),z=e("./picture-xform"),U=e("./drawing-xform"),D=e("./table-part-xform"),T=e("./row-breaks-xform"),R=e("./header-footer-xform"),C=e("./cf/conditional-formattings-xform"),N=e("./ext-lst-xform"),E=(P,q)=>{if(!q||!q.length)return P;if(!P||!P.length)return q;const H={},L={};return P.forEach(K=>{H[K.ref]=K,K.rules.forEach(Y=>{const{x14Id:Z}=Y;Z&&(L[Z]=Y)})}),q.forEach(K=>{K.rules.forEach(Y=>{const Z=L[Y.x14Id];Z?((V,ee)=>{Object.keys(ee).forEach(B=>{const F=V[B],X=ee[B];F===void 0&&X!==void 0&&(V[B]=X)})})(Z,Y):H[K.ref]?H[K.ref].rules.push(Y):P.push({ref:K.ref,rules:[Y]})})}),P};class k extends u{constructor(q){super();const{maxRows:H,maxCols:L,ignoreNodes:K}=q||{};this.ignoreNodes=K||[],this.map={sheetPr:new b,dimension:new g,sheetViews:new f({tag:"sheetViews",count:!1,childXform:new S}),sheetFormatPr:new x,cols:new f({tag:"cols",count:!1,childXform:new p}),sheetData:new f({tag:"sheetData",count:!1,empty:!0,childXform:new h({maxItems:L}),maxItems:H}),autoFilter:new M,mergeCells:new f({tag:"mergeCells",count:!0,childXform:new m}),rowBreaks:new T,hyperlinks:new f({tag:"hyperlinks",count:!1,childXform:new y}),pageMargins:new I,dataValidations:new v,pageSetup:new A,headerFooter:new R,printOptions:new O,picture:new z,drawing:new U,sheetProtection:new _,tableParts:new f({tag:"tableParts",count:!0,childXform:new D}),conditionalFormatting:new C,extLst:new N}}prepare(q,H){H.merges=new c,q.hyperlinks=H.hyperlinks=[],q.comments=H.comments=[],H.formulae={},H.siFormulae=0,this.map.cols.prepare(q.cols,H),this.map.sheetData.prepare(q.rows,H),this.map.conditionalFormatting.prepare(q.conditionalFormattings,H),q.mergeCells=H.merges.mergeCells;const L=q.rels=[];function K(V){return"rId"+(V.length+1)}if(q.hyperlinks.forEach(V=>{const ee=K(L);V.rId=ee,L.push({Id:ee,Type:l.Hyperlink,Target:V.target,TargetMode:"External"})}),q.comments.length>0){const V={Id:K(L),Type:l.Comments,Target:`../comments${q.id}.xml`};L.push(V);const ee={Id:K(L),Type:l.VmlDrawing,Target:`../drawings/vmlDrawing${q.id}.vml`};L.push(ee),q.comments.forEach(B=>{B.refAddress=s.decodeAddress(B.ref)}),H.commentRefs.push({commentName:"comments"+q.id,vmlDrawing:"vmlDrawing"+q.id})}const Y=[];let Z;q.media.forEach(V=>{if(V.type==="background"){const ee=K(L);Z=H.media[V.imageId],L.push({Id:ee,Type:l.Image,Target:`../media/${Z.name}.${Z.extension}`}),q.background={rId:ee},q.image=H.media[V.imageId]}else if(V.type==="image"){let{drawing:ee}=q;Z=H.media[V.imageId],ee||(ee=q.drawing={rId:K(L),name:"drawing"+ ++H.drawingsCount,anchors:[],rels:[]},H.drawings.push(ee),L.push({Id:ee.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${ee.name}.xml`}));let B=this.preImageId===V.imageId?Y[V.imageId]:Y[ee.rels.length];B||(B=K(ee.rels),Y[ee.rels.length]=B,ee.rels.push({Id:B,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${Z.name}.${Z.extension}`}));const F={picture:{rId:B},range:V.range};if(V.hyperlinks&&V.hyperlinks.hyperlink){const X=K(ee.rels);Y[ee.rels.length]=X,F.picture.hyperlinks={tooltip:V.hyperlinks.tooltip,rId:X},ee.rels.push({Id:X,Type:l.Hyperlink,Target:V.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=V.imageId,ee.anchors.push(F)}}),q.tables.forEach(V=>{const ee=K(L);V.rId=ee,L.push({Id:ee,Type:l.Table,Target:"../tables/"+V.target}),V.columns.forEach(B=>{const{style:F}=B;F&&(B.dxfId=H.styles.addDxfStyle(F))})}),this.map.extLst.prepare(q,H)}render(q,H){q.openXml(o.StdDocAttributes),q.openNode("worksheet",k.WORKSHEET_ATTRIBUTES);const L=H.properties?{defaultRowHeight:H.properties.defaultRowHeight,dyDescent:H.properties.dyDescent,outlineLevelCol:H.properties.outlineLevelCol,outlineLevelRow:H.properties.outlineLevelRow}:void 0;H.properties&&H.properties.defaultColWidth&&(L.defaultColWidth=H.properties.defaultColWidth);const K={outlineProperties:H.properties&&H.properties.outlineProperties,tabColor:H.properties&&H.properties.tabColor,pageSetup:H.pageSetup&&H.pageSetup.fitToPage?{fitToPage:H.pageSetup.fitToPage}:void 0},Y=H.pageSetup&&H.pageSetup.margins,Z={showRowColHeaders:H.pageSetup&&H.pageSetup.showRowColHeaders,showGridLines:H.pageSetup&&H.pageSetup.showGridLines,horizontalCentered:H.pageSetup&&H.pageSetup.horizontalCentered,verticalCentered:H.pageSetup&&H.pageSetup.verticalCentered},V=H.sheetProtection;this.map.sheetPr.render(q,K),this.map.dimension.render(q,H.dimensions),this.map.sheetViews.render(q,H.views),this.map.sheetFormatPr.render(q,L),this.map.cols.render(q,H.cols),this.map.sheetData.render(q,H.rows),this.map.sheetProtection.render(q,V),this.map.autoFilter.render(q,H.autoFilter),this.map.mergeCells.render(q,H.mergeCells),this.map.conditionalFormatting.render(q,H.conditionalFormattings),this.map.dataValidations.render(q,H.dataValidations),this.map.hyperlinks.render(q,H.hyperlinks),this.map.printOptions.render(q,Z),this.map.pageMargins.render(q,Y),this.map.pageSetup.render(q,H.pageSetup),this.map.headerFooter.render(q,H.headerFooter),this.map.rowBreaks.render(q,H.rowBreaks),this.map.drawing.render(q,H.drawing),this.map.picture.render(q,H.background),this.map.tableParts.render(q,H.tables),this.map.extLst.render(q,H),H.rels&&H.rels.forEach(ee=>{ee.Type===l.VmlDrawing&&q.leafNode("legacyDrawing",{"r:id":ee.Id})}),q.closeNode()}parseOpen(q){return this.parser?(this.parser.parseOpen(q),!0):q.name==="worksheet"?(i.each(this.map,H=>{H.reset()}),!0):(this.map[q.name]&&!this.ignoreNodes.includes(q.name)&&(this.parser=this.map[q.name],this.parser.parseOpen(q)),!0)}parseText(q){this.parser&&this.parser.parseText(q)}parseClose(q){if(this.parser)return this.parser.parseClose(q)||(this.parser=void 0),!0;switch(q){case"worksheet":{const H=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(H.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(H.outlineProperties=this.map.sheetPr.model.outlineProperties);const L={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},K=Object.assign(L,this.map.pageSetup.model,this.map.printOptions.model),Y=E(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:H,views:this.map.sheetViews.model,pageSetup:K,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:Y},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(q,H){const L=(q.relationships||[]).reduce((Y,Z)=>{if(Y[Z.Id]=Z,Z.Type===l.Comments&&(q.comments=H.comments[Z.Target].comments),Z.Type===l.VmlDrawing&&q.comments&&q.comments.length){const V=H.vmlDrawings[Z.Target].comments;q.comments.forEach((ee,B)=>{ee.note=Object.assign({},ee.note,V[B])})}return Y},{});if(H.commentsMap=(q.comments||[]).reduce((Y,Z)=>(Z.ref&&(Y[Z.ref]=Z),Y),{}),H.hyperlinkMap=(q.hyperlinks||[]).reduce((Y,Z)=>(Z.rId&&(Y[Z.address]=L[Z.rId].Target),Y),{}),H.formulae={},q.rows=q.rows&&q.rows.filter(Boolean)||[],q.rows.forEach(Y=>{Y.cells=Y.cells&&Y.cells.filter(Boolean)||[]}),this.map.cols.reconcile(q.cols,H),this.map.sheetData.reconcile(q.rows,H),this.map.conditionalFormatting.reconcile(q.conditionalFormattings,H),q.media=[],q.drawing){const Y=L[q.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(Y){const Z=Y[1];H.drawings[Z].anchors.forEach(V=>{if(V.medium){const ee={type:"image",imageId:V.medium.index,range:V.range,hyperlinks:V.picture.hyperlinks};q.media.push(ee)}})}}const K=q.background&&L[q.background.rId];if(K){const Y=K.Target.split("/media/")[1],Z=H.mediaIndex&&H.mediaIndex[Y];Z!==void 0&&q.media.push({type:"background",imageId:Z})}q.tables=(q.tables||[]).map(Y=>{const Z=L[Y.rId];return H.tables[Z.Target]}),delete q.relationships,delete q.hyperlinks,delete q.comments}}k.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},n.exports=k},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr}render(s,o){o&&(s.openNode(this.tag),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this._format=s.format||function(o){try{return Number.isNaN(o.getTime())?"":o.toISOString()}catch{return""}},this._parse=s.parse||function(o){return new Date(o)}}render(s,o){o&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,this._format(o)):s.writeText(this._format(o)),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=this._parse(s.attributes[this.attr]):this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this.zero=s.zero}render(s,o){(o||this.zero)&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,o):s.writeText(o),s.closeNode())}parseOpen(s){return s.name===this.tag&&(this.attr?this.model=parseInt(s.attributes[this.attr],10):this.text=[],!0)}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs}render(s,o){o!==void 0&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,o):s.writeText(o),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=s.attributes[this.attr]:this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(e,n,a){const i=e("./base-xform"),s=e("../../utils/xml-stream");n.exports=class extends i{constructor(o){super(),this._model=o}render(o){if(!this._xml){const l=new s;(function c(u,f){u.openNode(f.tag,f.$),f.c&&f.c.forEach(h=>{c(u,h)}),f.t&&u.writeText(f.t),u.closeNode()})(l,this._model),this._xml=l.xml}o.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(o){switch(o){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(e,n,a){const i=e("./text-xform"),s=e("./rich-text-xform"),o=e("../base-xform");n.exports=class extends o{constructor(){super(),this.map={r:new s,t:new i}}get tag(){return"rPh"}render(l,c){if(l.openNode(this.tag,{sb:c.sb||0,eb:c.eb||0}),c&&c.hasOwnProperty("richText")&&c.richText){const{r:u}=this.map;c.richText.forEach(f=>{u.render(l,f)})}else c&&this.map.t.render(l,c.text);l.closeNode()}parseOpen(l){const{name:c}=l;return this.parser?(this.parser.parseOpen(l),!0):c===this.tag?(this.model={sb:parseInt(l.attributes.sb,10),eb:parseInt(l.attributes.eb,10)},!0):(this.parser=this.map[c],!!this.parser&&(this.parser.parseOpen(l),!0))}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){switch(l){case"r":{let c=this.model.richText;c||(c=this.model.richText=[]),c.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(e,n,a){const i=e("./text-xform"),s=e("../style/font-xform"),o=e("../base-xform");class l extends o{constructor(u){super(),this.model=u}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new i)}get fontXform(){return this._fontXform||(this._fontXform=new s(l.FONT_OPTIONS))}render(u,f){f=f||this.model,u.openNode("r"),f.font&&this.fontXform.render(u,f.font),this.textXform.render(u,f.text),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(u),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){switch(u){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}}l.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},n.exports=l},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(e,n,a){const i=e("./text-xform"),s=e("./rich-text-xform"),o=e("./phonetic-text-xform"),l=e("../base-xform");n.exports=class extends l{constructor(c){super(),this.model=c,this.map={r:new s,t:new i,rPh:new o}}get tag(){return"si"}render(c,u){c.openNode(this.tag),u&&u.hasOwnProperty("richText")&&u.richText?u.richText.length?u.richText.forEach(f=>{this.map.r.render(c,f)}):this.map.t.render(c,""):u!=null&&this.map.t.render(c,u),c.closeNode()}parseOpen(c){const{name:u}=c;return this.parser?(this.parser.parseOpen(c),!0):u===this.tag?(this.model={},!0):(this.parser=this.map[u],!!this.parser&&(this.parser.parseOpen(c),!0))}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser){if(!this.parser.parseClose(c)){switch(c){case"r":{let u=this.model.richText;u||(u=this.model.richText=[]),u.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("./shared-string-xform");n.exports=class extends s{constructor(l){super(),this.model=l||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new o)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(l){return this.model.values[l]}add(l){return l.richText?this.addRichText(l):this.addText(l)}addText(l){let c=this.hash[l];return c===void 0&&(c=this.hash[l]=this.model.values.length,this.model.values.push(l)),this.model.count++,c}addRichText(l){const c=this.sharedStringXform.toXml(l);let u=this.rich[c];return u===void 0&&(u=this.rich[c]=this.model.values.length,this.model.values.push(l)),this.model.count++,u}render(l,c){c=c||this._values,l.openXml(i.StdDocAttributes),l.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:c.count,uniqueCount:c.values.length});const u=this.sharedStringXform;c.values.forEach(f=>{u.render(l,f)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(l),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(l){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"t"}render(s,o){s.openNode("t"),/^\s|\n|\s$/.test(o)&&s.addAttribute("xml:space","preserve"),s.writeText(o),s.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(s,o)=>String.fromCharCode(parseInt(o,16)))}parseOpen(s){switch(s.name){case"t":return this._text=[],!0;default:return!1}}parseText(s){this._text.push(s)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(e,n,a){const i=e("../../../doc/enums"),s=e("../../../utils/utils"),o=e("../base-xform"),l={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((u,f)=>(u[f]=!0,u),{}),horizontal(u){return this.horizontalValues[u]?u:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((u,f)=>(u[f]=!0,u),{}),vertical(u){return u==="middle"?"center":this.verticalValues[u]?u:void 0},wrapText:u=>!!u||void 0,shrinkToFit:u=>!!u||void 0,textRotation(u){switch(u){case"vertical":return u;default:return(u=s.validInt(u))>=-90&&u<=90?u:void 0}},indent:u=>(u=s.validInt(u),Math.max(0,u)),readingOrder(u){switch(u){case"ltr":return i.ReadingOrder.LeftToRight;case"rtl":return i.ReadingOrder.RightToLeft;default:return}}},c={toXml(u){if(u=l.textRotation(u)){if(u==="vertical")return 255;const f=Math.round(u);if(f>=0&&f<=90)return f;if(f<0&&f>=-90)return 90-f}},toModel(u){const f=s.validInt(u);if(f!==void 0){if(f===255)return"vertical";if(f>=0&&f<=90)return f;if(f>90&&f<=180)return 90-f}}};n.exports=class extends o{get tag(){return"alignment"}render(u,f){u.addRollback(),u.openNode("alignment");let h=!1;function p(g,y){y&&(u.addAttribute(g,y),h=!0)}p("horizontal",l.horizontal(f.horizontal)),p("vertical",l.vertical(f.vertical)),p("wrapText",!!l.wrapText(f.wrapText)&&"1"),p("shrinkToFit",!!l.shrinkToFit(f.shrinkToFit)&&"1"),p("indent",l.indent(f.indent)),p("textRotation",c.toXml(f.textRotation)),p("readingOrder",l.readingOrder(f.readingOrder)),u.closeNode(),h?u.commit():u.rollback()}parseOpen(u){const f={};let h=!1;function p(g,y,m){g&&(f[y]=m,h=!0)}p(u.attributes.horizontal,"horizontal",u.attributes.horizontal),p(u.attributes.vertical,"vertical",u.attributes.vertical==="center"?"middle":u.attributes.vertical),p(u.attributes.wrapText,"wrapText",s.parseBoolean(u.attributes.wrapText)),p(u.attributes.shrinkToFit,"shrinkToFit",s.parseBoolean(u.attributes.shrinkToFit)),p(u.attributes.indent,"indent",parseInt(u.attributes.indent,10)),p(u.attributes.textRotation,"textRotation",c.toModel(u.attributes.textRotation)),p(u.attributes.readingOrder,"readingOrder",u.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=h?f:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(e,n,a){const i=e("../base-xform"),s=e("../../../utils/utils"),o=e("./color-xform");class l extends i{constructor(u){super(),this.name=u,this.map={color:new o}}get tag(){return this.name}render(u,f,h){const p=f&&f.color||h||this.defaultColor;u.openNode(this.name),f&&f.style&&(u.addAttribute("style",f.style),p&&this.map.color.render(u,p)),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.name:{const{style:f}=u.attributes;return this.model=f?{style:f}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):(u===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(u){return l.validStyleValues[u]}}l.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((c,u)=>(c[u]=!0,c),{}),n.exports=class extends i{constructor(){super(),this.map={top:new l("top"),left:new l("left"),bottom:new l("bottom"),right:new l("right"),diagonal:new l("diagonal")}}render(c,u){const{color:f}=u;function h(p,g){p&&!p.color&&u.color&&(p={...p,color:u.color}),g.render(c,p,f)}c.openNode("border"),u.diagonal&&u.diagonal.style&&(u.diagonal.up&&c.addAttribute("diagonalUp","1"),u.diagonal.down&&c.addAttribute("diagonalDown","1")),h(u.left,this.map.left),h(u.right,this.map.right),h(u.top,this.map.top),h(u.bottom,this.map.bottom),h(u.diagonal,this.map.diagonal),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"border":return this.reset(),this.diagonalUp=s.parseBoolean(c.attributes.diagonalUp),this.diagonalDown=s.parseBoolean(c.attributes.diagonalDown),!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;if(c==="border"){const u=this.model={},f=function(h,p,g){p&&(g&&Object.assign(p,g),u[h]=p)};f("left",this.map.left.model),f("right",this.map.right.model),f("top",this.map.top.model),f("bottom",this.map.bottom.model),f("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{constructor(s){super(),this.name=s||"color"}get tag(){return this.name}render(s,o){return!!o&&(s.openNode(this.name),o.argb?s.addAttribute("rgb",o.argb):o.theme!==void 0?(s.addAttribute("theme",o.theme),o.tint!==void 0&&s.addAttribute("tint",o.tint)):o.indexed!==void 0?s.addAttribute("indexed",o.indexed):s.addAttribute("auto","1"),s.closeNode(),!0)}parseOpen(s){return s.name===this.name&&(s.attributes.rgb?this.model={argb:s.attributes.rgb}:s.attributes.theme?(this.model={theme:parseInt(s.attributes.theme,10)},s.attributes.tint&&(this.model.tint=parseFloat(s.attributes.tint))):s.attributes.indexed?this.model={indexed:parseInt(s.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(e,n,a){const i=e("../base-xform"),s=e("./alignment-xform"),o=e("./border-xform"),l=e("./fill-xform"),c=e("./font-xform"),u=e("./numfmt-xform"),f=e("./protection-xform");n.exports=class extends i{constructor(){super(),this.map={alignment:new s,border:new o,fill:new l,font:new c,numFmt:new u,protection:new f}}get tag(){return"dxf"}render(h,p){if(h.openNode(this.tag),p.font&&this.map.font.render(h,p.font),p.numFmt&&p.numFmtId){const g={id:p.numFmtId,formatCode:p.numFmt};this.map.numFmt.render(h,g)}p.fill&&this.map.fill.render(h,p.fill),p.alignment&&this.map.alignment.render(h,p.alignment),p.border&&this.map.border.render(h,p.border),p.protection&&this.map.protection.render(h,p.protection),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h),!0}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return this.parser?(this.parser.parseClose(h)||(this.parser=void 0),!0):h!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(e,n,a){const i=e("../base-xform"),s=e("./color-xform");class o extends i{constructor(){super(),this.map={color:new s}}get tag(){return"stop"}render(h,p){h.openNode("stop"),h.addAttribute("position",p.position),this.map.color.render(h,p.color),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"stop":return this.model={position:parseFloat(h.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(h),!0;default:return!1}}parseText(){}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class l extends i{constructor(){super(),this.map={fgColor:new s("fgColor"),bgColor:new s("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(h,p){h.openNode("patternFill"),h.addAttribute("patternType",p.pattern),p.fgColor&&this.map.fgColor.render(h,p.fgColor),p.bgColor&&this.map.bgColor.render(h,p.bgColor),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"patternFill":return this.model={type:"pattern",pattern:h.attributes.patternType},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.parser.model&&(this.model[h]=this.parser.model),this.parser=void 0),!0)}}class c extends i{constructor(){super(),this.map={stop:new o}}get name(){return"gradient"}get tag(){return"gradientFill"}render(h,p){switch(h.openNode("gradientFill"),p.gradient){case"angle":h.addAttribute("degree",p.degree);break;case"path":h.addAttribute("type","path"),p.center.left&&(h.addAttribute("left",p.center.left),p.center.right===void 0&&h.addAttribute("right",p.center.left)),p.center.right&&h.addAttribute("right",p.center.right),p.center.top&&(h.addAttribute("top",p.center.top),p.center.bottom===void 0&&h.addAttribute("bottom",p.center.top)),p.center.bottom&&h.addAttribute("bottom",p.center.bottom)}const g=this.map.stop;p.stops.forEach(y=>{g.render(h,y)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"gradientFill":{const p=this.model={stops:[]};return h.attributes.degree?(p.gradient="angle",p.degree=parseInt(h.attributes.degree,10)):h.attributes.type==="path"&&(p.gradient="path",p.center={left:h.attributes.left?parseFloat(h.attributes.left):0,top:h.attributes.top?parseFloat(h.attributes.top):0},h.attributes.right!==h.attributes.left&&(p.center.right=h.attributes.right?parseFloat(h.attributes.right):0),h.attributes.bottom!==h.attributes.top&&(p.center.bottom=h.attributes.bottom?parseFloat(h.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class u extends i{constructor(){super(),this.map={patternFill:new l,gradientFill:new c}}get tag(){return"fill"}render(h,p){switch(h.addRollback(),h.openNode("fill"),p.type){case"pattern":this.map.patternFill.render(h,p);break;case"gradient":this.map.gradientFill.render(h,p);break;default:return void h.rollback()}h.closeNode(),h.commit()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"fill":return this.model={},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(h){return u.validPatternValues[h]}}u.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((f,h)=>(f[h]=!0,f),{}),u.StopXform=o,u.PatternFillXform=l,u.GradientFillXform=c,n.exports=u},{"../base-xform":32,"./color-xform":128}],131:[function(e,n,a){const i=e("./color-xform"),s=e("../simple/boolean-xform"),o=e("../simple/integer-xform"),l=e("../simple/string-xform"),c=e("./underline-xform"),u=e("../../../utils/under-dash"),f=e("../base-xform");class h extends f{constructor(g){super(),this.options=g||h.OPTIONS,this.map={b:{prop:"bold",xform:new s({tag:"b",attr:"val"})},i:{prop:"italic",xform:new s({tag:"i",attr:"val"})},u:{prop:"underline",xform:new c},charset:{prop:"charset",xform:new o({tag:"charset",attr:"val"})},color:{prop:"color",xform:new i},condense:{prop:"condense",xform:new s({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new s({tag:"extend",attr:"val"})},family:{prop:"family",xform:new o({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new s({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new l({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new l({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new s({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new s({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new o({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new l({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(g,y){const{map:m}=this;g.openNode(this.options.tagName),u.each(this.map,(v,b)=>{m[b].xform.render(g,y[v.prop])}),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;if(this.map[g.name])return this.parser=this.map[g.name].xform,this.parser.parseOpen(g);switch(g.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){if(this.parser&&!this.parser.parseClose(g)){const y=this.map[g];return this.parser.model&&(this.model[y.prop]=this.parser.model),this.parser=void 0,!0}switch(g){case this.options.tagName:return!1;default:return!0}}}h.OPTIONS={tagName:"font",fontNameTag:"name"},n.exports=h},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(e,n,a){const i=e("../../../utils/under-dash"),s=e("../../defaultnumformats"),o=e("../base-xform"),l=(function(){const u={};return i.each(s,(f,h)=>{f.f&&(u[f.f]=parseInt(h,10))}),u})();class c extends o{constructor(f,h){super(),this.id=f,this.formatCode=h}get tag(){return"numFmt"}render(f,h){f.leafNode("numFmt",{numFmtId:h.id,formatCode:h.formatCode})}parseOpen(f){switch(f.name){case"numFmt":return this.model={id:parseInt(f.attributes.numFmtId,10),formatCode:f.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}c.getDefaultFmtId=function(u){return l[u]},c.getDefaultFmtCode=function(u){return s[u]&&s[u].f},n.exports=c},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(e,n,a){const i=e("../base-xform"),s={boolean:(o,l)=>o===void 0?l:o};n.exports=class extends i{get tag(){return"protection"}render(o,l){o.addRollback(),o.openNode("protection");let c=!1;function u(f,h){h!==void 0&&(o.addAttribute(f,h),c=!0)}u("locked",s.boolean(l.locked,!0)?void 0:"0"),u("hidden",s.boolean(l.hidden,!1)?"1":void 0),o.closeNode(),c?o.commit():o.rollback()}parseOpen(o){const l={locked:o.attributes.locked!=="0",hidden:o.attributes.hidden==="1"},c=!l.locked||l.hidden;this.model=c?l:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(e,n,a){const i=e("../base-xform"),s=e("./alignment-xform"),o=e("./protection-xform");n.exports=class extends i{constructor(l){super(),this.xfId=!(!l||!l.xfId),this.map={alignment:new s,protection:new o}}get tag(){return"xf"}render(l,c){l.openNode("xf",{numFmtId:c.numFmtId||0,fontId:c.fontId||0,fillId:c.fillId||0,borderId:c.borderId||0}),this.xfId&&l.addAttribute("xfId",c.xfId||0),c.numFmtId&&l.addAttribute("applyNumberFormat","1"),c.fontId&&l.addAttribute("applyFont","1"),c.fillId&&l.addAttribute("applyFill","1"),c.borderId&&l.addAttribute("applyBorder","1"),c.alignment&&l.addAttribute("applyAlignment","1"),c.protection&&l.addAttribute("applyProtection","1"),c.alignment&&this.map.alignment.render(l,c.alignment),c.protection&&this.map.protection.render(l,c.protection),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"xf":return this.model={numFmtId:parseInt(l.attributes.numFmtId,10),fontId:parseInt(l.attributes.fontId,10),fillId:parseInt(l.attributes.fillId,10),borderId:parseInt(l.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(l.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(l),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):l!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(e,n,a){const i=e("../../../doc/enums"),s=e("../../../utils/xml-stream"),o=e("../base-xform"),l=e("../static-xform"),c=e("../list-xform"),u=e("./font-xform"),f=e("./fill-xform"),h=e("./border-xform"),p=e("./numfmt-xform"),g=e("./style-xform"),y=e("./dxf-xform");class m extends o{constructor(b){super(),this.map={numFmts:new c({tag:"numFmts",count:!0,childXform:new p}),fonts:new c({tag:"fonts",count:!0,childXform:new u,$:{"x14ac:knownFonts":1}}),fills:new c({tag:"fills",count:!0,childXform:new f}),borders:new c({tag:"borders",count:!0,childXform:new h}),cellStyleXfs:new c({tag:"cellStyleXfs",count:!0,childXform:new g}),cellXfs:new c({tag:"cellXfs",count:!0,childXform:new g({xfId:!0})}),dxfs:new c({tag:"dxfs",always:!0,count:!0,childXform:new y}),numFmt:new p,font:new u,fill:new f,border:new h,style:new g({xfId:!0}),cellStyles:m.STATIC_XFORMS.cellStyles,tableStyles:m.STATIC_XFORMS.tableStyles,extLst:m.STATIC_XFORMS.extLst},b&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(b,x){x=x||this.model,b.openXml(s.StdDocAttributes),b.openNode("styleSheet",m.STYLESHEET_ATTRIBUTES),this.index?(x.numFmts&&x.numFmts.length&&(b.openNode("numFmts",{count:x.numFmts.length}),x.numFmts.forEach(S=>{b.writeXml(S)}),b.closeNode()),x.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),b.openNode("fonts",{count:x.fonts.length,"x14ac:knownFonts":1}),x.fonts.forEach(S=>{b.writeXml(S)}),b.closeNode(),b.openNode("fills",{count:x.fills.length}),x.fills.forEach(S=>{b.writeXml(S)}),b.closeNode(),b.openNode("borders",{count:x.borders.length}),x.borders.forEach(S=>{b.writeXml(S)}),b.closeNode(),this.map.cellStyleXfs.render(b,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),b.openNode("cellXfs",{count:x.styles.length}),x.styles.forEach(S=>{b.writeXml(S)}),b.closeNode()):(this.map.numFmts.render(b,x.numFmts),this.map.fonts.render(b,x.fonts),this.map.fills.render(b,x.fills),this.map.borders.render(b,x.borders),this.map.cellStyleXfs.render(b,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(b,x.styles)),m.STATIC_XFORMS.cellStyles.render(b),this.map.dxfs.render(b,x.dxfs),m.STATIC_XFORMS.tableStyles.render(b),m.STATIC_XFORMS.extLst.render(b),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;switch(b.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[b.name],this.parser&&this.parser.parseOpen(b),!0}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser)return this.parser.parseClose(b)||(this.parser=void 0),!0;switch(b){case"styleSheet":{this.model={};const x=(S,_)=>{_.model&&_.model.length&&(this.model[S]=_.model)};if(x("numFmts",this.map.numFmts),x("fonts",this.map.fonts),x("fills",this.map.fills),x("borders",this.map.borders),x("styles",this.map.cellXfs),x("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const S=this.index.numFmt;this.model.numFmts.forEach(_=>{S[_.id]=_.formatCode})}return!1}default:return!0}}addStyleModel(b,x){if(!b)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(b))return this.weakMap.get(b);const S={};if(x=x||i.ValueType.Number,b.numFmt)S.numFmtId=this._addNumFmtStr(b.numFmt);else switch(x){case i.ValueType.Number:S.numFmtId=this._addNumFmtStr("General");break;case i.ValueType.Date:S.numFmtId=this._addNumFmtStr("mm-dd-yy")}b.font&&(S.fontId=this._addFont(b.font)),b.border&&(S.borderId=this._addBorder(b.border)),b.fill&&(S.fillId=this._addFill(b.fill)),b.alignment&&(S.alignment=b.alignment),b.protection&&(S.protection=b.protection);const _=this._addStyle(S);return this.weakMap&&this.weakMap.set(b,_),_}getStyleModel(b){const x=this.model.styles[b];if(!x)return null;let S=this.index.model[b];if(S)return S;if(S=this.index.model[b]={},x.numFmtId){const I=this.index.numFmt[x.numFmtId]||p.getDefaultFmtCode(x.numFmtId);I&&(S.numFmt=I)}function _(I,A,O){if(O||O===0){const M=A[O];M&&(S[I]=M)}}return _("font",this.model.fonts,x.fontId),_("border",this.model.borders,x.borderId),_("fill",this.model.fills,x.fillId),x.alignment&&(S.alignment=x.alignment),x.protection&&(S.protection=x.protection),S}addDxfStyle(b){return b.numFmt&&(b.numFmtId=this._addNumFmtStr(b.numFmt)),this.model.dxfs.push(b),this.model.dxfs.length-1}getDxfStyle(b){return this.model.dxfs[b]}_addStyle(b){const x=this.map.style.toXml(b);let S=this.index.style[x];return S===void 0&&(S=this.index.style[x]=this.model.styles.length,this.model.styles.push(x)),S}_addNumFmtStr(b){let x=p.getDefaultFmtId(b);if(x!==void 0||(x=this.index.numFmt[b],x!==void 0))return x;x=this.index.numFmt[b]=164+this.model.numFmts.length;const S=this.map.numFmt.toXml({id:x,formatCode:b});return this.model.numFmts.push(S),x}_addFont(b){const x=this.map.font.toXml(b);let S=this.index.font[x];return S===void 0&&(S=this.index.font[x]=this.model.fonts.length,this.model.fonts.push(x)),S}_addBorder(b){const x=this.map.border.toXml(b);let S=this.index.border[x];return S===void 0&&(S=this.index.border[x]=this.model.borders.length,this.model.borders.push(x)),S}_addFill(b){const x=this.map.fill.toXml(b);let S=this.index.fill[x];return S===void 0&&(S=this.index.fill[x]=this.model.fills.length,this.model.fills.push(x)),S}}m.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},m.STATIC_XFORMS={cellStyles:new l({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new l({tag:"dxfs",$:{count:0}}),tableStyles:new l({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new l({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},m.Mock=class extends m{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(v){return v.autodrain(),Promise.resolve()}addStyleModel(v,b){switch(b){case i.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const v={numFmtId:p.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(v)}return this._dateStyleId}getStyleModel(){return{}}},n.exports=m},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(e,n,a){const i=e("../base-xform");class s extends i{constructor(l){super(),this.model=l}get tag(){return"u"}render(l,c){if((c=c||this.model)===!0)l.leafNode("u");else{const u=s.Attributes[c];u&&l.leafNode("u",u)}}parseOpen(l){l.name==="u"&&(this.model=l.attributes.val||!0)}parseText(){}parseClose(){return!1}}s.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},n.exports=s},{"../base-xform":32}],137:[function(e,n,a){const i=e("../base-xform"),s=e("./filter-column-xform");n.exports=class extends i{constructor(){super(),this.map={filterColumn:new s}}get tag(){return"autoFilter"}prepare(o){o.columns.forEach((l,c)=>{this.map.filterColumn.prepare(l,{index:c})})}render(o,l){return o.openNode(this.tag,{ref:l.autoFilterRef}),l.columns.forEach(c=>{this.map.filterColumn.render(o,c)}),o.closeNode(),!0}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model={autoFilterRef:o.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[o.name],this.parser)return this.parseOpen(o),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(o))}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(o){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+o)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"customFilter"}render(s,o){s.leafNode(this.tag,{val:o.val,operator:o.operator})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val,operator:s.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(e,n,a){const i=e("../base-xform"),s=e("../list-xform"),o=e("./custom-filter-xform"),l=e("./filter-xform");n.exports=class extends i{constructor(){super(),this.map={customFilters:new s({tag:"customFilters",count:!1,empty:!0,childXform:new o}),filters:new s({tag:"filters",count:!1,empty:!0,childXform:new l})}}get tag(){return"filterColumn"}prepare(c,u){c.colId=u.index.toString()}render(c,u){return u.customFilters?(c.openNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),this.map.customFilters.render(c,u.customFilters),c.closeNode(),!0):(c.leafNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),!0)}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;const{attributes:u}=c;switch(c.name){case this.tag:return this.model={filterButton:u.hiddenButton==="0"},!0;default:if(this.parser=this.map[c.name],this.parser)return this.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"filter"}render(s,o){s.leafNode(this.tag,{val:o.val})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"tableColumn"}prepare(s,o){s.id=o.index+1}render(s,o){return s.leafNode(this.tag,{id:o.id.toString(),name:o.name,totalsRowLabel:o.totalsRowLabel,totalsRowFunction:o.totalsRowFunction,dxfId:o.dxfId}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:o}=s;return this.model={name:o.name,totalsRowLabel:o.totalsRowLabel,totalsRowFunction:o.totalsRowFunction,dxfId:o.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(e,n,a){const i=e("../base-xform");n.exports=class extends i{get tag(){return"tableStyleInfo"}render(s,o){return s.leafNode(this.tag,{name:o.theme?o.theme:void 0,showFirstColumn:o.showFirstColumn?"1":"0",showLastColumn:o.showLastColumn?"1":"0",showRowStripes:o.showRowStripes?"1":"0",showColumnStripes:o.showColumnStripes?"1":"0"}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:o}=s;return this.model={theme:o.name?o.name:null,showFirstColumn:o.showFirstColumn==="1",showLastColumn:o.showLastColumn==="1",showRowStripes:o.showRowStripes==="1",showColumnStripes:o.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(e,n,a){const i=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("../list-xform"),l=e("./auto-filter-xform"),c=e("./table-column-xform"),u=e("./table-style-info-xform");class f extends s{constructor(){super(),this.map={autoFilter:new l,tableColumns:new o({tag:"tableColumns",count:!0,empty:!0,childXform:new c}),tableStyleInfo:new u}}prepare(p,g){this.map.autoFilter.prepare(p),this.map.tableColumns.prepare(p.columns,g)}get tag(){return"table"}render(p,g){p.openXml(i.StdDocAttributes),p.openNode(this.tag,{...f.TABLE_ATTRIBUTES,id:g.id,name:g.name,displayName:g.displayName||g.name,ref:g.tableRef,totalsRowCount:g.totalsRow?"1":void 0,totalsRowShown:g.totalsRow?void 0:"1",headerRowCount:g.headerRow?"1":"0"}),this.map.autoFilter.render(p,g),this.map.tableColumns.render(p,g.columns),this.map.tableStyleInfo.render(p,g.style),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;const{name:g,attributes:y}=p;switch(g){case this.tag:this.reset(),this.model={name:y.name,displayName:y.displayName||y.name,tableRef:y.ref,totalsRow:y.totalsRowCount==="1",headerRow:y.headerRowCount==="1"};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((g,y)=>{this.model.columns[y].filterButton=g.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(p,g){p.columns.forEach(y=>{y.dxfId!==void 0&&(y.style=g.styles.getDxfStyle(y.dxfId))})}}f.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},n.exports=f},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(e,n,a){(function(i,s){(function(){const o=e("fs"),l=e("jszip"),{PassThrough:c}=e("readable-stream"),u=e("../utils/zip-stream"),f=e("../utils/stream-buf"),h=e("../utils/utils"),p=e("../utils/xml-stream"),{bufferToString:g}=e("../utils/browser-buffer-decode"),y=e("./xform/style/styles-xform"),m=e("./xform/core/core-xform"),v=e("./xform/strings/shared-strings-xform"),b=e("./xform/core/relationships-xform"),x=e("./xform/core/content-types-xform"),S=e("./xform/core/app-xform"),_=e("./xform/book/workbook-xform"),I=e("./xform/sheet/worksheet-xform"),A=e("./xform/drawing/drawing-xform"),O=e("./xform/table/table-xform"),M=e("./xform/comment/comments-xform"),z=e("./xform/comment/vml-notes-xform"),U=e("./xml/theme1");class D{constructor(R){this.workbook=R}async readFile(R,C){if(!await h.fs.exists(R))throw new Error("File not found: "+R);const N=o.createReadStream(R);try{const E=await this.read(N,C);return N.close(),E}catch(E){throw N.close(),E}}parseRels(R){return new b().parseStream(R)}parseWorkbook(R){return new _().parseStream(R)}parseSharedStrings(R){return new v().parseStream(R)}reconcile(R,C){const N=new _,E=new I(C),k=new A,P=new O;N.reconcile(R);const q={media:R.media,mediaIndex:R.mediaIndex};Object.keys(R.drawings).forEach(K=>{const Y=R.drawings[K],Z=R.drawingRels[K];Z&&(q.rels=Z.reduce((V,ee)=>(V[ee.Id]=ee,V),{}),(Y.anchors||[]).forEach(V=>{const ee=V.picture&&V.picture.hyperlinks;ee&&q.rels[ee.rId]&&(ee.hyperlink=q.rels[ee.rId].Target,delete ee.rId)}),k.reconcile(Y,q))});const H={styles:R.styles};Object.values(R.tables).forEach(K=>{P.reconcile(K,H)});const L={styles:R.styles,sharedStrings:R.sharedStrings,media:R.media,mediaIndex:R.mediaIndex,date1904:R.properties&&R.properties.date1904,drawings:R.drawings,comments:R.comments,tables:R.tables,vmlDrawings:R.vmlDrawings};R.worksheets.forEach(K=>{K.relationships=R.worksheetRels[K.sheetNo],E.reconcile(K,L)}),delete R.worksheetHash,delete R.worksheetRels,delete R.globalRels,delete R.sharedStrings,delete R.workbookRels,delete R.sheetDefs,delete R.styles,delete R.mediaIndex,delete R.drawings,delete R.drawingRels,delete R.vmlDrawings}async _processWorksheetEntry(R,C,N,E,k){const P=new I(E),q=await P.parseStream(R);q.sheetNo=N,C.worksheetHash[k]=q,C.worksheets.push(q)}async _processCommentEntry(R,C,N){const E=new M,k=await E.parseStream(R);C.comments[`../${N}.xml`]=k}async _processTableEntry(R,C,N){const E=new O,k=await E.parseStream(R);C.tables[`../tables/${N}.xml`]=k}async _processWorksheetRelsEntry(R,C,N){const E=new b,k=await E.parseStream(R);C.worksheetRels[N]=k}async _processMediaEntry(R,C,N){const E=N.lastIndexOf(".");if(E>=1){const k=N.substr(E+1),P=N.substr(0,E);await new Promise((q,H)=>{const L=new f;L.on("finish",()=>{C.mediaIndex[N]=C.media.length,C.mediaIndex[P]=C.media.length;const K={type:"image",name:P,extension:k,buffer:L.toBuffer()};C.media.push(K),q()}),R.on("error",K=>{H(K)}),R.pipe(L)})}}async _processDrawingEntry(R,C,N){const E=new A,k=await E.parseStream(R);C.drawings[N]=k}async _processDrawingRelsEntry(R,C,N){const E=new b,k=await E.parseStream(R);C.drawingRels[N]=k}async _processVmlDrawingEntry(R,C,N){const E=new z,k=await E.parseStream(R);C.vmlDrawings[`../drawings/${N}.vml`]=k}async _processThemeEntry(R,C,N){await new Promise((E,k)=>{const P=new f;R.on("error",k),P.on("error",k),P.on("finish",()=>{C.themes[N]=P.read().toString(),E()}),R.pipe(P)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(R,C){!R[Symbol.asyncIterator]&&R.pipe&&(R=R.pipe(new c));const N=[];for await(const E of R)N.push(E);return this.load(s.concat(N),C)}async load(R,C){let N;N=C&&C.base64?s.from(R.toString(),"base64"):R;const E={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},k=await l.loadAsync(N);for(const P of Object.values(k.files))if(!P.dir){let q,H=P.name;if(H[0]==="/"&&(H=H.substr(1)),H.match(/xl\/media\//)||H.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))q=new c,q.write(await P.async("nodebuffer"));else{let L;q=new c({writableObjectMode:!0,readableObjectMode:!0}),L=i.browser?g(await P.async("nodebuffer")):await P.async("string");const K=16384;for(let Y=0;Y<L.length;Y+=K)q.write(L.substring(Y,Y+K))}switch(q.end(),H){case"_rels/.rels":E.globalRels=await this.parseRels(q);break;case"xl/workbook.xml":{const L=await this.parseWorkbook(q);E.sheets=L.sheets,E.definedNames=L.definedNames,E.views=L.views,E.properties=L.properties,E.calcProperties=L.calcProperties;break}case"xl/_rels/workbook.xml.rels":E.workbookRels=await this.parseRels(q);break;case"xl/sharedStrings.xml":E.sharedStrings=new v,await E.sharedStrings.parseStream(q);break;case"xl/styles.xml":E.styles=new y,await E.styles.parseStream(q);break;case"docProps/app.xml":{const L=new S,K=await L.parseStream(q);E.company=K.company,E.manager=K.manager;break}case"docProps/core.xml":{const L=new m,K=await L.parseStream(q);Object.assign(E,K);break}default:{let L=H.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(L){await this._processWorksheetEntry(q,E,L[1],C,H);break}if(L=H.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),L){await this._processWorksheetRelsEntry(q,E,L[1]);break}if(L=H.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),L){await this._processThemeEntry(q,E,L[1]);break}if(L=H.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),L){await this._processMediaEntry(q,E,L[1]);break}if(L=H.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),L){await this._processDrawingEntry(q,E,L[1]);break}if(L=H.match(/xl\/(comments\d+)[.]xml/),L){await this._processCommentEntry(q,E,L[1]);break}if(L=H.match(/xl\/tables\/(table\d+)[.]xml/),L){await this._processTableEntry(q,E,L[1]);break}if(L=H.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),L){await this._processDrawingRelsEntry(q,E,L[1]);break}if(L=H.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),L){await this._processVmlDrawingEntry(q,E,L[1]);break}}}}return this.reconcile(E,C),this.workbook.model=E,this.workbook}async addMedia(R,C){await Promise.all(C.media.map(async N=>{if(N.type==="image"){const E=`xl/media/${N.name}.${N.extension}`;if(N.filename){const k=await(function(P,q){return new Promise((H,L)=>{o.readFile(P,q,(K,Y)=>{K?L(K):H(Y)})})})(N.filename);return R.append(k,{name:E})}if(N.buffer)return R.append(N.buffer,{name:E});if(N.base64){const k=N.base64,P=k.substring(k.indexOf(",")+1);return R.append(P,{name:E,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(R,C){const N=new A,E=new b;C.worksheets.forEach(k=>{const{drawing:P}=k;if(P){N.prepare(P,{});let q=N.toXml(P);R.append(q,{name:`xl/drawings/${P.name}.xml`}),q=E.toXml(P.rels),R.append(q,{name:`xl/drawings/_rels/${P.name}.xml.rels`})}})}addTables(R,C){const N=new O;C.worksheets.forEach(E=>{const{tables:k}=E;k.forEach(P=>{N.prepare(P,{});const q=N.toXml(P);R.append(q,{name:"xl/tables/"+P.target})})})}async addContentTypes(R,C){const N=new x().toXml(C);R.append(N,{name:"[Content_Types].xml"})}async addApp(R,C){const N=new S().toXml(C);R.append(N,{name:"docProps/app.xml"})}async addCore(R,C){const N=new m;R.append(N.toXml(C),{name:"docProps/core.xml"})}async addThemes(R,C){const N=C.themes||{theme1:U};Object.keys(N).forEach(E=>{const k=N[E],P=`xl/theme/${E}.xml`;R.append(k,{name:P})})}async addOfficeRels(R){const C=new b().toXml([{Id:"rId1",Type:D.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:D.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:D.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);R.append(C,{name:"_rels/.rels"})}async addWorkbookRels(R,C){let N=1;const E=[{Id:"rId"+N++,Type:D.RelType.Styles,Target:"styles.xml"},{Id:"rId"+N++,Type:D.RelType.Theme,Target:"theme/theme1.xml"}];C.sharedStrings.count&&E.push({Id:"rId"+N++,Type:D.RelType.SharedStrings,Target:"sharedStrings.xml"}),C.worksheets.forEach(P=>{P.rId="rId"+N++,E.push({Id:P.rId,Type:D.RelType.Worksheet,Target:`worksheets/sheet${P.id}.xml`})});const k=new b().toXml(E);R.append(k,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(R,C){C.sharedStrings&&C.sharedStrings.count&&R.append(C.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(R,C){const{xml:N}=C.styles;N&&R.append(N,{name:"xl/styles.xml"})}async addWorkbook(R,C){const N=new _;R.append(N.toXml(C),{name:"xl/workbook.xml"})}async addWorksheets(R,C){const N=new I,E=new b,k=new M,P=new z;C.worksheets.forEach(q=>{let H=new p;N.render(H,q),R.append(H.xml,{name:`xl/worksheets/sheet${q.id}.xml`}),q.rels&&q.rels.length&&(H=new p,E.render(H,q.rels),R.append(H.xml,{name:`xl/worksheets/_rels/sheet${q.id}.xml.rels`})),q.comments.length>0&&(H=new p,k.render(H,q),R.append(H.xml,{name:`xl/comments${q.id}.xml`}),H=new p,P.render(H,q),R.append(H.xml,{name:`xl/drawings/vmlDrawing${q.id}.vml`}))})}_finalize(R){return new Promise((C,N)=>{R.on("finish",()=>{C(this)}),R.on("error",N),R.finalize()})}prepareModel(R,C){R.creator=R.creator||"ExcelJS",R.lastModifiedBy=R.lastModifiedBy||"ExcelJS",R.created=R.created||new Date,R.modified=R.modified||new Date,R.useSharedStrings=C.useSharedStrings===void 0||C.useSharedStrings,R.useStyles=C.useStyles===void 0||C.useStyles,R.sharedStrings=new v,R.styles=R.useStyles?new y(!0):new y.Mock;const N=new _,E=new I;N.prepare(R);const k={sharedStrings:R.sharedStrings,styles:R.styles,date1904:R.properties.date1904,drawingsCount:0,media:R.media};k.drawings=R.drawings=[],k.commentRefs=R.commentRefs=[];let P=0;R.tables=[],R.worksheets.forEach(q=>{q.tables.forEach(H=>{P++,H.target=`table${P}.xml`,H.id=P,R.tables.push(H)}),E.prepare(q,k)})}async write(R,C){C=C||{};const{model:N}=this.workbook,E=new u.ZipWriter(C.zip);return E.pipe(R),this.prepareModel(N,C),await this.addContentTypes(E,N),await this.addOfficeRels(E,N),await this.addWorkbookRels(E,N),await this.addWorksheets(E,N),await this.addSharedStrings(E,N),await this.addDrawings(E,N),await this.addTables(E,N),await Promise.all([this.addThemes(E,N),this.addStyles(E,N)]),await this.addMedia(E,N),await Promise.all([this.addApp(E,N),this.addCore(E,N)]),await this.addWorkbook(E,N),this._finalize(E)}writeFile(R,C){const N=o.createWriteStream(R);return new Promise((E,k)=>{N.on("finish",()=>{E()}),N.on("error",P=>{k(P)}),this.write(N,C).then(()=>{N.end()}).catch(P=>{k(P)})})}async writeBuffer(R){const C=new f;return await this.write(C,R),C.read()}}D.RelType=e("./rel-type"),n.exports=D}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(e,n,a){n.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(e,n,a){(function(i){(function(){Object.defineProperty(a,"__esModule",{value:!0}),a.CsvFormatterStream=void 0;const s=e("stream"),o=e("./formatter");class l extends s.Transform{constructor(u){super({writableObjectMode:u.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=u,this.rowFormatter=new o.RowFormatter(u),this.hasWrittenBOM=!u.writeBOM}transform(u){return this.rowFormatter.rowTransform=u,this}_transform(u,f,h){let p=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(u,(g,y)=>g?(p=!0,h(g)):(y&&y.forEach(m=>{this.push(i.from(m,"utf8"))}),p=!0,h()))}catch(g){if(p)throw g;h(g)}}_flush(u){this.rowFormatter.finish((f,h)=>f?u(f):(h&&h.forEach(p=>{this.push(i.from(p,"utf8"))}),u()))}}a.CsvFormatterStream=l}).call(this)}).call(this,e("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.FormatterOptions=void 0,a.FormatterOptions=class{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var s;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,i||{}),(i==null?void 0:i.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(i==null?void 0:i.quote)===!0?this.quote='"':(i==null?void 0:i.quote)===!1&&(this.quote=""),typeof(i==null?void 0:i.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((s=i.writeHeaders)===null||s===void 0||s),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(e,n,a){var i=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.FieldFormatter=void 0;const s=i(e("lodash.isboolean")),o=i(e("lodash.isnil")),l=i(e("lodash.escaperegexp"));a.FieldFormatter=class{constructor(c){this._headers=null,this.formatterOptions=c,c.headers!==null&&(this.headers=c.headers),this.REPLACE_REGEXP=new RegExp(c.quote,"g");const u=`[${c.delimiter}${l.default(c.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(u)}set headers(c){this._headers=c}shouldQuote(c,u){const f=u?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return s.default(f)?f:Array.isArray(f)?f[c]:this._headers!==null&&f[this._headers[c]]}format(c,u,f){const h=(""+(o.default(c)?"":c)).replace(/\0/g,""),{formatterOptions:p}=this;return p.quote!==""&&h.indexOf(p.quote)!==-1?this.quoteField(h.replace(this.REPLACE_REGEXP,p.escapedQuote)):h.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(u,f)?this.quoteField(h):h}quoteField(c){const{quote:u}=this.formatterOptions;return`${u}${c}${u}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(e,n,a){var i=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0}),a.RowFormatter=void 0;const s=i(e("lodash.isfunction")),o=i(e("lodash.isequal")),l=e("./FieldFormatter"),c=e("../types");class u{constructor(h){this.rowCount=0,this.formatterOptions=h,this.fieldFormatter=new l.FieldFormatter(h),this.headers=h.headers,this.shouldWriteHeaders=h.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),h.transform&&(this.rowTransform=h.transform)}static isRowHashArray(h){return!!Array.isArray(h)&&Array.isArray(h[0])&&h[0].length===2}static isRowArray(h){return Array.isArray(h)&&!this.isRowHashArray(h)}static gatherHeaders(h){return u.isRowHashArray(h)?h.map(p=>p[0]):Array.isArray(h)?h:Object.keys(h)}static createTransform(h){return c.isSyncTransform(h)?(p,g)=>{let y=null;try{y=h(p)}catch(m){return g(m)}return g(null,y)}:(p,g)=>{h(p,g)}}set rowTransform(h){if(!s.default(h))throw new TypeError("The transform should be a function");this._rowTransform=u.createTransform(h)}format(h,p){this.callTransformer(h,(g,y)=>{if(g)return p(g);if(!h)return p(null);const m=[];if(y){const{shouldFormatColumns:v,headers:b}=this.checkHeaders(y);if(this.shouldWriteHeaders&&b&&!this.hasWrittenHeaders&&(m.push(this.formatColumns(b,!0)),this.hasWrittenHeaders=!0),v){const x=this.gatherColumns(y);m.push(this.formatColumns(x,!1))}}return p(null,m)})}finish(h){const p=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return h(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));p.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&p.push(this.formatterOptions.rowDelimiter),h(null,p)}checkHeaders(h){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const p=u.gatherHeaders(h);return this.headers=p,this.fieldFormatter.headers=p,this.shouldWriteHeaders?{shouldFormatColumns:!o.default(p,h),headers:p}:{shouldFormatColumns:!0,headers:null}}gatherColumns(h){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(h)?u.isRowHashArray(h)?this.headers.map((p,g)=>{const y=h[g];return y?y[1]:""}):u.isRowArray(h)&&!this.shouldWriteHeaders?h:this.headers.map((p,g)=>h[g]):this.headers.map(p=>h[p])}callTransformer(h,p){return this._rowTransform?this._rowTransform(h,p):p(null,h)}formatColumns(h,p){const g=h.map((m,v)=>this.fieldFormatter.format(m,v,p)).join(this.formatterOptions.delimiter),{rowCount:y}=this;return this.rowCount+=1,y?[this.formatterOptions.rowDelimiter,g].join(""):g}}a.RowFormatter=u},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.FieldFormatter=a.RowFormatter=void 0;var i=e("./RowFormatter");Object.defineProperty(a,"RowFormatter",{enumerable:!0,get:function(){return i.RowFormatter}});var s=e("./FieldFormatter");Object.defineProperty(a,"FieldFormatter",{enumerable:!0,get:function(){return s.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(e,n,a){(function(i){(function(){var s=Object.create?function(v,b,x,S){S===void 0&&(S=x),Object.defineProperty(v,S,{enumerable:!0,get:function(){return b[x]}})}:function(v,b,x,S){S===void 0&&(S=x),v[S]=b[x]},o=Object.create?function(v,b){Object.defineProperty(v,"default",{enumerable:!0,value:b})}:function(v,b){v.default=b},l=function(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&s(b,v,x);return o(b,v),b},c=function(v,b){for(var x in v)x==="default"||Object.prototype.hasOwnProperty.call(b,x)||s(b,v,x)};Object.defineProperty(a,"__esModule",{value:!0}),a.writeToPath=a.writeToString=a.writeToBuffer=a.writeToStream=a.write=a.format=a.FormatterOptions=a.CsvFormatterStream=void 0;const u=e("util"),f=e("stream"),h=l(e("fs")),p=e("./FormatterOptions"),g=e("./CsvFormatterStream");c(e("./types"),a);var y=e("./CsvFormatterStream");Object.defineProperty(a,"CsvFormatterStream",{enumerable:!0,get:function(){return y.CsvFormatterStream}});var m=e("./FormatterOptions");Object.defineProperty(a,"FormatterOptions",{enumerable:!0,get:function(){return m.FormatterOptions}}),a.format=v=>new g.CsvFormatterStream(new p.FormatterOptions(v)),a.write=(v,b)=>{const x=a.format(b),S=u.promisify((_,I)=>{x.write(_,void 0,I)});return v.reduce((_,I)=>_.then(()=>S(I)),Promise.resolve()).then(()=>x.end()).catch(_=>{x.emit("error",_)}),x},a.writeToStream=(v,b,x)=>a.write(b,x).pipe(v),a.writeToBuffer=function(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const x=[],S=new f.Writable({write(_,I,A){x.push(_),A()}});return new Promise((_,I)=>{S.on("error",I).on("finish",()=>_(i.concat(x))),a.write(v,b).pipe(S)})},a.writeToString=(v,b)=>a.writeToBuffer(v,b).then(x=>x.toString()),a.writeToPath=(v,b,x)=>{const S=h.createWriteStream(v,{encoding:"utf8"});return a.write(b,x).pipe(S)}}).call(this)}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.isSyncTransform=void 0,a.isSyncTransform=i=>i.length===1},{}],153:[function(e,n,a){(function(i){(function(){Object.defineProperty(a,"__esModule",{value:!0}),a.CsvParserStream=void 0;const s=e("string_decoder"),o=e("stream"),l=e("./transforms"),c=e("./parser");class u extends o.Transform{constructor(h){super({objectMode:h.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=h,this.parser=new c.Parser(h),this.headerTransformer=new l.HeaderTransformer(h),this.decoder=new s.StringDecoder(h.encoding),this.rowTransformerValidator=new l.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(h){return this.rowTransformerValidator.rowTransform=h,this}validate(h){return this.rowTransformerValidator.rowValidator=h,this}emit(h){if(h==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];return super.emit(h,...g)}_transform(h,p,g){if(this.hasHitRowLimit)return g();const y=u.wrapDoneCallback(g);try{const{lines:m}=this,v=m+this.decoder.write(h),b=this.parse(v,!0);return this.processRows(b,y)}catch(m){return y(m)}}_flush(h){const p=u.wrapDoneCallback(h);if(this.hasHitRowLimit)return p();try{const g=this.lines+this.decoder.end(),y=this.parse(g,!1);return this.processRows(y,p)}catch(g){return p(g)}}parse(h,p){if(!h)return[];const{line:g,rows:y}=this.parser.parse(h,p);return this.lines=g,y}processRows(h,p){const g=h.length,y=m=>{const v=S=>S?p(S):m%100!=0?y(m+1):void i(()=>y(m+1));if(this.checkAndEmitHeaders(),m>=g||this.hasHitRowLimit)return p();if(this.parsedLineCount+=1,this.shouldSkipLine)return v();const b=h[m];this.rowCount+=1,this.parsedRowCount+=1;const x=this.rowCount;return this.transformRow(b,(S,_)=>{if(S)return this.rowCount-=1,v(S);if(!_)return v(new Error("expected transform result"));if(_.isValid){if(_.row)return this.pushRow(_.row,v)}else this.emit("data-invalid",_.row,x,_.reason);return v()})};y(0)}transformRow(h,p){try{this.headerTransformer.transform(h,(g,y)=>g?p(g):y?y.isValid?y.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(y.row,p):this.skipRow(p):(this.rowCount-=1,this.parsedRowCount-=1,p(null,{row:null,isValid:!0})):this.shouldEmitRows?p(null,{isValid:!1,row:h}):this.skipRow(p):p(new Error("Expected result from header transform")))}catch(g){p(g)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(h){return this.rowCount-=1,h(null,{row:null,isValid:!0})}pushRow(h,p){try{this.parserOptions.objectMode?this.push(h):this.push(JSON.stringify(h)),p()}catch(g){p(g)}}static wrapDoneCallback(h){let p=!1;return function(g){if(g){if(p)throw g;return p=!0,void h(g)}for(var y=arguments.length,m=new Array(y>1?y-1:0),v=1;v<y;v++)m[v-1]=arguments[v];h(...m)}}}a.CsvParserStream=u}).call(this)}).call(this,e("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(e,n,a){var i=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0}),a.ParserOptions=void 0;const s=i(e("lodash.escaperegexp")),o=i(e("lodash.isnil"));a.ParserOptions=class{constructor(l){var c;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,l||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=s.default(this.delimiter),this.escapeChar=(c=this.escape)!==null&&c!==void 0?c:this.quote,this.supportsComments=!o.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(e,n,a){var i=Object.create?function(y,m,v,b){b===void 0&&(b=v),Object.defineProperty(y,b,{enumerable:!0,get:function(){return m[v]}})}:function(y,m,v,b){b===void 0&&(b=v),y[b]=m[v]},s=Object.create?function(y,m){Object.defineProperty(y,"default",{enumerable:!0,value:m})}:function(y,m){y.default=m},o=function(y){if(y&&y.__esModule)return y;var m={};if(y!=null)for(var v in y)v!=="default"&&Object.prototype.hasOwnProperty.call(y,v)&&i(m,y,v);return s(m,y),m},l=function(y,m){for(var v in y)v==="default"||Object.prototype.hasOwnProperty.call(m,v)||i(m,y,v)};Object.defineProperty(a,"__esModule",{value:!0}),a.parseString=a.parseFile=a.parseStream=a.parse=a.ParserOptions=a.CsvParserStream=void 0;const c=o(e("fs")),u=e("stream"),f=e("./ParserOptions"),h=e("./CsvParserStream");l(e("./types"),a);var p=e("./CsvParserStream");Object.defineProperty(a,"CsvParserStream",{enumerable:!0,get:function(){return p.CsvParserStream}});var g=e("./ParserOptions");Object.defineProperty(a,"ParserOptions",{enumerable:!0,get:function(){return g.ParserOptions}}),a.parse=y=>new h.CsvParserStream(new f.ParserOptions(y)),a.parseStream=(y,m)=>y.pipe(new h.CsvParserStream(new f.ParserOptions(m))),a.parseFile=function(y){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c.createReadStream(y).pipe(new h.CsvParserStream(new f.ParserOptions(m)))},a.parseString=(y,m)=>{const v=new u.Readable;return v.push(y),v.push(null),v.pipe(new h.CsvParserStream(new f.ParserOptions(m)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.Parser=void 0;const i=e("./Scanner"),s=e("./RowParser"),o=e("./Token");class l{constructor(u){this.parserOptions=u,this.rowParser=new s.RowParser(this.parserOptions)}static removeBOM(u){return u&&u.charCodeAt(0)===65279?u.slice(1):u}parse(u,f){const h=new i.Scanner({line:l.removeBOM(u),parserOptions:this.parserOptions,hasMoreData:f});return this.parserOptions.supportsComments?this.parseWithComments(h):this.parseWithoutComments(h)}parseWithoutComments(u){const f=[];let h=!0;for(;h;)h=this.parseRow(u,f);return{line:u.line,rows:f}}parseWithComments(u){const{parserOptions:f}=this,h=[];for(let p=u.nextCharacterToken;p!==null;p=u.nextCharacterToken)if(o.Token.isTokenComment(p,f)){if(u.advancePastLine()===null)return{line:u.lineFromCursor,rows:h};if(!u.hasMoreCharacters)return{line:u.lineFromCursor,rows:h};u.truncateToCursor()}else if(!this.parseRow(u,h))break;return{line:u.line,rows:h}}parseRow(u,f){if(!u.nextNonSpaceToken)return!1;const h=this.rowParser.parse(u);return h!==null&&(this.parserOptions.ignoreEmpty&&s.RowParser.isEmptyRow(h)||f.push(h),!0)}}a.Parser=l},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.RowParser=void 0;const i=e("./column"),s=e("./Token");a.RowParser=class{constructor(o){this.parserOptions=o,this.columnParser=new i.ColumnParser(o)}static isEmptyRow(o){return o.join("").replace(/\s+/g,"")===""}parse(o){const{parserOptions:l}=this,{hasMoreData:c}=o,u=o,f=[];let h=this.getStartToken(u,f);for(;h;){if(s.Token.isTokenRowDelimiter(h))return u.advancePastToken(h),!u.hasMoreCharacters&&s.Token.isTokenCarriageReturn(h,l)&&c?null:(u.truncateToCursor(),f);if(!this.shouldSkipColumnParse(u,h,f)){const p=this.columnParser.parse(u);if(p===null)return null;f.push(p)}h=u.nextNonSpaceToken}return c?null:(u.truncateToCursor(),f)}getStartToken(o,l){const c=o.nextNonSpaceToken;return c!==null&&s.Token.isTokenDelimiter(c,this.parserOptions)?(l.push(""),o.nextNonSpaceToken):c}shouldSkipColumnParse(o,l,c){const{parserOptions:u}=this;if(s.Token.isTokenDelimiter(l,u)){o.advancePastToken(l);const f=o.nextCharacterToken;if(!o.hasMoreCharacters||f!==null&&s.Token.isTokenRowDelimiter(f)||f!==null&&s.Token.isTokenDelimiter(f,u))return c.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.Scanner=void 0;const i=e("./Token"),s=/((?:\r\n)|\n|\r)/;a.Scanner=class{constructor(o){this.cursor=0,this.line=o.line,this.lineLength=this.line.length,this.parserOptions=o.parserOptions,this.hasMoreData=o.hasMoreData,this.cursor=o.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:o}=this,l=this.parserOptions.NEXT_TOKEN_REGEXP;if(o.search(l)===-1)return null;const c=l.exec(o);if(c==null)return null;const u=c[1],f=this.cursor+(c.index||0);return new i.Token({token:u,startCursor:f,endCursor:f+u.length-1})}get nextCharacterToken(){const{cursor:o,lineLength:l}=this;return l<=o?null:new i.Token({token:this.line[o],startCursor:o,endCursor:o})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const o=s.exec(this.lineFromCursor);return o?(this.cursor+=(o.index||0)+o[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(o){return this.cursor=o,this}advanceToToken(o){return this.cursor=o.startCursor,this}advancePastToken(o){return this.cursor=o.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.Token=void 0,a.Token=class{constructor(i){this.token=i.token,this.startCursor=i.startCursor,this.endCursor=i.endCursor}static isTokenRowDelimiter(i){const s=i.token;return s==="\r"||s===`
`||s===`\r
`}static isTokenCarriageReturn(i,s){return i.token===s.carriageReturn}static isTokenComment(i,s){return s.supportsComments&&!!i&&i.token===s.comment}static isTokenEscapeCharacter(i,s){return i.token===s.escapeChar}static isTokenQuote(i,s){return i.token===s.quote}static isTokenDelimiter(i,s){return i.token===s.delimiter}}},{}],160:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ColumnFormatter=void 0,a.ColumnFormatter=class{constructor(i){i.trim?this.format=s=>s.trim():i.ltrim?this.format=s=>s.trimLeft():i.rtrim?this.format=s=>s.trimRight():this.format=s=>s}}},{}],161:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ColumnParser=void 0;const i=e("./NonQuotedColumnParser"),s=e("./QuotedColumnParser"),o=e("../Token");a.ColumnParser=class{constructor(l){this.parserOptions=l,this.quotedColumnParser=new s.QuotedColumnParser(l),this.nonQuotedColumnParser=new i.NonQuotedColumnParser(l)}parse(l){const{nextNonSpaceToken:c}=l;return c!==null&&o.Token.isTokenQuote(c,this.parserOptions)?(l.advanceToToken(c),this.quotedColumnParser.parse(l)):this.nonQuotedColumnParser.parse(l)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.NonQuotedColumnParser=void 0;const i=e("./ColumnFormatter"),s=e("../Token");a.NonQuotedColumnParser=class{constructor(o){this.parserOptions=o,this.columnFormatter=new i.ColumnFormatter(o)}parse(o){if(!o.hasMoreCharacters)return null;const{parserOptions:l}=this,c=[];let u=o.nextCharacterToken;for(;u&&!s.Token.isTokenDelimiter(u,l)&&!s.Token.isTokenRowDelimiter(u);u=o.nextCharacterToken)c.push(u.token),o.advancePastToken(u);return this.columnFormatter.format(c.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.QuotedColumnParser=void 0;const i=e("./ColumnFormatter"),s=e("../Token");a.QuotedColumnParser=class{constructor(o){this.parserOptions=o,this.columnFormatter=new i.ColumnFormatter(o)}parse(o){if(!o.hasMoreCharacters)return null;const l=o.cursor,{foundClosingQuote:c,col:u}=this.gatherDataBetweenQuotes(o);if(!c){if(o.advanceTo(l),!o.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${o.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(o),u}gatherDataBetweenQuotes(o){const{parserOptions:l}=this;let c=!1,u=!1;const f=[];let h=o.nextCharacterToken;for(;!u&&h!==null;h=o.nextCharacterToken){const p=s.Token.isTokenQuote(h,l);if(!c&&p)c=!0;else if(c)if(s.Token.isTokenEscapeCharacter(h,l)){o.advancePastToken(h);const g=o.nextCharacterToken;g!==null&&(s.Token.isTokenQuote(g,l)||s.Token.isTokenEscapeCharacter(g,l))?(f.push(g.token),h=g):p?u=!0:f.push(h.token)}else p?u=!0:f.push(h.token);o.advancePastToken(h)}return{col:this.columnFormatter.format(f.join("")),foundClosingQuote:u}}checkForMalformedColumn(o){const{parserOptions:l}=this,{nextNonSpaceToken:c}=o;if(c){const u=s.Token.isTokenDelimiter(c,l),f=s.Token.isTokenRowDelimiter(c);if(!u&&!f){const h=o.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${l.escapedDelimiter}' OR new line got: '${c.token}'. at '${h}`)}o.advanceToToken(c)}else o.hasMoreData||o.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ColumnFormatter=a.QuotedColumnParser=a.NonQuotedColumnParser=a.ColumnParser=void 0;var i=e("./ColumnParser");Object.defineProperty(a,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}});var s=e("./NonQuotedColumnParser");Object.defineProperty(a,"NonQuotedColumnParser",{enumerable:!0,get:function(){return s.NonQuotedColumnParser}});var o=e("./QuotedColumnParser");Object.defineProperty(a,"QuotedColumnParser",{enumerable:!0,get:function(){return o.QuotedColumnParser}});var l=e("./ColumnFormatter");Object.defineProperty(a,"ColumnFormatter",{enumerable:!0,get:function(){return l.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.QuotedColumnParser=a.NonQuotedColumnParser=a.ColumnParser=a.Token=a.Scanner=a.RowParser=a.Parser=void 0;var i=e("./Parser");Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});var s=e("./RowParser");Object.defineProperty(a,"RowParser",{enumerable:!0,get:function(){return s.RowParser}});var o=e("./Scanner");Object.defineProperty(a,"Scanner",{enumerable:!0,get:function(){return o.Scanner}});var l=e("./Token");Object.defineProperty(a,"Token",{enumerable:!0,get:function(){return l.Token}});var c=e("./column");Object.defineProperty(a,"ColumnParser",{enumerable:!0,get:function(){return c.ColumnParser}}),Object.defineProperty(a,"NonQuotedColumnParser",{enumerable:!0,get:function(){return c.NonQuotedColumnParser}}),Object.defineProperty(a,"QuotedColumnParser",{enumerable:!0,get:function(){return c.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(e,n,a){var i=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0}),a.HeaderTransformer=void 0;const s=i(e("lodash.isundefined")),o=i(e("lodash.isfunction")),l=i(e("lodash.uniq")),c=i(e("lodash.groupby"));a.HeaderTransformer=class{constructor(u){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=u,u.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(u.headers)?this.setHeaders(u.headers):o.default(u.headers)&&(this.headersTransform=u.headers)}transform(u,f){return this.shouldMapRow(u)?f(null,this.processRow(u)):f(null,{row:null,isValid:!0})}shouldMapRow(u){const{parserOptions:f}=this;if(!this.headersTransform&&f.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(u)){if(this.headersTransform)this.setHeaders(this.headersTransform(u));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(u)}return!1}return!0}processRow(u){if(!this.headers)return{row:u,isValid:!0};const{parserOptions:f}=this;if(!f.discardUnmappedColumns&&u.length>this.headersLength){if(!f.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${u.length}`);return{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}}return f.strictColumnHandling&&u.length<this.headersLength?{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}:{row:this.mapHeaders(u),isValid:!0}}mapHeaders(u){const f={},{headers:h,headersLength:p}=this;for(let g=0;g<p;g+=1){const y=h[g];if(!s.default(y)){const m=u[g];s.default(m)?f[y]="":f[y]=m}}return f}setHeaders(u){var f;const h=u.filter(p=>!!p);if(l.default(h).length!==h.length){const p=c.default(h),g=Object.keys(p).filter(y=>p[y].length>1);throw new Error("Duplicate headers found "+JSON.stringify(g))}this.headers=u,this.receivedHeaders=!0,this.headersLength=((f=this.headers)===null||f===void 0?void 0:f.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(e,n,a){var i=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.RowTransformerValidator=void 0;const s=i(e("lodash.isfunction")),o=e("../types");class l{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(u){return o.isSyncTransform(u)?(f,h)=>{let p=null;try{p=u(f)}catch(g){return h(g)}return h(null,p)}:u}static createValidator(u){return o.isSyncValidate(u)?(f,h)=>{h(null,{row:f,isValid:u(f)})}:(f,h)=>{u(f,(p,g,y)=>p?h(p):h(null,g?{row:f,isValid:g,reason:y}:{row:f,isValid:!1,reason:y}))}}set rowTransform(u){if(!s.default(u))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(u)}set rowValidator(u){if(!s.default(u))throw new TypeError("The validate should be a function");this._rowValidator=l.createValidator(u)}transformAndValidate(u,f){return this.callTransformer(u,(h,p)=>h?f(h):p?this.callValidator(p,(g,y)=>g?f(g):y&&!y.isValid?f(null,{row:p,isValid:!1,reason:y.reason}):f(null,{row:p,isValid:!0})):f(null,{row:null,isValid:!0}))}callTransformer(u,f){return this._rowTransform?this._rowTransform(u,f):f(null,u)}callValidator(u,f){return this._rowValidator?this._rowValidator(u,f):f(null,{row:u,isValid:!0})}}a.RowTransformerValidator=l},{"../types":169,"lodash.isfunction":446}],168:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.HeaderTransformer=a.RowTransformerValidator=void 0;var i=e("./RowTransformerValidator");Object.defineProperty(a,"RowTransformerValidator",{enumerable:!0,get:function(){return i.RowTransformerValidator}});var s=e("./HeaderTransformer");Object.defineProperty(a,"HeaderTransformer",{enumerable:!0,get:function(){return s.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.isSyncValidate=a.isSyncTransform=void 0,a.isSyncTransform=i=>i.length===1,a.isSyncValidate=i=>i.length===1},{}],170:[function(e,n,a){const i=a;i.bignum=e("bn.js"),i.define=e("./asn1/api").define,i.base=e("./asn1/base"),i.constants=e("./asn1/constants"),i.decoders=e("./asn1/decoders"),i.encoders=e("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(e,n,a){const i=e("./encoders"),s=e("./decoders"),o=e("inherits");function l(c,u){this.name=c,this.body=u,this.decoders={},this.encoders={}}a.define=function(c,u){return new l(c,u)},l.prototype._createNamed=function(c){const u=this.name;function f(h){this._initNamed(h,u)}return o(f,c),f.prototype._initNamed=function(h,p){c.call(this,h,p)},new f(this)},l.prototype._getDecoder=function(c){return c=c||"der",this.decoders.hasOwnProperty(c)||(this.decoders[c]=this._createNamed(s[c])),this.decoders[c]},l.prototype.decode=function(c,u,f){return this._getDecoder(u).decode(c,f)},l.prototype._getEncoder=function(c){return c=c||"der",this.encoders.hasOwnProperty(c)||(this.encoders[c]=this._createNamed(i[c])),this.encoders[c]},l.prototype.encode=function(c,u,f){return this._getEncoder(u).encode(c,f)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(e,n,a){const i=e("inherits"),s=e("../base/reporter").Reporter,o=e("safer-buffer").Buffer;function l(u,f){s.call(this,f),o.isBuffer(u)?(this.base=u,this.offset=0,this.length=u.length):this.error("Input not Buffer")}function c(u,f){if(Array.isArray(u))this.length=0,this.value=u.map((function(h){return c.isEncoderBuffer(h)||(h=new c(h,f)),this.length+=h.length,h}),this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return f.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=o.byteLength(u);else{if(!o.isBuffer(u))return f.error("Unsupported type: "+typeof u);this.value=u,this.length=u.length}}i(l,s),a.DecoderBuffer=l,l.isDecoderBuffer=function(u){return u instanceof l?!0:typeof u=="object"&&o.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},l.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},l.prototype.restore=function(u){const f=new l(this.base);return f.offset=u.offset,f.length=this.offset,this.offset=u.offset,s.prototype.restore.call(this,u.reporter),f},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},l.prototype.skip=function(u,f){if(!(this.offset+u<=this.length))return this.error(f||"DecoderBuffer overrun");const h=new l(this.base);return h._reporterState=this._reporterState,h.offset=this.offset,h.length=this.offset+u,this.offset+=u,h},l.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)},a.EncoderBuffer=c,c.isEncoderBuffer=function(u){return u instanceof c?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},c.prototype.join=function(u,f){return u||(u=o.alloc(this.length)),f||(f=0),this.length===0||(Array.isArray(this.value)?this.value.forEach((function(h){h.join(u,f),f+=h.length})):(typeof this.value=="number"?u[f]=this.value:typeof this.value=="string"?u.write(this.value,f):o.isBuffer(this.value)&&this.value.copy(u,f),f+=this.length)),u}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(e,n,a){const i=a;i.Reporter=e("./reporter").Reporter,i.DecoderBuffer=e("./buffer").DecoderBuffer,i.EncoderBuffer=e("./buffer").EncoderBuffer,i.Node=e("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(e,n,a){const i=e("../base/reporter").Reporter,s=e("../base/buffer").EncoderBuffer,o=e("../base/buffer").DecoderBuffer,l=e("minimalistic-assert"),c=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(c);function f(p,g,y){const m={};this._baseState=m,m.name=y,m.enc=p,m.parent=g||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}n.exports=f;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];f.prototype.clone=function(){const p=this._baseState,g={};h.forEach((function(m){g[m]=p[m]}));const y=new this.constructor(g.parent);return y._baseState=g,y},f.prototype._wrap=function(){const p=this._baseState;u.forEach((function(g){this[g]=function(){const y=new this.constructor(this);return p.children.push(y),y[g].apply(y,arguments)}}),this)},f.prototype._init=function(p){const g=this._baseState;l(g.parent===null),p.call(this),g.children=g.children.filter((function(y){return y._baseState.parent===this}),this),l.equal(g.children.length,1,"Root node can have only one child")},f.prototype._useArgs=function(p){const g=this._baseState,y=p.filter((function(m){return m instanceof this.constructor}),this);p=p.filter((function(m){return!(m instanceof this.constructor)}),this),y.length!==0&&(l(g.children===null),g.children=y,y.forEach((function(m){m._baseState.parent=this}),this)),p.length!==0&&(l(g.args===null),g.args=p,g.reverseArgs=p.map((function(m){if(typeof m!="object"||m.constructor!==Object)return m;const v={};return Object.keys(m).forEach((function(b){b==(0|b)&&(b|=0);const x=m[b];v[x]=b})),v})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(p){f.prototype[p]=function(){const g=this._baseState;throw new Error(p+" not implemented for encoding: "+g.enc)}})),c.forEach((function(p){f.prototype[p]=function(){const g=this._baseState,y=Array.prototype.slice.call(arguments);return l(g.tag===null),g.tag=p,this._useArgs(y),this}})),f.prototype.use=function(p){l(p);const g=this._baseState;return l(g.use===null),g.use=p,this},f.prototype.optional=function(){return this._baseState.optional=!0,this},f.prototype.def=function(p){const g=this._baseState;return l(g.default===null),g.default=p,g.optional=!0,this},f.prototype.explicit=function(p){const g=this._baseState;return l(g.explicit===null&&g.implicit===null),g.explicit=p,this},f.prototype.implicit=function(p){const g=this._baseState;return l(g.explicit===null&&g.implicit===null),g.implicit=p,this},f.prototype.obj=function(){const p=this._baseState,g=Array.prototype.slice.call(arguments);return p.obj=!0,g.length!==0&&this._useArgs(g),this},f.prototype.key=function(p){const g=this._baseState;return l(g.key===null),g.key=p,this},f.prototype.any=function(){return this._baseState.any=!0,this},f.prototype.choice=function(p){const g=this._baseState;return l(g.choice===null),g.choice=p,this._useArgs(Object.keys(p).map((function(y){return p[y]}))),this},f.prototype.contains=function(p){const g=this._baseState;return l(g.use===null),g.contains=p,this},f.prototype._decode=function(p,g){const y=this._baseState;if(y.parent===null)return p.wrapResult(y.children[0]._decode(p,g));let m,v=y.default,b=!0,x=null;if(y.key!==null&&(x=p.enterKey(y.key)),y.optional){let S=null;if(y.explicit!==null?S=y.explicit:y.implicit!==null?S=y.implicit:y.tag!==null&&(S=y.tag),S!==null||y.any){if(b=this._peekTag(p,S,y.any),p.isError(b))return b}else{const _=p.save();try{y.choice===null?this._decodeGeneric(y.tag,p,g):this._decodeChoice(p,g),b=!0}catch{b=!1}p.restore(_)}}if(y.obj&&b&&(m=p.enterObject()),b){if(y.explicit!==null){const _=this._decodeTag(p,y.explicit);if(p.isError(_))return _;p=_}const S=p.offset;if(y.use===null&&y.choice===null){let _;y.any&&(_=p.save());const I=this._decodeTag(p,y.implicit!==null?y.implicit:y.tag,y.any);if(p.isError(I))return I;y.any?v=p.raw(_):p=I}if(g&&g.track&&y.tag!==null&&g.track(p.path(),S,p.length,"tagged"),g&&g.track&&y.tag!==null&&g.track(p.path(),p.offset,p.length,"content"),y.any||(v=y.choice===null?this._decodeGeneric(y.tag,p,g):this._decodeChoice(p,g)),p.isError(v))return v;if(y.any||y.choice!==null||y.children===null||y.children.forEach((function(_){_._decode(p,g)})),y.contains&&(y.tag==="octstr"||y.tag==="bitstr")){const _=new o(v);v=this._getUse(y.contains,p._reporterState.obj)._decode(_,g)}}return y.obj&&b&&(v=p.leaveObject(m)),y.key===null||v===null&&b!==!0?x!==null&&p.exitKey(x):p.leaveKey(x,y.key,v),v},f.prototype._decodeGeneric=function(p,g,y){const m=this._baseState;return p==="seq"||p==="set"?null:p==="seqof"||p==="setof"?this._decodeList(g,p,m.args[0],y):/str$/.test(p)?this._decodeStr(g,p,y):p==="objid"&&m.args?this._decodeObjid(g,m.args[0],m.args[1],y):p==="objid"?this._decodeObjid(g,null,null,y):p==="gentime"||p==="utctime"?this._decodeTime(g,p,y):p==="null_"?this._decodeNull(g,y):p==="bool"?this._decodeBool(g,y):p==="objDesc"?this._decodeStr(g,p,y):p==="int"||p==="enum"?this._decodeInt(g,m.args&&m.args[0],y):m.use!==null?this._getUse(m.use,g._reporterState.obj)._decode(g,y):g.error("unknown tag: "+p)},f.prototype._getUse=function(p,g){const y=this._baseState;return y.useDecoder=this._use(p,g),l(y.useDecoder._baseState.parent===null),y.useDecoder=y.useDecoder._baseState.children[0],y.implicit!==y.useDecoder._baseState.implicit&&(y.useDecoder=y.useDecoder.clone(),y.useDecoder._baseState.implicit=y.implicit),y.useDecoder},f.prototype._decodeChoice=function(p,g){const y=this._baseState;let m=null,v=!1;return Object.keys(y.choice).some((function(b){const x=p.save(),S=y.choice[b];try{const _=S._decode(p,g);if(p.isError(_))return!1;m={type:b,value:_},v=!0}catch{return p.restore(x),!1}return!0}),this),v?m:p.error("Choice not matched")},f.prototype._createEncoderBuffer=function(p){return new s(p,this.reporter)},f.prototype._encode=function(p,g,y){const m=this._baseState;if(m.default!==null&&m.default===p)return;const v=this._encodeValue(p,g,y);return v===void 0||this._skipDefault(v,g,y)?void 0:v},f.prototype._encodeValue=function(p,g,y){const m=this._baseState;if(m.parent===null)return m.children[0]._encode(p,g||new i);let v=null;if(this.reporter=g,m.optional&&p===void 0){if(m.default===null)return;p=m.default}let b=null,x=!1;if(m.any)v=this._createEncoderBuffer(p);else if(m.choice)v=this._encodeChoice(p,g);else if(m.contains)b=this._getUse(m.contains,y)._encode(p,g),x=!0;else if(m.children)b=m.children.map((function(S){if(S._baseState.tag==="null_")return S._encode(null,g,p);if(S._baseState.key===null)return g.error("Child should have a key");const _=g.enterKey(S._baseState.key);if(typeof p!="object")return g.error("Child expected, but input is not object");const I=S._encode(p[S._baseState.key],g,p);return g.leaveKey(_),I}),this).filter((function(S){return S})),b=this._createEncoderBuffer(b);else if(m.tag==="seqof"||m.tag==="setof"){if(!m.args||m.args.length!==1)return g.error("Too many args for : "+m.tag);if(!Array.isArray(p))return g.error("seqof/setof, but data is not Array");const S=this.clone();S._baseState.implicit=null,b=this._createEncoderBuffer(p.map((function(_){const I=this._baseState;return this._getUse(I.args[0],p)._encode(_,g)}),S))}else m.use!==null?v=this._getUse(m.use,y)._encode(p,g):(b=this._encodePrimitive(m.tag,p),x=!0);if(!m.any&&m.choice===null){const S=m.implicit!==null?m.implicit:m.tag,_=m.implicit===null?"universal":"context";S===null?m.use===null&&g.error("Tag could be omitted only for .use()"):m.use===null&&(v=this._encodeComposite(S,x,_,b))}return m.explicit!==null&&(v=this._encodeComposite(m.explicit,!1,"context",v)),v},f.prototype._encodeChoice=function(p,g){const y=this._baseState,m=y.choice[p.type];return m||l(!1,p.type+" not found in "+JSON.stringify(Object.keys(y.choice))),m._encode(p.value,g)},f.prototype._encodePrimitive=function(p,g){const y=this._baseState;if(/str$/.test(p))return this._encodeStr(g,p);if(p==="objid"&&y.args)return this._encodeObjid(g,y.reverseArgs[0],y.args[1]);if(p==="objid")return this._encodeObjid(g,null,null);if(p==="gentime"||p==="utctime")return this._encodeTime(g,p);if(p==="null_")return this._encodeNull();if(p==="int"||p==="enum")return this._encodeInt(g,y.args&&y.reverseArgs[0]);if(p==="bool")return this._encodeBool(g);if(p==="objDesc")return this._encodeStr(g,p);throw new Error("Unsupported tag: "+p)},f.prototype._isNumstr=function(p){return/^[0-9 ]*$/.test(p)},f.prototype._isPrintstr=function(p){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(p)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(e,n,a){const i=e("inherits");function s(l){this._reporterState={obj:null,path:[],options:l||{},errors:[]}}function o(l,c){this.path=l,this.rethrow(c)}a.Reporter=s,s.prototype.isError=function(l){return l instanceof o},s.prototype.save=function(){const l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},s.prototype.restore=function(l){const c=this._reporterState;c.obj=l.obj,c.path=c.path.slice(0,l.pathLen)},s.prototype.enterKey=function(l){return this._reporterState.path.push(l)},s.prototype.exitKey=function(l){const c=this._reporterState;c.path=c.path.slice(0,l-1)},s.prototype.leaveKey=function(l,c,u){const f=this._reporterState;this.exitKey(l),f.obj!==null&&(f.obj[c]=u)},s.prototype.path=function(){return this._reporterState.path.join("/")},s.prototype.enterObject=function(){const l=this._reporterState,c=l.obj;return l.obj={},c},s.prototype.leaveObject=function(l){const c=this._reporterState,u=c.obj;return c.obj=l,u},s.prototype.error=function(l){let c;const u=this._reporterState,f=l instanceof o;if(c=f?l:new o(u.path.map((function(h){return"["+JSON.stringify(h)+"]"})).join(""),l.message||l,l.stack),!u.options.partial)throw c;return f||u.errors.push(c),c},s.prototype.wrapResult=function(l){const c=this._reporterState;return c.options.partial?{result:this.isError(l)?null:l,errors:c.errors}:l},i(o,Error),o.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(c){this.stack=c.stack}return this}},{inherits:440}],176:[function(e,n,a){function i(s){const o={};return Object.keys(s).forEach((function(l){(0|l)==l&&(l|=0);const c=s[l];o[c]=l})),o}a.tagClass={0:"universal",1:"application",2:"context",3:"private"},a.tagClassByName=i(a.tagClass),a.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},a.tagByName=i(a.tag)},{}],177:[function(e,n,a){const i=a;i._reverse=function(s){const o={};return Object.keys(s).forEach((function(l){(0|l)==l&&(l|=0);const c=s[l];o[c]=l})),o},i.der=e("./der")},{"./der":176}],178:[function(e,n,a){const i=e("inherits"),s=e("bn.js"),o=e("../base/buffer").DecoderBuffer,l=e("../base/node"),c=e("../constants/der");function u(g){this.enc="der",this.name=g.name,this.entity=g,this.tree=new f,this.tree._init(g.body)}function f(g){l.call(this,"der",g)}function h(g,y){let m=g.readUInt8(y);if(g.isError(m))return m;const v=c.tagClass[m>>6],b=(32&m)==0;if((31&m)==31){let x=m;for(m=0;(128&x)==128;){if(x=g.readUInt8(y),g.isError(x))return x;m<<=7,m|=127&x}}else m&=31;return{cls:v,primitive:b,tag:m,tagStr:c.tag[m]}}function p(g,y,m){let v=g.readUInt8(m);if(g.isError(v))return v;if(!y&&v===128)return null;if((128&v)==0)return v;const b=127&v;if(b>4)return g.error("length octect is too long");v=0;for(let x=0;x<b;x++){v<<=8;const S=g.readUInt8(m);if(g.isError(S))return S;v|=S}return v}n.exports=u,u.prototype.decode=function(g,y){return o.isDecoderBuffer(g)||(g=new o(g,y)),this.tree._decode(g,y)},i(f,l),f.prototype._peekTag=function(g,y,m){if(g.isEmpty())return!1;const v=g.save(),b=h(g,'Failed to peek tag: "'+y+'"');return g.isError(b)?b:(g.restore(v),b.tag===y||b.tagStr===y||b.tagStr+"of"===y||m)},f.prototype._decodeTag=function(g,y,m){const v=h(g,'Failed to decode tag of "'+y+'"');if(g.isError(v))return v;let b=p(g,v.primitive,'Failed to get length of "'+y+'"');if(g.isError(b))return b;if(!m&&v.tag!==y&&v.tagStr!==y&&v.tagStr+"of"!==y)return g.error('Failed to match tag: "'+y+'"');if(v.primitive||b!==null)return g.skip(b,'Failed to match body of: "'+y+'"');const x=g.save(),S=this._skipUntilEnd(g,'Failed to skip indefinite length body: "'+this.tag+'"');return g.isError(S)?S:(b=g.offset-x.offset,g.restore(x),g.skip(b,'Failed to match body of: "'+y+'"'))},f.prototype._skipUntilEnd=function(g,y){for(;;){const m=h(g,y);if(g.isError(m))return m;const v=p(g,m.primitive,y);if(g.isError(v))return v;let b;if(b=m.primitive||v!==null?g.skip(v):this._skipUntilEnd(g,y),g.isError(b))return b;if(m.tagStr==="end")break}},f.prototype._decodeList=function(g,y,m,v){const b=[];for(;!g.isEmpty();){const x=this._peekTag(g,"end");if(g.isError(x))return x;const S=m.decode(g,"der",v);if(g.isError(S)&&x)break;b.push(S)}return b},f.prototype._decodeStr=function(g,y){if(y==="bitstr"){const m=g.readUInt8();return g.isError(m)?m:{unused:m,data:g.raw()}}if(y==="bmpstr"){const m=g.raw();if(m.length%2==1)return g.error("Decoding of string type: bmpstr length mismatch");let v="";for(let b=0;b<m.length/2;b++)v+=String.fromCharCode(m.readUInt16BE(2*b));return v}if(y==="numstr"){const m=g.raw().toString("ascii");return this._isNumstr(m)?m:g.error("Decoding of string type: numstr unsupported characters")}if(y==="octstr"||y==="objDesc")return g.raw();if(y==="printstr"){const m=g.raw().toString("ascii");return this._isPrintstr(m)?m:g.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(y)?g.raw().toString():g.error("Decoding of string type: "+y+" unsupported")},f.prototype._decodeObjid=function(g,y,m){let v;const b=[];let x=0,S=0;for(;!g.isEmpty();)S=g.readUInt8(),x<<=7,x|=127&S,(128&S)==0&&(b.push(x),x=0);128&S&&b.push(x);const _=b[0]/40|0,I=b[0]%40;if(v=m?b:[_,I].concat(b.slice(1)),y){let A=y[v.join(" ")];A===void 0&&(A=y[v.join(".")]),A!==void 0&&(v=A)}return v},f.prototype._decodeTime=function(g,y){const m=g.raw().toString();let v,b,x,S,_,I;if(y==="gentime")v=0|m.slice(0,4),b=0|m.slice(4,6),x=0|m.slice(6,8),S=0|m.slice(8,10),_=0|m.slice(10,12),I=0|m.slice(12,14);else{if(y!=="utctime")return g.error("Decoding "+y+" time is not supported yet");v=0|m.slice(0,2),b=0|m.slice(2,4),x=0|m.slice(4,6),S=0|m.slice(6,8),_=0|m.slice(8,10),I=0|m.slice(10,12),v=v<70?2e3+v:1900+v}return Date.UTC(v,b-1,x,S,_,I,0)},f.prototype._decodeNull=function(){return null},f.prototype._decodeBool=function(g){const y=g.readUInt8();return g.isError(y)?y:y!==0},f.prototype._decodeInt=function(g,y){const m=g.raw();let v=new s(m);return y&&(v=y[v.toString(10)]||v),v},f.prototype._use=function(g,y){return typeof g=="function"&&(g=g(y)),g._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(e,n,a){const i=a;i.der=e("./der"),i.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,n,a){const i=e("inherits"),s=e("safer-buffer").Buffer,o=e("./der");function l(c){o.call(this,c),this.enc="pem"}i(l,o),n.exports=l,l.prototype.decode=function(c,u){const f=c.toString().split(/[\r\n]+/g),h=u.label.toUpperCase(),p=/^-----(BEGIN|END) ([^-]+)-----$/;let g=-1,y=-1;for(let b=0;b<f.length;b++){const x=f[b].match(p);if(x!==null&&x[2]===h){if(g!==-1){if(x[1]!=="END")break;y=b;break}if(x[1]!=="BEGIN")break;g=b}}if(g===-1||y===-1)throw new Error("PEM section not found for: "+h);const m=f.slice(g+1,y).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const v=s.from(m,"base64");return o.prototype.decode.call(this,v,u)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(e,n,a){const i=e("inherits"),s=e("safer-buffer").Buffer,o=e("../base/node"),l=e("../constants/der");function c(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new u,this.tree._init(h.body)}function u(h){o.call(this,"der",h)}function f(h){return h<10?"0"+h:h}n.exports=c,c.prototype.encode=function(h,p){return this.tree._encode(h,p).join()},i(u,o),u.prototype._encodeComposite=function(h,p,g,y){const m=(function(x,S,_,I){let A;if(x==="seqof"?x="seq":x==="setof"&&(x="set"),l.tagByName.hasOwnProperty(x))A=l.tagByName[x];else{if(typeof x!="number"||(0|x)!==x)return I.error("Unknown tag: "+x);A=x}return A>=31?I.error("Multi-octet tag encoding unsupported"):(S||(A|=32),A|=l.tagClassByName[_||"universal"]<<6,A)})(h,p,g,this.reporter);if(y.length<128){const x=s.alloc(2);return x[0]=m,x[1]=y.length,this._createEncoderBuffer([x,y])}let v=1;for(let x=y.length;x>=256;x>>=8)v++;const b=s.alloc(2+v);b[0]=m,b[1]=128|v;for(let x=1+v,S=y.length;S>0;x--,S>>=8)b[x]=255&S;return this._createEncoderBuffer([b,y])},u.prototype._encodeStr=function(h,p){if(p==="bitstr")return this._createEncoderBuffer([0|h.unused,h.data]);if(p==="bmpstr"){const g=s.alloc(2*h.length);for(let y=0;y<h.length;y++)g.writeUInt16BE(h.charCodeAt(y),2*y);return this._createEncoderBuffer(g)}return p==="numstr"?this._isNumstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: numstr supports only digits and space"):p==="printstr"?this._isPrintstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(p)||p==="objDesc"?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: "+p+" unsupported")},u.prototype._encodeObjid=function(h,p,g){if(typeof h=="string"){if(!p)return this.reporter.error("string objid given, but no values map found");if(!p.hasOwnProperty(h))return this.reporter.error("objid not found in values map");h=p[h].split(/[\s.]+/g);for(let b=0;b<h.length;b++)h[b]|=0}else if(Array.isArray(h)){h=h.slice();for(let b=0;b<h.length;b++)h[b]|=0}if(!Array.isArray(h))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!g){if(h[1]>=40)return this.reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}let y=0;for(let b=0;b<h.length;b++){let x=h[b];for(y++;x>=128;x>>=7)y++}const m=s.alloc(y);let v=m.length-1;for(let b=h.length-1;b>=0;b--){let x=h[b];for(m[v--]=127&x;(x>>=7)>0;)m[v--]=128|127&x}return this._createEncoderBuffer(m)},u.prototype._encodeTime=function(h,p){let g;const y=new Date(h);return p==="gentime"?g=[f(y.getUTCFullYear()),f(y.getUTCMonth()+1),f(y.getUTCDate()),f(y.getUTCHours()),f(y.getUTCMinutes()),f(y.getUTCSeconds()),"Z"].join(""):p==="utctime"?g=[f(y.getUTCFullYear()%100),f(y.getUTCMonth()+1),f(y.getUTCDate()),f(y.getUTCHours()),f(y.getUTCMinutes()),f(y.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+p+" time is not supported yet"),this._encodeStr(g,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(h,p){if(typeof h=="string"){if(!p)return this.reporter.error("String int or enum given, but no values map");if(!p.hasOwnProperty(h))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=p[h]}if(typeof h!="number"&&!s.isBuffer(h)){const m=h.toArray();!h.sign&&128&m[0]&&m.unshift(0),h=s.from(m)}if(s.isBuffer(h)){let m=h.length;h.length===0&&m++;const v=s.alloc(m);return h.copy(v),h.length===0&&(v[0]=0),this._createEncoderBuffer(v)}if(h<128)return this._createEncoderBuffer(h);if(h<256)return this._createEncoderBuffer([0,h]);let g=1;for(let m=h;m>=256;m>>=8)g++;const y=new Array(g);for(let m=y.length-1;m>=0;m--)y[m]=255&h,h>>=8;return 128&y[0]&&y.unshift(0),this._createEncoderBuffer(s.from(y))},u.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},u.prototype._use=function(h,p){return typeof h=="function"&&(h=h(p)),h._getEncoder("der").tree},u.prototype._skipDefault=function(h,p,g){const y=this._baseState;let m;if(y.default===null)return!1;const v=h.join();if(y.defaultBuffer===void 0&&(y.defaultBuffer=this._encodeValue(y.default,p,g).join()),v.length!==y.defaultBuffer.length)return!1;for(m=0;m<v.length;m++)if(v[m]!==y.defaultBuffer[m])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(e,n,a){const i=a;i.der=e("./der"),i.pem=e("./pem")},{"./der":181,"./pem":183}],183:[function(e,n,a){const i=e("inherits"),s=e("./der");function o(l){s.call(this,l),this.enc="pem"}i(o,s),n.exports=o,o.prototype.encode=function(l,c){const u=s.prototype.encode.call(this,l).toString("base64"),f=["-----BEGIN "+c.label+"-----"];for(let h=0;h<u.length;h+=64)f.push(u.slice(h,h+64));return f.push("-----END "+c.label+"-----"),f.join(`
`)}},{"./der":181,inherits:440}],184:[function(e,n,a){(function(i,s){function o(T,R){if(!T)throw new Error(R||"Assertion failed")}function l(T,R){T.super_=R;var C=function(){};C.prototype=R.prototype,T.prototype=new C,T.prototype.constructor=T}function c(T,R,C){if(c.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&(R!=="le"&&R!=="be"||(C=R,R=10),this._init(T||0,R||10,C||"be"))}var u;typeof i=="object"?i.exports=c:(void 0).BN=c,c.BN=c,c.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function f(T,R){var C=T.charCodeAt(R);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function h(T,R,C){var N=f(T,C);return C-1>=R&&(N|=f(T,C-1)<<4),N}function p(T,R,C,N){for(var E=0,k=Math.min(T.length,C),P=R;P<k;P++){var q=T.charCodeAt(P)-48;E*=N,E+=q>=49?q-49+10:q>=17?q-17+10:q}return E}c.isBN=function(T){return T instanceof c||T!==null&&typeof T=="object"&&T.constructor.wordSize===c.wordSize&&Array.isArray(T.words)},c.max=function(T,R){return T.cmp(R)>0?T:R},c.min=function(T,R){return T.cmp(R)<0?T:R},c.prototype._init=function(T,R,C){if(typeof T=="number")return this._initNumber(T,R,C);if(typeof T=="object")return this._initArray(T,R,C);R==="hex"&&(R=16),o(R===(0|R)&&R>=2&&R<=36);var N=0;(T=T.toString().replace(/\s+/g,""))[0]==="-"&&(N++,this.negative=1),N<T.length&&(R===16?this._parseHex(T,N,C):(this._parseBase(T,R,N),C==="le"&&this._initArray(this.toArray(),R,C)))},c.prototype._initNumber=function(T,R,C){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[67108863&T],this.length=1):T<4503599627370496?(this.words=[67108863&T,T/67108864&67108863],this.length=2):(o(T<9007199254740992),this.words=[67108863&T,T/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),R,C)},c.prototype._initArray=function(T,R,C){if(o(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var E,k,P=0;if(C==="be")for(N=T.length-1,E=0;N>=0;N-=3)k=T[N]|T[N-1]<<8|T[N-2]<<16,this.words[E]|=k<<P&67108863,this.words[E+1]=k>>>26-P&67108863,(P+=24)>=26&&(P-=26,E++);else if(C==="le")for(N=0,E=0;N<T.length;N+=3)k=T[N]|T[N+1]<<8|T[N+2]<<16,this.words[E]|=k<<P&67108863,this.words[E+1]=k>>>26-P&67108863,(P+=24)>=26&&(P-=26,E++);return this.strip()},c.prototype._parseHex=function(T,R,C){this.length=Math.ceil((T.length-R)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var E,k=0,P=0;if(C==="be")for(N=T.length-1;N>=R;N-=2)E=h(T,R,N)<<k,this.words[P]|=67108863&E,k>=18?(k-=18,P+=1,this.words[P]|=E>>>26):k+=8;else for(N=(T.length-R)%2==0?R+1:R;N<T.length;N+=2)E=h(T,R,N)<<k,this.words[P]|=67108863&E,k>=18?(k-=18,P+=1,this.words[P]|=E>>>26):k+=8;this.strip()},c.prototype._parseBase=function(T,R,C){this.words=[0],this.length=1;for(var N=0,E=1;E<=67108863;E*=R)N++;N--,E=E/R|0;for(var k=T.length-C,P=k%N,q=Math.min(k,k-P)+C,H=0,L=C;L<q;L+=N)H=p(T,L,L+N,R),this.imuln(E),this.words[0]+H<67108864?this.words[0]+=H:this._iaddn(H);if(P!==0){var K=1;for(H=p(T,L,T.length,R),L=0;L<P;L++)K*=R;this.imuln(K),this.words[0]+H<67108864?this.words[0]+=H:this._iaddn(H)}this.strip()},c.prototype.copy=function(T){T.words=new Array(this.length);for(var R=0;R<this.length;R++)T.words[R]=this.words[R];T.length=this.length,T.negative=this.negative,T.red=this.red},c.prototype.clone=function(){var T=new c(null);return this.copy(T),T},c.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(T,R,C){C.negative=R.negative^T.negative;var N=T.length+R.length|0;C.length=N,N=N-1|0;var E=0|T.words[0],k=0|R.words[0],P=E*k,q=67108863&P,H=P/67108864|0;C.words[0]=q;for(var L=1;L<N;L++){for(var K=H>>>26,Y=67108863&H,Z=Math.min(L,R.length-1),V=Math.max(0,L-T.length+1);V<=Z;V++){var ee=L-V|0;K+=(P=(E=0|T.words[ee])*(k=0|R.words[V])+Y)/67108864|0,Y=67108863&P}C.words[L]=0|Y,H=0|K}return H!==0?C.words[L]=0|H:C.length--,C.strip()}c.prototype.toString=function(T,R){var C;if(R=0|R||1,(T=T||10)===16||T==="hex"){C="";for(var N=0,E=0,k=0;k<this.length;k++){var P=this.words[k],q=(16777215&(P<<N|E)).toString(16);C=(E=P>>>24-N&16777215)!==0||k!==this.length-1?g[6-q.length]+q+C:q+C,(N+=2)>=26&&(N-=26,k--)}for(E!==0&&(C=E.toString(16)+C);C.length%R!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(T===(0|T)&&T>=2&&T<=36){var H=y[T],L=m[T];C="";var K=this.clone();for(K.negative=0;!K.isZero();){var Y=K.modn(L).toString(T);C=(K=K.idivn(L)).isZero()?Y+C:g[H-Y.length]+Y+C}for(this.isZero()&&(C="0"+C);C.length%R!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}o(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=67108864*this.words[1]:this.length===3&&this.words[2]===1?T+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(T,R){return o(u!==void 0),this.toArrayLike(u,T,R)},c.prototype.toArray=function(T,R){return this.toArrayLike(Array,T,R)},c.prototype.toArrayLike=function(T,R,C){var N=this.byteLength(),E=C||Math.max(1,N);o(N<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var k,P,q=R==="le",H=new T(E),L=this.clone();if(q){for(P=0;!L.isZero();P++)k=L.andln(255),L.iushrn(8),H[P]=k;for(;P<E;P++)H[P]=0}else{for(P=0;P<E-N;P++)H[P]=0;for(P=0;!L.isZero();P++)k=L.andln(255),L.iushrn(8),H[E-P-1]=k}return H},Math.clz32?c.prototype._countBits=function(T){return 32-Math.clz32(T)}:c.prototype._countBits=function(T){var R=T,C=0;return R>=4096&&(C+=13,R>>>=13),R>=64&&(C+=7,R>>>=7),R>=8&&(C+=4,R>>>=4),R>=2&&(C+=2,R>>>=2),C+R},c.prototype._zeroBits=function(T){if(T===0)return 26;var R=T,C=0;return(8191&R)==0&&(C+=13,R>>>=13),(127&R)==0&&(C+=7,R>>>=7),(15&R)==0&&(C+=4,R>>>=4),(3&R)==0&&(C+=2,R>>>=2),(1&R)==0&&C++,C},c.prototype.bitLength=function(){var T=this.words[this.length-1],R=this._countBits(T);return 26*(this.length-1)+R},c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,R=0;R<this.length;R++){var C=this._zeroBits(this.words[R]);if(T+=C,C!==26)break}return T},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},c.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var R=0;R<T.length;R++)this.words[R]=this.words[R]|T.words[R];return this.strip()},c.prototype.ior=function(T){return o((this.negative|T.negative)==0),this.iuor(T)},c.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},c.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},c.prototype.iuand=function(T){var R;R=this.length>T.length?T:this;for(var C=0;C<R.length;C++)this.words[C]=this.words[C]&T.words[C];return this.length=R.length,this.strip()},c.prototype.iand=function(T){return o((this.negative|T.negative)==0),this.iuand(T)},c.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},c.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},c.prototype.iuxor=function(T){var R,C;this.length>T.length?(R=this,C=T):(R=T,C=this);for(var N=0;N<C.length;N++)this.words[N]=R.words[N]^C.words[N];if(this!==R)for(;N<R.length;N++)this.words[N]=R.words[N];return this.length=R.length,this.strip()},c.prototype.ixor=function(T){return o((this.negative|T.negative)==0),this.iuxor(T)},c.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},c.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},c.prototype.inotn=function(T){o(typeof T=="number"&&T>=0);var R=0|Math.ceil(T/26),C=T%26;this._expand(R),C>0&&R--;for(var N=0;N<R;N++)this.words[N]=67108863&~this.words[N];return C>0&&(this.words[N]=~this.words[N]&67108863>>26-C),this.strip()},c.prototype.notn=function(T){return this.clone().inotn(T)},c.prototype.setn=function(T,R){o(typeof T=="number"&&T>=0);var C=T/26|0,N=T%26;return this._expand(C+1),this.words[C]=R?this.words[C]|1<<N:this.words[C]&~(1<<N),this.strip()},c.prototype.iadd=function(T){var R,C,N;if(this.negative!==0&&T.negative===0)return this.negative=0,R=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,R=this.isub(T),T.negative=1,R._normSign();this.length>T.length?(C=this,N=T):(C=T,N=this);for(var E=0,k=0;k<N.length;k++)R=(0|C.words[k])+(0|N.words[k])+E,this.words[k]=67108863&R,E=R>>>26;for(;E!==0&&k<C.length;k++)R=(0|C.words[k])+E,this.words[k]=67108863&R,E=R>>>26;if(this.length=C.length,E!==0)this.words[this.length]=E,this.length++;else if(C!==this)for(;k<C.length;k++)this.words[k]=C.words[k];return this},c.prototype.add=function(T){var R;return T.negative!==0&&this.negative===0?(T.negative=0,R=this.sub(T),T.negative^=1,R):T.negative===0&&this.negative!==0?(this.negative=0,R=T.sub(this),this.negative=1,R):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},c.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var R=this.iadd(T);return T.negative=1,R._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var C,N,E=this.cmp(T);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;E>0?(C=this,N=T):(C=T,N=this);for(var k=0,P=0;P<N.length;P++)k=(R=(0|C.words[P])-(0|N.words[P])+k)>>26,this.words[P]=67108863&R;for(;k!==0&&P<C.length;P++)k=(R=(0|C.words[P])+k)>>26,this.words[P]=67108863&R;if(k===0&&P<C.length&&C!==this)for(;P<C.length;P++)this.words[P]=C.words[P];return this.length=Math.max(this.length,P),C!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(T){return this.clone().isub(T)};var b=function(T,R,C){var N,E,k,P=T.words,q=R.words,H=C.words,L=0,K=0|P[0],Y=8191&K,Z=K>>>13,V=0|P[1],ee=8191&V,B=V>>>13,F=0|P[2],X=8191&F,te=F>>>13,se=0|P[3],ce=8191&se,ue=se>>>13,oe=0|P[4],le=8191&oe,pe=oe>>>13,ye=0|P[5],be=8191&ye,Ie=ye>>>13,Oe=0|P[6],Me=8191&Oe,Re=Oe>>>13,He=0|P[7],qe=8191&He,ct=He>>>13,ft=0|P[8],St=8191&ft,Rt=ft>>>13,Ft=0|P[9],ot=8191&Ft,Kt=Ft>>>13,Pt=0|q[0],Ee=8191&Pt,We=Pt>>>13,ut=0|q[1],wt=8191&ut,Bt=ut>>>13,dr=0|q[2],Xt=8191&dr,pr=dr>>>13,vr=0|q[3],rr=8191&vr,Zt=vr>>>13,lr=0|q[4],fr=8191&lr,xr=lr>>>13,Ue=0|q[5],et=8191&Ue,ht=Ue>>>13,kt=0|q[6],Wt=8191&kt,Be=kt>>>13,Ve=0|q[7],pt=8191&Ve,he=Ve>>>13,xe=0|q[8],me=8191&xe,Se=xe>>>13,ke=0|q[9],Te=8191&ke,Ge=ke>>>13;C.negative=T.negative^R.negative,C.length=19;var nt=(L+(N=Math.imul(Y,Ee))|0)+((8191&(E=(E=Math.imul(Y,We))+Math.imul(Z,Ee)|0))<<13)|0;L=((k=Math.imul(Z,We))+(E>>>13)|0)+(nt>>>26)|0,nt&=67108863,N=Math.imul(ee,Ee),E=(E=Math.imul(ee,We))+Math.imul(B,Ee)|0,k=Math.imul(B,We);var Ke=(L+(N=N+Math.imul(Y,wt)|0)|0)+((8191&(E=(E=E+Math.imul(Y,Bt)|0)+Math.imul(Z,wt)|0))<<13)|0;L=((k=k+Math.imul(Z,Bt)|0)+(E>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,N=Math.imul(X,Ee),E=(E=Math.imul(X,We))+Math.imul(te,Ee)|0,k=Math.imul(te,We),N=N+Math.imul(ee,wt)|0,E=(E=E+Math.imul(ee,Bt)|0)+Math.imul(B,wt)|0,k=k+Math.imul(B,Bt)|0;var it=(L+(N=N+Math.imul(Y,Xt)|0)|0)+((8191&(E=(E=E+Math.imul(Y,pr)|0)+Math.imul(Z,Xt)|0))<<13)|0;L=((k=k+Math.imul(Z,pr)|0)+(E>>>13)|0)+(it>>>26)|0,it&=67108863,N=Math.imul(ce,Ee),E=(E=Math.imul(ce,We))+Math.imul(ue,Ee)|0,k=Math.imul(ue,We),N=N+Math.imul(X,wt)|0,E=(E=E+Math.imul(X,Bt)|0)+Math.imul(te,wt)|0,k=k+Math.imul(te,Bt)|0,N=N+Math.imul(ee,Xt)|0,E=(E=E+Math.imul(ee,pr)|0)+Math.imul(B,Xt)|0,k=k+Math.imul(B,pr)|0;var st=(L+(N=N+Math.imul(Y,rr)|0)|0)+((8191&(E=(E=E+Math.imul(Y,Zt)|0)+Math.imul(Z,rr)|0))<<13)|0;L=((k=k+Math.imul(Z,Zt)|0)+(E>>>13)|0)+(st>>>26)|0,st&=67108863,N=Math.imul(le,Ee),E=(E=Math.imul(le,We))+Math.imul(pe,Ee)|0,k=Math.imul(pe,We),N=N+Math.imul(ce,wt)|0,E=(E=E+Math.imul(ce,Bt)|0)+Math.imul(ue,wt)|0,k=k+Math.imul(ue,Bt)|0,N=N+Math.imul(X,Xt)|0,E=(E=E+Math.imul(X,pr)|0)+Math.imul(te,Xt)|0,k=k+Math.imul(te,pr)|0,N=N+Math.imul(ee,rr)|0,E=(E=E+Math.imul(ee,Zt)|0)+Math.imul(B,rr)|0,k=k+Math.imul(B,Zt)|0;var Mt=(L+(N=N+Math.imul(Y,fr)|0)|0)+((8191&(E=(E=E+Math.imul(Y,xr)|0)+Math.imul(Z,fr)|0))<<13)|0;L=((k=k+Math.imul(Z,xr)|0)+(E>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,N=Math.imul(be,Ee),E=(E=Math.imul(be,We))+Math.imul(Ie,Ee)|0,k=Math.imul(Ie,We),N=N+Math.imul(le,wt)|0,E=(E=E+Math.imul(le,Bt)|0)+Math.imul(pe,wt)|0,k=k+Math.imul(pe,Bt)|0,N=N+Math.imul(ce,Xt)|0,E=(E=E+Math.imul(ce,pr)|0)+Math.imul(ue,Xt)|0,k=k+Math.imul(ue,pr)|0,N=N+Math.imul(X,rr)|0,E=(E=E+Math.imul(X,Zt)|0)+Math.imul(te,rr)|0,k=k+Math.imul(te,Zt)|0,N=N+Math.imul(ee,fr)|0,E=(E=E+Math.imul(ee,xr)|0)+Math.imul(B,fr)|0,k=k+Math.imul(B,xr)|0;var $t=(L+(N=N+Math.imul(Y,et)|0)|0)+((8191&(E=(E=E+Math.imul(Y,ht)|0)+Math.imul(Z,et)|0))<<13)|0;L=((k=k+Math.imul(Z,ht)|0)+(E>>>13)|0)+($t>>>26)|0,$t&=67108863,N=Math.imul(Me,Ee),E=(E=Math.imul(Me,We))+Math.imul(Re,Ee)|0,k=Math.imul(Re,We),N=N+Math.imul(be,wt)|0,E=(E=E+Math.imul(be,Bt)|0)+Math.imul(Ie,wt)|0,k=k+Math.imul(Ie,Bt)|0,N=N+Math.imul(le,Xt)|0,E=(E=E+Math.imul(le,pr)|0)+Math.imul(pe,Xt)|0,k=k+Math.imul(pe,pr)|0,N=N+Math.imul(ce,rr)|0,E=(E=E+Math.imul(ce,Zt)|0)+Math.imul(ue,rr)|0,k=k+Math.imul(ue,Zt)|0,N=N+Math.imul(X,fr)|0,E=(E=E+Math.imul(X,xr)|0)+Math.imul(te,fr)|0,k=k+Math.imul(te,xr)|0,N=N+Math.imul(ee,et)|0,E=(E=E+Math.imul(ee,ht)|0)+Math.imul(B,et)|0,k=k+Math.imul(B,ht)|0;var er=(L+(N=N+Math.imul(Y,Wt)|0)|0)+((8191&(E=(E=E+Math.imul(Y,Be)|0)+Math.imul(Z,Wt)|0))<<13)|0;L=((k=k+Math.imul(Z,Be)|0)+(E>>>13)|0)+(er>>>26)|0,er&=67108863,N=Math.imul(qe,Ee),E=(E=Math.imul(qe,We))+Math.imul(ct,Ee)|0,k=Math.imul(ct,We),N=N+Math.imul(Me,wt)|0,E=(E=E+Math.imul(Me,Bt)|0)+Math.imul(Re,wt)|0,k=k+Math.imul(Re,Bt)|0,N=N+Math.imul(be,Xt)|0,E=(E=E+Math.imul(be,pr)|0)+Math.imul(Ie,Xt)|0,k=k+Math.imul(Ie,pr)|0,N=N+Math.imul(le,rr)|0,E=(E=E+Math.imul(le,Zt)|0)+Math.imul(pe,rr)|0,k=k+Math.imul(pe,Zt)|0,N=N+Math.imul(ce,fr)|0,E=(E=E+Math.imul(ce,xr)|0)+Math.imul(ue,fr)|0,k=k+Math.imul(ue,xr)|0,N=N+Math.imul(X,et)|0,E=(E=E+Math.imul(X,ht)|0)+Math.imul(te,et)|0,k=k+Math.imul(te,ht)|0,N=N+Math.imul(ee,Wt)|0,E=(E=E+Math.imul(ee,Be)|0)+Math.imul(B,Wt)|0,k=k+Math.imul(B,Be)|0;var je=(L+(N=N+Math.imul(Y,pt)|0)|0)+((8191&(E=(E=E+Math.imul(Y,he)|0)+Math.imul(Z,pt)|0))<<13)|0;L=((k=k+Math.imul(Z,he)|0)+(E>>>13)|0)+(je>>>26)|0,je&=67108863,N=Math.imul(St,Ee),E=(E=Math.imul(St,We))+Math.imul(Rt,Ee)|0,k=Math.imul(Rt,We),N=N+Math.imul(qe,wt)|0,E=(E=E+Math.imul(qe,Bt)|0)+Math.imul(ct,wt)|0,k=k+Math.imul(ct,Bt)|0,N=N+Math.imul(Me,Xt)|0,E=(E=E+Math.imul(Me,pr)|0)+Math.imul(Re,Xt)|0,k=k+Math.imul(Re,pr)|0,N=N+Math.imul(be,rr)|0,E=(E=E+Math.imul(be,Zt)|0)+Math.imul(Ie,rr)|0,k=k+Math.imul(Ie,Zt)|0,N=N+Math.imul(le,fr)|0,E=(E=E+Math.imul(le,xr)|0)+Math.imul(pe,fr)|0,k=k+Math.imul(pe,xr)|0,N=N+Math.imul(ce,et)|0,E=(E=E+Math.imul(ce,ht)|0)+Math.imul(ue,et)|0,k=k+Math.imul(ue,ht)|0,N=N+Math.imul(X,Wt)|0,E=(E=E+Math.imul(X,Be)|0)+Math.imul(te,Wt)|0,k=k+Math.imul(te,Be)|0,N=N+Math.imul(ee,pt)|0,E=(E=E+Math.imul(ee,he)|0)+Math.imul(B,pt)|0,k=k+Math.imul(B,he)|0;var Le=(L+(N=N+Math.imul(Y,me)|0)|0)+((8191&(E=(E=E+Math.imul(Y,Se)|0)+Math.imul(Z,me)|0))<<13)|0;L=((k=k+Math.imul(Z,Se)|0)+(E>>>13)|0)+(Le>>>26)|0,Le&=67108863,N=Math.imul(ot,Ee),E=(E=Math.imul(ot,We))+Math.imul(Kt,Ee)|0,k=Math.imul(Kt,We),N=N+Math.imul(St,wt)|0,E=(E=E+Math.imul(St,Bt)|0)+Math.imul(Rt,wt)|0,k=k+Math.imul(Rt,Bt)|0,N=N+Math.imul(qe,Xt)|0,E=(E=E+Math.imul(qe,pr)|0)+Math.imul(ct,Xt)|0,k=k+Math.imul(ct,pr)|0,N=N+Math.imul(Me,rr)|0,E=(E=E+Math.imul(Me,Zt)|0)+Math.imul(Re,rr)|0,k=k+Math.imul(Re,Zt)|0,N=N+Math.imul(be,fr)|0,E=(E=E+Math.imul(be,xr)|0)+Math.imul(Ie,fr)|0,k=k+Math.imul(Ie,xr)|0,N=N+Math.imul(le,et)|0,E=(E=E+Math.imul(le,ht)|0)+Math.imul(pe,et)|0,k=k+Math.imul(pe,ht)|0,N=N+Math.imul(ce,Wt)|0,E=(E=E+Math.imul(ce,Be)|0)+Math.imul(ue,Wt)|0,k=k+Math.imul(ue,Be)|0,N=N+Math.imul(X,pt)|0,E=(E=E+Math.imul(X,he)|0)+Math.imul(te,pt)|0,k=k+Math.imul(te,he)|0,N=N+Math.imul(ee,me)|0,E=(E=E+Math.imul(ee,Se)|0)+Math.imul(B,me)|0,k=k+Math.imul(B,Se)|0;var vt=(L+(N=N+Math.imul(Y,Te)|0)|0)+((8191&(E=(E=E+Math.imul(Y,Ge)|0)+Math.imul(Z,Te)|0))<<13)|0;L=((k=k+Math.imul(Z,Ge)|0)+(E>>>13)|0)+(vt>>>26)|0,vt&=67108863,N=Math.imul(ot,wt),E=(E=Math.imul(ot,Bt))+Math.imul(Kt,wt)|0,k=Math.imul(Kt,Bt),N=N+Math.imul(St,Xt)|0,E=(E=E+Math.imul(St,pr)|0)+Math.imul(Rt,Xt)|0,k=k+Math.imul(Rt,pr)|0,N=N+Math.imul(qe,rr)|0,E=(E=E+Math.imul(qe,Zt)|0)+Math.imul(ct,rr)|0,k=k+Math.imul(ct,Zt)|0,N=N+Math.imul(Me,fr)|0,E=(E=E+Math.imul(Me,xr)|0)+Math.imul(Re,fr)|0,k=k+Math.imul(Re,xr)|0,N=N+Math.imul(be,et)|0,E=(E=E+Math.imul(be,ht)|0)+Math.imul(Ie,et)|0,k=k+Math.imul(Ie,ht)|0,N=N+Math.imul(le,Wt)|0,E=(E=E+Math.imul(le,Be)|0)+Math.imul(pe,Wt)|0,k=k+Math.imul(pe,Be)|0,N=N+Math.imul(ce,pt)|0,E=(E=E+Math.imul(ce,he)|0)+Math.imul(ue,pt)|0,k=k+Math.imul(ue,he)|0,N=N+Math.imul(X,me)|0,E=(E=E+Math.imul(X,Se)|0)+Math.imul(te,me)|0,k=k+Math.imul(te,Se)|0;var Et=(L+(N=N+Math.imul(ee,Te)|0)|0)+((8191&(E=(E=E+Math.imul(ee,Ge)|0)+Math.imul(B,Te)|0))<<13)|0;L=((k=k+Math.imul(B,Ge)|0)+(E>>>13)|0)+(Et>>>26)|0,Et&=67108863,N=Math.imul(ot,Xt),E=(E=Math.imul(ot,pr))+Math.imul(Kt,Xt)|0,k=Math.imul(Kt,pr),N=N+Math.imul(St,rr)|0,E=(E=E+Math.imul(St,Zt)|0)+Math.imul(Rt,rr)|0,k=k+Math.imul(Rt,Zt)|0,N=N+Math.imul(qe,fr)|0,E=(E=E+Math.imul(qe,xr)|0)+Math.imul(ct,fr)|0,k=k+Math.imul(ct,xr)|0,N=N+Math.imul(Me,et)|0,E=(E=E+Math.imul(Me,ht)|0)+Math.imul(Re,et)|0,k=k+Math.imul(Re,ht)|0,N=N+Math.imul(be,Wt)|0,E=(E=E+Math.imul(be,Be)|0)+Math.imul(Ie,Wt)|0,k=k+Math.imul(Ie,Be)|0,N=N+Math.imul(le,pt)|0,E=(E=E+Math.imul(le,he)|0)+Math.imul(pe,pt)|0,k=k+Math.imul(pe,he)|0,N=N+Math.imul(ce,me)|0,E=(E=E+Math.imul(ce,Se)|0)+Math.imul(ue,me)|0,k=k+Math.imul(ue,Se)|0;var Qt=(L+(N=N+Math.imul(X,Te)|0)|0)+((8191&(E=(E=E+Math.imul(X,Ge)|0)+Math.imul(te,Te)|0))<<13)|0;L=((k=k+Math.imul(te,Ge)|0)+(E>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,N=Math.imul(ot,rr),E=(E=Math.imul(ot,Zt))+Math.imul(Kt,rr)|0,k=Math.imul(Kt,Zt),N=N+Math.imul(St,fr)|0,E=(E=E+Math.imul(St,xr)|0)+Math.imul(Rt,fr)|0,k=k+Math.imul(Rt,xr)|0,N=N+Math.imul(qe,et)|0,E=(E=E+Math.imul(qe,ht)|0)+Math.imul(ct,et)|0,k=k+Math.imul(ct,ht)|0,N=N+Math.imul(Me,Wt)|0,E=(E=E+Math.imul(Me,Be)|0)+Math.imul(Re,Wt)|0,k=k+Math.imul(Re,Be)|0,N=N+Math.imul(be,pt)|0,E=(E=E+Math.imul(be,he)|0)+Math.imul(Ie,pt)|0,k=k+Math.imul(Ie,he)|0,N=N+Math.imul(le,me)|0,E=(E=E+Math.imul(le,Se)|0)+Math.imul(pe,me)|0,k=k+Math.imul(pe,Se)|0;var Ut=(L+(N=N+Math.imul(ce,Te)|0)|0)+((8191&(E=(E=E+Math.imul(ce,Ge)|0)+Math.imul(ue,Te)|0))<<13)|0;L=((k=k+Math.imul(ue,Ge)|0)+(E>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,N=Math.imul(ot,fr),E=(E=Math.imul(ot,xr))+Math.imul(Kt,fr)|0,k=Math.imul(Kt,xr),N=N+Math.imul(St,et)|0,E=(E=E+Math.imul(St,ht)|0)+Math.imul(Rt,et)|0,k=k+Math.imul(Rt,ht)|0,N=N+Math.imul(qe,Wt)|0,E=(E=E+Math.imul(qe,Be)|0)+Math.imul(ct,Wt)|0,k=k+Math.imul(ct,Be)|0,N=N+Math.imul(Me,pt)|0,E=(E=E+Math.imul(Me,he)|0)+Math.imul(Re,pt)|0,k=k+Math.imul(Re,he)|0,N=N+Math.imul(be,me)|0,E=(E=E+Math.imul(be,Se)|0)+Math.imul(Ie,me)|0,k=k+Math.imul(Ie,Se)|0;var Yt=(L+(N=N+Math.imul(le,Te)|0)|0)+((8191&(E=(E=E+Math.imul(le,Ge)|0)+Math.imul(pe,Te)|0))<<13)|0;L=((k=k+Math.imul(pe,Ge)|0)+(E>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,N=Math.imul(ot,et),E=(E=Math.imul(ot,ht))+Math.imul(Kt,et)|0,k=Math.imul(Kt,ht),N=N+Math.imul(St,Wt)|0,E=(E=E+Math.imul(St,Be)|0)+Math.imul(Rt,Wt)|0,k=k+Math.imul(Rt,Be)|0,N=N+Math.imul(qe,pt)|0,E=(E=E+Math.imul(qe,he)|0)+Math.imul(ct,pt)|0,k=k+Math.imul(ct,he)|0,N=N+Math.imul(Me,me)|0,E=(E=E+Math.imul(Me,Se)|0)+Math.imul(Re,me)|0,k=k+Math.imul(Re,Se)|0;var Ur=(L+(N=N+Math.imul(be,Te)|0)|0)+((8191&(E=(E=E+Math.imul(be,Ge)|0)+Math.imul(Ie,Te)|0))<<13)|0;L=((k=k+Math.imul(Ie,Ge)|0)+(E>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,N=Math.imul(ot,Wt),E=(E=Math.imul(ot,Be))+Math.imul(Kt,Wt)|0,k=Math.imul(Kt,Be),N=N+Math.imul(St,pt)|0,E=(E=E+Math.imul(St,he)|0)+Math.imul(Rt,pt)|0,k=k+Math.imul(Rt,he)|0,N=N+Math.imul(qe,me)|0,E=(E=E+Math.imul(qe,Se)|0)+Math.imul(ct,me)|0,k=k+Math.imul(ct,Se)|0;var Tr=(L+(N=N+Math.imul(Me,Te)|0)|0)+((8191&(E=(E=E+Math.imul(Me,Ge)|0)+Math.imul(Re,Te)|0))<<13)|0;L=((k=k+Math.imul(Re,Ge)|0)+(E>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,N=Math.imul(ot,pt),E=(E=Math.imul(ot,he))+Math.imul(Kt,pt)|0,k=Math.imul(Kt,he),N=N+Math.imul(St,me)|0,E=(E=E+Math.imul(St,Se)|0)+Math.imul(Rt,me)|0,k=k+Math.imul(Rt,Se)|0;var Sr=(L+(N=N+Math.imul(qe,Te)|0)|0)+((8191&(E=(E=E+Math.imul(qe,Ge)|0)+Math.imul(ct,Te)|0))<<13)|0;L=((k=k+Math.imul(ct,Ge)|0)+(E>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,N=Math.imul(ot,me),E=(E=Math.imul(ot,Se))+Math.imul(Kt,me)|0,k=Math.imul(Kt,Se);var mr=(L+(N=N+Math.imul(St,Te)|0)|0)+((8191&(E=(E=E+Math.imul(St,Ge)|0)+Math.imul(Rt,Te)|0))<<13)|0;L=((k=k+Math.imul(Rt,Ge)|0)+(E>>>13)|0)+(mr>>>26)|0,mr&=67108863;var Pr=(L+(N=Math.imul(ot,Te))|0)+((8191&(E=(E=Math.imul(ot,Ge))+Math.imul(Kt,Te)|0))<<13)|0;return L=((k=Math.imul(Kt,Ge))+(E>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,H[0]=nt,H[1]=Ke,H[2]=it,H[3]=st,H[4]=Mt,H[5]=$t,H[6]=er,H[7]=je,H[8]=Le,H[9]=vt,H[10]=Et,H[11]=Qt,H[12]=Ut,H[13]=Yt,H[14]=Ur,H[15]=Tr,H[16]=Sr,H[17]=mr,H[18]=Pr,L!==0&&(H[19]=L,C.length++),C};function x(T,R,C){return new S().mulp(T,R,C)}function S(T,R){this.x=T,this.y=R}Math.imul||(b=v),c.prototype.mulTo=function(T,R){var C=this.length+T.length;return this.length===10&&T.length===10?b(this,T,R):C<63?v(this,T,R):C<1024?(function(N,E,k){k.negative=E.negative^N.negative,k.length=N.length+E.length;for(var P=0,q=0,H=0;H<k.length-1;H++){var L=q;q=0;for(var K=67108863&P,Y=Math.min(H,E.length-1),Z=Math.max(0,H-N.length+1);Z<=Y;Z++){var V=H-Z,ee=(0|N.words[V])*(0|E.words[Z]),B=67108863&ee;K=67108863&(B=B+K|0),q+=(L=(L=L+(ee/67108864|0)|0)+(B>>>26)|0)>>>26,L&=67108863}k.words[H]=K,P=L,L=q}return P!==0?k.words[H]=P:k.length--,k.strip()})(this,T,R):x(this,T,R)},S.prototype.makeRBT=function(T){for(var R=new Array(T),C=c.prototype._countBits(T)-1,N=0;N<T;N++)R[N]=this.revBin(N,C,T);return R},S.prototype.revBin=function(T,R,C){if(T===0||T===C-1)return T;for(var N=0,E=0;E<R;E++)N|=(1&T)<<R-E-1,T>>=1;return N},S.prototype.permute=function(T,R,C,N,E,k){for(var P=0;P<k;P++)N[P]=R[T[P]],E[P]=C[T[P]]},S.prototype.transform=function(T,R,C,N,E,k){this.permute(k,T,R,C,N,E);for(var P=1;P<E;P<<=1)for(var q=P<<1,H=Math.cos(2*Math.PI/q),L=Math.sin(2*Math.PI/q),K=0;K<E;K+=q)for(var Y=H,Z=L,V=0;V<P;V++){var ee=C[K+V],B=N[K+V],F=C[K+V+P],X=N[K+V+P],te=Y*F-Z*X;X=Y*X+Z*F,F=te,C[K+V]=ee+F,N[K+V]=B+X,C[K+V+P]=ee-F,N[K+V+P]=B-X,V!==q&&(te=H*Y-L*Z,Z=H*Z+L*Y,Y=te)}},S.prototype.guessLen13b=function(T,R){var C=1|Math.max(R,T),N=1&C,E=0;for(C=C/2|0;C;C>>>=1)E++;return 1<<E+1+N},S.prototype.conjugate=function(T,R,C){if(!(C<=1))for(var N=0;N<C/2;N++){var E=T[N];T[N]=T[C-N-1],T[C-N-1]=E,E=R[N],R[N]=-R[C-N-1],R[C-N-1]=-E}},S.prototype.normalize13b=function(T,R){for(var C=0,N=0;N<R/2;N++){var E=8192*Math.round(T[2*N+1]/R)+Math.round(T[2*N]/R)+C;T[N]=67108863&E,C=E<67108864?0:E/67108864|0}return T},S.prototype.convert13b=function(T,R,C,N){for(var E=0,k=0;k<R;k++)E+=0|T[k],C[2*k]=8191&E,E>>>=13,C[2*k+1]=8191&E,E>>>=13;for(k=2*R;k<N;++k)C[k]=0;o(E===0),o((-8192&E)==0)},S.prototype.stub=function(T){for(var R=new Array(T),C=0;C<T;C++)R[C]=0;return R},S.prototype.mulp=function(T,R,C){var N=2*this.guessLen13b(T.length,R.length),E=this.makeRBT(N),k=this.stub(N),P=new Array(N),q=new Array(N),H=new Array(N),L=new Array(N),K=new Array(N),Y=new Array(N),Z=C.words;Z.length=N,this.convert13b(T.words,T.length,P,N),this.convert13b(R.words,R.length,L,N),this.transform(P,k,q,H,N,E),this.transform(L,k,K,Y,N,E);for(var V=0;V<N;V++){var ee=q[V]*K[V]-H[V]*Y[V];H[V]=q[V]*Y[V]+H[V]*K[V],q[V]=ee}return this.conjugate(q,H,N),this.transform(q,H,Z,k,N,E),this.conjugate(Z,k,N),this.normalize13b(Z,N),C.negative=T.negative^R.negative,C.length=T.length+R.length,C.strip()},c.prototype.mul=function(T){var R=new c(null);return R.words=new Array(this.length+T.length),this.mulTo(T,R)},c.prototype.mulf=function(T){var R=new c(null);return R.words=new Array(this.length+T.length),x(this,T,R)},c.prototype.imul=function(T){return this.clone().mulTo(T,this)},c.prototype.imuln=function(T){o(typeof T=="number"),o(T<67108864);for(var R=0,C=0;C<this.length;C++){var N=(0|this.words[C])*T,E=(67108863&N)+(67108863&R);R>>=26,R+=N/67108864|0,R+=E>>>26,this.words[C]=67108863&E}return R!==0&&(this.words[C]=R,this.length++),this},c.prototype.muln=function(T){return this.clone().imuln(T)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(T){var R=(function(k){for(var P=new Array(k.bitLength()),q=0;q<P.length;q++){var H=q/26|0,L=q%26;P[q]=(k.words[H]&1<<L)>>>L}return P})(T);if(R.length===0)return new c(1);for(var C=this,N=0;N<R.length&&R[N]===0;N++,C=C.sqr());if(++N<R.length)for(var E=C.sqr();N<R.length;N++,E=E.sqr())R[N]!==0&&(C=C.mul(E));return C},c.prototype.iushln=function(T){o(typeof T=="number"&&T>=0);var R,C=T%26,N=(T-C)/26,E=67108863>>>26-C<<26-C;if(C!==0){var k=0;for(R=0;R<this.length;R++){var P=this.words[R]&E,q=(0|this.words[R])-P<<C;this.words[R]=q|k,k=P>>>26-C}k&&(this.words[R]=k,this.length++)}if(N!==0){for(R=this.length-1;R>=0;R--)this.words[R+N]=this.words[R];for(R=0;R<N;R++)this.words[R]=0;this.length+=N}return this.strip()},c.prototype.ishln=function(T){return o(this.negative===0),this.iushln(T)},c.prototype.iushrn=function(T,R,C){var N;o(typeof T=="number"&&T>=0),N=R?(R-R%26)/26:0;var E=T%26,k=Math.min((T-E)/26,this.length),P=67108863^67108863>>>E<<E,q=C;if(N-=k,N=Math.max(0,N),q){for(var H=0;H<k;H++)q.words[H]=this.words[H];q.length=k}if(k!==0)if(this.length>k)for(this.length-=k,H=0;H<this.length;H++)this.words[H]=this.words[H+k];else this.words[0]=0,this.length=1;var L=0;for(H=this.length-1;H>=0&&(L!==0||H>=N);H--){var K=0|this.words[H];this.words[H]=L<<26-E|K>>>E,L=K&P}return q&&L!==0&&(q.words[q.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(T,R,C){return o(this.negative===0),this.iushrn(T,R,C)},c.prototype.shln=function(T){return this.clone().ishln(T)},c.prototype.ushln=function(T){return this.clone().iushln(T)},c.prototype.shrn=function(T){return this.clone().ishrn(T)},c.prototype.ushrn=function(T){return this.clone().iushrn(T)},c.prototype.testn=function(T){o(typeof T=="number"&&T>=0);var R=T%26,C=(T-R)/26,N=1<<R;return!(this.length<=C)&&!!(this.words[C]&N)},c.prototype.imaskn=function(T){o(typeof T=="number"&&T>=0);var R=T%26,C=(T-R)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(R!==0&&C++,this.length=Math.min(C,this.length),R!==0){var N=67108863^67108863>>>R<<R;this.words[this.length-1]&=N}return this.strip()},c.prototype.maskn=function(T){return this.clone().imaskn(T)},c.prototype.iaddn=function(T){return o(typeof T=="number"),o(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(0|this.words[0])<T?(this.words[0]=T-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},c.prototype._iaddn=function(T){this.words[0]+=T;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},c.prototype.isubn=function(T){if(o(typeof T=="number"),o(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},c.prototype.addn=function(T){return this.clone().iaddn(T)},c.prototype.subn=function(T){return this.clone().isubn(T)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(T,R,C){var N,E,k=T.length+C;this._expand(k);var P=0;for(N=0;N<T.length;N++){E=(0|this.words[N+C])+P;var q=(0|T.words[N])*R;P=((E-=67108863&q)>>26)-(q/67108864|0),this.words[N+C]=67108863&E}for(;N<this.length-C;N++)P=(E=(0|this.words[N+C])+P)>>26,this.words[N+C]=67108863&E;if(P===0)return this.strip();for(o(P===-1),P=0,N=0;N<this.length;N++)P=(E=-(0|this.words[N])+P)>>26,this.words[N]=67108863&E;return this.negative=1,this.strip()},c.prototype._wordDiv=function(T,R){var C=(this.length,T.length),N=this.clone(),E=T,k=0|E.words[E.length-1];(C=26-this._countBits(k))!==0&&(E=E.ushln(C),N.iushln(C),k=0|E.words[E.length-1]);var P,q=N.length-E.length;if(R!=="mod"){(P=new c(null)).length=q+1,P.words=new Array(P.length);for(var H=0;H<P.length;H++)P.words[H]=0}var L=N.clone()._ishlnsubmul(E,1,q);L.negative===0&&(N=L,P&&(P.words[q]=1));for(var K=q-1;K>=0;K--){var Y=67108864*(0|N.words[E.length+K])+(0|N.words[E.length+K-1]);for(Y=Math.min(Y/k|0,67108863),N._ishlnsubmul(E,Y,K);N.negative!==0;)Y--,N.negative=0,N._ishlnsubmul(E,1,K),N.isZero()||(N.negative^=1);P&&(P.words[K]=Y)}return P&&P.strip(),N.strip(),R!=="div"&&C!==0&&N.iushrn(C),{div:P||null,mod:N}},c.prototype.divmod=function(T,R,C){return o(!T.isZero()),this.isZero()?{div:new c(0),mod:new c(0)}:this.negative!==0&&T.negative===0?(k=this.neg().divmod(T,R),R!=="mod"&&(N=k.div.neg()),R!=="div"&&(E=k.mod.neg(),C&&E.negative!==0&&E.iadd(T)),{div:N,mod:E}):this.negative===0&&T.negative!==0?(k=this.divmod(T.neg(),R),R!=="mod"&&(N=k.div.neg()),{div:N,mod:k.mod}):(this.negative&T.negative)!=0?(k=this.neg().divmod(T.neg(),R),R!=="div"&&(E=k.mod.neg(),C&&E.negative!==0&&E.isub(T)),{div:k.div,mod:E}):T.length>this.length||this.cmp(T)<0?{div:new c(0),mod:this}:T.length===1?R==="div"?{div:this.divn(T.words[0]),mod:null}:R==="mod"?{div:null,mod:new c(this.modn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new c(this.modn(T.words[0]))}:this._wordDiv(T,R);var N,E,k},c.prototype.div=function(T){return this.divmod(T,"div",!1).div},c.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},c.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},c.prototype.divRound=function(T){var R=this.divmod(T);if(R.mod.isZero())return R.div;var C=R.div.negative!==0?R.mod.isub(T):R.mod,N=T.ushrn(1),E=T.andln(1),k=C.cmp(N);return k<0||E===1&&k===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},c.prototype.modn=function(T){o(T<=67108863);for(var R=(1<<26)%T,C=0,N=this.length-1;N>=0;N--)C=(R*C+(0|this.words[N]))%T;return C},c.prototype.idivn=function(T){o(T<=67108863);for(var R=0,C=this.length-1;C>=0;C--){var N=(0|this.words[C])+67108864*R;this.words[C]=N/T|0,R=N%T}return this.strip()},c.prototype.divn=function(T){return this.clone().idivn(T)},c.prototype.egcd=function(T){o(T.negative===0),o(!T.isZero());var R=this,C=T.clone();R=R.negative!==0?R.umod(T):R.clone();for(var N=new c(1),E=new c(0),k=new c(0),P=new c(1),q=0;R.isEven()&&C.isEven();)R.iushrn(1),C.iushrn(1),++q;for(var H=C.clone(),L=R.clone();!R.isZero();){for(var K=0,Y=1;(R.words[0]&Y)==0&&K<26;++K,Y<<=1);if(K>0)for(R.iushrn(K);K-- >0;)(N.isOdd()||E.isOdd())&&(N.iadd(H),E.isub(L)),N.iushrn(1),E.iushrn(1);for(var Z=0,V=1;(C.words[0]&V)==0&&Z<26;++Z,V<<=1);if(Z>0)for(C.iushrn(Z);Z-- >0;)(k.isOdd()||P.isOdd())&&(k.iadd(H),P.isub(L)),k.iushrn(1),P.iushrn(1);R.cmp(C)>=0?(R.isub(C),N.isub(k),E.isub(P)):(C.isub(R),k.isub(N),P.isub(E))}return{a:k,b:P,gcd:C.iushln(q)}},c.prototype._invmp=function(T){o(T.negative===0),o(!T.isZero());var R=this,C=T.clone();R=R.negative!==0?R.umod(T):R.clone();for(var N,E=new c(1),k=new c(0),P=C.clone();R.cmpn(1)>0&&C.cmpn(1)>0;){for(var q=0,H=1;(R.words[0]&H)==0&&q<26;++q,H<<=1);if(q>0)for(R.iushrn(q);q-- >0;)E.isOdd()&&E.iadd(P),E.iushrn(1);for(var L=0,K=1;(C.words[0]&K)==0&&L<26;++L,K<<=1);if(L>0)for(C.iushrn(L);L-- >0;)k.isOdd()&&k.iadd(P),k.iushrn(1);R.cmp(C)>=0?(R.isub(C),E.isub(k)):(C.isub(R),k.isub(E))}return(N=R.cmpn(1)===0?E:k).cmpn(0)<0&&N.iadd(T),N},c.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var R=this.clone(),C=T.clone();R.negative=0,C.negative=0;for(var N=0;R.isEven()&&C.isEven();N++)R.iushrn(1),C.iushrn(1);for(;;){for(;R.isEven();)R.iushrn(1);for(;C.isEven();)C.iushrn(1);var E=R.cmp(C);if(E<0){var k=R;R=C,C=k}else if(E===0||C.cmpn(1)===0)break;R.isub(C)}return C.iushln(N)},c.prototype.invm=function(T){return this.egcd(T).a.umod(T)},c.prototype.isEven=function(){return(1&this.words[0])==0},c.prototype.isOdd=function(){return(1&this.words[0])==1},c.prototype.andln=function(T){return this.words[0]&T},c.prototype.bincn=function(T){o(typeof T=="number");var R=T%26,C=(T-R)/26,N=1<<R;if(this.length<=C)return this._expand(C+1),this.words[C]|=N,this;for(var E=N,k=C;E!==0&&k<this.length;k++){var P=0|this.words[k];E=(P+=E)>>>26,P&=67108863,this.words[k]=P}return E!==0&&(this.words[k]=E,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(T){var R,C=T<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;if(this.strip(),this.length>1)R=1;else{C&&(T=-T),o(T<=67108863,"Number is too big");var N=0|this.words[0];R=N===T?0:N<T?-1:1}return this.negative!==0?0|-R:R},c.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var R=this.ucmp(T);return this.negative!==0?0|-R:R},c.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var R=0,C=this.length-1;C>=0;C--){var N=0|this.words[C],E=0|T.words[C];if(N!==E){N<E?R=-1:N>E&&(R=1);break}}return R},c.prototype.gtn=function(T){return this.cmpn(T)===1},c.prototype.gt=function(T){return this.cmp(T)===1},c.prototype.gten=function(T){return this.cmpn(T)>=0},c.prototype.gte=function(T){return this.cmp(T)>=0},c.prototype.ltn=function(T){return this.cmpn(T)===-1},c.prototype.lt=function(T){return this.cmp(T)===-1},c.prototype.lten=function(T){return this.cmpn(T)<=0},c.prototype.lte=function(T){return this.cmp(T)<=0},c.prototype.eqn=function(T){return this.cmpn(T)===0},c.prototype.eq=function(T){return this.cmp(T)===0},c.red=function(T){return new U(T)},c.prototype.toRed=function(T){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},c.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(T){return this.red=T,this},c.prototype.forceRed=function(T){return o(!this.red,"Already a number in reduction context"),this._forceRed(T)},c.prototype.redAdd=function(T){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},c.prototype.redIAdd=function(T){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},c.prototype.redSub=function(T){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},c.prototype.redISub=function(T){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},c.prototype.redShl=function(T){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},c.prototype.redMul=function(T){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},c.prototype.redIMul=function(T){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},c.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(T){return o(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var _={k256:null,p224:null,p192:null,p25519:null};function I(T,R){this.name=T,this.p=new c(R,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function M(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function z(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function U(T){if(typeof T=="string"){var R=c._prime(T);this.m=R.p,this.prime=R}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}function D(T){U.call(this,T),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var T=new c(null);return T.words=new Array(Math.ceil(this.n/13)),T},I.prototype.ireduce=function(T){var R,C=T;do this.split(C,this.tmp),R=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength();while(R>this.n);var N=R<this.n?-1:C.ucmp(this.p);return N===0?(C.words[0]=0,C.length=1):N>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},I.prototype.split=function(T,R){T.iushrn(this.n,0,R)},I.prototype.imulK=function(T){return T.imul(this.k)},l(A,I),A.prototype.split=function(T,R){for(var C=Math.min(T.length,9),N=0;N<C;N++)R.words[N]=T.words[N];if(R.length=C,T.length<=9)return T.words[0]=0,void(T.length=1);var E=T.words[9];for(R.words[R.length++]=4194303&E,N=10;N<T.length;N++){var k=0|T.words[N];T.words[N-10]=(4194303&k)<<4|E>>>22,E=k}E>>>=22,T.words[N-10]=E,E===0&&T.length>10?T.length-=10:T.length-=9},A.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var R=0,C=0;C<T.length;C++){var N=0|T.words[C];R+=977*N,T.words[C]=67108863&R,R=64*N+(R/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T},l(O,I),l(M,I),l(z,I),z.prototype.imulK=function(T){for(var R=0,C=0;C<T.length;C++){var N=19*(0|T.words[C])+R,E=67108863&N;N>>>=26,T.words[C]=E,R=N}return R!==0&&(T.words[T.length++]=R),T},c._prime=function(T){if(_[T])return _[T];var R;if(T==="k256")R=new A;else if(T==="p224")R=new O;else if(T==="p192")R=new M;else{if(T!=="p25519")throw new Error("Unknown prime "+T);R=new z}return _[T]=R,R},U.prototype._verify1=function(T){o(T.negative===0,"red works only with positives"),o(T.red,"red works only with red numbers")},U.prototype._verify2=function(T,R){o((T.negative|R.negative)==0,"red works only with positives"),o(T.red&&T.red===R.red,"red works only with red numbers")},U.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):T.umod(this.m)._forceRed(this)},U.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},U.prototype.add=function(T,R){this._verify2(T,R);var C=T.add(R);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},U.prototype.iadd=function(T,R){this._verify2(T,R);var C=T.iadd(R);return C.cmp(this.m)>=0&&C.isub(this.m),C},U.prototype.sub=function(T,R){this._verify2(T,R);var C=T.sub(R);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},U.prototype.isub=function(T,R){this._verify2(T,R);var C=T.isub(R);return C.cmpn(0)<0&&C.iadd(this.m),C},U.prototype.shl=function(T,R){return this._verify1(T),this.imod(T.ushln(R))},U.prototype.imul=function(T,R){return this._verify2(T,R),this.imod(T.imul(R))},U.prototype.mul=function(T,R){return this._verify2(T,R),this.imod(T.mul(R))},U.prototype.isqr=function(T){return this.imul(T,T.clone())},U.prototype.sqr=function(T){return this.mul(T,T)},U.prototype.sqrt=function(T){if(T.isZero())return T.clone();var R=this.m.andln(3);if(o(R%2==1),R===3){var C=this.m.add(new c(1)).iushrn(2);return this.pow(T,C)}for(var N=this.m.subn(1),E=0;!N.isZero()&&N.andln(1)===0;)E++,N.iushrn(1);o(!N.isZero());var k=new c(1).toRed(this),P=k.redNeg(),q=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=new c(2*H*H).toRed(this);this.pow(H,q).cmp(P)!==0;)H.redIAdd(P);for(var L=this.pow(H,N),K=this.pow(T,N.addn(1).iushrn(1)),Y=this.pow(T,N),Z=E;Y.cmp(k)!==0;){for(var V=Y,ee=0;V.cmp(k)!==0;ee++)V=V.redSqr();o(ee<Z);var B=this.pow(L,new c(1).iushln(Z-ee-1));K=K.redMul(B),L=B.redSqr(),Y=Y.redMul(L),Z=ee}return K},U.prototype.invm=function(T){var R=T._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},U.prototype.pow=function(T,R){if(R.isZero())return new c(1).toRed(this);if(R.cmpn(1)===0)return T.clone();var C=new Array(16);C[0]=new c(1).toRed(this),C[1]=T;for(var N=2;N<C.length;N++)C[N]=this.mul(C[N-1],T);var E=C[0],k=0,P=0,q=R.bitLength()%26;for(q===0&&(q=26),N=R.length-1;N>=0;N--){for(var H=R.words[N],L=q-1;L>=0;L--){var K=H>>L&1;E!==C[0]&&(E=this.sqr(E)),K!==0||k!==0?(k<<=1,k|=K,(++P===4||N===0&&L===0)&&(E=this.mul(E,C[k]),P=0,k=0)):P=0}q=26}return E},U.prototype.convertTo=function(T){var R=T.umod(this.m);return R===T?R.clone():R},U.prototype.convertFrom=function(T){var R=T.clone();return R.red=null,R},c.mont=function(T){return new D(T)},l(D,U),D.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},D.prototype.convertFrom=function(T){var R=this.imod(T.mul(this.rinv));return R.red=null,R},D.prototype.imul=function(T,R){if(T.isZero()||R.isZero())return T.words[0]=0,T.length=1,T;var C=T.imul(R),N=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=C.isub(N).iushrn(this.shift),k=E;return E.cmp(this.m)>=0?k=E.isub(this.m):E.cmpn(0)<0&&(k=E.iadd(this.m)),k._forceRed(this)},D.prototype.mul=function(T,R){if(T.isZero()||R.isZero())return new c(0)._forceRed(this);var C=T.mul(R),N=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=C.isub(N).iushrn(this.shift),k=E;return E.cmp(this.m)>=0?k=E.isub(this.m):E.cmpn(0)<0&&(k=E.iadd(this.m)),k._forceRed(this)},D.prototype.invm=function(T){return this.imod(T._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],185:[function(e,n,a){a.byteLength=function(p){var g=f(p),y=g[0],m=g[1];return 3*(y+m)/4-m},a.toByteArray=function(p){var g,y,m=f(p),v=m[0],b=m[1],x=new o((function(I,A,O){return 3*(A+O)/4-O})(0,v,b)),S=0,_=b>0?v-4:v;for(y=0;y<_;y+=4)g=s[p.charCodeAt(y)]<<18|s[p.charCodeAt(y+1)]<<12|s[p.charCodeAt(y+2)]<<6|s[p.charCodeAt(y+3)],x[S++]=g>>16&255,x[S++]=g>>8&255,x[S++]=255&g;return b===2&&(g=s[p.charCodeAt(y)]<<2|s[p.charCodeAt(y+1)]>>4,x[S++]=255&g),b===1&&(g=s[p.charCodeAt(y)]<<10|s[p.charCodeAt(y+1)]<<4|s[p.charCodeAt(y+2)]>>2,x[S++]=g>>8&255,x[S++]=255&g),x},a.fromByteArray=function(p){for(var g,y=p.length,m=y%3,v=[],b=0,x=y-m;b<x;b+=16383)v.push(h(p,b,b+16383>x?x:b+16383));return m===1?(g=p[y-1],v.push(i[g>>2]+i[g<<4&63]+"==")):m===2&&(g=(p[y-2]<<8)+p[y-1],v.push(i[g>>10]+i[g>>4&63]+i[g<<2&63]+"=")),v.join("")};for(var i=[],s=[],o=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=l.length;c<u;++c)i[c]=l[c],s[l.charCodeAt(c)]=c;function f(p){var g=p.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");return y===-1&&(y=g),[y,y===g?0:4-y%4]}function h(p,g,y){for(var m,v,b=[],x=g;x<y;x+=3)m=(p[x]<<16&16711680)+(p[x+1]<<8&65280)+(255&p[x+2]),b.push(i[(v=m)>>18&63]+i[v>>12&63]+i[v>>6&63]+i[63&v]);return b.join("")}s[45]=62,s[95]=63},{}],186:[function(e,n,a){(function(i,s){function o(C,N){if(!C)throw new Error(N||"Assertion failed")}function l(C,N){C.super_=N;var E=function(){};E.prototype=N.prototype,C.prototype=new E,C.prototype.constructor=C}function c(C,N,E){if(c.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&(N!=="le"&&N!=="be"||(E=N,N=10),this._init(C||0,N||10,E||"be"))}var u;typeof i=="object"?i.exports=c:(void 0).BN=c,c.BN=c,c.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function f(C,N){var E=C.charCodeAt(N);return E>=48&&E<=57?E-48:E>=65&&E<=70?E-55:E>=97&&E<=102?E-87:void o(!1,"Invalid character in "+C)}function h(C,N,E){var k=f(C,E);return E-1>=N&&(k|=f(C,E-1)<<4),k}function p(C,N,E,k){for(var P=0,q=0,H=Math.min(C.length,E),L=N;L<H;L++){var K=C.charCodeAt(L)-48;P*=k,q=K>=49?K-49+10:K>=17?K-17+10:K,o(K>=0&&q<k,"Invalid character"),P+=q}return P}function g(C,N){C.words=N.words,C.length=N.length,C.negative=N.negative,C.red=N.red}if(c.isBN=function(C){return C instanceof c||C!==null&&typeof C=="object"&&C.constructor.wordSize===c.wordSize&&Array.isArray(C.words)},c.max=function(C,N){return C.cmp(N)>0?C:N},c.min=function(C,N){return C.cmp(N)<0?C:N},c.prototype._init=function(C,N,E){if(typeof C=="number")return this._initNumber(C,N,E);if(typeof C=="object")return this._initArray(C,N,E);N==="hex"&&(N=16),o(N===(0|N)&&N>=2&&N<=36);var k=0;(C=C.toString().replace(/\s+/g,""))[0]==="-"&&(k++,this.negative=1),k<C.length&&(N===16?this._parseHex(C,k,E):(this._parseBase(C,N,k),E==="le"&&this._initArray(this.toArray(),N,E)))},c.prototype._initNumber=function(C,N,E){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(o(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),N,E)},c.prototype._initArray=function(C,N,E){if(o(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var P,q,H=0;if(E==="be")for(k=C.length-1,P=0;k>=0;k-=3)q=C[k]|C[k-1]<<8|C[k-2]<<16,this.words[P]|=q<<H&67108863,this.words[P+1]=q>>>26-H&67108863,(H+=24)>=26&&(H-=26,P++);else if(E==="le")for(k=0,P=0;k<C.length;k+=3)q=C[k]|C[k+1]<<8|C[k+2]<<16,this.words[P]|=q<<H&67108863,this.words[P+1]=q>>>26-H&67108863,(H+=24)>=26&&(H-=26,P++);return this._strip()},c.prototype._parseHex=function(C,N,E){this.length=Math.ceil((C.length-N)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var P,q=0,H=0;if(E==="be")for(k=C.length-1;k>=N;k-=2)P=h(C,N,k)<<q,this.words[H]|=67108863&P,q>=18?(q-=18,H+=1,this.words[H]|=P>>>26):q+=8;else for(k=(C.length-N)%2==0?N+1:N;k<C.length;k+=2)P=h(C,N,k)<<q,this.words[H]|=67108863&P,q>=18?(q-=18,H+=1,this.words[H]|=P>>>26):q+=8;this._strip()},c.prototype._parseBase=function(C,N,E){this.words=[0],this.length=1;for(var k=0,P=1;P<=67108863;P*=N)k++;k--,P=P/N|0;for(var q=C.length-E,H=q%k,L=Math.min(q,q-H)+E,K=0,Y=E;Y<L;Y+=k)K=p(C,Y,Y+k,N),this.imuln(P),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(H!==0){var Z=1;for(K=p(C,Y,C.length,N),Y=0;Y<H;Y++)Z*=N;this.imuln(Z),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this._strip()},c.prototype.copy=function(C){C.words=new Array(this.length);for(var N=0;N<this.length;N++)C.words[N]=this.words[N];C.length=this.length,C.negative=this.negative,C.red=this.red},c.prototype._move=function(C){g(C,this)},c.prototype.clone=function(){var C=new c(null);return this.copy(C),C},c.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{c.prototype.inspect=y}else c.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(C,N){var E;if(N=0|N||1,(C=C||10)===16||C==="hex"){E="";for(var k=0,P=0,q=0;q<this.length;q++){var H=this.words[q],L=(16777215&(H<<k|P)).toString(16);P=H>>>24-k&16777215,(k+=2)>=26&&(k-=26,q--),E=P!==0||q!==this.length-1?m[6-L.length]+L+E:L+E}for(P!==0&&(E=P.toString(16)+E);E.length%N!=0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(C===(0|C)&&C>=2&&C<=36){var K=v[C],Y=b[C];E="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var V=Z.modrn(Y).toString(C);E=(Z=Z.idivn(Y)).isZero()?V+E:m[K-V.length]+V+E}for(this.isZero()&&(E="0"+E);E.length%N!=0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}o(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},c.prototype.toJSON=function(){return this.toString(16,2)},u&&(c.prototype.toBuffer=function(C,N){return this.toArrayLike(u,C,N)}),c.prototype.toArray=function(C,N){return this.toArrayLike(Array,C,N)};function x(C,N,E){E.negative=N.negative^C.negative;var k=C.length+N.length|0;E.length=k,k=k-1|0;var P=0|C.words[0],q=0|N.words[0],H=P*q,L=67108863&H,K=H/67108864|0;E.words[0]=L;for(var Y=1;Y<k;Y++){for(var Z=K>>>26,V=67108863&K,ee=Math.min(Y,N.length-1),B=Math.max(0,Y-C.length+1);B<=ee;B++){var F=Y-B|0;Z+=(H=(P=0|C.words[F])*(q=0|N.words[B])+V)/67108864|0,V=67108863&H}E.words[Y]=0|V,K=0|Z}return K!==0?E.words[Y]=0|K:E.length--,E._strip()}c.prototype.toArrayLike=function(C,N,E){this._strip();var k=this.byteLength(),P=E||Math.max(1,k);o(k<=P,"byte array longer than desired length"),o(P>0,"Requested array length <= 0");var q=(function(H,L){return H.allocUnsafe?H.allocUnsafe(L):new H(L)})(C,P);return this["_toArrayLike"+(N==="le"?"LE":"BE")](q,k),q},c.prototype._toArrayLikeLE=function(C,N){for(var E=0,k=0,P=0,q=0;P<this.length;P++){var H=this.words[P]<<q|k;C[E++]=255&H,E<C.length&&(C[E++]=H>>8&255),E<C.length&&(C[E++]=H>>16&255),q===6?(E<C.length&&(C[E++]=H>>24&255),k=0,q=0):(k=H>>>24,q+=2)}if(E<C.length)for(C[E++]=k;E<C.length;)C[E++]=0},c.prototype._toArrayLikeBE=function(C,N){for(var E=C.length-1,k=0,P=0,q=0;P<this.length;P++){var H=this.words[P]<<q|k;C[E--]=255&H,E>=0&&(C[E--]=H>>8&255),E>=0&&(C[E--]=H>>16&255),q===6?(E>=0&&(C[E--]=H>>24&255),k=0,q=0):(k=H>>>24,q+=2)}if(E>=0)for(C[E--]=k;E>=0;)C[E--]=0},Math.clz32?c.prototype._countBits=function(C){return 32-Math.clz32(C)}:c.prototype._countBits=function(C){var N=C,E=0;return N>=4096&&(E+=13,N>>>=13),N>=64&&(E+=7,N>>>=7),N>=8&&(E+=4,N>>>=4),N>=2&&(E+=2,N>>>=2),E+N},c.prototype._zeroBits=function(C){if(C===0)return 26;var N=C,E=0;return(8191&N)==0&&(E+=13,N>>>=13),(127&N)==0&&(E+=7,N>>>=7),(15&N)==0&&(E+=4,N>>>=4),(3&N)==0&&(E+=2,N>>>=2),(1&N)==0&&E++,E},c.prototype.bitLength=function(){var C=this.words[this.length-1],N=this._countBits(C);return 26*(this.length-1)+N},c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,N=0;N<this.length;N++){var E=this._zeroBits(this.words[N]);if(C+=E,E!==26)break}return C},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},c.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var N=0;N<C.length;N++)this.words[N]=this.words[N]|C.words[N];return this._strip()},c.prototype.ior=function(C){return o((this.negative|C.negative)==0),this.iuor(C)},c.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},c.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},c.prototype.iuand=function(C){var N;N=this.length>C.length?C:this;for(var E=0;E<N.length;E++)this.words[E]=this.words[E]&C.words[E];return this.length=N.length,this._strip()},c.prototype.iand=function(C){return o((this.negative|C.negative)==0),this.iuand(C)},c.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},c.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},c.prototype.iuxor=function(C){var N,E;this.length>C.length?(N=this,E=C):(N=C,E=this);for(var k=0;k<E.length;k++)this.words[k]=N.words[k]^E.words[k];if(this!==N)for(;k<N.length;k++)this.words[k]=N.words[k];return this.length=N.length,this._strip()},c.prototype.ixor=function(C){return o((this.negative|C.negative)==0),this.iuxor(C)},c.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},c.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},c.prototype.inotn=function(C){o(typeof C=="number"&&C>=0);var N=0|Math.ceil(C/26),E=C%26;this._expand(N),E>0&&N--;for(var k=0;k<N;k++)this.words[k]=67108863&~this.words[k];return E>0&&(this.words[k]=~this.words[k]&67108863>>26-E),this._strip()},c.prototype.notn=function(C){return this.clone().inotn(C)},c.prototype.setn=function(C,N){o(typeof C=="number"&&C>=0);var E=C/26|0,k=C%26;return this._expand(E+1),this.words[E]=N?this.words[E]|1<<k:this.words[E]&~(1<<k),this._strip()},c.prototype.iadd=function(C){var N,E,k;if(this.negative!==0&&C.negative===0)return this.negative=0,N=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,N=this.isub(C),C.negative=1,N._normSign();this.length>C.length?(E=this,k=C):(E=C,k=this);for(var P=0,q=0;q<k.length;q++)N=(0|E.words[q])+(0|k.words[q])+P,this.words[q]=67108863&N,P=N>>>26;for(;P!==0&&q<E.length;q++)N=(0|E.words[q])+P,this.words[q]=67108863&N,P=N>>>26;if(this.length=E.length,P!==0)this.words[this.length]=P,this.length++;else if(E!==this)for(;q<E.length;q++)this.words[q]=E.words[q];return this},c.prototype.add=function(C){var N;return C.negative!==0&&this.negative===0?(C.negative=0,N=this.sub(C),C.negative^=1,N):C.negative===0&&this.negative!==0?(this.negative=0,N=C.sub(this),this.negative=1,N):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},c.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var N=this.iadd(C);return C.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var E,k,P=this.cmp(C);if(P===0)return this.negative=0,this.length=1,this.words[0]=0,this;P>0?(E=this,k=C):(E=C,k=this);for(var q=0,H=0;H<k.length;H++)q=(N=(0|E.words[H])-(0|k.words[H])+q)>>26,this.words[H]=67108863&N;for(;q!==0&&H<E.length;H++)q=(N=(0|E.words[H])+q)>>26,this.words[H]=67108863&N;if(q===0&&H<E.length&&E!==this)for(;H<E.length;H++)this.words[H]=E.words[H];return this.length=Math.max(this.length,H),E!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(C){return this.clone().isub(C)};var S=function(C,N,E){var k,P,q,H=C.words,L=N.words,K=E.words,Y=0,Z=0|H[0],V=8191&Z,ee=Z>>>13,B=0|H[1],F=8191&B,X=B>>>13,te=0|H[2],se=8191&te,ce=te>>>13,ue=0|H[3],oe=8191&ue,le=ue>>>13,pe=0|H[4],ye=8191&pe,be=pe>>>13,Ie=0|H[5],Oe=8191&Ie,Me=Ie>>>13,Re=0|H[6],He=8191&Re,qe=Re>>>13,ct=0|H[7],ft=8191&ct,St=ct>>>13,Rt=0|H[8],Ft=8191&Rt,ot=Rt>>>13,Kt=0|H[9],Pt=8191&Kt,Ee=Kt>>>13,We=0|L[0],ut=8191&We,wt=We>>>13,Bt=0|L[1],dr=8191&Bt,Xt=Bt>>>13,pr=0|L[2],vr=8191&pr,rr=pr>>>13,Zt=0|L[3],lr=8191&Zt,fr=Zt>>>13,xr=0|L[4],Ue=8191&xr,et=xr>>>13,ht=0|L[5],kt=8191&ht,Wt=ht>>>13,Be=0|L[6],Ve=8191&Be,pt=Be>>>13,he=0|L[7],xe=8191&he,me=he>>>13,Se=0|L[8],ke=8191&Se,Te=Se>>>13,Ge=0|L[9],nt=8191&Ge,Ke=Ge>>>13;E.negative=C.negative^N.negative,E.length=19;var it=(Y+(k=Math.imul(V,ut))|0)+((8191&(P=(P=Math.imul(V,wt))+Math.imul(ee,ut)|0))<<13)|0;Y=((q=Math.imul(ee,wt))+(P>>>13)|0)+(it>>>26)|0,it&=67108863,k=Math.imul(F,ut),P=(P=Math.imul(F,wt))+Math.imul(X,ut)|0,q=Math.imul(X,wt);var st=(Y+(k=k+Math.imul(V,dr)|0)|0)+((8191&(P=(P=P+Math.imul(V,Xt)|0)+Math.imul(ee,dr)|0))<<13)|0;Y=((q=q+Math.imul(ee,Xt)|0)+(P>>>13)|0)+(st>>>26)|0,st&=67108863,k=Math.imul(se,ut),P=(P=Math.imul(se,wt))+Math.imul(ce,ut)|0,q=Math.imul(ce,wt),k=k+Math.imul(F,dr)|0,P=(P=P+Math.imul(F,Xt)|0)+Math.imul(X,dr)|0,q=q+Math.imul(X,Xt)|0;var Mt=(Y+(k=k+Math.imul(V,vr)|0)|0)+((8191&(P=(P=P+Math.imul(V,rr)|0)+Math.imul(ee,vr)|0))<<13)|0;Y=((q=q+Math.imul(ee,rr)|0)+(P>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,k=Math.imul(oe,ut),P=(P=Math.imul(oe,wt))+Math.imul(le,ut)|0,q=Math.imul(le,wt),k=k+Math.imul(se,dr)|0,P=(P=P+Math.imul(se,Xt)|0)+Math.imul(ce,dr)|0,q=q+Math.imul(ce,Xt)|0,k=k+Math.imul(F,vr)|0,P=(P=P+Math.imul(F,rr)|0)+Math.imul(X,vr)|0,q=q+Math.imul(X,rr)|0;var $t=(Y+(k=k+Math.imul(V,lr)|0)|0)+((8191&(P=(P=P+Math.imul(V,fr)|0)+Math.imul(ee,lr)|0))<<13)|0;Y=((q=q+Math.imul(ee,fr)|0)+(P>>>13)|0)+($t>>>26)|0,$t&=67108863,k=Math.imul(ye,ut),P=(P=Math.imul(ye,wt))+Math.imul(be,ut)|0,q=Math.imul(be,wt),k=k+Math.imul(oe,dr)|0,P=(P=P+Math.imul(oe,Xt)|0)+Math.imul(le,dr)|0,q=q+Math.imul(le,Xt)|0,k=k+Math.imul(se,vr)|0,P=(P=P+Math.imul(se,rr)|0)+Math.imul(ce,vr)|0,q=q+Math.imul(ce,rr)|0,k=k+Math.imul(F,lr)|0,P=(P=P+Math.imul(F,fr)|0)+Math.imul(X,lr)|0,q=q+Math.imul(X,fr)|0;var er=(Y+(k=k+Math.imul(V,Ue)|0)|0)+((8191&(P=(P=P+Math.imul(V,et)|0)+Math.imul(ee,Ue)|0))<<13)|0;Y=((q=q+Math.imul(ee,et)|0)+(P>>>13)|0)+(er>>>26)|0,er&=67108863,k=Math.imul(Oe,ut),P=(P=Math.imul(Oe,wt))+Math.imul(Me,ut)|0,q=Math.imul(Me,wt),k=k+Math.imul(ye,dr)|0,P=(P=P+Math.imul(ye,Xt)|0)+Math.imul(be,dr)|0,q=q+Math.imul(be,Xt)|0,k=k+Math.imul(oe,vr)|0,P=(P=P+Math.imul(oe,rr)|0)+Math.imul(le,vr)|0,q=q+Math.imul(le,rr)|0,k=k+Math.imul(se,lr)|0,P=(P=P+Math.imul(se,fr)|0)+Math.imul(ce,lr)|0,q=q+Math.imul(ce,fr)|0,k=k+Math.imul(F,Ue)|0,P=(P=P+Math.imul(F,et)|0)+Math.imul(X,Ue)|0,q=q+Math.imul(X,et)|0;var je=(Y+(k=k+Math.imul(V,kt)|0)|0)+((8191&(P=(P=P+Math.imul(V,Wt)|0)+Math.imul(ee,kt)|0))<<13)|0;Y=((q=q+Math.imul(ee,Wt)|0)+(P>>>13)|0)+(je>>>26)|0,je&=67108863,k=Math.imul(He,ut),P=(P=Math.imul(He,wt))+Math.imul(qe,ut)|0,q=Math.imul(qe,wt),k=k+Math.imul(Oe,dr)|0,P=(P=P+Math.imul(Oe,Xt)|0)+Math.imul(Me,dr)|0,q=q+Math.imul(Me,Xt)|0,k=k+Math.imul(ye,vr)|0,P=(P=P+Math.imul(ye,rr)|0)+Math.imul(be,vr)|0,q=q+Math.imul(be,rr)|0,k=k+Math.imul(oe,lr)|0,P=(P=P+Math.imul(oe,fr)|0)+Math.imul(le,lr)|0,q=q+Math.imul(le,fr)|0,k=k+Math.imul(se,Ue)|0,P=(P=P+Math.imul(se,et)|0)+Math.imul(ce,Ue)|0,q=q+Math.imul(ce,et)|0,k=k+Math.imul(F,kt)|0,P=(P=P+Math.imul(F,Wt)|0)+Math.imul(X,kt)|0,q=q+Math.imul(X,Wt)|0;var Le=(Y+(k=k+Math.imul(V,Ve)|0)|0)+((8191&(P=(P=P+Math.imul(V,pt)|0)+Math.imul(ee,Ve)|0))<<13)|0;Y=((q=q+Math.imul(ee,pt)|0)+(P>>>13)|0)+(Le>>>26)|0,Le&=67108863,k=Math.imul(ft,ut),P=(P=Math.imul(ft,wt))+Math.imul(St,ut)|0,q=Math.imul(St,wt),k=k+Math.imul(He,dr)|0,P=(P=P+Math.imul(He,Xt)|0)+Math.imul(qe,dr)|0,q=q+Math.imul(qe,Xt)|0,k=k+Math.imul(Oe,vr)|0,P=(P=P+Math.imul(Oe,rr)|0)+Math.imul(Me,vr)|0,q=q+Math.imul(Me,rr)|0,k=k+Math.imul(ye,lr)|0,P=(P=P+Math.imul(ye,fr)|0)+Math.imul(be,lr)|0,q=q+Math.imul(be,fr)|0,k=k+Math.imul(oe,Ue)|0,P=(P=P+Math.imul(oe,et)|0)+Math.imul(le,Ue)|0,q=q+Math.imul(le,et)|0,k=k+Math.imul(se,kt)|0,P=(P=P+Math.imul(se,Wt)|0)+Math.imul(ce,kt)|0,q=q+Math.imul(ce,Wt)|0,k=k+Math.imul(F,Ve)|0,P=(P=P+Math.imul(F,pt)|0)+Math.imul(X,Ve)|0,q=q+Math.imul(X,pt)|0;var vt=(Y+(k=k+Math.imul(V,xe)|0)|0)+((8191&(P=(P=P+Math.imul(V,me)|0)+Math.imul(ee,xe)|0))<<13)|0;Y=((q=q+Math.imul(ee,me)|0)+(P>>>13)|0)+(vt>>>26)|0,vt&=67108863,k=Math.imul(Ft,ut),P=(P=Math.imul(Ft,wt))+Math.imul(ot,ut)|0,q=Math.imul(ot,wt),k=k+Math.imul(ft,dr)|0,P=(P=P+Math.imul(ft,Xt)|0)+Math.imul(St,dr)|0,q=q+Math.imul(St,Xt)|0,k=k+Math.imul(He,vr)|0,P=(P=P+Math.imul(He,rr)|0)+Math.imul(qe,vr)|0,q=q+Math.imul(qe,rr)|0,k=k+Math.imul(Oe,lr)|0,P=(P=P+Math.imul(Oe,fr)|0)+Math.imul(Me,lr)|0,q=q+Math.imul(Me,fr)|0,k=k+Math.imul(ye,Ue)|0,P=(P=P+Math.imul(ye,et)|0)+Math.imul(be,Ue)|0,q=q+Math.imul(be,et)|0,k=k+Math.imul(oe,kt)|0,P=(P=P+Math.imul(oe,Wt)|0)+Math.imul(le,kt)|0,q=q+Math.imul(le,Wt)|0,k=k+Math.imul(se,Ve)|0,P=(P=P+Math.imul(se,pt)|0)+Math.imul(ce,Ve)|0,q=q+Math.imul(ce,pt)|0,k=k+Math.imul(F,xe)|0,P=(P=P+Math.imul(F,me)|0)+Math.imul(X,xe)|0,q=q+Math.imul(X,me)|0;var Et=(Y+(k=k+Math.imul(V,ke)|0)|0)+((8191&(P=(P=P+Math.imul(V,Te)|0)+Math.imul(ee,ke)|0))<<13)|0;Y=((q=q+Math.imul(ee,Te)|0)+(P>>>13)|0)+(Et>>>26)|0,Et&=67108863,k=Math.imul(Pt,ut),P=(P=Math.imul(Pt,wt))+Math.imul(Ee,ut)|0,q=Math.imul(Ee,wt),k=k+Math.imul(Ft,dr)|0,P=(P=P+Math.imul(Ft,Xt)|0)+Math.imul(ot,dr)|0,q=q+Math.imul(ot,Xt)|0,k=k+Math.imul(ft,vr)|0,P=(P=P+Math.imul(ft,rr)|0)+Math.imul(St,vr)|0,q=q+Math.imul(St,rr)|0,k=k+Math.imul(He,lr)|0,P=(P=P+Math.imul(He,fr)|0)+Math.imul(qe,lr)|0,q=q+Math.imul(qe,fr)|0,k=k+Math.imul(Oe,Ue)|0,P=(P=P+Math.imul(Oe,et)|0)+Math.imul(Me,Ue)|0,q=q+Math.imul(Me,et)|0,k=k+Math.imul(ye,kt)|0,P=(P=P+Math.imul(ye,Wt)|0)+Math.imul(be,kt)|0,q=q+Math.imul(be,Wt)|0,k=k+Math.imul(oe,Ve)|0,P=(P=P+Math.imul(oe,pt)|0)+Math.imul(le,Ve)|0,q=q+Math.imul(le,pt)|0,k=k+Math.imul(se,xe)|0,P=(P=P+Math.imul(se,me)|0)+Math.imul(ce,xe)|0,q=q+Math.imul(ce,me)|0,k=k+Math.imul(F,ke)|0,P=(P=P+Math.imul(F,Te)|0)+Math.imul(X,ke)|0,q=q+Math.imul(X,Te)|0;var Qt=(Y+(k=k+Math.imul(V,nt)|0)|0)+((8191&(P=(P=P+Math.imul(V,Ke)|0)+Math.imul(ee,nt)|0))<<13)|0;Y=((q=q+Math.imul(ee,Ke)|0)+(P>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,k=Math.imul(Pt,dr),P=(P=Math.imul(Pt,Xt))+Math.imul(Ee,dr)|0,q=Math.imul(Ee,Xt),k=k+Math.imul(Ft,vr)|0,P=(P=P+Math.imul(Ft,rr)|0)+Math.imul(ot,vr)|0,q=q+Math.imul(ot,rr)|0,k=k+Math.imul(ft,lr)|0,P=(P=P+Math.imul(ft,fr)|0)+Math.imul(St,lr)|0,q=q+Math.imul(St,fr)|0,k=k+Math.imul(He,Ue)|0,P=(P=P+Math.imul(He,et)|0)+Math.imul(qe,Ue)|0,q=q+Math.imul(qe,et)|0,k=k+Math.imul(Oe,kt)|0,P=(P=P+Math.imul(Oe,Wt)|0)+Math.imul(Me,kt)|0,q=q+Math.imul(Me,Wt)|0,k=k+Math.imul(ye,Ve)|0,P=(P=P+Math.imul(ye,pt)|0)+Math.imul(be,Ve)|0,q=q+Math.imul(be,pt)|0,k=k+Math.imul(oe,xe)|0,P=(P=P+Math.imul(oe,me)|0)+Math.imul(le,xe)|0,q=q+Math.imul(le,me)|0,k=k+Math.imul(se,ke)|0,P=(P=P+Math.imul(se,Te)|0)+Math.imul(ce,ke)|0,q=q+Math.imul(ce,Te)|0;var Ut=(Y+(k=k+Math.imul(F,nt)|0)|0)+((8191&(P=(P=P+Math.imul(F,Ke)|0)+Math.imul(X,nt)|0))<<13)|0;Y=((q=q+Math.imul(X,Ke)|0)+(P>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,k=Math.imul(Pt,vr),P=(P=Math.imul(Pt,rr))+Math.imul(Ee,vr)|0,q=Math.imul(Ee,rr),k=k+Math.imul(Ft,lr)|0,P=(P=P+Math.imul(Ft,fr)|0)+Math.imul(ot,lr)|0,q=q+Math.imul(ot,fr)|0,k=k+Math.imul(ft,Ue)|0,P=(P=P+Math.imul(ft,et)|0)+Math.imul(St,Ue)|0,q=q+Math.imul(St,et)|0,k=k+Math.imul(He,kt)|0,P=(P=P+Math.imul(He,Wt)|0)+Math.imul(qe,kt)|0,q=q+Math.imul(qe,Wt)|0,k=k+Math.imul(Oe,Ve)|0,P=(P=P+Math.imul(Oe,pt)|0)+Math.imul(Me,Ve)|0,q=q+Math.imul(Me,pt)|0,k=k+Math.imul(ye,xe)|0,P=(P=P+Math.imul(ye,me)|0)+Math.imul(be,xe)|0,q=q+Math.imul(be,me)|0,k=k+Math.imul(oe,ke)|0,P=(P=P+Math.imul(oe,Te)|0)+Math.imul(le,ke)|0,q=q+Math.imul(le,Te)|0;var Yt=(Y+(k=k+Math.imul(se,nt)|0)|0)+((8191&(P=(P=P+Math.imul(se,Ke)|0)+Math.imul(ce,nt)|0))<<13)|0;Y=((q=q+Math.imul(ce,Ke)|0)+(P>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,k=Math.imul(Pt,lr),P=(P=Math.imul(Pt,fr))+Math.imul(Ee,lr)|0,q=Math.imul(Ee,fr),k=k+Math.imul(Ft,Ue)|0,P=(P=P+Math.imul(Ft,et)|0)+Math.imul(ot,Ue)|0,q=q+Math.imul(ot,et)|0,k=k+Math.imul(ft,kt)|0,P=(P=P+Math.imul(ft,Wt)|0)+Math.imul(St,kt)|0,q=q+Math.imul(St,Wt)|0,k=k+Math.imul(He,Ve)|0,P=(P=P+Math.imul(He,pt)|0)+Math.imul(qe,Ve)|0,q=q+Math.imul(qe,pt)|0,k=k+Math.imul(Oe,xe)|0,P=(P=P+Math.imul(Oe,me)|0)+Math.imul(Me,xe)|0,q=q+Math.imul(Me,me)|0,k=k+Math.imul(ye,ke)|0,P=(P=P+Math.imul(ye,Te)|0)+Math.imul(be,ke)|0,q=q+Math.imul(be,Te)|0;var Ur=(Y+(k=k+Math.imul(oe,nt)|0)|0)+((8191&(P=(P=P+Math.imul(oe,Ke)|0)+Math.imul(le,nt)|0))<<13)|0;Y=((q=q+Math.imul(le,Ke)|0)+(P>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,k=Math.imul(Pt,Ue),P=(P=Math.imul(Pt,et))+Math.imul(Ee,Ue)|0,q=Math.imul(Ee,et),k=k+Math.imul(Ft,kt)|0,P=(P=P+Math.imul(Ft,Wt)|0)+Math.imul(ot,kt)|0,q=q+Math.imul(ot,Wt)|0,k=k+Math.imul(ft,Ve)|0,P=(P=P+Math.imul(ft,pt)|0)+Math.imul(St,Ve)|0,q=q+Math.imul(St,pt)|0,k=k+Math.imul(He,xe)|0,P=(P=P+Math.imul(He,me)|0)+Math.imul(qe,xe)|0,q=q+Math.imul(qe,me)|0,k=k+Math.imul(Oe,ke)|0,P=(P=P+Math.imul(Oe,Te)|0)+Math.imul(Me,ke)|0,q=q+Math.imul(Me,Te)|0;var Tr=(Y+(k=k+Math.imul(ye,nt)|0)|0)+((8191&(P=(P=P+Math.imul(ye,Ke)|0)+Math.imul(be,nt)|0))<<13)|0;Y=((q=q+Math.imul(be,Ke)|0)+(P>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,k=Math.imul(Pt,kt),P=(P=Math.imul(Pt,Wt))+Math.imul(Ee,kt)|0,q=Math.imul(Ee,Wt),k=k+Math.imul(Ft,Ve)|0,P=(P=P+Math.imul(Ft,pt)|0)+Math.imul(ot,Ve)|0,q=q+Math.imul(ot,pt)|0,k=k+Math.imul(ft,xe)|0,P=(P=P+Math.imul(ft,me)|0)+Math.imul(St,xe)|0,q=q+Math.imul(St,me)|0,k=k+Math.imul(He,ke)|0,P=(P=P+Math.imul(He,Te)|0)+Math.imul(qe,ke)|0,q=q+Math.imul(qe,Te)|0;var Sr=(Y+(k=k+Math.imul(Oe,nt)|0)|0)+((8191&(P=(P=P+Math.imul(Oe,Ke)|0)+Math.imul(Me,nt)|0))<<13)|0;Y=((q=q+Math.imul(Me,Ke)|0)+(P>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,k=Math.imul(Pt,Ve),P=(P=Math.imul(Pt,pt))+Math.imul(Ee,Ve)|0,q=Math.imul(Ee,pt),k=k+Math.imul(Ft,xe)|0,P=(P=P+Math.imul(Ft,me)|0)+Math.imul(ot,xe)|0,q=q+Math.imul(ot,me)|0,k=k+Math.imul(ft,ke)|0,P=(P=P+Math.imul(ft,Te)|0)+Math.imul(St,ke)|0,q=q+Math.imul(St,Te)|0;var mr=(Y+(k=k+Math.imul(He,nt)|0)|0)+((8191&(P=(P=P+Math.imul(He,Ke)|0)+Math.imul(qe,nt)|0))<<13)|0;Y=((q=q+Math.imul(qe,Ke)|0)+(P>>>13)|0)+(mr>>>26)|0,mr&=67108863,k=Math.imul(Pt,xe),P=(P=Math.imul(Pt,me))+Math.imul(Ee,xe)|0,q=Math.imul(Ee,me),k=k+Math.imul(Ft,ke)|0,P=(P=P+Math.imul(Ft,Te)|0)+Math.imul(ot,ke)|0,q=q+Math.imul(ot,Te)|0;var Pr=(Y+(k=k+Math.imul(ft,nt)|0)|0)+((8191&(P=(P=P+Math.imul(ft,Ke)|0)+Math.imul(St,nt)|0))<<13)|0;Y=((q=q+Math.imul(St,Ke)|0)+(P>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,k=Math.imul(Pt,ke),P=(P=Math.imul(Pt,Te))+Math.imul(Ee,ke)|0,q=Math.imul(Ee,Te);var Ir=(Y+(k=k+Math.imul(Ft,nt)|0)|0)+((8191&(P=(P=P+Math.imul(Ft,Ke)|0)+Math.imul(ot,nt)|0))<<13)|0;Y=((q=q+Math.imul(ot,Ke)|0)+(P>>>13)|0)+(Ir>>>26)|0,Ir&=67108863;var cn=(Y+(k=Math.imul(Pt,nt))|0)+((8191&(P=(P=Math.imul(Pt,Ke))+Math.imul(Ee,nt)|0))<<13)|0;return Y=((q=Math.imul(Ee,Ke))+(P>>>13)|0)+(cn>>>26)|0,cn&=67108863,K[0]=it,K[1]=st,K[2]=Mt,K[3]=$t,K[4]=er,K[5]=je,K[6]=Le,K[7]=vt,K[8]=Et,K[9]=Qt,K[10]=Ut,K[11]=Yt,K[12]=Ur,K[13]=Tr,K[14]=Sr,K[15]=mr,K[16]=Pr,K[17]=Ir,K[18]=cn,Y!==0&&(K[19]=Y,E.length++),E};function _(C,N,E){E.negative=N.negative^C.negative,E.length=C.length+N.length;for(var k=0,P=0,q=0;q<E.length-1;q++){var H=P;P=0;for(var L=67108863&k,K=Math.min(q,N.length-1),Y=Math.max(0,q-C.length+1);Y<=K;Y++){var Z=q-Y,V=(0|C.words[Z])*(0|N.words[Y]),ee=67108863&V;L=67108863&(ee=ee+L|0),P+=(H=(H=H+(V/67108864|0)|0)+(ee>>>26)|0)>>>26,H&=67108863}E.words[q]=L,k=H,H=P}return k!==0?E.words[q]=k:E.length--,E._strip()}function I(C,N,E){return _(C,N,E)}Math.imul||(S=x),c.prototype.mulTo=function(C,N){var E=this.length+C.length;return this.length===10&&C.length===10?S(this,C,N):E<63?x(this,C,N):E<1024?_(this,C,N):I(this,C,N)},c.prototype.mul=function(C){var N=new c(null);return N.words=new Array(this.length+C.length),this.mulTo(C,N)},c.prototype.mulf=function(C){var N=new c(null);return N.words=new Array(this.length+C.length),I(this,C,N)},c.prototype.imul=function(C){return this.clone().mulTo(C,this)},c.prototype.imuln=function(C){var N=C<0;N&&(C=-C),o(typeof C=="number"),o(C<67108864);for(var E=0,k=0;k<this.length;k++){var P=(0|this.words[k])*C,q=(67108863&P)+(67108863&E);E>>=26,E+=P/67108864|0,E+=q>>>26,this.words[k]=67108863&q}return E!==0&&(this.words[k]=E,this.length++),N?this.ineg():this},c.prototype.muln=function(C){return this.clone().imuln(C)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(C){var N=(function(q){for(var H=new Array(q.bitLength()),L=0;L<H.length;L++){var K=L/26|0,Y=L%26;H[L]=q.words[K]>>>Y&1}return H})(C);if(N.length===0)return new c(1);for(var E=this,k=0;k<N.length&&N[k]===0;k++,E=E.sqr());if(++k<N.length)for(var P=E.sqr();k<N.length;k++,P=P.sqr())N[k]!==0&&(E=E.mul(P));return E},c.prototype.iushln=function(C){o(typeof C=="number"&&C>=0);var N,E=C%26,k=(C-E)/26,P=67108863>>>26-E<<26-E;if(E!==0){var q=0;for(N=0;N<this.length;N++){var H=this.words[N]&P,L=(0|this.words[N])-H<<E;this.words[N]=L|q,q=H>>>26-E}q&&(this.words[N]=q,this.length++)}if(k!==0){for(N=this.length-1;N>=0;N--)this.words[N+k]=this.words[N];for(N=0;N<k;N++)this.words[N]=0;this.length+=k}return this._strip()},c.prototype.ishln=function(C){return o(this.negative===0),this.iushln(C)},c.prototype.iushrn=function(C,N,E){var k;o(typeof C=="number"&&C>=0),k=N?(N-N%26)/26:0;var P=C%26,q=Math.min((C-P)/26,this.length),H=67108863^67108863>>>P<<P,L=E;if(k-=q,k=Math.max(0,k),L){for(var K=0;K<q;K++)L.words[K]=this.words[K];L.length=q}if(q!==0)if(this.length>q)for(this.length-=q,K=0;K<this.length;K++)this.words[K]=this.words[K+q];else this.words[0]=0,this.length=1;var Y=0;for(K=this.length-1;K>=0&&(Y!==0||K>=k);K--){var Z=0|this.words[K];this.words[K]=Y<<26-P|Z>>>P,Y=Z&H}return L&&Y!==0&&(L.words[L.length++]=Y),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(C,N,E){return o(this.negative===0),this.iushrn(C,N,E)},c.prototype.shln=function(C){return this.clone().ishln(C)},c.prototype.ushln=function(C){return this.clone().iushln(C)},c.prototype.shrn=function(C){return this.clone().ishrn(C)},c.prototype.ushrn=function(C){return this.clone().iushrn(C)},c.prototype.testn=function(C){o(typeof C=="number"&&C>=0);var N=C%26,E=(C-N)/26,k=1<<N;return!(this.length<=E)&&!!(this.words[E]&k)},c.prototype.imaskn=function(C){o(typeof C=="number"&&C>=0);var N=C%26,E=(C-N)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(N!==0&&E++,this.length=Math.min(E,this.length),N!==0){var k=67108863^67108863>>>N<<N;this.words[this.length-1]&=k}return this._strip()},c.prototype.maskn=function(C){return this.clone().imaskn(C)},c.prototype.iaddn=function(C){return o(typeof C=="number"),o(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<=C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},c.prototype._iaddn=function(C){this.words[0]+=C;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},c.prototype.isubn=function(C){if(o(typeof C=="number"),o(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this._strip()},c.prototype.addn=function(C){return this.clone().iaddn(C)},c.prototype.subn=function(C){return this.clone().isubn(C)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(C,N,E){var k,P,q=C.length+E;this._expand(q);var H=0;for(k=0;k<C.length;k++){P=(0|this.words[k+E])+H;var L=(0|C.words[k])*N;H=((P-=67108863&L)>>26)-(L/67108864|0),this.words[k+E]=67108863&P}for(;k<this.length-E;k++)H=(P=(0|this.words[k+E])+H)>>26,this.words[k+E]=67108863&P;if(H===0)return this._strip();for(o(H===-1),H=0,k=0;k<this.length;k++)H=(P=-(0|this.words[k])+H)>>26,this.words[k]=67108863&P;return this.negative=1,this._strip()},c.prototype._wordDiv=function(C,N){var E=(this.length,C.length),k=this.clone(),P=C,q=0|P.words[P.length-1];(E=26-this._countBits(q))!==0&&(P=P.ushln(E),k.iushln(E),q=0|P.words[P.length-1]);var H,L=k.length-P.length;if(N!=="mod"){(H=new c(null)).length=L+1,H.words=new Array(H.length);for(var K=0;K<H.length;K++)H.words[K]=0}var Y=k.clone()._ishlnsubmul(P,1,L);Y.negative===0&&(k=Y,H&&(H.words[L]=1));for(var Z=L-1;Z>=0;Z--){var V=67108864*(0|k.words[P.length+Z])+(0|k.words[P.length+Z-1]);for(V=Math.min(V/q|0,67108863),k._ishlnsubmul(P,V,Z);k.negative!==0;)V--,k.negative=0,k._ishlnsubmul(P,1,Z),k.isZero()||(k.negative^=1);H&&(H.words[Z]=V)}return H&&H._strip(),k._strip(),N!=="div"&&E!==0&&k.iushrn(E),{div:H||null,mod:k}},c.prototype.divmod=function(C,N,E){return o(!C.isZero()),this.isZero()?{div:new c(0),mod:new c(0)}:this.negative!==0&&C.negative===0?(q=this.neg().divmod(C,N),N!=="mod"&&(k=q.div.neg()),N!=="div"&&(P=q.mod.neg(),E&&P.negative!==0&&P.iadd(C)),{div:k,mod:P}):this.negative===0&&C.negative!==0?(q=this.divmod(C.neg(),N),N!=="mod"&&(k=q.div.neg()),{div:k,mod:q.mod}):(this.negative&C.negative)!=0?(q=this.neg().divmod(C.neg(),N),N!=="div"&&(P=q.mod.neg(),E&&P.negative!==0&&P.isub(C)),{div:q.div,mod:P}):C.length>this.length||this.cmp(C)<0?{div:new c(0),mod:this}:C.length===1?N==="div"?{div:this.divn(C.words[0]),mod:null}:N==="mod"?{div:null,mod:new c(this.modrn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new c(this.modrn(C.words[0]))}:this._wordDiv(C,N);var k,P,q},c.prototype.div=function(C){return this.divmod(C,"div",!1).div},c.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},c.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},c.prototype.divRound=function(C){var N=this.divmod(C);if(N.mod.isZero())return N.div;var E=N.div.negative!==0?N.mod.isub(C):N.mod,k=C.ushrn(1),P=C.andln(1),q=E.cmp(k);return q<0||P===1&&q===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},c.prototype.modrn=function(C){var N=C<0;N&&(C=-C),o(C<=67108863);for(var E=(1<<26)%C,k=0,P=this.length-1;P>=0;P--)k=(E*k+(0|this.words[P]))%C;return N?-k:k},c.prototype.modn=function(C){return this.modrn(C)},c.prototype.idivn=function(C){var N=C<0;N&&(C=-C),o(C<=67108863);for(var E=0,k=this.length-1;k>=0;k--){var P=(0|this.words[k])+67108864*E;this.words[k]=P/C|0,E=P%C}return this._strip(),N?this.ineg():this},c.prototype.divn=function(C){return this.clone().idivn(C)},c.prototype.egcd=function(C){o(C.negative===0),o(!C.isZero());var N=this,E=C.clone();N=N.negative!==0?N.umod(C):N.clone();for(var k=new c(1),P=new c(0),q=new c(0),H=new c(1),L=0;N.isEven()&&E.isEven();)N.iushrn(1),E.iushrn(1),++L;for(var K=E.clone(),Y=N.clone();!N.isZero();){for(var Z=0,V=1;(N.words[0]&V)==0&&Z<26;++Z,V<<=1);if(Z>0)for(N.iushrn(Z);Z-- >0;)(k.isOdd()||P.isOdd())&&(k.iadd(K),P.isub(Y)),k.iushrn(1),P.iushrn(1);for(var ee=0,B=1;(E.words[0]&B)==0&&ee<26;++ee,B<<=1);if(ee>0)for(E.iushrn(ee);ee-- >0;)(q.isOdd()||H.isOdd())&&(q.iadd(K),H.isub(Y)),q.iushrn(1),H.iushrn(1);N.cmp(E)>=0?(N.isub(E),k.isub(q),P.isub(H)):(E.isub(N),q.isub(k),H.isub(P))}return{a:q,b:H,gcd:E.iushln(L)}},c.prototype._invmp=function(C){o(C.negative===0),o(!C.isZero());var N=this,E=C.clone();N=N.negative!==0?N.umod(C):N.clone();for(var k,P=new c(1),q=new c(0),H=E.clone();N.cmpn(1)>0&&E.cmpn(1)>0;){for(var L=0,K=1;(N.words[0]&K)==0&&L<26;++L,K<<=1);if(L>0)for(N.iushrn(L);L-- >0;)P.isOdd()&&P.iadd(H),P.iushrn(1);for(var Y=0,Z=1;(E.words[0]&Z)==0&&Y<26;++Y,Z<<=1);if(Y>0)for(E.iushrn(Y);Y-- >0;)q.isOdd()&&q.iadd(H),q.iushrn(1);N.cmp(E)>=0?(N.isub(E),P.isub(q)):(E.isub(N),q.isub(P))}return(k=N.cmpn(1)===0?P:q).cmpn(0)<0&&k.iadd(C),k},c.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var N=this.clone(),E=C.clone();N.negative=0,E.negative=0;for(var k=0;N.isEven()&&E.isEven();k++)N.iushrn(1),E.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;E.isEven();)E.iushrn(1);var P=N.cmp(E);if(P<0){var q=N;N=E,E=q}else if(P===0||E.cmpn(1)===0)break;N.isub(E)}return E.iushln(k)},c.prototype.invm=function(C){return this.egcd(C).a.umod(C)},c.prototype.isEven=function(){return(1&this.words[0])==0},c.prototype.isOdd=function(){return(1&this.words[0])==1},c.prototype.andln=function(C){return this.words[0]&C},c.prototype.bincn=function(C){o(typeof C=="number");var N=C%26,E=(C-N)/26,k=1<<N;if(this.length<=E)return this._expand(E+1),this.words[E]|=k,this;for(var P=k,q=E;P!==0&&q<this.length;q++){var H=0|this.words[q];P=(H+=P)>>>26,H&=67108863,this.words[q]=H}return P!==0&&(this.words[q]=P,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(C){var N,E=C<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;if(this._strip(),this.length>1)N=1;else{E&&(C=-C),o(C<=67108863,"Number is too big");var k=0|this.words[0];N=k===C?0:k<C?-1:1}return this.negative!==0?0|-N:N},c.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var N=this.ucmp(C);return this.negative!==0?0|-N:N},c.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var N=0,E=this.length-1;E>=0;E--){var k=0|this.words[E],P=0|C.words[E];if(k!==P){k<P?N=-1:k>P&&(N=1);break}}return N},c.prototype.gtn=function(C){return this.cmpn(C)===1},c.prototype.gt=function(C){return this.cmp(C)===1},c.prototype.gten=function(C){return this.cmpn(C)>=0},c.prototype.gte=function(C){return this.cmp(C)>=0},c.prototype.ltn=function(C){return this.cmpn(C)===-1},c.prototype.lt=function(C){return this.cmp(C)===-1},c.prototype.lten=function(C){return this.cmpn(C)<=0},c.prototype.lte=function(C){return this.cmp(C)<=0},c.prototype.eqn=function(C){return this.cmpn(C)===0},c.prototype.eq=function(C){return this.cmp(C)===0},c.red=function(C){return new T(C)},c.prototype.toRed=function(C){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},c.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(C){return this.red=C,this},c.prototype.forceRed=function(C){return o(!this.red,"Already a number in reduction context"),this._forceRed(C)},c.prototype.redAdd=function(C){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},c.prototype.redIAdd=function(C){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},c.prototype.redSub=function(C){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},c.prototype.redISub=function(C){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},c.prototype.redShl=function(C){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},c.prototype.redMul=function(C){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},c.prototype.redIMul=function(C){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},c.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(C){return o(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var A={k256:null,p224:null,p192:null,p25519:null};function O(C,N){this.name=C,this.p=new c(N,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function z(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function U(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(C){if(typeof C=="string"){var N=c._prime(C);this.m=N.p,this.prime=N}else o(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function R(C){T.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O.prototype._tmp=function(){var C=new c(null);return C.words=new Array(Math.ceil(this.n/13)),C},O.prototype.ireduce=function(C){var N,E=C;do this.split(E,this.tmp),N=(E=(E=this.imulK(E)).iadd(this.tmp)).bitLength();while(N>this.n);var k=N<this.n?-1:E.ucmp(this.p);return k===0?(E.words[0]=0,E.length=1):k>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},O.prototype.split=function(C,N){C.iushrn(this.n,0,N)},O.prototype.imulK=function(C){return C.imul(this.k)},l(M,O),M.prototype.split=function(C,N){for(var E=Math.min(C.length,9),k=0;k<E;k++)N.words[k]=C.words[k];if(N.length=E,C.length<=9)return C.words[0]=0,void(C.length=1);var P=C.words[9];for(N.words[N.length++]=4194303&P,k=10;k<C.length;k++){var q=0|C.words[k];C.words[k-10]=(4194303&q)<<4|P>>>22,P=q}P>>>=22,C.words[k-10]=P,P===0&&C.length>10?C.length-=10:C.length-=9},M.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var N=0,E=0;E<C.length;E++){var k=0|C.words[E];N+=977*k,C.words[E]=67108863&N,N=64*k+(N/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},l(z,O),l(U,O),l(D,O),D.prototype.imulK=function(C){for(var N=0,E=0;E<C.length;E++){var k=19*(0|C.words[E])+N,P=67108863&k;k>>>=26,C.words[E]=P,N=k}return N!==0&&(C.words[C.length++]=N),C},c._prime=function(C){if(A[C])return A[C];var N;if(C==="k256")N=new M;else if(C==="p224")N=new z;else if(C==="p192")N=new U;else{if(C!=="p25519")throw new Error("Unknown prime "+C);N=new D}return A[C]=N,N},T.prototype._verify1=function(C){o(C.negative===0,"red works only with positives"),o(C.red,"red works only with red numbers")},T.prototype._verify2=function(C,N){o((C.negative|N.negative)==0,"red works only with positives"),o(C.red&&C.red===N.red,"red works only with red numbers")},T.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):(g(C,C.umod(this.m)._forceRed(this)),C)},T.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},T.prototype.add=function(C,N){this._verify2(C,N);var E=C.add(N);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},T.prototype.iadd=function(C,N){this._verify2(C,N);var E=C.iadd(N);return E.cmp(this.m)>=0&&E.isub(this.m),E},T.prototype.sub=function(C,N){this._verify2(C,N);var E=C.sub(N);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},T.prototype.isub=function(C,N){this._verify2(C,N);var E=C.isub(N);return E.cmpn(0)<0&&E.iadd(this.m),E},T.prototype.shl=function(C,N){return this._verify1(C),this.imod(C.ushln(N))},T.prototype.imul=function(C,N){return this._verify2(C,N),this.imod(C.imul(N))},T.prototype.mul=function(C,N){return this._verify2(C,N),this.imod(C.mul(N))},T.prototype.isqr=function(C){return this.imul(C,C.clone())},T.prototype.sqr=function(C){return this.mul(C,C)},T.prototype.sqrt=function(C){if(C.isZero())return C.clone();var N=this.m.andln(3);if(o(N%2==1),N===3){var E=this.m.add(new c(1)).iushrn(2);return this.pow(C,E)}for(var k=this.m.subn(1),P=0;!k.isZero()&&k.andln(1)===0;)P++,k.iushrn(1);o(!k.isZero());var q=new c(1).toRed(this),H=q.redNeg(),L=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new c(2*K*K).toRed(this);this.pow(K,L).cmp(H)!==0;)K.redIAdd(H);for(var Y=this.pow(K,k),Z=this.pow(C,k.addn(1).iushrn(1)),V=this.pow(C,k),ee=P;V.cmp(q)!==0;){for(var B=V,F=0;B.cmp(q)!==0;F++)B=B.redSqr();o(F<ee);var X=this.pow(Y,new c(1).iushln(ee-F-1));Z=Z.redMul(X),Y=X.redSqr(),V=V.redMul(Y),ee=F}return Z},T.prototype.invm=function(C){var N=C._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},T.prototype.pow=function(C,N){if(N.isZero())return new c(1).toRed(this);if(N.cmpn(1)===0)return C.clone();var E=new Array(16);E[0]=new c(1).toRed(this),E[1]=C;for(var k=2;k<E.length;k++)E[k]=this.mul(E[k-1],C);var P=E[0],q=0,H=0,L=N.bitLength()%26;for(L===0&&(L=26),k=N.length-1;k>=0;k--){for(var K=N.words[k],Y=L-1;Y>=0;Y--){var Z=K>>Y&1;P!==E[0]&&(P=this.sqr(P)),Z!==0||q!==0?(q<<=1,q|=Z,(++H===4||k===0&&Y===0)&&(P=this.mul(P,E[q]),H=0,q=0)):H=0}L=26}return P},T.prototype.convertTo=function(C){var N=C.umod(this.m);return N===C?N.clone():N},T.prototype.convertFrom=function(C){var N=C.clone();return N.red=null,N},c.mont=function(C){return new R(C)},l(R,T),R.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},R.prototype.convertFrom=function(C){var N=this.imod(C.mul(this.rinv));return N.red=null,N},R.prototype.imul=function(C,N){if(C.isZero()||N.isZero())return C.words[0]=0,C.length=1,C;var E=C.imul(N),k=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=E.isub(k).iushrn(this.shift),q=P;return P.cmp(this.m)>=0?q=P.isub(this.m):P.cmpn(0)<0&&(q=P.iadd(this.m)),q._forceRed(this)},R.prototype.mul=function(C,N){if(C.isZero()||N.isZero())return new c(0)._forceRed(this);var E=C.mul(N),k=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=E.isub(k).iushrn(this.shift),q=P;return P.cmp(this.m)>=0?q=P.isub(this.m):P.cmpn(0)<0&&(q=P.iadd(this.m)),q._forceRed(this)},R.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],187:[function(e,n,a){var i;function s(l){this.rand=l}if(n.exports=function(l){return i||(i=new s(null)),i.generate(l)},n.exports.Rand=s,s.prototype.generate=function(l){return this._rand(l)},s.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var c=new Uint8Array(l),u=0;u<c.length;u++)c[u]=this.rand.getByte();return c},typeof self=="object")self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(l){var c=new Uint8Array(l);return self.crypto.getRandomValues(c),c}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(l){var c=new Uint8Array(l);return self.msCrypto.getRandomValues(c),c}:typeof window=="object"&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=e("crypto");if(typeof o.randomBytes!="function")throw new Error("Not supported");s.prototype._rand=function(l){return o.randomBytes(l)}}catch{}},{crypto:188}],188:[function(e,n,a){},{}],189:[function(e,n,a){var i=e("safe-buffer").Buffer;function s(h){i.isBuffer(h)||(h=i.from(h));for(var p=h.length/4|0,g=new Array(p),y=0;y<p;y++)g[y]=h.readUInt32BE(4*y);return g}function o(h){for(;0<h.length;h++)h[0]=0}function l(h,p,g,y,m){for(var v,b,x,S,_=g[0],I=g[1],A=g[2],O=g[3],M=h[0]^p[0],z=h[1]^p[1],U=h[2]^p[2],D=h[3]^p[3],T=4,R=1;R<m;R++)v=_[M>>>24]^I[z>>>16&255]^A[U>>>8&255]^O[255&D]^p[T++],b=_[z>>>24]^I[U>>>16&255]^A[D>>>8&255]^O[255&M]^p[T++],x=_[U>>>24]^I[D>>>16&255]^A[M>>>8&255]^O[255&z]^p[T++],S=_[D>>>24]^I[M>>>16&255]^A[z>>>8&255]^O[255&U]^p[T++],M=v,z=b,U=x,D=S;return v=(y[M>>>24]<<24|y[z>>>16&255]<<16|y[U>>>8&255]<<8|y[255&D])^p[T++],b=(y[z>>>24]<<24|y[U>>>16&255]<<16|y[D>>>8&255]<<8|y[255&M])^p[T++],x=(y[U>>>24]<<24|y[D>>>16&255]<<16|y[M>>>8&255]<<8|y[255&z])^p[T++],S=(y[D>>>24]<<24|y[M>>>16&255]<<16|y[z>>>8&255]<<8|y[255&U])^p[T++],[v>>>=0,b>>>=0,x>>>=0,S>>>=0]}var c=[0,1,2,4,8,16,32,64,128,27,54],u=(function(){for(var h=new Array(256),p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(var g=[],y=[],m=[[],[],[],[]],v=[[],[],[],[]],b=0,x=0,S=0;S<256;++S){var _=x^x<<1^x<<2^x<<3^x<<4;_=_>>>8^255&_^99,g[b]=_,y[_]=b;var I=h[b],A=h[I],O=h[A],M=257*h[_]^16843008*_;m[0][b]=M<<24|M>>>8,m[1][b]=M<<16|M>>>16,m[2][b]=M<<8|M>>>24,m[3][b]=M,M=16843009*O^65537*A^257*I^16843008*b,v[0][_]=M<<24|M>>>8,v[1][_]=M<<16|M>>>16,v[2][_]=M<<8|M>>>24,v[3][_]=M,b===0?b=x=1:(b=I^h[h[h[O^I]]],x^=h[h[x]])}return{SBOX:g,INV_SBOX:y,SUB_MIX:m,INV_SUB_MIX:v}})();function f(h){this._key=s(h),this._reset()}f.blockSize=16,f.keySize=32,f.prototype.blockSize=f.blockSize,f.prototype.keySize=f.keySize,f.prototype._reset=function(){for(var h=this._key,p=h.length,g=p+6,y=4*(g+1),m=[],v=0;v<p;v++)m[v]=h[v];for(v=p;v<y;v++){var b=m[v-1];v%p==0?(b=b<<8|b>>>24,b=u.SBOX[b>>>24]<<24|u.SBOX[b>>>16&255]<<16|u.SBOX[b>>>8&255]<<8|u.SBOX[255&b],b^=c[v/p|0]<<24):p>6&&v%p==4&&(b=u.SBOX[b>>>24]<<24|u.SBOX[b>>>16&255]<<16|u.SBOX[b>>>8&255]<<8|u.SBOX[255&b]),m[v]=m[v-p]^b}for(var x=[],S=0;S<y;S++){var _=y-S,I=m[_-(S%4?0:4)];x[S]=S<4||_<=4?I:u.INV_SUB_MIX[0][u.SBOX[I>>>24]]^u.INV_SUB_MIX[1][u.SBOX[I>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[I>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&I]]}this._nRounds=g,this._keySchedule=m,this._invKeySchedule=x},f.prototype.encryptBlockRaw=function(h){return l(h=s(h),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},f.prototype.encryptBlock=function(h){var p=this.encryptBlockRaw(h),g=i.allocUnsafe(16);return g.writeUInt32BE(p[0],0),g.writeUInt32BE(p[1],4),g.writeUInt32BE(p[2],8),g.writeUInt32BE(p[3],12),g},f.prototype.decryptBlock=function(h){var p=(h=s(h))[1];h[1]=h[3],h[3]=p;var g=l(h,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),y=i.allocUnsafe(16);return y.writeUInt32BE(g[0],0),y.writeUInt32BE(g[3],4),y.writeUInt32BE(g[2],8),y.writeUInt32BE(g[1],12),y},f.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},n.exports.AES=f},{"safe-buffer":494}],190:[function(e,n,a){var i=e("./aes"),s=e("safe-buffer").Buffer,o=e("cipher-base"),l=e("inherits"),c=e("./ghash"),u=e("buffer-xor"),f=e("./incr32");function h(p,g,y,m){o.call(this);var v=s.alloc(4,0);this._cipher=new i.AES(g);var b=this._cipher.encryptBlock(v);this._ghash=new c(b),y=(function(x,S,_){if(S.length===12)return x._finID=s.concat([S,s.from([0,0,0,1])]),s.concat([S,s.from([0,0,0,2])]);var I=new c(_),A=S.length,O=A%16;I.update(S),O&&(O=16-O,I.update(s.alloc(O,0))),I.update(s.alloc(8,0));var M=8*A,z=s.alloc(8);z.writeUIntBE(M,0,8),I.update(z),x._finID=I.state;var U=s.from(x._finID);return f(U),U})(this,y,b),this._prev=s.from(y),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=m,this._alen=0,this._len=0,this._mode=p,this._authTag=null,this._called=!1}l(h,o),h.prototype._update=function(p){if(!this._called&&this._alen){var g=16-this._alen%16;g<16&&(g=s.alloc(g,0),this._ghash.update(g))}this._called=!0;var y=this._mode.encrypt(this,p);return this._decrypt?this._ghash.update(p):this._ghash.update(y),this._len+=p.length,y},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var p=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&(function(g,y){var m=0;g.length!==y.length&&m++;for(var v=Math.min(g.length,y.length),b=0;b<v;++b)m+=g[b]^y[b];return m})(p,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=p,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(p){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=p},h.prototype.setAAD=function(p){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(p),this._alen+=p.length},n.exports=h},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(e,n,a){var i=e("./encrypter"),s=e("./decrypter"),o=e("./modes/list.json");a.createCipher=a.Cipher=i.createCipher,a.createCipheriv=a.Cipheriv=i.createCipheriv,a.createDecipher=a.Decipher=s.createDecipher,a.createDecipheriv=a.Decipheriv=s.createDecipheriv,a.listCiphers=a.getCiphers=function(){return Object.keys(o)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(e,n,a){var i=e("./authCipher"),s=e("safe-buffer").Buffer,o=e("./modes"),l=e("./streamCipher"),c=e("cipher-base"),u=e("./aes"),f=e("evp_bytestokey");function h(y,m,v){c.call(this),this._cache=new p,this._last=void 0,this._cipher=new u.AES(m),this._prev=s.from(v),this._mode=y,this._autopadding=!0}function p(){this.cache=s.allocUnsafe(0)}function g(y,m,v){var b=o[y.toLowerCase()];if(!b)throw new TypeError("invalid suite type");if(typeof v=="string"&&(v=s.from(v)),b.mode!=="GCM"&&v.length!==b.iv)throw new TypeError("invalid iv length "+v.length);if(typeof m=="string"&&(m=s.from(m)),m.length!==b.key/8)throw new TypeError("invalid key length "+m.length);return b.type==="stream"?new l(b.module,m,v,!0):b.type==="auth"?new i(b.module,m,v,!0):new h(b.module,m,v)}e("inherits")(h,c),h.prototype._update=function(y){var m,v;this._cache.add(y);for(var b=[];m=this._cache.get(this._autopadding);)v=this._mode.decrypt(this,m),b.push(v);return s.concat(b)},h.prototype._final=function(){var y=this._cache.flush();if(this._autopadding)return(function(m){var v=m[15];if(v<1||v>16)throw new Error("unable to decrypt data");for(var b=-1;++b<v;)if(m[b+(16-v)]!==v)throw new Error("unable to decrypt data");if(v!==16)return m.slice(0,16-v)})(this._mode.decrypt(this,y));if(y)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(y){return this._autopadding=!!y,this},p.prototype.add=function(y){this.cache=s.concat([this.cache,y])},p.prototype.get=function(y){var m;if(y){if(this.cache.length>16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m}else if(this.cache.length>=16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m;return null},p.prototype.flush=function(){if(this.cache.length)return this.cache},a.createDecipher=function(y,m){var v=o[y.toLowerCase()];if(!v)throw new TypeError("invalid suite type");var b=f(m,!1,v.key,v.iv);return g(y,b.key,b.iv)},a.createDecipheriv=g},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(e,n,a){var i=e("./modes"),s=e("./authCipher"),o=e("safe-buffer").Buffer,l=e("./streamCipher"),c=e("cipher-base"),u=e("./aes"),f=e("evp_bytestokey");function h(m,v,b){c.call(this),this._cache=new g,this._cipher=new u.AES(v),this._prev=o.from(b),this._mode=m,this._autopadding=!0}e("inherits")(h,c),h.prototype._update=function(m){var v,b;this._cache.add(m);for(var x=[];v=this._cache.get();)b=this._mode.encrypt(this,v),x.push(b);return o.concat(x)};var p=o.alloc(16,16);function g(){this.cache=o.allocUnsafe(0)}function y(m,v,b){var x=i[m.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof v=="string"&&(v=o.from(v)),v.length!==x.key/8)throw new TypeError("invalid key length "+v.length);if(typeof b=="string"&&(b=o.from(b)),x.mode!=="GCM"&&b.length!==x.iv)throw new TypeError("invalid iv length "+b.length);return x.type==="stream"?new l(x.module,v,b):x.type==="auth"?new s(x.module,v,b):new h(x.module,v,b)}h.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return m=this._mode.encrypt(this,m),this._cipher.scrub(),m;if(!m.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},g.prototype.add=function(m){this.cache=o.concat([this.cache,m])},g.prototype.get=function(){if(this.cache.length>15){var m=this.cache.slice(0,16);return this.cache=this.cache.slice(16),m}return null},g.prototype.flush=function(){for(var m=16-this.cache.length,v=o.allocUnsafe(m),b=-1;++b<m;)v.writeUInt8(m,b);return o.concat([this.cache,v])},a.createCipheriv=y,a.createCipher=function(m,v){var b=i[m.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var x=f(v,!1,b.key,b.iv);return y(m,x.key,x.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(e,n,a){var i=e("safe-buffer").Buffer,s=i.alloc(16,0);function o(c){var u=i.allocUnsafe(16);return u.writeUInt32BE(c[0]>>>0,0),u.writeUInt32BE(c[1]>>>0,4),u.writeUInt32BE(c[2]>>>0,8),u.writeUInt32BE(c[3]>>>0,12),u}function l(c){this.h=c,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}l.prototype.ghash=function(c){for(var u=-1;++u<c.length;)this.state[u]^=c[u];this._multiply()},l.prototype._multiply=function(){for(var c,u,f,h=[(c=this.h).readUInt32BE(0),c.readUInt32BE(4),c.readUInt32BE(8),c.readUInt32BE(12)],p=[0,0,0,0],g=-1;++g<128;){for((this.state[~~(g/8)]&1<<7-g%8)!=0&&(p[0]^=h[0],p[1]^=h[1],p[2]^=h[2],p[3]^=h[3]),f=(1&h[3])!=0,u=3;u>0;u--)h[u]=h[u]>>>1|(1&h[u-1])<<31;h[0]=h[0]>>>1,f&&(h[0]=h[0]^225<<24)}this.state=o(p)},l.prototype.update=function(c){var u;for(this.cache=i.concat([this.cache,c]);this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},l.prototype.final=function(c,u){return this.cache.length&&this.ghash(i.concat([this.cache,s],16)),this.ghash(o([0,c,0,u])),this.state},n.exports=l},{"safe-buffer":494}],195:[function(e,n,a){n.exports=function(i){for(var s,o=i.length;o--;){if((s=i.readUInt8(o))!==255){s++,i.writeUInt8(s,o);break}i.writeUInt8(0,o)}}},{}],196:[function(e,n,a){var i=e("buffer-xor");a.encrypt=function(s,o){var l=i(o,s._prev);return s._prev=s._cipher.encryptBlock(l),s._prev},a.decrypt=function(s,o){var l=s._prev;s._prev=o;var c=s._cipher.decryptBlock(o);return i(c,l)}},{"buffer-xor":219}],197:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("buffer-xor");function o(l,c,u){var f=c.length,h=s(c,l._cache);return l._cache=l._cache.slice(f),l._prev=i.concat([l._prev,u?c:h]),h}a.encrypt=function(l,c,u){for(var f,h=i.allocUnsafe(0);c.length;){if(l._cache.length===0&&(l._cache=l._cipher.encryptBlock(l._prev),l._prev=i.allocUnsafe(0)),!(l._cache.length<=c.length)){h=i.concat([h,o(l,c,u)]);break}f=l._cache.length,h=i.concat([h,o(l,c.slice(0,f),u)]),c=c.slice(f)}return h}},{"buffer-xor":219,"safe-buffer":494}],198:[function(e,n,a){var i=e("safe-buffer").Buffer;function s(l,c,u){for(var f,h,p=-1,g=0;++p<8;)f=c&1<<7-p?128:0,g+=(128&(h=l._cipher.encryptBlock(l._prev)[0]^f))>>p%8,l._prev=o(l._prev,u?f:h);return g}function o(l,c){var u=l.length,f=-1,h=i.allocUnsafe(l.length);for(l=i.concat([l,i.from([c])]);++f<u;)h[f]=l[f]<<1|l[f+1]>>7;return h}a.encrypt=function(l,c,u){for(var f=c.length,h=i.allocUnsafe(f),p=-1;++p<f;)h[p]=s(l,c[p],u);return h}},{"safe-buffer":494}],199:[function(e,n,a){var i=e("safe-buffer").Buffer;function s(o,l,c){var u=o._cipher.encryptBlock(o._prev)[0]^l;return o._prev=i.concat([o._prev.slice(1),i.from([c?l:u])]),u}a.encrypt=function(o,l,c){for(var u=l.length,f=i.allocUnsafe(u),h=-1;++h<u;)f[h]=s(o,l[h],c);return f}},{"safe-buffer":494}],200:[function(e,n,a){var i=e("buffer-xor"),s=e("safe-buffer").Buffer,o=e("../incr32");function l(c){var u=c._cipher.encryptBlockRaw(c._prev);return o(c._prev),u}a.encrypt=function(c,u){var f=Math.ceil(u.length/16),h=c._cache.length;c._cache=s.concat([c._cache,s.allocUnsafe(16*f)]);for(var p=0;p<f;p++){var g=l(c),y=h+16*p;c._cache.writeUInt32BE(g[0],y+0),c._cache.writeUInt32BE(g[1],y+4),c._cache.writeUInt32BE(g[2],y+8),c._cache.writeUInt32BE(g[3],y+12)}var m=c._cache.slice(0,u.length);return c._cache=c._cache.slice(u.length),i(u,m)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(e,n,a){a.encrypt=function(i,s){return i._cipher.encryptBlock(s)},a.decrypt=function(i,s){return i._cipher.decryptBlock(s)}},{}],202:[function(e,n,a){var i={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},s=e("./list.json");for(var o in s)s[o].module=i[s[o].mode];n.exports=s},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(e,n,a){n.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(e,n,a){(function(i){(function(){var s=e("buffer-xor");function o(l){return l._prev=l._cipher.encryptBlock(l._prev),l._prev}a.encrypt=function(l,c){for(;l._cache.length<c.length;)l._cache=i.concat([l._cache,o(l)]);var u=l._cache.slice(0,c.length);return l._cache=l._cache.slice(c.length),s(c,u)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(e,n,a){var i=e("./aes"),s=e("safe-buffer").Buffer,o=e("cipher-base");function l(c,u,f,h){o.call(this),this._cipher=new i.AES(u),this._prev=s.from(f),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=h,this._mode=c}e("inherits")(l,o),l.prototype._update=function(c){return this._mode.encrypt(this,c,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},n.exports=l},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(e,n,a){var i=e("browserify-des"),s=e("browserify-aes/browser"),o=e("browserify-aes/modes"),l=e("browserify-des/modes"),c=e("evp_bytestokey");function u(h,p,g){if(h=h.toLowerCase(),o[h])return s.createCipheriv(h,p,g);if(l[h])return new i({key:p,iv:g,mode:h});throw new TypeError("invalid suite type")}function f(h,p,g){if(h=h.toLowerCase(),o[h])return s.createDecipheriv(h,p,g);if(l[h])return new i({key:p,iv:g,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}a.createCipher=a.Cipher=function(h,p){var g,y;if(h=h.toLowerCase(),o[h])g=o[h].key,y=o[h].iv;else{if(!l[h])throw new TypeError("invalid suite type");g=8*l[h].key,y=l[h].iv}var m=c(p,!1,g,y);return u(h,m.key,m.iv)},a.createCipheriv=a.Cipheriv=u,a.createDecipher=a.Decipher=function(h,p){var g,y;if(h=h.toLowerCase(),o[h])g=o[h].key,y=o[h].iv;else{if(!l[h])throw new TypeError("invalid suite type");g=8*l[h].key,y=l[h].iv}var m=c(p,!1,g,y);return f(h,m.key,m.iv)},a.createDecipheriv=a.Decipheriv=f,a.listCiphers=a.getCiphers=function(){return Object.keys(l).concat(s.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(e,n,a){var i=e("cipher-base"),s=e("des.js"),o=e("inherits"),l=e("safe-buffer").Buffer,c={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function u(f){i.call(this);var h,p=f.mode.toLowerCase(),g=c[p];h=f.decrypt?"decrypt":"encrypt";var y=f.key;l.isBuffer(y)||(y=l.from(y)),p!=="des-ede"&&p!=="des-ede-cbc"||(y=l.concat([y,y.slice(0,8)]));var m=f.iv;l.isBuffer(m)||(m=l.from(m)),this._des=g.create({key:y,iv:m,type:h})}c.des=c["des-cbc"],c.des3=c["des-ede3-cbc"],n.exports=u,o(u,i),u.prototype._update=function(f){return l.from(this._des.update(f))},u.prototype._final=function(){return l.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(e,n,a){a["des-ecb"]={key:8,iv:0},a["des-cbc"]=a.des={key:8,iv:8},a["des-ede3-cbc"]=a.des3={key:24,iv:8},a["des-ede3"]={key:24,iv:0},a["des-ede-cbc"]={key:16,iv:8},a["des-ede"]={key:16,iv:0}},{}],209:[function(e,n,a){(function(i){(function(){var s=e("bn.js"),o=e("randombytes");function l(u){var f,h=u.modulus.byteLength();do f=new s(o(h));while(f.cmp(u.modulus)>=0||!f.umod(u.prime1)||!f.umod(u.prime2));return f}function c(u,f){var h=(function(A){var O=l(A);return{blinder:O.toRed(s.mont(A.modulus)).redPow(new s(A.publicExponent)).fromRed(),unblinder:O.invm(A.modulus)}})(f),p=f.modulus.byteLength(),g=new s(u).mul(h.blinder).umod(f.modulus),y=g.toRed(s.mont(f.prime1)),m=g.toRed(s.mont(f.prime2)),v=f.coefficient,b=f.prime1,x=f.prime2,S=y.redPow(f.exponent1).fromRed(),_=m.redPow(f.exponent2).fromRed(),I=S.isub(_).imul(v).umod(b).imul(x);return _.iadd(I).imul(h.unblinder).umod(f.modulus).toArrayLike(i,"be",p)}c.getr=l,n.exports=c}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(e,n,a){n.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(e,n,a){n.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(e,n,a){n.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("create-hash"),o=e("readable-stream"),l=e("inherits"),c=e("./sign"),u=e("./verify"),f=e("./algorithms.json");function h(m){o.Writable.call(this);var v=f[m];if(!v)throw new Error("Unknown message digest");this._hashType=v.hash,this._hash=s(v.hash),this._tag=v.id,this._signType=v.sign}function p(m){o.Writable.call(this);var v=f[m];if(!v)throw new Error("Unknown message digest");this._hash=s(v.hash),this._tag=v.id,this._signType=v.sign}function g(m){return new h(m)}function y(m){return new p(m)}Object.keys(f).forEach((function(m){f[m].id=i.from(f[m].id,"hex"),f[m.toLowerCase()]=f[m]})),l(h,o.Writable),h.prototype._write=function(m,v,b){this._hash.update(m),b()},h.prototype.update=function(m,v){return typeof m=="string"&&(m=i.from(m,v)),this._hash.update(m),this},h.prototype.sign=function(m,v){this.end();var b=this._hash.digest(),x=c(b,m,this._hashType,this._signType,this._tag);return v?x.toString(v):x},l(p,o.Writable),p.prototype._write=function(m,v,b){this._hash.update(m),b()},p.prototype.update=function(m,v){return typeof m=="string"&&(m=i.from(m,v)),this._hash.update(m),this},p.prototype.verify=function(m,v,b){typeof v=="string"&&(v=i.from(v,b)),this.end();var x=this._hash.digest();return u(v,x,m,this._signType,this._tag)},n.exports={Sign:g,Verify:y,createSign:g,createVerify:y}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("create-hmac"),o=e("browserify-rsa"),l=e("elliptic").ec,c=e("bn.js"),u=e("parse-asn1"),f=e("./curves.json");function h(m,v,b,x){if((m=i.from(m.toArray())).length<v.byteLength()){var S=i.alloc(v.byteLength()-m.length);m=i.concat([S,m])}var _=b.length,I=(function(M,z){M=(M=p(M,z)).mod(z);var U=i.from(M.toArray());if(U.length<z.byteLength()){var D=i.alloc(z.byteLength()-U.length);U=i.concat([D,U])}return U})(b,v),A=i.alloc(_);A.fill(1);var O=i.alloc(_);return O=s(x,O).update(A).update(i.from([0])).update(m).update(I).digest(),A=s(x,O).update(A).digest(),{k:O=s(x,O).update(A).update(i.from([1])).update(m).update(I).digest(),v:A=s(x,O).update(A).digest()}}function p(m,v){var b=new c(m),x=(m.length<<3)-v.bitLength();return x>0&&b.ishrn(x),b}function g(m,v,b){var x,S;do{for(x=i.alloc(0);8*x.length<m.bitLength();)v.v=s(b,v.k).update(v.v).digest(),x=i.concat([x,v.v]);S=p(x,m),v.k=s(b,v.k).update(v.v).update(i.from([0])).digest(),v.v=s(b,v.k).update(v.v).digest()}while(S.cmp(m)!==-1);return S}function y(m,v,b,x){return m.toRed(c.mont(b)).redPow(v).fromRed().mod(x)}n.exports=function(m,v,b,x,S){var _=u(v);if(_.curve){if(x!=="ecdsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");return(function(M,z){var U=f[z.curve.join(".")];if(!U)throw new Error("unknown curve "+z.curve.join("."));var D=new l(U).keyFromPrivate(z.privateKey).sign(M);return i.from(D.toDER())})(m,_)}if(_.type==="dsa"){if(x!=="dsa")throw new Error("wrong private key type");return(function(M,z,U){for(var D,T=z.params.priv_key,R=z.params.p,C=z.params.q,N=z.params.g,E=new c(0),k=p(M,C).mod(C),P=!1,q=h(T,C,M,U);P===!1;)D=g(C,q,U),E=y(N,D,R,C),(P=D.invm(C).imul(k.add(T.mul(E))).mod(C)).cmpn(0)===0&&(P=!1,E=new c(0));return(function(H,L){H=H.toArray(),L=L.toArray(),128&H[0]&&(H=[0].concat(H)),128&L[0]&&(L=[0].concat(L));var K=[48,H.length+L.length+4,2,H.length];return K=K.concat(H,[2,L.length],L),i.from(K)})(E,P)})(m,_,b)}if(x!=="rsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");m=i.concat([S,m]);for(var I=_.modulus.byteLength(),A=[0,1];m.length+A.length+1<I;)A.push(255);A.push(0);for(var O=-1;++O<m.length;)A.push(m[O]);return o(A,_)},n.exports.getKey=h,n.exports.makeKey=g},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("bn.js"),o=e("elliptic").ec,l=e("parse-asn1"),c=e("./curves.json");function u(f,h){if(f.cmpn(0)<=0)throw new Error("invalid sig");if(f.cmp(h)>=h)throw new Error("invalid sig")}n.exports=function(f,h,p,g,y){var m=l(p);if(m.type==="ec"){if(g!=="ecdsa"&&g!=="ecdsa/rsa")throw new Error("wrong public key type");return(function(A,O,M){var z=c[M.data.algorithm.curve.join(".")];if(!z)throw new Error("unknown curve "+M.data.algorithm.curve.join("."));var U=new o(z),D=M.data.subjectPrivateKey.data;return U.verify(O,A,D)})(f,h,m)}if(m.type==="dsa"){if(g!=="dsa")throw new Error("wrong public key type");return(function(A,O,M){var z=M.data.p,U=M.data.q,D=M.data.g,T=M.data.pub_key,R=l.signature.decode(A,"der"),C=R.s,N=R.r;u(C,U),u(N,U);var E=s.mont(z),k=C.invm(U);return D.toRed(E).redPow(new s(O).mul(k).mod(U)).fromRed().mul(T.toRed(E).redPow(N.mul(k).mod(U)).fromRed()).mod(z).mod(U).cmp(N)===0})(f,h,m)}if(g!=="rsa"&&g!=="ecdsa/rsa")throw new Error("wrong public key type");h=i.concat([y,h]);for(var v=m.modulus.byteLength(),b=[1],x=0;h.length+b.length+2<v;)b.push(255),x++;b.push(0);for(var S=-1;++S<h.length;)b.push(h[S]);b=i.from(b);var _=s.mont(m.modulus);f=(f=new s(f).toRed(_)).redPow(new s(m.publicExponent)),f=i.from(f.fromRed().toArray());var I=x<8?1:0;for(v=Math.min(f.length,b.length),f.length!==b.length&&(I=1),S=-1;++S<v;)I|=f[S]^b[S];return I===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(e,n,a){},{}],217:[function(e,n,a){var i=e("buffer"),s=i.Buffer;function o(c,u){for(var f in c)u[f]=c[f]}function l(c,u,f){return s(c,u,f)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?n.exports=i:(o(i,a),a.Buffer=l),o(s,l),l.from=function(c,u,f){if(typeof c=="number")throw new TypeError("Argument must not be a number");return s(c,u,f)},l.alloc=function(c,u,f){if(typeof c!="number")throw new TypeError("Argument must be a number");var h=s(c);return u!==void 0?typeof f=="string"?h.fill(u,f):h.fill(u):h.fill(0),h},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return s(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(c)}},{buffer:220}],218:[function(e,n,a){var i=e("safe-buffer").Buffer,s=i.isEncoding||function(m){switch((m=""+m)&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(m){var v;switch(this.encoding=(function(b){var x=(function(S){if(!S)return"utf8";for(var _;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(_)return;S=(""+S).toLowerCase(),_=!0}})(b);if(typeof x!="string"&&(i.isEncoding===s||!s(b)))throw new Error("Unknown encoding: "+b);return x||b})(m),this.encoding){case"utf16le":this.text=u,this.end=f,v=4;break;case"utf8":this.fillLast=c,v=4;break;case"base64":this.text=h,this.end=p,v=3;break;default:return this.write=g,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(v)}function l(m){return m<=127?0:m>>5==6?2:m>>4==14?3:m>>3==30?4:m>>6==2?-1:-2}function c(m){var v=this.lastTotal-this.lastNeed,b=(function(x,S,_){if((192&S[0])!=128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((192&S[1])!=128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(192&S[2])!=128)return x.lastNeed=2,""}})(this,m);return b!==void 0?b:this.lastNeed<=m.length?(m.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(m.copy(this.lastChar,v,0,m.length),void(this.lastNeed-=m.length))}function u(m,v){if((m.length-v)%2==0){var b=m.toString("utf16le",v);if(b){var x=b.charCodeAt(b.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",v,m.length-1)}function f(m){var v=m&&m.length?this.write(m):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,b)}return v}function h(m,v){var b=(m.length-v)%3;return b===0?m.toString("base64",v):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",v,m.length-b))}function p(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function g(m){return m.toString(this.encoding)}function y(m){return m&&m.length?this.write(m):""}a.StringDecoder=o,o.prototype.write=function(m){if(m.length===0)return"";var v,b;if(this.lastNeed){if((v=this.fillLast(m))===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<m.length?v?v+this.text(m,b):this.text(m,b):v||""},o.prototype.end=function(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+"":v},o.prototype.text=function(m,v){var b=(function(S,_,I){var A=_.length-1;if(A<I)return 0;var O=l(_[A]);return O>=0?(O>0&&(S.lastNeed=O-1),O):--A<I||O===-2?0:(O=l(_[A]))>=0?(O>0&&(S.lastNeed=O-2),O):--A<I||O===-2?0:(O=l(_[A]))>=0?(O>0&&(O===2?O=0:S.lastNeed=O-3),O):0})(this,m,v);if(!this.lastNeed)return m.toString("utf8",v);this.lastTotal=b;var x=m.length-(b-this.lastNeed);return m.copy(this.lastChar,0,x),m.toString("utf8",v,x)},o.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length}},{"safe-buffer":217}],219:[function(e,n,a){(function(i){(function(){n.exports=function(s,o){for(var l=Math.min(s.length,o.length),c=new i(l),u=0;u<l;++u)c[u]=s[u]^o[u];return c}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],220:[function(e,n,a){(function(i){(function(){var s=e("base64-js"),o=e("ieee754");a.Buffer=c,a.SlowBuffer=function(B){return+B!=B&&(B=0),c.alloc(+B)},a.INSPECT_MAX_BYTES=50;function l(B){if(B>2147483647)throw new RangeError('The value "'+B+'" is invalid for option "size"');var F=new Uint8Array(B);return F.__proto__=c.prototype,F}function c(B,F,X){if(typeof B=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(B)}return u(B,F,X)}function u(B,F,X){if(typeof B=="string")return(function(ce,ue){if(typeof ue=="string"&&ue!==""||(ue="utf8"),!c.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);var oe=0|y(ce,ue),le=l(oe),pe=le.write(ce,ue);return pe!==oe&&(le=le.slice(0,pe)),le})(B,F);if(ArrayBuffer.isView(B))return p(B);if(B==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(V(B,ArrayBuffer)||B&&V(B.buffer,ArrayBuffer))return(function(ce,ue,oe){if(ue<0||ce.byteLength<ue)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ue+(oe||0))throw new RangeError('"length" is outside of buffer bounds');var le;return le=ue===void 0&&oe===void 0?new Uint8Array(ce):oe===void 0?new Uint8Array(ce,ue):new Uint8Array(ce,ue,oe),le.__proto__=c.prototype,le})(B,F,X);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=B.valueOf&&B.valueOf();if(te!=null&&te!==B)return c.from(te,F,X);var se=(function(ce){if(c.isBuffer(ce)){var ue=0|g(ce.length),oe=l(ue);return oe.length===0||ce.copy(oe,0,0,ue),oe}if(ce.length!==void 0)return typeof ce.length!="number"||ee(ce.length)?l(0):p(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return p(ce.data)})(B);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return c.from(B[Symbol.toPrimitive]("string"),F,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}function f(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function h(B){return f(B),l(B<0?0:0|g(B))}function p(B){for(var F=B.length<0?0:0|g(B.length),X=l(F),te=0;te<F;te+=1)X[te]=255&B[te];return X}function g(B){if(B>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|B}function y(B,F){if(c.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||V(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);var X=B.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&X===0)return 0;for(var se=!1;;)switch(F){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return K(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return Y(B).length;default:if(se)return te?-1:K(B).length;F=(""+F).toLowerCase(),se=!0}}function m(B,F,X){var te=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0)<=(F>>>=0))return"";for(B||(B="utf8");;)switch(B){case"hex":return R(this,F,X);case"utf8":case"utf-8":return U(this,F,X);case"ascii":return D(this,F,X);case"latin1":case"binary":return T(this,F,X);case"base64":return z(this,F,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,F,X);default:if(te)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),te=!0}}function v(B,F,X){var te=B[F];B[F]=B[X],B[X]=te}function b(B,F,X,te,se){if(B.length===0)return-1;if(typeof X=="string"?(te=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),ee(X=+X)&&(X=se?0:B.length-1),X<0&&(X=B.length+X),X>=B.length){if(se)return-1;X=B.length-1}else if(X<0){if(!se)return-1;X=0}if(typeof F=="string"&&(F=c.from(F,te)),c.isBuffer(F))return F.length===0?-1:x(B,F,X,te,se);if(typeof F=="number")return F&=255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(B,F,X):Uint8Array.prototype.lastIndexOf.call(B,F,X):x(B,[F],X,te,se);throw new TypeError("val must be string, number or Buffer")}function x(B,F,X,te,se){var ce,ue=1,oe=B.length,le=F.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(B.length<2||F.length<2)return-1;ue=2,oe/=2,le/=2,X/=2}function pe(Oe,Me){return ue===1?Oe[Me]:Oe.readUInt16BE(Me*ue)}if(se){var ye=-1;for(ce=X;ce<oe;ce++)if(pe(B,ce)===pe(F,ye===-1?0:ce-ye)){if(ye===-1&&(ye=ce),ce-ye+1===le)return ye*ue}else ye!==-1&&(ce-=ce-ye),ye=-1}else for(X+le>oe&&(X=oe-le),ce=X;ce>=0;ce--){for(var be=!0,Ie=0;Ie<le;Ie++)if(pe(B,ce+Ie)!==pe(F,Ie)){be=!1;break}if(be)return ce}return-1}function S(B,F,X,te){X=Number(X)||0;var se=B.length-X;te?(te=Number(te))>se&&(te=se):te=se;var ce=F.length;te>ce/2&&(te=ce/2);for(var ue=0;ue<te;++ue){var oe=parseInt(F.substr(2*ue,2),16);if(ee(oe))return ue;B[X+ue]=oe}return ue}function _(B,F,X,te){return Z(K(F,B.length-X),B,X,te)}function I(B,F,X,te){return Z((function(se){for(var ce=[],ue=0;ue<se.length;++ue)ce.push(255&se.charCodeAt(ue));return ce})(F),B,X,te)}function A(B,F,X,te){return I(B,F,X,te)}function O(B,F,X,te){return Z(Y(F),B,X,te)}function M(B,F,X,te){return Z((function(se,ce){for(var ue,oe,le,pe=[],ye=0;ye<se.length&&!((ce-=2)<0);++ye)ue=se.charCodeAt(ye),oe=ue>>8,le=ue%256,pe.push(le),pe.push(oe);return pe})(F,B.length-X),B,X,te)}function z(B,F,X){return F===0&&X===B.length?s.fromByteArray(B):s.fromByteArray(B.slice(F,X))}function U(B,F,X){X=Math.min(B.length,X);for(var te=[],se=F;se<X;){var ce,ue,oe,le,pe=B[se],ye=null,be=pe>239?4:pe>223?3:pe>191?2:1;if(se+be<=X)switch(be){case 1:pe<128&&(ye=pe);break;case 2:(192&(ce=B[se+1]))==128&&(le=(31&pe)<<6|63&ce)>127&&(ye=le);break;case 3:ce=B[se+1],ue=B[se+2],(192&ce)==128&&(192&ue)==128&&(le=(15&pe)<<12|(63&ce)<<6|63&ue)>2047&&(le<55296||le>57343)&&(ye=le);break;case 4:ce=B[se+1],ue=B[se+2],oe=B[se+3],(192&ce)==128&&(192&ue)==128&&(192&oe)==128&&(le=(15&pe)<<18|(63&ce)<<12|(63&ue)<<6|63&oe)>65535&&le<1114112&&(ye=le)}ye===null?(ye=65533,be=1):ye>65535&&(ye-=65536,te.push(ye>>>10&1023|55296),ye=56320|1023&ye),te.push(ye),se+=be}return(function(Ie){var Oe=Ie.length;if(Oe<=4096)return String.fromCharCode.apply(String,Ie);for(var Me="",Re=0;Re<Oe;)Me+=String.fromCharCode.apply(String,Ie.slice(Re,Re+=4096));return Me})(te)}a.kMaxLength=2147483647,c.TYPED_ARRAY_SUPPORT=(function(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},B.foo()===42}catch{return!1}})(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(B,F,X){return u(B,F,X)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(B,F,X){return(function(te,se,ce){return f(te),te<=0?l(te):se!==void 0?typeof ce=="string"?l(te).fill(se,ce):l(te).fill(se):l(te)})(B,F,X)},c.allocUnsafe=function(B){return h(B)},c.allocUnsafeSlow=function(B){return h(B)},c.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==c.prototype},c.compare=function(B,F){if(V(B,Uint8Array)&&(B=c.from(B,B.offset,B.byteLength)),V(F,Uint8Array)&&(F=c.from(F,F.offset,F.byteLength)),!c.isBuffer(B)||!c.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===F)return 0;for(var X=B.length,te=F.length,se=0,ce=Math.min(X,te);se<ce;++se)if(B[se]!==F[se]){X=B[se],te=F[se];break}return X<te?-1:te<X?1:0},c.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(B,F){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return c.alloc(0);var X;if(F===void 0)for(F=0,X=0;X<B.length;++X)F+=B[X].length;var te=c.allocUnsafe(F),se=0;for(X=0;X<B.length;++X){var ce=B[X];if(V(ce,Uint8Array)&&(ce=c.from(ce)),!c.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(te,se),se+=ce.length}return te},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<B;F+=2)v(this,F,F+1);return this},c.prototype.swap32=function(){var B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<B;F+=4)v(this,F,F+3),v(this,F+1,F+2);return this},c.prototype.swap64=function(){var B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<B;F+=8)v(this,F,F+7),v(this,F+1,F+6),v(this,F+2,F+5),v(this,F+3,F+4);return this},c.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?U(this,0,B):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(B){if(!c.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||c.compare(this,B)===0},c.prototype.inspect=function(){var B="",F=a.INSPECT_MAX_BYTES;return B=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(B+=" ... "),"<Buffer "+B+">"},c.prototype.compare=function(B,F,X,te,se){if(V(B,Uint8Array)&&(B=c.from(B,B.offset,B.byteLength)),!c.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(F===void 0&&(F=0),X===void 0&&(X=B?B.length:0),te===void 0&&(te=0),se===void 0&&(se=this.length),F<0||X>B.length||te<0||se>this.length)throw new RangeError("out of range index");if(te>=se&&F>=X)return 0;if(te>=se)return-1;if(F>=X)return 1;if(this===B)return 0;for(var ce=(se>>>=0)-(te>>>=0),ue=(X>>>=0)-(F>>>=0),oe=Math.min(ce,ue),le=this.slice(te,se),pe=B.slice(F,X),ye=0;ye<oe;++ye)if(le[ye]!==pe[ye]){ce=le[ye],ue=pe[ye];break}return ce<ue?-1:ue<ce?1:0},c.prototype.includes=function(B,F,X){return this.indexOf(B,F,X)!==-1},c.prototype.indexOf=function(B,F,X){return b(this,B,F,X,!0)},c.prototype.lastIndexOf=function(B,F,X){return b(this,B,F,X,!1)},c.prototype.write=function(B,F,X,te){if(F===void 0)te="utf8",X=this.length,F=0;else if(X===void 0&&typeof F=="string")te=F,X=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(X)?(X>>>=0,te===void 0&&(te="utf8")):(te=X,X=void 0)}var se=this.length-F;if((X===void 0||X>se)&&(X=se),B.length>0&&(X<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var ce=!1;;)switch(te){case"hex":return S(this,B,F,X);case"utf8":case"utf-8":return _(this,B,F,X);case"ascii":return I(this,B,F,X);case"latin1":case"binary":return A(this,B,F,X);case"base64":return O(this,B,F,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,B,F,X);default:if(ce)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ce=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(B,F,X){var te="";X=Math.min(B.length,X);for(var se=F;se<X;++se)te+=String.fromCharCode(127&B[se]);return te}function T(B,F,X){var te="";X=Math.min(B.length,X);for(var se=F;se<X;++se)te+=String.fromCharCode(B[se]);return te}function R(B,F,X){var te=B.length;(!F||F<0)&&(F=0),(!X||X<0||X>te)&&(X=te);for(var se="",ce=F;ce<X;++ce)se+=L(B[ce]);return se}function C(B,F,X){for(var te=B.slice(F,X),se="",ce=0;ce<te.length;ce+=2)se+=String.fromCharCode(te[ce]+256*te[ce+1]);return se}function N(B,F,X){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(B+F>X)throw new RangeError("Trying to access beyond buffer length")}function E(B,F,X,te,se,ce){if(!c.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>se||F<ce)throw new RangeError('"value" argument is out of bounds');if(X+te>B.length)throw new RangeError("Index out of range")}function k(B,F,X,te,se,ce){if(X+te>B.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function P(B,F,X,te,se){return F=+F,X>>>=0,se||k(B,0,X,4),o.write(B,F,X,te,23,4),X+4}function q(B,F,X,te,se){return F=+F,X>>>=0,se||k(B,0,X,8),o.write(B,F,X,te,52,8),X+8}c.prototype.slice=function(B,F){var X=this.length;(B=~~B)<0?(B+=X)<0&&(B=0):B>X&&(B=X),(F=F===void 0?X:~~F)<0?(F+=X)<0&&(F=0):F>X&&(F=X),F<B&&(F=B);var te=this.subarray(B,F);return te.__proto__=c.prototype,te},c.prototype.readUIntLE=function(B,F,X){B>>>=0,F>>>=0,X||N(B,F,this.length);for(var te=this[B],se=1,ce=0;++ce<F&&(se*=256);)te+=this[B+ce]*se;return te},c.prototype.readUIntBE=function(B,F,X){B>>>=0,F>>>=0,X||N(B,F,this.length);for(var te=this[B+--F],se=1;F>0&&(se*=256);)te+=this[B+--F]*se;return te},c.prototype.readUInt8=function(B,F){return B>>>=0,F||N(B,1,this.length),this[B]},c.prototype.readUInt16LE=function(B,F){return B>>>=0,F||N(B,2,this.length),this[B]|this[B+1]<<8},c.prototype.readUInt16BE=function(B,F){return B>>>=0,F||N(B,2,this.length),this[B]<<8|this[B+1]},c.prototype.readUInt32LE=function(B,F){return B>>>=0,F||N(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},c.prototype.readUInt32BE=function(B,F){return B>>>=0,F||N(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},c.prototype.readIntLE=function(B,F,X){B>>>=0,F>>>=0,X||N(B,F,this.length);for(var te=this[B],se=1,ce=0;++ce<F&&(se*=256);)te+=this[B+ce]*se;return te>=(se*=128)&&(te-=Math.pow(2,8*F)),te},c.prototype.readIntBE=function(B,F,X){B>>>=0,F>>>=0,X||N(B,F,this.length);for(var te=F,se=1,ce=this[B+--te];te>0&&(se*=256);)ce+=this[B+--te]*se;return ce>=(se*=128)&&(ce-=Math.pow(2,8*F)),ce},c.prototype.readInt8=function(B,F){return B>>>=0,F||N(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},c.prototype.readInt16LE=function(B,F){B>>>=0,F||N(B,2,this.length);var X=this[B]|this[B+1]<<8;return 32768&X?4294901760|X:X},c.prototype.readInt16BE=function(B,F){B>>>=0,F||N(B,2,this.length);var X=this[B+1]|this[B]<<8;return 32768&X?4294901760|X:X},c.prototype.readInt32LE=function(B,F){return B>>>=0,F||N(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},c.prototype.readInt32BE=function(B,F){return B>>>=0,F||N(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},c.prototype.readFloatLE=function(B,F){return B>>>=0,F||N(B,4,this.length),o.read(this,B,!0,23,4)},c.prototype.readFloatBE=function(B,F){return B>>>=0,F||N(B,4,this.length),o.read(this,B,!1,23,4)},c.prototype.readDoubleLE=function(B,F){return B>>>=0,F||N(B,8,this.length),o.read(this,B,!0,52,8)},c.prototype.readDoubleBE=function(B,F){return B>>>=0,F||N(B,8,this.length),o.read(this,B,!1,52,8)},c.prototype.writeUIntLE=function(B,F,X,te){B=+B,F>>>=0,X>>>=0,te||E(this,B,F,X,Math.pow(2,8*X)-1,0);var se=1,ce=0;for(this[F]=255&B;++ce<X&&(se*=256);)this[F+ce]=B/se&255;return F+X},c.prototype.writeUIntBE=function(B,F,X,te){B=+B,F>>>=0,X>>>=0,te||E(this,B,F,X,Math.pow(2,8*X)-1,0);var se=X-1,ce=1;for(this[F+se]=255&B;--se>=0&&(ce*=256);)this[F+se]=B/ce&255;return F+X},c.prototype.writeUInt8=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,1,255,0),this[F]=255&B,F+1},c.prototype.writeUInt16LE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,2,65535,0),this[F]=255&B,this[F+1]=B>>>8,F+2},c.prototype.writeUInt16BE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,2,65535,0),this[F]=B>>>8,this[F+1]=255&B,F+2},c.prototype.writeUInt32LE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,4,4294967295,0),this[F+3]=B>>>24,this[F+2]=B>>>16,this[F+1]=B>>>8,this[F]=255&B,F+4},c.prototype.writeUInt32BE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,4,4294967295,0),this[F]=B>>>24,this[F+1]=B>>>16,this[F+2]=B>>>8,this[F+3]=255&B,F+4},c.prototype.writeIntLE=function(B,F,X,te){if(B=+B,F>>>=0,!te){var se=Math.pow(2,8*X-1);E(this,B,F,X,se-1,-se)}var ce=0,ue=1,oe=0;for(this[F]=255&B;++ce<X&&(ue*=256);)B<0&&oe===0&&this[F+ce-1]!==0&&(oe=1),this[F+ce]=(B/ue>>0)-oe&255;return F+X},c.prototype.writeIntBE=function(B,F,X,te){if(B=+B,F>>>=0,!te){var se=Math.pow(2,8*X-1);E(this,B,F,X,se-1,-se)}var ce=X-1,ue=1,oe=0;for(this[F+ce]=255&B;--ce>=0&&(ue*=256);)B<0&&oe===0&&this[F+ce+1]!==0&&(oe=1),this[F+ce]=(B/ue>>0)-oe&255;return F+X},c.prototype.writeInt8=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,1,127,-128),B<0&&(B=255+B+1),this[F]=255&B,F+1},c.prototype.writeInt16LE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,2,32767,-32768),this[F]=255&B,this[F+1]=B>>>8,F+2},c.prototype.writeInt16BE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,2,32767,-32768),this[F]=B>>>8,this[F+1]=255&B,F+2},c.prototype.writeInt32LE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,4,2147483647,-2147483648),this[F]=255&B,this[F+1]=B>>>8,this[F+2]=B>>>16,this[F+3]=B>>>24,F+4},c.prototype.writeInt32BE=function(B,F,X){return B=+B,F>>>=0,X||E(this,B,F,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[F]=B>>>24,this[F+1]=B>>>16,this[F+2]=B>>>8,this[F+3]=255&B,F+4},c.prototype.writeFloatLE=function(B,F,X){return P(this,B,F,!0,X)},c.prototype.writeFloatBE=function(B,F,X){return P(this,B,F,!1,X)},c.prototype.writeDoubleLE=function(B,F,X){return q(this,B,F,!0,X)},c.prototype.writeDoubleBE=function(B,F,X){return q(this,B,F,!1,X)},c.prototype.copy=function(B,F,X,te){if(!c.isBuffer(B))throw new TypeError("argument should be a Buffer");if(X||(X=0),te||te===0||(te=this.length),F>=B.length&&(F=B.length),F||(F=0),te>0&&te<X&&(te=X),te===X||B.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),B.length-F<te-X&&(te=B.length-F+X);var se=te-X;if(this===B&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(F,X,te);else if(this===B&&X<F&&F<te)for(var ce=se-1;ce>=0;--ce)B[ce+F]=this[ce+X];else Uint8Array.prototype.set.call(B,this.subarray(X,te),F);return se},c.prototype.fill=function(B,F,X,te){if(typeof B=="string"){if(typeof F=="string"?(te=F,F=0,X=this.length):typeof X=="string"&&(te=X,X=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!c.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(B.length===1){var se=B.charCodeAt(0);(te==="utf8"&&se<128||te==="latin1")&&(B=se)}}else typeof B=="number"&&(B&=255);if(F<0||this.length<F||this.length<X)throw new RangeError("Out of range index");if(X<=F)return this;var ce;if(F>>>=0,X=X===void 0?this.length:X>>>0,B||(B=0),typeof B=="number")for(ce=F;ce<X;++ce)this[ce]=B;else{var ue=c.isBuffer(B)?B:c.from(B,te),oe=ue.length;if(oe===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(ce=0;ce<X-F;++ce)this[ce+F]=ue[ce%oe]}return this};var H=/[^+/0-9A-Za-z-_]/g;function L(B){return B<16?"0"+B.toString(16):B.toString(16)}function K(B,F){var X;F=F||1/0;for(var te=B.length,se=null,ce=[],ue=0;ue<te;++ue){if((X=B.charCodeAt(ue))>55295&&X<57344){if(!se){if(X>56319){(F-=3)>-1&&ce.push(239,191,189);continue}if(ue+1===te){(F-=3)>-1&&ce.push(239,191,189);continue}se=X;continue}if(X<56320){(F-=3)>-1&&ce.push(239,191,189),se=X;continue}X=65536+(se-55296<<10|X-56320)}else se&&(F-=3)>-1&&ce.push(239,191,189);if(se=null,X<128){if((F-=1)<0)break;ce.push(X)}else if(X<2048){if((F-=2)<0)break;ce.push(X>>6|192,63&X|128)}else if(X<65536){if((F-=3)<0)break;ce.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((F-=4)<0)break;ce.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return ce}function Y(B){return s.toByteArray((function(F){if((F=(F=F.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F})(B))}function Z(B,F,X,te){for(var se=0;se<te&&!(se+X>=F.length||se>=B.length);++se)F[se+X]=B[se];return se}function V(B,F){return B instanceof F||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===F.name}function ee(B){return B!=B}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("stream").Transform,o=e("string_decoder").StringDecoder;function l(c){s.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(l,s),l.prototype.update=function(c,u,f){typeof c=="string"&&(c=i.from(c,u));var h=this._update(c);return this.hashMode?this:(f&&(h=this._toString(h,f)),h)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(c,u,f){var h;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(p){h=p}finally{f(h)}},l.prototype._flush=function(c){var u;try{this.push(this.__final())}catch(f){u=f}c(u)},l.prototype._finalOrDigest=function(c){var u=this.__final()||i.alloc(0);return c&&(u=this._toString(u,c,!0)),u},l.prototype._toString=function(c,u,f){if(this._decoder||(this._decoder=new o(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var h=this._decoder.write(c);return f&&(h+=this._decoder.end()),h},n.exports=l},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(e,n,a){var i=e("../internals/is-callable"),s=e("../internals/try-to-string"),o=TypeError;n.exports=function(l){if(i(l))return l;throw new o(s(l)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(e,n,a){var i=e("../internals/is-constructor"),s=e("../internals/try-to-string"),o=TypeError;n.exports=function(l){if(i(l))return l;throw new o(s(l)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(e,n,a){var i=e("../internals/is-callable"),s=String,o=TypeError;n.exports=function(l){if(typeof l=="object"||i(l))return l;throw new o("Can't set "+s(l)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(e,n,a){var i=e("../internals/well-known-symbol"),s=e("../internals/object-create"),o=e("../internals/object-define-property").f,l=i("unscopables"),c=Array.prototype;c[l]===void 0&&o(c,l,{configurable:!0,value:s(null)}),n.exports=function(u){c[l][u]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(e,n,a){var i=e("../internals/object-is-prototype-of"),s=TypeError;n.exports=function(o,l){if(i(l,o))return o;throw new s("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(e,n,a){var i=e("../internals/is-object"),s=String,o=TypeError;n.exports=function(l){if(i(l))return l;throw new o(s(l)+" is not an object")}},{"../internals/is-object":289}],228:[function(e,n,a){var i=e("../internals/to-indexed-object"),s=e("../internals/to-absolute-index"),o=e("../internals/length-of-array-like"),l=function(c){return function(u,f,h){var p,g=i(u),y=o(g),m=s(h,y);if(c&&f!=f){for(;y>m;)if((p=g[m++])!=p)return!0}else for(;y>m;m++)if((c||m in g)&&g[m]===f)return c||m||0;return!c&&-1}};n.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(e,n,a){var i=e("../internals/function-bind-context"),s=e("../internals/function-uncurry-this"),o=e("../internals/indexed-object"),l=e("../internals/to-object"),c=e("../internals/length-of-array-like"),u=e("../internals/array-species-create"),f=s([].push),h=function(p){var g=p===1,y=p===2,m=p===3,v=p===4,b=p===6,x=p===7,S=p===5||b;return function(_,I,A,O){for(var M,z,U=l(_),D=o(U),T=i(I,A),R=c(D),C=0,N=O||u,E=g?N(_,R):y||x?N(_,0):void 0;R>C;C++)if((S||C in D)&&(z=T(M=D[C],C,U),p))if(g)E[C]=z;else if(z)switch(p){case 3:return!0;case 5:return M;case 6:return C;case 2:f(E,M)}else switch(p){case 4:return!1;case 7:f(E,M)}return b?-1:m||v?v:E}};n.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(e,n,a){var i=e("../internals/to-absolute-index"),s=e("../internals/length-of-array-like"),o=e("../internals/create-property"),l=Array,c=Math.max;n.exports=function(u,f,h){for(var p=s(u),g=i(f,p),y=i(h===void 0?p:h,p),m=l(c(y-g,0)),v=0;g<y;g++,v++)o(m,v,u[g]);return m.length=v,m}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(e,n,a){var i=e("../internals/function-uncurry-this");n.exports=i([].slice)},{"../internals/function-uncurry-this":268}],232:[function(e,n,a){var i=e("../internals/is-array"),s=e("../internals/is-constructor"),o=e("../internals/is-object"),l=e("../internals/well-known-symbol")("species"),c=Array;n.exports=function(u){var f;return i(u)&&(f=u.constructor,(s(f)&&(f===c||i(f.prototype))||o(f)&&(f=f[l])===null)&&(f=void 0)),f===void 0?c:f}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(e,n,a){var i=e("../internals/array-species-constructor");n.exports=function(s,o){return new(i(s))(o===0?0:o)}},{"../internals/array-species-constructor":232}],234:[function(e,n,a){var i=e("../internals/well-known-symbol")("iterator"),s=!1;try{var o=0,l={next:function(){return{done:!!o++}},return:function(){s=!0}};l[i]=function(){return this},Array.from(l,(function(){throw 2}))}catch{}n.exports=function(c,u){try{if(!u&&!s)return!1}catch{return!1}var f=!1;try{var h={};h[i]=function(){return{next:function(){return{done:f=!0}}}},c(h)}catch{}return f}},{"../internals/well-known-symbol":357}],235:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=i({}.toString),o=i("".slice);n.exports=function(l){return o(s(l),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(e,n,a){var i=e("../internals/to-string-tag-support"),s=e("../internals/is-callable"),o=e("../internals/classof-raw"),l=e("../internals/well-known-symbol")("toStringTag"),c=Object,u=o((function(){return arguments})())==="Arguments";n.exports=i?o:function(f){var h,p,g;return f===void 0?"Undefined":f===null?"Null":typeof(p=(function(y,m){try{return y[m]}catch{}})(h=c(f),l))=="string"?p:u?o(h):(g=o(h))==="Object"&&s(h.callee)?"Arguments":g}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(e,n,a){var i=e("../internals/has-own-property"),s=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),l=e("../internals/object-define-property");n.exports=function(c,u,f){for(var h=s(u),p=l.f,g=o.f,y=0;y<h.length;y++){var m=h[y];i(c,m)||f&&i(f,m)||p(c,m,g(u,m))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(e,n,a){var i=e("../internals/well-known-symbol")("match");n.exports=function(s){var o=/./;try{"/./"[s](o)}catch{try{return o[i]=!1,"/./"[s](o)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(e,n,a){var i=e("../internals/fails");n.exports=!i((function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}))},{"../internals/fails":260}],240:[function(e,n,a){n.exports=function(i,s){return{value:i,done:s}}},{}],241:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");n.exports=i?function(l,c,u){return s.f(l,c,o(1,u))}:function(l,c,u){return l[c]=u,l}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(e,n,a){n.exports=function(i,s){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:s}}},{}],243:[function(e,n,a){var i=e("../internals/to-property-key"),s=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");n.exports=function(l,c,u){var f=i(c);f in l?s.f(l,f,o(0,u)):l[f]=u}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(e,n,a){var i=e("../internals/make-built-in"),s=e("../internals/object-define-property");n.exports=function(o,l,c){return c.get&&i(c.get,l,{getter:!0}),c.set&&i(c.set,l,{setter:!0}),s.f(o,l,c)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(e,n,a){var i=e("../internals/is-callable"),s=e("../internals/object-define-property"),o=e("../internals/make-built-in"),l=e("../internals/define-global-property");n.exports=function(c,u,f,h){h||(h={});var p=h.enumerable,g=h.name!==void 0?h.name:u;if(i(f)&&o(f,g,h),h.global)p?c[u]=f:l(u,f);else{try{h.unsafe?c[u]&&(p=!0):delete c[u]}catch{}p?c[u]=f:s.f(c,u,{value:f,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return c}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(e,n,a){var i=e("../internals/global"),s=Object.defineProperty;n.exports=function(o,l){try{s(i,o,{value:l,configurable:!0,writable:!0})}catch{i[o]=l}return l}},{"../internals/global":274}],247:[function(e,n,a){var i=e("../internals/fails");n.exports=!i((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},{"../internals/fails":260}],248:[function(e,n,a){var i=typeof document=="object"&&document.all,s=i===void 0&&i!==void 0;n.exports={all:i,IS_HTMLDDA:s}},{}],249:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/is-object"),o=i.document,l=s(o)&&s(o.createElement);n.exports=function(c){return l?o.createElement(c):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(e,n,a){var i=e("../internals/engine-is-deno"),s=e("../internals/engine-is-node");n.exports=!i&&!s&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(e,n,a){n.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(e,n,a){var i=e("../internals/engine-user-agent");n.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(e,n,a){var i=e("../internals/engine-user-agent");n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},{"../internals/engine-user-agent":256}],254:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/classof-raw");n.exports=s(i.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(e,n,a){var i=e("../internals/engine-user-agent");n.exports=/web0s(?!.*chrome)/i.test(i)},{"../internals/engine-user-agent":256}],256:[function(e,n,a){n.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(e,n,a){var i,s,o=e("../internals/global"),l=e("../internals/engine-user-agent"),c=o.process,u=o.Deno,f=c&&c.versions||u&&u.version,h=f&&f.v8;h&&(s=(i=h.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&l&&(!(i=l.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=l.match(/Chrome\/(\d+)/))&&(s=+i[1]),n.exports=s},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(e,n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),l=e("../internals/define-built-in"),c=e("../internals/define-global-property"),u=e("../internals/copy-constructor-properties"),f=e("../internals/is-forced");n.exports=function(h,p){var g,y,m,v,b,x=h.target,S=h.global,_=h.stat;if(g=S?i:_?i[x]||c(x,{}):(i[x]||{}).prototype)for(y in p){if(v=p[y],m=h.dontCallGetSet?(b=s(g,y))&&b.value:g[y],!f(S?y:x+(_?".":"#")+y,h.forced)&&m!==void 0){if(typeof v==typeof m)continue;u(v,m)}(h.sham||m&&m.sham)&&o(v,"sham",!0),l(g,y,v,h)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(e,n,a){n.exports=function(i){try{return!!i()}catch{return!0}}},{}],261:[function(e,n,a){var i=e("../internals/function-bind-native"),s=Function.prototype,o=s.apply,l=s.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(i?l.bind(o):function(){return l.apply(o,arguments)})},{"../internals/function-bind-native":263}],262:[function(e,n,a){var i=e("../internals/function-uncurry-this-clause"),s=e("../internals/a-callable"),o=e("../internals/function-bind-native"),l=i(i.bind);n.exports=function(c,u){return s(c),u===void 0?c:o?l(c,u):function(){return c.apply(u,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(e,n,a){var i=e("../internals/fails");n.exports=!i((function(){var s=(function(){}).bind();return typeof s!="function"||s.hasOwnProperty("prototype")}))},{"../internals/fails":260}],264:[function(e,n,a){var i=e("../internals/function-bind-native"),s=Function.prototype.call;n.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},{"../internals/function-bind-native":263}],265:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/has-own-property"),o=Function.prototype,l=i&&Object.getOwnPropertyDescriptor,c=s(o,"name"),u=c&&(function(){}).name==="something",f=c&&(!i||i&&l(o,"name").configurable);n.exports={EXISTS:c,PROPER:u,CONFIGURABLE:f}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/a-callable");n.exports=function(o,l,c){try{return i(s(Object.getOwnPropertyDescriptor(o,l)[c]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(e,n,a){var i=e("../internals/classof-raw"),s=e("../internals/function-uncurry-this");n.exports=function(o){if(i(o)==="Function")return s(o)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(e,n,a){var i=e("../internals/function-bind-native"),s=Function.prototype,o=s.call,l=i&&s.bind.bind(o,o);n.exports=i?l:function(c){return function(){return o.apply(c,arguments)}}},{"../internals/function-bind-native":263}],269:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/is-callable"),o=function(l){return s(l)?l:void 0};n.exports=function(l,c){return arguments.length<2?o(i[l]):i[l]&&i[l][c]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(e,n,a){var i=e("../internals/classof"),s=e("../internals/get-method"),o=e("../internals/is-null-or-undefined"),l=e("../internals/iterators"),c=e("../internals/well-known-symbol")("iterator");n.exports=function(u){if(!o(u))return s(u,c)||s(u,"@@iterator")||l[i(u)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(e,n,a){var i=e("../internals/function-call"),s=e("../internals/a-callable"),o=e("../internals/an-object"),l=e("../internals/try-to-string"),c=e("../internals/get-iterator-method"),u=TypeError;n.exports=function(f,h){var p=arguments.length<2?c(f):h;if(s(p))return o(i(p,f));throw new u(l(f)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/is-array"),o=e("../internals/is-callable"),l=e("../internals/classof-raw"),c=e("../internals/to-string"),u=i([].push);n.exports=function(f){if(o(f))return f;if(s(f)){for(var h=f.length,p=[],g=0;g<h;g++){var y=f[g];typeof y=="string"?u(p,y):typeof y!="number"&&l(y)!=="Number"&&l(y)!=="String"||u(p,c(y))}var m=p.length,v=!0;return function(b,x){if(v)return v=!1,x;if(s(this))return x;for(var S=0;S<m;S++)if(p[S]===b)return x}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(e,n,a){var i=e("../internals/a-callable"),s=e("../internals/is-null-or-undefined");n.exports=function(o,l){var c=o[l];return s(c)?void 0:i(c)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(e,n,a){(function(i){(function(){var s=function(o){return o&&o.Math===Math&&o};n.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof i=="object"&&i)||(function(){return this})()||this||Function("return this")()}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/to-object"),o=i({}.hasOwnProperty);n.exports=Object.hasOwn||function(l,c){return o(s(l),c)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(e,n,a){n.exports={}},{}],277:[function(e,n,a){n.exports=function(i,s){try{arguments.length===1?console.error(i):console.error(i,s)}catch{}}},{}],278:[function(e,n,a){var i=e("../internals/get-built-in");n.exports=i("document","documentElement")},{"../internals/get-built-in":269}],279:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/fails"),o=e("../internals/document-create-element");n.exports=!i&&!s((function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!==7}))},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/fails"),o=e("../internals/classof-raw"),l=Object,c=i("".split);n.exports=s((function(){return!l("z").propertyIsEnumerable(0)}))?function(u){return o(u)==="String"?c(u,""):l(u)}:l},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/is-callable"),o=e("../internals/shared-store"),l=i(Function.toString);s(o.inspectSource)||(o.inspectSource=function(c){return l(c)}),n.exports=o.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(e,n,a){var i,s,o,l=e("../internals/weak-map-basic-detection"),c=e("../internals/global"),u=e("../internals/is-object"),f=e("../internals/create-non-enumerable-property"),h=e("../internals/has-own-property"),p=e("../internals/shared-store"),g=e("../internals/shared-key"),y=e("../internals/hidden-keys"),m=c.TypeError,v=c.WeakMap;if(l||p.state){var b=p.state||(p.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,i=function(S,_){if(b.has(S))throw new m("Object already initialized");return _.facade=S,b.set(S,_),_},s=function(S){return b.get(S)||{}},o=function(S){return b.has(S)}}else{var x=g("state");y[x]=!0,i=function(S,_){if(h(S,x))throw new m("Object already initialized");return _.facade=S,f(S,x,_),_},s=function(S){return h(S,x)?S[x]:{}},o=function(S){return h(S,x)}}n.exports={set:i,get:s,has:o,enforce:function(S){return o(S)?s(S):i(S,{})},getterFor:function(S){return function(_){var I;if(!u(_)||(I=s(_)).type!==S)throw new m("Incompatible receiver, "+S+" required");return I}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(e,n,a){var i=e("../internals/well-known-symbol"),s=e("../internals/iterators"),o=i("iterator"),l=Array.prototype;n.exports=function(c){return c!==void 0&&(s.Array===c||l[o]===c)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(e,n,a){var i=e("../internals/classof-raw");n.exports=Array.isArray||function(s){return i(s)==="Array"}},{"../internals/classof-raw":235}],285:[function(e,n,a){var i=e("../internals/document-all"),s=i.all;n.exports=i.IS_HTMLDDA?function(o){return typeof o=="function"||o===s}:function(o){return typeof o=="function"}},{"../internals/document-all":248}],286:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/fails"),o=e("../internals/is-callable"),l=e("../internals/classof"),c=e("../internals/get-built-in"),u=e("../internals/inspect-source"),f=function(){},h=[],p=c("Reflect","construct"),g=/^\s*(?:class|function)\b/,y=i(g.exec),m=!g.test(f),v=function(x){if(!o(x))return!1;try{return p(f,h,x),!0}catch{return!1}},b=function(x){if(!o(x))return!1;switch(l(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!y(g,u(x))}catch{return!0}};b.sham=!0,n.exports=!p||s((function(){var x;return v(v.call)||!v(Object)||!v((function(){x=!0}))||x}))?b:v},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(e,n,a){var i=e("../internals/fails"),s=e("../internals/is-callable"),o=/#|\.prototype\./,l=function(p,g){var y=u[c(p)];return y===h||y!==f&&(s(g)?i(g):!!g)},c=l.normalize=function(p){return String(p).replace(o,".").toLowerCase()},u=l.data={},f=l.NATIVE="N",h=l.POLYFILL="P";n.exports=l},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(e,n,a){n.exports=function(i){return i==null}},{}],289:[function(e,n,a){var i=e("../internals/is-callable"),s=e("../internals/document-all"),o=s.all;n.exports=s.IS_HTMLDDA?function(l){return typeof l=="object"?l!==null:i(l)||l===o}:function(l){return typeof l=="object"?l!==null:i(l)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(e,n,a){n.exports=!1},{}],291:[function(e,n,a){var i=e("../internals/is-object"),s=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");n.exports=function(l){var c;return i(l)&&((c=l[o])!==void 0?!!c:s(l)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(e,n,a){var i=e("../internals/get-built-in"),s=e("../internals/is-callable"),o=e("../internals/object-is-prototype-of"),l=e("../internals/use-symbol-as-uid"),c=Object;n.exports=l?function(u){return typeof u=="symbol"}:function(u){var f=i("Symbol");return s(f)&&o(f.prototype,c(u))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(e,n,a){var i=e("../internals/function-bind-context"),s=e("../internals/function-call"),o=e("../internals/an-object"),l=e("../internals/try-to-string"),c=e("../internals/is-array-iterator-method"),u=e("../internals/length-of-array-like"),f=e("../internals/object-is-prototype-of"),h=e("../internals/get-iterator"),p=e("../internals/get-iterator-method"),g=e("../internals/iterator-close"),y=TypeError,m=function(b,x){this.stopped=b,this.result=x},v=m.prototype;n.exports=function(b,x,S){var _,I,A,O,M,z,U,D=S&&S.that,T=!(!S||!S.AS_ENTRIES),R=!(!S||!S.IS_RECORD),C=!(!S||!S.IS_ITERATOR),N=!(!S||!S.INTERRUPTED),E=i(x,D),k=function(q){return _&&g(_,"normal",q),new m(!0,q)},P=function(q){return T?(o(q),N?E(q[0],q[1],k):E(q[0],q[1])):N?E(q,k):E(q)};if(R)_=b.iterator;else if(C)_=b;else{if(!(I=p(b)))throw new y(l(b)+" is not iterable");if(c(I)){for(A=0,O=u(b);O>A;A++)if((M=P(b[A]))&&f(v,M))return M;return new m(!1)}_=h(b,I)}for(z=R?b.next:_.next;!(U=s(z,_)).done;){try{M=P(U.value)}catch(q){g(_,"throw",q)}if(typeof M=="object"&&M&&f(v,M))return M}return new m(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(e,n,a){var i=e("../internals/function-call"),s=e("../internals/an-object"),o=e("../internals/get-method");n.exports=function(l,c,u){var f,h;s(l);try{if(!(f=o(l,"return"))){if(c==="throw")throw u;return u}f=i(f,l)}catch(p){h=!0,f=p}if(c==="throw")throw u;if(h)throw f;return s(f),u}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(e,n,a){var i=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),l=e("../internals/set-to-string-tag"),c=e("../internals/iterators"),u=function(){return this};n.exports=function(f,h,p,g){var y=h+" Iterator";return f.prototype=s(i,{next:o(+!g,p)}),l(f,y,!1,!0),c[y]=u,f}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/is-pure"),l=e("../internals/function-name"),c=e("../internals/is-callable"),u=e("../internals/iterator-create-constructor"),f=e("../internals/object-get-prototype-of"),h=e("../internals/object-set-prototype-of"),p=e("../internals/set-to-string-tag"),g=e("../internals/create-non-enumerable-property"),y=e("../internals/define-built-in"),m=e("../internals/well-known-symbol"),v=e("../internals/iterators"),b=e("../internals/iterators-core"),x=l.PROPER,S=l.CONFIGURABLE,_=b.IteratorPrototype,I=b.BUGGY_SAFARI_ITERATORS,A=m("iterator"),O=function(){return this};n.exports=function(M,z,U,D,T,R,C){u(U,z,D);var N,E,k,P=function(V){if(V===T&&Y)return Y;if(!I&&V&&V in L)return L[V];switch(V){case"keys":case"values":case"entries":return function(){return new U(this,V)}}return function(){return new U(this)}},q=z+" Iterator",H=!1,L=M.prototype,K=L[A]||L["@@iterator"]||T&&L[T],Y=!I&&K||P(T),Z=z==="Array"&&L.entries||K;if(Z&&(N=f(Z.call(new M)))!==Object.prototype&&N.next&&(o||f(N)===_||(h?h(N,_):c(N[A])||y(N,A,O)),p(N,q,!0,!0),o&&(v[q]=O)),x&&T==="values"&&K&&K.name!=="values"&&(!o&&S?g(L,"name","values"):(H=!0,Y=function(){return s(K,this)})),T)if(E={values:P("values"),keys:R?Y:P("keys"),entries:P("entries")},C)for(k in E)(I||H||!(k in L))&&y(L,k,E[k]);else i({target:z,proto:!0,forced:I||H},E);return o&&!C||L[A]===Y||y(L,A,Y,{name:T}),v[z]=Y,E}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(e,n,a){var i,s,o,l=e("../internals/fails"),c=e("../internals/is-callable"),u=e("../internals/is-object"),f=e("../internals/object-create"),h=e("../internals/object-get-prototype-of"),p=e("../internals/define-built-in"),g=e("../internals/well-known-symbol"),y=e("../internals/is-pure"),m=g("iterator"),v=!1;[].keys&&("next"in(o=[].keys())?(s=h(h(o)))!==Object.prototype&&(i=s):v=!0),!u(i)||l((function(){var b={};return i[m].call(b)!==b}))?i={}:y&&(i=f(i)),c(i[m])||p(i,m,(function(){return this})),n.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:v}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(e,n,a){arguments[4][276][0].apply(a,arguments)},{dup:276}],299:[function(e,n,a){var i=e("../internals/to-length");n.exports=function(s){return i(s.length)}},{"../internals/to-length":343}],300:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/fails"),o=e("../internals/is-callable"),l=e("../internals/has-own-property"),c=e("../internals/descriptors"),u=e("../internals/function-name").CONFIGURABLE,f=e("../internals/inspect-source"),h=e("../internals/internal-state"),p=h.enforce,g=h.get,y=String,m=Object.defineProperty,v=i("".slice),b=i("".replace),x=i([].join),S=c&&!s((function(){return m((function(){}),"length",{value:8}).length!==8})),_=String(String).split("String"),I=n.exports=function(A,O,M){v(y(O),0,7)==="Symbol("&&(O="["+b(y(O),/^Symbol\(([^)]*)\)/,"$1")+"]"),M&&M.getter&&(O="get "+O),M&&M.setter&&(O="set "+O),(!l(A,"name")||u&&A.name!==O)&&(c?m(A,"name",{value:O,configurable:!0}):A.name=O),S&&M&&l(M,"arity")&&A.length!==M.arity&&m(A,"length",{value:M.arity});try{M&&l(M,"constructor")&&M.constructor?c&&m(A,"prototype",{writable:!1}):A.prototype&&(A.prototype=void 0)}catch{}var z=p(A);return l(z,"source")||(z.source=x(_,typeof O=="string"?O:"")),A};Function.prototype.toString=I((function(){return o(this)&&g(this).source||f(this)}),"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(e,n,a){var i=Math.ceil,s=Math.floor;n.exports=Math.trunc||function(o){var l=+o;return(l>0?s:i)(l)}},{}],302:[function(e,n,a){var i,s,o,l,c,u=e("../internals/global"),f=e("../internals/function-bind-context"),h=e("../internals/object-get-own-property-descriptor").f,p=e("../internals/task").set,g=e("../internals/queue"),y=e("../internals/engine-is-ios"),m=e("../internals/engine-is-ios-pebble"),v=e("../internals/engine-is-webos-webkit"),b=e("../internals/engine-is-node"),x=u.MutationObserver||u.WebKitMutationObserver,S=u.document,_=u.process,I=u.Promise,A=h(u,"queueMicrotask"),O=A&&A.value;if(!O){var M=new g,z=function(){var U,D;for(b&&(U=_.domain)&&U.exit();D=M.get();)try{D()}catch(T){throw M.head&&i(),T}U&&U.enter()};y||b||v||!x||!S?!m&&I&&I.resolve?((l=I.resolve(void 0)).constructor=I,c=f(l.then,l),i=function(){c(z)}):b?i=function(){_.nextTick(z)}:(p=f(p,u),i=function(){p(z)}):(s=!0,o=S.createTextNode(""),new x(z).observe(o,{characterData:!0}),i=function(){o.data=s=!s}),O=function(U){M.head||i(),M.add(U)}}n.exports=O},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(e,n,a){var i=e("../internals/a-callable"),s=TypeError,o=function(l){var c,u;this.promise=new l((function(f,h){if(c!==void 0||u!==void 0)throw new s("Bad Promise constructor");c=f,u=h})),this.resolve=i(c),this.reject=i(u)};n.exports.f=function(l){return new o(l)}},{"../internals/a-callable":222}],304:[function(e,n,a){var i=e("../internals/is-regexp"),s=TypeError;n.exports=function(o){if(i(o))throw new s("The method doesn't accept regular expressions");return o}},{"../internals/is-regexp":291}],305:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/function-uncurry-this"),o=e("../internals/function-call"),l=e("../internals/fails"),c=e("../internals/object-keys"),u=e("../internals/object-get-own-property-symbols"),f=e("../internals/object-property-is-enumerable"),h=e("../internals/to-object"),p=e("../internals/indexed-object"),g=Object.assign,y=Object.defineProperty,m=s([].concat);n.exports=!g||l((function(){if(i&&g({b:1},g(y({},"a",{enumerable:!0,get:function(){y(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var v={},b={},x=Symbol("assign detection");return v[x]=7,"abcdefghijklmnopqrst".split("").forEach((function(S){b[S]=S})),g({},v)[x]!==7||c(g({},b)).join("")!=="abcdefghijklmnopqrst"}))?function(v,b){for(var x=h(v),S=arguments.length,_=1,I=u.f,A=f.f;S>_;)for(var O,M=p(arguments[_++]),z=I?m(c(M),I(M)):c(M),U=z.length,D=0;U>D;)O=z[D++],i&&!o(A,M,O)||(x[O]=M[O]);return x}:g},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(e,n,a){var i,s=e("../internals/an-object"),o=e("../internals/object-define-properties"),l=e("../internals/enum-bug-keys"),c=e("../internals/hidden-keys"),u=e("../internals/html"),f=e("../internals/document-create-element"),h=e("../internals/shared-key"),p=h("IE_PROTO"),g=function(){},y=function(b){return"<script>"+b+"<\/script>"},m=function(b){b.write(y("")),b.close();var x=b.parentWindow.Object;return b=null,x},v=function(){try{i=new ActiveXObject("htmlfile")}catch{}var b,x;v=typeof document<"u"?document.domain&&i?m(i):((x=f("iframe")).style.display="none",u.appendChild(x),x.src="javascript:",(b=x.contentWindow.document).open(),b.write(y("document.F=Object")),b.close(),b.F):m(i);for(var S=l.length;S--;)delete v.prototype[l[S]];return v()};c[p]=!0,n.exports=Object.create||function(b,x){var S;return b!==null?(g.prototype=s(b),S=new g,g.prototype=null,S[p]=b):S=v(),x===void 0?S:o.f(S,x)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/v8-prototype-define-bug"),o=e("../internals/object-define-property"),l=e("../internals/an-object"),c=e("../internals/to-indexed-object"),u=e("../internals/object-keys");a.f=i&&!s?Object.defineProperties:function(f,h){l(f);for(var p,g=c(h),y=u(h),m=y.length,v=0;m>v;)o.f(f,p=y[v++],g[p]);return f}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/ie8-dom-define"),o=e("../internals/v8-prototype-define-bug"),l=e("../internals/an-object"),c=e("../internals/to-property-key"),u=TypeError,f=Object.defineProperty,h=Object.getOwnPropertyDescriptor;a.f=i?o?function(p,g,y){if(l(p),g=c(g),l(y),typeof p=="function"&&g==="prototype"&&"value"in y&&"writable"in y&&!y.writable){var m=h(p,g);m&&m.writable&&(p[g]=y.value,y={configurable:"configurable"in y?y.configurable:m.configurable,enumerable:"enumerable"in y?y.enumerable:m.enumerable,writable:!1})}return f(p,g,y)}:f:function(p,g,y){if(l(p),g=c(g),l(y),s)try{return f(p,g,y)}catch{}if("get"in y||"set"in y)throw new u("Accessors not supported");return"value"in y&&(p[g]=y.value),p}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/function-call"),o=e("../internals/object-property-is-enumerable"),l=e("../internals/create-property-descriptor"),c=e("../internals/to-indexed-object"),u=e("../internals/to-property-key"),f=e("../internals/has-own-property"),h=e("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;a.f=i?p:function(g,y){if(g=c(g),y=u(y),h)try{return p(g,y)}catch{}if(f(g,y))return l(!s(o.f,g,y),g[y])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(e,n,a){var i=e("../internals/classof-raw"),s=e("../internals/to-indexed-object"),o=e("../internals/object-get-own-property-names").f,l=e("../internals/array-slice-simple"),c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(u){return c&&i(u)==="Window"?(function(f){try{return o(f)}catch{return l(c)}})(u):o(s(u))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(e,n,a){var i=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys").concat("length","prototype");a.f=Object.getOwnPropertyNames||function(o){return i(o,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(e,n,a){a.f=Object.getOwnPropertySymbols},{}],313:[function(e,n,a){var i=e("../internals/has-own-property"),s=e("../internals/is-callable"),o=e("../internals/to-object"),l=e("../internals/shared-key"),c=e("../internals/correct-prototype-getter"),u=l("IE_PROTO"),f=Object,h=f.prototype;n.exports=c?f.getPrototypeOf:function(p){var g=o(p);if(i(g,u))return g[u];var y=g.constructor;return s(y)&&g instanceof y?y.prototype:g instanceof f?h:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(e,n,a){var i=e("../internals/function-uncurry-this");n.exports=i({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=e("../internals/has-own-property"),o=e("../internals/to-indexed-object"),l=e("../internals/array-includes").indexOf,c=e("../internals/hidden-keys"),u=i([].push);n.exports=function(f,h){var p,g=o(f),y=0,m=[];for(p in g)!s(c,p)&&s(g,p)&&u(m,p);for(;h.length>y;)s(g,p=h[y++])&&(~l(m,p)||u(m,p));return m}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(e,n,a){var i=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys");n.exports=Object.keys||function(o){return i(o,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(e,n,a){var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!i.call({1:2},1);a.f=o?function(l){var c=s(this,l);return!!c&&c.enumerable}:i},{}],318:[function(e,n,a){var i=e("../internals/function-uncurry-this-accessor"),s=e("../internals/an-object"),o=e("../internals/a-possible-prototype");n.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var l,c=!1,u={};try{(l=i(Object.prototype,"__proto__","set"))(u,[]),c=u instanceof Array}catch{}return function(f,h){return s(f),o(h),c?l(f,h):f.__proto__=h,f}})():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/fails"),o=e("../internals/function-uncurry-this"),l=e("../internals/object-get-prototype-of"),c=e("../internals/object-keys"),u=e("../internals/to-indexed-object"),f=o(e("../internals/object-property-is-enumerable").f),h=o([].push),p=i&&s((function(){var y=Object.create(null);return y[2]=2,!f(y,2)})),g=function(y){return function(m){for(var v,b=u(m),x=c(b),S=p&&l(b)===null,_=x.length,I=0,A=[];_>I;)v=x[I++],i&&!(S?v in b:f(b,v))||h(A,y?[v,b[v]]:b[v]);return A}};n.exports={entries:g(!0),values:g(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(e,n,a){var i=e("../internals/function-call"),s=e("../internals/is-callable"),o=e("../internals/is-object"),l=TypeError;n.exports=function(c,u){var f,h;if(u==="string"&&s(f=c.toString)&&!o(h=i(f,c))||s(f=c.valueOf)&&!o(h=i(f,c))||u!=="string"&&s(f=c.toString)&&!o(h=i(f,c)))return h;throw new l("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(e,n,a){var i=e("../internals/get-built-in"),s=e("../internals/function-uncurry-this"),o=e("../internals/object-get-own-property-names"),l=e("../internals/object-get-own-property-symbols"),c=e("../internals/an-object"),u=s([].concat);n.exports=i("Reflect","ownKeys")||function(f){var h=o.f(c(f)),p=l.f;return p?u(h,p(f)):h}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(e,n,a){var i=e("../internals/global");n.exports=i},{"../internals/global":274}],323:[function(e,n,a){n.exports=function(i){try{return{error:!1,value:i()}}catch(s){return{error:!0,value:s}}}},{}],324:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/promise-native-constructor"),o=e("../internals/is-callable"),l=e("../internals/is-forced"),c=e("../internals/inspect-source"),u=e("../internals/well-known-symbol"),f=e("../internals/engine-is-browser"),h=e("../internals/engine-is-deno"),p=e("../internals/is-pure"),g=e("../internals/engine-v8-version"),y=s&&s.prototype,m=u("species"),v=!1,b=o(i.PromiseRejectionEvent),x=l("Promise",(function(){var S=c(s),_=S!==String(s);if(!_&&g===66||p&&(!y.catch||!y.finally))return!0;if(!g||g<51||!/native code/.test(S)){var I=new s((function(O){O(1)})),A=function(O){O((function(){}),(function(){}))};if((I.constructor={})[m]=A,!(v=I.then((function(){}))instanceof A))return!0}return!_&&(f||h)&&!b}));n.exports={CONSTRUCTOR:x,REJECTION_EVENT:b,SUBCLASSING:v}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(e,n,a){var i=e("../internals/global");n.exports=i.Promise},{"../internals/global":274}],326:[function(e,n,a){var i=e("../internals/an-object"),s=e("../internals/is-object"),o=e("../internals/new-promise-capability");n.exports=function(l,c){if(i(l),s(c)&&c.constructor===l)return c;var u=o.f(l);return(0,u.resolve)(c),u.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(e,n,a){var i=e("../internals/promise-native-constructor"),s=e("../internals/check-correctness-of-iteration"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR;n.exports=o||!s((function(l){i.all(l).then(void 0,(function(){}))}))},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(e,n,a){var i=function(){this.head=null,this.tail=null};i.prototype={add:function(s){var o={item:s,next:null},l=this.tail;l?l.next=o:this.head=o,this.tail=o},get:function(){var s=this.head;if(s)return(this.head=s.next)===null&&(this.tail=null),s.item}},n.exports=i},{}],329:[function(e,n,a){var i=e("../internals/is-null-or-undefined"),s=TypeError;n.exports=function(o){if(i(o))throw new s("Can't call method on "+o);return o}},{"../internals/is-null-or-undefined":288}],330:[function(e,n,a){var i=e("../internals/get-built-in"),s=e("../internals/define-built-in-accessor"),o=e("../internals/well-known-symbol"),l=e("../internals/descriptors"),c=o("species");n.exports=function(u){var f=i(u);l&&f&&!f[c]&&s(f,c,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(e,n,a){var i=e("../internals/object-define-property").f,s=e("../internals/has-own-property"),o=e("../internals/well-known-symbol")("toStringTag");n.exports=function(l,c,u){l&&!u&&(l=l.prototype),l&&!s(l,o)&&i(l,o,{configurable:!0,value:c})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(e,n,a){var i=e("../internals/shared"),s=e("../internals/uid"),o=i("keys");n.exports=function(l){return o[l]||(o[l]=s(l))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/define-global-property"),o=i["__core-js_shared__"]||s("__core-js_shared__",{});n.exports=o},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(e,n,a){var i=e("../internals/is-pure"),s=e("../internals/shared-store");(n.exports=function(o,l){return s[o]||(s[o]=l!==void 0?l:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(e,n,a){var i=e("../internals/an-object"),s=e("../internals/a-constructor"),o=e("../internals/is-null-or-undefined"),l=e("../internals/well-known-symbol")("species");n.exports=function(c,u){var f,h=i(c).constructor;return h===void 0||o(f=i(h)[l])?u:s(f)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(e,n,a){var i=e("../internals/engine-v8-version"),s=e("../internals/fails"),o=e("../internals/global").String;n.exports=!!Object.getOwnPropertySymbols&&!s((function(){var l=Symbol("symbol detection");return!o(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(e,n,a){var i=e("../internals/function-call"),s=e("../internals/get-built-in"),o=e("../internals/well-known-symbol"),l=e("../internals/define-built-in");n.exports=function(){var c=s("Symbol"),u=c&&c.prototype,f=u&&u.valueOf,h=o("toPrimitive");u&&!u[h]&&l(u,h,(function(p){return i(f,this)}),{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(e,n,a){var i=e("../internals/symbol-constructor-detection");n.exports=i&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(e,n,a){var i,s,o,l,c=e("../internals/global"),u=e("../internals/function-apply"),f=e("../internals/function-bind-context"),h=e("../internals/is-callable"),p=e("../internals/has-own-property"),g=e("../internals/fails"),y=e("../internals/html"),m=e("../internals/array-slice"),v=e("../internals/document-create-element"),b=e("../internals/validate-arguments-length"),x=e("../internals/engine-is-ios"),S=e("../internals/engine-is-node"),_=c.setImmediate,I=c.clearImmediate,A=c.process,O=c.Dispatch,M=c.Function,z=c.MessageChannel,U=c.String,D=0,T={};g((function(){i=c.location}));var R=function(k){if(p(T,k)){var P=T[k];delete T[k],P()}},C=function(k){return function(){R(k)}},N=function(k){R(k.data)},E=function(k){c.postMessage(U(k),i.protocol+"//"+i.host)};_&&I||(_=function(k){b(arguments.length,1);var P=h(k)?k:M(k),q=m(arguments,1);return T[++D]=function(){u(P,void 0,q)},s(D),D},I=function(k){delete T[k]},S?s=function(k){A.nextTick(C(k))}:O&&O.now?s=function(k){O.now(C(k))}:z&&!x?(l=(o=new z).port2,o.port1.onmessage=N,s=f(l.postMessage,l)):c.addEventListener&&h(c.postMessage)&&!c.importScripts&&i&&i.protocol!=="file:"&&!g(E)?(s=E,c.addEventListener("message",N,!1)):s="onreadystatechange"in v("script")?function(k){y.appendChild(v("script")).onreadystatechange=function(){y.removeChild(this),R(k)}}:function(k){setTimeout(C(k),0)}),n.exports={set:_,clear:I}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(e,n,a){var i=e("../internals/to-integer-or-infinity"),s=Math.max,o=Math.min;n.exports=function(l,c){var u=i(l);return u<0?s(u+c,0):o(u,c)}},{"../internals/to-integer-or-infinity":342}],341:[function(e,n,a){var i=e("../internals/indexed-object"),s=e("../internals/require-object-coercible");n.exports=function(o){return i(s(o))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(e,n,a){var i=e("../internals/math-trunc");n.exports=function(s){var o=+s;return o!=o||o===0?0:i(o)}},{"../internals/math-trunc":301}],343:[function(e,n,a){var i=e("../internals/to-integer-or-infinity"),s=Math.min;n.exports=function(o){return o>0?s(i(o),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(e,n,a){var i=e("../internals/require-object-coercible"),s=Object;n.exports=function(o){return s(i(o))}},{"../internals/require-object-coercible":329}],345:[function(e,n,a){var i=e("../internals/function-call"),s=e("../internals/is-object"),o=e("../internals/is-symbol"),l=e("../internals/get-method"),c=e("../internals/ordinary-to-primitive"),u=e("../internals/well-known-symbol"),f=TypeError,h=u("toPrimitive");n.exports=function(p,g){if(!s(p)||o(p))return p;var y,m=l(p,h);if(m){if(g===void 0&&(g="default"),y=i(m,p,g),!s(y)||o(y))return y;throw new f("Can't convert object to primitive value")}return g===void 0&&(g="number"),c(p,g)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(e,n,a){var i=e("../internals/to-primitive"),s=e("../internals/is-symbol");n.exports=function(o){var l=i(o,"string");return s(l)?l:l+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(e,n,a){var i={};i[e("../internals/well-known-symbol")("toStringTag")]="z",n.exports=String(i)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(e,n,a){var i=e("../internals/classof"),s=String;n.exports=function(o){if(i(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return s(o)}},{"../internals/classof":236}],349:[function(e,n,a){var i=String;n.exports=function(s){try{return i(s)}catch{return"Object"}}},{}],350:[function(e,n,a){var i=e("../internals/function-uncurry-this"),s=0,o=Math.random(),l=i(1 .toString);n.exports=function(c){return"Symbol("+(c===void 0?"":c)+")_"+l(++s+o,36)}},{"../internals/function-uncurry-this":268}],351:[function(e,n,a){var i=e("../internals/symbol-constructor-detection");n.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(e,n,a){var i=e("../internals/descriptors"),s=e("../internals/fails");n.exports=i&&s((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(e,n,a){var i=TypeError;n.exports=function(s,o){if(s<o)throw new i("Not enough arguments");return s}},{}],354:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/is-callable"),o=i.WeakMap;n.exports=s(o)&&/native code/.test(String(o))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(e,n,a){var i=e("../internals/path"),s=e("../internals/has-own-property"),o=e("../internals/well-known-symbol-wrapped"),l=e("../internals/object-define-property").f;n.exports=function(c){var u=i.Symbol||(i.Symbol={});s(u,c)||l(u,c,{value:o.f(c)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(e,n,a){var i=e("../internals/well-known-symbol");a.f=i},{"../internals/well-known-symbol":357}],357:[function(e,n,a){var i=e("../internals/global"),s=e("../internals/shared"),o=e("../internals/has-own-property"),l=e("../internals/uid"),c=e("../internals/symbol-constructor-detection"),u=e("../internals/use-symbol-as-uid"),f=i.Symbol,h=s("wks"),p=u?f.for||f:f&&f.withoutSetter||l;n.exports=function(g){return o(h,g)||(h[g]=c&&o(f,g)?f[g]:p("Symbol."+g)),h[g]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/array-iteration").findIndex,o=e("../internals/add-to-unscopables"),l=!0;"findIndex"in[]&&Array(1).findIndex((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{findIndex:function(c){return s(this,c,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/array-iteration").find,o=e("../internals/add-to-unscopables"),l=!0;"find"in[]&&Array(1).find((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{find:function(c){return s(this,c,arguments.length>1?arguments[1]:void 0)}}),o("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/array-includes").includes,o=e("../internals/fails"),l=e("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(c){return s(this,c,arguments.length>1?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(e,n,a){var i=e("../internals/to-indexed-object"),s=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),l=e("../internals/internal-state"),c=e("../internals/object-define-property").f,u=e("../internals/iterator-define"),f=e("../internals/create-iter-result-object"),h=e("../internals/is-pure"),p=e("../internals/descriptors"),g=l.set,y=l.getterFor("Array Iterator");n.exports=u(Array,"Array",(function(v,b){g(this,{type:"Array Iterator",target:i(v),index:0,kind:b})}),(function(){var v=y(this),b=v.target,x=v.kind,S=v.index++;if(!b||S>=b.length)return v.target=void 0,f(void 0,!0);switch(x){case"keys":return f(S,!1);case"values":return f(b[S],!1)}return f([S,b[S]],!1)}),"values");var m=o.Arguments=o.Array;if(s("keys"),s("values"),s("entries"),!h&&p&&m.name!=="values")try{c(m,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/get-built-in"),o=e("../internals/function-apply"),l=e("../internals/function-call"),c=e("../internals/function-uncurry-this"),u=e("../internals/fails"),f=e("../internals/is-callable"),h=e("../internals/is-symbol"),p=e("../internals/array-slice"),g=e("../internals/get-json-replacer-function"),y=e("../internals/symbol-constructor-detection"),m=String,v=s("JSON","stringify"),b=c(/./.exec),x=c("".charAt),S=c("".charCodeAt),_=c("".replace),I=c(1 .toString),A=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,M=/^[\uDC00-\uDFFF]$/,z=!y||u((function(){var R=s("Symbol")("stringify detection");return v([R])!=="[null]"||v({a:R})!=="{}"||v(Object(R))!=="{}"})),U=u((function(){return v("\uDF06\uD834")!=='"\\udf06\\ud834"'||v("\uDEAD")!=='"\\udead"'})),D=function(R,C){var N=p(arguments),E=g(C);if(f(E)||R!==void 0&&!h(R))return N[1]=function(k,P){if(f(E)&&(P=l(E,this,m(k),P)),!h(P))return P},o(v,null,N)},T=function(R,C,N){var E=x(N,C-1),k=x(N,C+1);return b(O,R)&&!b(M,k)||b(M,R)&&!b(O,E)?"\\u"+I(S(R,0),16):R};v&&i({target:"JSON",stat:!0,arity:3,forced:z||U},{stringify:function(R,C,N){var E=p(arguments),k=o(z?D:v,null,E);return U&&typeof k=="string"?_(k,A,T):k}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(e,n,a){e("../internals/export")({target:"Number",stat:!0},{isNaN:function(i){return i!=i}})},{"../internals/export":259}],364:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/object-assign");i({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/symbol-constructor-detection"),o=e("../internals/fails"),l=e("../internals/object-get-own-property-symbols"),c=e("../internals/to-object");i({target:"Object",stat:!0,forced:!s||o((function(){l.f(1)}))},{getOwnPropertySymbols:function(u){var f=l.f;return f?f(c(u)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/to-object"),o=e("../internals/object-keys");i({target:"Object",stat:!0,forced:e("../internals/fails")((function(){o(1)}))},{keys:function(l){return o(s(l))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/object-to-array").values;i({target:"Object",stat:!0},{values:function(o){return s(o)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/a-callable"),l=e("../internals/new-promise-capability"),c=e("../internals/perform"),u=e("../internals/iterate");i({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(f){var h=this,p=l.f(h),g=p.resolve,y=p.reject,m=c((function(){var v=o(h.resolve),b=[],x=0,S=1;u(f,(function(_){var I=x++,A=!1;S++,s(v,h,_).then((function(O){A||(A=!0,b[I]=O,--S||g(b))}),y)})),--S||g(b)}));return m.error&&y(m.value),p.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/is-pure"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR,l=e("../internals/promise-native-constructor"),c=e("../internals/get-built-in"),u=e("../internals/is-callable"),f=e("../internals/define-built-in"),h=l&&l.prototype;if(i({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(g){return this.then(void 0,g)}}),!s&&u(l)){var p=c("Promise").prototype.catch;h.catch!==p&&f(h,"catch",p,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(e,n,a){var i,s,o,l=e("../internals/export"),c=e("../internals/is-pure"),u=e("../internals/engine-is-node"),f=e("../internals/global"),h=e("../internals/function-call"),p=e("../internals/define-built-in"),g=e("../internals/object-set-prototype-of"),y=e("../internals/set-to-string-tag"),m=e("../internals/set-species"),v=e("../internals/a-callable"),b=e("../internals/is-callable"),x=e("../internals/is-object"),S=e("../internals/an-instance"),_=e("../internals/species-constructor"),I=e("../internals/task").set,A=e("../internals/microtask"),O=e("../internals/host-report-errors"),M=e("../internals/perform"),z=e("../internals/queue"),U=e("../internals/internal-state"),D=e("../internals/promise-native-constructor"),T=e("../internals/promise-constructor-detection"),R=e("../internals/new-promise-capability"),C=T.CONSTRUCTOR,N=T.REJECTION_EVENT,E=T.SUBCLASSING,k=U.getterFor("Promise"),P=U.set,q=D&&D.prototype,H=D,L=q,K=f.TypeError,Y=f.document,Z=f.process,V=R.f,ee=V,B=!!(Y&&Y.createEvent&&f.dispatchEvent),F=function(be){var Ie;return!(!x(be)||!b(Ie=be.then))&&Ie},X=function(be,Ie){var Oe,Me,Re,He=Ie.value,qe=Ie.state===1,ct=qe?be.ok:be.fail,ft=be.resolve,St=be.reject,Rt=be.domain;try{ct?(qe||(Ie.rejection===2&&oe(Ie),Ie.rejection=1),ct===!0?Oe=He:(Rt&&Rt.enter(),Oe=ct(He),Rt&&(Rt.exit(),Re=!0)),Oe===be.promise?St(new K("Promise-chain cycle")):(Me=F(Oe))?h(Me,Oe,ft,St):ft(Oe)):St(He)}catch(Ft){Rt&&!Re&&Rt.exit(),St(Ft)}},te=function(be,Ie){be.notified||(be.notified=!0,A((function(){for(var Oe,Me=be.reactions;Oe=Me.get();)X(Oe,be);be.notified=!1,Ie&&!be.rejection&&ce(be)})))},se=function(be,Ie,Oe){var Me,Re;B?((Me=Y.createEvent("Event")).promise=Ie,Me.reason=Oe,Me.initEvent(be,!1,!0),f.dispatchEvent(Me)):Me={promise:Ie,reason:Oe},!N&&(Re=f["on"+be])?Re(Me):be==="unhandledrejection"&&O("Unhandled promise rejection",Oe)},ce=function(be){h(I,f,(function(){var Ie,Oe=be.facade,Me=be.value;if(ue(be)&&(Ie=M((function(){u?Z.emit("unhandledRejection",Me,Oe):se("unhandledrejection",Oe,Me)})),be.rejection=u||ue(be)?2:1,Ie.error))throw Ie.value}))},ue=function(be){return be.rejection!==1&&!be.parent},oe=function(be){h(I,f,(function(){var Ie=be.facade;u?Z.emit("rejectionHandled",Ie):se("rejectionhandled",Ie,be.value)}))},le=function(be,Ie,Oe){return function(Me){be(Ie,Me,Oe)}},pe=function(be,Ie,Oe){be.done||(be.done=!0,Oe&&(be=Oe),be.value=Ie,be.state=2,te(be,!0))},ye=function(be,Ie,Oe){if(!be.done){be.done=!0,Oe&&(be=Oe);try{if(be.facade===Ie)throw new K("Promise can't be resolved itself");var Me=F(Ie);Me?A((function(){var Re={done:!1};try{h(Me,Ie,le(ye,Re,be),le(pe,Re,be))}catch(He){pe(Re,He,be)}})):(be.value=Ie,be.state=1,te(be,!1))}catch(Re){pe({done:!1},Re,be)}}};if(C&&(L=(H=function(be){S(this,L),v(be),h(i,this);var Ie=k(this);try{be(le(ye,Ie),le(pe,Ie))}catch(Oe){pe(Ie,Oe)}}).prototype,(i=function(be){P(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new z,rejection:!1,state:0,value:void 0})}).prototype=p(L,"then",(function(be,Ie){var Oe=k(this),Me=V(_(this,H));return Oe.parent=!0,Me.ok=!b(be)||be,Me.fail=b(Ie)&&Ie,Me.domain=u?Z.domain:void 0,Oe.state===0?Oe.reactions.add(Me):A((function(){X(Me,Oe)})),Me.promise})),s=function(){var be=new i,Ie=k(be);this.promise=be,this.resolve=le(ye,Ie),this.reject=le(pe,Ie)},R.f=V=function(be){return be===H||be===void 0?new s(be):ee(be)},!c&&b(D)&&q!==Object.prototype)){o=q.then,E||p(q,"then",(function(be,Ie){var Oe=this;return new H((function(Me,Re){h(o,Oe,Me,Re)})).then(be,Ie)}),{unsafe:!0});try{delete q.constructor}catch{}g&&g(q,L)}l({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:H}),y(H,"Promise",!1,!0),m("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/is-pure"),o=e("../internals/promise-native-constructor"),l=e("../internals/fails"),c=e("../internals/get-built-in"),u=e("../internals/is-callable"),f=e("../internals/species-constructor"),h=e("../internals/promise-resolve"),p=e("../internals/define-built-in"),g=o&&o.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!o&&l((function(){g.finally.call({then:function(){}},(function(){}))}))},{finally:function(m){var v=f(this,c("Promise")),b=u(m);return this.then(b?function(x){return h(v,m()).then((function(){return x}))}:m,b?function(x){return h(v,m()).then((function(){throw x}))}:m)}}),!s&&u(o)){var y=c("Promise").prototype.finally;g.finally!==y&&p(g,"finally",y,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(e,n,a){e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/a-callable"),l=e("../internals/new-promise-capability"),c=e("../internals/perform"),u=e("../internals/iterate");i({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(f){var h=this,p=l.f(h),g=p.reject,y=c((function(){var m=o(h.resolve);u(f,(function(v){s(m,h,v).then(p.resolve,g)}))}));return y.error&&g(y.value),p.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/new-promise-capability");i({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(l){var c=o.f(this);return s(c.reject,void 0,l),c.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/get-built-in"),o=e("../internals/is-pure"),l=e("../internals/promise-native-constructor"),c=e("../internals/promise-constructor-detection").CONSTRUCTOR,u=e("../internals/promise-resolve"),f=s("Promise"),h=o&&!c;i({target:"Promise",stat:!0,forced:o||c},{resolve:function(p){return u(h&&this===f?l:this,p)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/function-uncurry-this"),o=e("../internals/to-absolute-index"),l=RangeError,c=String.fromCharCode,u=String.fromCodePoint,f=s([].join);i({target:"String",stat:!0,arity:1,forced:!!u&&u.length!==1},{fromCodePoint:function(h){for(var p,g=[],y=arguments.length,m=0;y>m;){if(p=+arguments[m++],o(p,1114111)!==p)throw new l(p+" is not a valid code point");g[m]=p<65536?c(p):c(55296+((p-=65536)>>10),p%1024+56320)}return f(g,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/function-uncurry-this"),o=e("../internals/not-a-regexp"),l=e("../internals/require-object-coercible"),c=e("../internals/to-string"),u=e("../internals/correct-is-regexp-logic"),f=s("".indexOf);i({target:"String",proto:!0,forced:!u("includes")},{includes:function(h){return!!~f(c(l(this)),c(o(h)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(e,n,a){e("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/global"),o=e("../internals/function-call"),l=e("../internals/function-uncurry-this"),c=e("../internals/is-pure"),u=e("../internals/descriptors"),f=e("../internals/symbol-constructor-detection"),h=e("../internals/fails"),p=e("../internals/has-own-property"),g=e("../internals/object-is-prototype-of"),y=e("../internals/an-object"),m=e("../internals/to-indexed-object"),v=e("../internals/to-property-key"),b=e("../internals/to-string"),x=e("../internals/create-property-descriptor"),S=e("../internals/object-create"),_=e("../internals/object-keys"),I=e("../internals/object-get-own-property-names"),A=e("../internals/object-get-own-property-names-external"),O=e("../internals/object-get-own-property-symbols"),M=e("../internals/object-get-own-property-descriptor"),z=e("../internals/object-define-property"),U=e("../internals/object-define-properties"),D=e("../internals/object-property-is-enumerable"),T=e("../internals/define-built-in"),R=e("../internals/define-built-in-accessor"),C=e("../internals/shared"),N=e("../internals/shared-key"),E=e("../internals/hidden-keys"),k=e("../internals/uid"),P=e("../internals/well-known-symbol"),q=e("../internals/well-known-symbol-wrapped"),H=e("../internals/well-known-symbol-define"),L=e("../internals/symbol-define-to-primitive"),K=e("../internals/set-to-string-tag"),Y=e("../internals/internal-state"),Z=e("../internals/array-iteration").forEach,V=N("hidden"),ee=Y.set,B=Y.getterFor("Symbol"),F=Object.prototype,X=s.Symbol,te=X&&X.prototype,se=s.RangeError,ce=s.TypeError,ue=s.QObject,oe=M.f,le=z.f,pe=A.f,ye=D.f,be=l([].push),Ie=C("symbols"),Oe=C("op-symbols"),Me=C("wks"),Re=!ue||!ue.prototype||!ue.prototype.findChild,He=function(Pt,Ee,We){var ut=oe(F,Ee);ut&&delete F[Ee],le(Pt,Ee,We),ut&&Pt!==F&&le(F,Ee,ut)},qe=u&&h((function(){return S(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a!==7}))?He:le,ct=function(Pt,Ee){var We=Ie[Pt]=S(te);return ee(We,{type:"Symbol",tag:Pt,description:Ee}),u||(We.description=Ee),We},ft=function(Pt,Ee,We){Pt===F&&ft(Oe,Ee,We),y(Pt);var ut=v(Ee);return y(We),p(Ie,ut)?(We.enumerable?(p(Pt,V)&&Pt[V][ut]&&(Pt[V][ut]=!1),We=S(We,{enumerable:x(0,!1)})):(p(Pt,V)||le(Pt,V,x(1,{})),Pt[V][ut]=!0),qe(Pt,ut,We)):le(Pt,ut,We)},St=function(Pt,Ee){y(Pt);var We=m(Ee),ut=_(We).concat(Kt(We));return Z(ut,(function(wt){u&&!o(Rt,We,wt)||ft(Pt,wt,We[wt])})),Pt},Rt=function(Pt){var Ee=v(Pt),We=o(ye,this,Ee);return!(this===F&&p(Ie,Ee)&&!p(Oe,Ee))&&(!(We||!p(this,Ee)||!p(Ie,Ee)||p(this,V)&&this[V][Ee])||We)},Ft=function(Pt,Ee){var We=m(Pt),ut=v(Ee);if(We!==F||!p(Ie,ut)||p(Oe,ut)){var wt=oe(We,ut);return!wt||!p(Ie,ut)||p(We,V)&&We[V][ut]||(wt.enumerable=!0),wt}},ot=function(Pt){var Ee=pe(m(Pt)),We=[];return Z(Ee,(function(ut){p(Ie,ut)||p(E,ut)||be(We,ut)})),We},Kt=function(Pt){var Ee=Pt===F,We=pe(Ee?Oe:m(Pt)),ut=[];return Z(We,(function(wt){!p(Ie,wt)||Ee&&!p(F,wt)||be(ut,Ie[wt])})),ut};f||(T(te=(X=function(){if(g(te,this))throw new ce("Symbol is not a constructor");var Pt=arguments.length&&arguments[0]!==void 0?b(arguments[0]):void 0,Ee=k(Pt),We=function(ut){this===F&&o(We,Oe,ut),p(this,V)&&p(this[V],Ee)&&(this[V][Ee]=!1);var wt=x(1,ut);try{qe(this,Ee,wt)}catch(Bt){if(!(Bt instanceof se))throw Bt;He(this,Ee,wt)}};return u&&Re&&qe(F,Ee,{configurable:!0,set:We}),ct(Ee,Pt)}).prototype,"toString",(function(){return B(this).tag})),T(X,"withoutSetter",(function(Pt){return ct(k(Pt),Pt)})),D.f=Rt,z.f=ft,U.f=St,M.f=Ft,I.f=A.f=ot,O.f=Kt,q.f=function(Pt){return ct(P(Pt),Pt)},u&&(R(te,"description",{configurable:!0,get:function(){return B(this).description}}),c||T(F,"propertyIsEnumerable",Rt,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:X}),Z(_(Me),(function(Pt){H(Pt)})),i({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){Re=!0},useSimple:function(){Re=!1}}),i({target:"Object",stat:!0,forced:!f,sham:!u},{create:function(Pt,Ee){return Ee===void 0?S(Pt):St(S(Pt),Ee)},defineProperty:ft,defineProperties:St,getOwnPropertyDescriptor:Ft}),i({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ot}),L(),K(X,"Symbol"),E[V]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/get-built-in"),o=e("../internals/has-own-property"),l=e("../internals/to-string"),c=e("../internals/shared"),u=e("../internals/symbol-registry-detection"),f=c("string-to-symbol-registry"),h=c("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{for:function(p){var g=l(p);if(o(f,g))return f[g];var y=s("Symbol")(g);return f[g]=y,h[y]=g,y}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(e,n,a){e("../modules/es.symbol.constructor"),e("../modules/es.symbol.for"),e("../modules/es.symbol.key-for"),e("../modules/es.json.stringify"),e("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(e,n,a){var i=e("../internals/export"),s=e("../internals/has-own-property"),o=e("../internals/is-symbol"),l=e("../internals/try-to-string"),c=e("../internals/shared"),u=e("../internals/symbol-registry-detection"),f=c("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{keyFor:function(h){if(!o(h))throw new TypeError(l(h)+" is not a symbol");if(s(f,h))return f[h]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(e,n,a){function i(s){return Object.prototype.toString.call(s)}a.isArray=function(s){return Array.isArray?Array.isArray(s):i(s)==="[object Array]"},a.isBoolean=function(s){return typeof s=="boolean"},a.isNull=function(s){return s===null},a.isNullOrUndefined=function(s){return s==null},a.isNumber=function(s){return typeof s=="number"},a.isString=function(s){return typeof s=="string"},a.isSymbol=function(s){return typeof s=="symbol"},a.isUndefined=function(s){return s===void 0},a.isRegExp=function(s){return i(s)==="[object RegExp]"},a.isObject=function(s){return typeof s=="object"&&s!==null},a.isDate=function(s){return i(s)==="[object Date]"},a.isError=function(s){return i(s)==="[object Error]"||s instanceof Error},a.isFunction=function(s){return typeof s=="function"},a.isPrimitive=function(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||s===void 0},a.isBuffer=e("buffer").Buffer.isBuffer},{buffer:220}],384:[function(e,n,a){(function(i){(function(){var s=e("elliptic"),o=e("bn.js");n.exports=function(f){return new c(f)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function c(f){this.curveType=l[f],this.curveType||(this.curveType={name:f}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}function u(f,h,p){Array.isArray(f)||(f=f.toArray());var g=new i(f);if(p&&g.length<p){var y=new i(p-g.length);y.fill(0),g=i.concat([y,g])}return h?g.toString(h):g}l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,c.prototype.generateKeys=function(f,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(f,h)},c.prototype.computeSecret=function(f,h,p){return h=h||"utf8",i.isBuffer(f)||(f=new i(f,h)),u(this.curve.keyFromPublic(f).getPublic().mul(this.keys.getPrivate()).getX(),p,this.curveType.byteLength)},c.prototype.getPublicKey=function(f,h){var p=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(p[p.length-1]%2?p[0]=7:p[0]=6),u(p,f)},c.prototype.getPrivateKey=function(f){return u(this.keys.getPrivate(),f)},c.prototype.setPublicKey=function(f,h){return h=h||"utf8",i.isBuffer(f)||(f=new i(f,h)),this.keys._importPublic(f),this},c.prototype.setPrivateKey=function(f,h){h=h||"utf8",i.isBuffer(f)||(f=new i(f,h));var p=new o(f);return p=p.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(p),this}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(e,n,a){arguments[4][184][0].apply(a,arguments)},{buffer:188,dup:184}],386:[function(e,n,a){var i=e("inherits"),s=e("md5.js"),o=e("ripemd160"),l=e("sha.js"),c=e("cipher-base");function u(f){c.call(this,"digest"),this._hash=f}i(u,c),u.prototype._update=function(f){this._hash.update(f)},u.prototype._final=function(){return this._hash.digest()},n.exports=function(f){return(f=f.toLowerCase())==="md5"?new s:f==="rmd160"||f==="ripemd160"?new o:new u(l(f))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(e,n,a){var i=e("md5.js");n.exports=function(s){return new i().update(s).digest()}},{"md5.js":450}],388:[function(e,n,a){var i=e("inherits"),s=e("./legacy"),o=e("cipher-base"),l=e("safe-buffer").Buffer,c=e("create-hash/md5"),u=e("ripemd160"),f=e("sha.js"),h=l.alloc(128);function p(g,y){o.call(this,"digest"),typeof y=="string"&&(y=l.from(y));var m=g==="sha512"||g==="sha384"?128:64;this._alg=g,this._key=y,y.length>m?y=(g==="rmd160"?new u:f(g)).update(y).digest():y.length<m&&(y=l.concat([y,h],m));for(var v=this._ipad=l.allocUnsafe(m),b=this._opad=l.allocUnsafe(m),x=0;x<m;x++)v[x]=54^y[x],b[x]=92^y[x];this._hash=g==="rmd160"?new u:f(g),this._hash.update(v)}i(p,o),p.prototype._update=function(g){this._hash.update(g)},p.prototype._final=function(){var g=this._hash.digest();return(this._alg==="rmd160"?new u:f(this._alg)).update(this._opad).update(g).digest()},n.exports=function(g,y){return(g=g.toLowerCase())==="rmd160"||g==="ripemd160"?new p("rmd160",y):g==="md5"?new s(c,y):new p(g,y)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(e,n,a){var i=e("inherits"),s=e("safe-buffer").Buffer,o=e("cipher-base"),l=s.alloc(128);function c(u,f){o.call(this,"digest"),typeof f=="string"&&(f=s.from(f)),this._alg=u,this._key=f,f.length>64?f=u(f):f.length<64&&(f=s.concat([f,l],64));for(var h=this._ipad=s.allocUnsafe(64),p=this._opad=s.allocUnsafe(64),g=0;g<64;g++)h[g]=54^f[g],p[g]=92^f[g];this._hash=[h]}i(c,o),c.prototype._update=function(u){this._hash.push(u)},c.prototype._final=function(){var u=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,u]))},n.exports=c},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(e,n,a){a.randomBytes=a.rng=a.pseudoRandomBytes=a.prng=e("randombytes"),a.createHash=a.Hash=e("create-hash"),a.createHmac=a.Hmac=e("create-hmac");var i=e("browserify-sign/algos"),s=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(s);a.getHashes=function(){return o};var l=e("pbkdf2");a.pbkdf2=l.pbkdf2,a.pbkdf2Sync=l.pbkdf2Sync;var c=e("browserify-cipher");a.Cipher=c.Cipher,a.createCipher=c.createCipher,a.Cipheriv=c.Cipheriv,a.createCipheriv=c.createCipheriv,a.Decipher=c.Decipher,a.createDecipher=c.createDecipher,a.Decipheriv=c.Decipheriv,a.createDecipheriv=c.createDecipheriv,a.getCiphers=c.getCiphers,a.listCiphers=c.listCiphers;var u=e("diffie-hellman");a.DiffieHellmanGroup=u.DiffieHellmanGroup,a.createDiffieHellmanGroup=u.createDiffieHellmanGroup,a.getDiffieHellman=u.getDiffieHellman,a.createDiffieHellman=u.createDiffieHellman,a.DiffieHellman=u.DiffieHellman;var f=e("browserify-sign");a.createSign=f.createSign,a.Sign=f.Sign,a.createVerify=f.createVerify,a.Verify=f.Verify,a.createECDH=e("create-ecdh");var h=e("public-encrypt");a.publicEncrypt=h.publicEncrypt,a.privateEncrypt=h.privateEncrypt,a.publicDecrypt=h.publicDecrypt,a.privateDecrypt=h.privateDecrypt;var p=e("randomfill");a.randomFill=p.randomFill,a.randomFillSync=p.randomFillSync,a.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},a.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(e,n,a){(function(i,s){typeof a=="object"&&n!==void 0?n.exports=s():(i=typeof globalThis<"u"?globalThis:i||self).dayjs=s()})(void 0,(function(){var i=6e4,s=36e5,o="millisecond",l="second",c="minute",u="hour",f="day",h="week",p="month",g="quarter",y="year",m="date",v="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var E=["th","st","nd","rd"],k=N%100;return"["+N+(E[(k-20)%10]||E[k]||E[0])+"]"}},_=function(N,E,k){var P=String(N);return!P||P.length>=E?N:""+Array(E+1-P.length).join(k)+N},I={s:_,z:function(N){var E=-N.utcOffset(),k=Math.abs(E),P=Math.floor(k/60),q=k%60;return(E<=0?"+":"-")+_(P,2,"0")+":"+_(q,2,"0")},m:function N(E,k){if(E.date()<k.date())return-N(k,E);var P=12*(k.year()-E.year())+(k.month()-E.month()),q=E.clone().add(P,p),H=k-q<0,L=E.clone().add(P+(H?-1:1),p);return+(-(P+(k-q)/(H?q-L:L-q))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:p,y,w:h,d:f,D:m,h:u,m:c,s:l,ms:o,Q:g}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},A="en",O={};O[A]=S;var M="$isDayjsObject",z=function(N){return N instanceof R||!(!N||!N[M])},U=function N(E,k,P){var q;if(!E)return A;if(typeof E=="string"){var H=E.toLowerCase();O[H]&&(q=H),k&&(O[H]=k,q=H);var L=E.split("-");if(!q&&L.length>1)return N(L[0])}else{var K=E.name;O[K]=E,q=K}return!P&&q&&(A=q),q||!P&&A},D=function(N,E){if(z(N))return N.clone();var k=typeof E=="object"?E:{};return k.date=N,k.args=arguments,new R(k)},T=I;T.l=U,T.i=z,T.w=function(N,E){return D(N,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var R=(function(){function N(k){this.$L=U(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[M]=!0}var E=N.prototype;return E.parse=function(k){this.$d=(function(P){var q=P.date,H=P.utc;if(q===null)return new Date(NaN);if(T.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var L=q.match(b);if(L){var K=L[2]-1||0,Y=(L[7]||"0").substring(0,3);return H?new Date(Date.UTC(L[1],K,L[3]||1,L[4]||0,L[5]||0,L[6]||0,Y)):new Date(L[1],K,L[3]||1,L[4]||0,L[5]||0,L[6]||0,Y)}}return new Date(q)})(k),this.init()},E.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},E.$utils=function(){return T},E.isValid=function(){return this.$d.toString()!==v},E.isSame=function(k,P){var q=D(k);return this.startOf(P)<=q&&q<=this.endOf(P)},E.isAfter=function(k,P){return D(k)<this.startOf(P)},E.isBefore=function(k,P){return this.endOf(P)<D(k)},E.$g=function(k,P,q){return T.u(k)?this[P]:this.set(q,k)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(k,P){var q=this,H=!!T.u(P)||P,L=T.p(k),K=function(te,se){var ce=T.w(q.$u?Date.UTC(q.$y,se,te):new Date(q.$y,se,te),q);return H?ce:ce.endOf(f)},Y=function(te,se){return T.w(q.toDate()[te].apply(q.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(se)),q)},Z=this.$W,V=this.$M,ee=this.$D,B="set"+(this.$u?"UTC":"");switch(L){case y:return H?K(1,0):K(31,11);case p:return H?K(1,V):K(0,V+1);case h:var F=this.$locale().weekStart||0,X=(Z<F?Z+7:Z)-F;return K(H?ee-X:ee+(6-X),V);case f:case m:return Y(B+"Hours",0);case u:return Y(B+"Minutes",1);case c:return Y(B+"Seconds",2);case l:return Y(B+"Milliseconds",3);default:return this.clone()}},E.endOf=function(k){return this.startOf(k,!1)},E.$set=function(k,P){var q,H=T.p(k),L="set"+(this.$u?"UTC":""),K=(q={},q[f]=L+"Date",q[m]=L+"Date",q[p]=L+"Month",q[y]=L+"FullYear",q[u]=L+"Hours",q[c]=L+"Minutes",q[l]=L+"Seconds",q[o]=L+"Milliseconds",q)[H],Y=H===f?this.$D+(P-this.$W):P;if(H===p||H===y){var Z=this.clone().set(m,1);Z.$d[K](Y),Z.init(),this.$d=Z.set(m,Math.min(this.$D,Z.daysInMonth())).$d}else K&&this.$d[K](Y);return this.init(),this},E.set=function(k,P){return this.clone().$set(k,P)},E.get=function(k){return this[T.p(k)]()},E.add=function(k,P){var q,H=this;k=Number(k);var L=T.p(P),K=function(V){var ee=D(H);return T.w(ee.date(ee.date()+Math.round(V*k)),H)};if(L===p)return this.set(p,this.$M+k);if(L===y)return this.set(y,this.$y+k);if(L===f)return K(1);if(L===h)return K(7);var Y=(q={},q[c]=i,q[u]=s,q[l]=1e3,q)[L]||1,Z=this.$d.getTime()+k*Y;return T.w(Z,this)},E.subtract=function(k,P){return this.add(-1*k,P)},E.format=function(k){var P=this,q=this.$locale();if(!this.isValid())return q.invalidDate||v;var H=k||"YYYY-MM-DDTHH:mm:ssZ",L=T.z(this),K=this.$H,Y=this.$m,Z=this.$M,V=q.weekdays,ee=q.months,B=q.meridiem,F=function(se,ce,ue,oe){return se&&(se[ce]||se(P,H))||ue[ce].slice(0,oe)},X=function(se){return T.s(K%12||12,se,"0")},te=B||function(se,ce,ue){var oe=se<12?"AM":"PM";return ue?oe.toLowerCase():oe};return H.replace(x,(function(se,ce){return ce||(function(ue){switch(ue){case"YY":return String(P.$y).slice(-2);case"YYYY":return T.s(P.$y,4,"0");case"M":return Z+1;case"MM":return T.s(Z+1,2,"0");case"MMM":return F(q.monthsShort,Z,ee,3);case"MMMM":return F(ee,Z);case"D":return P.$D;case"DD":return T.s(P.$D,2,"0");case"d":return String(P.$W);case"dd":return F(q.weekdaysMin,P.$W,V,2);case"ddd":return F(q.weekdaysShort,P.$W,V,3);case"dddd":return V[P.$W];case"H":return String(K);case"HH":return T.s(K,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return te(K,Y,!0);case"A":return te(K,Y,!1);case"m":return String(Y);case"mm":return T.s(Y,2,"0");case"s":return String(P.$s);case"ss":return T.s(P.$s,2,"0");case"SSS":return T.s(P.$ms,3,"0");case"Z":return L}return null})(se)||L.replace(":","")}))},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(k,P,q){var H,L=this,K=T.p(P),Y=D(k),Z=(Y.utcOffset()-this.utcOffset())*i,V=this-Y,ee=function(){return T.m(L,Y)};switch(K){case y:H=ee()/12;break;case p:H=ee();break;case g:H=ee()/3;break;case h:H=(V-Z)/6048e5;break;case f:H=(V-Z)/864e5;break;case u:H=V/s;break;case c:H=V/i;break;case l:H=V/1e3;break;default:H=V}return q?H:T.a(H)},E.daysInMonth=function(){return this.endOf(p).$D},E.$locale=function(){return O[this.$L]},E.locale=function(k,P){if(!k)return this.$L;var q=this.clone(),H=U(k,P,!0);return H&&(q.$L=H),q},E.clone=function(){return T.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},N})(),C=R.prototype;return D.prototype=C,[["$ms",o],["$s",l],["$m",c],["$H",u],["$W",f],["$M",p],["$y",y],["$D",m]].forEach((function(N){C[N[1]]=function(E){return this.$g(E,N[0],N[1])}})),D.extend=function(N,E){return N.$i||(N(E,R,D),N.$i=!0),D},D.locale=U,D.isDayjs=z,D.unix=function(N){return D(1e3*N)},D.en=O[A],D.Ls=O,D.p={},D}))},{}],392:[function(e,n,a){(function(i,s){typeof a=="object"&&n!==void 0?n.exports=s():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_customParseFormat=s()})(void 0,(function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,l=/\d\d?/,c=/\d*[^-_:/,()\s\d]+/,u={},f=function(b){return(b=+b)+(b>68?1900:2e3)},h=function(b){return function(x){this[b]=+x}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(b){(this.zone||(this.zone={})).offset=(function(x){if(!x||x==="Z")return 0;var S=x.match(/([+-]|\d\d)/g),_=60*S[1]+(+S[2]||0);return _===0?0:S[0]==="+"?-_:_})(b)}],g=function(b){var x=u[b];return x&&(x.indexOf?x:x.s.concat(x.f))},y=function(b,x){var S,_=u.meridiem;if(_){for(var I=1;I<=24;I+=1)if(b.indexOf(_(I,0,x))>-1){S=I>12;break}}else S=b===(x?"pm":"PM");return S},m={A:[c,function(b){this.afternoon=y(b,!1)}],a:[c,function(b){this.afternoon=y(b,!0)}],S:[/\d/,function(b){this.milliseconds=100*+b}],SS:[o,function(b){this.milliseconds=10*+b}],SSS:[/\d{3}/,function(b){this.milliseconds=+b}],s:[l,h("seconds")],ss:[l,h("seconds")],m:[l,h("minutes")],mm:[l,h("minutes")],H:[l,h("hours")],h:[l,h("hours")],HH:[l,h("hours")],hh:[l,h("hours")],D:[l,h("day")],DD:[o,h("day")],Do:[c,function(b){var x=u.ordinal,S=b.match(/\d+/);if(this.day=S[0],x)for(var _=1;_<=31;_+=1)x(_).replace(/\[|\]/g,"")===b&&(this.day=_)}],M:[l,h("month")],MM:[o,h("month")],MMM:[c,function(b){var x=g("months"),S=(g("monthsShort")||x.map((function(_){return _.slice(0,3)}))).indexOf(b)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[c,function(b){var x=g("months").indexOf(b)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,h("year")],YY:[o,function(b){this.year=f(b)}],YYYY:[/\d{4}/,h("year")],Z:p,ZZ:p};function v(b){var x,S;x=b,S=u&&u.formats;for(var _=(b=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(D,T,R){var C=R&&R.toUpperCase();return T||S[R]||i[R]||S[C].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(N,E,k){return E||k.slice(1)}))}))).match(s),I=_.length,A=0;A<I;A+=1){var O=_[A],M=m[O],z=M&&M[0],U=M&&M[1];_[A]=U?{regex:z,parser:U}:O.replace(/^\[|\]$/g,"")}return function(D){for(var T={},R=0,C=0;R<I;R+=1){var N=_[R];if(typeof N=="string")C+=N.length;else{var E=N.regex,k=N.parser,P=D.slice(C),q=E.exec(P)[0];k.call(T,q),D=D.replace(q,"")}}return(function(H){var L=H.afternoon;if(L!==void 0){var K=H.hours;L?K<12&&(H.hours+=12):K===12&&(H.hours=0),delete H.afternoon}})(T),T}}return function(b,x,S){S.p.customParseFormat=!0,b&&b.parseTwoDigitYear&&(f=b.parseTwoDigitYear);var _=x.prototype,I=_.parse;_.parse=function(A){var O=A.date,M=A.utc,z=A.args;this.$u=M;var U=z[1];if(typeof U=="string"){var D=z[2]===!0,T=z[3]===!0,R=D||T,C=z[2];T&&(C=z[2]),u=this.$locale(),!D&&C&&(u=S.Ls[C]),this.$d=(function(P,q,H){try{if(["x","X"].indexOf(q)>-1)return new Date((q==="X"?1e3:1)*P);var L=v(q)(P),K=L.year,Y=L.month,Z=L.day,V=L.hours,ee=L.minutes,B=L.seconds,F=L.milliseconds,X=L.zone,te=new Date,se=Z||(K||Y?1:te.getDate()),ce=K||te.getFullYear(),ue=0;K&&!Y||(ue=Y>0?Y-1:te.getMonth());var oe=V||0,le=ee||0,pe=B||0,ye=F||0;return X?new Date(Date.UTC(ce,ue,se,oe,le,pe,ye+60*X.offset*1e3)):H?new Date(Date.UTC(ce,ue,se,oe,le,pe,ye)):new Date(ce,ue,se,oe,le,pe,ye)}catch{return new Date("")}})(O,U,M),this.init(),C&&C!==!0&&(this.$L=this.locale(C).$L),R&&O!=this.format(U)&&(this.$d=new Date("")),u={}}else if(U instanceof Array)for(var N=U.length,E=1;E<=N;E+=1){z[1]=U[E-1];var k=S.apply(this,z);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}E===N&&(this.$d=new Date(""))}else I.call(this,A)}}}))},{}],393:[function(e,n,a){(function(i,s){typeof a=="object"&&n!==void 0?n.exports=s():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_utc=s()})(void 0,(function(){var i="minute",s=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(l,c,u){var f=c.prototype;u.utc=function(b){var x={date:b,utc:!0,args:arguments};return new c(x)},f.utc=function(b){var x=u(this.toDate(),{locale:this.$L,utc:!0});return b?x.add(this.utcOffset(),i):x},f.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var h=f.parse;f.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),h.call(this,b)};var p=f.init;f.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else p.call(this)};var g=f.utcOffset;f.utcOffset=function(b,x){var S=this.$utils().u;if(S(b))return this.$u?0:S(this.$offset)?g.call(this):this.$offset;if(typeof b=="string"&&(b=(function(O){O===void 0&&(O="");var M=O.match(s);if(!M)return null;var z=(""+M[0]).match(o)||["-",0,0],U=z[0],D=60*+z[1]+ +z[2];return D===0?0:U==="+"?D:-D})(b))===null)return this;var _=Math.abs(b)<=16?60*b:b,I=this;if(x)return I.$offset=_,I.$u=b===0,I;if(b!==0){var A=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(I=this.local().add(_+A,i)).$offset=_,I.$x.$localOffset=A}else I=this.utc();return I};var y=f.format;f.format=function(b){var x=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return y.call(this,x)},f.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},f.isUTC=function(){return!!this.$u},f.toISOString=function(){return this.toDate().toISOString()},f.toString=function(){return this.toDate().toUTCString()};var m=f.toDate;f.toDate=function(b){return b==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var v=f.diff;f.diff=function(b,x,S){if(b&&this.$u===b.$u)return v.call(this,b,x,S);var _=this.local(),I=u(b).local();return v.call(_,I,x,S)}}}))},{}],394:[function(e,n,a){a.utils=e("./des/utils"),a.Cipher=e("./des/cipher"),a.DES=e("./des/des"),a.CBC=e("./des/cbc"),a.EDE=e("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(e,n,a){var i=e("minimalistic-assert"),s=e("inherits"),o={};function l(c){i.equal(c.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=c[u]}a.instantiate=function(c){function u(g){c.call(this,g),this._cbcInit()}s(u,c);for(var f=Object.keys(o),h=0;h<f.length;h++){var p=f[h];u.prototype[p]=o[p]}return u.create=function(g){return new u(g)},u},o._cbcInit=function(){var c=new l(this.options.iv);this._cbcState=c},o._update=function(c,u,f,h){var p=this._cbcState,g=this.constructor.super_.prototype,y=p.iv;if(this.type==="encrypt"){for(var m=0;m<this.blockSize;m++)y[m]^=c[u+m];for(g._update.call(this,y,0,f,h),m=0;m<this.blockSize;m++)y[m]=f[h+m]}else{for(g._update.call(this,c,u,f,h),m=0;m<this.blockSize;m++)f[h+m]^=y[m];for(m=0;m<this.blockSize;m++)y[m]=c[u+m]}}},{inherits:440,"minimalistic-assert":453}],396:[function(e,n,a){var i=e("minimalistic-assert");function s(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=o.padding!==!1}n.exports=s,s.prototype._init=function(){},s.prototype.update=function(o){return o.length===0?[]:this.type==="decrypt"?this._updateDecrypt(o):this._updateEncrypt(o)},s.prototype._buffer=function(o,l){for(var c=Math.min(this.buffer.length-this.bufferOff,o.length-l),u=0;u<c;u++)this.buffer[this.bufferOff+u]=o[l+u];return this.bufferOff+=c,c},s.prototype._flushBuffer=function(o,l){return this._update(this.buffer,0,o,l),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(o){var l=0,c=0,u=(this.bufferOff+o.length)/this.blockSize|0,f=new Array(u*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(o,l),this.bufferOff===this.buffer.length&&(c+=this._flushBuffer(f,c)));for(var h=o.length-(o.length-l)%this.blockSize;l<h;l+=this.blockSize)this._update(o,l,f,c),c+=this.blockSize;for(;l<o.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=o[l];return f},s.prototype._updateDecrypt=function(o){for(var l=0,c=0,u=Math.ceil((this.bufferOff+o.length)/this.blockSize)-1,f=new Array(u*this.blockSize);u>0;u--)l+=this._buffer(o,l),c+=this._flushBuffer(f,c);return l+=this._buffer(o,l),f},s.prototype.final=function(o){var l,c;return o&&(l=this.update(o)),c=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),l?l.concat(c):c},s.prototype._pad=function(o,l){if(l===0)return!1;for(;l<o.length;)o[l++]=0;return!0},s.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var o=new Array(this.blockSize);return this._update(this.buffer,0,o,0),o},s.prototype._unpad=function(o){return o},s.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var o=new Array(this.blockSize);return this._flushBuffer(o,0),this._unpad(o)}},{"minimalistic-assert":453}],397:[function(e,n,a){var i=e("minimalistic-assert"),s=e("inherits"),o=e("./utils"),l=e("./cipher");function c(){this.tmp=new Array(2),this.keys=null}function u(h){l.call(this,h);var p=new c;this._desState=p,this.deriveKeys(p,h.key)}s(u,l),n.exports=u,u.create=function(h){return new u(h)};var f=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(h,p){h.keys=new Array(32),i.equal(p.length,this.blockSize,"Invalid key length");var g=o.readUInt32BE(p,0),y=o.readUInt32BE(p,4);o.pc1(g,y,h.tmp,0),g=h.tmp[0],y=h.tmp[1];for(var m=0;m<h.keys.length;m+=2){var v=f[m>>>1];g=o.r28shl(g,v),y=o.r28shl(y,v),o.pc2(g,y,h.keys,m)}},u.prototype._update=function(h,p,g,y){var m=this._desState,v=o.readUInt32BE(h,p),b=o.readUInt32BE(h,p+4);o.ip(v,b,m.tmp,0),v=m.tmp[0],b=m.tmp[1],this.type==="encrypt"?this._encrypt(m,v,b,m.tmp,0):this._decrypt(m,v,b,m.tmp,0),v=m.tmp[0],b=m.tmp[1],o.writeUInt32BE(g,v,y),o.writeUInt32BE(g,b,y+4)},u.prototype._pad=function(h,p){if(this.padding===!1)return!1;for(var g=h.length-p,y=p;y<h.length;y++)h[y]=g;return!0},u.prototype._unpad=function(h){if(this.padding===!1)return h;for(var p=h[h.length-1],g=h.length-p;g<h.length;g++)i.equal(h[g],p);return h.slice(0,h.length-p)},u.prototype._encrypt=function(h,p,g,y,m){for(var v=p,b=g,x=0;x<h.keys.length;x+=2){var S=h.keys[x],_=h.keys[x+1];o.expand(b,h.tmp,0),S^=h.tmp[0],_^=h.tmp[1];var I=o.substitute(S,_),A=b;b=(v^o.permute(I))>>>0,v=A}o.rip(b,v,y,m)},u.prototype._decrypt=function(h,p,g,y,m){for(var v=g,b=p,x=h.keys.length-2;x>=0;x-=2){var S=h.keys[x],_=h.keys[x+1];o.expand(v,h.tmp,0),S^=h.tmp[0],_^=h.tmp[1];var I=o.substitute(S,_),A=v;v=(b^o.permute(I))>>>0,b=A}o.rip(v,b,y,m)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(e,n,a){var i=e("minimalistic-assert"),s=e("inherits"),o=e("./cipher"),l=e("./des");function c(f,h){i.equal(h.length,24,"Invalid key length");var p=h.slice(0,8),g=h.slice(8,16),y=h.slice(16,24);this.ciphers=f==="encrypt"?[l.create({type:"encrypt",key:p}),l.create({type:"decrypt",key:g}),l.create({type:"encrypt",key:y})]:[l.create({type:"decrypt",key:y}),l.create({type:"encrypt",key:g}),l.create({type:"decrypt",key:p})]}function u(f){o.call(this,f);var h=new c(this.type,this.options.key);this._edeState=h}s(u,o),n.exports=u,u.create=function(f){return new u(f)},u.prototype._update=function(f,h,p,g){var y=this._edeState;y.ciphers[0]._update(f,h,p,g),y.ciphers[1]._update(p,g,p,g),y.ciphers[2]._update(p,g,p,g)},u.prototype._pad=l.prototype._pad,u.prototype._unpad=l.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(e,n,a){a.readUInt32BE=function(l,c){return(l[0+c]<<24|l[1+c]<<16|l[2+c]<<8|l[3+c])>>>0},a.writeUInt32BE=function(l,c,u){l[0+u]=c>>>24,l[1+u]=c>>>16&255,l[2+u]=c>>>8&255,l[3+u]=255&c},a.ip=function(l,c,u,f){for(var h=0,p=0,g=6;g>=0;g-=2){for(var y=0;y<=24;y+=8)h<<=1,h|=c>>>y+g&1;for(y=0;y<=24;y+=8)h<<=1,h|=l>>>y+g&1}for(g=6;g>=0;g-=2){for(y=1;y<=25;y+=8)p<<=1,p|=c>>>y+g&1;for(y=1;y<=25;y+=8)p<<=1,p|=l>>>y+g&1}u[f+0]=h>>>0,u[f+1]=p>>>0},a.rip=function(l,c,u,f){for(var h=0,p=0,g=0;g<4;g++)for(var y=24;y>=0;y-=8)h<<=1,h|=c>>>y+g&1,h<<=1,h|=l>>>y+g&1;for(g=4;g<8;g++)for(y=24;y>=0;y-=8)p<<=1,p|=c>>>y+g&1,p<<=1,p|=l>>>y+g&1;u[f+0]=h>>>0,u[f+1]=p>>>0},a.pc1=function(l,c,u,f){for(var h=0,p=0,g=7;g>=5;g--){for(var y=0;y<=24;y+=8)h<<=1,h|=c>>y+g&1;for(y=0;y<=24;y+=8)h<<=1,h|=l>>y+g&1}for(y=0;y<=24;y+=8)h<<=1,h|=c>>y+g&1;for(g=1;g<=3;g++){for(y=0;y<=24;y+=8)p<<=1,p|=c>>y+g&1;for(y=0;y<=24;y+=8)p<<=1,p|=l>>y+g&1}for(y=0;y<=24;y+=8)p<<=1,p|=l>>y+g&1;u[f+0]=h>>>0,u[f+1]=p>>>0},a.r28shl=function(l,c){return l<<c&268435455|l>>>28-c};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];a.pc2=function(l,c,u,f){for(var h=0,p=0,g=i.length>>>1,y=0;y<g;y++)h<<=1,h|=l>>>i[y]&1;for(y=g;y<i.length;y++)p<<=1,p|=c>>>i[y]&1;u[f+0]=h>>>0,u[f+1]=p>>>0},a.expand=function(l,c,u){var f=0,h=0;f=(1&l)<<5|l>>>27;for(var p=23;p>=15;p-=4)f<<=6,f|=l>>>p&63;for(p=11;p>=3;p-=4)h|=l>>>p&63,h<<=6;h|=(31&l)<<1|l>>>31,c[u+0]=f>>>0,c[u+1]=h>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];a.substitute=function(l,c){for(var u=0,f=0;f<4;f++)u<<=4,u|=s[64*f+(l>>>18-6*f&63)];for(f=0;f<4;f++)u<<=4,u|=s[256+64*f+(c>>>18-6*f&63)];return u>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];a.permute=function(l){for(var c=0,u=0;u<o.length;u++)c<<=1,c|=l>>>o[u]&1;return c>>>0},a.padSplit=function(l,c,u){for(var f=l.toString(2);f.length<c;)f="0"+f;for(var h=[],p=0;p<c;p+=u)h.push(f.slice(p,p+u));return h.join(" ")}},{}],400:[function(e,n,a){(function(i){(function(){var s=e("./lib/generatePrime"),o=e("./lib/primes.json"),l=e("./lib/dh"),c={binary:!0,hex:!0,base64:!0};a.DiffieHellmanGroup=a.createDiffieHellmanGroup=a.getDiffieHellman=function(u){var f=new i(o[u].prime,"hex"),h=new i(o[u].gen,"hex");return new l(f,h)},a.createDiffieHellman=a.DiffieHellman=function u(f,h,p,g){return i.isBuffer(h)||c[h]===void 0?u(f,"binary",h,p):(h=h||"binary",g=g||"binary",p=p||new i([2]),i.isBuffer(p)||(p=new i(p,g)),typeof f=="number"?new l(s(f,p),p,!0):(i.isBuffer(f)||(f=new i(f,h)),new l(f,p,!0)))}}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(e,n,a){(function(i){(function(){var s=e("bn.js"),o=new(e("miller-rabin")),l=new s(24),c=new s(11),u=new s(10),f=new s(3),h=new s(7),p=e("./generatePrime"),g=e("randombytes");function y(S,_){return _=_||"utf8",i.isBuffer(S)||(S=new i(S,_)),this._pub=new s(S),this}function m(S,_){return _=_||"utf8",i.isBuffer(S)||(S=new i(S,_)),this._priv=new s(S),this}n.exports=b;var v={};function b(S,_,I){this.setGenerator(_),this.__prime=new s(S),this._prime=s.mont(this.__prime),this._primeLen=S.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,I?(this.setPublicKey=y,this.setPrivateKey=m):this._primeCode=8}function x(S,_){var I=new i(S.toArray());return _?I.toString(_):I}Object.defineProperty(b.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=(function(S,_){var I=_.toString("hex"),A=[I,S.toString(16)].join("_");if(A in v)return v[A];var O,M=0;if(S.isEven()||!p.simpleSieve||!p.fermatTest(S)||!o.test(S))return M+=1,M+=I==="02"||I==="05"?8:4,v[A]=M,M;switch(o.test(S.shrn(1))||(M+=2),I){case"02":S.mod(l).cmp(c)&&(M+=8);break;case"05":(O=S.mod(u)).cmp(f)&&O.cmp(h)&&(M+=8);break;default:M+=4}return v[A]=M,M})(this.__prime,this.__gen)),this._primeCode}}),b.prototype.generateKeys=function(){return this._priv||(this._priv=new s(g(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},b.prototype.computeSecret=function(S){var _=(S=(S=new s(S)).toRed(this._prime)).redPow(this._priv).fromRed(),I=new i(_.toArray()),A=this.getPrime();if(I.length<A.length){var O=new i(A.length-I.length);O.fill(0),I=i.concat([O,I])}return I},b.prototype.getPublicKey=function(S){return x(this._pub,S)},b.prototype.getPrivateKey=function(S){return x(this._priv,S)},b.prototype.getPrime=function(S){return x(this.__prime,S)},b.prototype.getGenerator=function(S){return x(this._gen,S)},b.prototype.setGenerator=function(S,_){return _=_||"utf8",i.isBuffer(S)||(S=new i(S,_)),this.__gen=S,this._gen=new s(S),this}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(e,n,a){var i=e("randombytes");n.exports=S,S.simpleSieve=b,S.fermatTest=x;var s=e("bn.js"),o=new s(24),l=new(e("miller-rabin")),c=new s(1),u=new s(2),f=new s(5),h=(new s(16),new s(8),new s(10)),p=new s(3),g=(new s(7),new s(11)),y=new s(4),m=(new s(12),null);function v(){if(m!==null)return m;var _=[];_[0]=2;for(var I=1,A=3;A<1048576;A+=2){for(var O=Math.ceil(Math.sqrt(A)),M=0;M<I&&_[M]<=O&&A%_[M]!=0;M++);I!==M&&_[M]<=O||(_[I++]=A)}return m=_,_}function b(_){for(var I=v(),A=0;A<I.length;A++)if(_.modn(I[A])===0)return _.cmpn(I[A])===0;return!0}function x(_){var I=s.mont(_);return u.toRed(I).redPow(_.subn(1)).fromRed().cmpn(1)===0}function S(_,I){if(_<16)return new s(I===2||I===5?[140,123]:[140,39]);var A,O;for(I=new s(I);;){for(A=new s(i(Math.ceil(_/8)));A.bitLength()>_;)A.ishrn(1);if(A.isEven()&&A.iadd(c),A.testn(1)||A.iadd(u),I.cmp(u)){if(!I.cmp(f))for(;A.mod(h).cmp(p);)A.iadd(y)}else for(;A.mod(o).cmp(g);)A.iadd(y);if(b(O=A.shrn(1))&&b(A)&&x(O)&&x(A)&&l.test(O)&&l.test(A))return A}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(e,n,a){n.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(e,n,a){arguments[4][184][0].apply(a,arguments)},{buffer:188,dup:184}],405:[function(e,n,a){var i=a;i.version=e("../package.json").version,i.utils=e("./elliptic/utils"),i.rand=e("brorand"),i.curve=e("./elliptic/curve"),i.curves=e("./elliptic/curves"),i.ec=e("./elliptic/ec"),i.eddsa=e("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(e,n,a){var i=e("bn.js"),s=e("../utils"),o=s.getNAF,l=s.getJSF,c=s.assert;function u(h,p){this.type=h,this.p=new i(p.p,16),this.red=p.prime?i.red(p.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=p.n&&new i(p.n,16),this.g=p.g&&this.pointFromJSON(p.g,p.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var g=this.n&&this.p.div(this.n);!g||g.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function f(h,p){this.curve=h,this.type=p,this.precomputed=null}n.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(h,p){c(h.precomputed);var g=h._getDoubles(),y=o(p,1,this._bitLength),m=(1<<g.step+1)-(g.step%2==0?2:1);m/=3;var v,b,x=[];for(v=0;v<y.length;v+=g.step){b=0;for(var S=v+g.step-1;S>=v;S--)b=(b<<1)+y[S];x.push(b)}for(var _=this.jpoint(null,null,null),I=this.jpoint(null,null,null),A=m;A>0;A--){for(v=0;v<x.length;v++)(b=x[v])===A?I=I.mixedAdd(g.points[v]):b===-A&&(I=I.mixedAdd(g.points[v].neg()));_=_.add(I)}return _.toP()},u.prototype._wnafMul=function(h,p){var g=4,y=h._getNAFPoints(g);g=y.wnd;for(var m=y.points,v=o(p,g,this._bitLength),b=this.jpoint(null,null,null),x=v.length-1;x>=0;x--){for(var S=0;x>=0&&v[x]===0;x--)S++;if(x>=0&&S++,b=b.dblp(S),x<0)break;var _=v[x];c(_!==0),b=h.type==="affine"?_>0?b.mixedAdd(m[_-1>>1]):b.mixedAdd(m[-_-1>>1].neg()):_>0?b.add(m[_-1>>1]):b.add(m[-_-1>>1].neg())}return h.type==="affine"?b.toP():b},u.prototype._wnafMulAdd=function(h,p,g,y,m){var v,b,x,S=this._wnafT1,_=this._wnafT2,I=this._wnafT3,A=0;for(v=0;v<y;v++){var O=(x=p[v])._getNAFPoints(h);S[v]=O.wnd,_[v]=O.points}for(v=y-1;v>=1;v-=2){var M=v-1,z=v;if(S[M]===1&&S[z]===1){var U=[p[M],null,null,p[z]];p[M].y.cmp(p[z].y)===0?(U[1]=p[M].add(p[z]),U[2]=p[M].toJ().mixedAdd(p[z].neg())):p[M].y.cmp(p[z].y.redNeg())===0?(U[1]=p[M].toJ().mixedAdd(p[z]),U[2]=p[M].add(p[z].neg())):(U[1]=p[M].toJ().mixedAdd(p[z]),U[2]=p[M].toJ().mixedAdd(p[z].neg()));var D=[-3,-1,-5,-7,0,7,5,1,3],T=l(g[M],g[z]);for(A=Math.max(T[0].length,A),I[M]=new Array(A),I[z]=new Array(A),b=0;b<A;b++){var R=0|T[0][b],C=0|T[1][b];I[M][b]=D[3*(R+1)+(C+1)],I[z][b]=0,_[M]=U}}else I[M]=o(g[M],S[M],this._bitLength),I[z]=o(g[z],S[z],this._bitLength),A=Math.max(I[M].length,A),A=Math.max(I[z].length,A)}var N=this.jpoint(null,null,null),E=this._wnafT4;for(v=A;v>=0;v--){for(var k=0;v>=0;){var P=!0;for(b=0;b<y;b++)E[b]=0|I[b][v],E[b]!==0&&(P=!1);if(!P)break;k++,v--}if(v>=0&&k++,N=N.dblp(k),v<0)break;for(b=0;b<y;b++){var q=E[b];q!==0&&(q>0?x=_[b][q-1>>1]:q<0&&(x=_[b][-q-1>>1].neg()),N=x.type==="affine"?N.mixedAdd(x):N.add(x))}}for(v=0;v<y;v++)_[v]=null;return m?N:N.toP()},u.BasePoint=f,f.prototype.eq=function(){throw new Error("Not implemented")},f.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(h,p){h=s.toArray(h,p);var g=this.p.byteLength();if((h[0]===4||h[0]===6||h[0]===7)&&h.length-1==2*g)return h[0]===6?c(h[h.length-1]%2==0):h[0]===7&&c(h[h.length-1]%2==1),this.point(h.slice(1,1+g),h.slice(1+g,1+2*g));if((h[0]===2||h[0]===3)&&h.length-1===g)return this.pointFromX(h.slice(1,1+g),h[0]===3);throw new Error("Unknown point format")},f.prototype.encodeCompressed=function(h){return this.encode(h,!0)},f.prototype._encode=function(h){var p=this.curve.p.byteLength(),g=this.getX().toArray("be",p);return h?[this.getY().isEven()?2:3].concat(g):[4].concat(g,this.getY().toArray("be",p))},f.prototype.encode=function(h,p){return s.encode(this._encode(p),h)},f.prototype.precompute=function(h){if(this.precomputed)return this;var p={doubles:null,naf:null,beta:null};return p.naf=this._getNAFPoints(8),p.doubles=this._getDoubles(4,h),p.beta=this._getBeta(),this.precomputed=p,this},f.prototype._hasDoubles=function(h){if(!this.precomputed)return!1;var p=this.precomputed.doubles;return!!p&&p.points.length>=Math.ceil((h.bitLength()+1)/p.step)},f.prototype._getDoubles=function(h,p){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var g=[this],y=this,m=0;m<p;m+=h){for(var v=0;v<h;v++)y=y.dbl();g.push(y)}return{step:h,points:g}},f.prototype._getNAFPoints=function(h){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var p=[this],g=(1<<h)-1,y=g===1?null:this.dbl(),m=1;m<g;m++)p[m]=p[m-1].add(y);return{wnd:h,points:p}},f.prototype._getBeta=function(){return null},f.prototype.dblp=function(h){for(var p=this,g=0;g<h;g++)p=p.dbl();return p}},{"../utils":419,"bn.js":420}],407:[function(e,n,a){var i=e("../utils"),s=e("bn.js"),o=e("inherits"),l=e("./base"),c=i.assert;function u(h){this.twisted=(0|h.a)!=1,this.mOneA=this.twisted&&(0|h.a)==-1,this.extended=this.mOneA,l.call(this,"edwards",h),this.a=new s(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|h.c)==1}function f(h,p,g,y,m){l.BasePoint.call(this,h,"projective"),p===null&&g===null&&y===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(p,16),this.y=new s(g,16),this.z=y?new s(y,16):this.curve.one,this.t=m&&new s(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,l),n.exports=u,u.prototype._mulA=function(h){return this.mOneA?h.redNeg():this.a.redMul(h)},u.prototype._mulC=function(h){return this.oneC?h:this.c.redMul(h)},u.prototype.jpoint=function(h,p,g,y){return this.point(h,p,g,y)},u.prototype.pointFromX=function(h,p){(h=new s(h,16)).red||(h=h.toRed(this.red));var g=h.redSqr(),y=this.c2.redSub(this.a.redMul(g)),m=this.one.redSub(this.c2.redMul(this.d).redMul(g)),v=y.redMul(m.redInvm()),b=v.redSqrt();if(b.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");var x=b.fromRed().isOdd();return(p&&!x||!p&&x)&&(b=b.redNeg()),this.point(h,b)},u.prototype.pointFromY=function(h,p){(h=new s(h,16)).red||(h=h.toRed(this.red));var g=h.redSqr(),y=g.redSub(this.c2),m=g.redMul(this.d).redMul(this.c2).redSub(this.a),v=y.redMul(m.redInvm());if(v.cmp(this.zero)===0){if(p)throw new Error("invalid point");return this.point(this.zero,h)}var b=v.redSqrt();if(b.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==p&&(b=b.redNeg()),this.point(b,h)},u.prototype.validate=function(h){if(h.isInfinity())return!0;h.normalize();var p=h.x.redSqr(),g=h.y.redSqr(),y=p.redMul(this.a).redAdd(g),m=this.c2.redMul(this.one.redAdd(this.d.redMul(p).redMul(g)));return y.cmp(m)===0},o(f,l.BasePoint),u.prototype.pointFromJSON=function(h){return f.fromJSON(this,h)},u.prototype.point=function(h,p,g,y){return new f(this,h,p,g,y)},f.fromJSON=function(h,p){return new f(h,p[0],p[1],p[2])},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},f.prototype._extDbl=function(){var h=this.x.redSqr(),p=this.y.redSqr(),g=this.z.redSqr();g=g.redIAdd(g);var y=this.curve._mulA(h),m=this.x.redAdd(this.y).redSqr().redISub(h).redISub(p),v=y.redAdd(p),b=v.redSub(g),x=y.redSub(p),S=m.redMul(b),_=v.redMul(x),I=m.redMul(x),A=b.redMul(v);return this.curve.point(S,_,A,I)},f.prototype._projDbl=function(){var h,p,g,y,m,v,b=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),S=this.y.redSqr();if(this.curve.twisted){var _=(y=this.curve._mulA(x)).redAdd(S);this.zOne?(h=b.redSub(x).redSub(S).redMul(_.redSub(this.curve.two)),p=_.redMul(y.redSub(S)),g=_.redSqr().redSub(_).redSub(_)):(m=this.z.redSqr(),v=_.redSub(m).redISub(m),h=b.redSub(x).redISub(S).redMul(v),p=_.redMul(y.redSub(S)),g=_.redMul(v))}else y=x.redAdd(S),m=this.curve._mulC(this.z).redSqr(),v=y.redSub(m).redSub(m),h=this.curve._mulC(b.redISub(y)).redMul(v),p=this.curve._mulC(y).redMul(x.redISub(S)),g=y.redMul(v);return this.curve.point(h,p,g)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},f.prototype._extAdd=function(h){var p=this.y.redSub(this.x).redMul(h.y.redSub(h.x)),g=this.y.redAdd(this.x).redMul(h.y.redAdd(h.x)),y=this.t.redMul(this.curve.dd).redMul(h.t),m=this.z.redMul(h.z.redAdd(h.z)),v=g.redSub(p),b=m.redSub(y),x=m.redAdd(y),S=g.redAdd(p),_=v.redMul(b),I=x.redMul(S),A=v.redMul(S),O=b.redMul(x);return this.curve.point(_,I,O,A)},f.prototype._projAdd=function(h){var p,g,y=this.z.redMul(h.z),m=y.redSqr(),v=this.x.redMul(h.x),b=this.y.redMul(h.y),x=this.curve.d.redMul(v).redMul(b),S=m.redSub(x),_=m.redAdd(x),I=this.x.redAdd(this.y).redMul(h.x.redAdd(h.y)).redISub(v).redISub(b),A=y.redMul(S).redMul(I);return this.curve.twisted?(p=y.redMul(_).redMul(b.redSub(this.curve._mulA(v))),g=S.redMul(_)):(p=y.redMul(_).redMul(b.redSub(v)),g=this.curve._mulC(S).redMul(_)),this.curve.point(A,p,g)},f.prototype.add=function(h){return this.isInfinity()?h:h.isInfinity()?this:this.curve.extended?this._extAdd(h):this._projAdd(h)},f.prototype.mul=function(h){return this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve._wnafMul(this,h)},f.prototype.mulAdd=function(h,p,g){return this.curve._wnafMulAdd(1,[this,p],[h,g],2,!1)},f.prototype.jmulAdd=function(h,p,g){return this.curve._wnafMulAdd(1,[this,p],[h,g],2,!0)},f.prototype.normalize=function(){if(this.zOne)return this;var h=this.z.redInvm();return this.x=this.x.redMul(h),this.y=this.y.redMul(h),this.t&&(this.t=this.t.redMul(h)),this.z=this.curve.one,this.zOne=!0,this},f.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()},f.prototype.getY=function(){return this.normalize(),this.y.fromRed()},f.prototype.eq=function(h){return this===h||this.getX().cmp(h.getX())===0&&this.getY().cmp(h.getY())===0},f.prototype.eqXToP=function(h){var p=h.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(p)===0)return!0;for(var g=h.clone(),y=this.curve.redN.redMul(this.z);;){if(g.iadd(this.curve.n),g.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(y),this.x.cmp(p)===0)return!0}},f.prototype.toP=f.prototype.normalize,f.prototype.mixedAdd=f.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(e,n,a){var i=a;i.base=e("./base"),i.short=e("./short"),i.mont=e("./mont"),i.edwards=e("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(e,n,a){var i=e("bn.js"),s=e("inherits"),o=e("./base"),l=e("../utils");function c(f){o.call(this,"mont",f),this.a=new i(f.a,16).toRed(this.red),this.b=new i(f.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(f,h,p){o.BasePoint.call(this,f,"projective"),h===null&&p===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(h,16),this.z=new i(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(c,o),n.exports=c,c.prototype.validate=function(f){var h=f.normalize().x,p=h.redSqr(),g=p.redMul(h).redAdd(p.redMul(this.a)).redAdd(h);return g.redSqrt().redSqr().cmp(g)===0},s(u,o.BasePoint),c.prototype.decodePoint=function(f,h){return this.point(l.toArray(f,h),1)},c.prototype.point=function(f,h){return new u(this,f,h)},c.prototype.pointFromJSON=function(f){return u.fromJSON(this,f)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(f,h){return new u(f,h[0],h[1]||f.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var f=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),p=f.redSub(h),g=f.redMul(h),y=p.redMul(h.redAdd(this.curve.a24.redMul(p)));return this.curve.point(g,y)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(f,h){var p=this.x.redAdd(this.z),g=this.x.redSub(this.z),y=f.x.redAdd(f.z),m=f.x.redSub(f.z).redMul(p),v=y.redMul(g),b=h.z.redMul(m.redAdd(v).redSqr()),x=h.x.redMul(m.redISub(v).redSqr());return this.curve.point(b,x)},u.prototype.mul=function(f){for(var h=f.clone(),p=this,g=this.curve.point(null,null),y=[];h.cmpn(0)!==0;h.iushrn(1))y.push(h.andln(1));for(var m=y.length-1;m>=0;m--)y[m]===0?(p=p.diffAdd(g,this),g=g.dbl()):(g=p.diffAdd(g,this),p=p.dbl());return g},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(f){return this.getX().cmp(f.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(e,n,a){var i=e("../utils"),s=e("bn.js"),o=e("inherits"),l=e("./base"),c=i.assert;function u(p){l.call(this,"short",p),this.a=new s(p.a,16).toRed(this.red),this.b=new s(p.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(p),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function f(p,g,y,m){l.BasePoint.call(this,p,"affine"),g===null&&y===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(g,16),this.y=new s(y,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(p,g,y,m){l.BasePoint.call(this,p,"jacobian"),g===null&&y===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(g,16),this.y=new s(y,16),this.z=new s(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,l),n.exports=u,u.prototype._getEndomorphism=function(p){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var g,y;if(p.beta)g=new s(p.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);g=(g=m[0].cmp(m[1])<0?m[0]:m[1]).toRed(this.red)}if(p.lambda)y=new s(p.lambda,16);else{var v=this._getEndoRoots(this.n);this.g.mul(v[0]).x.cmp(this.g.x.redMul(g))===0?y=v[0]:(y=v[1],c(this.g.mul(y).x.cmp(this.g.x.redMul(g))===0))}return{beta:g,lambda:y,basis:p.basis?p.basis.map((function(b){return{a:new s(b.a,16),b:new s(b.b,16)}})):this._getEndoBasis(y)}}},u.prototype._getEndoRoots=function(p){var g=p===this.p?this.red:s.mont(p),y=new s(2).toRed(g).redInvm(),m=y.redNeg(),v=new s(3).toRed(g).redNeg().redSqrt().redMul(y);return[m.redAdd(v).fromRed(),m.redSub(v).fromRed()]},u.prototype._getEndoBasis=function(p){for(var g,y,m,v,b,x,S,_,I,A=this.n.ushrn(Math.floor(this.n.bitLength()/2)),O=p,M=this.n.clone(),z=new s(1),U=new s(0),D=new s(0),T=new s(1),R=0;O.cmpn(0)!==0;){var C=M.div(O);_=M.sub(C.mul(O)),I=D.sub(C.mul(z));var N=T.sub(C.mul(U));if(!m&&_.cmp(A)<0)g=S.neg(),y=z,m=_.neg(),v=I;else if(m&&++R==2)break;S=_,M=O,O=_,D=z,z=I,T=U,U=N}b=_.neg(),x=I;var E=m.sqr().add(v.sqr());return b.sqr().add(x.sqr()).cmp(E)>=0&&(b=g,x=y),m.negative&&(m=m.neg(),v=v.neg()),b.negative&&(b=b.neg(),x=x.neg()),[{a:m,b:v},{a:b,b:x}]},u.prototype._endoSplit=function(p){var g=this.endo.basis,y=g[0],m=g[1],v=m.b.mul(p).divRound(this.n),b=y.b.neg().mul(p).divRound(this.n),x=v.mul(y.a),S=b.mul(m.a),_=v.mul(y.b),I=b.mul(m.b);return{k1:p.sub(x).sub(S),k2:_.add(I).neg()}},u.prototype.pointFromX=function(p,g){(p=new s(p,16)).red||(p=p.toRed(this.red));var y=p.redSqr().redMul(p).redIAdd(p.redMul(this.a)).redIAdd(this.b),m=y.redSqrt();if(m.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");var v=m.fromRed().isOdd();return(g&&!v||!g&&v)&&(m=m.redNeg()),this.point(p,m)},u.prototype.validate=function(p){if(p.inf)return!0;var g=p.x,y=p.y,m=this.a.redMul(g),v=g.redSqr().redMul(g).redIAdd(m).redIAdd(this.b);return y.redSqr().redISub(v).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(p,g,y){for(var m=this._endoWnafT1,v=this._endoWnafT2,b=0;b<p.length;b++){var x=this._endoSplit(g[b]),S=p[b],_=S._getBeta();x.k1.negative&&(x.k1.ineg(),S=S.neg(!0)),x.k2.negative&&(x.k2.ineg(),_=_.neg(!0)),m[2*b]=S,m[2*b+1]=_,v[2*b]=x.k1,v[2*b+1]=x.k2}for(var I=this._wnafMulAdd(1,m,v,2*b,y),A=0;A<2*b;A++)m[A]=null,v[A]=null;return I},o(f,l.BasePoint),u.prototype.point=function(p,g,y){return new f(this,p,g,y)},u.prototype.pointFromJSON=function(p,g){return f.fromJSON(this,p,g)},f.prototype._getBeta=function(){if(this.curve.endo){var p=this.precomputed;if(p&&p.beta)return p.beta;var g=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(p){var y=this.curve,m=function(v){return y.point(v.x.redMul(y.endo.beta),v.y)};p.beta=g,g.precomputed={beta:null,naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(m)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(m)}}}return g}},f.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},f.fromJSON=function(p,g,y){typeof g=="string"&&(g=JSON.parse(g));var m=p.point(g[0],g[1],y);if(!g[2])return m;function v(x){return p.point(x[0],x[1],y)}var b=g[2];return m.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[m].concat(b.doubles.points.map(v))},naf:b.naf&&{wnd:b.naf.wnd,points:[m].concat(b.naf.points.map(v))}},m},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.inf},f.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var g=this.y.redSub(p.y);g.cmpn(0)!==0&&(g=g.redMul(this.x.redSub(p.x).redInvm()));var y=g.redSqr().redISub(this.x).redISub(p.x),m=g.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,m)},f.prototype.dbl=function(){if(this.inf)return this;var p=this.y.redAdd(this.y);if(p.cmpn(0)===0)return this.curve.point(null,null);var g=this.curve.a,y=this.x.redSqr(),m=p.redInvm(),v=y.redAdd(y).redIAdd(y).redIAdd(g).redMul(m),b=v.redSqr().redISub(this.x.redAdd(this.x)),x=v.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,x)},f.prototype.getX=function(){return this.x.fromRed()},f.prototype.getY=function(){return this.y.fromRed()},f.prototype.mul=function(p){return p=new s(p,16),this.isInfinity()?this:this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve.endo?this.curve._endoWnafMulAdd([this],[p]):this.curve._wnafMul(this,p)},f.prototype.mulAdd=function(p,g,y){var m=[this,g],v=[p,y];return this.curve.endo?this.curve._endoWnafMulAdd(m,v):this.curve._wnafMulAdd(1,m,v,2)},f.prototype.jmulAdd=function(p,g,y){var m=[this,g],v=[p,y];return this.curve.endo?this.curve._endoWnafMulAdd(m,v,!0):this.curve._wnafMulAdd(1,m,v,2,!0)},f.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)},f.prototype.neg=function(p){if(this.inf)return this;var g=this.curve.point(this.x,this.y.redNeg());if(p&&this.precomputed){var y=this.precomputed,m=function(v){return v.neg()};g.precomputed={naf:y.naf&&{wnd:y.naf.wnd,points:y.naf.points.map(m)},doubles:y.doubles&&{step:y.doubles.step,points:y.doubles.points.map(m)}}}return g},f.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(h,l.BasePoint),u.prototype.jpoint=function(p,g,y){return new h(this,p,g,y)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var p=this.z.redInvm(),g=p.redSqr(),y=this.x.redMul(g),m=this.y.redMul(g).redMul(p);return this.curve.point(y,m)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var g=p.z.redSqr(),y=this.z.redSqr(),m=this.x.redMul(g),v=p.x.redMul(y),b=this.y.redMul(g.redMul(p.z)),x=p.y.redMul(y.redMul(this.z)),S=m.redSub(v),_=b.redSub(x);if(S.cmpn(0)===0)return _.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=S.redSqr(),A=I.redMul(S),O=m.redMul(I),M=_.redSqr().redIAdd(A).redISub(O).redISub(O),z=_.redMul(O.redISub(M)).redISub(b.redMul(A)),U=this.z.redMul(p.z).redMul(S);return this.curve.jpoint(M,z,U)},h.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var g=this.z.redSqr(),y=this.x,m=p.x.redMul(g),v=this.y,b=p.y.redMul(g).redMul(this.z),x=y.redSub(m),S=v.redSub(b);if(x.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=x.redSqr(),I=_.redMul(x),A=y.redMul(_),O=S.redSqr().redIAdd(I).redISub(A).redISub(A),M=S.redMul(A.redISub(O)).redISub(v.redMul(I)),z=this.z.redMul(x);return this.curve.jpoint(O,M,z)},h.prototype.dblp=function(p){if(p===0)return this;if(this.isInfinity())return this;if(!p)return this.dbl();var g;if(this.curve.zeroA||this.curve.threeA){var y=this;for(g=0;g<p;g++)y=y.dbl();return y}var m=this.curve.a,v=this.curve.tinv,b=this.x,x=this.y,S=this.z,_=S.redSqr().redSqr(),I=x.redAdd(x);for(g=0;g<p;g++){var A=b.redSqr(),O=I.redSqr(),M=O.redSqr(),z=A.redAdd(A).redIAdd(A).redIAdd(m.redMul(_)),U=b.redMul(O),D=z.redSqr().redISub(U.redAdd(U)),T=U.redISub(D),R=z.redMul(T);R=R.redIAdd(R).redISub(M);var C=I.redMul(S);g+1<p&&(_=_.redMul(M)),b=D,S=C,I=R}return this.curve.jpoint(b,I.redMul(v),S)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var p,g,y;if(this.zOne){var m=this.x.redSqr(),v=this.y.redSqr(),b=v.redSqr(),x=this.x.redAdd(v).redSqr().redISub(m).redISub(b);x=x.redIAdd(x);var S=m.redAdd(m).redIAdd(m),_=S.redSqr().redISub(x).redISub(x),I=b.redIAdd(b);I=(I=I.redIAdd(I)).redIAdd(I),p=_,g=S.redMul(x.redISub(_)).redISub(I),y=this.y.redAdd(this.y)}else{var A=this.x.redSqr(),O=this.y.redSqr(),M=O.redSqr(),z=this.x.redAdd(O).redSqr().redISub(A).redISub(M);z=z.redIAdd(z);var U=A.redAdd(A).redIAdd(A),D=U.redSqr(),T=M.redIAdd(M);T=(T=T.redIAdd(T)).redIAdd(T),p=D.redISub(z).redISub(z),g=U.redMul(z.redISub(p)).redISub(T),y=(y=this.y.redMul(this.z)).redIAdd(y)}return this.curve.jpoint(p,g,y)},h.prototype._threeDbl=function(){var p,g,y;if(this.zOne){var m=this.x.redSqr(),v=this.y.redSqr(),b=v.redSqr(),x=this.x.redAdd(v).redSqr().redISub(m).redISub(b);x=x.redIAdd(x);var S=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),_=S.redSqr().redISub(x).redISub(x);p=_;var I=b.redIAdd(b);I=(I=I.redIAdd(I)).redIAdd(I),g=S.redMul(x.redISub(_)).redISub(I),y=this.y.redAdd(this.y)}else{var A=this.z.redSqr(),O=this.y.redSqr(),M=this.x.redMul(O),z=this.x.redSub(A).redMul(this.x.redAdd(A));z=z.redAdd(z).redIAdd(z);var U=M.redIAdd(M),D=(U=U.redIAdd(U)).redAdd(U);p=z.redSqr().redISub(D),y=this.y.redAdd(this.z).redSqr().redISub(O).redISub(A);var T=O.redSqr();T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T),g=z.redMul(U.redISub(p)).redISub(T)}return this.curve.jpoint(p,g,y)},h.prototype._dbl=function(){var p=this.curve.a,g=this.x,y=this.y,m=this.z,v=m.redSqr().redSqr(),b=g.redSqr(),x=y.redSqr(),S=b.redAdd(b).redIAdd(b).redIAdd(p.redMul(v)),_=g.redAdd(g),I=(_=_.redIAdd(_)).redMul(x),A=S.redSqr().redISub(I.redAdd(I)),O=I.redISub(A),M=x.redSqr();M=(M=(M=M.redIAdd(M)).redIAdd(M)).redIAdd(M);var z=S.redMul(O).redISub(M),U=y.redAdd(y).redMul(m);return this.curve.jpoint(A,z,U)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var p=this.x.redSqr(),g=this.y.redSqr(),y=this.z.redSqr(),m=g.redSqr(),v=p.redAdd(p).redIAdd(p),b=v.redSqr(),x=this.x.redAdd(g).redSqr().redISub(p).redISub(m),S=(x=(x=(x=x.redIAdd(x)).redAdd(x).redIAdd(x)).redISub(b)).redSqr(),_=m.redIAdd(m);_=(_=(_=_.redIAdd(_)).redIAdd(_)).redIAdd(_);var I=v.redIAdd(x).redSqr().redISub(b).redISub(S).redISub(_),A=g.redMul(I);A=(A=A.redIAdd(A)).redIAdd(A);var O=this.x.redMul(S).redISub(A);O=(O=O.redIAdd(O)).redIAdd(O);var M=this.y.redMul(I.redMul(_.redISub(I)).redISub(x.redMul(S)));M=(M=(M=M.redIAdd(M)).redIAdd(M)).redIAdd(M);var z=this.z.redAdd(x).redSqr().redISub(y).redISub(S);return this.curve.jpoint(O,M,z)},h.prototype.mul=function(p,g){return p=new s(p,g),this.curve._wnafMul(this,p)},h.prototype.eq=function(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return!0;var g=this.z.redSqr(),y=p.z.redSqr();if(this.x.redMul(y).redISub(p.x.redMul(g)).cmpn(0)!==0)return!1;var m=g.redMul(this.z),v=y.redMul(p.z);return this.y.redMul(v).redISub(p.y.redMul(m)).cmpn(0)===0},h.prototype.eqXToP=function(p){var g=this.z.redSqr(),y=p.toRed(this.curve.red).redMul(g);if(this.x.cmp(y)===0)return!0;for(var m=p.clone(),v=this.curve.redN.redMul(g);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(y.redIAdd(v),this.x.cmp(y)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(e,n,a){var i,s=a,o=e("hash.js"),l=e("./curve"),c=e("./utils").assert;function u(h){h.type==="short"?this.curve=new l.short(h):h.type==="edwards"?this.curve=new l.edwards(h):this.curve=new l.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function f(h,p){Object.defineProperty(s,h,{configurable:!0,enumerable:!0,get:function(){var g=new u(p);return Object.defineProperty(s,h,{configurable:!0,enumerable:!0,value:g}),g}})}s.PresetCurve=u,f("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),f("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),f("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),f("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),f("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),f("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),f("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=e("./precomputed/secp256k1")}catch{i=void 0}f("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(e,n,a){var i=e("bn.js"),s=e("hmac-drbg"),o=e("../utils"),l=e("../curves"),c=e("brorand"),u=o.assert,f=e("./key"),h=e("./signature");function p(g){if(!(this instanceof p))return new p(g);typeof g=="string"&&(u(Object.prototype.hasOwnProperty.call(l,g),"Unknown curve "+g),g=l[g]),g instanceof l.PresetCurve&&(g={curve:g}),this.curve=g.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=g.curve.g,this.g.precompute(g.curve.n.bitLength()+1),this.hash=g.hash||g.curve.hash}n.exports=p,p.prototype.keyPair=function(g){return new f(this,g)},p.prototype.keyFromPrivate=function(g,y){return f.fromPrivate(this,g,y)},p.prototype.keyFromPublic=function(g,y){return f.fromPublic(this,g,y)},p.prototype.genKeyPair=function(g){g||(g={});for(var y=new s({hash:this.hash,pers:g.pers,persEnc:g.persEnc||"utf8",entropy:g.entropy||c(this.hash.hmacStrength),entropyEnc:g.entropy&&g.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),v=this.n.sub(new i(2));;){var b=new i(y.generate(m));if(!(b.cmp(v)>0))return b.iaddn(1),this.keyFromPrivate(b)}},p.prototype._truncateToN=function(g,y){var m=8*g.byteLength()-this.n.bitLength();return m>0&&(g=g.ushrn(m)),!y&&g.cmp(this.n)>=0?g.sub(this.n):g},p.prototype.sign=function(g,y,m,v){typeof m=="object"&&(v=m,m=null),v||(v={}),y=this.keyFromPrivate(y,m),g=this._truncateToN(new i(g,16));for(var b=this.n.byteLength(),x=y.getPrivate().toArray("be",b),S=g.toArray("be",b),_=new s({hash:this.hash,entropy:x,nonce:S,pers:v.pers,persEnc:v.persEnc||"utf8"}),I=this.n.sub(new i(1)),A=0;;A++){var O=v.k?v.k(A):new i(_.generate(this.n.byteLength()));if(!((O=this._truncateToN(O,!0)).cmpn(1)<=0||O.cmp(I)>=0)){var M=this.g.mul(O);if(!M.isInfinity()){var z=M.getX(),U=z.umod(this.n);if(U.cmpn(0)!==0){var D=O.invm(this.n).mul(U.mul(y.getPrivate()).iadd(g));if((D=D.umod(this.n)).cmpn(0)!==0){var T=(M.getY().isOdd()?1:0)|(z.cmp(U)!==0?2:0);return v.canonical&&D.cmp(this.nh)>0&&(D=this.n.sub(D),T^=1),new h({r:U,s:D,recoveryParam:T})}}}}}},p.prototype.verify=function(g,y,m,v){g=this._truncateToN(new i(g,16)),m=this.keyFromPublic(m,v);var b=(y=new h(y,"hex")).r,x=y.s;if(b.cmpn(1)<0||b.cmp(this.n)>=0||x.cmpn(1)<0||x.cmp(this.n)>=0)return!1;var S,_=x.invm(this.n),I=_.mul(g).umod(this.n),A=_.mul(b).umod(this.n);return this.curve._maxwellTrick?!(S=this.g.jmulAdd(I,m.getPublic(),A)).isInfinity()&&S.eqXToP(b):!(S=this.g.mulAdd(I,m.getPublic(),A)).isInfinity()&&S.getX().umod(this.n).cmp(b)===0},p.prototype.recoverPubKey=function(g,y,m,v){u((3&m)===m,"The recovery param is more than two bits"),y=new h(y,v);var b=this.n,x=new i(g),S=y.r,_=y.s,I=1&m,A=m>>1;if(S.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");S=A?this.curve.pointFromX(S.add(this.curve.n),I):this.curve.pointFromX(S,I);var O=y.r.invm(b),M=b.sub(x).mul(O).umod(b),z=_.mul(O).umod(b);return this.g.mulAdd(M,S,z)},p.prototype.getKeyRecoveryParam=function(g,y,m,v){if((y=new h(y,v)).recoveryParam!==null)return y.recoveryParam;for(var b=0;b<4;b++){var x;try{x=this.recoverPubKey(g,y,b)}catch{continue}if(x.eq(m))return b}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(e,n,a){var i=e("bn.js"),s=e("../utils").assert;function o(l,c){this.ec=l,this.priv=null,this.pub=null,c.priv&&this._importPrivate(c.priv,c.privEnc),c.pub&&this._importPublic(c.pub,c.pubEnc)}n.exports=o,o.fromPublic=function(l,c,u){return c instanceof o?c:new o(l,{pub:c,pubEnc:u})},o.fromPrivate=function(l,c,u){return c instanceof o?c:new o(l,{priv:c,privEnc:u})},o.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(l,c){return typeof l=="string"&&(c=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,l):this.pub},o.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(l,c){this.priv=new i(l,c||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(l,c){if(l.x||l.y)return this.ec.curve.type==="mont"?s(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||s(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y));this.pub=this.ec.curve.decodePoint(l,c)},o.prototype.derive=function(l){return l.validate()||s(l.validate(),"public point not validated"),l.mul(this.priv).getX()},o.prototype.sign=function(l,c,u){return this.ec.sign(l,this,c,u)},o.prototype.verify=function(l,c){return this.ec.verify(l,c,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(e,n,a){var i=e("bn.js"),s=e("../utils"),o=s.assert;function l(p,g){if(p instanceof l)return p;this._importDER(p,g)||(o(p.r&&p.s,"Signature without r or s"),this.r=new i(p.r,16),this.s=new i(p.s,16),p.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=p.recoveryParam)}function c(){this.place=0}function u(p,g){var y=p[g.place++];if(!(128&y))return y;var m=15&y;if(m===0||m>4)return!1;for(var v=0,b=0,x=g.place;b<m;b++,x++)v<<=8,v|=p[x],v>>>=0;return!(v<=127)&&(g.place=x,v)}function f(p){for(var g=0,y=p.length-1;!p[g]&&!(128&p[g+1])&&g<y;)g++;return g===0?p:p.slice(g)}function h(p,g){if(g<128)p.push(g);else{var y=1+(Math.log(g)/Math.LN2>>>3);for(p.push(128|y);--y;)p.push(g>>>(y<<3)&255);p.push(g)}}n.exports=l,l.prototype._importDER=function(p,g){p=s.toArray(p,g);var y=new c;if(p[y.place++]!==48)return!1;var m=u(p,y);if(m===!1||m+y.place!==p.length||p[y.place++]!==2)return!1;var v=u(p,y);if(v===!1)return!1;var b=p.slice(y.place,v+y.place);if(y.place+=v,p[y.place++]!==2)return!1;var x=u(p,y);if(x===!1||p.length!==x+y.place)return!1;var S=p.slice(y.place,x+y.place);if(b[0]===0){if(!(128&b[1]))return!1;b=b.slice(1)}if(S[0]===0){if(!(128&S[1]))return!1;S=S.slice(1)}return this.r=new i(b),this.s=new i(S),this.recoveryParam=null,!0},l.prototype.toDER=function(p){var g=this.r.toArray(),y=this.s.toArray();for(128&g[0]&&(g=[0].concat(g)),128&y[0]&&(y=[0].concat(y)),g=f(g),y=f(y);!(y[0]||128&y[1]);)y=y.slice(1);var m=[2];h(m,g.length),(m=m.concat(g)).push(2),h(m,y.length);var v=m.concat(y),b=[48];return h(b,v.length),b=b.concat(v),s.encode(b,p)}},{"../utils":419,"bn.js":420}],415:[function(e,n,a){var i=e("hash.js"),s=e("../curves"),o=e("../utils"),l=o.assert,c=o.parseBytes,u=e("./key"),f=e("./signature");function h(p){if(l(p==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(p);p=s[p].curve,this.curve=p,this.g=p.g,this.g.precompute(p.n.bitLength()+1),this.pointClass=p.point().constructor,this.encodingLength=Math.ceil(p.n.bitLength()/8),this.hash=i.sha512}n.exports=h,h.prototype.sign=function(p,g){p=c(p);var y=this.keyFromSecret(g),m=this.hashInt(y.messagePrefix(),p),v=this.g.mul(m),b=this.encodePoint(v),x=this.hashInt(b,y.pubBytes(),p).mul(y.priv()),S=m.add(x).umod(this.curve.n);return this.makeSignature({R:v,S,Rencoded:b})},h.prototype.verify=function(p,g,y){p=c(p),g=this.makeSignature(g);var m=this.keyFromPublic(y),v=this.hashInt(g.Rencoded(),m.pubBytes(),p),b=this.g.mul(g.S());return g.R().add(m.pub().mul(v)).eq(b)},h.prototype.hashInt=function(){for(var p=this.hash(),g=0;g<arguments.length;g++)p.update(arguments[g]);return o.intFromLE(p.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(p){return u.fromPublic(this,p)},h.prototype.keyFromSecret=function(p){return u.fromSecret(this,p)},h.prototype.makeSignature=function(p){return p instanceof f?p:new f(this,p)},h.prototype.encodePoint=function(p){var g=p.getY().toArray("le",this.encodingLength);return g[this.encodingLength-1]|=p.getX().isOdd()?128:0,g},h.prototype.decodePoint=function(p){var g=(p=o.parseBytes(p)).length-1,y=p.slice(0,g).concat(-129&p[g]),m=(128&p[g])!=0,v=o.intFromLE(y);return this.curve.pointFromY(v,m)},h.prototype.encodeInt=function(p){return p.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(p){return o.intFromLE(p)},h.prototype.isPoint=function(p){return p instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(e,n,a){var i=e("../utils"),s=i.assert,o=i.parseBytes,l=i.cachedProperty;function c(u,f){this.eddsa=u,this._secret=o(f.secret),u.isPoint(f.pub)?this._pub=f.pub:this._pubBytes=o(f.pub)}c.fromPublic=function(u,f){return f instanceof c?f:new c(u,{pub:f})},c.fromSecret=function(u,f){return f instanceof c?f:new c(u,{secret:f})},c.prototype.secret=function(){return this._secret},l(c,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),l(c,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),l(c,"privBytes",(function(){var u=this.eddsa,f=this.hash(),h=u.encodingLength-1,p=f.slice(0,u.encodingLength);return p[0]&=248,p[h]&=127,p[h]|=64,p})),l(c,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),l(c,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),l(c,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),c.prototype.sign=function(u){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(u,this)},c.prototype.verify=function(u,f){return this.eddsa.verify(u,f,this)},c.prototype.getSecret=function(u){return s(this._secret,"KeyPair is public only"),i.encode(this.secret(),u)},c.prototype.getPublic=function(u){return i.encode(this.pubBytes(),u)},n.exports=c},{"../utils":419}],417:[function(e,n,a){var i=e("bn.js"),s=e("../utils"),o=s.assert,l=s.cachedProperty,c=s.parseBytes;function u(f,h){this.eddsa=f,typeof h!="object"&&(h=c(h)),Array.isArray(h)&&(h={R:h.slice(0,f.encodingLength),S:h.slice(f.encodingLength)}),o(h.R&&h.S,"Signature without R or S"),f.isPoint(h.R)&&(this._R=h.R),h.S instanceof i&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}l(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),l(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),l(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),l(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},n.exports=u},{"../utils":419,"bn.js":420}],418:[function(e,n,a){n.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(e,n,a){var i=a,s=e("bn.js"),o=e("minimalistic-assert"),l=e("minimalistic-crypto-utils");i.assert=o,i.toArray=l.toArray,i.zero2=l.zero2,i.toHex=l.toHex,i.encode=l.encode,i.getNAF=function(c,u,f){var h=new Array(Math.max(c.bitLength(),f)+1);h.fill(0);for(var p=1<<u+1,g=c.clone(),y=0;y<h.length;y++){var m,v=g.andln(p-1);g.isOdd()?(m=v>(p>>1)-1?(p>>1)-v:v,g.isubn(m)):m=0,h[y]=m,g.iushrn(1)}return h},i.getJSF=function(c,u){var f=[[],[]];c=c.clone(),u=u.clone();for(var h,p=0,g=0;c.cmpn(-p)>0||u.cmpn(-g)>0;){var y,m,v=c.andln(3)+p&3,b=u.andln(3)+g&3;v===3&&(v=-1),b===3&&(b=-1),y=(1&v)==0?0:(h=c.andln(7)+p&7)!==3&&h!==5||b!==2?v:-v,f[0].push(y),m=(1&b)==0?0:(h=u.andln(7)+g&7)!==3&&h!==5||v!==2?b:-b,f[1].push(m),2*p===y+1&&(p=1-p),2*g===m+1&&(g=1-g),c.iushrn(1),u.iushrn(1)}return f},i.cachedProperty=function(c,u,f){var h="_"+u;c.prototype[u]=function(){return this[h]!==void 0?this[h]:this[h]=f.call(this)}},i.parseBytes=function(c){return typeof c=="string"?i.toArray(c,"hex"):c},i.intFromLE=function(c){return new s(c,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(e,n,a){arguments[4][184][0].apply(a,arguments)},{buffer:188,dup:184}],421:[function(e,n,a){n.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(e,n,a){var i=Object.create||function(O){var M=function(){};return M.prototype=O,new M},s=Object.keys||function(O){var M=[];for(var z in O)Object.prototype.hasOwnProperty.call(O,z)&&M.push(z);return z},o=Function.prototype.bind||function(O){var M=this;return function(){return M.apply(O,arguments)}};function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}n.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var c,u=10;try{var f={};Object.defineProperty&&Object.defineProperty(f,"x",{value:0}),c=f.x===0}catch{c=!1}function h(O){return O._maxListeners===void 0?l.defaultMaxListeners:O._maxListeners}function p(O,M,z){if(M)O.call(z);else for(var U=O.length,D=A(O,U),T=0;T<U;++T)D[T].call(z)}function g(O,M,z,U){if(M)O.call(z,U);else for(var D=O.length,T=A(O,D),R=0;R<D;++R)T[R].call(z,U)}function y(O,M,z,U,D){if(M)O.call(z,U,D);else for(var T=O.length,R=A(O,T),C=0;C<T;++C)R[C].call(z,U,D)}function m(O,M,z,U,D,T){if(M)O.call(z,U,D,T);else for(var R=O.length,C=A(O,R),N=0;N<R;++N)C[N].call(z,U,D,T)}function v(O,M,z,U){if(M)O.apply(z,U);else for(var D=O.length,T=A(O,D),R=0;R<D;++R)T[R].apply(z,U)}function b(O,M,z,U){var D,T,R;if(typeof z!="function")throw new TypeError('"listener" argument must be a function');if((T=O._events)?(T.newListener&&(O.emit("newListener",M,z.listener?z.listener:z),T=O._events),R=T[M]):(T=O._events=i(null),O._eventsCount=0),R){if(typeof R=="function"?R=T[M]=U?[z,R]:[R,z]:U?R.unshift(z):R.push(z),!R.warned&&(D=h(O))&&D>0&&R.length>D){R.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+R.length+' "'+String(M)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');C.name="MaxListenersExceededWarning",C.emitter=O,C.type=M,C.count=R.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",C.name,C.message)}}else R=T[M]=z,++O._eventsCount;return O}function x(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var O=new Array(arguments.length),M=0;M<O.length;++M)O[M]=arguments[M];this.listener.apply(this.target,O)}}function S(O,M,z){var U={fired:!1,wrapFn:void 0,target:O,type:M,listener:z},D=o.call(x,U);return D.listener=z,U.wrapFn=D,D}function _(O,M,z){var U=O._events;if(!U)return[];var D=U[M];return D?typeof D=="function"?z?[D.listener||D]:[D]:z?(function(T){for(var R=new Array(T.length),C=0;C<R.length;++C)R[C]=T[C].listener||T[C];return R})(D):A(D,D.length):[]}function I(O){var M=this._events;if(M){var z=M[O];if(typeof z=="function")return 1;if(z)return z.length}return 0}function A(O,M){for(var z=new Array(M),U=0;U<M;++U)z[U]=O[U];return z}c?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(O){if(typeof O!="number"||O<0||O!=O)throw new TypeError('"defaultMaxListeners" must be a positive number');u=O}}):l.defaultMaxListeners=u,l.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||isNaN(O))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=O,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(O){var M,z,U,D,T,R,C=O==="error";if(R=this._events)C=C&&R.error==null;else if(!C)return!1;if(C){if(arguments.length>1&&(M=arguments[1]),M instanceof Error)throw M;var N=new Error('Unhandled "error" event. ('+M+")");throw N.context=M,N}if(!(z=R[O]))return!1;var E=typeof z=="function";switch(U=arguments.length){case 1:p(z,E,this);break;case 2:g(z,E,this,arguments[1]);break;case 3:y(z,E,this,arguments[1],arguments[2]);break;case 4:m(z,E,this,arguments[1],arguments[2],arguments[3]);break;default:for(D=new Array(U-1),T=1;T<U;T++)D[T-1]=arguments[T];v(z,E,this,D)}return!0},l.prototype.addListener=function(O,M){return b(this,O,M,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(O,M){return b(this,O,M,!0)},l.prototype.once=function(O,M){if(typeof M!="function")throw new TypeError('"listener" argument must be a function');return this.on(O,S(this,O,M)),this},l.prototype.prependOnceListener=function(O,M){if(typeof M!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(O,S(this,O,M)),this},l.prototype.removeListener=function(O,M){var z,U,D,T,R;if(typeof M!="function")throw new TypeError('"listener" argument must be a function');if(!(U=this._events))return this;if(!(z=U[O]))return this;if(z===M||z.listener===M)--this._eventsCount==0?this._events=i(null):(delete U[O],U.removeListener&&this.emit("removeListener",O,z.listener||M));else if(typeof z!="function"){for(D=-1,T=z.length-1;T>=0;T--)if(z[T]===M||z[T].listener===M){R=z[T].listener,D=T;break}if(D<0)return this;D===0?z.shift():(function(C,N){for(var E=N,k=E+1,P=C.length;k<P;E+=1,k+=1)C[E]=C[k];C.pop()})(z,D),z.length===1&&(U[O]=z[0]),U.removeListener&&this.emit("removeListener",O,R||M)}return this},l.prototype.removeAllListeners=function(O){var M,z,U;if(!(z=this._events))return this;if(!z.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):z[O]&&(--this._eventsCount==0?this._events=i(null):delete z[O]),this;if(arguments.length===0){var D,T=s(z);for(U=0;U<T.length;++U)(D=T[U])!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(M=z[O])=="function")this.removeListener(O,M);else if(M)for(U=M.length-1;U>=0;U--)this.removeListener(O,M[U]);return this},l.prototype.listeners=function(O){return _(this,O,!0)},l.prototype.rawListeners=function(O){return _(this,O,!1)},l.listenerCount=function(O,M){return typeof O.listenerCount=="function"?O.listenerCount(M):I.call(O,M)},l.prototype.listenerCount=I,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("md5.js");n.exports=function(o,l,c,u){if(i.isBuffer(o)||(o=i.from(o,"binary")),l&&(i.isBuffer(l)||(l=i.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var f=c/8,h=i.alloc(f),p=i.alloc(u||0),g=i.alloc(0);f>0||u>0;){var y=new s;y.update(g),y.update(o),l&&y.update(l),g=y.digest();var m=0;if(f>0){var v=h.length-f;m=Math.min(f,g.length),g.copy(h,v,0,m),f-=m}if(m<g.length&&u>0){var b=p.length-u,x=Math.min(u,g.length-m);g.copy(p,b,m,m+x),u-=x}}return g.fill(0),{key:h,iv:p}}},{"md5.js":450,"safe-buffer":494}],424:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.CsvParserStream=a.ParserOptions=a.parseFile=a.parseStream=a.parseString=a.parse=a.FormatterOptions=a.CsvFormatterStream=a.writeToPath=a.writeToString=a.writeToBuffer=a.writeToStream=a.write=a.format=void 0;var i=e("@fast-csv/format");Object.defineProperty(a,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(a,"write",{enumerable:!0,get:function(){return i.write}}),Object.defineProperty(a,"writeToStream",{enumerable:!0,get:function(){return i.writeToStream}}),Object.defineProperty(a,"writeToBuffer",{enumerable:!0,get:function(){return i.writeToBuffer}}),Object.defineProperty(a,"writeToString",{enumerable:!0,get:function(){return i.writeToString}}),Object.defineProperty(a,"writeToPath",{enumerable:!0,get:function(){return i.writeToPath}}),Object.defineProperty(a,"CsvFormatterStream",{enumerable:!0,get:function(){return i.CsvFormatterStream}}),Object.defineProperty(a,"FormatterOptions",{enumerable:!0,get:function(){return i.FormatterOptions}});var s=e("@fast-csv/parse");Object.defineProperty(a,"parse",{enumerable:!0,get:function(){return s.parse}}),Object.defineProperty(a,"parseString",{enumerable:!0,get:function(){return s.parseString}}),Object.defineProperty(a,"parseStream",{enumerable:!0,get:function(){return s.parseStream}}),Object.defineProperty(a,"parseFile",{enumerable:!0,get:function(){return s.parseFile}}),Object.defineProperty(a,"ParserOptions",{enumerable:!0,get:function(){return s.ParserOptions}}),Object.defineProperty(a,"CsvParserStream",{enumerable:!0,get:function(){return s.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("readable-stream").Transform;function o(l){s.call(this),this._block=i.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(o,s),o.prototype._transform=function(l,c,u){var f=null;try{this.update(l,c)}catch(h){f=h}u(f)},o.prototype._flush=function(l){var c=null;try{this.push(this.digest())}catch(u){c=u}l(c)},o.prototype.update=function(l,c){if((function(y,m){if(!i.isBuffer(y)&&typeof y!="string")throw new TypeError(m+" must be a string or a buffer")})(l,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(l)||(l=i.from(l,c));for(var u=this._block,f=0;this._blockOffset+l.length-f>=this._blockSize;){for(var h=this._blockOffset;h<this._blockSize;)u[h++]=l[f++];this._update(),this._blockOffset=0}for(;f<l.length;)u[this._blockOffset++]=l[f++];for(var p=0,g=8*l.length;g>0;++p)this._length[p]+=g,(g=this._length[p]/4294967296|0)>0&&(this._length[p]-=4294967296*g);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();l!==void 0&&(c=c.toString(l)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return c},o.prototype._digest=function(){throw new Error("_digest is not implemented")},n.exports=o},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(e,n,a){var i=a;i.utils=e("./hash/utils"),i.common=e("./hash/common"),i.sha=e("./hash/sha"),i.ripemd=e("./hash/ripemd"),i.hmac=e("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(e,n,a){var i=e("./utils"),s=e("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}a.BlockHash=o,o.prototype.update=function(l,c){if(l=i.toArray(l,c),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){var u=(l=this.pending).length%this._delta8;this.pending=l.slice(l.length-u,l.length),this.pending.length===0&&(this.pending=null),l=i.join32(l,0,l.length-u,this.endian);for(var f=0;f<l.length;f+=this._delta32)this._update(l,f,f+this._delta32)}return this},o.prototype.digest=function(l){return this.update(this._pad()),s(this.pending===null),this._digest(l)},o.prototype._pad=function(){var l=this.pendingTotal,c=this._delta8,u=c-(l+this.padLength)%c,f=new Array(u+this.padLength);f[0]=128;for(var h=1;h<u;h++)f[h]=0;if(l<<=3,this.endian==="big"){for(var p=8;p<this.padLength;p++)f[h++]=0;f[h++]=0,f[h++]=0,f[h++]=0,f[h++]=0,f[h++]=l>>>24&255,f[h++]=l>>>16&255,f[h++]=l>>>8&255,f[h++]=255&l}else for(f[h++]=255&l,f[h++]=l>>>8&255,f[h++]=l>>>16&255,f[h++]=l>>>24&255,f[h++]=0,f[h++]=0,f[h++]=0,f[h++]=0,p=8;p<this.padLength;p++)f[h++]=0;return f}},{"./utils":437,"minimalistic-assert":453}],428:[function(e,n,a){var i=e("./utils"),s=e("minimalistic-assert");function o(l,c,u){if(!(this instanceof o))return new o(l,c,u);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(c,u))}n.exports=o,o.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),s(l.length<=this.blockSize);for(var c=l.length;c<this.blockSize;c++)l.push(0);for(c=0;c<l.length;c++)l[c]^=54;for(this.inner=new this.Hash().update(l),c=0;c<l.length;c++)l[c]^=106;this.outer=new this.Hash().update(l)},o.prototype.update=function(l,c){return this.inner.update(l,c),this},o.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)}},{"./utils":437,"minimalistic-assert":453}],429:[function(e,n,a){var i=e("./utils"),s=e("./common"),o=i.rotl32,l=i.sum32,c=i.sum32_3,u=i.sum32_4,f=s.BlockHash;function h(){if(!(this instanceof h))return new h;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function p(S,_,I,A){return S<=15?_^I^A:S<=31?_&I|~_&A:S<=47?(_|~I)^A:S<=63?_&A|I&~A:_^(I|~A)}function g(S){return S<=15?0:S<=31?1518500249:S<=47?1859775393:S<=63?2400959708:2840853838}function y(S){return S<=15?1352829926:S<=31?1548603684:S<=47?1836072691:S<=63?2053994217:0}i.inherits(h,f),a.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(S,_){for(var I=this.h[0],A=this.h[1],O=this.h[2],M=this.h[3],z=this.h[4],U=I,D=A,T=O,R=M,C=z,N=0;N<80;N++){var E=l(o(u(I,p(N,A,O,M),S[m[N]+_],g(N)),b[N]),z);I=z,z=M,M=o(O,10),O=A,A=E,E=l(o(u(U,p(79-N,D,T,R),S[v[N]+_],y(N)),x[N]),C),U=C,C=R,R=o(T,10),T=D,D=E}E=c(this.h[1],O,R),this.h[1]=c(this.h[2],M,C),this.h[2]=c(this.h[3],z,U),this.h[3]=c(this.h[4],I,D),this.h[4]=c(this.h[0],A,T),this.h[0]=E},h.prototype._digest=function(S){return S==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],x=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(e,n,a){a.sha1=e("./sha/1"),a.sha224=e("./sha/224"),a.sha256=e("./sha/256"),a.sha384=e("./sha/384"),a.sha512=e("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(e,n,a){var i=e("../utils"),s=e("../common"),o=e("./common"),l=i.rotl32,c=i.sum32,u=i.sum32_5,f=o.ft_1,h=s.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function g(){if(!(this instanceof g))return new g;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(g,h),n.exports=g,g.blockSize=512,g.outSize=160,g.hmacStrength=80,g.padLength=64,g.prototype._update=function(y,m){for(var v=this.W,b=0;b<16;b++)v[b]=y[m+b];for(;b<v.length;b++)v[b]=l(v[b-3]^v[b-8]^v[b-14]^v[b-16],1);var x=this.h[0],S=this.h[1],_=this.h[2],I=this.h[3],A=this.h[4];for(b=0;b<v.length;b++){var O=~~(b/20),M=u(l(x,5),f(O,S,_,I),A,v[b],p[O]);A=I,I=_,_=l(S,30),S=x,x=M}this.h[0]=c(this.h[0],x),this.h[1]=c(this.h[1],S),this.h[2]=c(this.h[2],_),this.h[3]=c(this.h[3],I),this.h[4]=c(this.h[4],A)},g.prototype._digest=function(y){return y==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(e,n,a){var i=e("../utils"),s=e("./256");function o(){if(!(this instanceof o))return new o;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(o,s),n.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(l){return l==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(e,n,a){var i=e("../utils"),s=e("../common"),o=e("./common"),l=e("minimalistic-assert"),c=i.sum32,u=i.sum32_4,f=i.sum32_5,h=o.ch32,p=o.maj32,g=o.s0_256,y=o.s1_256,m=o.g0_256,v=o.g1_256,b=s.BlockHash,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function S(){if(!(this instanceof S))return new S;b.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=x,this.W=new Array(64)}i.inherits(S,b),n.exports=S,S.blockSize=512,S.outSize=256,S.hmacStrength=192,S.padLength=64,S.prototype._update=function(_,I){for(var A=this.W,O=0;O<16;O++)A[O]=_[I+O];for(;O<A.length;O++)A[O]=u(v(A[O-2]),A[O-7],m(A[O-15]),A[O-16]);var M=this.h[0],z=this.h[1],U=this.h[2],D=this.h[3],T=this.h[4],R=this.h[5],C=this.h[6],N=this.h[7];for(l(this.k.length===A.length),O=0;O<A.length;O++){var E=f(N,y(T),h(T,R,C),this.k[O],A[O]),k=c(g(M),p(M,z,U));N=C,C=R,R=T,T=c(D,E),D=U,U=z,z=M,M=c(E,k)}this.h[0]=c(this.h[0],M),this.h[1]=c(this.h[1],z),this.h[2]=c(this.h[2],U),this.h[3]=c(this.h[3],D),this.h[4]=c(this.h[4],T),this.h[5]=c(this.h[5],R),this.h[6]=c(this.h[6],C),this.h[7]=c(this.h[7],N)},S.prototype._digest=function(_){return _==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(e,n,a){var i=e("../utils"),s=e("./512");function o(){if(!(this instanceof o))return new o;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(o,s),n.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(l){return l==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(e,n,a){var i=e("../utils"),s=e("../common"),o=e("minimalistic-assert"),l=i.rotr64_hi,c=i.rotr64_lo,u=i.shr64_hi,f=i.shr64_lo,h=i.sum64,p=i.sum64_hi,g=i.sum64_lo,y=i.sum64_4_hi,m=i.sum64_4_lo,v=i.sum64_5_hi,b=i.sum64_5_lo,x=s.BlockHash,S=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;x.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=S,this.W=new Array(160)}function I(k,P,q,H,L){var K=k&q^~k&L;return K<0&&(K+=4294967296),K}function A(k,P,q,H,L,K){var Y=P&H^~P&K;return Y<0&&(Y+=4294967296),Y}function O(k,P,q,H,L){var K=k&q^k&L^q&L;return K<0&&(K+=4294967296),K}function M(k,P,q,H,L,K){var Y=P&H^P&K^H&K;return Y<0&&(Y+=4294967296),Y}function z(k,P){var q=l(k,P,28)^l(P,k,2)^l(P,k,7);return q<0&&(q+=4294967296),q}function U(k,P){var q=c(k,P,28)^c(P,k,2)^c(P,k,7);return q<0&&(q+=4294967296),q}function D(k,P){var q=l(k,P,14)^l(k,P,18)^l(P,k,9);return q<0&&(q+=4294967296),q}function T(k,P){var q=c(k,P,14)^c(k,P,18)^c(P,k,9);return q<0&&(q+=4294967296),q}function R(k,P){var q=l(k,P,1)^l(k,P,8)^u(k,P,7);return q<0&&(q+=4294967296),q}function C(k,P){var q=c(k,P,1)^c(k,P,8)^f(k,P,7);return q<0&&(q+=4294967296),q}function N(k,P){var q=l(k,P,19)^l(P,k,29)^u(k,P,6);return q<0&&(q+=4294967296),q}function E(k,P){var q=c(k,P,19)^c(P,k,29)^f(k,P,6);return q<0&&(q+=4294967296),q}i.inherits(_,x),n.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(k,P){for(var q=this.W,H=0;H<32;H++)q[H]=k[P+H];for(;H<q.length;H+=2){var L=N(q[H-4],q[H-3]),K=E(q[H-4],q[H-3]),Y=q[H-14],Z=q[H-13],V=R(q[H-30],q[H-29]),ee=C(q[H-30],q[H-29]),B=q[H-32],F=q[H-31];q[H]=y(L,K,Y,Z,V,ee,B,F),q[H+1]=m(L,K,Y,Z,V,ee,B,F)}},_.prototype._update=function(k,P){this._prepareBlock(k,P);var q=this.W,H=this.h[0],L=this.h[1],K=this.h[2],Y=this.h[3],Z=this.h[4],V=this.h[5],ee=this.h[6],B=this.h[7],F=this.h[8],X=this.h[9],te=this.h[10],se=this.h[11],ce=this.h[12],ue=this.h[13],oe=this.h[14],le=this.h[15];o(this.k.length===q.length);for(var pe=0;pe<q.length;pe+=2){var ye=oe,be=le,Ie=D(F,X),Oe=T(F,X),Me=I(F,X,te,se,ce),Re=A(F,X,te,se,ce,ue),He=this.k[pe],qe=this.k[pe+1],ct=q[pe],ft=q[pe+1],St=v(ye,be,Ie,Oe,Me,Re,He,qe,ct,ft),Rt=b(ye,be,Ie,Oe,Me,Re,He,qe,ct,ft);ye=z(H,L),be=U(H,L),Ie=O(H,L,K,Y,Z),Oe=M(H,L,K,Y,Z,V);var Ft=p(ye,be,Ie,Oe),ot=g(ye,be,Ie,Oe);oe=ce,le=ue,ce=te,ue=se,te=F,se=X,F=p(ee,B,St,Rt),X=g(B,B,St,Rt),ee=Z,B=V,Z=K,V=Y,K=H,Y=L,H=p(St,Rt,Ft,ot),L=g(St,Rt,Ft,ot)}h(this.h,0,H,L),h(this.h,2,K,Y),h(this.h,4,Z,V),h(this.h,6,ee,B),h(this.h,8,F,X),h(this.h,10,te,se),h(this.h,12,ce,ue),h(this.h,14,oe,le)},_.prototype._digest=function(k){return k==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(e,n,a){var i=e("../utils").rotr32;function s(c,u,f){return c&u^~c&f}function o(c,u,f){return c&u^c&f^u&f}function l(c,u,f){return c^u^f}a.ft_1=function(c,u,f,h){return c===0?s(u,f,h):c===1||c===3?l(u,f,h):c===2?o(u,f,h):void 0},a.ch32=s,a.maj32=o,a.p32=l,a.s0_256=function(c){return i(c,2)^i(c,13)^i(c,22)},a.s1_256=function(c){return i(c,6)^i(c,11)^i(c,25)},a.g0_256=function(c){return i(c,7)^i(c,18)^c>>>3},a.g1_256=function(c){return i(c,17)^i(c,19)^c>>>10}},{"../utils":437}],437:[function(e,n,a){var i=e("minimalistic-assert"),s=e("inherits");function o(f,h){return(64512&f.charCodeAt(h))==55296&&!(h<0||h+1>=f.length)&&(64512&f.charCodeAt(h+1))==56320}function l(f){return(f>>>24|f>>>8&65280|f<<8&16711680|(255&f)<<24)>>>0}function c(f){return f.length===1?"0"+f:f}function u(f){return f.length===7?"0"+f:f.length===6?"00"+f:f.length===5?"000"+f:f.length===4?"0000"+f:f.length===3?"00000"+f:f.length===2?"000000"+f:f.length===1?"0000000"+f:f}a.inherits=s,a.toArray=function(f,h){if(Array.isArray(f))return f.slice();if(!f)return[];var p=[];if(typeof f=="string")if(h){if(h==="hex")for((f=f.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(f="0"+f),y=0;y<f.length;y+=2)p.push(parseInt(f[y]+f[y+1],16))}else for(var g=0,y=0;y<f.length;y++){var m=f.charCodeAt(y);m<128?p[g++]=m:m<2048?(p[g++]=m>>6|192,p[g++]=63&m|128):o(f,y)?(m=65536+((1023&m)<<10)+(1023&f.charCodeAt(++y)),p[g++]=m>>18|240,p[g++]=m>>12&63|128,p[g++]=m>>6&63|128,p[g++]=63&m|128):(p[g++]=m>>12|224,p[g++]=m>>6&63|128,p[g++]=63&m|128)}else for(y=0;y<f.length;y++)p[y]=0|f[y];return p},a.toHex=function(f){for(var h="",p=0;p<f.length;p++)h+=c(f[p].toString(16));return h},a.htonl=l,a.toHex32=function(f,h){for(var p="",g=0;g<f.length;g++){var y=f[g];h==="little"&&(y=l(y)),p+=u(y.toString(16))}return p},a.zero2=c,a.zero8=u,a.join32=function(f,h,p,g){var y=p-h;i(y%4==0);for(var m=new Array(y/4),v=0,b=h;v<m.length;v++,b+=4){var x;x=g==="big"?f[b]<<24|f[b+1]<<16|f[b+2]<<8|f[b+3]:f[b+3]<<24|f[b+2]<<16|f[b+1]<<8|f[b],m[v]=x>>>0}return m},a.split32=function(f,h){for(var p=new Array(4*f.length),g=0,y=0;g<f.length;g++,y+=4){var m=f[g];h==="big"?(p[y]=m>>>24,p[y+1]=m>>>16&255,p[y+2]=m>>>8&255,p[y+3]=255&m):(p[y+3]=m>>>24,p[y+2]=m>>>16&255,p[y+1]=m>>>8&255,p[y]=255&m)}return p},a.rotr32=function(f,h){return f>>>h|f<<32-h},a.rotl32=function(f,h){return f<<h|f>>>32-h},a.sum32=function(f,h){return f+h>>>0},a.sum32_3=function(f,h,p){return f+h+p>>>0},a.sum32_4=function(f,h,p,g){return f+h+p+g>>>0},a.sum32_5=function(f,h,p,g,y){return f+h+p+g+y>>>0},a.sum64=function(f,h,p,g){var y=f[h],m=g+f[h+1]>>>0,v=(m<g?1:0)+p+y;f[h]=v>>>0,f[h+1]=m},a.sum64_hi=function(f,h,p,g){return(h+g>>>0<h?1:0)+f+p>>>0},a.sum64_lo=function(f,h,p,g){return h+g>>>0},a.sum64_4_hi=function(f,h,p,g,y,m,v,b){var x=0,S=h;return x+=(S=S+g>>>0)<h?1:0,x+=(S=S+m>>>0)<m?1:0,f+p+y+v+(x+=(S=S+b>>>0)<b?1:0)>>>0},a.sum64_4_lo=function(f,h,p,g,y,m,v,b){return h+g+m+b>>>0},a.sum64_5_hi=function(f,h,p,g,y,m,v,b,x,S){var _=0,I=h;return _+=(I=I+g>>>0)<h?1:0,_+=(I=I+m>>>0)<m?1:0,_+=(I=I+b>>>0)<b?1:0,f+p+y+v+x+(_+=(I=I+S>>>0)<S?1:0)>>>0},a.sum64_5_lo=function(f,h,p,g,y,m,v,b,x,S){return h+g+m+b+S>>>0},a.rotr64_hi=function(f,h,p){return(h<<32-p|f>>>p)>>>0},a.rotr64_lo=function(f,h,p){return(f<<32-p|h>>>p)>>>0},a.shr64_hi=function(f,h,p){return f>>>p},a.shr64_lo=function(f,h,p){return(f<<32-p|h>>>p)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(e,n,a){var i=e("hash.js"),s=e("minimalistic-crypto-utils"),o=e("minimalistic-assert");function l(c){if(!(this instanceof l))return new l(c);this.hash=c.hash,this.predResist=!!c.predResist,this.outLen=this.hash.outSize,this.minEntropy=c.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=s.toArray(c.entropy,c.entropyEnc||"hex"),f=s.toArray(c.nonce,c.nonceEnc||"hex"),h=s.toArray(c.pers,c.persEnc||"hex");o(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,f,h)}n.exports=l,l.prototype._init=function(c,u,f){var h=c.concat(u).concat(f);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var p=0;p<this.V.length;p++)this.K[p]=0,this.V[p]=1;this._update(h),this._reseed=1,this.reseedInterval=281474976710656},l.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},l.prototype._update=function(c){var u=this._hmac().update(this.V).update([0]);c&&(u=u.update(c)),this.K=u.digest(),this.V=this._hmac().update(this.V).digest(),c&&(this.K=this._hmac().update(this.V).update([1]).update(c).digest(),this.V=this._hmac().update(this.V).digest())},l.prototype.reseed=function(c,u,f,h){typeof u!="string"&&(h=f,f=u,u=null),c=s.toArray(c,u),f=s.toArray(f,h),o(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(c.concat(f||[])),this._reseed=1},l.prototype.generate=function(c,u,f,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof u!="string"&&(h=f,f=u,u=null),f&&(f=s.toArray(f,h||"hex"),this._update(f));for(var p=[];p.length<c;)this.V=this._hmac().update(this.V).digest(),p=p.concat(this.V);var g=p.slice(0,c);return this._update(f),this._reseed++,s.encode(g,u)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(e,n,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(i,s,o,l,c){var u,f,h=8*c-l-1,p=(1<<h)-1,g=p>>1,y=-7,m=o?c-1:0,v=o?-1:1,b=i[s+m];for(m+=v,u=b&(1<<-y)-1,b>>=-y,y+=h;y>0;u=256*u+i[s+m],m+=v,y-=8);for(f=u&(1<<-y)-1,u>>=-y,y+=l;y>0;f=256*f+i[s+m],m+=v,y-=8);if(u===0)u=1-g;else{if(u===p)return f?NaN:1/0*(b?-1:1);f+=Math.pow(2,l),u-=g}return(b?-1:1)*f*Math.pow(2,u-l)},a.write=function(i,s,o,l,c,u){var f,h,p,g=8*u-c-1,y=(1<<g)-1,m=y>>1,v=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=l?0:u-1,x=l?1:-1,S=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(h=isNaN(s)?1:0,f=y):(f=Math.floor(Math.log(s)/Math.LN2),s*(p=Math.pow(2,-f))<1&&(f--,p*=2),(s+=f+m>=1?v/p:v*Math.pow(2,1-m))*p>=2&&(f++,p/=2),f+m>=y?(h=0,f=y):f+m>=1?(h=(s*p-1)*Math.pow(2,c),f+=m):(h=s*Math.pow(2,m-1)*Math.pow(2,c),f=0));c>=8;i[o+b]=255&h,b+=x,h/=256,c-=8);for(f=f<<c|h,g+=c;g>0;i[o+b]=255&f,b+=x,f/=256,g-=8);i[o+b-x]|=128*S}},{}],440:[function(e,n,a){typeof Object.create=="function"?n.exports=function(i,s){s&&(i.super_=s,i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(i,s){if(s){i.super_=s;var o=function(){};o.prototype=s.prototype,i.prototype=new o,i.prototype.constructor=i}}},{}],441:[function(e,n,a){(function(i,s,o,l,c,u,f,h){(function(){/*!

		JSZip v3.10.1 - A JavaScript class for generating and reading zip files
		<http://stuartk.com/jszip>

		(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
		Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

		JSZip uses the library pako released under the MIT license :
		https://github.com/nodeca/pako/blob/main/LICENSE
		*/(function(p){typeof a=="object"&&n!==void 0?n.exports=p():(typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:this).JSZip=p()})((function(){return(function p(g,y,m){function v(S,_){if(!y[S]){if(!g[S]){var I=typeof e=="function"&&e;if(!_&&I)return I(S,!0);if(b)return b(S,!0);var A=new Error("Cannot find module '"+S+"'");throw A.code="MODULE_NOT_FOUND",A}var O=y[S]={exports:{}};g[S][0].call(O.exports,(function(M){return v(g[S][1][M]||M)}),O,O.exports,p,g,y,m)}return y[S].exports}for(var b=typeof e=="function"&&e,x=0;x<m.length;x++)v(m[x]);return v})({1:[function(p,g,y){var m=p("./utils"),v=p("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(x){for(var S,_,I,A,O,M,z,U=[],D=0,T=x.length,R=T,C=m.getTypeOf(x)!=="string";D<x.length;)R=T-D,I=C?(S=x[D++],_=D<T?x[D++]:0,D<T?x[D++]:0):(S=x.charCodeAt(D++),_=D<T?x.charCodeAt(D++):0,D<T?x.charCodeAt(D++):0),A=S>>2,O=(3&S)<<4|_>>4,M=1<R?(15&_)<<2|I>>6:64,z=2<R?63&I:64,U.push(b.charAt(A)+b.charAt(O)+b.charAt(M)+b.charAt(z));return U.join("")},y.decode=function(x){var S,_,I,A,O,M,z=0,U=0,D="data:";if(x.substr(0,D.length)===D)throw new Error("Invalid base64 input, it looks like a data url.");var T,R=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===b.charAt(64)&&R--,x.charAt(x.length-2)===b.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=v.uint8array?new Uint8Array(0|R):new Array(0|R);z<x.length;)S=b.indexOf(x.charAt(z++))<<2|(A=b.indexOf(x.charAt(z++)))>>4,_=(15&A)<<4|(O=b.indexOf(x.charAt(z++)))>>2,I=(3&O)<<6|(M=b.indexOf(x.charAt(z++))),T[U++]=S,O!==64&&(T[U++]=_),M!==64&&(T[U++]=I);return T}},{"./support":30,"./utils":32}],2:[function(p,g,y){var m=p("./external"),v=p("./stream/DataWorker"),b=p("./stream/Crc32Probe"),x=p("./stream/DataLengthProbe");function S(_,I,A,O,M){this.compressedSize=_,this.uncompressedSize=I,this.crc32=A,this.compression=O,this.compressedContent=M}S.prototype={getContentWorker:function(){var _=new v(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),I=this;return _.on("end",(function(){if(this.streamInfo.data_length!==I.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),_},getCompressedWorker:function(){return new v(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(_,I,A){return _.pipe(new b).pipe(new x("uncompressedSize")).pipe(I.compressWorker(A)).pipe(new x("compressedSize")).withStreamInfo("compression",I)},g.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(p,g,y){var m=p("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},y.DEFLATE=p("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(p,g,y){var m=p("./utils"),v=(function(){for(var b,x=[],S=0;S<256;S++){b=S;for(var _=0;_<8;_++)b=1&b?3988292384^b>>>1:b>>>1;x[S]=b}return x})();g.exports=function(b,x){return b!==void 0&&b.length?m.getTypeOf(b)!=="string"?(function(S,_,I,A){var O=v,M=0+I;S^=-1;for(var z=0;z<M;z++)S=S>>>8^O[255&(S^_[z])];return-1^S})(0|x,b,b.length):(function(S,_,I,A){var O=v,M=0+I;S^=-1;for(var z=0;z<M;z++)S=S>>>8^O[255&(S^_.charCodeAt(z))];return-1^S})(0|x,b,b.length):0}},{"./utils":32}],5:[function(p,g,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(p,g,y){var m;m=typeof Promise<"u"?Promise:p("lie"),g.exports={Promise:m}},{lie:37}],7:[function(p,g,y){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",v=p("pako"),b=p("./utils"),x=p("./stream/GenericWorker"),S=m?"uint8array":"array";function _(I,A){x.call(this,"FlateWorker/"+I),this._pako=null,this._pakoAction=I,this._pakoOptions=A,this.meta={}}y.magic="\b\0",b.inherits(_,x),_.prototype.processChunk=function(I){this.meta=I.meta,this._pako===null&&this._createPako(),this._pako.push(b.transformTo(S,I.data),!1)},_.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new v[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var I=this;this._pako.onData=function(A){I.push({data:A,meta:I.meta})}},y.compressWorker=function(I){return new _("Deflate",I)},y.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(p,g,y){function m(O,M){var z,U="";for(z=0;z<M;z++)U+=String.fromCharCode(255&O),O>>>=8;return U}function v(O,M,z,U,D,T){var R,C,N=O.file,E=O.compression,k=T!==S.utf8encode,P=b.transformTo("string",T(N.name)),q=b.transformTo("string",S.utf8encode(N.name)),H=N.comment,L=b.transformTo("string",T(H)),K=b.transformTo("string",S.utf8encode(H)),Y=q.length!==N.name.length,Z=K.length!==H.length,V="",ee="",B="",F=N.dir,X=N.date,te={crc32:0,compressedSize:0,uncompressedSize:0};M&&!z||(te.crc32=O.crc32,te.compressedSize=O.compressedSize,te.uncompressedSize=O.uncompressedSize);var se=0;M&&(se|=8),k||!Y&&!Z||(se|=2048);var ce=0,ue=0;F&&(ce|=16),D==="UNIX"?(ue=798,ce|=(function(le,pe){var ye=le;return le||(ye=pe?16893:33204),(65535&ye)<<16})(N.unixPermissions,F)):(ue=20,ce|=(function(le){return 63&(le||0)})(N.dosPermissions)),R=X.getUTCHours(),R<<=6,R|=X.getUTCMinutes(),R<<=5,R|=X.getUTCSeconds()/2,C=X.getUTCFullYear()-1980,C<<=4,C|=X.getUTCMonth()+1,C<<=5,C|=X.getUTCDate(),Y&&(ee=m(1,1)+m(_(P),4)+q,V+="up"+m(ee.length,2)+ee),Z&&(B=m(1,1)+m(_(L),4)+K,V+="uc"+m(B.length,2)+B);var oe="";return oe+=`
\0`,oe+=m(se,2),oe+=E.magic,oe+=m(R,2),oe+=m(C,2),oe+=m(te.crc32,4),oe+=m(te.compressedSize,4),oe+=m(te.uncompressedSize,4),oe+=m(P.length,2),oe+=m(V.length,2),{fileRecord:I.LOCAL_FILE_HEADER+oe+P+V,dirRecord:I.CENTRAL_FILE_HEADER+m(ue,2)+oe+m(L.length,2)+"\0\0\0\0"+m(ce,4)+m(U,4)+P+V+L}}var b=p("../utils"),x=p("../stream/GenericWorker"),S=p("../utf8"),_=p("../crc32"),I=p("../signature");function A(O,M,z,U){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=M,this.zipPlatform=z,this.encodeFileName=U,this.streamFiles=O,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits(A,x),A.prototype.push=function(O){var M=O.meta.percent||0,z=this.entriesCount,U=this._sources.length;this.accumulate?this.contentBuffer.push(O):(this.bytesWritten+=O.data.length,x.prototype.push.call(this,{data:O.data,meta:{currentFile:this.currentFile,percent:z?(M+100*(z-U-1))/z:100}}))},A.prototype.openedSource=function(O){this.currentSourceOffset=this.bytesWritten,this.currentFile=O.file.name;var M=this.streamFiles&&!O.file.dir;if(M){var z=v(O,M,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:z.fileRecord,meta:{percent:0}})}else this.accumulate=!0},A.prototype.closedSource=function(O){this.accumulate=!1;var M=this.streamFiles&&!O.file.dir,z=v(O,M,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(z.dirRecord),M)this.push({data:(function(U){return I.DATA_DESCRIPTOR+m(U.crc32,4)+m(U.compressedSize,4)+m(U.uncompressedSize,4)})(O),meta:{percent:100}});else for(this.push({data:z.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},A.prototype.flush=function(){for(var O=this.bytesWritten,M=0;M<this.dirRecords.length;M++)this.push({data:this.dirRecords[M],meta:{percent:100}});var z=this.bytesWritten-O,U=(function(D,T,R,C,N){var E=b.transformTo("string",N(C));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(D,2)+m(D,2)+m(T,4)+m(R,4)+m(E.length,2)+E})(this.dirRecords.length,z,O,this.zipComment,this.encodeFileName);this.push({data:U,meta:{percent:100}})},A.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},A.prototype.registerPrevious=function(O){this._sources.push(O);var M=this;return O.on("data",(function(z){M.processChunk(z)})),O.on("end",(function(){M.closedSource(M.previous.streamInfo),M._sources.length?M.prepareNextSource():M.end()})),O.on("error",(function(z){M.error(z)})),this},A.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},A.prototype.error=function(O){var M=this._sources;if(!x.prototype.error.call(this,O))return!1;for(var z=0;z<M.length;z++)try{M[z].error(O)}catch{}return!0},A.prototype.lock=function(){x.prototype.lock.call(this);for(var O=this._sources,M=0;M<O.length;M++)O[M].lock()},g.exports=A},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(p,g,y){var m=p("../compressions"),v=p("./ZipFileWorker");y.generateWorker=function(b,x,S){var _=new v(x.streamFiles,S,x.platform,x.encodeFileName),I=0;try{b.forEach((function(A,O){I++;var M=(function(T,R){var C=T||R,N=m[C];if(!N)throw new Error(C+" is not a valid compression method !");return N})(O.options.compression,x.compression),z=O.options.compressionOptions||x.compressionOptions||{},U=O.dir,D=O.date;O._compressWorker(M,z).withStreamInfo("file",{name:A,dir:U,date:D,comment:O.comment||"",unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions}).pipe(_)})),_.entriesCount=I}catch(A){_.error(A)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(p,g,y){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var v=new m;for(var b in this)typeof this[b]!="function"&&(v[b]=this[b]);return v}}(m.prototype=p("./object")).loadAsync=p("./load"),m.support=p("./support"),m.defaults=p("./defaults"),m.version="3.10.1",m.loadAsync=function(v,b){return new m().loadAsync(v,b)},m.external=p("./external"),g.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(p,g,y){var m=p("./utils"),v=p("./external"),b=p("./utf8"),x=p("./zipEntries"),S=p("./stream/Crc32Probe"),_=p("./nodejsUtils");function I(A){return new v.Promise((function(O,M){var z=A.decompressed.getContentWorker().pipe(new S);z.on("error",(function(U){M(U)})).on("end",(function(){z.streamInfo.crc32!==A.decompressed.crc32?M(new Error("Corrupted zip : CRC32 mismatch")):O()})).resume()}))}g.exports=function(A,O){var M=this;return O=m.extend(O||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),_.isNode&&_.isStream(A)?v.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",A,!0,O.optimizedBinaryString,O.base64).then((function(z){var U=new x(O);return U.load(z),U})).then((function(z){var U=[v.Promise.resolve(z)],D=z.files;if(O.checkCRC32)for(var T=0;T<D.length;T++)U.push(I(D[T]));return v.Promise.all(U)})).then((function(z){for(var U=z.shift(),D=U.files,T=0;T<D.length;T++){var R=D[T],C=R.fileNameStr,N=m.resolve(R.fileNameStr);M.file(N,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:O.createFolders}),R.dir||(M.file(N).unsafeOriginalName=C)}return U.zipComment.length&&(M.comment=U.zipComment),M}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(p,g,y){var m=p("../utils"),v=p("../stream/GenericWorker");function b(x,S){v.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(S)}m.inherits(b,v),b.prototype._bindStream=function(x){var S=this;(this._stream=x).pause(),x.on("data",(function(_){S.push({data:_,meta:{percent:0}})})).on("error",(function(_){S.isPaused?this.generatedError=_:S.error(_)})).on("end",(function(){S.isPaused?S._upstreamEnded=!0:S.end()}))},b.prototype.pause=function(){return!!v.prototype.pause.call(this)&&(this._stream.pause(),!0)},b.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},g.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(p,g,y){var m=p("readable-stream").Readable;function v(b,x,S){m.call(this,x),this._helper=b;var _=this;b.on("data",(function(I,A){_.push(I)||_._helper.pause(),S&&S(A)})).on("error",(function(I){_.emit("error",I)})).on("end",(function(){_.push(null)}))}p("../utils").inherits(v,m),v.prototype._read=function(){this._helper.resume()},g.exports=v},{"../utils":32,"readable-stream":16}],14:[function(p,g,y){g.exports={isNode:o!==void 0,newBufferFrom:function(m,v){if(o.from&&o.from!==Uint8Array.from)return o.from(m,v);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new o(m,v)},allocBuffer:function(m){if(o.alloc)return o.alloc(m);var v=new o(m);return v.fill(0),v},isBuffer:function(m){return o.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(p,g,y){function m(N,E,k){var P,q=b.getTypeOf(E),H=b.extend(k||{},_);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(N=D(N)),H.createFolders&&(P=U(N))&&T.call(this,P,!0);var L=q==="string"&&H.binary===!1&&H.base64===!1;k&&k.binary!==void 0||(H.binary=!L),(E instanceof I&&E.uncompressedSize===0||H.dir||!E||E.length===0)&&(H.base64=!1,H.binary=!0,E="",H.compression="STORE",q="string");var K;K=E instanceof I||E instanceof x?E:M.isNode&&M.isStream(E)?new z(N,E):b.prepareContent(N,E,H.binary,H.optimizedBinaryString,H.base64);var Y=new A(N,K,H);this.files[N]=Y}var v=p("./utf8"),b=p("./utils"),x=p("./stream/GenericWorker"),S=p("./stream/StreamHelper"),_=p("./defaults"),I=p("./compressedObject"),A=p("./zipObject"),O=p("./generate"),M=p("./nodejsUtils"),z=p("./nodejs/NodejsStreamInputAdapter"),U=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var E=N.lastIndexOf("/");return 0<E?N.substring(0,E):""},D=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},T=function(N,E){return E=E!==void 0?E:_.createFolders,N=D(N),this.files[N]||m.call(this,N,null,{dir:!0,createFolders:E}),this.files[N]};function R(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var E,k,P;for(E in this.files)P=this.files[E],(k=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&N(k,P)},filter:function(N){var E=[];return this.forEach((function(k,P){N(k,P)&&E.push(P)})),E},file:function(N,E,k){if(arguments.length!==1)return N=this.root+N,m.call(this,N,E,k),this;if(R(N)){var P=N;return this.filter((function(H,L){return!L.dir&&P.test(H)}))}var q=this.files[this.root+N];return q&&!q.dir?q:null},folder:function(N){if(!N)return this;if(R(N))return this.filter((function(q,H){return H.dir&&N.test(q)}));var E=this.root+N,k=T.call(this,E),P=this.clone();return P.root=k.name,P},remove:function(N){N=this.root+N;var E=this.files[N];if(E||(N.slice(-1)!=="/"&&(N+="/"),E=this.files[N]),E&&!E.dir)delete this.files[N];else for(var k=this.filter((function(q,H){return H.name.slice(0,N.length)===N})),P=0;P<k.length;P++)delete this.files[k[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var E,k={};try{if((k=b.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:v.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");b.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var P=k.comment||this.comment||"";E=O.generateWorker(this,k,P)}catch(q){(E=new x("error")).error(q)}return new S(E,k.type||"string",k.mimeType)},generateAsync:function(N,E){return this.generateInternalStream(N).accumulate(E)},generateNodeStream:function(N,E){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(E)}};g.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(p,g,y){g.exports=p("stream")},{stream:void 0}],17:[function(p,g,y){var m=p("./DataReader");function v(b){m.call(this,b);for(var x=0;x<this.data.length;x++)b[x]=255&b[x]}p("../utils").inherits(v,m),v.prototype.byteAt=function(b){return this.data[this.zero+b]},v.prototype.lastIndexOfSignature=function(b){for(var x=b.charCodeAt(0),S=b.charCodeAt(1),_=b.charCodeAt(2),I=b.charCodeAt(3),A=this.length-4;0<=A;--A)if(this.data[A]===x&&this.data[A+1]===S&&this.data[A+2]===_&&this.data[A+3]===I)return A-this.zero;return-1},v.prototype.readAndCheckSignature=function(b){var x=b.charCodeAt(0),S=b.charCodeAt(1),_=b.charCodeAt(2),I=b.charCodeAt(3),A=this.readData(4);return x===A[0]&&S===A[1]&&_===A[2]&&I===A[3]},v.prototype.readData=function(b){if(this.checkOffset(b),b===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},g.exports=v},{"../utils":32,"./DataReader":18}],18:[function(p,g,y){var m=p("../utils");function v(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}v.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(){},readInt:function(b){var x,S=0;for(this.checkOffset(b),x=this.index+b-1;x>=this.index;x--)S=(S<<8)+this.byteAt(x);return this.index+=b,S},readString:function(b){return m.transformTo("string",this.readData(b))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC(1980+(b>>25&127),(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(31&b)<<1))}},g.exports=v},{"../utils":32}],19:[function(p,g,y){var m=p("./Uint8ArrayReader");function v(b){m.call(this,b)}p("../utils").inherits(v,m),v.prototype.readData=function(b){this.checkOffset(b);var x=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},g.exports=v},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(p,g,y){var m=p("./DataReader");function v(b){m.call(this,b)}p("../utils").inherits(v,m),v.prototype.byteAt=function(b){return this.data.charCodeAt(this.zero+b)},v.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)-this.zero},v.prototype.readAndCheckSignature=function(b){return b===this.readData(4)},v.prototype.readData=function(b){this.checkOffset(b);var x=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},g.exports=v},{"../utils":32,"./DataReader":18}],21:[function(p,g,y){var m=p("./ArrayReader");function v(b){m.call(this,b)}p("../utils").inherits(v,m),v.prototype.readData=function(b){if(this.checkOffset(b),b===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},g.exports=v},{"../utils":32,"./ArrayReader":17}],22:[function(p,g,y){var m=p("../utils"),v=p("../support"),b=p("./ArrayReader"),x=p("./StringReader"),S=p("./NodeBufferReader"),_=p("./Uint8ArrayReader");g.exports=function(I){var A=m.getTypeOf(I);return m.checkSupport(A),A!=="string"||v.uint8array?A==="nodebuffer"?new S(I):v.uint8array?new _(m.transformTo("uint8array",I)):new b(m.transformTo("array",I)):new x(I)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(p,g,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(p,g,y){var m=p("./GenericWorker"),v=p("../utils");function b(x){m.call(this,"ConvertWorker to "+x),this.destType=x}v.inherits(b,m),b.prototype.processChunk=function(x){this.push({data:v.transformTo(this.destType,x.data),meta:x.meta})},g.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(p,g,y){var m=p("./GenericWorker"),v=p("../crc32");function b(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p("../utils").inherits(b,m),b.prototype.processChunk=function(x){this.streamInfo.crc32=v(x.data,this.streamInfo.crc32||0),this.push(x)},g.exports=b},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(p,g,y){var m=p("../utils"),v=p("./GenericWorker");function b(x){v.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}m.inherits(b,v),b.prototype.processChunk=function(x){if(x){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+x.data.length}v.prototype.processChunk.call(this,x)},g.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(p,g,y){var m=p("../utils"),v=p("./GenericWorker");function b(x){v.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then((function(_){S.dataIsReady=!0,S.data=_,S.max=_&&_.length||0,S.type=m.getTypeOf(_),S.isPaused||S._tickAndRepeat()}),(function(_){S.error(_)}))}m.inherits(b,v),b.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this.data=null},b.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},b.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},b.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,S);break;case"uint8array":x=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":x=this.data.slice(this.index,S)}return this.index=S,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},g.exports=b},{"../utils":32,"./GenericWorker":28}],28:[function(p,g,y){function m(v){this.name=v||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(v){this.emit("data",v)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(v){this.emit("error",v)}return!0},error:function(v){return!this.isFinished&&(this.isPaused?this.generatedError=v:(this.isFinished=!0,this.emit("error",v),this.previous&&this.previous.error(v),this.cleanUp()),!0)},on:function(v,b){return this._listeners[v].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(v,b){if(this._listeners[v])for(var x=0;x<this._listeners[v].length;x++)this._listeners[v][x].call(this,b)},pipe:function(v){return v.registerPrevious(this)},registerPrevious:function(v){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=v.streamInfo,this.mergeStreamInfo(),this.previous=v;var b=this;return v.on("data",(function(x){b.processChunk(x)})),v.on("end",(function(){b.end()})),v.on("error",(function(x){b.error(x)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var v=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),v=!0),this.previous&&this.previous.resume(),!v},flush:function(){},processChunk:function(v){this.push(v)},withStreamInfo:function(v,b){return this.extraStreamInfo[v]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var v in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,v)&&(this.streamInfo[v]=this.extraStreamInfo[v])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var v="Worker "+this.name;return this.previous?this.previous+" -> "+v:v}},g.exports=m},{}],29:[function(p,g,y){var m=p("../utils"),v=p("./ConvertWorker"),b=p("./GenericWorker"),x=p("../base64"),S=p("../support"),_=p("../external"),I=null;if(S.nodestream)try{I=p("../nodejs/NodejsStreamOutputAdapter")}catch{}function A(O,M,z){var U=M;switch(M){case"blob":case"arraybuffer":U="uint8array";break;case"base64":U="string"}try{this._internalType=U,this._outputType=M,this._mimeType=z,m.checkSupport(U),this._worker=O.pipe(new v(U)),O.lock()}catch(D){this._worker=new b("error"),this._worker.error(D)}}A.prototype={accumulate:function(O){return(function(M,z){return new _.Promise((function(U,D){var T=[],R=M._internalType,C=M._outputType,N=M._mimeType;M.on("data",(function(E,k){T.push(E),z&&z(k)})).on("error",(function(E){T=[],D(E)})).on("end",(function(){try{var E=(function(k,P,q){switch(k){case"blob":return m.newBlob(m.transformTo("arraybuffer",P),q);case"base64":return x.encode(P);default:return m.transformTo(k,P)}})(C,(function(k,P){var q,H=0,L=null,K=0;for(q=0;q<P.length;q++)K+=P[q].length;switch(k){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(L=new Uint8Array(K),q=0;q<P.length;q++)L.set(P[q],H),H+=P[q].length;return L;case"nodebuffer":return o.concat(P);default:throw new Error("concat : unsupported type '"+k+"'")}})(R,T),N);U(E)}catch(k){D(k)}T=[]})).resume()}))})(this,O)},on:function(O,M){var z=this;return O==="data"?this._worker.on(O,(function(U){M.call(z,U.data,U.meta)})):this._worker.on(O,(function(){m.delay(M,arguments,z)})),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(O){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new I(this,{objectMode:this._outputType!=="nodebuffer"},O)}},g.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(p,g,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=o!==void 0,y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var m=new ArrayBuffer(0);try{y.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);v.append(m),y.blob=v.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!p("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(p,g,y){for(var m=p("./utils"),v=p("./support"),b=p("./nodejsUtils"),x=p("./stream/GenericWorker"),S=new Array(256),_=0;_<256;_++)S[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function I(){x.call(this,"utf-8 decode"),this.leftOver=null}function A(){x.call(this,"utf-8 encode")}S[254]=S[254]=1,y.utf8encode=function(O){return v.nodebuffer?b.newBufferFrom(O,"utf-8"):(function(M){var z,U,D,T,R,C=M.length,N=0;for(T=0;T<C;T++)(64512&(U=M.charCodeAt(T)))==55296&&T+1<C&&(64512&(D=M.charCodeAt(T+1)))==56320&&(U=65536+(U-55296<<10)+(D-56320),T++),N+=U<128?1:U<2048?2:U<65536?3:4;for(z=v.uint8array?new Uint8Array(N):new Array(N),T=R=0;R<N;T++)(64512&(U=M.charCodeAt(T)))==55296&&T+1<C&&(64512&(D=M.charCodeAt(T+1)))==56320&&(U=65536+(U-55296<<10)+(D-56320),T++),U<128?z[R++]=U:(U<2048?z[R++]=192|U>>>6:(U<65536?z[R++]=224|U>>>12:(z[R++]=240|U>>>18,z[R++]=128|U>>>12&63),z[R++]=128|U>>>6&63),z[R++]=128|63&U);return z})(O)},y.utf8decode=function(O){return v.nodebuffer?m.transformTo("nodebuffer",O).toString("utf-8"):(function(M){var z,U,D,T,R=M.length,C=new Array(2*R);for(z=U=0;z<R;)if((D=M[z++])<128)C[U++]=D;else if(4<(T=S[D]))C[U++]=65533,z+=T-1;else{for(D&=T===2?31:T===3?15:7;1<T&&z<R;)D=D<<6|63&M[z++],T--;1<T?C[U++]=65533:D<65536?C[U++]=D:(D-=65536,C[U++]=55296|D>>10&1023,C[U++]=56320|1023&D)}return C.length!==U&&(C.subarray?C=C.subarray(0,U):C.length=U),m.applyFromCharCode(C)})(O=m.transformTo(v.uint8array?"uint8array":"array",O))},m.inherits(I,x),I.prototype.processChunk=function(O){var M=m.transformTo(v.uint8array?"uint8array":"array",O.data);if(this.leftOver&&this.leftOver.length){if(v.uint8array){var z=M;(M=new Uint8Array(z.length+this.leftOver.length)).set(this.leftOver,0),M.set(z,this.leftOver.length)}else M=this.leftOver.concat(M);this.leftOver=null}var U=(function(T,R){var C;for((R=R||T.length)>T.length&&(R=T.length),C=R-1;0<=C&&(192&T[C])==128;)C--;return C<0||C===0?R:C+S[T[C]]>R?C:R})(M),D=M;U!==M.length&&(v.uint8array?(D=M.subarray(0,U),this.leftOver=M.subarray(U,M.length)):(D=M.slice(0,U),this.leftOver=M.slice(U,M.length))),this.push({data:y.utf8decode(D),meta:O.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=I,m.inherits(A,x),A.prototype.processChunk=function(O){this.push({data:y.utf8encode(O.data),meta:O.meta})},y.Utf8EncodeWorker=A},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(p,g,y){var m=p("./support"),v=p("./base64"),b=p("./nodejsUtils"),x=p("./external");function S(z){return z}function _(z,U){for(var D=0;D<z.length;++D)U[D]=255&z.charCodeAt(D);return U}p("setimmediate"),y.newBlob=function(z,U){y.checkSupport("blob");try{return new Blob([z],{type:U})}catch{try{var D=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return D.append(z),D.getBlob(U)}catch{throw new Error("Bug : can't construct the Blob.")}}};var I={stringifyByChunk:function(z,U,D){var T=[],R=0,C=z.length;if(C<=D)return String.fromCharCode.apply(null,z);for(;R<C;)U==="array"||U==="nodebuffer"?T.push(String.fromCharCode.apply(null,z.slice(R,Math.min(R+D,C)))):T.push(String.fromCharCode.apply(null,z.subarray(R,Math.min(R+D,C)))),R+=D;return T.join("")},stringifyByChar:function(z){for(var U="",D=0;D<z.length;D++)U+=String.fromCharCode(z[D]);return U},applyCanBeUsed:{uint8array:(function(){try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return m.nodebuffer&&String.fromCharCode.apply(null,b.allocBuffer(1)).length===1}catch{return!1}})()}};function A(z){var U=65536,D=y.getTypeOf(z),T=!0;if(D==="uint8array"?T=I.applyCanBeUsed.uint8array:D==="nodebuffer"&&(T=I.applyCanBeUsed.nodebuffer),T)for(;1<U;)try{return I.stringifyByChunk(z,D,U)}catch{U=Math.floor(U/2)}return I.stringifyByChar(z)}function O(z,U){for(var D=0;D<z.length;D++)U[D]=z[D];return U}y.applyFromCharCode=A;var M={};M.string={string:S,array:function(z){return _(z,new Array(z.length))},arraybuffer:function(z){return M.string.uint8array(z).buffer},uint8array:function(z){return _(z,new Uint8Array(z.length))},nodebuffer:function(z){return _(z,b.allocBuffer(z.length))}},M.array={string:A,array:S,arraybuffer:function(z){return new Uint8Array(z).buffer},uint8array:function(z){return new Uint8Array(z)},nodebuffer:function(z){return b.newBufferFrom(z)}},M.arraybuffer={string:function(z){return A(new Uint8Array(z))},array:function(z){return O(new Uint8Array(z),new Array(z.byteLength))},arraybuffer:S,uint8array:function(z){return new Uint8Array(z)},nodebuffer:function(z){return b.newBufferFrom(new Uint8Array(z))}},M.uint8array={string:A,array:function(z){return O(z,new Array(z.length))},arraybuffer:function(z){return z.buffer},uint8array:S,nodebuffer:function(z){return b.newBufferFrom(z)}},M.nodebuffer={string:A,array:function(z){return O(z,new Array(z.length))},arraybuffer:function(z){return M.nodebuffer.uint8array(z).buffer},uint8array:function(z){return O(z,new Uint8Array(z.length))},nodebuffer:S},y.transformTo=function(z,U){if(U=U||"",!z)return U;y.checkSupport(z);var D=y.getTypeOf(U);return M[D][z](U)},y.resolve=function(z){for(var U=z.split("/"),D=[],T=0;T<U.length;T++){var R=U[T];R==="."||R===""&&T!==0&&T!==U.length-1||(R===".."?D.pop():D.push(R))}return D.join("/")},y.getTypeOf=function(z){return typeof z=="string"?"string":Object.prototype.toString.call(z)==="[object Array]"?"array":m.nodebuffer&&b.isBuffer(z)?"nodebuffer":m.uint8array&&z instanceof Uint8Array?"uint8array":m.arraybuffer&&z instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(z){if(!m[z.toLowerCase()])throw new Error(z+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(z){var U,D,T="";for(D=0;D<(z||"").length;D++)T+="\\x"+((U=z.charCodeAt(D))<16?"0":"")+U.toString(16).toUpperCase();return T},y.delay=function(z,U,D){h((function(){z.apply(D||null,U||[])}))},y.inherits=function(z,U){function D(){}D.prototype=U.prototype,z.prototype=new D},y.extend=function(){var z,U,D={};for(z=0;z<arguments.length;z++)for(U in arguments[z])Object.prototype.hasOwnProperty.call(arguments[z],U)&&D[U]===void 0&&(D[U]=arguments[z][U]);return D},y.prepareContent=function(z,U,D,T,R){return x.Promise.resolve(U).then((function(C){return m.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new x.Promise((function(N,E){var k=new FileReader;k.onload=function(P){N(P.target.result)},k.onerror=function(P){E(P.target.error)},k.readAsArrayBuffer(C)})):C})).then((function(C){var N=y.getTypeOf(C);return N?(N==="arraybuffer"?C=y.transformTo("uint8array",C):N==="string"&&(R?C=v.decode(C):D&&T!==!0&&(C=(function(E){return _(E,m.uint8array?new Uint8Array(E.length):new Array(E.length))})(C))),C):x.Promise.reject(new Error("Can't read the data of '"+z+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(p,g,y){var m=p("./reader/readerFor"),v=p("./utils"),b=p("./signature"),x=p("./zipEntry"),S=p("./support");function _(I){this.files=[],this.loadOptions=I}_.prototype={checkSignature:function(I){if(!this.reader.readAndCheckSignature(I)){this.reader.index-=4;var A=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+v.pretty(A)+", expected "+v.pretty(I)+")")}},isSignature:function(I,A){var O=this.reader.index;this.reader.setIndex(I);var M=this.reader.readString(4)===A;return this.reader.setIndex(O),M},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var I=this.reader.readData(this.zipCommentLength),A=S.uint8array?"uint8array":"array",O=v.transformTo(A,I);this.zipComment=this.loadOptions.decodeFileName(O)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var I,A,O,M=this.zip64EndOfCentralSize-44;0<M;)I=this.reader.readInt(2),A=this.reader.readInt(4),O=this.reader.readData(A),this.zip64ExtensibleData[I]={id:I,length:A,value:O}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var I,A;for(I=0;I<this.files.length;I++)A=this.files[I],this.reader.setIndex(A.localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),A.readLocalPart(this.reader),A.handleUTF8(),A.processAttributes()},readCentralDir:function(){var I;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)(I=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(I);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var I=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(I<0)throw this.isSignature(0,b.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(I);var A=I;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===v.MAX_VALUE_16BITS||this.diskWithCentralDirStart===v.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===v.MAX_VALUE_16BITS||this.centralDirRecords===v.MAX_VALUE_16BITS||this.centralDirSize===v.MAX_VALUE_32BITS||this.centralDirOffset===v.MAX_VALUE_32BITS){if(this.zip64=!0,(I=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(I),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var O=this.centralDirOffset+this.centralDirSize;this.zip64&&(O+=20,O+=12+this.zip64EndOfCentralSize);var M=A-O;if(0<M)this.isSignature(A,b.CENTRAL_FILE_HEADER)||(this.reader.zero=M);else if(M<0)throw new Error("Corrupted zip: missing "+Math.abs(M)+" bytes.")},prepareReader:function(I){this.reader=m(I)},load:function(I){this.prepareReader(I),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},g.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(p,g,y){var m=p("./reader/readerFor"),v=p("./utils"),b=p("./compressedObject"),x=p("./crc32"),S=p("./utf8"),_=p("./compressions"),I=p("./support");function A(O,M){this.options=O,this.loadOptions=M}A.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(O){var M,z;if(O.skip(22),this.fileNameLength=O.readInt(2),z=O.readInt(2),this.fileName=O.readData(this.fileNameLength),O.skip(z),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((M=(function(U){for(var D in _)if(Object.prototype.hasOwnProperty.call(_,D)&&_[D].magic===U)return _[D];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+v.pretty(this.compressionMethod)+" unknown (inner file : "+v.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,M,O.readData(this.compressedSize))},readCentralPart:function(O){this.versionMadeBy=O.readInt(2),O.skip(2),this.bitFlag=O.readInt(2),this.compressionMethod=O.readString(2),this.date=O.readDate(),this.crc32=O.readInt(4),this.compressedSize=O.readInt(4),this.uncompressedSize=O.readInt(4);var M=O.readInt(2);if(this.extraFieldsLength=O.readInt(2),this.fileCommentLength=O.readInt(2),this.diskNumberStart=O.readInt(2),this.internalFileAttributes=O.readInt(2),this.externalFileAttributes=O.readInt(4),this.localHeaderOffset=O.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");O.skip(M),this.readExtraFields(O),this.parseZIP64ExtraField(O),this.fileComment=O.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var O=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),O==0&&(this.dosPermissions=63&this.externalFileAttributes),O==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var O=m(this.extraFields[1].value);this.uncompressedSize===v.MAX_VALUE_32BITS&&(this.uncompressedSize=O.readInt(8)),this.compressedSize===v.MAX_VALUE_32BITS&&(this.compressedSize=O.readInt(8)),this.localHeaderOffset===v.MAX_VALUE_32BITS&&(this.localHeaderOffset=O.readInt(8)),this.diskNumberStart===v.MAX_VALUE_32BITS&&(this.diskNumberStart=O.readInt(4))}},readExtraFields:function(O){var M,z,U,D=O.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});O.index+4<D;)M=O.readInt(2),z=O.readInt(2),U=O.readData(z),this.extraFields[M]={id:M,length:z,value:U};O.setIndex(D)},handleUTF8:function(){var O=I.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var M=this.findExtraFieldUnicodePath();if(M!==null)this.fileNameStr=M;else{var z=v.transformTo(O,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(z)}var U=this.findExtraFieldUnicodeComment();if(U!==null)this.fileCommentStr=U;else{var D=v.transformTo(O,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(D)}}},findExtraFieldUnicodePath:function(){var O=this.extraFields[28789];if(O){var M=m(O.value);return M.readInt(1)!==1||x(this.fileName)!==M.readInt(4)?null:S.utf8decode(M.readData(O.length-5))}return null},findExtraFieldUnicodeComment:function(){var O=this.extraFields[25461];if(O){var M=m(O.value);return M.readInt(1)!==1||x(this.fileComment)!==M.readInt(4)?null:S.utf8decode(M.readData(O.length-5))}return null}},g.exports=A},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(p,g,y){function m(M,z,U){this.name=M,this.dir=U.dir,this.date=U.date,this.comment=U.comment,this.unixPermissions=U.unixPermissions,this.dosPermissions=U.dosPermissions,this._data=z,this._dataBinary=U.binary,this.options={compression:U.compression,compressionOptions:U.compressionOptions}}var v=p("./stream/StreamHelper"),b=p("./stream/DataWorker"),x=p("./utf8"),S=p("./compressedObject"),_=p("./stream/GenericWorker");m.prototype={internalStream:function(M){var z=null,U="string";try{if(!M)throw new Error("No output type specified.");var D=(U=M.toLowerCase())==="string"||U==="text";U!=="binarystring"&&U!=="text"||(U="string"),z=this._decompressWorker();var T=!this._dataBinary;T&&!D&&(z=z.pipe(new x.Utf8EncodeWorker)),!T&&D&&(z=z.pipe(new x.Utf8DecodeWorker))}catch(R){(z=new _("error")).error(R)}return new v(z,U,"")},async:function(M,z){return this.internalStream(M).accumulate(z)},nodeStream:function(M,z){return this.internalStream(M||"nodebuffer").toNodejsStream(z)},_compressWorker:function(M,z){if(this._data instanceof S&&this._data.compression.magic===M.magic)return this._data.getCompressedWorker();var U=this._decompressWorker();return this._dataBinary||(U=U.pipe(new x.Utf8EncodeWorker)),S.createWorkerFrom(U,M,z)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof _?this._data:new b(this._data)}};for(var I=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],A=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},O=0;O<I.length;O++)m.prototype[I[O]]=A;g.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(p,g,y){(function(m){var v,b,x=m.MutationObserver||m.WebKitMutationObserver;if(x){var S=0,_=new x(M),I=m.document.createTextNode("");_.observe(I,{characterData:!0}),v=function(){I.data=S=++S%2}}else if(m.setImmediate||m.MessageChannel===void 0)v="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var z=m.document.createElement("script");z.onreadystatechange=function(){M(),z.onreadystatechange=null,z.parentNode.removeChild(z),z=null},m.document.documentElement.appendChild(z)}:function(){setTimeout(M,0)};else{var A=new m.MessageChannel;A.port1.onmessage=M,v=function(){A.port2.postMessage(0)}}var O=[];function M(){var z,U;b=!0;for(var D=O.length;D;){for(U=O,O=[],z=-1;++z<D;)U[z]();D=O.length}b=!1}g.exports=function(z){O.push(z)!==1||b||v()}}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(p,g,y){var m=p("immediate");function v(){}var b={},x=["REJECTED"],S=["FULFILLED"],_=["PENDING"];function I(D){if(typeof D!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,D!==v&&z(this,D)}function A(D,T,R){this.promise=D,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function O(D,T,R){m((function(){var C;try{C=T(R)}catch(N){return b.reject(D,N)}C===D?b.reject(D,new TypeError("Cannot resolve promise with itself")):b.resolve(D,C)}))}function M(D){var T=D&&D.then;if(D&&(typeof D=="object"||typeof D=="function")&&typeof T=="function")return function(){T.apply(D,arguments)}}function z(D,T){var R=!1;function C(k){R||(R=!0,b.reject(D,k))}function N(k){R||(R=!0,b.resolve(D,k))}var E=U((function(){T(N,C)}));E.status==="error"&&C(E.value)}function U(D,T){var R={};try{R.value=D(T),R.status="success"}catch(C){R.status="error",R.value=C}return R}(g.exports=I).prototype.finally=function(D){if(typeof D!="function")return this;var T=this.constructor;return this.then((function(R){return T.resolve(D()).then((function(){return R}))}),(function(R){return T.resolve(D()).then((function(){throw R}))}))},I.prototype.catch=function(D){return this.then(null,D)},I.prototype.then=function(D,T){if(typeof D!="function"&&this.state===S||typeof T!="function"&&this.state===x)return this;var R=new this.constructor(v);return this.state!==_?O(R,this.state===S?D:T,this.outcome):this.queue.push(new A(R,D,T)),R},A.prototype.callFulfilled=function(D){b.resolve(this.promise,D)},A.prototype.otherCallFulfilled=function(D){O(this.promise,this.onFulfilled,D)},A.prototype.callRejected=function(D){b.reject(this.promise,D)},A.prototype.otherCallRejected=function(D){O(this.promise,this.onRejected,D)},b.resolve=function(D,T){var R=U(M,T);if(R.status==="error")return b.reject(D,R.value);var C=R.value;if(C)z(D,C);else{D.state=S,D.outcome=T;for(var N=-1,E=D.queue.length;++N<E;)D.queue[N].callFulfilled(T)}return D},b.reject=function(D,T){D.state=x,D.outcome=T;for(var R=-1,C=D.queue.length;++R<C;)D.queue[R].callRejected(T);return D},I.resolve=function(D){return D instanceof this?D:b.resolve(new this(v),D)},I.reject=function(D){var T=new this(v);return b.reject(T,D)},I.all=function(D){var T=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=D.length,C=!1;if(!R)return this.resolve([]);for(var N=new Array(R),E=0,k=-1,P=new this(v);++k<R;)q(D[k],k);return P;function q(H,L){T.resolve(H).then((function(K){N[L]=K,++E!==R||C||(C=!0,b.resolve(P,N))}),(function(K){C||(C=!0,b.reject(P,K))}))}},I.race=function(D){if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=D.length,R=!1;if(!T)return this.resolve([]);for(var C,N=-1,E=new this(v);++N<T;)C=D[N],this.resolve(C).then((function(k){R||(R=!0,b.resolve(E,k))}),(function(k){R||(R=!0,b.reject(E,k))}));return E}},{immediate:36}],38:[function(p,g,y){var m={};(0,p("./lib/utils/common").assign)(m,p("./lib/deflate"),p("./lib/inflate"),p("./lib/zlib/constants")),g.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(p,g,y){var m=p("./zlib/deflate"),v=p("./utils/common"),b=p("./utils/strings"),x=p("./zlib/messages"),S=p("./zlib/zstream"),_=Object.prototype.toString;function I(O){if(!(this instanceof I))return new I(O);this.options=v.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},O||{});var M=this.options;M.raw&&0<M.windowBits?M.windowBits=-M.windowBits:M.gzip&&0<M.windowBits&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var z=m.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(z!==0)throw new Error(x[z]);if(M.header&&m.deflateSetHeader(this.strm,M.header),M.dictionary){var U;if(U=typeof M.dictionary=="string"?b.string2buf(M.dictionary):_.call(M.dictionary)==="[object ArrayBuffer]"?new Uint8Array(M.dictionary):M.dictionary,(z=m.deflateSetDictionary(this.strm,U))!==0)throw new Error(x[z]);this._dict_set=!0}}function A(O,M){var z=new I(M);if(z.push(O,!0),z.err)throw z.msg||x[z.err];return z.result}I.prototype.push=function(O,M){var z,U,D=this.strm,T=this.options.chunkSize;if(this.ended)return!1;U=M===~~M?M:M===!0?4:0,typeof O=="string"?D.input=b.string2buf(O):_.call(O)==="[object ArrayBuffer]"?D.input=new Uint8Array(O):D.input=O,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new v.Buf8(T),D.next_out=0,D.avail_out=T),(z=m.deflate(D,U))!==1&&z!==0)return this.onEnd(z),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||U!==4&&U!==2)||(this.options.to==="string"?this.onData(b.buf2binstring(v.shrinkBuf(D.output,D.next_out))):this.onData(v.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&z!==1);return U===4?(z=m.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===0):U!==2||(this.onEnd(0),!(D.avail_out=0))},I.prototype.onData=function(O){this.chunks.push(O)},I.prototype.onEnd=function(O){O===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},y.Deflate=I,y.deflate=A,y.deflateRaw=function(O,M){return(M=M||{}).raw=!0,A(O,M)},y.gzip=function(O,M){return(M=M||{}).gzip=!0,A(O,M)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(p,g,y){var m=p("./zlib/inflate"),v=p("./utils/common"),b=p("./utils/strings"),x=p("./zlib/constants"),S=p("./zlib/messages"),_=p("./zlib/zstream"),I=p("./zlib/gzheader"),A=Object.prototype.toString;function O(z){if(!(this instanceof O))return new O(z);this.options=v.assign({chunkSize:16384,windowBits:0,to:""},z||{});var U=this.options;U.raw&&0<=U.windowBits&&U.windowBits<16&&(U.windowBits=-U.windowBits,U.windowBits===0&&(U.windowBits=-15)),!(0<=U.windowBits&&U.windowBits<16)||z&&z.windowBits||(U.windowBits+=32),15<U.windowBits&&U.windowBits<48&&(15&U.windowBits)==0&&(U.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var D=m.inflateInit2(this.strm,U.windowBits);if(D!==x.Z_OK)throw new Error(S[D]);this.header=new I,m.inflateGetHeader(this.strm,this.header)}function M(z,U){var D=new O(U);if(D.push(z,!0),D.err)throw D.msg||S[D.err];return D.result}O.prototype.push=function(z,U){var D,T,R,C,N,E,k=this.strm,P=this.options.chunkSize,q=this.options.dictionary,H=!1;if(this.ended)return!1;T=U===~~U?U:U===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof z=="string"?k.input=b.binstring2buf(z):A.call(z)==="[object ArrayBuffer]"?k.input=new Uint8Array(z):k.input=z,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new v.Buf8(P),k.next_out=0,k.avail_out=P),(D=m.inflate(k,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&q&&(E=typeof q=="string"?b.string2buf(q):A.call(q)==="[object ArrayBuffer]"?new Uint8Array(q):q,D=m.inflateSetDictionary(this.strm,E)),D===x.Z_BUF_ERROR&&H===!0&&(D=x.Z_OK,H=!1),D!==x.Z_STREAM_END&&D!==x.Z_OK)return this.onEnd(D),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&D!==x.Z_STREAM_END&&(k.avail_in!==0||T!==x.Z_FINISH&&T!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=b.utf8border(k.output,k.next_out),C=k.next_out-R,N=b.buf2string(k.output,R),k.next_out=C,k.avail_out=P-C,C&&v.arraySet(k.output,k.output,R,C,0),this.onData(N)):this.onData(v.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(H=!0)}while((0<k.avail_in||k.avail_out===0)&&D!==x.Z_STREAM_END);return D===x.Z_STREAM_END&&(T=x.Z_FINISH),T===x.Z_FINISH?(D=m.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===x.Z_OK):T!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(k.avail_out=0))},O.prototype.onData=function(z){this.chunks.push(z)},O.prototype.onEnd=function(z){z===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},y.Inflate=O,y.inflate=M,y.inflateRaw=function(z,U){return(U=U||{}).raw=!0,M(z,U)},y.ungzip=M},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(p,g,y){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(x){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var _=S.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var I in _)_.hasOwnProperty(I)&&(x[I]=_[I])}}return x},y.shrinkBuf=function(x,S){return x.length===S?x:x.subarray?x.subarray(0,S):(x.length=S,x)};var v={arraySet:function(x,S,_,I,A){if(S.subarray&&x.subarray)x.set(S.subarray(_,_+I),A);else for(var O=0;O<I;O++)x[A+O]=S[_+O]},flattenChunks:function(x){var S,_,I,A,O,M;for(S=I=0,_=x.length;S<_;S++)I+=x[S].length;for(M=new Uint8Array(I),S=A=0,_=x.length;S<_;S++)O=x[S],M.set(O,A),A+=O.length;return M}},b={arraySet:function(x,S,_,I,A){for(var O=0;O<I;O++)x[A+O]=S[_+O]},flattenChunks:function(x){return[].concat.apply([],x)}};y.setTyped=function(x){x?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,v)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,b))},y.setTyped(m)},{}],42:[function(p,g,y){var m=p("./common"),v=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var x=new m.Buf8(256),S=0;S<256;S++)x[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function _(I,A){if(A<65537&&(I.subarray&&b||!I.subarray&&v))return String.fromCharCode.apply(null,m.shrinkBuf(I,A));for(var O="",M=0;M<A;M++)O+=String.fromCharCode(I[M]);return O}x[254]=x[254]=1,y.string2buf=function(I){var A,O,M,z,U,D=I.length,T=0;for(z=0;z<D;z++)(64512&(O=I.charCodeAt(z)))==55296&&z+1<D&&(64512&(M=I.charCodeAt(z+1)))==56320&&(O=65536+(O-55296<<10)+(M-56320),z++),T+=O<128?1:O<2048?2:O<65536?3:4;for(A=new m.Buf8(T),z=U=0;U<T;z++)(64512&(O=I.charCodeAt(z)))==55296&&z+1<D&&(64512&(M=I.charCodeAt(z+1)))==56320&&(O=65536+(O-55296<<10)+(M-56320),z++),O<128?A[U++]=O:(O<2048?A[U++]=192|O>>>6:(O<65536?A[U++]=224|O>>>12:(A[U++]=240|O>>>18,A[U++]=128|O>>>12&63),A[U++]=128|O>>>6&63),A[U++]=128|63&O);return A},y.buf2binstring=function(I){return _(I,I.length)},y.binstring2buf=function(I){for(var A=new m.Buf8(I.length),O=0,M=A.length;O<M;O++)A[O]=I.charCodeAt(O);return A},y.buf2string=function(I,A){var O,M,z,U,D=A||I.length,T=new Array(2*D);for(O=M=0;O<D;)if((z=I[O++])<128)T[M++]=z;else if(4<(U=x[z]))T[M++]=65533,O+=U-1;else{for(z&=U===2?31:U===3?15:7;1<U&&O<D;)z=z<<6|63&I[O++],U--;1<U?T[M++]=65533:z<65536?T[M++]=z:(z-=65536,T[M++]=55296|z>>10&1023,T[M++]=56320|1023&z)}return _(T,M)},y.utf8border=function(I,A){var O;for((A=A||I.length)>I.length&&(A=I.length),O=A-1;0<=O&&(192&I[O])==128;)O--;return O<0||O===0?A:O+x[I[O]]>A?O:A}},{"./common":41}],43:[function(p,g,y){g.exports=function(m,v,b,x){for(var S=65535&m|0,_=m>>>16&65535|0,I=0;b!==0;){for(b-=I=2e3<b?2e3:b;_=_+(S=S+v[x++]|0)|0,--I;);S%=65521,_%=65521}return S|_<<16|0}},{}],44:[function(p,g,y){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(p,g,y){var m=(function(){for(var v,b=[],x=0;x<256;x++){v=x;for(var S=0;S<8;S++)v=1&v?3988292384^v>>>1:v>>>1;b[x]=v}return b})();g.exports=function(v,b,x,S){var _=m,I=S+x;v^=-1;for(var A=S;A<I;A++)v=v>>>8^_[255&(v^b[A])];return-1^v}},{}],46:[function(p,g,y){var m,v=p("../utils/common"),b=p("./trees"),x=p("./adler32"),S=p("./crc32"),_=p("./messages"),I=-2,A=258,O=262,M=113;function z(V,ee){return V.msg=_[ee],ee}function U(V){return(V<<1)-(4<V?9:0)}function D(V){for(var ee=V.length;0<=--ee;)V[ee]=0}function T(V){var ee=V.state,B=ee.pending;B>V.avail_out&&(B=V.avail_out),B!==0&&(v.arraySet(V.output,ee.pending_buf,ee.pending_out,B,V.next_out),V.next_out+=B,ee.pending_out+=B,V.total_out+=B,V.avail_out-=B,ee.pending-=B,ee.pending===0&&(ee.pending_out=0))}function R(V,ee){b._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,ee),V.block_start=V.strstart,T(V.strm)}function C(V,ee){V.pending_buf[V.pending++]=ee}function N(V,ee){V.pending_buf[V.pending++]=ee>>>8&255,V.pending_buf[V.pending++]=255&ee}function E(V,ee){var B,F,X=V.max_chain_length,te=V.strstart,se=V.prev_length,ce=V.nice_match,ue=V.strstart>V.w_size-O?V.strstart-(V.w_size-O):0,oe=V.window,le=V.w_mask,pe=V.prev,ye=V.strstart+A,be=oe[te+se-1],Ie=oe[te+se];V.prev_length>=V.good_match&&(X>>=2),ce>V.lookahead&&(ce=V.lookahead);do if(oe[(B=ee)+se]===Ie&&oe[B+se-1]===be&&oe[B]===oe[te]&&oe[++B]===oe[te+1]){te+=2,B++;do;while(oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&oe[++te]===oe[++B]&&te<ye);if(F=A-(ye-te),te=ye-A,se<F){if(V.match_start=ee,ce<=(se=F))break;be=oe[te+se-1],Ie=oe[te+se]}}while((ee=pe[ee&le])>ue&&--X!=0);return se<=V.lookahead?se:V.lookahead}function k(V){var ee,B,F,X,te,se,ce,ue,oe,le,pe=V.w_size;do{if(X=V.window_size-V.lookahead-V.strstart,V.strstart>=pe+(pe-O)){for(v.arraySet(V.window,V.window,pe,pe,0),V.match_start-=pe,V.strstart-=pe,V.block_start-=pe,ee=B=V.hash_size;F=V.head[--ee],V.head[ee]=pe<=F?F-pe:0,--B;);for(ee=B=pe;F=V.prev[--ee],V.prev[ee]=pe<=F?F-pe:0,--B;);X+=pe}if(V.strm.avail_in===0)break;if(se=V.strm,ce=V.window,ue=V.strstart+V.lookahead,le=void 0,(oe=X)<(le=se.avail_in)&&(le=oe),B=le===0?0:(se.avail_in-=le,v.arraySet(ce,se.input,se.next_in,le,ue),se.state.wrap===1?se.adler=x(se.adler,ce,le,ue):se.state.wrap===2&&(se.adler=S(se.adler,ce,le,ue)),se.next_in+=le,se.total_in+=le,le),V.lookahead+=B,V.lookahead+V.insert>=3)for(te=V.strstart-V.insert,V.ins_h=V.window[te],V.ins_h=(V.ins_h<<V.hash_shift^V.window[te+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[te+3-1])&V.hash_mask,V.prev[te&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=te,te++,V.insert--,!(V.lookahead+V.insert<3)););}while(V.lookahead<O&&V.strm.avail_in!==0)}function P(V,ee){for(var B,F;;){if(V.lookahead<O){if(k(V),V.lookahead<O&&ee===0)return 1;if(V.lookahead===0)break}if(B=0,V.lookahead>=3&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,B=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),B!==0&&V.strstart-B<=V.w_size-O&&(V.match_length=E(V,B)),V.match_length>=3)if(F=b._tr_tally(V,V.strstart-V.match_start,V.match_length-3),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=3){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,B=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else F=b._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(F&&(R(V,!1),V.strm.avail_out===0))return 1}return V.insert=V.strstart<2?V.strstart:2,ee===4?(R(V,!0),V.strm.avail_out===0?3:4):V.last_lit&&(R(V,!1),V.strm.avail_out===0)?1:2}function q(V,ee){for(var B,F,X;;){if(V.lookahead<O){if(k(V),V.lookahead<O&&ee===0)return 1;if(V.lookahead===0)break}if(B=0,V.lookahead>=3&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,B=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=2,B!==0&&V.prev_length<V.max_lazy_match&&V.strstart-B<=V.w_size-O&&(V.match_length=E(V,B),V.match_length<=5&&(V.strategy===1||V.match_length===3&&4096<V.strstart-V.match_start)&&(V.match_length=2)),V.prev_length>=3&&V.match_length<=V.prev_length){for(X=V.strstart+V.lookahead-3,F=b._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-3),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=X&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,B=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=2,V.strstart++,F&&(R(V,!1),V.strm.avail_out===0))return 1}else if(V.match_available){if((F=b._tr_tally(V,0,V.window[V.strstart-1]))&&R(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return 1}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(F=b._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<2?V.strstart:2,ee===4?(R(V,!0),V.strm.avail_out===0?3:4):V.last_lit&&(R(V,!1),V.strm.avail_out===0)?1:2}function H(V,ee,B,F,X){this.good_length=V,this.max_lazy=ee,this.nice_length=B,this.max_chain=F,this.func=X}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new v.Buf16(1146),this.dyn_dtree=new v.Buf16(122),this.bl_tree=new v.Buf16(78),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new v.Buf16(16),this.heap=new v.Buf16(573),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new v.Buf16(573),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(V){var ee;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=2,(ee=V.state).pending=0,ee.pending_out=0,ee.wrap<0&&(ee.wrap=-ee.wrap),ee.status=ee.wrap?42:M,V.adler=ee.wrap===2?0:1,ee.last_flush=0,b._tr_init(ee),0):z(V,I)}function Y(V){var ee=K(V);return ee===0&&(function(B){B.window_size=2*B.w_size,D(B.head),B.max_lazy_match=m[B.level].max_lazy,B.good_match=m[B.level].good_length,B.nice_match=m[B.level].nice_length,B.max_chain_length=m[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=2,B.match_available=0,B.ins_h=0})(V.state),ee}function Z(V,ee,B,F,X,te){if(!V)return I;var se=1;if(ee===-1&&(ee=6),F<0?(se=0,F=-F):15<F&&(se=2,F-=16),X<1||9<X||B!==8||F<8||15<F||ee<0||9<ee||te<0||4<te)return z(V,I);F===8&&(F=9);var ce=new L;return(V.state=ce).strm=V,ce.wrap=se,ce.gzhead=null,ce.w_bits=F,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=X+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+3-1)/3),ce.window=new v.Buf8(2*ce.w_size),ce.head=new v.Buf16(ce.hash_size),ce.prev=new v.Buf16(ce.w_size),ce.lit_bufsize=1<<X+6,ce.pending_buf_size=4*ce.lit_bufsize,ce.pending_buf=new v.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=ee,ce.strategy=te,ce.method=B,Y(V)}m=[new H(0,0,0,0,(function(V,ee){var B=65535;for(B>V.pending_buf_size-5&&(B=V.pending_buf_size-5);;){if(V.lookahead<=1){if(k(V),V.lookahead===0&&ee===0)return 1;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var F=V.block_start+B;if((V.strstart===0||V.strstart>=F)&&(V.lookahead=V.strstart-F,V.strstart=F,R(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-O&&(R(V,!1),V.strm.avail_out===0))return 1}return V.insert=0,ee===4?(R(V,!0),V.strm.avail_out===0?3:4):(V.strstart>V.block_start&&(R(V,!1),V.strm.avail_out),1)})),new H(4,4,8,4,P),new H(4,5,16,8,P),new H(4,6,32,32,P),new H(4,4,16,16,q),new H(8,16,32,32,q),new H(8,16,128,128,q),new H(8,32,128,256,q),new H(32,128,258,1024,q),new H(32,258,258,4096,q)],y.deflateInit=function(V,ee){return Z(V,ee,8,15,8,0)},y.deflateInit2=Z,y.deflateReset=Y,y.deflateResetKeep=K,y.deflateSetHeader=function(V,ee){return V&&V.state?V.state.wrap!==2?I:(V.state.gzhead=ee,0):I},y.deflate=function(V,ee){var B,F,X,te;if(!V||!V.state||5<ee||ee<0)return V?z(V,I):I;if(F=V.state,!V.output||!V.input&&V.avail_in!==0||F.status===666&&ee!==4)return z(V,V.avail_out===0?-5:I);if(F.strm=V,B=F.last_flush,F.last_flush=ee,F.status===42)if(F.wrap===2)V.adler=0,C(F,31),C(F,139),C(F,8),F.gzhead?(C(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),C(F,255&F.gzhead.time),C(F,F.gzhead.time>>8&255),C(F,F.gzhead.time>>16&255),C(F,F.gzhead.time>>24&255),C(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),C(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(C(F,255&F.gzhead.extra.length),C(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(V.adler=S(V.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(C(F,0),C(F,0),C(F,0),C(F,0),C(F,0),C(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),C(F,3),F.status=M);else{var se=8+(F.w_bits-8<<4)<<8;se|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(se|=32),se+=31-se%31,F.status=M,N(F,se),F.strstart!==0&&(N(F,V.adler>>>16),N(F,65535&V.adler)),V.adler=1}if(F.status===69)if(F.gzhead.extra){for(X=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>X&&(V.adler=S(V.adler,F.pending_buf,F.pending-X,X)),T(V),X=F.pending,F.pending!==F.pending_buf_size));)C(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>X&&(V.adler=S(V.adler,F.pending_buf,F.pending-X,X)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){X=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>X&&(V.adler=S(V.adler,F.pending_buf,F.pending-X,X)),T(V),X=F.pending,F.pending===F.pending_buf_size)){te=1;break}te=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,C(F,te)}while(te!==0);F.gzhead.hcrc&&F.pending>X&&(V.adler=S(V.adler,F.pending_buf,F.pending-X,X)),te===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){X=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>X&&(V.adler=S(V.adler,F.pending_buf,F.pending-X,X)),T(V),X=F.pending,F.pending===F.pending_buf_size)){te=1;break}te=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,C(F,te)}while(te!==0);F.gzhead.hcrc&&F.pending>X&&(V.adler=S(V.adler,F.pending_buf,F.pending-X,X)),te===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&T(V),F.pending+2<=F.pending_buf_size&&(C(F,255&V.adler),C(F,V.adler>>8&255),V.adler=0,F.status=M)):F.status=M),F.pending!==0){if(T(V),V.avail_out===0)return F.last_flush=-1,0}else if(V.avail_in===0&&U(ee)<=U(B)&&ee!==4)return z(V,-5);if(F.status===666&&V.avail_in!==0)return z(V,-5);if(V.avail_in!==0||F.lookahead!==0||ee!==0&&F.status!==666){var ce=F.strategy===2?(function(ue,oe){for(var le;;){if(ue.lookahead===0&&(k(ue),ue.lookahead===0)){if(oe===0)return 1;break}if(ue.match_length=0,le=b._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,le&&(R(ue,!1),ue.strm.avail_out===0))return 1}return ue.insert=0,oe===4?(R(ue,!0),ue.strm.avail_out===0?3:4):ue.last_lit&&(R(ue,!1),ue.strm.avail_out===0)?1:2})(F,ee):F.strategy===3?(function(ue,oe){for(var le,pe,ye,be,Ie=ue.window;;){if(ue.lookahead<=A){if(k(ue),ue.lookahead<=A&&oe===0)return 1;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=3&&0<ue.strstart&&(pe=Ie[ye=ue.strstart-1])===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]){be=ue.strstart+A;do;while(pe===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]&&pe===Ie[++ye]&&ye<be);ue.match_length=A-(be-ye),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=3?(le=b._tr_tally(ue,1,ue.match_length-3),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(le=b._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),le&&(R(ue,!1),ue.strm.avail_out===0))return 1}return ue.insert=0,oe===4?(R(ue,!0),ue.strm.avail_out===0?3:4):ue.last_lit&&(R(ue,!1),ue.strm.avail_out===0)?1:2})(F,ee):m[F.level].func(F,ee);if(ce!==3&&ce!==4||(F.status=666),ce===1||ce===3)return V.avail_out===0&&(F.last_flush=-1),0;if(ce===2&&(ee===1?b._tr_align(F):ee!==5&&(b._tr_stored_block(F,0,0,!1),ee===3&&(D(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),T(V),V.avail_out===0))return F.last_flush=-1,0}return ee!==4?0:F.wrap<=0?1:(F.wrap===2?(C(F,255&V.adler),C(F,V.adler>>8&255),C(F,V.adler>>16&255),C(F,V.adler>>24&255),C(F,255&V.total_in),C(F,V.total_in>>8&255),C(F,V.total_in>>16&255),C(F,V.total_in>>24&255)):(N(F,V.adler>>>16),N(F,65535&V.adler)),T(V),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?0:1)},y.deflateEnd=function(V){var ee;return V&&V.state?(ee=V.state.status)!==42&&ee!==69&&ee!==73&&ee!==91&&ee!==103&&ee!==M&&ee!==666?z(V,I):(V.state=null,ee===M?z(V,-3):0):I},y.deflateSetDictionary=function(V,ee){var B,F,X,te,se,ce,ue,oe,le=ee.length;if(!V||!V.state||(te=(B=V.state).wrap)===2||te===1&&B.status!==42||B.lookahead)return I;for(te===1&&(V.adler=x(V.adler,ee,le,0)),B.wrap=0,le>=B.w_size&&(te===0&&(D(B.head),B.strstart=0,B.block_start=0,B.insert=0),oe=new v.Buf8(B.w_size),v.arraySet(oe,ee,le-B.w_size,B.w_size,0),ee=oe,le=B.w_size),se=V.avail_in,ce=V.next_in,ue=V.input,V.avail_in=le,V.next_in=0,V.input=ee,k(B);B.lookahead>=3;){for(F=B.strstart,X=B.lookahead-2;B.ins_h=(B.ins_h<<B.hash_shift^B.window[F+3-1])&B.hash_mask,B.prev[F&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=F,F++,--X;);B.strstart=F,B.lookahead=2,k(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=2,B.match_available=0,V.next_in=ce,V.input=ue,V.avail_in=se,B.wrap=te,0},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(p,g,y){g.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(p,g,y){g.exports=function(m,v){var b,x,S,_,I,A,O,M,z,U,D,T,R,C,N,E,k,P,q,H,L,K,Y,Z,V;b=m.state,x=m.next_in,Z=m.input,S=x+(m.avail_in-5),_=m.next_out,V=m.output,I=_-(v-m.avail_out),A=_+(m.avail_out-257),O=b.dmax,M=b.wsize,z=b.whave,U=b.wnext,D=b.window,T=b.hold,R=b.bits,C=b.lencode,N=b.distcode,E=(1<<b.lenbits)-1,k=(1<<b.distbits)-1;e:do{R<15&&(T+=Z[x++]<<R,R+=8,T+=Z[x++]<<R,R+=8),P=C[T&E];t:for(;;){if(T>>>=q=P>>>24,R-=q,(q=P>>>16&255)==0)V[_++]=65535&P;else{if(!(16&q)){if((64&q)==0){P=C[(65535&P)+(T&(1<<q)-1)];continue t}if(32&q){b.mode=12;break e}m.msg="invalid literal/length code",b.mode=30;break e}H=65535&P,(q&=15)&&(R<q&&(T+=Z[x++]<<R,R+=8),H+=T&(1<<q)-1,T>>>=q,R-=q),R<15&&(T+=Z[x++]<<R,R+=8,T+=Z[x++]<<R,R+=8),P=N[T&k];r:for(;;){if(T>>>=q=P>>>24,R-=q,!(16&(q=P>>>16&255))){if((64&q)==0){P=N[(65535&P)+(T&(1<<q)-1)];continue r}m.msg="invalid distance code",b.mode=30;break e}if(L=65535&P,R<(q&=15)&&(T+=Z[x++]<<R,(R+=8)<q&&(T+=Z[x++]<<R,R+=8)),O<(L+=T&(1<<q)-1)){m.msg="invalid distance too far back",b.mode=30;break e}if(T>>>=q,R-=q,(q=_-I)<L){if(z<(q=L-q)&&b.sane){m.msg="invalid distance too far back",b.mode=30;break e}if(Y=D,(K=0)===U){if(K+=M-q,q<H){for(H-=q;V[_++]=D[K++],--q;);K=_-L,Y=V}}else if(U<q){if(K+=M+U-q,(q-=U)<H){for(H-=q;V[_++]=D[K++],--q;);if(K=0,U<H){for(H-=q=U;V[_++]=D[K++],--q;);K=_-L,Y=V}}}else if(K+=U-q,q<H){for(H-=q;V[_++]=D[K++],--q;);K=_-L,Y=V}for(;2<H;)V[_++]=Y[K++],V[_++]=Y[K++],V[_++]=Y[K++],H-=3;H&&(V[_++]=Y[K++],1<H&&(V[_++]=Y[K++]))}else{for(K=_-L;V[_++]=V[K++],V[_++]=V[K++],V[_++]=V[K++],2<(H-=3););H&&(V[_++]=V[K++],1<H&&(V[_++]=V[K++]))}break}}break}}while(x<S&&_<A);x-=H=R>>3,T&=(1<<(R-=H<<3))-1,m.next_in=x,m.next_out=_,m.avail_in=x<S?S-x+5:5-(x-S),m.avail_out=_<A?A-_+257:257-(_-A),b.hold=T,b.bits=R}},{}],49:[function(p,g,y){var m=p("../utils/common"),v=p("./adler32"),b=p("./crc32"),x=p("./inffast"),S=p("./inftrees"),_=-2;function I(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(E){var k;return E&&E.state?(k=E.state,E.total_in=E.total_out=k.total=0,E.msg="",k.wrap&&(E.adler=1&k.wrap),k.mode=1,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new m.Buf32(852),k.distcode=k.distdyn=new m.Buf32(592),k.sane=1,k.back=-1,0):_}function M(E){var k;return E&&E.state?((k=E.state).wsize=0,k.whave=0,k.wnext=0,O(E)):_}function z(E,k){var P,q;return E&&E.state?(q=E.state,k<0?(P=0,k=-k):(P=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?_:(q.window!==null&&q.wbits!==k&&(q.window=null),q.wrap=P,q.wbits=k,M(E))):_}function U(E,k){var P,q;return E?(q=new A,(E.state=q).window=null,(P=z(E,k))!==0&&(E.state=null),P):_}var D,T,R=!0;function C(E){if(R){var k;for(D=new m.Buf32(512),T=new m.Buf32(32),k=0;k<144;)E.lens[k++]=8;for(;k<256;)E.lens[k++]=9;for(;k<280;)E.lens[k++]=7;for(;k<288;)E.lens[k++]=8;for(S(1,E.lens,0,288,D,0,E.work,{bits:9}),k=0;k<32;)E.lens[k++]=5;S(2,E.lens,0,32,T,0,E.work,{bits:5}),R=!1}E.lencode=D,E.lenbits=9,E.distcode=T,E.distbits=5}function N(E,k,P,q){var H,L=E.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new m.Buf8(L.wsize)),q>=L.wsize?(m.arraySet(L.window,k,P-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(q<(H=L.wsize-L.wnext)&&(H=q),m.arraySet(L.window,k,P-q,H,L.wnext),(q-=H)?(m.arraySet(L.window,k,P-q,q,0),L.wnext=q,L.whave=L.wsize):(L.wnext+=H,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=H))),0}y.inflateReset=M,y.inflateReset2=z,y.inflateResetKeep=O,y.inflateInit=function(E){return U(E,15)},y.inflateInit2=U,y.inflate=function(E,k){var P,q,H,L,K,Y,Z,V,ee,B,F,X,te,se,ce,ue,oe,le,pe,ye,be,Ie,Oe,Me,Re=0,He=new m.Buf8(4),qe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return _;(P=E.state).mode===12&&(P.mode=13),K=E.next_out,H=E.output,Z=E.avail_out,L=E.next_in,q=E.input,Y=E.avail_in,V=P.hold,ee=P.bits,B=Y,F=Z,Ie=0;e:for(;;)switch(P.mode){case 1:if(P.wrap===0){P.mode=13;break}for(;ee<16;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(2&P.wrap&&V===35615){He[P.check=0]=255&V,He[1]=V>>>8&255,P.check=b(P.check,He,2,0),ee=V=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&V)<<8)+(V>>8))%31){E.msg="incorrect header check",P.mode=30;break}if((15&V)!=8){E.msg="unknown compression method",P.mode=30;break}if(ee-=4,be=8+(15&(V>>>=4)),P.wbits===0)P.wbits=be;else if(be>P.wbits){E.msg="invalid window size",P.mode=30;break}P.dmax=1<<be,E.adler=P.check=1,P.mode=512&V?10:12,ee=V=0;break;case 2:for(;ee<16;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(P.flags=V,(255&P.flags)!=8){E.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){E.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=V>>8&1),512&P.flags&&(He[0]=255&V,He[1]=V>>>8&255,P.check=b(P.check,He,2,0)),ee=V=0,P.mode=3;case 3:for(;ee<32;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}P.head&&(P.head.time=V),512&P.flags&&(He[0]=255&V,He[1]=V>>>8&255,He[2]=V>>>16&255,He[3]=V>>>24&255,P.check=b(P.check,He,4,0)),ee=V=0,P.mode=4;case 4:for(;ee<16;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}P.head&&(P.head.xflags=255&V,P.head.os=V>>8),512&P.flags&&(He[0]=255&V,He[1]=V>>>8&255,P.check=b(P.check,He,2,0)),ee=V=0,P.mode=5;case 5:if(1024&P.flags){for(;ee<16;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}P.length=V,P.head&&(P.head.extra_len=V),512&P.flags&&(He[0]=255&V,He[1]=V>>>8&255,P.check=b(P.check,He,2,0)),ee=V=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(Y<(X=P.length)&&(X=Y),X&&(P.head&&(be=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),m.arraySet(P.head.extra,q,L,X,be)),512&P.flags&&(P.check=b(P.check,q,X,L)),Y-=X,L+=X,P.length-=X),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(Y===0)break e;for(X=0;be=q[L+X++],P.head&&be&&P.length<65536&&(P.head.name+=String.fromCharCode(be)),be&&X<Y;);if(512&P.flags&&(P.check=b(P.check,q,X,L)),Y-=X,L+=X,be)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(Y===0)break e;for(X=0;be=q[L+X++],P.head&&be&&P.length<65536&&(P.head.comment+=String.fromCharCode(be)),be&&X<Y;);if(512&P.flags&&(P.check=b(P.check,q,X,L)),Y-=X,L+=X,be)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;ee<16;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(V!==(65535&P.check)){E.msg="header crc mismatch",P.mode=30;break}ee=V=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),E.adler=P.check=0,P.mode=12;break;case 10:for(;ee<32;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}E.adler=P.check=I(V),ee=V=0,P.mode=11;case 11:if(P.havedict===0)return E.next_out=K,E.avail_out=Z,E.next_in=L,E.avail_in=Y,P.hold=V,P.bits=ee,2;E.adler=P.check=1,P.mode=12;case 12:if(k===5||k===6)break e;case 13:if(P.last){V>>>=7&ee,ee-=7&ee,P.mode=27;break}for(;ee<3;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}switch(P.last=1&V,ee-=1,3&(V>>>=1)){case 0:P.mode=14;break;case 1:if(C(P),P.mode=20,k!==6)break;V>>>=2,ee-=2;break e;case 2:P.mode=17;break;case 3:E.msg="invalid block type",P.mode=30}V>>>=2,ee-=2;break;case 14:for(V>>>=7&ee,ee-=7&ee;ee<32;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if((65535&V)!=(V>>>16^65535)){E.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&V,ee=V=0,P.mode=15,k===6)break e;case 15:P.mode=16;case 16:if(X=P.length){if(Y<X&&(X=Y),Z<X&&(X=Z),X===0)break e;m.arraySet(H,q,L,X,K),Y-=X,L+=X,Z-=X,K+=X,P.length-=X;break}P.mode=12;break;case 17:for(;ee<14;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(P.nlen=257+(31&V),V>>>=5,ee-=5,P.ndist=1+(31&V),V>>>=5,ee-=5,P.ncode=4+(15&V),V>>>=4,ee-=4,286<P.nlen||30<P.ndist){E.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;ee<3;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}P.lens[qe[P.have++]]=7&V,V>>>=3,ee-=3}for(;P.have<19;)P.lens[qe[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,Oe={bits:P.lenbits},Ie=S(0,P.lens,0,19,P.lencode,0,P.work,Oe),P.lenbits=Oe.bits,Ie){E.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;ue=(Re=P.lencode[V&(1<<P.lenbits)-1])>>>16&255,oe=65535&Re,!((ce=Re>>>24)<=ee);){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(oe<16)V>>>=ce,ee-=ce,P.lens[P.have++]=oe;else{if(oe===16){for(Me=ce+2;ee<Me;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(V>>>=ce,ee-=ce,P.have===0){E.msg="invalid bit length repeat",P.mode=30;break}be=P.lens[P.have-1],X=3+(3&V),V>>>=2,ee-=2}else if(oe===17){for(Me=ce+3;ee<Me;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}ee-=ce,be=0,X=3+(7&(V>>>=ce)),V>>>=3,ee-=3}else{for(Me=ce+7;ee<Me;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}ee-=ce,be=0,X=11+(127&(V>>>=ce)),V>>>=7,ee-=7}if(P.have+X>P.nlen+P.ndist){E.msg="invalid bit length repeat",P.mode=30;break}for(;X--;)P.lens[P.have++]=be}}if(P.mode===30)break;if(P.lens[256]===0){E.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,Oe={bits:P.lenbits},Ie=S(1,P.lens,0,P.nlen,P.lencode,0,P.work,Oe),P.lenbits=Oe.bits,Ie){E.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,Oe={bits:P.distbits},Ie=S(2,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,Oe),P.distbits=Oe.bits,Ie){E.msg="invalid distances set",P.mode=30;break}if(P.mode=20,k===6)break e;case 20:P.mode=21;case 21:if(6<=Y&&258<=Z){E.next_out=K,E.avail_out=Z,E.next_in=L,E.avail_in=Y,P.hold=V,P.bits=ee,x(E,F),K=E.next_out,H=E.output,Z=E.avail_out,L=E.next_in,q=E.input,Y=E.avail_in,V=P.hold,ee=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;ue=(Re=P.lencode[V&(1<<P.lenbits)-1])>>>16&255,oe=65535&Re,!((ce=Re>>>24)<=ee);){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(ue&&(240&ue)==0){for(le=ce,pe=ue,ye=oe;ue=(Re=P.lencode[ye+((V&(1<<le+pe)-1)>>le)])>>>16&255,oe=65535&Re,!(le+(ce=Re>>>24)<=ee);){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}V>>>=le,ee-=le,P.back+=le}if(V>>>=ce,ee-=ce,P.back+=ce,P.length=oe,ue===0){P.mode=26;break}if(32&ue){P.back=-1,P.mode=12;break}if(64&ue){E.msg="invalid literal/length code",P.mode=30;break}P.extra=15&ue,P.mode=22;case 22:if(P.extra){for(Me=P.extra;ee<Me;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}P.length+=V&(1<<P.extra)-1,V>>>=P.extra,ee-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;ue=(Re=P.distcode[V&(1<<P.distbits)-1])>>>16&255,oe=65535&Re,!((ce=Re>>>24)<=ee);){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if((240&ue)==0){for(le=ce,pe=ue,ye=oe;ue=(Re=P.distcode[ye+((V&(1<<le+pe)-1)>>le)])>>>16&255,oe=65535&Re,!(le+(ce=Re>>>24)<=ee);){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}V>>>=le,ee-=le,P.back+=le}if(V>>>=ce,ee-=ce,P.back+=ce,64&ue){E.msg="invalid distance code",P.mode=30;break}P.offset=oe,P.extra=15&ue,P.mode=24;case 24:if(P.extra){for(Me=P.extra;ee<Me;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}P.offset+=V&(1<<P.extra)-1,V>>>=P.extra,ee-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){E.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(Z===0)break e;if(X=F-Z,P.offset>X){if((X=P.offset-X)>P.whave&&P.sane){E.msg="invalid distance too far back",P.mode=30;break}te=X>P.wnext?(X-=P.wnext,P.wsize-X):P.wnext-X,X>P.length&&(X=P.length),se=P.window}else se=H,te=K-P.offset,X=P.length;for(Z<X&&(X=Z),Z-=X,P.length-=X;H[K++]=se[te++],--X;);P.length===0&&(P.mode=21);break;case 26:if(Z===0)break e;H[K++]=P.length,Z--,P.mode=21;break;case 27:if(P.wrap){for(;ee<32;){if(Y===0)break e;Y--,V|=q[L++]<<ee,ee+=8}if(F-=Z,E.total_out+=F,P.total+=F,F&&(E.adler=P.check=P.flags?b(P.check,H,F,K-F):v(P.check,H,F,K-F)),F=Z,(P.flags?V:I(V))!==P.check){E.msg="incorrect data check",P.mode=30;break}ee=V=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;ee<32;){if(Y===0)break e;Y--,V+=q[L++]<<ee,ee+=8}if(V!==(4294967295&P.total)){E.msg="incorrect length check",P.mode=30;break}ee=V=0}P.mode=29;case 29:Ie=1;break e;case 30:Ie=-3;break e;case 31:return-4;case 32:default:return _}return E.next_out=K,E.avail_out=Z,E.next_in=L,E.avail_in=Y,P.hold=V,P.bits=ee,(P.wsize||F!==E.avail_out&&P.mode<30&&(P.mode<27||k!==4))&&N(E,E.output,E.next_out,F-E.avail_out)?(P.mode=31,-4):(B-=E.avail_in,F-=E.avail_out,E.total_in+=B,E.total_out+=F,P.total+=F,P.wrap&&F&&(E.adler=P.check=P.flags?b(P.check,H,F,E.next_out-F):v(P.check,H,F,E.next_out-F)),E.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(B==0&&F===0||k===4)&&Ie===0&&(Ie=-5),Ie)},y.inflateEnd=function(E){if(!E||!E.state)return _;var k=E.state;return k.window&&(k.window=null),E.state=null,0},y.inflateGetHeader=function(E,k){var P;return E&&E.state?(2&(P=E.state).wrap)==0?_:((P.head=k).done=!1,0):_},y.inflateSetDictionary=function(E,k){var P,q=k.length;return E&&E.state?(P=E.state).wrap!==0&&P.mode!==11?_:P.mode===11&&v(1,k,q,0)!==P.check?-3:N(E,k,q,q)?(P.mode=31,-4):(P.havedict=1,0):_},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(p,g,y){var m=p("../utils/common"),v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];g.exports=function(_,I,A,O,M,z,U,D){var T,R,C,N,E,k,P,q,H,L=D.bits,K=0,Y=0,Z=0,V=0,ee=0,B=0,F=0,X=0,te=0,se=0,ce=null,ue=0,oe=new m.Buf16(16),le=new m.Buf16(16),pe=null,ye=0;for(K=0;K<=15;K++)oe[K]=0;for(Y=0;Y<O;Y++)oe[I[A+Y]]++;for(ee=L,V=15;1<=V&&oe[V]===0;V--);if(V<ee&&(ee=V),V===0)return M[z++]=20971520,M[z++]=20971520,D.bits=1,0;for(Z=1;Z<V&&oe[Z]===0;Z++);for(ee<Z&&(ee=Z),K=X=1;K<=15;K++)if(X<<=1,(X-=oe[K])<0)return-1;if(0<X&&(_===0||V!==1))return-1;for(le[1]=0,K=1;K<15;K++)le[K+1]=le[K]+oe[K];for(Y=0;Y<O;Y++)I[A+Y]!==0&&(U[le[I[A+Y]]++]=Y);if(k=_===0?(ce=pe=U,19):_===1?(ce=v,ue-=257,pe=b,ye-=257,256):(ce=x,pe=S,-1),K=Z,E=z,F=Y=se=0,C=-1,N=(te=1<<(B=ee))-1,_===1&&852<te||_===2&&592<te)return 1;for(;;){for(P=K-F,H=U[Y]<k?(q=0,U[Y]):U[Y]>k?(q=pe[ye+U[Y]],ce[ue+U[Y]]):(q=96,0),T=1<<K-F,Z=R=1<<B;M[E+(se>>F)+(R-=T)]=P<<24|q<<16|H|0,R!==0;);for(T=1<<K-1;se&T;)T>>=1;if(T!==0?(se&=T-1,se+=T):se=0,Y++,--oe[K]==0){if(K===V)break;K=I[A+U[Y]]}if(ee<K&&(se&N)!==C){for(F===0&&(F=ee),E+=Z,X=1<<(B=K-F);B+F<V&&!((X-=oe[B+F])<=0);)B++,X<<=1;if(te+=1<<B,_===1&&852<te||_===2&&592<te)return 1;M[C=se&N]=ee<<24|B<<16|E-z|0}}return se!==0&&(M[E+se]=K-F<<24|64<<16|0),D.bits=ee,0}},{"../utils/common":41}],51:[function(p,g,y){g.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(p,g,y){var m=p("../utils/common");function v(pe){for(var ye=pe.length;0<=--ye;)pe[ye]=0}var b=256,x=286,S=30,_=15,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(576);v(z);var U=new Array(60);v(U);var D=new Array(512);v(D);var T=new Array(256);v(T);var R=new Array(29);v(R);var C,N,E,k=new Array(S);function P(pe,ye,be,Ie,Oe){this.static_tree=pe,this.extra_bits=ye,this.extra_base=be,this.elems=Ie,this.max_length=Oe,this.has_stree=pe&&pe.length}function q(pe,ye){this.dyn_tree=pe,this.max_code=0,this.stat_desc=ye}function H(pe){return pe<256?D[pe]:D[256+(pe>>>7)]}function L(pe,ye){pe.pending_buf[pe.pending++]=255&ye,pe.pending_buf[pe.pending++]=ye>>>8&255}function K(pe,ye,be){pe.bi_valid>16-be?(pe.bi_buf|=ye<<pe.bi_valid&65535,L(pe,pe.bi_buf),pe.bi_buf=ye>>16-pe.bi_valid,pe.bi_valid+=be-16):(pe.bi_buf|=ye<<pe.bi_valid&65535,pe.bi_valid+=be)}function Y(pe,ye,be){K(pe,be[2*ye],be[2*ye+1])}function Z(pe,ye){for(var be=0;be|=1&pe,pe>>>=1,be<<=1,0<--ye;);return be>>>1}function V(pe,ye,be){var Ie,Oe,Me=new Array(16),Re=0;for(Ie=1;Ie<=_;Ie++)Me[Ie]=Re=Re+be[Ie-1]<<1;for(Oe=0;Oe<=ye;Oe++){var He=pe[2*Oe+1];He!==0&&(pe[2*Oe]=Z(Me[He]++,He))}}function ee(pe){var ye;for(ye=0;ye<x;ye++)pe.dyn_ltree[2*ye]=0;for(ye=0;ye<S;ye++)pe.dyn_dtree[2*ye]=0;for(ye=0;ye<19;ye++)pe.bl_tree[2*ye]=0;pe.dyn_ltree[512]=1,pe.opt_len=pe.static_len=0,pe.last_lit=pe.matches=0}function B(pe){8<pe.bi_valid?L(pe,pe.bi_buf):0<pe.bi_valid&&(pe.pending_buf[pe.pending++]=pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0}function F(pe,ye,be,Ie){var Oe=2*ye,Me=2*be;return pe[Oe]<pe[Me]||pe[Oe]===pe[Me]&&Ie[ye]<=Ie[be]}function X(pe,ye,be){for(var Ie=pe.heap[be],Oe=be<<1;Oe<=pe.heap_len&&(Oe<pe.heap_len&&F(ye,pe.heap[Oe+1],pe.heap[Oe],pe.depth)&&Oe++,!F(ye,Ie,pe.heap[Oe],pe.depth));)pe.heap[be]=pe.heap[Oe],be=Oe,Oe<<=1;pe.heap[be]=Ie}function te(pe,ye,be){var Ie,Oe,Me,Re,He=0;if(pe.last_lit!==0)for(;Ie=pe.pending_buf[pe.d_buf+2*He]<<8|pe.pending_buf[pe.d_buf+2*He+1],Oe=pe.pending_buf[pe.l_buf+He],He++,Ie===0?Y(pe,Oe,ye):(Y(pe,(Me=T[Oe])+b+1,ye),(Re=I[Me])!==0&&K(pe,Oe-=R[Me],Re),Y(pe,Me=H(--Ie),be),(Re=A[Me])!==0&&K(pe,Ie-=k[Me],Re)),He<pe.last_lit;);Y(pe,256,ye)}function se(pe,ye){var be,Ie,Oe,Me=ye.dyn_tree,Re=ye.stat_desc.static_tree,He=ye.stat_desc.has_stree,qe=ye.stat_desc.elems,ct=-1;for(pe.heap_len=0,pe.heap_max=573,be=0;be<qe;be++)Me[2*be]!==0?(pe.heap[++pe.heap_len]=ct=be,pe.depth[be]=0):Me[2*be+1]=0;for(;pe.heap_len<2;)Me[2*(Oe=pe.heap[++pe.heap_len]=ct<2?++ct:0)]=1,pe.depth[Oe]=0,pe.opt_len--,He&&(pe.static_len-=Re[2*Oe+1]);for(ye.max_code=ct,be=pe.heap_len>>1;1<=be;be--)X(pe,Me,be);for(Oe=qe;be=pe.heap[1],pe.heap[1]=pe.heap[pe.heap_len--],X(pe,Me,1),Ie=pe.heap[1],pe.heap[--pe.heap_max]=be,pe.heap[--pe.heap_max]=Ie,Me[2*Oe]=Me[2*be]+Me[2*Ie],pe.depth[Oe]=(pe.depth[be]>=pe.depth[Ie]?pe.depth[be]:pe.depth[Ie])+1,Me[2*be+1]=Me[2*Ie+1]=Oe,pe.heap[1]=Oe++,X(pe,Me,1),2<=pe.heap_len;);pe.heap[--pe.heap_max]=pe.heap[1],(function(ft,St){var Rt,Ft,ot,Kt,Pt,Ee,We=St.dyn_tree,ut=St.max_code,wt=St.stat_desc.static_tree,Bt=St.stat_desc.has_stree,dr=St.stat_desc.extra_bits,Xt=St.stat_desc.extra_base,pr=St.stat_desc.max_length,vr=0;for(Kt=0;Kt<=_;Kt++)ft.bl_count[Kt]=0;for(We[2*ft.heap[ft.heap_max]+1]=0,Rt=ft.heap_max+1;Rt<573;Rt++)pr<(Kt=We[2*We[2*(Ft=ft.heap[Rt])+1]+1]+1)&&(Kt=pr,vr++),We[2*Ft+1]=Kt,ut<Ft||(ft.bl_count[Kt]++,Pt=0,Xt<=Ft&&(Pt=dr[Ft-Xt]),Ee=We[2*Ft],ft.opt_len+=Ee*(Kt+Pt),Bt&&(ft.static_len+=Ee*(wt[2*Ft+1]+Pt)));if(vr!==0){do{for(Kt=pr-1;ft.bl_count[Kt]===0;)Kt--;ft.bl_count[Kt]--,ft.bl_count[Kt+1]+=2,ft.bl_count[pr]--,vr-=2}while(0<vr);for(Kt=pr;Kt!==0;Kt--)for(Ft=ft.bl_count[Kt];Ft!==0;)ut<(ot=ft.heap[--Rt])||(We[2*ot+1]!==Kt&&(ft.opt_len+=(Kt-We[2*ot+1])*We[2*ot],We[2*ot+1]=Kt),Ft--)}})(pe,ye),V(Me,ct,pe.bl_count)}function ce(pe,ye,be){var Ie,Oe,Me=-1,Re=ye[1],He=0,qe=7,ct=4;for(Re===0&&(qe=138,ct=3),ye[2*(be+1)+1]=65535,Ie=0;Ie<=be;Ie++)Oe=Re,Re=ye[2*(Ie+1)+1],++He<qe&&Oe===Re||(He<ct?pe.bl_tree[2*Oe]+=He:Oe!==0?(Oe!==Me&&pe.bl_tree[2*Oe]++,pe.bl_tree[32]++):He<=10?pe.bl_tree[34]++:pe.bl_tree[36]++,Me=Oe,ct=(He=0)===Re?(qe=138,3):Oe===Re?(qe=6,3):(qe=7,4))}function ue(pe,ye,be){var Ie,Oe,Me=-1,Re=ye[1],He=0,qe=7,ct=4;for(Re===0&&(qe=138,ct=3),Ie=0;Ie<=be;Ie++)if(Oe=Re,Re=ye[2*(Ie+1)+1],!(++He<qe&&Oe===Re)){if(He<ct)for(;Y(pe,Oe,pe.bl_tree),--He!=0;);else Oe!==0?(Oe!==Me&&(Y(pe,Oe,pe.bl_tree),He--),Y(pe,16,pe.bl_tree),K(pe,He-3,2)):He<=10?(Y(pe,17,pe.bl_tree),K(pe,He-3,3)):(Y(pe,18,pe.bl_tree),K(pe,He-11,7));Me=Oe,ct=(He=0)===Re?(qe=138,3):Oe===Re?(qe=6,3):(qe=7,4)}}v(k);var oe=!1;function le(pe,ye,be,Ie){K(pe,0+(Ie?1:0),3),(function(Oe,Me,Re,He){B(Oe),L(Oe,Re),L(Oe,~Re),m.arraySet(Oe.pending_buf,Oe.window,Me,Re,Oe.pending),Oe.pending+=Re})(pe,ye,be)}y._tr_init=function(pe){oe||((function(){var ye,be,Ie,Oe,Me,Re=new Array(16);for(Oe=Ie=0;Oe<28;Oe++)for(R[Oe]=Ie,ye=0;ye<1<<I[Oe];ye++)T[Ie++]=Oe;for(T[Ie-1]=Oe,Oe=Me=0;Oe<16;Oe++)for(k[Oe]=Me,ye=0;ye<1<<A[Oe];ye++)D[Me++]=Oe;for(Me>>=7;Oe<S;Oe++)for(k[Oe]=Me<<7,ye=0;ye<1<<A[Oe]-7;ye++)D[256+Me++]=Oe;for(be=0;be<=_;be++)Re[be]=0;for(ye=0;ye<=143;)z[2*ye+1]=8,ye++,Re[8]++;for(;ye<=255;)z[2*ye+1]=9,ye++,Re[9]++;for(;ye<=279;)z[2*ye+1]=7,ye++,Re[7]++;for(;ye<=287;)z[2*ye+1]=8,ye++,Re[8]++;for(V(z,287,Re),ye=0;ye<S;ye++)U[2*ye+1]=5,U[2*ye]=Z(ye,5);C=new P(z,I,257,x,_),N=new P(U,A,0,S,_),E=new P(new Array(0),O,0,19,7)})(),oe=!0),pe.l_desc=new q(pe.dyn_ltree,C),pe.d_desc=new q(pe.dyn_dtree,N),pe.bl_desc=new q(pe.bl_tree,E),pe.bi_buf=0,pe.bi_valid=0,ee(pe)},y._tr_stored_block=le,y._tr_flush_block=function(pe,ye,be,Ie){var Oe,Me,Re=0;0<pe.level?(pe.strm.data_type===2&&(pe.strm.data_type=(function(He){var qe,ct=4093624447;for(qe=0;qe<=31;qe++,ct>>>=1)if(1&ct&&He.dyn_ltree[2*qe]!==0)return 0;if(He.dyn_ltree[18]!==0||He.dyn_ltree[20]!==0||He.dyn_ltree[26]!==0)return 1;for(qe=32;qe<b;qe++)if(He.dyn_ltree[2*qe]!==0)return 1;return 0})(pe)),se(pe,pe.l_desc),se(pe,pe.d_desc),Re=(function(He){var qe;for(ce(He,He.dyn_ltree,He.l_desc.max_code),ce(He,He.dyn_dtree,He.d_desc.max_code),se(He,He.bl_desc),qe=18;3<=qe&&He.bl_tree[2*M[qe]+1]===0;qe--);return He.opt_len+=3*(qe+1)+5+5+4,qe})(pe),Oe=pe.opt_len+3+7>>>3,(Me=pe.static_len+3+7>>>3)<=Oe&&(Oe=Me)):Oe=Me=be+5,be+4<=Oe&&ye!==-1?le(pe,ye,be,Ie):pe.strategy===4||Me===Oe?(K(pe,2+(Ie?1:0),3),te(pe,z,U)):(K(pe,4+(Ie?1:0),3),(function(He,qe,ct,ft){var St;for(K(He,qe-257,5),K(He,ct-1,5),K(He,ft-4,4),St=0;St<ft;St++)K(He,He.bl_tree[2*M[St]+1],3);ue(He,He.dyn_ltree,qe-1),ue(He,He.dyn_dtree,ct-1)})(pe,pe.l_desc.max_code+1,pe.d_desc.max_code+1,Re+1),te(pe,pe.dyn_ltree,pe.dyn_dtree)),ee(pe),Ie&&B(pe)},y._tr_tally=function(pe,ye,be){return pe.pending_buf[pe.d_buf+2*pe.last_lit]=ye>>>8&255,pe.pending_buf[pe.d_buf+2*pe.last_lit+1]=255&ye,pe.pending_buf[pe.l_buf+pe.last_lit]=255&be,pe.last_lit++,ye===0?pe.dyn_ltree[2*be]++:(pe.matches++,ye--,pe.dyn_ltree[2*(T[be]+b+1)]++,pe.dyn_dtree[2*H(ye)]++),pe.last_lit===pe.lit_bufsize-1},y._tr_align=function(pe){K(pe,2,3),Y(pe,256,z),(function(ye){ye.bi_valid===16?(L(ye,ye.bi_buf),ye.bi_buf=0,ye.bi_valid=0):8<=ye.bi_valid&&(ye.pending_buf[ye.pending++]=255&ye.bi_buf,ye.bi_buf>>=8,ye.bi_valid-=8)})(pe)}},{"../utils/common":41}],53:[function(p,g,y){g.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(p,g,y){(function(m){(function(v,b){if(!v.setImmediate){var x,S,_,I,A=1,O={},M=!1,z=v.document,U=Object.getPrototypeOf&&Object.getPrototypeOf(v);U=U&&U.setTimeout?U:v,x={}.toString.call(v.process)==="[object process]"?function(C){i.nextTick((function(){T(C)}))}:(function(){if(v.postMessage&&!v.importScripts){var C=!0,N=v.onmessage;return v.onmessage=function(){C=!1},v.postMessage("","*"),v.onmessage=N,C}})()?(I="setImmediate$"+Math.random()+"$",v.addEventListener?v.addEventListener("message",R,!1):v.attachEvent("onmessage",R),function(C){v.postMessage(I+C,"*")}):v.MessageChannel?((_=new MessageChannel).port1.onmessage=function(C){T(C.data)},function(C){_.port2.postMessage(C)}):z&&"onreadystatechange"in z.createElement("script")?(S=z.documentElement,function(C){var N=z.createElement("script");N.onreadystatechange=function(){T(C),N.onreadystatechange=null,S.removeChild(N),N=null},S.appendChild(N)}):function(C){setTimeout(T,0,C)},U.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var N=new Array(arguments.length-1),E=0;E<N.length;E++)N[E]=arguments[E+1];var k={callback:C,args:N};return O[A]=k,x(A),A++},U.clearImmediate=D}function D(C){delete O[C]}function T(C){if(M)setTimeout(T,0,C);else{var N=O[C];if(N){M=!0;try{(function(E){var k=E.callback,P=E.args;switch(P.length){case 0:k();break;case 1:k(P[0]);break;case 2:k(P[0],P[1]);break;case 3:k(P[0],P[1],P[2]);break;default:k.apply(void 0,P)}})(N)}finally{D(C),M=!1}}}}function R(C){C.source===v&&typeof C.data=="string"&&C.data.indexOf(I)===0&&T(+C.data.slice(I.length))}})(typeof self>"u"?m===void 0?this:m:self)}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}))}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(e,n,a){(function(i){(function(){var s=/[\\^$.*+?()[\]{}|]/g,o=RegExp(s.source),l=typeof i=="object"&&i&&i.Object===Object&&i,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),f=Object.prototype.toString,h=u.Symbol,p=h?h.prototype:void 0,g=p?p.toString:void 0;function y(m){if(typeof m=="string")return m;if((function(b){return typeof b=="symbol"||(function(x){return!!x&&typeof x=="object"})(b)&&f.call(b)=="[object Symbol]"})(m))return g?g.call(m):"";var v=m+"";return v=="0"&&1/m==-1/0?"-0":v}n.exports=function(m){var v;return(m=(v=m)==null?"":y(v))&&o.test(m)?m.replace(s,"\\$&"):m}}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(e,n,a){(function(i){(function(){var s="[object Arguments]",o="[object Map]",l="[object Object]",c="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,h=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[s]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v["[object Function]"]=v[o]=v["[object Number]"]=v[l]=v["[object RegExp]"]=v[c]=v["[object String]"]=v["[object WeakMap]"]=!1;var b=typeof i=="object"&&i&&i.Object===Object&&i,x=typeof self=="object"&&self&&self.Object===Object&&self,S=b||x||Function("return this")(),_=typeof a=="object"&&a&&!a.nodeType&&a,I=_&&typeof n=="object"&&n&&!n.nodeType&&n,A=I&&I.exports===_&&b.process,O=(function(){try{return A&&A.binding("util")}catch{}})(),M=O&&O.isTypedArray;function z(je,Le,vt,Et){for(var Qt=-1,Ut=je?je.length:0;++Qt<Ut;){var Yt=je[Qt];Le(Et,Yt,vt(Yt),je)}return Et}function U(je,Le){for(var vt=-1,Et=je?je.length:0;++vt<Et;)if(Le(je[vt],vt,je))return!0;return!1}function D(je){var Le=!1;if(je!=null&&typeof je.toString!="function")try{Le=!!(je+"")}catch{}return Le}function T(je){var Le=-1,vt=Array(je.size);return je.forEach((function(Et,Qt){vt[++Le]=[Qt,Et]})),vt}function R(je){var Le=-1,vt=Array(je.size);return je.forEach((function(Et){vt[++Le]=Et})),vt}var C,N,E,k=Array.prototype,P=Function.prototype,q=Object.prototype,H=S["__core-js_shared__"],L=(C=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",K=P.toString,Y=q.hasOwnProperty,Z=q.toString,V=RegExp("^"+K.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=S.Symbol,B=S.Uint8Array,F=q.propertyIsEnumerable,X=k.splice,te=(N=Object.keys,E=Object,function(je){return N(E(je))}),se=fr(S,"DataView"),ce=fr(S,"Map"),ue=fr(S,"Promise"),oe=fr(S,"Set"),le=fr(S,"WeakMap"),pe=fr(Object,"create"),ye=Ve(se),be=Ve(ce),Ie=Ve(ue),Oe=Ve(oe),Me=Ve(le),Re=ee?ee.prototype:void 0,He=Re?Re.valueOf:void 0,qe=Re?Re.toString:void 0;function ct(je){var Le=-1,vt=je?je.length:0;for(this.clear();++Le<vt;){var Et=je[Le];this.set(Et[0],Et[1])}}function ft(je){var Le=-1,vt=je?je.length:0;for(this.clear();++Le<vt;){var Et=je[Le];this.set(Et[0],Et[1])}}function St(je){var Le=-1,vt=je?je.length:0;for(this.clear();++Le<vt;){var Et=je[Le];this.set(Et[0],Et[1])}}function Rt(je){var Le=-1,vt=je?je.length:0;for(this.__data__=new St;++Le<vt;)this.add(je[Le])}function Ft(je){this.__data__=new ft(je)}function ot(je,Le){var vt=ke(je)||Se(je)?(function(Yt,Ur){for(var Tr=-1,Sr=Array(Yt);++Tr<Yt;)Sr[Tr]=Ur(Tr);return Sr})(je.length,String):[],Et=vt.length,Qt=!!Et;for(var Ut in je)!Y.call(je,Ut)||Qt&&(Ut=="length"||Ue(Ut,Et))||vt.push(Ut);return vt}function Kt(je,Le){for(var vt=je.length;vt--;)if(me(je[vt][0],Le))return vt;return-1}function Pt(je,Le,vt,Et){return We(je,(function(Qt,Ut,Yt){Le(Et,Qt,vt(Qt),Yt)})),Et}ct.prototype.clear=function(){this.__data__=pe?pe(null):{}},ct.prototype.delete=function(je){return this.has(je)&&delete this.__data__[je]},ct.prototype.get=function(je){var Le=this.__data__;if(pe){var vt=Le[je];return vt==="__lodash_hash_undefined__"?void 0:vt}return Y.call(Le,je)?Le[je]:void 0},ct.prototype.has=function(je){var Le=this.__data__;return pe?Le[je]!==void 0:Y.call(Le,je)},ct.prototype.set=function(je,Le){return this.__data__[je]=pe&&Le===void 0?"__lodash_hash_undefined__":Le,this},ft.prototype.clear=function(){this.__data__=[]},ft.prototype.delete=function(je){var Le=this.__data__,vt=Kt(Le,je);return!(vt<0)&&(vt==Le.length-1?Le.pop():X.call(Le,vt,1),!0)},ft.prototype.get=function(je){var Le=this.__data__,vt=Kt(Le,je);return vt<0?void 0:Le[vt][1]},ft.prototype.has=function(je){return Kt(this.__data__,je)>-1},ft.prototype.set=function(je,Le){var vt=this.__data__,Et=Kt(vt,je);return Et<0?vt.push([je,Le]):vt[Et][1]=Le,this},St.prototype.clear=function(){this.__data__={hash:new ct,map:new(ce||ft),string:new ct}},St.prototype.delete=function(je){return lr(this,je).delete(je)},St.prototype.get=function(je){return lr(this,je).get(je)},St.prototype.has=function(je){return lr(this,je).has(je)},St.prototype.set=function(je,Le){return lr(this,je).set(je,Le),this},Rt.prototype.add=Rt.prototype.push=function(je){return this.__data__.set(je,"__lodash_hash_undefined__"),this},Rt.prototype.has=function(je){return this.__data__.has(je)},Ft.prototype.clear=function(){this.__data__=new ft},Ft.prototype.delete=function(je){return this.__data__.delete(je)},Ft.prototype.get=function(je){return this.__data__.get(je)},Ft.prototype.has=function(je){return this.__data__.has(je)},Ft.prototype.set=function(je,Le){var vt=this.__data__;if(vt instanceof ft){var Et=vt.__data__;if(!ce||Et.length<199)return Et.push([je,Le]),this;vt=this.__data__=new St(Et)}return vt.set(je,Le),this};var Ee,We=(Ee=function(je,Le){return je&&ut(je,Le,$t)},function(je,Le){if(je==null)return je;if(!Te(je))return Ee(je,Le);for(var vt=je.length,Et=-1,Qt=Object(je);++Et<vt&&Le(Qt[Et],Et,Qt)!==!1;);return je}),ut=(function(je){return function(Le,vt,Et){for(var Qt=-1,Ut=Object(Le),Yt=Et(Le),Ur=Yt.length;Ur--;){var Tr=Yt[++Qt];if(vt(Ut[Tr],Tr,Ut)===!1)break}return Le}})();function wt(je,Le){for(var vt=0,Et=(Le=et(Le,je)?[Le]:rr(Le)).length;je!=null&&vt<Et;)je=je[Be(Le[vt++])];return vt&&vt==Et?je:void 0}function Bt(je,Le){return je!=null&&Le in Object(je)}function dr(je,Le,vt,Et,Qt){return je===Le||(je==null||Le==null||!Ke(je)&&!it(Le)?je!=je&&Le!=Le:(function(Ut,Yt,Ur,Tr,Sr,mr){var Pr=ke(Ut),Ir=ke(Yt),cn="[object Array]",An="[object Array]";Pr||(cn=(cn=xr(Ut))==s?l:cn),Ir||(An=(An=xr(Yt))==s?l:An);var Un=cn==l&&!D(Ut),Yn=An==l&&!D(Yt),Ia=cn==An;if(Ia&&!Un)return mr||(mr=new Ft),Pr||Mt(Ut)?Zt(Ut,Yt,Ur,Tr,Sr,mr):(function(an,Jr,ti,wo,_o,Hr,gi){switch(ti){case"[object DataView]":if(an.byteLength!=Jr.byteLength||an.byteOffset!=Jr.byteOffset)return!1;an=an.buffer,Jr=Jr.buffer;case"[object ArrayBuffer]":return!(an.byteLength!=Jr.byteLength||!wo(new B(an),new B(Jr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return me(+an,+Jr);case"[object Error]":return an.name==Jr.name&&an.message==Jr.message;case"[object RegExp]":case"[object String]":return an==Jr+"";case o:var Ts=T;case c:var So=2&Hr;if(Ts||(Ts=R),an.size!=Jr.size&&!So)return!1;var wl=gi.get(an);if(wl)return wl==Jr;Hr|=1,gi.set(an,Jr);var ri=Zt(Ts(an),Ts(Jr),wo,_o,Hr,gi);return gi.delete(an),ri;case"[object Symbol]":if(He)return He.call(an)==He.call(Jr)}return!1})(Ut,Yt,cn,Ur,Tr,Sr,mr);if(!(2&Sr)){var ua=Un&&Y.call(Ut,"__wrapped__"),As=Yn&&Y.call(Yt,"__wrapped__");if(ua||As){var ba=ua?Ut.value():Ut,rs=As?Yt.value():Yt;return mr||(mr=new Ft),Ur(ba,rs,Tr,Sr,mr)}}return Ia?(mr||(mr=new Ft),(function(an,Jr,ti,wo,_o,Hr){var gi=2&_o,Ts=$t(an),So=Ts.length,wl=$t(Jr).length;if(So!=wl&&!gi)return!1;for(var ri=So;ri--;){var yi=Ts[ri];if(!(gi?yi in Jr:Y.call(Jr,yi)))return!1}var No=Hr.get(an);if(No&&Hr.get(Jr))return No==Jr;var Ks=!0;Hr.set(an,Jr),Hr.set(Jr,an);for(var Mn=gi;++ri<So;){yi=Ts[ri];var Ii=an[yi],vi=Jr[yi];if(wo)var Mr=gi?wo(vi,Ii,yi,Jr,an,Hr):wo(Ii,vi,yi,an,Jr,Hr);if(!(Mr===void 0?Ii===vi||ti(Ii,vi,wo,_o,Hr):Mr)){Ks=!1;break}Mn||(Mn=yi=="constructor")}if(Ks&&!Mn){var Xs=an.constructor,Mi=Jr.constructor;Xs==Mi||!("constructor"in an)||!("constructor"in Jr)||typeof Xs=="function"&&Xs instanceof Xs&&typeof Mi=="function"&&Mi instanceof Mi||(Ks=!1)}return Hr.delete(an),Hr.delete(Jr),Ks})(Ut,Yt,Ur,Tr,Sr,mr)):!1})(je,Le,dr,vt,Et,Qt))}function Xt(je){return!(!Ke(je)||(function(Le){return!!L&&L in Le})(je))&&(Ge(je)||D(je)?V:y).test(Ve(je))}function pr(je){return typeof je=="function"?je:je==null?er:typeof je=="object"?ke(je)?(function(Et,Qt){return et(Et)&&ht(Qt)?kt(Be(Et),Qt):function(Ut){var Yt=(function(Ur,Tr,Sr){var mr=Ur==null?void 0:wt(Ur,Tr);return mr===void 0?Sr:mr})(Ut,Et);return Yt===void 0&&Yt===Qt?(function(Ur,Tr){return Ur!=null&&(function(Sr,mr,Pr){mr=et(mr,Sr)?[mr]:rr(mr);for(var Ir,cn=-1,An=mr.length;++cn<An;){var Un=Be(mr[cn]);if(!(Ir=Sr!=null&&Pr(Sr,Un)))break;Sr=Sr[Un]}return Ir||!!(An=Sr?Sr.length:0)&&nt(An)&&Ue(Un,An)&&(ke(Sr)||Se(Sr))})(Ur,Tr,Bt)})(Ut,Et):dr(Qt,Yt,void 0,3)}})(je[0],je[1]):(function(Et){var Qt=(function(Ut){for(var Yt=$t(Ut),Ur=Yt.length;Ur--;){var Tr=Yt[Ur],Sr=Ut[Tr];Yt[Ur]=[Tr,Sr,ht(Sr)]}return Yt})(Et);return Qt.length==1&&Qt[0][2]?kt(Qt[0][0],Qt[0][1]):function(Ut){return Ut===Et||(function(Yt,Ur,Tr,Sr){var mr=Tr.length,Pr=mr;if(Yt==null)return!Pr;for(Yt=Object(Yt);mr--;){var Ir=Tr[mr];if(Ir[2]?Ir[1]!==Yt[Ir[0]]:!(Ir[0]in Yt))return!1}for(;++mr<Pr;){var cn=(Ir=Tr[mr])[0],An=Yt[cn],Un=Ir[1];if(Ir[2]){if(An===void 0&&!(cn in Yt))return!1}else{var Yn=new Ft,Ia;if(!(Ia===void 0?dr(Un,An,Sr,3,Yn):Ia))return!1}}return!0})(Ut,Et,Qt)}})(je):et(Le=je)?(vt=Be(Le),function(Et){return Et==null?void 0:Et[vt]}):(function(Et){return function(Qt){return wt(Qt,Et)}})(Le);var Le,vt}function vr(je){if(vt=(Le=je)&&Le.constructor,Et=typeof vt=="function"&&vt.prototype||q,Le!==Et)return te(je);var Le,vt,Et,Qt=[];for(var Ut in Object(je))Y.call(je,Ut)&&Ut!="constructor"&&Qt.push(Ut);return Qt}function rr(je){return ke(je)?je:Wt(je)}function Zt(je,Le,vt,Et,Qt,Ut){var Yt=2&Qt,Ur=je.length,Tr=Le.length;if(Ur!=Tr&&!(Yt&&Tr>Ur))return!1;var Sr=Ut.get(je);if(Sr&&Ut.get(Le))return Sr==Le;var mr=-1,Pr=!0,Ir=1&Qt?new Rt:void 0;for(Ut.set(je,Le),Ut.set(Le,je);++mr<Ur;){var cn=je[mr],An=Le[mr];if(Et)var Un=Yt?Et(An,cn,mr,Le,je,Ut):Et(cn,An,mr,je,Le,Ut);if(Un!==void 0){if(Un)continue;Pr=!1;break}if(Ir){if(!U(Le,(function(Yn,Ia){if(!Ir.has(Ia)&&(cn===Yn||vt(cn,Yn,Et,Qt,Ut)))return Ir.add(Ia)}))){Pr=!1;break}}else if(cn!==An&&!vt(cn,An,Et,Qt,Ut)){Pr=!1;break}}return Ut.delete(je),Ut.delete(Le),Pr}function lr(je,Le){var vt,Et,Qt=je.__data__;return((Et=typeof(vt=Le))=="string"||Et=="number"||Et=="symbol"||Et=="boolean"?vt!=="__proto__":vt===null)?Qt[typeof Le=="string"?"string":"hash"]:Qt.map}function fr(je,Le){var vt=(function(Et,Qt){return Et==null?void 0:Et[Qt]})(je,Le);return Xt(vt)?vt:void 0}var xr=function(je){return Z.call(je)};function Ue(je,Le){return!!(Le=Le??9007199254740991)&&(typeof je=="number"||m.test(je))&&je>-1&&je%1==0&&je<Le}function et(je,Le){if(ke(je))return!1;var vt=typeof je;return!(vt!="number"&&vt!="symbol"&&vt!="boolean"&&je!=null&&!st(je))||f.test(je)||!u.test(je)||Le!=null&&je in Object(Le)}function ht(je){return je==je&&!Ke(je)}function kt(je,Le){return function(vt){return vt!=null&&vt[je]===Le&&(Le!==void 0||je in Object(vt))}}(se&&xr(new se(new ArrayBuffer(1)))!="[object DataView]"||ce&&xr(new ce)!=o||ue&&xr(ue.resolve())!="[object Promise]"||oe&&xr(new oe)!=c||le&&xr(new le)!="[object WeakMap]")&&(xr=function(je){var Le=Z.call(je),vt=Le==l?je.constructor:void 0,Et=vt?Ve(vt):void 0;if(Et)switch(Et){case ye:return"[object DataView]";case be:return o;case Ie:return"[object Promise]";case Oe:return c;case Me:return"[object WeakMap]"}return Le});var Wt=xe((function(je){var Le;je=(Le=je)==null?"":(function(Et){if(typeof Et=="string")return Et;if(st(Et))return qe?qe.call(Et):"";var Qt=Et+"";return Qt=="0"&&1/Et==-1/0?"-0":Qt})(Le);var vt=[];return h.test(je)&&vt.push(""),je.replace(p,(function(Et,Qt,Ut,Yt){vt.push(Ut?Yt.replace(g,"$1"):Qt||Et)})),vt}));function Be(je){if(typeof je=="string"||st(je))return je;var Le=je+"";return Le=="0"&&1/je==-1/0?"-0":Le}function Ve(je){if(je!=null){try{return K.call(je)}catch{}try{return je+""}catch{}}return""}var pt,he=(pt=function(je,Le,vt){Y.call(je,vt)?je[vt].push(Le):je[vt]=[Le]},function(je,Le){var vt=ke(je)?z:Pt,Et={};return vt(je,pt,pr(Le),Et)});function xe(je,Le){if(typeof je!="function"||Le&&typeof Le!="function")throw new TypeError("Expected a function");var vt=function(){var Et=arguments,Qt=Le?Le.apply(this,Et):Et[0],Ut=vt.cache;if(Ut.has(Qt))return Ut.get(Qt);var Yt=je.apply(this,Et);return vt.cache=Ut.set(Qt,Yt),Yt};return vt.cache=new(xe.Cache||St),vt}function me(je,Le){return je===Le||je!=je&&Le!=Le}function Se(je){return(function(Le){return it(Le)&&Te(Le)})(je)&&Y.call(je,"callee")&&(!F.call(je,"callee")||Z.call(je)==s)}xe.Cache=St;var ke=Array.isArray;function Te(je){return je!=null&&nt(je.length)&&!Ge(je)}function Ge(je){var Le=Ke(je)?Z.call(je):"";return Le=="[object Function]"||Le=="[object GeneratorFunction]"}function nt(je){return typeof je=="number"&&je>-1&&je%1==0&&je<=9007199254740991}function Ke(je){var Le=typeof je;return!!je&&(Le=="object"||Le=="function")}function it(je){return!!je&&typeof je=="object"}function st(je){return typeof je=="symbol"||it(je)&&Z.call(je)=="[object Symbol]"}var Mt=M?(function(je){return function(Le){return je(Le)}})(M):function(je){return it(je)&&nt(je.length)&&!!v[Z.call(je)]};function $t(je){return Te(je)?ot(je):vr(je)}function er(je){return je}n.exports=he}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(e,n,a){var i=Object.prototype.toString;n.exports=function(s){return s===!0||s===!1||(function(o){return!!o&&typeof o=="object"})(s)&&i.call(s)=="[object Boolean]"}},{}],445:[function(e,n,a){(function(i){(function(){var s="[object Arguments]",o="[object Map]",l="[object Object]",c="[object Set]",u=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[s]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h[o]=h["[object Number]"]=h[l]=h["[object RegExp]"]=h[c]=h["[object String]"]=h["[object WeakMap]"]=!1;var p=typeof i=="object"&&i&&i.Object===Object&&i,g=typeof self=="object"&&self&&self.Object===Object&&self,y=p||g||Function("return this")(),m=typeof a=="object"&&a&&!a.nodeType&&a,v=m&&typeof n=="object"&&n&&!n.nodeType&&n,b=v&&v.exports===m,x=b&&p.process,S=(function(){try{return x&&x.binding&&x.binding("util")}catch{}})(),_=S&&S.isTypedArray;function I(Be,Ve){for(var pt=-1,he=Be==null?0:Be.length;++pt<he;)if(Ve(Be[pt],pt,Be))return!0;return!1}function A(Be){var Ve=-1,pt=Array(Be.size);return Be.forEach((function(he,xe){pt[++Ve]=[xe,he]})),pt}function O(Be){var Ve=-1,pt=Array(Be.size);return Be.forEach((function(he){pt[++Ve]=he})),pt}var M,z,U,D=Array.prototype,T=Function.prototype,R=Object.prototype,C=y["__core-js_shared__"],N=T.toString,E=R.hasOwnProperty,k=(M=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",P=R.toString,q=RegExp("^"+N.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=b?y.Buffer:void 0,L=y.Symbol,K=y.Uint8Array,Y=R.propertyIsEnumerable,Z=D.splice,V=L?L.toStringTag:void 0,ee=Object.getOwnPropertySymbols,B=H?H.isBuffer:void 0,F=(z=Object.keys,U=Object,function(Be){return z(U(Be))}),X=Bt(y,"DataView"),te=Bt(y,"Map"),se=Bt(y,"Promise"),ce=Bt(y,"Set"),ue=Bt(y,"WeakMap"),oe=Bt(Object,"create"),le=vr(X),pe=vr(te),ye=vr(se),be=vr(ce),Ie=vr(ue),Oe=L?L.prototype:void 0,Me=Oe?Oe.valueOf:void 0;function Re(Be){var Ve=-1,pt=Be==null?0:Be.length;for(this.clear();++Ve<pt;){var he=Be[Ve];this.set(he[0],he[1])}}function He(Be){var Ve=-1,pt=Be==null?0:Be.length;for(this.clear();++Ve<pt;){var he=Be[Ve];this.set(he[0],he[1])}}function qe(Be){var Ve=-1,pt=Be==null?0:Be.length;for(this.clear();++Ve<pt;){var he=Be[Ve];this.set(he[0],he[1])}}function ct(Be){var Ve=-1,pt=Be==null?0:Be.length;for(this.__data__=new qe;++Ve<pt;)this.add(Be[Ve])}function ft(Be){var Ve=this.__data__=new He(Be);this.size=Ve.size}function St(Be,Ve){var pt=lr(Be),he=!pt&&Zt(Be),xe=!pt&&!he&&fr(Be),me=!pt&&!he&&!xe&&kt(Be),Se=pt||he||xe||me,ke=Se?(function(nt,Ke){for(var it=-1,st=Array(nt);++it<nt;)st[it]=Ke(it);return st})(Be.length,String):[],Te=ke.length;for(var Ge in Be)!E.call(Be,Ge)||Se&&(Ge=="length"||xe&&(Ge=="offset"||Ge=="parent")||me&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||pr(Ge,Te))||ke.push(Ge);return ke}function Rt(Be,Ve){for(var pt=Be.length;pt--;)if(rr(Be[pt][0],Ve))return pt;return-1}function Ft(Be){return Be==null?Be===void 0?"[object Undefined]":"[object Null]":V&&V in Object(Be)?(function(Ve){var pt=E.call(Ve,V),he=Ve[V];try{Ve[V]=void 0;var xe=!0}catch{}var me=P.call(Ve);return xe&&(pt?Ve[V]=he:delete Ve[V]),me})(Be):(function(Ve){return P.call(Ve)})(Be)}function ot(Be){return ht(Be)&&Ft(Be)==s}function Kt(Be,Ve,pt,he,xe){return Be===Ve||(Be==null||Ve==null||!ht(Be)&&!ht(Ve)?Be!=Be&&Ve!=Ve:(function(me,Se,ke,Te,Ge,nt){var Ke=lr(me),it=lr(Se),st=Ke?"[object Array]":Xt(me),Mt=it?"[object Array]":Xt(Se),$t=(st=st==s?l:st)==l,er=(Mt=Mt==s?l:Mt)==l,je=st==Mt;if(je&&fr(me)){if(!fr(Se))return!1;Ke=!0,$t=!1}if(je&&!$t)return nt||(nt=new ft),Ke||kt(me)?We(me,Se,ke,Te,Ge,nt):(function(Ut,Yt,Ur,Tr,Sr,mr,Pr){switch(Ur){case"[object DataView]":if(Ut.byteLength!=Yt.byteLength||Ut.byteOffset!=Yt.byteOffset)return!1;Ut=Ut.buffer,Yt=Yt.buffer;case"[object ArrayBuffer]":return!(Ut.byteLength!=Yt.byteLength||!mr(new K(Ut),new K(Yt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return rr(+Ut,+Yt);case"[object Error]":return Ut.name==Yt.name&&Ut.message==Yt.message;case"[object RegExp]":case"[object String]":return Ut==Yt+"";case o:var Ir=A;case c:var cn=1&Tr;if(Ir||(Ir=O),Ut.size!=Yt.size&&!cn)return!1;var An=Pr.get(Ut);if(An)return An==Yt;Tr|=2,Pr.set(Ut,Yt);var Un=We(Ir(Ut),Ir(Yt),Tr,Sr,mr,Pr);return Pr.delete(Ut),Un;case"[object Symbol]":if(Me)return Me.call(Ut)==Me.call(Yt)}return!1})(me,Se,st,ke,Te,Ge,nt);if(!(1&ke)){var Le=$t&&E.call(me,"__wrapped__"),vt=er&&E.call(Se,"__wrapped__");if(Le||vt){var Et=Le?me.value():me,Qt=vt?Se.value():Se;return nt||(nt=new ft),Ge(Et,Qt,ke,Te,nt)}}return je?(nt||(nt=new ft),(function(Ut,Yt,Ur,Tr,Sr,mr){var Pr=1&Ur,Ir=ut(Ut),cn=Ir.length,An=ut(Yt).length;if(cn!=An&&!Pr)return!1;for(var Un=cn;Un--;){var Yn=Ir[Un];if(!(Pr?Yn in Yt:E.call(Yt,Yn)))return!1}var Ia=mr.get(Ut);if(Ia&&mr.get(Yt))return Ia==Yt;var ua=!0;mr.set(Ut,Yt),mr.set(Yt,Ut);for(var As=Pr;++Un<cn;){Yn=Ir[Un];var ba=Ut[Yn],rs=Yt[Yn];if(Tr)var an=Pr?Tr(rs,ba,Yn,Yt,Ut,mr):Tr(ba,rs,Yn,Ut,Yt,mr);if(!(an===void 0?ba===rs||Sr(ba,rs,Ur,Tr,mr):an)){ua=!1;break}As||(As=Yn=="constructor")}if(ua&&!As){var Jr=Ut.constructor,ti=Yt.constructor;Jr==ti||!("constructor"in Ut)||!("constructor"in Yt)||typeof Jr=="function"&&Jr instanceof Jr&&typeof ti=="function"&&ti instanceof ti||(ua=!1)}return mr.delete(Ut),mr.delete(Yt),ua})(me,Se,ke,Te,Ge,nt)):!1})(Be,Ve,pt,he,Kt,xe))}function Pt(Be){return!(!et(Be)||(function(Ve){return!!k&&k in Ve})(Be))&&(xr(Be)?q:u).test(vr(Be))}function Ee(Be){if(pt=(Ve=Be)&&Ve.constructor,he=typeof pt=="function"&&pt.prototype||R,Ve!==he)return F(Be);var Ve,pt,he,xe=[];for(var me in Object(Be))E.call(Be,me)&&me!="constructor"&&xe.push(me);return xe}function We(Be,Ve,pt,he,xe,me){var Se=1&pt,ke=Be.length,Te=Ve.length;if(ke!=Te&&!(Se&&Te>ke))return!1;var Ge=me.get(Be);if(Ge&&me.get(Ve))return Ge==Ve;var nt=-1,Ke=!0,it=2&pt?new ct:void 0;for(me.set(Be,Ve),me.set(Ve,Be);++nt<ke;){var st=Be[nt],Mt=Ve[nt];if(he)var $t=Se?he(Mt,st,nt,Ve,Be,me):he(st,Mt,nt,Be,Ve,me);if($t!==void 0){if($t)continue;Ke=!1;break}if(it){if(!I(Ve,(function(er,je){if(Le=je,!it.has(Le)&&(st===er||xe(st,er,pt,he,me)))return it.push(je);var Le}))){Ke=!1;break}}else if(st!==Mt&&!xe(st,Mt,pt,he,me)){Ke=!1;break}}return me.delete(Be),me.delete(Ve),Ke}function ut(Be){return(function(Ve,pt,he){var xe=pt(Ve);return lr(Ve)?xe:(function(me,Se){for(var ke=-1,Te=Se.length,Ge=me.length;++ke<Te;)me[Ge+ke]=Se[ke];return me})(xe,he(Ve))})(Be,Wt,dr)}function wt(Be,Ve){var pt,he,xe=Be.__data__;return((he=typeof(pt=Ve))=="string"||he=="number"||he=="symbol"||he=="boolean"?pt!=="__proto__":pt===null)?xe[typeof Ve=="string"?"string":"hash"]:xe.map}function Bt(Be,Ve){var pt=(function(he,xe){return he==null?void 0:he[xe]})(Be,Ve);return Pt(pt)?pt:void 0}Re.prototype.clear=function(){this.__data__=oe?oe(null):{},this.size=0},Re.prototype.delete=function(Be){var Ve=this.has(Be)&&delete this.__data__[Be];return this.size-=Ve?1:0,Ve},Re.prototype.get=function(Be){var Ve=this.__data__;if(oe){var pt=Ve[Be];return pt==="__lodash_hash_undefined__"?void 0:pt}return E.call(Ve,Be)?Ve[Be]:void 0},Re.prototype.has=function(Be){var Ve=this.__data__;return oe?Ve[Be]!==void 0:E.call(Ve,Be)},Re.prototype.set=function(Be,Ve){var pt=this.__data__;return this.size+=this.has(Be)?0:1,pt[Be]=oe&&Ve===void 0?"__lodash_hash_undefined__":Ve,this},He.prototype.clear=function(){this.__data__=[],this.size=0},He.prototype.delete=function(Be){var Ve=this.__data__,pt=Rt(Ve,Be);return!(pt<0)&&(pt==Ve.length-1?Ve.pop():Z.call(Ve,pt,1),--this.size,!0)},He.prototype.get=function(Be){var Ve=this.__data__,pt=Rt(Ve,Be);return pt<0?void 0:Ve[pt][1]},He.prototype.has=function(Be){return Rt(this.__data__,Be)>-1},He.prototype.set=function(Be,Ve){var pt=this.__data__,he=Rt(pt,Be);return he<0?(++this.size,pt.push([Be,Ve])):pt[he][1]=Ve,this},qe.prototype.clear=function(){this.size=0,this.__data__={hash:new Re,map:new(te||He),string:new Re}},qe.prototype.delete=function(Be){var Ve=wt(this,Be).delete(Be);return this.size-=Ve?1:0,Ve},qe.prototype.get=function(Be){return wt(this,Be).get(Be)},qe.prototype.has=function(Be){return wt(this,Be).has(Be)},qe.prototype.set=function(Be,Ve){var pt=wt(this,Be),he=pt.size;return pt.set(Be,Ve),this.size+=pt.size==he?0:1,this},ct.prototype.add=ct.prototype.push=function(Be){return this.__data__.set(Be,"__lodash_hash_undefined__"),this},ct.prototype.has=function(Be){return this.__data__.has(Be)},ft.prototype.clear=function(){this.__data__=new He,this.size=0},ft.prototype.delete=function(Be){var Ve=this.__data__,pt=Ve.delete(Be);return this.size=Ve.size,pt},ft.prototype.get=function(Be){return this.__data__.get(Be)},ft.prototype.has=function(Be){return this.__data__.has(Be)},ft.prototype.set=function(Be,Ve){var pt=this.__data__;if(pt instanceof He){var he=pt.__data__;if(!te||he.length<199)return he.push([Be,Ve]),this.size=++pt.size,this;pt=this.__data__=new qe(he)}return pt.set(Be,Ve),this.size=pt.size,this};var dr=ee?function(Be){return Be==null?[]:(Be=Object(Be),(function(Ve,pt){for(var he=-1,xe=Ve==null?0:Ve.length,me=0,Se=[];++he<xe;){var ke=Ve[he];pt(ke,he,Ve)&&(Se[me++]=ke)}return Se})(ee(Be),(function(Ve){return Y.call(Be,Ve)})))}:function(){return[]},Xt=Ft;function pr(Be,Ve){return!!(Ve=Ve??9007199254740991)&&(typeof Be=="number"||f.test(Be))&&Be>-1&&Be%1==0&&Be<Ve}function vr(Be){if(Be!=null){try{return N.call(Be)}catch{}try{return Be+""}catch{}}return""}function rr(Be,Ve){return Be===Ve||Be!=Be&&Ve!=Ve}(X&&Xt(new X(new ArrayBuffer(1)))!="[object DataView]"||te&&Xt(new te)!=o||se&&Xt(se.resolve())!="[object Promise]"||ce&&Xt(new ce)!=c||ue&&Xt(new ue)!="[object WeakMap]")&&(Xt=function(Be){var Ve=Ft(Be),pt=Ve==l?Be.constructor:void 0,he=pt?vr(pt):"";if(he)switch(he){case le:return"[object DataView]";case pe:return o;case ye:return"[object Promise]";case be:return c;case Ie:return"[object WeakMap]"}return Ve});var Zt=ot((function(){return arguments})())?ot:function(Be){return ht(Be)&&E.call(Be,"callee")&&!Y.call(Be,"callee")},lr=Array.isArray,fr=B||function(){return!1};function xr(Be){if(!et(Be))return!1;var Ve=Ft(Be);return Ve=="[object Function]"||Ve=="[object GeneratorFunction]"||Ve=="[object AsyncFunction]"||Ve=="[object Proxy]"}function Ue(Be){return typeof Be=="number"&&Be>-1&&Be%1==0&&Be<=9007199254740991}function et(Be){var Ve=typeof Be;return Be!=null&&(Ve=="object"||Ve=="function")}function ht(Be){return Be!=null&&typeof Be=="object"}var kt=_?(function(Be){return function(Ve){return Be(Ve)}})(_):function(Be){return ht(Be)&&Ue(Be.length)&&!!h[Ft(Be)]};function Wt(Be){return(Ve=Be)!=null&&Ue(Ve.length)&&!xr(Ve)?St(Be):Ee(Be);var Ve}n.exports=function(Be,Ve){return Kt(Be,Ve)}}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(e,n,a){(function(i){(function(){var s=typeof i=="object"&&i&&i.Object===Object&&i,o=typeof self=="object"&&self&&self.Object===Object&&self,l=s||o||Function("return this")(),c=Object.prototype,u=c.hasOwnProperty,f=c.toString,h=l.Symbol,p=h?h.toStringTag:void 0;function g(y){return y==null?y===void 0?"[object Undefined]":"[object Null]":p&&p in Object(y)?(function(m){var v=u.call(m,p),b=m[p];try{m[p]=void 0;var x=!0}catch{}var S=f.call(m);return x&&(v?m[p]=b:delete m[p]),S})(y):(function(m){return f.call(m)})(y)}n.exports=function(y){if(!(function(v){var b=typeof v;return v!=null&&(b=="object"||b=="function")})(y))return!1;var m=g(y);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(e,n,a){n.exports=function(i){return i==null}},{}],448:[function(e,n,a){n.exports=function(i){return i===void 0}},{}],449:[function(e,n,a){(function(i){(function(){var s=/^\[object .+?Constructor\]$/,o=typeof i=="object"&&i&&i.Object===Object&&i,l=typeof self=="object"&&self&&self.Object===Object&&self,c=o||l||Function("return this")();function u(L,K){return!!(L&&L.length)&&(function(Y,Z,V){if(Z!=Z)return(function(F,X,te,se){for(var ce=F.length,ue=te+-1;++ue<ce;)if(X(F[ue],ue,F))return ue;return-1})(Y,f,V);for(var ee=V-1,B=Y.length;++ee<B;)if(Y[ee]===Z)return ee;return-1})(L,K,0)>-1}function f(L){return L!=L}function h(L,K){return L.has(K)}function p(L){var K=-1,Y=Array(L.size);return L.forEach((function(Z){Y[++K]=Z})),Y}var g,y=Array.prototype,m=Function.prototype,v=Object.prototype,b=c["__core-js_shared__"],x=(g=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",S=m.toString,_=v.hasOwnProperty,I=v.toString,A=RegExp("^"+S.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=y.splice,M=q(c,"Map"),z=q(c,"Set"),U=q(Object,"create");function D(L){var K=-1,Y=L?L.length:0;for(this.clear();++K<Y;){var Z=L[K];this.set(Z[0],Z[1])}}function T(L){var K=-1,Y=L?L.length:0;for(this.clear();++K<Y;){var Z=L[K];this.set(Z[0],Z[1])}}function R(L){var K=-1,Y=L?L.length:0;for(this.clear();++K<Y;){var Z=L[K];this.set(Z[0],Z[1])}}function C(L){var K=-1,Y=L?L.length:0;for(this.__data__=new R;++K<Y;)this.add(L[K])}function N(L,K){for(var Y,Z,V=L.length;V--;)if((Y=L[V][0])===(Z=K)||Y!=Y&&Z!=Z)return V;return-1}function E(L){return!(!H(L)||(K=L,x&&x in K))&&((function(Y){var Z=H(Y)?I.call(Y):"";return Z=="[object Function]"||Z=="[object GeneratorFunction]"})(L)||(function(Y){var Z=!1;if(Y!=null&&typeof Y.toString!="function")try{Z=!!(Y+"")}catch{}return Z})(L)?A:s).test((function(Y){if(Y!=null){try{return S.call(Y)}catch{}try{return Y+""}catch{}}return""})(L));var K}D.prototype.clear=function(){this.__data__=U?U(null):{}},D.prototype.delete=function(L){return this.has(L)&&delete this.__data__[L]},D.prototype.get=function(L){var K=this.__data__;if(U){var Y=K[L];return Y==="__lodash_hash_undefined__"?void 0:Y}return _.call(K,L)?K[L]:void 0},D.prototype.has=function(L){var K=this.__data__;return U?K[L]!==void 0:_.call(K,L)},D.prototype.set=function(L,K){return this.__data__[L]=U&&K===void 0?"__lodash_hash_undefined__":K,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(L){var K=this.__data__,Y=N(K,L);return!(Y<0)&&(Y==K.length-1?K.pop():O.call(K,Y,1),!0)},T.prototype.get=function(L){var K=this.__data__,Y=N(K,L);return Y<0?void 0:K[Y][1]},T.prototype.has=function(L){return N(this.__data__,L)>-1},T.prototype.set=function(L,K){var Y=this.__data__,Z=N(Y,L);return Z<0?Y.push([L,K]):Y[Z][1]=K,this},R.prototype.clear=function(){this.__data__={hash:new D,map:new(M||T),string:new D}},R.prototype.delete=function(L){return P(this,L).delete(L)},R.prototype.get=function(L){return P(this,L).get(L)},R.prototype.has=function(L){return P(this,L).has(L)},R.prototype.set=function(L,K){return P(this,L).set(L,K),this},C.prototype.add=C.prototype.push=function(L){return this.__data__.set(L,"__lodash_hash_undefined__"),this},C.prototype.has=function(L){return this.__data__.has(L)};var k=z&&1/p(new z([,-0]))[1]==1/0?function(L){return new z(L)}:function(){};function P(L,K){var Y,Z,V=L.__data__;return((Z=typeof(Y=K))=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?Y!=="__proto__":Y===null)?V[typeof K=="string"?"string":"hash"]:V.map}function q(L,K){var Y=(function(Z,V){return Z==null?void 0:Z[V]})(L,K);return E(Y)?Y:void 0}function H(L){var K=typeof L;return!!L&&(K=="object"||K=="function")}n.exports=function(L){return L&&L.length?(function(K,Y,Z){var V=-1,ee=u,B=K.length,F=!0,X=[],te=X;if(B>=200){var se=k(K);if(se)return p(se);F=!1,ee=h,te=new C}else te=X;e:for(;++V<B;){var ce=K[V],ue=ce;if(ce=ce!==0?ce:0,F&&ue==ue){for(var oe=te.length;oe--;)if(te[oe]===ue)continue e;X.push(ce)}else ee(te,ue,Z)||(te!==X&&te.push(ue),X.push(ce))}return X})(L):[]}}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(e,n,a){var i=e("inherits"),s=e("hash-base"),o=e("safe-buffer").Buffer,l=new Array(16);function c(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(y,m){return y<<m|y>>>32-m}function f(y,m,v,b,x,S,_){return u(y+(m&v|~m&b)+x+S|0,_)+m|0}function h(y,m,v,b,x,S,_){return u(y+(m&b|v&~b)+x+S|0,_)+m|0}function p(y,m,v,b,x,S,_){return u(y+(m^v^b)+x+S|0,_)+m|0}function g(y,m,v,b,x,S,_){return u(y+(v^(m|~b))+x+S|0,_)+m|0}i(c,s),c.prototype._update=function(){for(var y=l,m=0;m<16;++m)y[m]=this._block.readInt32LE(4*m);var v=this._a,b=this._b,x=this._c,S=this._d;v=f(v,b,x,S,y[0],3614090360,7),S=f(S,v,b,x,y[1],3905402710,12),x=f(x,S,v,b,y[2],606105819,17),b=f(b,x,S,v,y[3],3250441966,22),v=f(v,b,x,S,y[4],4118548399,7),S=f(S,v,b,x,y[5],1200080426,12),x=f(x,S,v,b,y[6],2821735955,17),b=f(b,x,S,v,y[7],4249261313,22),v=f(v,b,x,S,y[8],1770035416,7),S=f(S,v,b,x,y[9],2336552879,12),x=f(x,S,v,b,y[10],4294925233,17),b=f(b,x,S,v,y[11],2304563134,22),v=f(v,b,x,S,y[12],1804603682,7),S=f(S,v,b,x,y[13],4254626195,12),x=f(x,S,v,b,y[14],2792965006,17),v=h(v,b=f(b,x,S,v,y[15],1236535329,22),x,S,y[1],4129170786,5),S=h(S,v,b,x,y[6],3225465664,9),x=h(x,S,v,b,y[11],643717713,14),b=h(b,x,S,v,y[0],3921069994,20),v=h(v,b,x,S,y[5],3593408605,5),S=h(S,v,b,x,y[10],38016083,9),x=h(x,S,v,b,y[15],3634488961,14),b=h(b,x,S,v,y[4],3889429448,20),v=h(v,b,x,S,y[9],568446438,5),S=h(S,v,b,x,y[14],3275163606,9),x=h(x,S,v,b,y[3],4107603335,14),b=h(b,x,S,v,y[8],1163531501,20),v=h(v,b,x,S,y[13],2850285829,5),S=h(S,v,b,x,y[2],4243563512,9),x=h(x,S,v,b,y[7],1735328473,14),v=p(v,b=h(b,x,S,v,y[12],2368359562,20),x,S,y[5],4294588738,4),S=p(S,v,b,x,y[8],2272392833,11),x=p(x,S,v,b,y[11],1839030562,16),b=p(b,x,S,v,y[14],4259657740,23),v=p(v,b,x,S,y[1],2763975236,4),S=p(S,v,b,x,y[4],1272893353,11),x=p(x,S,v,b,y[7],4139469664,16),b=p(b,x,S,v,y[10],3200236656,23),v=p(v,b,x,S,y[13],681279174,4),S=p(S,v,b,x,y[0],3936430074,11),x=p(x,S,v,b,y[3],3572445317,16),b=p(b,x,S,v,y[6],76029189,23),v=p(v,b,x,S,y[9],3654602809,4),S=p(S,v,b,x,y[12],3873151461,11),x=p(x,S,v,b,y[15],530742520,16),v=g(v,b=p(b,x,S,v,y[2],3299628645,23),x,S,y[0],4096336452,6),S=g(S,v,b,x,y[7],1126891415,10),x=g(x,S,v,b,y[14],2878612391,15),b=g(b,x,S,v,y[5],4237533241,21),v=g(v,b,x,S,y[12],1700485571,6),S=g(S,v,b,x,y[3],2399980690,10),x=g(x,S,v,b,y[10],4293915773,15),b=g(b,x,S,v,y[1],2240044497,21),v=g(v,b,x,S,y[8],1873313359,6),S=g(S,v,b,x,y[15],4264355552,10),x=g(x,S,v,b,y[6],2734768916,15),b=g(b,x,S,v,y[13],1309151649,21),v=g(v,b,x,S,y[4],4149444226,6),S=g(S,v,b,x,y[11],3174756917,10),x=g(x,S,v,b,y[2],718787259,15),b=g(b,x,S,v,y[9],3951481745,21),this._a=this._a+v|0,this._b=this._b+b|0,this._c=this._c+x|0,this._d=this._d+S|0},c.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var y=o.allocUnsafe(16);return y.writeInt32LE(this._a,0),y.writeInt32LE(this._b,4),y.writeInt32LE(this._c,8),y.writeInt32LE(this._d,12),y},n.exports=c},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(e,n,a){var i=e("bn.js"),s=e("brorand");function o(l){this.rand=l||new s.Rand}n.exports=o,o.create=function(l){return new o(l)},o.prototype._randbelow=function(l){var c=l.bitLength(),u=Math.ceil(c/8);do var f=new i(this.rand.generate(u));while(f.cmp(l)>=0);return f},o.prototype._randrange=function(l,c){var u=c.sub(l);return l.add(this._randbelow(u))},o.prototype.test=function(l,c,u){var f=l.bitLength(),h=i.mont(l),p=new i(1).toRed(h);c||(c=Math.max(1,f/48|0));for(var g=l.subn(1),y=0;!g.testn(y);y++);for(var m=l.shrn(y),v=g.toRed(h);c>0;c--){var b=this._randrange(new i(2),g);u&&u(b);var x=b.toRed(h).redPow(m);if(x.cmp(p)!==0&&x.cmp(v)!==0){for(var S=1;S<y;S++){if((x=x.redSqr()).cmp(p)===0)return!1;if(x.cmp(v)===0)break}if(S===y)return!1}}return!0},o.prototype.getDivisor=function(l,c){var u=l.bitLength(),f=i.mont(l),h=new i(1).toRed(f);c||(c=Math.max(1,u/48|0));for(var p=l.subn(1),g=0;!p.testn(g);g++);for(var y=l.shrn(g),m=p.toRed(f);c>0;c--){var v=this._randrange(new i(2),p),b=l.gcd(v);if(b.cmpn(1)!==0)return b;var x=v.toRed(f).redPow(y);if(x.cmp(h)!==0&&x.cmp(m)!==0){for(var S=1;S<g;S++){if((x=x.redSqr()).cmp(h)===0)return x.fromRed().subn(1).gcd(l);if(x.cmp(m)===0)break}if(S===g)return(x=x.redSqr()).fromRed().subn(1).gcd(l)}}return!1}},{"bn.js":452,brorand:187}],452:[function(e,n,a){arguments[4][184][0].apply(a,arguments)},{buffer:188,dup:184}],453:[function(e,n,a){function i(s,o){if(!s)throw new Error(o||"Assertion failed")}n.exports=i,i.equal=function(s,o,l){if(s!=o)throw new Error(l||"Assertion failed: "+s+" != "+o)}},{}],454:[function(e,n,a){var i=a;function s(l){return l.length===1?"0"+l:l}function o(l){for(var c="",u=0;u<l.length;u++)c+=s(l[u].toString(16));return c}i.toArray=function(l,c){if(Array.isArray(l))return l.slice();if(!l)return[];var u=[];if(typeof l!="string"){for(var f=0;f<l.length;f++)u[f]=0|l[f];return u}if(c==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),f=0;f<l.length;f+=2)u.push(parseInt(l[f]+l[f+1],16));else for(f=0;f<l.length;f++){var h=l.charCodeAt(f),p=h>>8,g=255&h;p?u.push(p,g):u.push(g)}return u},i.zero2=s,i.toHex=o,i.encode=function(l,c){return c==="hex"?o(l):l}},{}],455:[function(e,n,a){n.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,n,a){var i=e("asn1.js");a.certificate=e("./certificate");var s=i.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));a.RSAPrivateKey=s;var o=i.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));a.RSAPublicKey=o;var l=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())}));a.PublicKey=l;var c=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=i.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(c),this.key("subjectPrivateKey").octstr())}));a.PrivateKey=u;var f=i.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));a.EncryptedPrivateKey=f;var h=i.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));a.DSAPrivateKey=h,a.DSAparam=i.define("DSAparam",(function(){this.int()}));var p=i.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(g),this.key("publicKey").optional().explicit(1).bitstr())}));a.ECPrivateKey=p;var g=i.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));a.signature=i.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},{"./certificate":457,"asn1.js":170}],457:[function(e,n,a){var i=e("asn1.js"),s=i.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=i.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),l=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),c=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())})),u=i.define("RelativeDistinguishedName",(function(){this.setof(o)})),f=i.define("RDNSequence",(function(){this.seqof(u)})),h=i.define("Name",(function(){this.choice({rdnSequence:this.use(f)})})),p=i.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(s),this.key("notAfter").use(s))})),g=i.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),y=i.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(l),this.key("issuer").use(h),this.key("validity").use(p),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(c),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(g).optional())})),m=i.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(y),this.key("signatureAlgorithm").use(l),this.key("signatureValue").bitstr())}));n.exports=m},{"asn1.js":170}],458:[function(e,n,a){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,l=e("evp_bytestokey"),c=e("browserify-aes"),u=e("safe-buffer").Buffer;n.exports=function(f,h){var p,g=f.toString(),y=g.match(i);if(y){var m="aes"+y[1],v=u.from(y[2],"hex"),b=u.from(y[3].replace(/[\r\n]/g,""),"base64"),x=l(h,v.slice(0,8),parseInt(y[1],10)).key,S=[],_=c.createDecipheriv(m,x,v);S.push(_.update(b)),S.push(_.final()),p=u.concat(S)}else{var I=g.match(o);p=u.from(I[2].replace(/[\r\n]/g,""),"base64")}return{tag:g.match(s)[1],data:p}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(e,n,a){var i=e("./asn1"),s=e("./aesid.json"),o=e("./fixProc"),l=e("browserify-aes"),c=e("pbkdf2"),u=e("safe-buffer").Buffer;function f(h){var p;typeof h!="object"||u.isBuffer(h)||(p=h.passphrase,h=h.key),typeof h=="string"&&(h=u.from(h));var g,y,m=o(h,p),v=m.tag,b=m.data;switch(v){case"CERTIFICATE":y=i.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(y||(y=i.PublicKey.decode(b,"der")),g=y.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(y.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return y.subjectPrivateKey=y.subjectPublicKey,{type:"ec",data:y};case"1.2.840.10040.4.1":return y.algorithm.params.pub_key=i.DSAparam.decode(y.subjectPublicKey.data,"der"),{type:"dsa",data:y.algorithm.params};default:throw new Error("unknown key id "+g)}case"ENCRYPTED PRIVATE KEY":b=(function(x,S){var _=x.algorithm.decrypt.kde.kdeparams.salt,I=parseInt(x.algorithm.decrypt.kde.kdeparams.iters.toString(),10),A=s[x.algorithm.decrypt.cipher.algo.join(".")],O=x.algorithm.decrypt.cipher.iv,M=x.subjectPrivateKey,z=parseInt(A.split("-")[1],10)/8,U=c.pbkdf2Sync(S,_,I,z,"sha1"),D=l.createDecipheriv(A,U,O),T=[];return T.push(D.update(M)),T.push(D.final()),u.concat(T)})(b=i.EncryptedPrivateKey.decode(b,"der"),p);case"PRIVATE KEY":switch(g=(y=i.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(y.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:y.algorithm.curve,privateKey:i.ECPrivateKey.decode(y.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return y.algorithm.params.priv_key=i.DSAparam.decode(y.subjectPrivateKey,"der"),{type:"dsa",params:y.algorithm.params};default:throw new Error("unknown key id "+g)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(b,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(b,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(b,"der")};case"EC PRIVATE KEY":return{curve:(b=i.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw new Error("unknown key type "+v)}}n.exports=f,f.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(e,n,a){a.pbkdf2=e("./lib/async"),a.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,n,a){(function(i){(function(){var s,o,l=e("safe-buffer").Buffer,c=e("./precondition"),u=e("./default-encoding"),f=e("./sync"),h=e("./to-buffer"),p=i.crypto&&i.crypto.subtle,g={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},y=[];function m(){return o||(o=i.process&&i.process.nextTick?i.process.nextTick:i.queueMicrotask?i.queueMicrotask:i.setImmediate?i.setImmediate:i.setTimeout)}function v(b,x,S,_,I){return p.importKey("raw",b,{name:"PBKDF2"},!1,["deriveBits"]).then((function(A){return p.deriveBits({name:"PBKDF2",salt:x,iterations:S,hash:{name:I}},A,_<<3)})).then((function(A){return l.from(A)}))}n.exports=function(b,x,S,_,I,A){typeof I=="function"&&(A=I,I=void 0);var O=g[(I=I||"sha1").toLowerCase()];if(O&&typeof i.Promise=="function"){if(c(S,_),b=h(b,u,"Password"),x=h(x,u,"Salt"),typeof A!="function")throw new Error("No callback provided to pbkdf2");(function(M,z){M.then((function(U){m()((function(){z(null,U)}))}),(function(U){m()((function(){z(U)}))}))})((function(M){if(i.process&&!i.process.browser||!p||!p.importKey||!p.deriveBits)return Promise.resolve(!1);if(y[M]!==void 0)return y[M];var z=v(s=s||l.alloc(8),s,10,128,M).then((function(){return!0})).catch((function(){return!1}));return y[M]=z,z})(O).then((function(M){return M?v(b,x,S,_,O):f(b,x,S,_,I)})),A)}else m()((function(){var M;try{M=f(b,x,S,_,I)}catch(z){return A(z)}A(null,M)}))}}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(e,n,a){(function(i,s){(function(){var o;s.process&&s.process.browser?o="utf-8":s.process&&s.process.version?o=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":o="utf-8",n.exports=o}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(e,n,a){var i=Math.pow(2,30)-1;n.exports=function(s,o){if(typeof s!="number")throw new TypeError("Iterations not a number");if(s<0)throw new TypeError("Bad iterations");if(typeof o!="number")throw new TypeError("Key length not a number");if(o<0||o>i||o!=o)throw new TypeError("Bad key length")}},{}],464:[function(e,n,a){var i=e("create-hash/md5"),s=e("ripemd160"),o=e("sha.js"),l=e("safe-buffer").Buffer,c=e("./precondition"),u=e("./default-encoding"),f=e("./to-buffer"),h=l.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function g(y,m,v){var b=(function(O){function M(z){return o(O).update(z).digest()}return O==="rmd160"||O==="ripemd160"?function(z){return new s().update(z).digest()}:O==="md5"?i:M})(y),x=y==="sha512"||y==="sha384"?128:64;m.length>x?m=b(m):m.length<x&&(m=l.concat([m,h],x));for(var S=l.allocUnsafe(x+p[y]),_=l.allocUnsafe(x+p[y]),I=0;I<x;I++)S[I]=54^m[I],_[I]=92^m[I];var A=l.allocUnsafe(x+v+4);S.copy(A,0,0,x),this.ipad1=A,this.ipad2=S,this.opad=_,this.alg=y,this.blocksize=x,this.hash=b,this.size=p[y]}g.prototype.run=function(y,m){return y.copy(m,this.blocksize),this.hash(m).copy(this.opad,this.blocksize),this.hash(this.opad)},n.exports=function(y,m,v,b,x){c(v,b);var S=new g(x=x||"sha1",y=f(y,u,"Password"),(m=f(m,u,"Salt")).length),_=l.allocUnsafe(b),I=l.allocUnsafe(m.length+4);m.copy(I,0,0,m.length);for(var A=0,O=p[x],M=Math.ceil(b/O),z=1;z<=M;z++){I.writeUInt32BE(z,m.length);for(var U=S.run(I,S.ipad1),D=U,T=1;T<v;T++){D=S.run(D,S.ipad2);for(var R=0;R<O;R++)U[R]^=D[R]}U.copy(_,A),A+=O}return _}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(e,n,a){var i=e("safe-buffer").Buffer;n.exports=function(s,o,l){if(i.isBuffer(s))return s;if(typeof s=="string")return i.from(s,o);if(ArrayBuffer.isView(s))return i.from(s.buffer);throw new TypeError(l+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,n,a){(function(i){(function(){i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?n.exports={nextTick:function(s,o,l,c){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var u,f,h=arguments.length;switch(h){case 0:case 1:return i.nextTick(s);case 2:return i.nextTick((function(){s.call(null,o)}));case 3:return i.nextTick((function(){s.call(null,o,l)}));case 4:return i.nextTick((function(){s.call(null,o,l,c)}));default:for(u=new Array(h-1),f=0;f<u.length;)u[f++]=arguments[f];return i.nextTick((function(){s.apply(null,u)}))}}}:n.exports=i}).call(this)}).call(this,e("_process"))},{_process:467}],467:[function(e,n,a){var i,s,o=n.exports={};function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function u(x){if(i===setTimeout)return setTimeout(x,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(x,0);try{return i(x,0)}catch{try{return i.call(null,x,0)}catch{return i.call(this,x,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:l}catch{i=l}try{s=typeof clearTimeout=="function"?clearTimeout:c}catch{s=c}})();var f,h=[],p=!1,g=-1;function y(){p&&f&&(p=!1,f.length?h=f.concat(h):g=-1,h.length&&m())}function m(){if(!p){var x=u(y);p=!0;for(var S=h.length;S;){for(f=h,h=[];++g<S;)f&&f[g].run();g=-1,S=h.length}f=null,p=!1,(function(_){if(s===clearTimeout)return clearTimeout(_);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(_);try{s(_)}catch{try{return s.call(null,_)}catch{return s.call(this,_)}}})(x)}}function v(x,S){this.fun=x,this.array=S}function b(){}o.nextTick=function(x){var S=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)S[_-1]=arguments[_];h.push(new v(x,S)),h.length!==1||p||u(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(x){return[]},o.binding=function(x){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(x){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],468:[function(e,n,a){a.publicEncrypt=e("./publicEncrypt"),a.privateDecrypt=e("./privateDecrypt"),a.privateEncrypt=function(i,s){return a.publicEncrypt(i,s,!0)},a.publicDecrypt=function(i,s){return a.privateDecrypt(i,s,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,n,a){var i=e("create-hash"),s=e("safe-buffer").Buffer;function o(l){var c=s.allocUnsafe(4);return c.writeUInt32BE(l,0),c}n.exports=function(l,c){for(var u,f=s.alloc(0),h=0;f.length<c;)u=o(h++),f=s.concat([f,i("sha1").update(l).update(u).digest()]);return f.slice(0,c)}},{"create-hash":386,"safe-buffer":494}],470:[function(e,n,a){arguments[4][184][0].apply(a,arguments)},{buffer:188,dup:184}],471:[function(e,n,a){var i=e("parse-asn1"),s=e("./mgf"),o=e("./xor"),l=e("bn.js"),c=e("browserify-rsa"),u=e("create-hash"),f=e("./withPublic"),h=e("safe-buffer").Buffer;n.exports=function(p,g,y){var m;m=p.padding?p.padding:y?1:4;var v,b=i(p),x=b.modulus.byteLength();if(g.length>x||new l(g).cmp(b.modulus)>=0)throw new Error("decryption error");v=y?f(new l(g),b):c(g,b);var S=h.alloc(x-v.length);if(v=h.concat([S,v],x),m===4)return(function(_,I){var A=_.modulus.byteLength(),O=u("sha1").update(h.alloc(0)).digest(),M=O.length;if(I[0]!==0)throw new Error("decryption error");var z=I.slice(1,M+1),U=I.slice(M+1),D=o(z,s(U,M)),T=o(U,s(D,A-M-1));if((function(C,N){C=h.from(C),N=h.from(N);var E=0,k=C.length;C.length!==N.length&&(E++,k=Math.min(C.length,N.length));for(var P=-1;++P<k;)E+=C[P]^N[P];return E})(O,T.slice(0,M)))throw new Error("decryption error");for(var R=M;T[R]===0;)R++;if(T[R++]!==1)throw new Error("decryption error");return T.slice(R)})(b,v);if(m===1)return(function(_,I,A){for(var O=I.slice(0,2),M=2,z=0;I[M++]!==0;)if(M>=I.length){z++;break}var U=I.slice(2,M-1);if((O.toString("hex")!=="0002"&&!A||O.toString("hex")!=="0001"&&A)&&z++,U.length<8&&z++,z)throw new Error("decryption error");return I.slice(M)})(0,v,y);if(m===3)return v;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(e,n,a){var i=e("parse-asn1"),s=e("randombytes"),o=e("create-hash"),l=e("./mgf"),c=e("./xor"),u=e("bn.js"),f=e("./withPublic"),h=e("browserify-rsa"),p=e("safe-buffer").Buffer;n.exports=function(g,y,m){var v;v=g.padding?g.padding:m?1:4;var b,x=i(g);if(v===4)b=(function(S,_){var I=S.modulus.byteLength(),A=_.length,O=o("sha1").update(p.alloc(0)).digest(),M=O.length,z=2*M;if(A>I-z-2)throw new Error("message too long");var U=p.alloc(I-A-z-2),D=I-M-1,T=s(M),R=c(p.concat([O,U,p.alloc(1,1),_],D),l(T,D)),C=c(T,l(R,M));return new u(p.concat([p.alloc(1),C,R],I))})(x,y);else if(v===1)b=(function(S,_,I){var A,O=_.length,M=S.modulus.byteLength();if(O>M-11)throw new Error("message too long");return A=I?p.alloc(M-O-3,255):(function(z){for(var U,D=p.allocUnsafe(z),T=0,R=s(2*z),C=0;T<z;)C===R.length&&(R=s(2*z),C=0),(U=R[C++])&&(D[T++]=U);return D})(M-O-3),new u(p.concat([p.from([0,I?1:2]),A,p.alloc(1),_],M))})(x,y,m);else{if(v!==3)throw new Error("unknown padding");if((b=new u(y)).cmp(x.modulus)>=0)throw new Error("data too long for modulus")}return m?h(b,x):f(b,x)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,n,a){var i=e("bn.js"),s=e("safe-buffer").Buffer;n.exports=function(o,l){return s.from(o.toRed(i.mont(l.modulus)).redPow(new i(l.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(e,n,a){n.exports=function(i,s){for(var o=i.length,l=-1;++l<o;)i[l]^=s[l];return i}},{}],475:[function(e,n,a){(function(i,s){(function(){var o=e("safe-buffer").Buffer,l=s.crypto||s.msCrypto;l&&l.getRandomValues?n.exports=function(c,u){if(c>4294967295)throw new RangeError("requested too many random bytes");var f=o.allocUnsafe(c);if(c>0)if(c>65536)for(var h=0;h<c;h+=65536)l.getRandomValues(f.slice(h,h+65536));else l.getRandomValues(f);return typeof u=="function"?i.nextTick((function(){u(null,f)})):f}:n.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,n,a){(function(i,s){(function(){function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var l=e("safe-buffer"),c=e("randombytes"),u=l.Buffer,f=l.kMaxLength,h=s.crypto||s.msCrypto,p=Math.pow(2,32)-1;function g(v,b){if(typeof v!="number"||v!=v)throw new TypeError("offset must be a number");if(v>p||v<0)throw new TypeError("offset must be a uint32");if(v>f||v>b)throw new RangeError("offset out of range")}function y(v,b,x){if(typeof v!="number"||v!=v)throw new TypeError("size must be a number");if(v>p||v<0)throw new TypeError("size must be a uint32");if(v+b>x||v>f)throw new RangeError("buffer too small")}function m(v,b,x,S){if(i.browser){var _=v.buffer,I=new Uint8Array(_,b,x);return h.getRandomValues(I),S?void i.nextTick((function(){S(null,v)})):v}if(!S)return c(x).copy(v,b),v;c(x,(function(A,O){if(A)return S(A);O.copy(v,b),S(null,v)}))}h&&h.getRandomValues||!i.browser?(a.randomFill=function(v,b,x,S){if(!(u.isBuffer(v)||v instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof b=="function")S=b,b=0,x=v.length;else if(typeof x=="function")S=x,x=v.length-b;else if(typeof S!="function")throw new TypeError('"cb" argument must be a function');return g(b,v.length),y(x,b,v.length),m(v,b,x,S)},a.randomFillSync=function(v,b,x){if(b===void 0&&(b=0),!(u.isBuffer(v)||v instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return g(b,v.length),x===void 0&&(x=v.length-b),y(x,b,v.length),m(v,b,x)}):(a.randomFill=o,a.randomFillSync=o)}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,n,a){var i={};function s(l,c,u){u||(u=Error);var f=(function(h){var p,g;function y(m,v,b){return h.call(this,(function(x,S,_){return typeof c=="string"?c:c(x,S,_)})(m,v,b))||this}return g=h,(p=y).prototype=Object.create(g.prototype),p.prototype.constructor=p,p.__proto__=g,y})(u);f.prototype.name=u.name,f.prototype.code=l,i[l]=f}function o(l,c){if(Array.isArray(l)){var u=l.length;return l=l.map((function(f){return String(f)})),u>2?"one of ".concat(c," ").concat(l.slice(0,u-1).join(", "),", or ")+l[u-1]:u===2?"one of ".concat(c," ").concat(l[0]," or ").concat(l[1]):"of ".concat(c," ").concat(l[0])}return"of ".concat(c," ").concat(String(l))}s("ERR_INVALID_OPT_VALUE",(function(l,c){return'The value "'+c+'" is invalid for option "'+l+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(l,c,u){var f,h,p;if(typeof c=="string"&&(h="not ",c.substr(0,h.length)===h)?(f="must not be",c=c.replace(/^not /,"")):f="must be",(function(y,m,v){return(v===void 0||v>y.length)&&(v=y.length),y.substring(v-m.length,v)===m})(l," argument"))p="The ".concat(l," ").concat(f," ").concat(o(c,"type"));else{var g=(function(y,m,v){return typeof v!="number"&&(v=0),!(v+m.length>y.length)&&y.indexOf(m,v)!==-1})(l,".")?"property":"argument";p='The "'.concat(l,'" ').concat(g," ").concat(f," ").concat(o(c,"type"))}return p+=". Received type ".concat(typeof u)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(l){return"The "+l+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(l){return"Cannot call "+l+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(l){return"Unknown encoding: "+l}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=i},{}],478:[function(e,n,a){(function(i){(function(){var s=Object.keys||function(y){var m=[];for(var v in y)m.push(v);return m};n.exports=h;var o=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(h,o);for(var c=s(l.prototype),u=0;u<c.length;u++){var f=c[u];h.prototype[f]||(h.prototype[f]=l.prototype[f])}function h(y){if(!(this instanceof h))return new h(y);o.call(this,y),l.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||i.nextTick(g,this)}function g(y){y.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(e,n,a){n.exports=s;var i=e("./_stream_transform");function s(o){if(!(this instanceof s))return new s(o);i.call(this,o)}e("inherits")(s,i),s.prototype._transform=function(o,l,c){c(null,o)}},{"./_stream_transform":481,inherits:440}],480:[function(e,n,a){(function(i,s){(function(){var o;n.exports=D,D.ReadableState=U,e("events").EventEmitter;var l=function(B,F){return B.listeners(F).length},c=e("./internal/streams/stream"),u=e("buffer").Buffer,f=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,p=e("util");h=p&&p.debuglog?p.debuglog("stream"):function(){};var g,y,m,v=e("./internal/streams/buffer_list"),b=e("./internal/streams/destroy"),x=e("./internal/streams/state").getHighWaterMark,S=e("../errors").codes,_=S.ERR_INVALID_ARG_TYPE,I=S.ERR_STREAM_PUSH_AFTER_EOF,A=S.ERR_METHOD_NOT_IMPLEMENTED,O=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(D,c);var M=b.errorOrDestroy,z=["error","close","destroy","pause","resume"];function U(B,F,X){o=o||e("./_stream_duplex"),B=B||{},typeof X!="boolean"&&(X=F instanceof o),this.objectMode=!!B.objectMode,X&&(this.objectMode=this.objectMode||!!B.readableObjectMode),this.highWaterMark=x(this,B,"readableHighWaterMark",X),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.destroyed=!1,this.defaultEncoding=B.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,B.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(B.encoding),this.encoding=B.encoding)}function D(B){if(o=o||e("./_stream_duplex"),!(this instanceof D))return new D(B);var F=this instanceof o;this._readableState=new U(B,this,F),this.readable=!0,B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy)),c.call(this)}function T(B,F,X,te,se){h("readableAddChunk",F);var ce,ue=B._readableState;if(F===null)ue.reading=!1,(function(oe,le){if(h("onEofChunk"),!le.ended){if(le.decoder){var pe=le.decoder.end();pe&&pe.length&&(le.buffer.push(pe),le.length+=le.objectMode?1:pe.length)}le.ended=!0,le.sync?N(oe):(le.needReadable=!1,le.emittedReadable||(le.emittedReadable=!0,E(oe)))}})(B,ue);else if(se||(ce=(function(oe,le){var pe;ye=le,u.isBuffer(ye)||ye instanceof f||typeof le=="string"||le===void 0||oe.objectMode||(pe=new _("chunk",["string","Buffer","Uint8Array"],le));var ye;return pe})(ue,F)),ce)M(B,ce);else if(ue.objectMode||F&&F.length>0)if(typeof F=="string"||ue.objectMode||Object.getPrototypeOf(F)===u.prototype||(F=(function(oe){return u.from(oe)})(F)),te)ue.endEmitted?M(B,new O):R(B,ue,F,!0);else if(ue.ended)M(B,new I);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!X?(F=ue.decoder.write(F),ue.objectMode||F.length!==0?R(B,ue,F,!1):k(B,ue)):R(B,ue,F,!1)}else te||(ue.reading=!1,k(B,ue));return!ue.ended&&(ue.length<ue.highWaterMark||ue.length===0)}function R(B,F,X,te){F.flowing&&F.length===0&&!F.sync?(F.awaitDrain=0,B.emit("data",X)):(F.length+=F.objectMode?1:X.length,te?F.buffer.unshift(X):F.buffer.push(X),F.needReadable&&N(B)),k(B,F)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(B){this._readableState&&(this._readableState.destroyed=B)}}),D.prototype.destroy=b.destroy,D.prototype._undestroy=b.undestroy,D.prototype._destroy=function(B,F){F(B)},D.prototype.push=function(B,F){var X,te=this._readableState;return te.objectMode?X=!0:typeof B=="string"&&((F=F||te.defaultEncoding)!==te.encoding&&(B=u.from(B,F),F=""),X=!0),T(this,B,F,!1,X)},D.prototype.unshift=function(B){return T(this,B,null,!0,!1)},D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(B){g||(g=e("string_decoder/").StringDecoder);var F=new g(B);this._readableState.decoder=F,this._readableState.encoding=this._readableState.decoder.encoding;for(var X=this._readableState.buffer.head,te="";X!==null;)te+=F.write(X.data),X=X.next;return this._readableState.buffer.clear(),te!==""&&this._readableState.buffer.push(te),this._readableState.length=te.length,this};function C(B,F){return B<=0||F.length===0&&F.ended?0:F.objectMode?1:B!=B?F.flowing&&F.length?F.buffer.head.data.length:F.length:(B>F.highWaterMark&&(F.highWaterMark=(function(X){return X>=1073741824?X=1073741824:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X})(B)),B<=F.length?B:F.ended?F.length:(F.needReadable=!0,0))}function N(B){var F=B._readableState;h("emitReadable",F.needReadable,F.emittedReadable),F.needReadable=!1,F.emittedReadable||(h("emitReadable",F.flowing),F.emittedReadable=!0,i.nextTick(E,B))}function E(B){var F=B._readableState;h("emitReadable_",F.destroyed,F.length,F.ended),F.destroyed||!F.length&&!F.ended||(B.emit("readable"),F.emittedReadable=!1),F.needReadable=!F.flowing&&!F.ended&&F.length<=F.highWaterMark,K(B)}function k(B,F){F.readingMore||(F.readingMore=!0,i.nextTick(P,B,F))}function P(B,F){for(;!F.reading&&!F.ended&&(F.length<F.highWaterMark||F.flowing&&F.length===0);){var X=F.length;if(h("maybeReadMore read 0"),B.read(0),X===F.length)break}F.readingMore=!1}function q(B){var F=B._readableState;F.readableListening=B.listenerCount("readable")>0,F.resumeScheduled&&!F.paused?F.flowing=!0:B.listenerCount("data")>0&&B.resume()}function H(B){h("readable nexttick read 0"),B.read(0)}function L(B,F){h("resume",F.reading),F.reading||B.read(0),F.resumeScheduled=!1,B.emit("resume"),K(B),F.flowing&&!F.reading&&B.read(0)}function K(B){var F=B._readableState;for(h("flow",F.flowing);F.flowing&&B.read()!==null;);}function Y(B,F){return F.length===0?null:(F.objectMode?X=F.buffer.shift():!B||B>=F.length?(X=F.decoder?F.buffer.join(""):F.buffer.length===1?F.buffer.first():F.buffer.concat(F.length),F.buffer.clear()):X=F.buffer.consume(B,F.decoder),X);var X}function Z(B){var F=B._readableState;h("endReadable",F.endEmitted),F.endEmitted||(F.ended=!0,i.nextTick(V,F,B))}function V(B,F){if(h("endReadableNT",B.endEmitted,B.length),!B.endEmitted&&B.length===0&&(B.endEmitted=!0,F.readable=!1,F.emit("end"),B.autoDestroy)){var X=F._writableState;(!X||X.autoDestroy&&X.finished)&&F.destroy()}}function ee(B,F){for(var X=0,te=B.length;X<te;X++)if(B[X]===F)return X;return-1}D.prototype.read=function(B){h("read",B),B=parseInt(B,10);var F=this._readableState,X=B;if(B!==0&&(F.emittedReadable=!1),B===0&&F.needReadable&&((F.highWaterMark!==0?F.length>=F.highWaterMark:F.length>0)||F.ended))return h("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?Z(this):N(this),null;if((B=C(B,F))===0&&F.ended)return F.length===0&&Z(this),null;var te,se=F.needReadable;return h("need readable",se),(F.length===0||F.length-B<F.highWaterMark)&&h("length less than watermark",se=!0),F.ended||F.reading?h("reading or ended",se=!1):se&&(h("do read"),F.reading=!0,F.sync=!0,F.length===0&&(F.needReadable=!0),this._read(F.highWaterMark),F.sync=!1,F.reading||(B=C(X,F))),(te=B>0?Y(B,F):null)===null?(F.needReadable=F.length<=F.highWaterMark,B=0):(F.length-=B,F.awaitDrain=0),F.length===0&&(F.ended||(F.needReadable=!0),X!==B&&F.ended&&Z(this)),te!==null&&this.emit("data",te),te},D.prototype._read=function(B){M(this,new A("_read()"))},D.prototype.pipe=function(B,F){var X=this,te=this._readableState;switch(te.pipesCount){case 0:te.pipes=B;break;case 1:te.pipes=[te.pipes,B];break;default:te.pipes.push(B)}te.pipesCount+=1,h("pipe count=%d opts=%j",te.pipesCount,F);var se=(!F||F.end!==!1)&&B!==i.stdout&&B!==i.stderr?ue:Oe;function ce(Me,Re){h("onunpipe"),Me===X&&Re&&Re.hasUnpiped===!1&&(Re.hasUnpiped=!0,h("cleanup"),B.removeListener("close",be),B.removeListener("finish",Ie),B.removeListener("drain",oe),B.removeListener("error",ye),B.removeListener("unpipe",ce),X.removeListener("end",ue),X.removeListener("end",Oe),X.removeListener("data",pe),le=!0,!te.awaitDrain||B._writableState&&!B._writableState.needDrain||oe())}function ue(){h("onend"),B.end()}te.endEmitted?i.nextTick(se):X.once("end",se),B.on("unpipe",ce);var oe=(function(Me){return function(){var Re=Me._readableState;h("pipeOnDrain",Re.awaitDrain),Re.awaitDrain&&Re.awaitDrain--,Re.awaitDrain===0&&l(Me,"data")&&(Re.flowing=!0,K(Me))}})(X);B.on("drain",oe);var le=!1;function pe(Me){h("ondata");var Re=B.write(Me);h("dest.write",Re),Re===!1&&((te.pipesCount===1&&te.pipes===B||te.pipesCount>1&&ee(te.pipes,B)!==-1)&&!le&&(h("false write response, pause",te.awaitDrain),te.awaitDrain++),X.pause())}function ye(Me){h("onerror",Me),Oe(),B.removeListener("error",ye),l(B,"error")===0&&M(B,Me)}function be(){B.removeListener("finish",Ie),Oe()}function Ie(){h("onfinish"),B.removeListener("close",be),Oe()}function Oe(){h("unpipe"),X.unpipe(B)}return X.on("data",pe),(function(Me,Re,He){if(typeof Me.prependListener=="function")return Me.prependListener(Re,He);Me._events&&Me._events[Re]?Array.isArray(Me._events[Re])?Me._events[Re].unshift(He):Me._events[Re]=[He,Me._events[Re]]:Me.on(Re,He)})(B,"error",ye),B.once("close",be),B.once("finish",Ie),B.emit("pipe",X),te.flowing||(h("pipe resume"),X.resume()),B},D.prototype.unpipe=function(B){var F=this._readableState,X={hasUnpiped:!1};if(F.pipesCount===0)return this;if(F.pipesCount===1)return B&&B!==F.pipes||(B||(B=F.pipes),F.pipes=null,F.pipesCount=0,F.flowing=!1,B&&B.emit("unpipe",this,X)),this;if(!B){var te=F.pipes,se=F.pipesCount;F.pipes=null,F.pipesCount=0,F.flowing=!1;for(var ce=0;ce<se;ce++)te[ce].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=ee(F.pipes,B);return ue===-1||(F.pipes.splice(ue,1),F.pipesCount-=1,F.pipesCount===1&&(F.pipes=F.pipes[0]),B.emit("unpipe",this,X)),this},D.prototype.on=function(B,F){var X=c.prototype.on.call(this,B,F),te=this._readableState;return B==="data"?(te.readableListening=this.listenerCount("readable")>0,te.flowing!==!1&&this.resume()):B==="readable"&&(te.endEmitted||te.readableListening||(te.readableListening=te.needReadable=!0,te.flowing=!1,te.emittedReadable=!1,h("on readable",te.length,te.reading),te.length?N(this):te.reading||i.nextTick(H,this))),X},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(B,F){var X=c.prototype.removeListener.call(this,B,F);return B==="readable"&&i.nextTick(q,this),X},D.prototype.removeAllListeners=function(B){var F=c.prototype.removeAllListeners.apply(this,arguments);return B!=="readable"&&B!==void 0||i.nextTick(q,this),F},D.prototype.resume=function(){var B=this._readableState;return B.flowing||(h("resume"),B.flowing=!B.readableListening,(function(F,X){X.resumeScheduled||(X.resumeScheduled=!0,i.nextTick(L,F,X))})(this,B)),B.paused=!1,this},D.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},D.prototype.wrap=function(B){var F=this,X=this._readableState,te=!1;for(var se in B.on("end",(function(){if(h("wrapped end"),X.decoder&&!X.ended){var ue=X.decoder.end();ue&&ue.length&&F.push(ue)}F.push(null)})),B.on("data",(function(ue){h("wrapped data"),X.decoder&&(ue=X.decoder.write(ue)),X.objectMode&&ue==null||(X.objectMode||ue&&ue.length)&&(F.push(ue)||(te=!0,B.pause()))})),B)this[se]===void 0&&typeof B[se]=="function"&&(this[se]=(function(ue){return function(){return B[ue].apply(B,arguments)}})(se));for(var ce=0;ce<z.length;ce++)B.on(z[ce],this.emit.bind(this,z[ce]));return this._read=function(ue){h("wrapped _read",ue),te&&(te=!1,B.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return y===void 0&&(y=e("./internal/streams/async_iterator")),y(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}}),D._fromList=Y,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(D.from=function(B,F){return m===void 0&&(m=e("./internal/streams/from")),m(D,B,F)})}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(e,n,a){n.exports=h;var i=e("../errors").codes,s=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,l=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=i.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function f(y,m){var v=this._transformState;v.transforming=!1;var b=v.writecb;if(b===null)return this.emit("error",new o);v.writechunk=null,v.writecb=null,m!=null&&this.push(m),b(y);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function h(y){if(!(this instanceof h))return new h(y);u.call(this,y),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",p)}function p(){var y=this;typeof this._flush!="function"||this._readableState.destroyed?g(this,null,null):this._flush((function(m,v){g(y,m,v)}))}function g(y,m,v){if(m)return y.emit("error",m);if(v!=null&&y.push(v),y._writableState.length)throw new c;if(y._transformState.transforming)throw new l;return y.push(null)}e("inherits")(h,u),h.prototype.push=function(y,m){return this._transformState.needTransform=!1,u.prototype.push.call(this,y,m)},h.prototype._transform=function(y,m,v){v(new s("_transform()"))},h.prototype._write=function(y,m,v){var b=this._transformState;if(b.writecb=v,b.writechunk=y,b.writeencoding=m,!b.transforming){var x=this._readableState;(b.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},h.prototype._read=function(y){var m=this._transformState;m.writechunk===null||m.transforming?m.needTransform=!0:(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform))},h.prototype._destroy=function(y,m){u.prototype._destroy.call(this,y,(function(v){m(v)}))}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(e,n,a){(function(i,s){(function(){function o(P){var q=this;this.next=null,this.entry=null,this.finish=function(){(function(H,L,K){var Y=H.entry;for(H.entry=null;Y;){var Z=Y.callback;L.pendingcb--,Z(K),Y=Y.next}L.corkedRequestsFree.next=H})(q,P)}}var l;n.exports=D,D.WritableState=U;var c={deprecate:e("util-deprecate")},u=e("./internal/streams/stream"),f=e("buffer").Buffer,h=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p,g=e("./internal/streams/destroy"),y=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,v=m.ERR_INVALID_ARG_TYPE,b=m.ERR_METHOD_NOT_IMPLEMENTED,x=m.ERR_MULTIPLE_CALLBACK,S=m.ERR_STREAM_CANNOT_PIPE,_=m.ERR_STREAM_DESTROYED,I=m.ERR_STREAM_NULL_VALUES,A=m.ERR_STREAM_WRITE_AFTER_END,O=m.ERR_UNKNOWN_ENCODING,M=g.errorOrDestroy;function z(){}function U(P,q,H){l=l||e("./_stream_duplex"),P=P||{},typeof H!="boolean"&&(H=q instanceof l),this.objectMode=!!P.objectMode,H&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=y(this,P,"writableHighWaterMark",H),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=P.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(K){(function(Y,Z){var V=Y._writableState,ee=V.sync,B=V.writecb;if(typeof B!="function")throw new x;if((function(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0})(V),Z)(function(X,te,se,ce,ue){--te.pendingcb,se?(i.nextTick(ue,ce),i.nextTick(k,X,te),X._writableState.errorEmitted=!0,M(X,ce)):(ue(ce),X._writableState.errorEmitted=!0,M(X,ce),k(X,te))})(Y,V,ee,Z,B);else{var F=N(V)||Y.destroyed;F||V.corked||V.bufferProcessing||!V.bufferedRequest||C(Y,V),ee?i.nextTick(R,Y,V,F,B):R(Y,V,F,B)}})(q,K)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function D(P){var q=this instanceof(l=l||e("./_stream_duplex"));if(!q&&!p.call(D,this))return new D(P);this._writableState=new U(P,this,q),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),u.call(this)}function T(P,q,H,L,K,Y,Z){q.writelen=L,q.writecb=Z,q.writing=!0,q.sync=!0,q.destroyed?q.onwrite(new _("write")):H?P._writev(K,q.onwrite):P._write(K,Y,q.onwrite),q.sync=!1}function R(P,q,H,L){H||(function(K,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,K.emit("drain"))})(P,q),q.pendingcb--,L(),k(P,q)}function C(P,q){q.bufferProcessing=!0;var H=q.bufferedRequest;if(P._writev&&H&&H.next){var L=q.bufferedRequestCount,K=new Array(L),Y=q.corkedRequestsFree;Y.entry=H;for(var Z=0,V=!0;H;)K[Z]=H,H.isBuf||(V=!1),H=H.next,Z+=1;K.allBuffers=V,T(P,q,!0,q.length,K,"",Y.finish),q.pendingcb++,q.lastBufferedRequest=null,Y.next?(q.corkedRequestsFree=Y.next,Y.next=null):q.corkedRequestsFree=new o(q),q.bufferedRequestCount=0}else{for(;H;){var ee=H.chunk,B=H.encoding,F=H.callback;if(T(P,q,!1,q.objectMode?1:ee.length,ee,B,F),H=H.next,q.bufferedRequestCount--,q.writing)break}H===null&&(q.lastBufferedRequest=null)}q.bufferedRequest=H,q.bufferProcessing=!1}function N(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function E(P,q){P._final((function(H){q.pendingcb--,H&&M(P,H),q.prefinished=!0,P.emit("prefinish"),k(P,q)}))}function k(P,q){var H=N(q);if(H&&((function(K,Y){Y.prefinished||Y.finalCalled||(typeof K._final!="function"||Y.destroyed?(Y.prefinished=!0,K.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,i.nextTick(E,K,Y)))})(P,q),q.pendingcb===0&&(q.finished=!0,P.emit("finish"),q.autoDestroy))){var L=P._readableState;(!L||L.autoDestroy&&L.endEmitted)&&P.destroy()}return H}e("inherits")(D,u),U.prototype.getBuffer=function(){for(var P=this.bufferedRequest,q=[];P;)q.push(P),P=P.next;return q},(function(){try{Object.defineProperty(U.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(P){return!!p.call(this,P)||this===D&&P&&P._writableState instanceof U}})):p=function(P){return P instanceof this},D.prototype.pipe=function(){M(this,new S)},D.prototype.write=function(P,q,H){var L,K=this._writableState,Y=!1,Z=!K.objectMode&&(L=P,f.isBuffer(L)||L instanceof h);return Z&&!f.isBuffer(P)&&(P=(function(V){return f.from(V)})(P)),typeof q=="function"&&(H=q,q=null),Z?q="buffer":q||(q=K.defaultEncoding),typeof H!="function"&&(H=z),K.ending?(function(V,ee){var B=new A;M(V,B),i.nextTick(ee,B)})(this,H):(Z||(function(V,ee,B,F){var X;return B===null?X=new I:typeof B=="string"||ee.objectMode||(X=new v("chunk",["string","Buffer"],B)),!X||(M(V,X),i.nextTick(F,X),!1)})(this,K,P,H))&&(K.pendingcb++,Y=(function(V,ee,B,F,X,te){if(!B){var se=(function(le,pe,ye){return le.objectMode||le.decodeStrings===!1||typeof pe!="string"||(pe=f.from(pe,ye)),pe})(ee,F,X);F!==se&&(B=!0,X="buffer",F=se)}var ce=ee.objectMode?1:F.length;ee.length+=ce;var ue=ee.length<ee.highWaterMark;if(ue||(ee.needDrain=!0),ee.writing||ee.corked){var oe=ee.lastBufferedRequest;ee.lastBufferedRequest={chunk:F,encoding:X,isBuf:B,callback:te,next:null},oe?oe.next=ee.lastBufferedRequest:ee.bufferedRequest=ee.lastBufferedRequest,ee.bufferedRequestCount+=1}else T(V,ee,!1,ce,F,X,te);return ue})(this,K,Z,P,q,H)),Y},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||C(this,P))},D.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new O(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),D.prototype._write=function(P,q,H){H(new b("_write()"))},D.prototype._writev=null,D.prototype.end=function(P,q,H){var L=this._writableState;return typeof P=="function"?(H=P,P=null,q=null):typeof q=="function"&&(H=q,q=null),P!=null&&this.write(P,q),L.corked&&(L.corked=1,this.uncork()),L.ending||(function(K,Y,Z){Y.ending=!0,k(K,Y),Z&&(Y.finished?i.nextTick(Z):K.once("finish",Z)),Y.ended=!0,K.writable=!1})(this,L,H),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),D.prototype.destroy=g.destroy,D.prototype._undestroy=g.undestroy,D.prototype._destroy=function(P,q){q(P)}}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(e,n,a){(function(i){(function(){var s;function o(_,I,A){return(I=(function(O){var M=(function(z,U){if(typeof z!="object"||z===null)return z;var D=z[Symbol.toPrimitive];if(D!==void 0){var T=D.call(z,U);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(z)})(O,"string");return typeof M=="symbol"?M:String(M)})(I))in _?Object.defineProperty(_,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):_[I]=A,_}var l=e("./end-of-stream"),c=Symbol("lastResolve"),u=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),g=Symbol("handlePromise"),y=Symbol("stream");function m(_,I){return{value:_,done:I}}function v(_){var I=_[c];if(I!==null){var A=_[y].read();A!==null&&(_[p]=null,_[c]=null,_[u]=null,I(m(A,!1)))}}function b(_){i.nextTick(v,_)}var x=Object.getPrototypeOf((function(){})),S=Object.setPrototypeOf((o(s={get stream(){return this[y]},next:function(){var _=this,I=this[f];if(I!==null)return Promise.reject(I);if(this[h])return Promise.resolve(m(void 0,!0));if(this[y].destroyed)return new Promise((function(z,U){i.nextTick((function(){_[f]?U(_[f]):z(m(void 0,!0))}))}));var A,O=this[p];if(O)A=new Promise((function(z,U){return function(D,T){z.then((function(){U[h]?D(m(void 0,!0)):U[g](D,T)}),T)}})(O,this));else{var M=this[y].read();if(M!==null)return Promise.resolve(m(M,!1));A=new Promise(this[g])}return this[p]=A,A}},Symbol.asyncIterator,(function(){return this})),o(s,"return",(function(){var _=this;return new Promise((function(I,A){_[y].destroy(null,(function(O){O?A(O):I(m(void 0,!0))}))}))})),s),x);n.exports=function(_){var I,A=Object.create(S,(o(I={},y,{value:_,writable:!0}),o(I,c,{value:null,writable:!0}),o(I,u,{value:null,writable:!0}),o(I,f,{value:null,writable:!0}),o(I,h,{value:_._readableState.endEmitted,writable:!0}),o(I,g,{value:function(O,M){var z=A[y].read();z?(A[p]=null,A[c]=null,A[u]=null,O(m(z,!1))):(A[c]=O,A[u]=M)},writable:!0}),I));return A[p]=null,l(_,(function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=A[u];return M!==null&&(A[p]=null,A[c]=null,A[u]=null,M(O)),void(A[f]=O)}var z=A[c];z!==null&&(A[p]=null,A[c]=null,A[u]=null,z(m(void 0,!0))),A[h]=!0})),_.on("readable",b.bind(null,A)),A}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,n,a){function i(p,g){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);g&&(m=m.filter((function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable}))),y.push.apply(y,m)}return y}function s(p){for(var g=1;g<arguments.length;g++){var y=arguments[g]!=null?arguments[g]:{};g%2?i(Object(y),!0).forEach((function(m){o(p,m,y[m])})):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):i(Object(y)).forEach((function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(y,m))}))}return p}function o(p,g,y){return(g=c(g))in p?Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[g]=y,p}function l(p,g){for(var y=0;y<g.length;y++){var m=g[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,c(m.key),m)}}function c(p){var g=(function(y,m){if(typeof y!="object"||y===null)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var b=v.call(y,m);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(y)})(p,"string");return typeof g=="symbol"?g:String(g)}var u=e("buffer").Buffer,f=e("util").inspect,h=f&&f.custom||"inspect";n.exports=(function(){function p(){(function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,p),this.head=null,this.tail=null,this.length=0}var g,y;return g=p,(y=[{key:"push",value:function(m){var v={data:m,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(m){var v={data:m,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var v=this.head,b=""+v.data;v=v.next;)b+=m+v.data;return b}},{key:"concat",value:function(m){if(this.length===0)return u.alloc(0);for(var v,b,x,S=u.allocUnsafe(m>>>0),_=this.head,I=0;_;)v=_.data,b=S,x=I,u.prototype.copy.call(v,b,x),I+=_.data.length,_=_.next;return S}},{key:"consume",value:function(m,v){var b;return m<this.head.data.length?(b=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):b=m===this.head.data.length?this.shift():v?this._getString(m):this._getBuffer(m),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var v=this.head,b=1,x=v.data;for(m-=x.length;v=v.next;){var S=v.data,_=m>S.length?S.length:m;if(_===S.length?x+=S:x+=S.slice(0,m),(m-=_)==0){_===S.length?(++b,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=S.slice(_));break}++b}return this.length-=b,x}},{key:"_getBuffer",value:function(m){var v=u.allocUnsafe(m),b=this.head,x=1;for(b.data.copy(v),m-=b.data.length;b=b.next;){var S=b.data,_=m>S.length?S.length:m;if(S.copy(v,v.length-m,0,_),(m-=_)==0){_===S.length?(++x,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=S.slice(_));break}++x}return this.length-=x,v}},{key:h,value:function(m,v){return f(this,s(s({},v),{},{depth:0,customInspect:!1}))}}])&&l(g.prototype,y),Object.defineProperty(g,"prototype",{writable:!1}),p})()},{buffer:220,util:188}],485:[function(e,n,a){(function(i){(function(){function s(c,u){l(c,u),o(c)}function o(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function l(c,u){c.emit("error",u)}n.exports={destroy:function(c,u){var f=this,h=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return h||p?(u?u(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(l,this,c)):i.nextTick(l,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,(function(g){!u&&g?f._writableState?f._writableState.errorEmitted?i.nextTick(o,f):(f._writableState.errorEmitted=!0,i.nextTick(s,f,g)):i.nextTick(s,f,g):u?(i.nextTick(o,f),u(g)):i.nextTick(o,f)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,u){var f=c._readableState,h=c._writableState;f&&f.autoDestroy||h&&h.autoDestroy?c.destroy(u):c.emit("error",u)}}}).call(this)}).call(this,e("_process"))},{_process:467}],486:[function(e,n,a){var i=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}n.exports=function o(l,c,u){if(typeof c=="function")return o(l,null,c);c||(c={}),u=(function(_){var I=!1;return function(){if(!I){I=!0;for(var A=arguments.length,O=new Array(A),M=0;M<A;M++)O[M]=arguments[M];_.apply(this,O)}}})(u||s);var f=c.readable||c.readable!==!1&&l.readable,h=c.writable||c.writable!==!1&&l.writable,p=function(){l.writable||y()},g=l._writableState&&l._writableState.finished,y=function(){h=!1,g=!0,f||u.call(l)},m=l._readableState&&l._readableState.endEmitted,v=function(){f=!1,m=!0,h||u.call(l)},b=function(_){u.call(l,_)},x=function(){var _;return f&&!m?(l._readableState&&l._readableState.ended||(_=new i),u.call(l,_)):h&&!g?(l._writableState&&l._writableState.ended||(_=new i),u.call(l,_)):void 0},S=function(){l.req.on("finish",y)};return(function(_){return _.setHeader&&typeof _.abort=="function"})(l)?(l.on("complete",y),l.on("abort",x),l.req?S():l.on("request",S)):h&&!l._writableState&&(l.on("end",p),l.on("close",p)),l.on("end",v),l.on("finish",y),c.error!==!1&&l.on("error",b),l.on("close",x),function(){l.removeListener("complete",y),l.removeListener("abort",x),l.removeListener("request",S),l.req&&l.req.removeListener("finish",y),l.removeListener("end",p),l.removeListener("close",p),l.removeListener("finish",y),l.removeListener("end",v),l.removeListener("error",b),l.removeListener("close",x)}}},{"../../../errors":477}],487:[function(e,n,a){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,n,a){var i,s=e("../../../errors").codes,o=s.ERR_MISSING_ARGS,l=s.ERR_STREAM_DESTROYED;function c(g){if(g)throw g}function u(g,y,m,v){v=(function(S){var _=!1;return function(){_||(_=!0,S.apply(void 0,arguments))}})(v);var b=!1;g.on("close",(function(){b=!0})),i===void 0&&(i=e("./end-of-stream")),i(g,{readable:y,writable:m},(function(S){if(S)return v(S);b=!0,v()}));var x=!1;return function(S){if(!b&&!x)return x=!0,(function(_){return _.setHeader&&typeof _.abort=="function"})(g)?g.abort():typeof g.destroy=="function"?g.destroy():void v(S||new l("pipe"))}}function f(g){g()}function h(g,y){return g.pipe(y)}function p(g){return g.length?typeof g[g.length-1]!="function"?c:g.pop():c}n.exports=function(){for(var g=arguments.length,y=new Array(g),m=0;m<g;m++)y[m]=arguments[m];var v,b=p(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new o("streams");var x=y.map((function(S,_){var I=_<y.length-1;return u(S,I,_>0,(function(A){v||(v=A),A&&x.forEach(f),I||(x.forEach(f),b(v))}))}));return y.reduce(h)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,n,a){var i=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(s,o,l,c){var u=(function(f,h,p){return f.highWaterMark!=null?f.highWaterMark:h?f[p]:null})(o,c,l);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new i(c?l:"highWaterMark",u);return Math.floor(u)}return s.objectMode?16:16384}}},{"../../../errors":477}],490:[function(e,n,a){n.exports=e("events").EventEmitter},{events:422}],491:[function(e,n,a){(a=n.exports=e("./lib/_stream_readable.js")).Stream=a,a.Readable=a,a.Writable=e("./lib/_stream_writable.js"),a.Duplex=e("./lib/_stream_duplex.js"),a.Transform=e("./lib/_stream_transform.js"),a.PassThrough=e("./lib/_stream_passthrough.js"),a.finished=e("./lib/internal/streams/end-of-stream.js"),a.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,n,a){var i=(function(s){var o=Object.prototype,l=o.hasOwnProperty,c=Object.defineProperty||function(k,P,q){k[P]=q.value},u=typeof Symbol=="function"?Symbol:{},f=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",p=u.toStringTag||"@@toStringTag";function g(k,P,q){return Object.defineProperty(k,P,{value:q,enumerable:!0,configurable:!0,writable:!0}),k[P]}try{g({},"")}catch{g=function(P,q,H){return P[q]=H}}function y(k,P,q,H){var L=P&&P.prototype instanceof b?P:b,K=Object.create(L.prototype),Y=new C(H||[]);return c(K,"_invoke",{value:U(k,q,Y)}),K}function m(k,P,q){try{return{type:"normal",arg:k.call(P,q)}}catch(H){return{type:"throw",arg:H}}}s.wrap=y;var v={};function b(){}function x(){}function S(){}var _={};g(_,f,(function(){return this}));var I=Object.getPrototypeOf,A=I&&I(I(N([])));A&&A!==o&&l.call(A,f)&&(_=A);var O=S.prototype=b.prototype=Object.create(_);function M(k){["next","throw","return"].forEach((function(P){g(k,P,(function(q){return this._invoke(P,q)}))}))}function z(k,P){var q;c(this,"_invoke",{value:function(H,L){function K(){return new P((function(Y,Z){(function V(ee,B,F,X){var te=m(k[ee],k,B);if(te.type!=="throw"){var se=te.arg,ce=se.value;return ce&&typeof ce=="object"&&l.call(ce,"__await")?P.resolve(ce.__await).then((function(ue){V("next",ue,F,X)}),(function(ue){V("throw",ue,F,X)})):P.resolve(ce).then((function(ue){se.value=ue,F(se)}),(function(ue){return V("throw",ue,F,X)}))}X(te.arg)})(H,L,Y,Z)}))}return q=q?q.then(K,K):K()}})}function U(k,P,q){var H="suspendedStart";return function(L,K){if(H==="executing")throw new Error("Generator is already running");if(H==="completed"){if(L==="throw")throw K;return E()}for(q.method=L,q.arg=K;;){var Y=q.delegate;if(Y){var Z=D(Y,q);if(Z){if(Z===v)continue;return Z}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(H==="suspendedStart")throw H="completed",q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);H="executing";var V=m(k,P,q);if(V.type==="normal"){if(H=q.done?"completed":"suspendedYield",V.arg===v)continue;return{value:V.arg,done:q.done}}V.type==="throw"&&(H="completed",q.method="throw",q.arg=V.arg)}}}function D(k,P){var q=P.method,H=k.iterator[q];if(H===void 0)return P.delegate=null,q==="throw"&&k.iterator.return&&(P.method="return",P.arg=void 0,D(k,P),P.method==="throw")||q!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+q+"' method")),v;var L=m(H,k.iterator,P.arg);if(L.type==="throw")return P.method="throw",P.arg=L.arg,P.delegate=null,v;var K=L.arg;return K?K.done?(P[k.resultName]=K.value,P.next=k.nextLoc,P.method!=="return"&&(P.method="next",P.arg=void 0),P.delegate=null,v):K:(P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,v)}function T(k){var P={tryLoc:k[0]};1 in k&&(P.catchLoc=k[1]),2 in k&&(P.finallyLoc=k[2],P.afterLoc=k[3]),this.tryEntries.push(P)}function R(k){var P=k.completion||{};P.type="normal",delete P.arg,k.completion=P}function C(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(T,this),this.reset(!0)}function N(k){if(k){var P=k[f];if(P)return P.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var q=-1,H=function L(){for(;++q<k.length;)if(l.call(k,q))return L.value=k[q],L.done=!1,L;return L.value=void 0,L.done=!0,L};return H.next=H}}return{next:E}}function E(){return{value:void 0,done:!0}}return x.prototype=S,c(O,"constructor",{value:S,configurable:!0}),c(S,"constructor",{value:x,configurable:!0}),x.displayName=g(S,p,"GeneratorFunction"),s.isGeneratorFunction=function(k){var P=typeof k=="function"&&k.constructor;return!!P&&(P===x||(P.displayName||P.name)==="GeneratorFunction")},s.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,S):(k.__proto__=S,g(k,p,"GeneratorFunction")),k.prototype=Object.create(O),k},s.awrap=function(k){return{__await:k}},M(z.prototype),g(z.prototype,h,(function(){return this})),s.AsyncIterator=z,s.async=function(k,P,q,H,L){L===void 0&&(L=Promise);var K=new z(y(k,P,q,H),L);return s.isGeneratorFunction(P)?K:K.next().then((function(Y){return Y.done?Y.value:K.next()}))},M(O),g(O,p,"Generator"),g(O,f,(function(){return this})),g(O,"toString",(function(){return"[object Generator]"})),s.keys=function(k){var P=Object(k),q=[];for(var H in P)q.push(H);return q.reverse(),function L(){for(;q.length;){var K=q.pop();if(K in P)return L.value=K,L.done=!1,L}return L.done=!0,L}},s.values=N,C.prototype={constructor:C,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!k)for(var P in this)P.charAt(0)==="t"&&l.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var P=this;function q(V,ee){return K.type="throw",K.arg=k,P.next=V,ee&&(P.method="next",P.arg=void 0),!!ee}for(var H=this.tryEntries.length-1;H>=0;--H){var L=this.tryEntries[H],K=L.completion;if(L.tryLoc==="root")return q("end");if(L.tryLoc<=this.prev){var Y=l.call(L,"catchLoc"),Z=l.call(L,"finallyLoc");if(Y&&Z){if(this.prev<L.catchLoc)return q(L.catchLoc,!0);if(this.prev<L.finallyLoc)return q(L.finallyLoc)}else if(Y){if(this.prev<L.catchLoc)return q(L.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<L.finallyLoc)return q(L.finallyLoc)}}}},abrupt:function(k,P){for(var q=this.tryEntries.length-1;q>=0;--q){var H=this.tryEntries[q];if(H.tryLoc<=this.prev&&l.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var L=H;break}}L&&(k==="break"||k==="continue")&&L.tryLoc<=P&&P<=L.finallyLoc&&(L=null);var K=L?L.completion:{};return K.type=k,K.arg=P,L?(this.method="next",this.next=L.finallyLoc,v):this.complete(K)},complete:function(k,P){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&P&&(this.next=P),v},finish:function(k){for(var P=this.tryEntries.length-1;P>=0;--P){var q=this.tryEntries[P];if(q.finallyLoc===k)return this.complete(q.completion,q.afterLoc),R(q),v}},catch:function(k){for(var P=this.tryEntries.length-1;P>=0;--P){var q=this.tryEntries[P];if(q.tryLoc===k){var H=q.completion;if(H.type==="throw"){var L=H.arg;R(q)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(k,P,q){return this.delegate={iterator:N(k),resultName:P,nextLoc:q},this.method==="next"&&(this.arg=void 0),v}},s})(typeof n=="object"?n.exports:{});try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(e,n,a){var i=e("buffer").Buffer,s=e("inherits"),o=e("hash-base"),l=new Array(16),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],g=[1352829926,1548603684,1836072691,2053994217,0];function y(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(I,A){return I<<A|I>>>32-A}function v(I,A,O,M,z,U,D,T){return m(I+(A^O^M)+U+D|0,T)+z|0}function b(I,A,O,M,z,U,D,T){return m(I+(A&O|~A&M)+U+D|0,T)+z|0}function x(I,A,O,M,z,U,D,T){return m(I+((A|~O)^M)+U+D|0,T)+z|0}function S(I,A,O,M,z,U,D,T){return m(I+(A&M|O&~M)+U+D|0,T)+z|0}function _(I,A,O,M,z,U,D,T){return m(I+(A^(O|~M))+U+D|0,T)+z|0}s(y,o),y.prototype._update=function(){for(var I=l,A=0;A<16;++A)I[A]=this._block.readInt32LE(4*A);for(var O=0|this._a,M=0|this._b,z=0|this._c,U=0|this._d,D=0|this._e,T=0|this._a,R=0|this._b,C=0|this._c,N=0|this._d,E=0|this._e,k=0;k<80;k+=1){var P,q;k<16?(P=v(O,M,z,U,D,I[c[k]],p[0],f[k]),q=_(T,R,C,N,E,I[u[k]],g[0],h[k])):k<32?(P=b(O,M,z,U,D,I[c[k]],p[1],f[k]),q=S(T,R,C,N,E,I[u[k]],g[1],h[k])):k<48?(P=x(O,M,z,U,D,I[c[k]],p[2],f[k]),q=x(T,R,C,N,E,I[u[k]],g[2],h[k])):k<64?(P=S(O,M,z,U,D,I[c[k]],p[3],f[k]),q=b(T,R,C,N,E,I[u[k]],g[3],h[k])):(P=_(O,M,z,U,D,I[c[k]],p[4],f[k]),q=v(T,R,C,N,E,I[u[k]],g[4],h[k])),O=D,D=U,U=m(z,10),z=M,M=P,T=E,E=N,N=m(C,10),C=R,R=q}var H=this._b+z+N|0;this._b=this._c+U+E|0,this._c=this._d+D+T|0,this._d=this._e+O+R|0,this._e=this._a+M+C|0,this._a=H},y.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var I=i.alloc?i.alloc(20):new i(20);return I.writeInt32LE(this._a,0),I.writeInt32LE(this._b,4),I.writeInt32LE(this._c,8),I.writeInt32LE(this._d,12),I.writeInt32LE(this._e,16),I},n.exports=y},{buffer:220,"hash-base":425,inherits:440}],494:[function(e,n,a){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=e("buffer"),s=i.Buffer;function o(c,u){for(var f in c)u[f]=c[f]}function l(c,u,f){return s(c,u,f)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?n.exports=i:(o(i,a),a.Buffer=l),l.prototype=Object.create(s.prototype),o(s,l),l.from=function(c,u,f){if(typeof c=="number")throw new TypeError("Argument must not be a number");return s(c,u,f)},l.alloc=function(c,u,f){if(typeof c!="number")throw new TypeError("Argument must be a number");var h=s(c);return u!==void 0?typeof f=="string"?h.fill(u,f):h.fill(u):h.fill(0),h},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return s(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(c)}},{buffer:220}],495:[function(e,n,a){(function(i){(function(){var s,o=e("buffer"),l=o.Buffer,c={};for(s in o)o.hasOwnProperty(s)&&s!=="SlowBuffer"&&s!=="Buffer"&&(c[s]=o[s]);var u=c.Buffer={};for(s in l)l.hasOwnProperty(s)&&s!=="allocUnsafe"&&s!=="allocUnsafeSlow"&&(u[s]=l[s]);if(c.Buffer.prototype=l.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(f,h,p){if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof f);if(f&&f.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);return l(f,h,p)}),u.alloc||(u.alloc=function(f,h,p){if(typeof f!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof f);if(f<0||f>=2*(1<<30))throw new RangeError('The value "'+f+'" is invalid for option "size"');var g=l(f);return h&&h.length!==0?typeof p=="string"?g.fill(h,p):g.fill(h):g.fill(0),g}),!c.kStringMaxLength)try{c.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch{}c.constants||(c.constants={MAX_LENGTH:c.kMaxLength},c.kStringMaxLength&&(c.constants.MAX_STRING_LENGTH=c.kStringMaxLength)),n.exports=c}).call(this)}).call(this,e("_process"))},{_process:467,buffer:220}],496:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0});const i=e("xmlchars/xml/1.0/ed5"),s=e("xmlchars/xml/1.1/ed2"),o=e("xmlchars/xmlns/1.0/ed3");var l=i.isS,c=i.isChar,u=i.isNameStartChar,f=i.isNameChar,h=i.S_LIST,p=i.NAME_RE,g=s.isChar,y=o.isNCNameStartChar,m=o.isNCNameChar,v=o.NC_NAME_RE;const b="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",S={__proto__:null,xml:b,xmlns:x},_={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},I=N=>N===34||N===39,A=[34,39],O=[...A,91,62],M=[...A,60,93],z=[61,63,...h],U=[...h,62,38,60];function D(N,E,k){switch(E){case"xml":k!==b&&N.fail(`xml prefix must be bound to ${b}.`);break;case"xmlns":k!==x&&N.fail(`xmlns prefix must be bound to ${x}.`)}switch(k){case x:N.fail(E===""?`the default namespace may not be set to ${k}.`:`may not assign a prefix (even "xmlns") to the URI ${x}.`);break;case b:switch(E){case"xml":break;case"":N.fail(`the default namespace may not be set to ${k}.`);break;default:N.fail("may not assign the xml namespace to another prefix.")}}}const T=N=>v.test(N),R=N=>p.test(N);a.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const C={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};a.SaxesParser=class{constructor(N){this.opt=N??{},this.fragmentOpt=!!this.opt.fragment;const E=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,E){this.nameStartCheck=y,this.nameCheck=m,this.isName=T,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},S);const k=this.opt.additionalNamespaces;k!=null&&((function(P,q){for(const H of Object.keys(q))D(P,H,q[H])})(this,k),Object.assign(this.ns,k))}else this.nameStartCheck=u,this.nameCheck=f,this.isName=R,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var N;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:E}=this;this.state=E?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=E,this.xmlDeclPossible=!E,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:k}=this.opt;if(k===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");k="1.0"}this.setXMLVersion(k),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_),(N=this.readyHandler)===null||N===void 0||N.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(N,E){this[C[N]]=E}off(N){this[C[N]]=void 0}makeError(N){var E;let k=(E=this.fileName)!==null&&E!==void 0?E:"";return this.trackPosition&&(k.length>0&&(k+=":"),k+=`${this.line}:${this.column}`),k.length>0&&(k+=": "),new Error(k+N)}fail(N){const E=this.makeError(N),k=this.errorHandler;if(k===void 0)throw E;return k(E),this}write(N){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let E=!1;N===null?(E=!0,N=""):typeof N=="object"&&(N=N.toString()),this.carriedFromPrevious!==void 0&&(N=`${this.carriedFromPrevious}${N}`,this.carriedFromPrevious=void 0);let k=N.length;const P=N.charCodeAt(k-1);!E&&(P===13||P>=55296&&P<=56319)&&(this.carriedFromPrevious=N[k-1],k--,N=N.slice(0,k));const{stateTable:q}=this;for(this.chunk=N,this.i=0;this.i<k;)q[this.state].call(this);return this.chunkPosition+=k,E?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:N,i:E}=this;if(this.prevI=E,this.i=E+1,E>=N.length)return-1;const k=N.charCodeAt(E);if(this.column++,k<55296){if(k>=32||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return N.charCodeAt(E+1)===10&&(this.i=E+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;const P=65536+1024*(k-55296)+(N.charCodeAt(E+1)-56320);return this.i=E+2,P>1114111&&this.fail("disallowed character."),P}getCode11(){const{chunk:N,i:E}=this;if(this.prevI=E,this.i=E+1,E>=N.length)return-1;const k=N.charCodeAt(E);if(this.column++,k<55296){if(k>31&&k<127||k>159&&k!==8232||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const q=N.charCodeAt(E+1);q!==10&&q!==133||(this.i=E+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;const P=65536+1024*(k-55296)+(N.charCodeAt(E+1)-56320);return this.i=E+2,P>1114111&&this.fail("disallowed character."),P}getCodeNorm(){const N=this.getCode();return N===-2?10:N}unget(){this.i=this.prevI,this.column--}captureTo(N){let{i:E}=this;const{chunk:k}=this;for(;;){const P=this.getCode(),q=P===-2,H=q?10:P;if(H===-1||N.includes(H))return this.text+=k.slice(E,this.prevI),H;q&&(this.text+=k.slice(E,this.prevI)+`
`,E=this.i)}}captureToChar(N){let{i:E}=this;const{chunk:k}=this;for(;;){let P=this.getCode();switch(P){case-2:this.text+=k.slice(E,this.prevI)+`
`,E=this.i,P=10;break;case-1:return this.text+=k.slice(E),!1}if(P===N)return this.text+=k.slice(E,this.prevI),!0}}captureNameChars(){const{chunk:N,i:E}=this;for(;;){const k=this.getCode();if(k===-1)return this.name+=N.slice(E),-1;if(!f(k))return this.name+=N.slice(E,this.prevI),k===-2?10:k}}skipSpaces(){for(;;){const N=this.getCodeNorm();if(N===-1||!l(N))return N}}setXMLVersion(N){this.currentXMLVersion=N,N==="1.0"?(this.isChar=c,this.getCode=this.getCode10):(this.isChar=g,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const N=this.i,E=this.skipSpaces();switch(this.prevI!==N&&(this.xmlDeclPossible=!1),E){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var N;const E=this.captureTo(O);switch(E){case 62:(N=this.doctypeHandler)===null||N===void 0||N.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(E),E===91?this.state=4:I(E)&&(this.state=3,this.q=E)}}sDoctypeQuote(){const N=this.q;this.captureToChar(N)&&(this.text+=String.fromCodePoint(N),this.q=null,this.state=2)}sDTD(){const N=this.captureTo(M);N!==-1&&(this.text+=String.fromCodePoint(N),N===93?this.state=2:N===60?this.state=6:I(N)&&(this.state=5,this.q=N))}sDTDQuoted(){const N=this.q;this.captureToChar(N)&&(this.text+=String.fromCodePoint(N),this.state=4,this.q=null)}sDTDOpenWaka(){const N=this.getCodeNorm();switch(this.text+=String.fromCodePoint(N),N){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const N=String.fromCodePoint(this.getCodeNorm()),E=this.openWakaBang+=N;this.text+=N,E!=="-"&&(this.state=E==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const N=this.getCodeNorm();this.text+=String.fromCodePoint(N),this.state=N===45?10:8}sDTDCommentEnded(){const N=this.getCodeNorm();this.text+=String.fromCodePoint(N),N===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const N=this.getCodeNorm();this.text+=String.fromCodePoint(N),N===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:N}=this;const{chunk:E}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=E.slice(N,this.prevI)+`
`,N=this.i;break;case 59:{const{entityReturnState:k}=this,P=this.entity+E.slice(N,this.prevI);let q;this.state=k,P===""?(this.fail("empty entity name."),q="&;"):(q=this.parseEntity(P),this.entity=""),k===13&&this.textHandler===void 0||(this.text+=q);break e}case-1:this.entity+=E.slice(N);break e}}sOpenWaka(){const N=this.getCode();if(u(N))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(N){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var N;const E=this.getCodeNorm();E===45?(this.state=19,(N=this.commentHandler)===null||N===void 0||N.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(E),this.state=17)}sCommentEnded(){const N=this.getCodeNorm();N!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(N),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const N=this.getCodeNorm();N===93?this.state=22:(this.text+="]"+String.fromCodePoint(N),this.state=20)}sCDataEnding2(){var N;const E=this.getCodeNorm();switch(E){case 62:(N=this.cdataHandler)===null||N===void 0||N.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(E),this.state=20}}sPIFirstChar(){const N=this.getCodeNorm();this.nameStartCheck(N)?(this.piTarget+=String.fromCodePoint(N),this.state=24):N===63||l(N)?(this.fail("processing instruction without a target."),this.state=N===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(N),this.state=24)}sPIRest(){const{chunk:N,i:E}=this;for(;;){const k=this.getCodeNorm();if(k===-1)return void(this.piTarget+=N.slice(E));if(!this.nameCheck(k)){this.piTarget+=N.slice(E,this.prevI);const P=k===63;P||l(k)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=P?33:27):this.state=P?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k));break}}}sPIBody(){if(this.text.length===0){const N=this.getCodeNorm();N===63?this.state=26:l(N)||(this.text=String.fromCodePoint(N))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var N;const E=this.getCodeNorm();if(E===62){const{piTarget:k}=this;k.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(N=this.piHandler)===null||N===void 0||N.call(this,{target:k,body:this.text}),this.piTarget=this.text="",this.state=13}else E===63?this.text+="?":(this.text+="?"+String.fromCodePoint(E),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const N=this.skipSpaces();N!==63?N!==-1&&(this.state=28,this.name=String.fromCodePoint(N)):this.state=33}sXMLDeclName(){const N=this.captureTo(z);if(N===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(l(N)||N===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=N===61?30:29}}sXMLDeclEq(){const N=this.getCodeNorm();if(N===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(N)||(N!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const N=this.getCodeNorm();if(N===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(N)||(I(N)?this.q=N:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const N=this.captureTo([this.q,63]);if(N===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(N===-1)return;const E=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const k=E;this.xmlDecl.version=k,/^1\.[0-9]+$/.test(k)?this.opt.forceXMLVersion||this.setXMLVersion(k):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(E)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=E;break;case"standalone":E!=="yes"&&E!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=E}this.name="",this.state=32}sXMLDeclSeparator(){const N=this.getCodeNorm();N!==63?(l(N)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var N;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(N=this.xmldeclHandler)===null||N===void 0||N.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var N;const E=this.captureNameChars();if(E===-1)return;const k=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=k.ns=Object.create(null)),(N=this.openTagStartHandler)===null||N===void 0||N.call(this,k),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),E){case 62:this.openTag();break;case 47:this.state=35;break;default:l(E)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const N=this.skipSpaces();N!==-1&&(u(N)?(this.unget(),this.state=37):N===62?this.openTag():N===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const N=this.captureNameChars();N===61?this.state=39:l(N)?this.state=38:N===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):N!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const N=this.skipSpaces();switch(N){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",N===62?this.openTag():u(N)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const N=this.getCodeNorm();I(N)?(this.q=N,this.state=40):l(N)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:N,chunk:E}=this;let{i:k}=this;for(;;)switch(this.getCode()){case N:return this.pushAttrib(this.name,this.text+E.slice(k,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=E.slice(k,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=E.slice(k,this.prevI)+" ",k=this.i;break;case 60:return this.text+=E.slice(k,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=E.slice(k))}}sAttribValueClosed(){const N=this.getCodeNorm();l(N)?this.state=36:N===62?this.openTag():N===47?this.state=35:u(N)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const N=this.captureTo(U);switch(N){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",N===62?this.openTag():this.state=36}}sCloseTag(){const N=this.captureNameChars();N===62?this.closeTag():l(N)?this.state=44:N!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:N,forbiddenState:E}=this;const{chunk:k,textHandler:P}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,P!==void 0){const{text:q}=this,H=k.slice(N,this.prevI);q.length!==0?(P(q+H),this.text=""):H.length!==0&&P(H)}E=0;break e;case 38:this.state=14,this.entityReturnState=13,P!==void 0&&(this.text+=k.slice(N,this.prevI)),E=0;break e;case 93:switch(E){case 0:E=1;break;case 1:E=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:E===2&&this.fail('the string "]]>" is disallowed in char data.'),E=0;break;case-2:P!==void 0&&(this.text+=k.slice(N,this.prevI)+`
`),N=this.i,E=0;break;case-1:P!==void 0&&(this.text+=k.slice(N));break e;default:E=0}this.forbiddenState=E}handleTextOutsideRoot(){let{i:N}=this;const{chunk:E,textHandler:k}=this;let P=!1;e:for(;;){const q=this.getCode();switch(q){case 60:if(this.state=15,k!==void 0){const{text:H}=this,L=E.slice(N,this.prevI);H.length!==0?(k(H+L),this.text=""):L.length!==0&&k(L)}break e;case 38:this.state=14,this.entityReturnState=13,k!==void 0&&(this.text+=E.slice(N,this.prevI)),P=!0;break e;case-2:k!==void 0&&(this.text+=E.slice(N,this.prevI)+`
`),N=this.i;break;case-1:k!==void 0&&(this.text+=E.slice(N));break e;default:l(q)||(P=!0)}}P&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(N,E){var k;const{prefix:P,local:q}=this.qname(N),H={name:N,prefix:P,local:q,value:E};if(this.attribList.push(H),(k=this.attributeHandler)===null||k===void 0||k.call(this,H),P==="xmlns"){const L=E.trim();this.currentXMLVersion==="1.0"&&L===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[q]=L,D(this,q,L)}else if(N==="xmlns"){const L=E.trim();this.topNS[""]=L,D(this,"",L)}}pushAttribPlain(N,E){var k;const P={name:N,value:E};this.attribList.push(P),(k=this.attributeHandler)===null||k===void 0||k.call(this,P)}end(){var N,E;this.sawRoot||this.fail("document must contain a root element.");const{tags:k}=this;for(;k.length>0;){const q=k.pop();this.fail("unclosed tag: "+q.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:P}=this;return P.length!==0&&((N=this.textHandler)===null||N===void 0||N.call(this,P),this.text=""),this._closed=!0,(E=this.endHandler)===null||E===void 0||E.call(this),this._init(),this}resolve(N){var E,k;let P=this.topNS[N];if(P!==void 0)return P;const{tags:q}=this;for(let H=q.length-1;H>=0;H--)if(P=q[H].ns[N],P!==void 0)return P;return P=this.ns[N],P!==void 0?P:(k=(E=this.opt).resolvePrefix)===null||k===void 0?void 0:k.call(E,N)}qname(N){const E=N.indexOf(":");if(E===-1)return{prefix:"",local:N};const k=N.slice(E+1),P=N.slice(0,E);return(P===""||k===""||k.includes(":"))&&this.fail(`malformed name: ${N}.`),{prefix:P,local:k}}processAttribsNS(){var N;const{attribList:E}=this,k=this.tag;{const{prefix:H,local:L}=this.qname(k.name);k.prefix=H,k.local=L;const K=k.uri=(N=this.resolve(H))!==null&&N!==void 0?N:"";H!==""&&(H==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),K===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(H)}.`),k.uri=H))}if(E.length===0)return;const{attributes:P}=k,q=new Set;for(const H of E){const{name:L,prefix:K,local:Y}=H;let Z,V;K===""?(Z=L==="xmlns"?x:"",V=L):(Z=this.resolve(K),Z===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(K)}.`),Z=K),V=`{${Z}}${Y}`),q.has(V)&&this.fail(`duplicate attribute: ${V}.`),q.add(V),H.uri=Z,P[L]=H}this.attribList=[]}processAttribsPlain(){const{attribList:N}=this,E=this.tag.attributes;for(const{name:k,value:P}of N)E[k]!==void 0&&this.fail(`duplicate attribute: ${k}.`),E[k]=P;this.attribList=[]}openTag(){var N;this.processAttribs();const{tags:E}=this,k=this.tag;k.isSelfClosing=!1,(N=this.openTagHandler)===null||N===void 0||N.call(this,k),E.push(k),this.state=13,this.name=""}openSelfClosingTag(){var N,E,k;this.processAttribs();const{tags:P}=this,q=this.tag;q.isSelfClosing=!0,(N=this.openTagHandler)===null||N===void 0||N.call(this,q),(E=this.closeTagHandler)===null||E===void 0||E.call(this,q),(this.tag=(k=P[P.length-1])!==null&&k!==void 0?k:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:N,name:E}=this;if(this.state=13,this.name="",E==="")return this.fail("weird empty close tag."),void(this.text+="</>");const k=this.closeTagHandler;let P=N.length;for(;P-- >0;){const q=this.tag=N.pop();if(this.topNS=q.ns,k==null||k(q),q.name===E)break;this.fail("unexpected close tag.")}P===0?this.closedRoot=!0:P<0&&(this.fail(`unmatched closing tag: ${E}.`),this.text+=`</${E}>`)}parseEntity(N){if(N[0]!=="#"){const k=this.ENTITIES[N];return k!==void 0?k:(this.fail(this.isName(N)?"undefined entity.":"disallowed character in entity name."),`&${N};`)}let E=NaN;return N[1]==="x"&&/^#x[0-9a-f]+$/i.test(N)?E=parseInt(N.slice(2),16):/^#[0-9]+$/.test(N)&&(E=parseInt(N.slice(1),10)),this.isChar(E)?String.fromCodePoint(E):(this.fail("malformed character entity."),`&${N};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(e,n,a){var i=e("safe-buffer").Buffer;function s(o,l){this._block=i.alloc(o),this._finalSize=l,this._blockSize=o,this._len=0}s.prototype.update=function(o,l){typeof o=="string"&&(l=l||"utf8",o=i.from(o,l));for(var c=this._block,u=this._blockSize,f=o.length,h=this._len,p=0;p<f;){for(var g=h%u,y=Math.min(f-p,u-g),m=0;m<y;m++)c[g+m]=o[p+m];p+=y,(h+=y)%u==0&&this._update(c)}return this._len+=f,this},s.prototype.digest=function(o){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var c=8*this._len;if(c<=4294967295)this._block.writeUInt32BE(c,this._blockSize-4);else{var u=(4294967295&c)>>>0,f=(c-u)/4294967296;this._block.writeUInt32BE(f,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var h=this._hash();return o?h.toString(o):h},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},n.exports=s},{"safe-buffer":494}],498:[function(e,n,a){var i=n.exports=function(s){s=s.toLowerCase();var o=i[s];if(!o)throw new Error(s+" is not supported (we accept pull requests)");return new o};i.sha=e("./sha"),i.sha1=e("./sha1"),i.sha224=e("./sha224"),i.sha256=e("./sha256"),i.sha384=e("./sha384"),i.sha512=e("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(e,n,a){var i=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function u(){this.init(),this._w=c,s.call(this,64,56)}function f(p){return p<<30|p>>>2}function h(p,g,y,m){return p===0?g&y|~g&m:p===2?g&y|g&m|y&m:g^y^m}i(u,s),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(p){for(var g,y=this._w,m=0|this._a,v=0|this._b,b=0|this._c,x=0|this._d,S=0|this._e,_=0;_<16;++_)y[_]=p.readInt32BE(4*_);for(;_<80;++_)y[_]=y[_-3]^y[_-8]^y[_-14]^y[_-16];for(var I=0;I<80;++I){var A=~~(I/20),O=0|((g=m)<<5|g>>>27)+h(A,v,b,x)+S+y[I]+l[A];S=x,x=b,b=f(v),v=m,m=O}this._a=m+this._a|0,this._b=v+this._b|0,this._c=b+this._c|0,this._d=x+this._d|0,this._e=S+this._e|0},u.prototype._hash=function(){var p=o.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(e,n,a){var i=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function u(){this.init(),this._w=c,s.call(this,64,56)}function f(g){return g<<5|g>>>27}function h(g){return g<<30|g>>>2}function p(g,y,m,v){return g===0?y&m|~y&v:g===2?y&m|y&v|m&v:y^m^v}i(u,s),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(g){for(var y,m=this._w,v=0|this._a,b=0|this._b,x=0|this._c,S=0|this._d,_=0|this._e,I=0;I<16;++I)m[I]=g.readInt32BE(4*I);for(;I<80;++I)m[I]=(y=m[I-3]^m[I-8]^m[I-14]^m[I-16])<<1|y>>>31;for(var A=0;A<80;++A){var O=~~(A/20),M=f(v)+p(O,b,x,S)+_+m[A]+l[O]|0;_=S,S=x,x=h(b),b=v,v=M}this._a=v+this._a|0,this._b=b+this._b|0,this._c=x+this._c|0,this._d=S+this._d|0,this._e=_+this._e|0},u.prototype._hash=function(){var g=o.allocUnsafe(20);return g.writeInt32BE(0|this._a,0),g.writeInt32BE(0|this._b,4),g.writeInt32BE(0|this._c,8),g.writeInt32BE(0|this._d,12),g.writeInt32BE(0|this._e,16),g},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(e,n,a){var i=e("inherits"),s=e("./sha256"),o=e("./hash"),l=e("safe-buffer").Buffer,c=new Array(64);function u(){this.init(),this._w=c,o.call(this,64,56)}i(u,s),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var f=l.allocUnsafe(28);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f},n.exports=u},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(e,n,a){var i=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=new Array(64);function u(){this.init(),this._w=c,s.call(this,64,56)}function f(m,v,b){return b^m&(v^b)}function h(m,v,b){return m&v|b&(m|v)}function p(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function g(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function y(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}i(u,s),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(m){for(var v,b=this._w,x=0|this._a,S=0|this._b,_=0|this._c,I=0|this._d,A=0|this._e,O=0|this._f,M=0|this._g,z=0|this._h,U=0;U<16;++U)b[U]=m.readInt32BE(4*U);for(;U<64;++U)b[U]=0|(((v=b[U-2])>>>17|v<<15)^(v>>>19|v<<13)^v>>>10)+b[U-7]+y(b[U-15])+b[U-16];for(var D=0;D<64;++D){var T=z+g(A)+f(A,O,M)+l[D]+b[D]|0,R=p(x)+h(x,S,_)|0;z=M,M=O,O=A,A=I+T|0,I=_,_=S,S=x,x=T+R|0}this._a=x+this._a|0,this._b=S+this._b|0,this._c=_+this._c|0,this._d=I+this._d|0,this._e=A+this._e|0,this._f=O+this._f|0,this._g=M+this._g|0,this._h=z+this._h|0},u.prototype._hash=function(){var m=o.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(e,n,a){var i=e("inherits"),s=e("./sha512"),o=e("./hash"),l=e("safe-buffer").Buffer,c=new Array(160);function u(){this.init(),this._w=c,o.call(this,128,112)}i(u,s),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var f=l.allocUnsafe(48);function h(p,g,y){f.writeInt32BE(p,y),f.writeInt32BE(g,y+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),f},n.exports=u},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(e,n,a){var i=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],c=new Array(160);function u(){this.init(),this._w=c,s.call(this,128,112)}function f(S,_,I){return I^S&(_^I)}function h(S,_,I){return S&_|I&(S|_)}function p(S,_){return(S>>>28|_<<4)^(_>>>2|S<<30)^(_>>>7|S<<25)}function g(S,_){return(S>>>14|_<<18)^(S>>>18|_<<14)^(_>>>9|S<<23)}function y(S,_){return(S>>>1|_<<31)^(S>>>8|_<<24)^S>>>7}function m(S,_){return(S>>>1|_<<31)^(S>>>8|_<<24)^(S>>>7|_<<25)}function v(S,_){return(S>>>19|_<<13)^(_>>>29|S<<3)^S>>>6}function b(S,_){return(S>>>19|_<<13)^(_>>>29|S<<3)^(S>>>6|_<<26)}function x(S,_){return S>>>0<_>>>0?1:0}i(u,s),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(S){for(var _=this._w,I=0|this._ah,A=0|this._bh,O=0|this._ch,M=0|this._dh,z=0|this._eh,U=0|this._fh,D=0|this._gh,T=0|this._hh,R=0|this._al,C=0|this._bl,N=0|this._cl,E=0|this._dl,k=0|this._el,P=0|this._fl,q=0|this._gl,H=0|this._hl,L=0;L<32;L+=2)_[L]=S.readInt32BE(4*L),_[L+1]=S.readInt32BE(4*L+4);for(;L<160;L+=2){var K=_[L-30],Y=_[L-30+1],Z=y(K,Y),V=m(Y,K),ee=v(K=_[L-4],Y=_[L-4+1]),B=b(Y,K),F=_[L-14],X=_[L-14+1],te=_[L-32],se=_[L-32+1],ce=V+X|0,ue=Z+F+x(ce,V)|0;ue=(ue=ue+ee+x(ce=ce+B|0,B)|0)+te+x(ce=ce+se|0,se)|0,_[L]=ue,_[L+1]=ce}for(var oe=0;oe<160;oe+=2){ue=_[oe],ce=_[oe+1];var le=h(I,A,O),pe=h(R,C,N),ye=p(I,R),be=p(R,I),Ie=g(z,k),Oe=g(k,z),Me=l[oe],Re=l[oe+1],He=f(z,U,D),qe=f(k,P,q),ct=H+Oe|0,ft=T+Ie+x(ct,H)|0;ft=(ft=(ft=ft+He+x(ct=ct+qe|0,qe)|0)+Me+x(ct=ct+Re|0,Re)|0)+ue+x(ct=ct+ce|0,ce)|0;var St=be+pe|0,Rt=ye+le+x(St,be)|0;T=D,H=q,D=U,q=P,U=z,P=k,z=M+ft+x(k=E+ct|0,E)|0,M=O,E=N,O=A,N=C,A=I,C=R,I=ft+Rt+x(R=ct+St|0,ct)|0}this._al=this._al+R|0,this._bl=this._bl+C|0,this._cl=this._cl+N|0,this._dl=this._dl+E|0,this._el=this._el+k|0,this._fl=this._fl+P|0,this._gl=this._gl+q|0,this._hl=this._hl+H|0,this._ah=this._ah+I+x(this._al,R)|0,this._bh=this._bh+A+x(this._bl,C)|0,this._ch=this._ch+O+x(this._cl,N)|0,this._dh=this._dh+M+x(this._dl,E)|0,this._eh=this._eh+z+x(this._el,k)|0,this._fh=this._fh+U+x(this._fl,P)|0,this._gh=this._gh+D+x(this._gl,q)|0,this._hh=this._hh+T+x(this._hl,H)|0},u.prototype._hash=function(){var S=o.allocUnsafe(64);function _(I,A,O){S.writeInt32BE(I,O),S.writeInt32BE(A,O+4)}return _(this._ah,this._al,0),_(this._bh,this._bl,8),_(this._ch,this._cl,16),_(this._dh,this._dl,24),_(this._eh,this._el,32),_(this._fh,this._fl,40),_(this._gh,this._gl,48),_(this._hh,this._hl,56),S},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(e,n,a){n.exports=s;var i=e("events").EventEmitter;function s(){i.call(this)}e("inherits")(s,i),s.Readable=e("readable-stream/readable.js"),s.Writable=e("readable-stream/writable.js"),s.Duplex=e("readable-stream/duplex.js"),s.Transform=e("readable-stream/transform.js"),s.PassThrough=e("readable-stream/passthrough.js"),s.Stream=s,s.prototype.pipe=function(o,l){var c=this;function u(v){o.writable&&o.write(v)===!1&&c.pause&&c.pause()}function f(){c.readable&&c.resume&&c.resume()}c.on("data",u),o.on("drain",f),o._isStdio||l&&l.end===!1||(c.on("end",p),c.on("close",g));var h=!1;function p(){h||(h=!0,o.end())}function g(){h||(h=!0,typeof o.destroy=="function"&&o.destroy())}function y(v){if(m(),i.listenerCount(this,"error")===0)throw v}function m(){c.removeListener("data",u),o.removeListener("drain",f),c.removeListener("end",p),c.removeListener("close",g),c.removeListener("error",y),o.removeListener("error",y),c.removeListener("end",m),c.removeListener("close",m),o.removeListener("close",m)}return c.on("error",y),o.on("error",y),c.on("end",m),c.on("close",m),o.on("close",m),o.emit("pipe",c),o}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(e,n,a){var i={}.toString;n.exports=Array.isArray||function(s){return i.call(s)=="[object Array]"}},{}],507:[function(e,n,a){n.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,n,a){var i=e("process-nextick-args"),s=Object.keys||function(m){var v=[];for(var b in m)v.push(b);return v};n.exports=p;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");o.inherits(p,l);for(var u=s(c.prototype),f=0;f<u.length;f++){var h=u[f];p.prototype[h]||(p.prototype[h]=c.prototype[h])}function p(m){if(!(this instanceof p))return new p(m);l.call(this,m),c.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",g)}function g(){this.allowHalfOpen||this._writableState.ended||i.nextTick(y,this)}function y(m){m.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),p.prototype._destroy=function(m,v){this.push(null),this.end(),i.nextTick(v,m)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(e,n,a){n.exports=o;var i=e("./_stream_transform"),s=Object.create(e("core-util-is"));function o(l){if(!(this instanceof o))return new o(l);i.call(this,l)}s.inherits=e("inherits"),s.inherits(o,i),o.prototype._transform=function(l,c,u){u(null,l)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(e,n,a){(function(i,s){(function(){var o=e("process-nextick-args");n.exports=I;var l,c=e("isarray");I.ReadableState=_,e("events").EventEmitter;var u=function(H,L){return H.listeners(L).length},f=e("./internal/streams/stream"),h=e("safe-buffer").Buffer,p=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},g=Object.create(e("core-util-is"));g.inherits=e("inherits");var y=e("util"),m=void 0;m=y&&y.debuglog?y.debuglog("stream"):function(){};var v,b=e("./internal/streams/BufferList"),x=e("./internal/streams/destroy");g.inherits(I,f);var S=["error","close","destroy","pause","resume"];function _(H,L){H=H||{};var K=L instanceof(l=l||e("./_stream_duplex"));this.objectMode=!!H.objectMode,K&&(this.objectMode=this.objectMode||!!H.readableObjectMode);var Y=H.highWaterMark,Z=H.readableHighWaterMark,V=this.objectMode?16:16384;this.highWaterMark=Y||Y===0?Y:K&&(Z||Z===0)?Z:V,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=H.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,H.encoding&&(v||(v=e("string_decoder/").StringDecoder),this.decoder=new v(H.encoding),this.encoding=H.encoding)}function I(H){if(l=l||e("./_stream_duplex"),!(this instanceof I))return new I(H);this._readableState=new _(H,this),this.readable=!0,H&&(typeof H.read=="function"&&(this._read=H.read),typeof H.destroy=="function"&&(this._destroy=H.destroy)),f.call(this)}function A(H,L,K,Y,Z){var V,ee=H._readableState;return L===null?(ee.reading=!1,(function(B,F){if(!F.ended){if(F.decoder){var X=F.decoder.end();X&&X.length&&(F.buffer.push(X),F.length+=F.objectMode?1:X.length)}F.ended=!0,z(B)}})(H,ee)):(Z||(V=(function(B,F){var X;te=F,h.isBuffer(te)||te instanceof p||typeof F=="string"||F===void 0||B.objectMode||(X=new TypeError("Invalid non-string/buffer chunk"));var te;return X})(ee,L)),V?H.emit("error",V):ee.objectMode||L&&L.length>0?(typeof L=="string"||ee.objectMode||Object.getPrototypeOf(L)===h.prototype||(L=(function(B){return h.from(B)})(L)),Y?ee.endEmitted?H.emit("error",new Error("stream.unshift() after end event")):O(H,ee,L,!0):ee.ended?H.emit("error",new Error("stream.push() after EOF")):(ee.reading=!1,ee.decoder&&!K?(L=ee.decoder.write(L),ee.objectMode||L.length!==0?O(H,ee,L,!1):D(H,ee)):O(H,ee,L,!1))):Y||(ee.reading=!1)),(function(B){return!B.ended&&(B.needReadable||B.length<B.highWaterMark||B.length===0)})(ee)}function O(H,L,K,Y){L.flowing&&L.length===0&&!L.sync?(H.emit("data",K),H.read(0)):(L.length+=L.objectMode?1:K.length,Y?L.buffer.unshift(K):L.buffer.push(K),L.needReadable&&z(H)),D(H,L)}Object.defineProperty(I.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),I.prototype.destroy=x.destroy,I.prototype._undestroy=x.undestroy,I.prototype._destroy=function(H,L){this.push(null),L(H)},I.prototype.push=function(H,L){var K,Y=this._readableState;return Y.objectMode?K=!0:typeof H=="string"&&((L=L||Y.defaultEncoding)!==Y.encoding&&(H=h.from(H,L),L=""),K=!0),A(this,H,L,!1,K)},I.prototype.unshift=function(H){return A(this,H,null,!0,!1)},I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(H){return v||(v=e("string_decoder/").StringDecoder),this._readableState.decoder=new v(H),this._readableState.encoding=H,this};function M(H,L){return H<=0||L.length===0&&L.ended?0:L.objectMode?1:H!=H?L.flowing&&L.length?L.buffer.head.data.length:L.length:(H>L.highWaterMark&&(L.highWaterMark=(function(K){return K>=8388608?K=8388608:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K})(H)),H<=L.length?H:L.ended?L.length:(L.needReadable=!0,0))}function z(H){var L=H._readableState;L.needReadable=!1,L.emittedReadable||(m("emitReadable",L.flowing),L.emittedReadable=!0,L.sync?o.nextTick(U,H):U(H))}function U(H){m("emit readable"),H.emit("readable"),N(H)}function D(H,L){L.readingMore||(L.readingMore=!0,o.nextTick(T,H,L))}function T(H,L){for(var K=L.length;!L.reading&&!L.flowing&&!L.ended&&L.length<L.highWaterMark&&(m("maybeReadMore read 0"),H.read(0),K!==L.length);)K=L.length;L.readingMore=!1}function R(H){m("readable nexttick read 0"),H.read(0)}function C(H,L){L.reading||(m("resume read 0"),H.read(0)),L.resumeScheduled=!1,L.awaitDrain=0,H.emit("resume"),N(H),L.flowing&&!L.reading&&H.read(0)}function N(H){var L=H._readableState;for(m("flow",L.flowing);L.flowing&&H.read()!==null;);}function E(H,L){return L.length===0?null:(L.objectMode?K=L.buffer.shift():!H||H>=L.length?(K=L.decoder?L.buffer.join(""):L.buffer.length===1?L.buffer.head.data:L.buffer.concat(L.length),L.buffer.clear()):K=(function(Y,Z,V){var ee;return Y<Z.head.data.length?(ee=Z.head.data.slice(0,Y),Z.head.data=Z.head.data.slice(Y)):ee=Y===Z.head.data.length?Z.shift():V?(function(B,F){var X=F.head,te=1,se=X.data;for(B-=se.length;X=X.next;){var ce=X.data,ue=B>ce.length?ce.length:B;if(ue===ce.length?se+=ce:se+=ce.slice(0,B),(B-=ue)===0){ue===ce.length?(++te,X.next?F.head=X.next:F.head=F.tail=null):(F.head=X,X.data=ce.slice(ue));break}++te}return F.length-=te,se})(Y,Z):(function(B,F){var X=h.allocUnsafe(B),te=F.head,se=1;for(te.data.copy(X),B-=te.data.length;te=te.next;){var ce=te.data,ue=B>ce.length?ce.length:B;if(ce.copy(X,X.length-B,0,ue),(B-=ue)===0){ue===ce.length?(++se,te.next?F.head=te.next:F.head=F.tail=null):(F.head=te,te.data=ce.slice(ue));break}++se}return F.length-=se,X})(Y,Z),ee})(H,L.buffer,L.decoder),K);var K}function k(H){var L=H._readableState;if(L.length>0)throw new Error('"endReadable()" called on non-empty stream');L.endEmitted||(L.ended=!0,o.nextTick(P,L,H))}function P(H,L){H.endEmitted||H.length!==0||(H.endEmitted=!0,L.readable=!1,L.emit("end"))}function q(H,L){for(var K=0,Y=H.length;K<Y;K++)if(H[K]===L)return K;return-1}I.prototype.read=function(H){m("read",H),H=parseInt(H,10);var L=this._readableState,K=H;if(H!==0&&(L.emittedReadable=!1),H===0&&L.needReadable&&(L.length>=L.highWaterMark||L.ended))return m("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?k(this):z(this),null;if((H=M(H,L))===0&&L.ended)return L.length===0&&k(this),null;var Y,Z=L.needReadable;return m("need readable",Z),(L.length===0||L.length-H<L.highWaterMark)&&m("length less than watermark",Z=!0),L.ended||L.reading?m("reading or ended",Z=!1):Z&&(m("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(H=M(K,L))),(Y=H>0?E(H,L):null)===null?(L.needReadable=!0,H=0):L.length-=H,L.length===0&&(L.ended||(L.needReadable=!0),K!==H&&L.ended&&k(this)),Y!==null&&this.emit("data",Y),Y},I.prototype._read=function(H){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(H,L){var K=this,Y=this._readableState;switch(Y.pipesCount){case 0:Y.pipes=H;break;case 1:Y.pipes=[Y.pipes,H];break;default:Y.pipes.push(H)}Y.pipesCount+=1,m("pipe count=%d opts=%j",Y.pipesCount,L);var Z=(!L||L.end!==!1)&&H!==i.stdout&&H!==i.stderr?ee:oe;function V(le,pe){m("onunpipe"),le===K&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,m("cleanup"),H.removeListener("close",ce),H.removeListener("finish",ue),H.removeListener("drain",B),H.removeListener("error",se),H.removeListener("unpipe",V),K.removeListener("end",ee),K.removeListener("end",oe),K.removeListener("data",te),F=!0,!Y.awaitDrain||H._writableState&&!H._writableState.needDrain||B())}function ee(){m("onend"),H.end()}Y.endEmitted?o.nextTick(Z):K.once("end",Z),H.on("unpipe",V);var B=(function(le){return function(){var pe=le._readableState;m("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&u(le,"data")&&(pe.flowing=!0,N(le))}})(K);H.on("drain",B);var F=!1,X=!1;function te(le){m("ondata"),X=!1,H.write(le)!==!1||X||((Y.pipesCount===1&&Y.pipes===H||Y.pipesCount>1&&q(Y.pipes,H)!==-1)&&!F&&(m("false write response, pause",Y.awaitDrain),Y.awaitDrain++,X=!0),K.pause())}function se(le){m("onerror",le),oe(),H.removeListener("error",se),u(H,"error")===0&&H.emit("error",le)}function ce(){H.removeListener("finish",ue),oe()}function ue(){m("onfinish"),H.removeListener("close",ce),oe()}function oe(){m("unpipe"),K.unpipe(H)}return K.on("data",te),(function(le,pe,ye){if(typeof le.prependListener=="function")return le.prependListener(pe,ye);le._events&&le._events[pe]?c(le._events[pe])?le._events[pe].unshift(ye):le._events[pe]=[ye,le._events[pe]]:le.on(pe,ye)})(H,"error",se),H.once("close",ce),H.once("finish",ue),H.emit("pipe",K),Y.flowing||(m("pipe resume"),K.resume()),H},I.prototype.unpipe=function(H){var L=this._readableState,K={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return H&&H!==L.pipes||(H||(H=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,H&&H.emit("unpipe",this,K)),this;if(!H){var Y=L.pipes,Z=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var V=0;V<Z;V++)Y[V].emit("unpipe",this,{hasUnpiped:!1});return this}var ee=q(L.pipes,H);return ee===-1||(L.pipes.splice(ee,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),H.emit("unpipe",this,K)),this},I.prototype.on=function(H,L){var K=f.prototype.on.call(this,H,L);if(H==="data")this._readableState.flowing!==!1&&this.resume();else if(H==="readable"){var Y=this._readableState;Y.endEmitted||Y.readableListening||(Y.readableListening=Y.needReadable=!0,Y.emittedReadable=!1,Y.reading?Y.length&&z(this):o.nextTick(R,this))}return K},I.prototype.addListener=I.prototype.on,I.prototype.resume=function(){var H=this._readableState;return H.flowing||(m("resume"),H.flowing=!0,(function(L,K){K.resumeScheduled||(K.resumeScheduled=!0,o.nextTick(C,L,K))})(this,H)),this},I.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(H){var L=this,K=this._readableState,Y=!1;for(var Z in H.on("end",(function(){if(m("wrapped end"),K.decoder&&!K.ended){var ee=K.decoder.end();ee&&ee.length&&L.push(ee)}L.push(null)})),H.on("data",(function(ee){m("wrapped data"),K.decoder&&(ee=K.decoder.write(ee)),K.objectMode&&ee==null||(K.objectMode||ee&&ee.length)&&(L.push(ee)||(Y=!0,H.pause()))})),H)this[Z]===void 0&&typeof H[Z]=="function"&&(this[Z]=(function(ee){return function(){return H[ee].apply(H,arguments)}})(Z));for(var V=0;V<S.length;V++)H.on(S[V],this.emit.bind(this,S[V]));return this._read=function(ee){m("wrapped _read",ee),Y&&(Y=!1,H.resume())},this},Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),I._fromList=E}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(e,n,a){n.exports=l;var i=e("./_stream_duplex"),s=Object.create(e("core-util-is"));function o(f,h){var p=this._transformState;p.transforming=!1;var g=p.writecb;if(!g)return this.emit("error",new Error("write callback called multiple times"));p.writechunk=null,p.writecb=null,h!=null&&this.push(h),g(f);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function l(f){if(!(this instanceof l))return new l(f);i.call(this,f),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",c)}function c(){var f=this;typeof this._flush=="function"?this._flush((function(h,p){u(f,h,p)})):u(this,null,null)}function u(f,h,p){if(h)return f.emit("error",h);if(p!=null&&f.push(p),f._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(f._transformState.transforming)throw new Error("Calling transform done when still transforming");return f.push(null)}s.inherits=e("inherits"),s.inherits(l,i),l.prototype.push=function(f,h){return this._transformState.needTransform=!1,i.prototype.push.call(this,f,h)},l.prototype._transform=function(f,h,p){throw new Error("_transform() is not implemented")},l.prototype._write=function(f,h,p){var g=this._transformState;if(g.writecb=p,g.writechunk=f,g.writeencoding=h,!g.transforming){var y=this._readableState;(g.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},l.prototype._read=function(f){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},l.prototype._destroy=function(f,h){var p=this;i.prototype._destroy.call(this,f,(function(g){h(g),p.emit("close")}))}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(e,n,a){(function(i,s,o){(function(){var l=e("process-nextick-args");function c(D){var T=this;this.next=null,this.entry=null,this.finish=function(){(function(R,C,N){var E=R.entry;for(R.entry=null;E;){var k=E.callback;C.pendingcb--,k(N),E=E.next}C.corkedRequestsFree.next=R})(T,D)}}n.exports=_;var u,f=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?o:l.nextTick;_.WritableState=S;var h=Object.create(e("core-util-is"));h.inherits=e("inherits");var p={deprecate:e("util-deprecate")},g=e("./internal/streams/stream"),y=e("safe-buffer").Buffer,m=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},v,b=e("./internal/streams/destroy");function x(){}function S(D,T){u=u||e("./_stream_duplex"),D=D||{};var R=T instanceof u;this.objectMode=!!D.objectMode,R&&(this.objectMode=this.objectMode||!!D.writableObjectMode);var C=D.highWaterMark,N=D.writableHighWaterMark,E=this.objectMode?16:16384;this.highWaterMark=C||C===0?C:R&&(N||N===0)?N:E,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=D.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){(function(q,H){var L=q._writableState,K=L.sync,Y=L.writecb;if((function(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0})(L),H)(function(V,ee,B,F,X){--ee.pendingcb,B?(l.nextTick(X,F),l.nextTick(U,V,ee),V._writableState.errorEmitted=!0,V.emit("error",F)):(X(F),V._writableState.errorEmitted=!0,V.emit("error",F),U(V,ee))})(q,L,K,H,Y);else{var Z=M(L);Z||L.corked||L.bufferProcessing||!L.bufferedRequest||O(q,L),K?f(A,q,L,Z,Y):A(q,L,Z,Y)}})(T,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function _(D){if(u=u||e("./_stream_duplex"),!(v.call(_,this)||this instanceof u))return new _(D);this._writableState=new S(D,this),this.writable=!0,D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final)),g.call(this)}function I(D,T,R,C,N,E,k){T.writelen=C,T.writecb=k,T.writing=!0,T.sync=!0,R?D._writev(N,T.onwrite):D._write(N,E,T.onwrite),T.sync=!1}function A(D,T,R,C){R||(function(N,E){E.length===0&&E.needDrain&&(E.needDrain=!1,N.emit("drain"))})(D,T),T.pendingcb--,C(),U(D,T)}function O(D,T){T.bufferProcessing=!0;var R=T.bufferedRequest;if(D._writev&&R&&R.next){var C=T.bufferedRequestCount,N=new Array(C),E=T.corkedRequestsFree;E.entry=R;for(var k=0,P=!0;R;)N[k]=R,R.isBuf||(P=!1),R=R.next,k+=1;N.allBuffers=P,I(D,T,!0,T.length,N,"",E.finish),T.pendingcb++,T.lastBufferedRequest=null,E.next?(T.corkedRequestsFree=E.next,E.next=null):T.corkedRequestsFree=new c(T),T.bufferedRequestCount=0}else{for(;R;){var q=R.chunk,H=R.encoding,L=R.callback;if(I(D,T,!1,T.objectMode?1:q.length,q,H,L),R=R.next,T.bufferedRequestCount--,T.writing)break}R===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=R,T.bufferProcessing=!1}function M(D){return D.ending&&D.length===0&&D.bufferedRequest===null&&!D.finished&&!D.writing}function z(D,T){D._final((function(R){T.pendingcb--,R&&D.emit("error",R),T.prefinished=!0,D.emit("prefinish"),U(D,T)}))}function U(D,T){var R=M(T);return R&&((function(C,N){N.prefinished||N.finalCalled||(typeof C._final=="function"?(N.pendingcb++,N.finalCalled=!0,l.nextTick(z,C,N)):(N.prefinished=!0,C.emit("prefinish")))})(D,T),T.pendingcb===0&&(T.finished=!0,D.emit("finish"))),R}h.inherits(_,g),S.prototype.getBuffer=function(){for(var D=this.bufferedRequest,T=[];D;)T.push(D),D=D.next;return T},(function(){try{Object.defineProperty(S.prototype,"buffer",{get:p.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(D){return!!v.call(this,D)||this===_&&D&&D._writableState instanceof S}})):v=function(D){return D instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(D,T,R){var C,N=this._writableState,E=!1,k=!N.objectMode&&(C=D,y.isBuffer(C)||C instanceof m);return k&&!y.isBuffer(D)&&(D=(function(P){return y.from(P)})(D)),typeof T=="function"&&(R=T,T=null),k?T="buffer":T||(T=N.defaultEncoding),typeof R!="function"&&(R=x),N.ended?(function(P,q){var H=new Error("write after end");P.emit("error",H),l.nextTick(q,H)})(this,R):(k||(function(P,q,H,L){var K=!0,Y=!1;return H===null?Y=new TypeError("May not write null values to stream"):typeof H=="string"||H===void 0||q.objectMode||(Y=new TypeError("Invalid non-string/buffer chunk")),Y&&(P.emit("error",Y),l.nextTick(L,Y),K=!1),K})(this,N,D,R))&&(N.pendingcb++,E=(function(P,q,H,L,K,Y){if(!H){var Z=(function(F,X,te){return F.objectMode||F.decodeStrings===!1||typeof X!="string"||(X=y.from(X,te)),X})(q,L,K);L!==Z&&(H=!0,K="buffer",L=Z)}var V=q.objectMode?1:L.length;q.length+=V;var ee=q.length<q.highWaterMark;if(ee||(q.needDrain=!0),q.writing||q.corked){var B=q.lastBufferedRequest;q.lastBufferedRequest={chunk:L,encoding:K,isBuf:H,callback:Y,next:null},B?B.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else I(P,q,!1,V,L,K,Y);return ee})(this,N,k,D,T,R)),E},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,D.writing||D.corked||D.bufferProcessing||!D.bufferedRequest||O(this,D))},_.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(D,T,R){R(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(D,T,R){var C=this._writableState;typeof D=="function"?(R=D,D=null,T=null):typeof T=="function"&&(R=T,T=null),D!=null&&this.write(D,T),C.corked&&(C.corked=1,this.uncork()),C.ending||(function(N,E,k){E.ending=!0,U(N,E),k&&(E.finished?l.nextTick(k):N.once("finish",k)),E.ended=!0,N.writable=!1})(this,C,R)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),_.prototype.destroy=b.destroy,_.prototype._undestroy=b.undestroy,_.prototype._destroy=function(D,T){this.end(),T(D)}}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(e,n,a){var i=e("safe-buffer").Buffer,s=e("util");n.exports=(function(){function o(){(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(l){var c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length},o.prototype.unshift=function(l){var c={data:l,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length},o.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(l){if(this.length===0)return"";for(var c=this.head,u=""+c.data;c=c.next;)u+=l+c.data;return u},o.prototype.concat=function(l){if(this.length===0)return i.alloc(0);for(var c,u,f,h=i.allocUnsafe(l>>>0),p=this.head,g=0;p;)c=p.data,u=h,f=g,c.copy(u,f),g+=p.data.length,p=p.next;return h},o})(),s&&s.inspect&&s.inspect.custom&&(n.exports.prototype[s.inspect.custom]=function(){var o=s.inspect({length:this.length});return this.constructor.name+" "+o})},{"safe-buffer":520,util:188}],514:[function(e,n,a){var i=e("process-nextick-args");function s(o,l){o.emit("error",l)}n.exports={destroy:function(o,l){var c=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(l?l(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,o)):i.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,(function(h){!l&&h?c._writableState?c._writableState.errorEmitted||(c._writableState.errorEmitted=!0,i.nextTick(s,c,h)):i.nextTick(s,c,h):l&&l(h)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(e,n,a){arguments[4][490][0].apply(a,arguments)},{dup:490,events:422}],516:[function(e,n,a){n.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,n,a){(a=n.exports=e("./lib/_stream_readable.js")).Stream=a,a.Readable=a,a.Writable=e("./lib/_stream_writable.js"),a.Duplex=e("./lib/_stream_duplex.js"),a.Transform=e("./lib/_stream_transform.js"),a.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,n,a){n.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,n,a){n.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,n,a){arguments[4][217][0].apply(a,arguments)},{buffer:220,dup:217}],521:[function(e,n,a){arguments[4][218][0].apply(a,arguments)},{dup:218,"safe-buffer":520}],522:[function(e,n,a){arguments[4][218][0].apply(a,arguments)},{dup:218,"safe-buffer":494}],523:[function(e,n,a){(function(i,s){(function(){var o=e("process/browser.js").nextTick,l=Function.prototype.apply,c=Array.prototype.slice,u={},f=0;function h(p,g){this._id=p,this._clearFn=g}a.setTimeout=function(){return new h(l.call(setTimeout,window,arguments),clearTimeout)},a.setInterval=function(){return new h(l.call(setInterval,window,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(p){p.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},a.enroll=function(p,g){clearTimeout(p._idleTimeoutId),p._idleTimeout=g},a.unenroll=function(p){clearTimeout(p._idleTimeoutId),p._idleTimeout=-1},a._unrefActive=a.active=function(p){clearTimeout(p._idleTimeoutId);var g=p._idleTimeout;g>=0&&(p._idleTimeoutId=setTimeout((function(){p._onTimeout&&p._onTimeout()}),g))},a.setImmediate=typeof i=="function"?i:function(p){var g=f++,y=!(arguments.length<2)&&c.call(arguments,1);return u[g]=!0,o((function(){u[g]&&(y?p.apply(null,y):p.call(null),a.clearImmediate(g))})),g},a.clearImmediate=typeof s=="function"?s:function(p){delete u[p]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(e,n,a){(function(i){(function(){function s(o){try{if(!i.localStorage)return!1}catch{return!1}var l=i.localStorage[o];return l!=null&&String(l).toLowerCase()==="true"}n.exports=function(o,l){if(s("noDeprecation"))return o;var c=!1;return function(){if(!c){if(s("throwDeprecation"))throw new Error(l);s("traceDeprecation")?console.trace(l):console.warn(l),c=!0}return o.apply(this,arguments)}}}).call(this)}).call(this,typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(e,n,a){typeof Object.create=="function"?n.exports=function(i,s){i.super_=s,i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(i,s){i.super_=s;var o=function(){};o.prototype=s.prototype,i.prototype=new o,i.prototype.constructor=i}},{}],526:[function(e,n,a){n.exports=function(i){return i&&typeof i=="object"&&typeof i.copy=="function"&&typeof i.fill=="function"&&typeof i.readUInt8=="function"}},{}],527:[function(e,n,a){(function(i,s){(function(){var o=/%[sdj%]/g;a.format=function(N){if(!S(N)){for(var E=[],k=0;k<arguments.length;k++)E.push(u(arguments[k]));return E.join(" ")}k=1;for(var P=arguments,q=P.length,H=String(N).replace(o,(function(K){if(K==="%%")return"%";if(k>=q)return K;switch(K){case"%s":return String(P[k++]);case"%d":return Number(P[k++]);case"%j":try{return JSON.stringify(P[k++])}catch{return"[Circular]"}default:return K}})),L=P[k];k<q;L=P[++k])b(L)||!A(L)?H+=" "+L:H+=" "+u(L);return H},a.deprecate=function(N,E){if(_(s.process))return function(){return a.deprecate(N,E).apply(this,arguments)};if(i.noDeprecation===!0)return N;var k=!1;return function(){if(!k){if(i.throwDeprecation)throw new Error(E);i.traceDeprecation?console.trace(E):console.error(E),k=!0}return N.apply(this,arguments)}};var l,c={};function u(N,E){var k={seen:[],stylize:h};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),v(E)?k.showHidden=E:E&&a._extend(k,E),_(k.showHidden)&&(k.showHidden=!1),_(k.depth)&&(k.depth=2),_(k.colors)&&(k.colors=!1),_(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=f),p(k,N,k.depth)}function f(N,E){var k=u.styles[E];return k?"\x1B["+u.colors[k][0]+"m"+N+"\x1B["+u.colors[k][1]+"m":N}function h(N,E){return N}function p(N,E,k){if(N.customInspect&&E&&z(E.inspect)&&E.inspect!==a.inspect&&(!E.constructor||E.constructor.prototype!==E)){var P=E.inspect(k,N);return S(P)||(P=p(N,P,k)),P}var q=(function(B,F){if(_(F))return B.stylize("undefined","undefined");if(S(F)){var X="'"+JSON.stringify(F).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(X,"string")}if(x(F))return B.stylize(""+F,"number");if(v(F))return B.stylize(""+F,"boolean");if(b(F))return B.stylize("null","null")})(N,E);if(q)return q;var H=Object.keys(E),L=(function(B){var F={};return B.forEach((function(X,te){F[X]=!0})),F})(H);if(N.showHidden&&(H=Object.getOwnPropertyNames(E)),M(E)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return g(E);if(H.length===0){if(z(E)){var K=E.name?": "+E.name:"";return N.stylize("[Function"+K+"]","special")}if(I(E))return N.stylize(RegExp.prototype.toString.call(E),"regexp");if(O(E))return N.stylize(Date.prototype.toString.call(E),"date");if(M(E))return g(E)}var Y,Z="",V=!1,ee=["{","}"];return m(E)&&(V=!0,ee=["[","]"]),z(E)&&(Z=" [Function"+(E.name?": "+E.name:"")+"]"),I(E)&&(Z=" "+RegExp.prototype.toString.call(E)),O(E)&&(Z=" "+Date.prototype.toUTCString.call(E)),M(E)&&(Z=" "+g(E)),H.length!==0||V&&E.length!=0?k<0?I(E)?N.stylize(RegExp.prototype.toString.call(E),"regexp"):N.stylize("[Object]","special"):(N.seen.push(E),Y=V?(function(B,F,X,te,se){for(var ce=[],ue=0,oe=F.length;ue<oe;++ue)C(F,String(ue))?ce.push(y(B,F,X,te,String(ue),!0)):ce.push("");return se.forEach((function(le){le.match(/^\d+$/)||ce.push(y(B,F,X,te,le,!0))})),ce})(N,E,k,L,H):H.map((function(B){return y(N,E,k,L,B,V)})),N.seen.pop(),(function(B,F,X){return B.reduce((function(te,se){return se.indexOf(`
`)>=0,te+se.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?X[0]+(F===""?"":F+`
 `)+" "+B.join(`,
  `)+" "+X[1]:X[0]+F+" "+B.join(", ")+" "+X[1]})(Y,Z,ee)):ee[0]+Z+ee[1]}function g(N){return"["+Error.prototype.toString.call(N)+"]"}function y(N,E,k,P,q,H){var L,K,Y;if((Y=Object.getOwnPropertyDescriptor(E,q)||{value:E[q]}).get?K=Y.set?N.stylize("[Getter/Setter]","special"):N.stylize("[Getter]","special"):Y.set&&(K=N.stylize("[Setter]","special")),C(P,q)||(L="["+q+"]"),K||(N.seen.indexOf(Y.value)<0?(K=b(k)?p(N,Y.value,null):p(N,Y.value,k-1)).indexOf(`
`)>-1&&(K=H?K.split(`
`).map((function(Z){return"  "+Z})).join(`
`).substr(2):`
`+K.split(`
`).map((function(Z){return"   "+Z})).join(`
`)):K=N.stylize("[Circular]","special")),_(L)){if(H&&q.match(/^\d+$/))return K;(L=JSON.stringify(""+q)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(L=L.substr(1,L.length-2),L=N.stylize(L,"name")):(L=L.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),L=N.stylize(L,"string"))}return L+": "+K}function m(N){return Array.isArray(N)}function v(N){return typeof N=="boolean"}function b(N){return N===null}function x(N){return typeof N=="number"}function S(N){return typeof N=="string"}function _(N){return N===void 0}function I(N){return A(N)&&U(N)==="[object RegExp]"}function A(N){return typeof N=="object"&&N!==null}function O(N){return A(N)&&U(N)==="[object Date]"}function M(N){return A(N)&&(U(N)==="[object Error]"||N instanceof Error)}function z(N){return typeof N=="function"}function U(N){return Object.prototype.toString.call(N)}function D(N){return N<10?"0"+N.toString(10):N.toString(10)}a.debuglog=function(N){if(_(l)&&(l=i.env.NODE_DEBUG||""),N=N.toUpperCase(),!c[N])if(new RegExp("\\b"+N+"\\b","i").test(l)){var E=i.pid;c[N]=function(){var k=a.format.apply(a,arguments);console.error("%s %d: %s",N,E,k)}}else c[N]=function(){};return c[N]},a.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},a.isArray=m,a.isBoolean=v,a.isNull=b,a.isNullOrUndefined=function(N){return N==null},a.isNumber=x,a.isString=S,a.isSymbol=function(N){return typeof N=="symbol"},a.isUndefined=_,a.isRegExp=I,a.isObject=A,a.isDate=O,a.isError=M,a.isFunction=z,a.isPrimitive=function(N){return N===null||typeof N=="boolean"||typeof N=="number"||typeof N=="string"||typeof N=="symbol"||N===void 0},a.isBuffer=e("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var N=new Date,E=[D(N.getHours()),D(N.getMinutes()),D(N.getSeconds())].join(":");return[N.getDate(),T[N.getMonth()],E].join(" ")}function C(N,E){return Object.prototype.hasOwnProperty.call(N,E)}a.log=function(){console.log("%s - %s",R(),a.format.apply(a,arguments))},a.inherits=e("inherits"),a._extend=function(N,E){if(!E||!A(E))return N;for(var k=Object.keys(E),P=k.length;P--;)N[k[P]]=E[k[P]];return N}}).call(this)}).call(this,e("_process"),typeof rn<"u"?rn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(a,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(a,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(a,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(a,"NIL",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(a,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(a,"validate",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(a,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(a,"parse",{enumerable:!0,get:function(){return p.default}});var i=g(e("./v1.js")),s=g(e("./v3.js")),o=g(e("./v4.js")),l=g(e("./v5.js")),c=g(e("./nil.js")),u=g(e("./version.js")),f=g(e("./validate.js")),h=g(e("./stringify.js")),p=g(e("./parse.js"));function g(y){return y&&y.__esModule?y:{default:y}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(e,n,a){function i(p){return 14+(p+64>>>9<<4)+1}function s(p,g){const y=(65535&p)+(65535&g);return(p>>16)+(g>>16)+(y>>16)<<16|65535&y}function o(p,g,y,m,v,b){return s((x=s(s(g,p),s(m,b)))<<(S=v)|x>>>32-S,y);var x,S}function l(p,g,y,m,v,b,x){return o(g&y|~g&m,p,g,v,b,x)}function c(p,g,y,m,v,b,x){return o(g&m|y&~m,p,g,v,b,x)}function u(p,g,y,m,v,b,x){return o(g^y^m,p,g,v,b,x)}function f(p,g,y,m,v,b,x){return o(y^(g|~m),p,g,v,b,x)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var h=function(p){if(typeof p=="string"){const g=unescape(encodeURIComponent(p));p=new Uint8Array(g.length);for(let y=0;y<g.length;++y)p[y]=g.charCodeAt(y)}return(function(g){const y=[],m=32*g.length;for(let v=0;v<m;v+=8){const b=g[v>>5]>>>v%32&255,x=parseInt("0123456789abcdef".charAt(b>>>4&15)+"0123456789abcdef".charAt(15&b),16);y.push(x)}return y})((function(g,y){g[y>>5]|=128<<y%32,g[i(y)-1]=y;let m=1732584193,v=-271733879,b=-1732584194,x=271733878;for(let S=0;S<g.length;S+=16){const _=m,I=v,A=b,O=x;m=l(m,v,b,x,g[S],7,-680876936),x=l(x,m,v,b,g[S+1],12,-389564586),b=l(b,x,m,v,g[S+2],17,606105819),v=l(v,b,x,m,g[S+3],22,-1044525330),m=l(m,v,b,x,g[S+4],7,-176418897),x=l(x,m,v,b,g[S+5],12,1200080426),b=l(b,x,m,v,g[S+6],17,-1473231341),v=l(v,b,x,m,g[S+7],22,-45705983),m=l(m,v,b,x,g[S+8],7,1770035416),x=l(x,m,v,b,g[S+9],12,-1958414417),b=l(b,x,m,v,g[S+10],17,-42063),v=l(v,b,x,m,g[S+11],22,-1990404162),m=l(m,v,b,x,g[S+12],7,1804603682),x=l(x,m,v,b,g[S+13],12,-40341101),b=l(b,x,m,v,g[S+14],17,-1502002290),v=l(v,b,x,m,g[S+15],22,1236535329),m=c(m,v,b,x,g[S+1],5,-165796510),x=c(x,m,v,b,g[S+6],9,-1069501632),b=c(b,x,m,v,g[S+11],14,643717713),v=c(v,b,x,m,g[S],20,-373897302),m=c(m,v,b,x,g[S+5],5,-701558691),x=c(x,m,v,b,g[S+10],9,38016083),b=c(b,x,m,v,g[S+15],14,-660478335),v=c(v,b,x,m,g[S+4],20,-405537848),m=c(m,v,b,x,g[S+9],5,568446438),x=c(x,m,v,b,g[S+14],9,-1019803690),b=c(b,x,m,v,g[S+3],14,-187363961),v=c(v,b,x,m,g[S+8],20,1163531501),m=c(m,v,b,x,g[S+13],5,-1444681467),x=c(x,m,v,b,g[S+2],9,-51403784),b=c(b,x,m,v,g[S+7],14,1735328473),v=c(v,b,x,m,g[S+12],20,-1926607734),m=u(m,v,b,x,g[S+5],4,-378558),x=u(x,m,v,b,g[S+8],11,-2022574463),b=u(b,x,m,v,g[S+11],16,1839030562),v=u(v,b,x,m,g[S+14],23,-35309556),m=u(m,v,b,x,g[S+1],4,-1530992060),x=u(x,m,v,b,g[S+4],11,1272893353),b=u(b,x,m,v,g[S+7],16,-155497632),v=u(v,b,x,m,g[S+10],23,-1094730640),m=u(m,v,b,x,g[S+13],4,681279174),x=u(x,m,v,b,g[S],11,-358537222),b=u(b,x,m,v,g[S+3],16,-722521979),v=u(v,b,x,m,g[S+6],23,76029189),m=u(m,v,b,x,g[S+9],4,-640364487),x=u(x,m,v,b,g[S+12],11,-421815835),b=u(b,x,m,v,g[S+15],16,530742520),v=u(v,b,x,m,g[S+2],23,-995338651),m=f(m,v,b,x,g[S],6,-198630844),x=f(x,m,v,b,g[S+7],10,1126891415),b=f(b,x,m,v,g[S+14],15,-1416354905),v=f(v,b,x,m,g[S+5],21,-57434055),m=f(m,v,b,x,g[S+12],6,1700485571),x=f(x,m,v,b,g[S+3],10,-1894986606),b=f(b,x,m,v,g[S+10],15,-1051523),v=f(v,b,x,m,g[S+1],21,-2054922799),m=f(m,v,b,x,g[S+8],6,1873313359),x=f(x,m,v,b,g[S+15],10,-30611744),b=f(b,x,m,v,g[S+6],15,-1560198380),v=f(v,b,x,m,g[S+13],21,1309151649),m=f(m,v,b,x,g[S+4],6,-145523070),x=f(x,m,v,b,g[S+11],10,-1120210379),b=f(b,x,m,v,g[S+2],15,718787259),v=f(v,b,x,m,g[S+9],21,-343485551),m=s(m,_),v=s(v,I),b=s(b,A),x=s(x,O)}return[m,v,b,x]})((function(g){if(g.length===0)return[];const y=8*g.length,m=new Uint32Array(i(y));for(let v=0;v<y;v+=8)m[v>>5]|=(255&g[v/8])<<v%32;return m})(p),8*p.length))};a.default=h},{}],530:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,s=(i=e("./validate.js"))&&i.__esModule?i:{default:i},o=function(l){if(!(0,s.default)(l))throw TypeError("Invalid UUID");let c;const u=new Uint8Array(16);return u[0]=(c=parseInt(l.slice(0,8),16))>>>24,u[1]=c>>>16&255,u[2]=c>>>8&255,u[3]=255&c,u[4]=(c=parseInt(l.slice(9,13),16))>>>8,u[5]=255&c,u[6]=(c=parseInt(l.slice(14,18),16))>>>8,u[7]=255&c,u[8]=(c=parseInt(l.slice(19,23),16))>>>8,u[9]=255&c,u[10]=(c=parseInt(l.slice(24,36),16))/1099511627776&255,u[11]=c/4294967296&255,u[12]=c>>>24&255,u[13]=c>>>16&255,u[14]=c>>>8&255,u[15]=255&c,u};a.default=o},{"./validate.js":541}],532:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(e,n,a){let i;Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)};const s=new Uint8Array(16)},{}],534:[function(e,n,a){function i(l,c,u,f){switch(l){case 0:return c&u^~c&f;case 1:return c^u^f;case 2:return c&u^c&f^u&f;case 3:return c^u^f}}function s(l,c){return l<<c|l>>>32-c}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=function(l){const c=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof l=="string"){const g=unescape(encodeURIComponent(l));l=[];for(let y=0;y<g.length;++y)l.push(g.charCodeAt(y))}else Array.isArray(l)||(l=Array.prototype.slice.call(l));l.push(128);const f=l.length/4+2,h=Math.ceil(f/16),p=new Array(h);for(let g=0;g<h;++g){const y=new Uint32Array(16);for(let m=0;m<16;++m)y[m]=l[64*g+4*m]<<24|l[64*g+4*m+1]<<16|l[64*g+4*m+2]<<8|l[64*g+4*m+3];p[g]=y}p[h-1][14]=8*(l.length-1)/Math.pow(2,32),p[h-1][14]=Math.floor(p[h-1][14]),p[h-1][15]=8*(l.length-1)&4294967295;for(let g=0;g<h;++g){const y=new Uint32Array(80);for(let _=0;_<16;++_)y[_]=p[g][_];for(let _=16;_<80;++_)y[_]=s(y[_-3]^y[_-8]^y[_-14]^y[_-16],1);let m=u[0],v=u[1],b=u[2],x=u[3],S=u[4];for(let _=0;_<80;++_){const I=Math.floor(_/20),A=s(m,5)+i(I,v,b,x)+S+c[I]+y[_]>>>0;S=x,x=b,b=s(v,30)>>>0,v=m,m=A}u[0]=u[0]+m>>>0,u[1]=u[1]+v>>>0,u[2]=u[2]+b>>>0,u[3]=u[3]+x>>>0,u[4]=u[4]+S>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]};a.default=o},{}],535:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,s=(i=e("./validate.js"))&&i.__esModule?i:{default:i};const o=[];for(let c=0;c<256;++c)o.push((c+256).toString(16).substr(1));var l=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const f=(o[c[u+0]]+o[c[u+1]]+o[c[u+2]]+o[c[u+3]]+"-"+o[c[u+4]]+o[c[u+5]]+"-"+o[c[u+6]]+o[c[u+7]]+"-"+o[c[u+8]]+o[c[u+9]]+"-"+o[c[u+10]]+o[c[u+11]]+o[c[u+12]]+o[c[u+13]]+o[c[u+14]]+o[c[u+15]]).toLowerCase();if(!(0,s.default)(f))throw TypeError("Stringified UUID is invalid");return f};a.default=l},{"./validate.js":541}],536:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=o(e("./rng.js")),s=o(e("./stringify.js"));function o(p){return p&&p.__esModule?p:{default:p}}let l,c,u=0,f=0;var h=function(p,g,y){let m=g&&y||0;const v=g||new Array(16);let b=(p=p||{}).node||l,x=p.clockseq!==void 0?p.clockseq:c;if(b==null||x==null){const M=p.random||(p.rng||i.default)();b==null&&(b=l=[1|M[0],M[1],M[2],M[3],M[4],M[5]]),x==null&&(x=c=16383&(M[6]<<8|M[7]))}let S=p.msecs!==void 0?p.msecs:Date.now(),_=p.nsecs!==void 0?p.nsecs:f+1;const I=S-u+(_-f)/1e4;if(I<0&&p.clockseq===void 0&&(x=x+1&16383),(I<0||S>u)&&p.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=S,f=_,c=x,S+=122192928e5;const A=(1e4*(268435455&S)+_)%4294967296;v[m++]=A>>>24&255,v[m++]=A>>>16&255,v[m++]=A>>>8&255,v[m++]=255&A;const O=S/4294967296*1e4&268435455;v[m++]=O>>>8&255,v[m++]=255&O,v[m++]=O>>>24&15|16,v[m++]=O>>>16&255,v[m++]=x>>>8|128,v[m++]=255&x;for(let M=0;M<6;++M)v[m+M]=b[M];return g||(0,s.default)(v)};a.default=h},{"./rng.js":533,"./stringify.js":535}],537:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=o(e("./v35.js")),s=o(e("./md5.js"));function o(c){return c&&c.__esModule?c:{default:c}}var l=(0,i.default)("v3",48,s.default);a.default=l},{"./md5.js":529,"./v35.js":538}],538:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u,f,h){function p(g,y,m,v){if(typeof g=="string"&&(g=(function(x){x=unescape(encodeURIComponent(x));const S=[];for(let _=0;_<x.length;++_)S.push(x.charCodeAt(_));return S})(g)),typeof y=="string"&&(y=(0,s.default)(y)),y.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let b=new Uint8Array(16+g.length);if(b.set(y),b.set(g,y.length),b=h(b),b[6]=15&b[6]|f,b[8]=63&b[8]|128,m){v=v||0;for(let x=0;x<16;++x)m[v+x]=b[x];return m}return(0,i.default)(b)}try{p.name=u}catch{}return p.DNS=l,p.URL=c,p},a.URL=a.DNS=void 0;var i=o(e("./stringify.js")),s=o(e("./parse.js"));function o(u){return u&&u.__esModule?u:{default:u}}const l="6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.DNS=l;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";a.URL=c},{"./parse.js":531,"./stringify.js":535}],539:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=o(e("./rng.js")),s=o(e("./stringify.js"));function o(c){return c&&c.__esModule?c:{default:c}}var l=function(c,u,f){const h=(c=c||{}).random||(c.rng||i.default)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,u){f=f||0;for(let p=0;p<16;++p)u[f+p]=h[p];return u}return(0,s.default)(h)};a.default=l},{"./rng.js":533,"./stringify.js":535}],540:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=o(e("./v35.js")),s=o(e("./sha1.js"));function o(c){return c&&c.__esModule?c:{default:c}}var l=(0,i.default)("v5",80,s.default);a.default=l},{"./sha1.js":534,"./v35.js":538}],541:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,s=(i=e("./regex.js"))&&i.__esModule?i:{default:i},o=function(l){return typeof l=="string"&&s.default.test(l)};a.default=o},{"./regex.js":532}],542:[function(e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,s=(i=e("./validate.js"))&&i.__esModule?i:{default:i},o=function(l){if(!(0,s.default)(l))throw TypeError("Invalid UUID");return parseInt(l.substr(14,1),16)};a.default=o},{"./validate.js":541}],543:[function(e,n,a){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR=`	
\r ---`,a.S=` 	\r
`,a.NAME_START_CHAR=":A-Z_a-z-----------",a.NAME_CHAR="-"+a.NAME_START_CHAR+".0-9--",a.CHAR_RE=new RegExp("^["+a.CHAR+"]$","u"),a.S_RE=new RegExp("^["+a.S+"]+$","u"),a.NAME_START_CHAR_RE=new RegExp("^["+a.NAME_START_CHAR+"]$","u"),a.NAME_CHAR_RE=new RegExp("^["+a.NAME_CHAR+"]$","u"),a.NAME_RE=new RegExp("^["+a.NAME_START_CHAR+"]["+a.NAME_CHAR+"]*$","u"),a.NMTOKEN_RE=new RegExp("^["+a.NAME_CHAR+"]+$","u");function i(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}a.S_LIST=[32,10,13,9],a.isChar=function(s){return s>=32&&s<=55295||s===10||s===13||s===9||s>=57344&&s<=65533||s>=65536&&s<=1114111},a.isS=function(s){return s===32||s===10||s===13||s===9},a.isNameStartChar=i,a.isNameChar=function(s){return i(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],544:[function(e,n,a){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR="---",a.RESTRICTED_CHAR="-\b\v\f---",a.S=` 	\r
`,a.NAME_START_CHAR=":A-Z_a-z-----------",a.NAME_CHAR="-"+a.NAME_START_CHAR+".0-9--",a.CHAR_RE=new RegExp("^["+a.CHAR+"]$","u"),a.RESTRICTED_CHAR_RE=new RegExp("^["+a.RESTRICTED_CHAR+"]$","u"),a.S_RE=new RegExp("^["+a.S+"]+$","u"),a.NAME_START_CHAR_RE=new RegExp("^["+a.NAME_START_CHAR+"]$","u"),a.NAME_CHAR_RE=new RegExp("^["+a.NAME_CHAR+"]$","u"),a.NAME_RE=new RegExp("^["+a.NAME_START_CHAR+"]["+a.NAME_CHAR+"]*$","u"),a.NMTOKEN_RE=new RegExp("^["+a.NAME_CHAR+"]+$","u");function i(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}a.S_LIST=[32,10,13,9],a.isChar=function(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},a.isRestrictedChar=function(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159},a.isCharAndNotRestricted=function(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},a.isS=function(s){return s===32||s===10||s===13||s===9},a.isNameStartChar=i,a.isNameChar=function(s){return i(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],545:[function(e,n,a){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function i(s){return s>=65&&s<=90||s===95||s>=97&&s<=122||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}Object.defineProperty(a,"__esModule",{value:!0}),a.NC_NAME_START_CHAR="A-Z_a-z------------",a.NC_NAME_CHAR="-"+a.NC_NAME_START_CHAR+".0-9--",a.NC_NAME_START_CHAR_RE=new RegExp("^["+a.NC_NAME_START_CHAR+"]$","u"),a.NC_NAME_CHAR_RE=new RegExp("^["+a.NC_NAME_CHAR+"]$","u"),a.NC_NAME_RE=new RegExp("^["+a.NC_NAME_START_CHAR+"]["+a.NC_NAME_CHAR+"]*$","u"),a.isNCNameStartChar=i,a.isNCNameChar=function(s){return i(s)||s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}]},{},[15])(15)}))})(OS)),OS.exports}var ywe=gwe();const vwe=In(ywe);async function bwe(r,t="Sheet1",e="export.xlsx"){try{const n=new vwe.Workbook,a=n.addWorksheet(t);if(!r||r.length===0){const l=await n.xlsx.writeBuffer();tR(l,e);return}const i=Object.keys(r[0]);a.addRow(i);const s=a.getRow(1);s.font={bold:!0},s.eachCell(l=>{l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}},l.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),r.forEach(l=>{const c=i.map(u=>l[u]);a.addRow(c)}),(a.columns||[]).forEach(l=>{var c;if(l){let u=0;(c=l==null?void 0:l.eachCell)==null||c.call(l,{includeEmpty:!0},f=>{const h=f.value?f.value.toString().length:10;h>u&&(u=h)}),l.width!==void 0&&(l.width=u<10?10:u+2)}});const o=await n.xlsx.writeBuffer();tR(o,e)}catch(n){throw console.error("Error exporting to Excel:",n),n}}function tR(r,t){const e=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,a.click(),window.URL.revokeObjectURL(n)}function dz(r,t){let e;try{const a=r.period.split(" - ")[0].trim();console.log("Period parts:",a);const i=new Date(a);console.log("Parsed date:",i),isNaN(i.getTime())?(console.warn("Invalid date, using current date as fallback"),e=qt(new Date,"MMyyyy")):e=qt(i,"MMyyyy")}catch(a){console.error("Error parsing date:",a),e=qt(new Date,"MMyyyy")}return console.log("Using month/year for GSTR3B:",e),{gstin:t,ret_period:e,sup_details:{osup_det:{txval:Number(r.taxableValue.toFixed(2)),camt:Number(r.cgst.toFixed(2)),samt:Number(r.sgst.toFixed(2)),iamt:Number(r.igst.toFixed(2)),csamt:Number(r.cess.toFixed(2))},osup_zero:{txval:0},osup_nil_exmp:{txval:0},isup_rev:{txval:0,camt:0,samt:0,iamt:0,csamt:0},osup_nongst:{txval:0}},inter_sup:{unreg_details:[],comp_details:[],uin_details:[]},itc_elg:{itc_avl:[{ty:"IMPG",iamt:0,camt:0,samt:0,csamt:0}],itc_rev:[{ty:"RUL",iamt:0,camt:0,samt:0,csamt:0}],itc_net:{iamt:0,camt:0,samt:0,csamt:0},itc_inelg:[{ty:"RUL",iamt:0,camt:0,samt:0,csamt:0}]},inward_sup:{isup_details:[{ty:"GST",inter:0,intra:0}]}}}function fz(r,t){let e;try{const a=r.period.split(" - ")[0].trim();console.log("Purchase period parts:",a);const i=new Date(a);console.log("Purchase parsed date:",i),isNaN(i.getTime())?(console.warn("Invalid purchase date, using current date as fallback"),e=qt(new Date,"MMyyyy")):e=qt(i,"MMyyyy")}catch(a){console.error("Error parsing purchase date:",a),e=qt(new Date,"MMyyyy")}return console.log("Using month/year for Purchase GSTR3B:",e),{gstin:t,ret_period:e,sup_details:{osup_det:{txval:0,camt:0,samt:0,iamt:0,csamt:0},osup_zero:{txval:0},osup_nil_exmp:{txval:0},isup_rev:{txval:0,camt:0,samt:0,iamt:0,csamt:0},osup_nongst:{txval:0}},inter_sup:{unreg_details:[],comp_details:[],uin_details:[]},itc_elg:{itc_avl:[{ty:"IMPS",iamt:Number(r.igst.toFixed(2)),camt:Number(r.cgst.toFixed(2)),samt:Number(r.sgst.toFixed(2)),csamt:Number(r.cess.toFixed(2))}],itc_rev:[{ty:"RUL",iamt:0,camt:0,samt:0,csamt:0}],itc_net:{iamt:Number(r.igst.toFixed(2)),camt:Number(r.cgst.toFixed(2)),samt:Number(r.sgst.toFixed(2)),csamt:Number(r.cess.toFixed(2))},itc_inelg:[{ty:"RUL",iamt:0,camt:0,samt:0,csamt:0}]},inward_sup:{isup_details:[{ty:"GST",inter:Number(r.igst.toFixed(2)),intra:Number((r.cgst+r.sgst).toFixed(2))}]}}}function hz(r,t){const{salesSummary:e,purchaseSummary:n}=r;let a=(e==null?void 0:e.period)||(n==null?void 0:n.period)||"",i;try{const o=a.split(" - ")[0].trim();console.log("Consolidated period parts:",o);const l=new Date(o);console.log("Consolidated parsed date:",l),isNaN(l.getTime())?(console.warn("Invalid date, using current date as fallback"),i=qt(new Date,"MMyyyy")):i=qt(l,"MMyyyy")}catch(o){console.error("Error parsing date:",o),i=qt(new Date,"MMyyyy")}return console.log("Using month/year for Consolidated GSTR3B:",i),{gstin:t,ret_period:i,sup_details:{osup_det:{txval:Number(((e==null?void 0:e.taxableValue)||0).toFixed(2)),camt:Number(((e==null?void 0:e.cgst)||0).toFixed(2)),samt:Number(((e==null?void 0:e.sgst)||0).toFixed(2)),iamt:Number(((e==null?void 0:e.igst)||0).toFixed(2)),csamt:Number(((e==null?void 0:e.cess)||0).toFixed(2))},osup_zero:{txval:0},osup_nil_exmp:{txval:0},isup_rev:{txval:0,camt:0,samt:0,iamt:0,csamt:0},osup_nongst:{txval:0}},inter_sup:{unreg_details:[],comp_details:[],uin_details:[]},itc_elg:{itc_avl:[{ty:"IMPS",iamt:Number(((n==null?void 0:n.igst)||0).toFixed(2)),camt:Number(((n==null?void 0:n.cgst)||0).toFixed(2)),samt:Number(((n==null?void 0:n.sgst)||0).toFixed(2)),csamt:Number(((n==null?void 0:n.cess)||0).toFixed(2))}],itc_rev:[{ty:"RUL",iamt:0,camt:0,samt:0,csamt:0}],itc_net:{iamt:Number(((n==null?void 0:n.igst)||0).toFixed(2)),camt:Number(((n==null?void 0:n.cgst)||0).toFixed(2)),samt:Number(((n==null?void 0:n.sgst)||0).toFixed(2)),csamt:Number(((n==null?void 0:n.cess)||0).toFixed(2))},itc_inelg:[{ty:"RUL",iamt:0,camt:0,samt:0,csamt:0}]},inward_sup:{isup_details:[{ty:"GST",inter:Number(((n==null?void 0:n.igst)||0).toFixed(2)),intra:Number((((n==null?void 0:n.cgst)||0)+((n==null?void 0:n.sgst)||0)).toFixed(2))}]}}}function Rg(r,t){try{console.log("Preparing to download JSON file:",t);const e=JSON.stringify(r,null,2),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=t,document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),URL.revokeObjectURL(a)},100),console.log("Download process completed")}catch(e){throw console.error("Error in downloadJsonFile:",e),e}}function xwe(r,t,e){const n=hz(r,t),i=`gstr3b-${e.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}-${qt(new Date,"yyyy-MM-dd")}.json`;return{data:n,fileName:i}}const wwe=({startDate:r,endDate:t},e)=>{const{theme:n}=zr(),a=n==="dark",{selectedCompany:i}=ln(),[s,o]=ie.useState(!0),[l,c]=ie.useState(null),[u,f]=ie.useState(null),[h,p]=ie.useState("");Je.useImperativeHandle(e,()=>({getSummary:()=>u})),ie.useEffect(()=>{i&&p(i.tax_number||"")},[i]),ie.useEffect(()=>{g()},[r,t]);const g=async()=>{if(!i){c("Please select a company first"),o(!1);return}o(!0),c(null);try{const v=zc(Cp(r)),b=hf(Cp(t)),{data:x,error:S}=await De.from("purchase_entries").select(`
          id,
          subtotal,
          tax,
          total,
          tax_type,
          cgst,
          sgst,
          igst,
          cess,
          created_at,
          purchase_items (
            quantity,
            purchase_price,
            discount_amount
          )
        `).eq("company_id",i.id).gte("created_at",v.toISOString()).lte("created_at",b.toISOString()).returns();if(S)throw console.error("Supabase error fetching purchases:",S),S.message?new Error(`Database error: ${S.message}`):new Error("Network error. Please check your connection and try again.");if(!x)throw new Error("No data returned from database");let _=0;for(const A of x){let O=0;for(const z of A.purchase_items){const U=(z.purchase_price||0)*(z.quantity||0),D=z.discount_amount||0;O+=U-D}_+=O}const I={period:`${qt(v,"dd MMM yyyy")} - ${qt(b,"dd MMM yyyy")}`,taxableValue:_,cgst:x.reduce((A,O)=>A+(O.cgst||0),0),sgst:x.reduce((A,O)=>A+(O.sgst||0),0),igst:x.reduce((A,O)=>A+(O.igst||0),0),cess:x.reduce((A,O)=>A+(O.cess||0),0),totalTax:x.reduce((A,O)=>A+(O.tax||0),0)};f(I)}catch(v){console.error("Error fetching purchase GST summary:",v);const b=v.message||"Network error. Please check your connection and try again.";c(b),Ce.error(b)}finally{o(!1)}},y=v=>`${v.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,m=()=>{if(u)try{const v=fz(u,h),b=`gstr3b-purchase-${qt(new Date,"yyyy-MM-dd")}.json`;Rg(v,b),Ce.success("GSTR 3B JSON file generated successfully")}catch(v){console.error("Error generating GSTR 3B JSON:",v),Ce.error("Failed to generate GSTR 3B JSON file")}};return s?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):l?d.jsx("div",{className:`p-4 rounded-md ${a?"bg-red-900/30 text-red-200":"bg-red-100 text-red-700"}`,children:d.jsx("p",{children:l})}):u?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:`p-6 rounded-lg shadow-sm ${a?"bg-gray-800":"bg-white"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Purchase GST Summary"}),d.jsx(lt,{variant:"secondary",onClick:m,leftIcon:d.jsx(wg,{className:"w-4 h-4"}),size:"sm",children:"Export GSTR 3B JSON"})]}),i&&d.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-gray-700":"bg-gray-50"} flex items-center mb-4`,children:[d.jsx(Pi,{className:"w-4 h-4 mr-2 text-gray-400"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"font-medium",children:i.name}),i.tax_number&&d.jsxs("span",{className:`ml-3 ${a?"text-gray-300":"text-gray-600"}`,children:["GSTIN: ",i.tax_number]})]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-4 mb-4",children:[d.jsxs("p",{className:`${a?"text-gray-400":"text-gray-600"}`,children:["Period: ",u.period]}),i!=null&&i.tax_number?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"GSTIN:"}),d.jsx("span",{className:`px-3 py-1 rounded-md ${a?"bg-gray-700 text-white":"bg-gray-100"}`,children:h})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"purchase-gstin",className:"text-sm font-medium",children:"GSTIN:"}),d.jsx("input",{id:"purchase-gstin",type:"text",value:h,onChange:v=>p(v.target.value),placeholder:"Enter GSTIN",className:`px-3 py-1 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:`min-w-full ${a?"text-gray-200":"text-gray-700"}`,children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${a?"bg-gray-700":"bg-gray-100"}`,children:[d.jsx("th",{className:"px-4 py-2 text-left",children:"Component"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"Taxable Value"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.taxableValue)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"CGST"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.cgst)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"SGST"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.sgst)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"IGST"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.igst)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"CESS"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.cess)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b font-semibold`,children:[d.jsx("td",{className:"px-4 py-2",children:"Total Tax"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.totalTax)})]}),d.jsxs("tr",{className:`${a?"bg-gray-700/50":"bg-gray-100"} font-semibold`,children:[d.jsx("td",{className:"px-4 py-2",children:"Total Value (Taxable + Tax)"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.taxableValue+u.totalTax)})]})]})]})}),d.jsxs("div",{className:"mt-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notes:"}),d.jsxs("ul",{className:`list-disc pl-5 ${a?"text-gray-300":"text-gray-600"}`,children:[d.jsx("li",{children:"CGST and SGST apply to intra-state transactions (same state)"}),d.jsx("li",{children:"IGST applies to inter-state transactions (different states)"}),d.jsx("li",{children:"CESS is an additional tax on luxury or sin goods (28% GST category)"}),d.jsx("li",{children:"This report can be used for filing GST purchase returns"})]})]})]})}):d.jsx("div",{className:`p-4 rounded-md ${a?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:d.jsx("p",{children:"No purchase data available for the selected period."})})},_we=Je.forwardRef(wwe),Swe=({startDate:r,endDate:t},e)=>{const{theme:n}=zr(),a=n==="dark",{selectedCompany:i}=ln(),[s,o]=ie.useState(!0),[l,c]=ie.useState(null),[u,f]=ie.useState(null),[h,p]=ie.useState("");Je.useImperativeHandle(e,()=>({getSummary:()=>u})),ie.useEffect(()=>{i&&p(i.tax_number||"")},[i]),ie.useEffect(()=>{g()},[r,t]);const g=async()=>{if(!i){c("Please select a company first"),o(!1);return}o(!0),c(null);try{const v=zc(Cp(r)),b=hf(Cp(t)),{data:x,error:S}=await De.from("sales").select(`
          id,
          subtotal,
          tax,
          total,
          tax_type,
          cgst,
          sgst,
          igst,
          cess,
          created_at,
          sale_items (
            quantity,
            price,
            discount_amount
          )
        `).eq("company_id",i.id).gte("created_at",v.toISOString()).lte("created_at",b.toISOString()).returns();if(S)throw console.error("Supabase error fetching sales:",S),S.message?new Error(`Database error: ${S.message}`):new Error("Network error. Please check your connection and try again.");if(!x)throw new Error("No data returned from database");let _=0;for(const A of x){let O=0;for(const z of A.sale_items){const U=(z.price||0)*(z.quantity||0),D=z.discount_amount||0;O+=U-D}_+=O}const I={period:`${qt(v,"dd MMM yyyy")} - ${qt(b,"dd MMM yyyy")}`,taxableValue:_,cgst:x.reduce((A,O)=>A+(O.cgst||0),0),sgst:x.reduce((A,O)=>A+(O.sgst||0),0),igst:x.reduce((A,O)=>A+(O.igst||0),0),cess:x.reduce((A,O)=>A+(O.cess||0),0),totalTax:x.reduce((A,O)=>A+(O.tax||0),0)};f(I)}catch(v){console.error("Error fetching sales GST summary:",v);const b=v.message||"Network error. Please check your connection and try again.";c(b),Ce.error(b)}finally{o(!1)}},y=v=>`${v.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,m=()=>{if(u)try{const v=dz(u,h),b=`gstr3b-sales-${qt(new Date,"yyyy-MM-dd")}.json`;Rg(v,b),Ce.success("GSTR 3B JSON file generated successfully")}catch(v){console.error("Error generating GSTR 3B JSON:",v),Ce.error("Failed to generate GSTR 3B JSON file")}};return s?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):l?d.jsx("div",{className:`p-4 rounded-md ${a?"bg-red-900/30 text-red-200":"bg-red-100 text-red-700"}`,children:d.jsx("p",{children:l})}):u?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:`p-6 rounded-lg shadow-sm ${a?"bg-gray-800":"bg-white"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Sales GST Summary"}),d.jsx(lt,{variant:"secondary",onClick:m,leftIcon:d.jsx(wg,{className:"w-4 h-4"}),size:"sm",children:"Export GSTR 3B JSON"})]}),i&&d.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-gray-700":"bg-gray-50"} flex items-center mb-4`,children:[d.jsx(Pi,{className:"w-4 h-4 mr-2 text-gray-400"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"font-medium",children:i.name}),i.tax_number&&d.jsxs("span",{className:`ml-3 ${a?"text-gray-300":"text-gray-600"}`,children:["GSTIN: ",i.tax_number]})]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-4 mb-4",children:[d.jsxs("p",{className:`${a?"text-gray-400":"text-gray-600"}`,children:["Period: ",u.period]}),i!=null&&i.tax_number?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"GSTIN:"}),d.jsx("span",{className:`px-3 py-1 rounded-md ${a?"bg-gray-700 text-white":"bg-gray-100"}`,children:h})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"sales-gstin",className:"text-sm font-medium",children:"GSTIN:"}),d.jsx("input",{id:"sales-gstin",type:"text",value:h,onChange:v=>p(v.target.value),placeholder:"Enter GSTIN",className:`px-3 py-1 rounded-md border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:`min-w-full ${a?"text-gray-200":"text-gray-700"}`,children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${a?"bg-gray-700":"bg-gray-100"}`,children:[d.jsx("th",{className:"px-4 py-2 text-left",children:"Component"}),d.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"Taxable Value"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.taxableValue)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"CGST"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.cgst)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"SGST"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.sgst)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"IGST"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.igst)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"px-4 py-2",children:"CESS"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.cess)})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b font-semibold`,children:[d.jsx("td",{className:"px-4 py-2",children:"Total Tax"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.totalTax)})]}),d.jsxs("tr",{className:`${a?"bg-gray-700/50":"bg-gray-100"} font-semibold`,children:[d.jsx("td",{className:"px-4 py-2",children:"Total Value (Taxable + Tax)"}),d.jsx("td",{className:"px-4 py-2 text-right",children:y(u.taxableValue+u.totalTax)})]})]})]})}),d.jsxs("div",{className:"mt-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notes:"}),d.jsxs("ul",{className:`list-disc pl-5 ${a?"text-gray-300":"text-gray-600"}`,children:[d.jsx("li",{children:"CGST and SGST apply to intra-state transactions (same state)"}),d.jsx("li",{children:"IGST applies to inter-state transactions (different states)"}),d.jsx("li",{children:"CESS is an additional tax on luxury or sin goods (28% GST category)"}),d.jsx("li",{children:"This report can be used for filing GST sales returns"})]})]})]})}):d.jsx("div",{className:`p-4 rounded-md ${a?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:d.jsx("p",{children:"No sales data available for the selected period."})})},Nwe=Je.forwardRef(Swe),jwe=()=>{const{theme:r}=zr(),t=r==="dark",{selectedCompany:e}=ln(),[n,a]=ie.useState("sales"),[i,s]=ie.useState(qt(new Date().setDate(1),"yyyy-MM-dd")),[o,l]=ie.useState(qt(new Date,"yyyy-MM-dd")),[c,u]=ie.useState(!1),[f,h]=ie.useState(null),[p,g]=ie.useState(""),y=ie.useRef(null),m=ie.useRef(null);ie.useEffect(()=>{e&&g(e.tax_number||"")},[e]);const v=O=>`${O.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,b=O=>{const z=O.toFixed(2).split("."),U=z[0],D=z[1];let T="",R=0;for(let C=U.length-1;C>=0;C--)R>0&&R%3===0&&(T=","+T),T=U[C]+T,R++;return`Rs. ${T}.${D}`},x=()=>{var M,z;const O=n==="sales"?(M=m.current)==null?void 0:M.getSummary():(z=y.current)==null?void 0:z.getSummary();if(!O){Ce.error("No data available to export");return}try{const U=[{Title:`GST ${n==="sales"?"Sales":"Purchase"} Summary Report`,Value:""},{Title:"Period",Value:O.period},{Title:"Taxable Value",Value:v(O.taxableValue)},{Title:"CGST",Value:v(O.cgst)},{Title:"SGST",Value:v(O.sgst)},{Title:"IGST",Value:v(O.igst)},{Title:"CESS",Value:v(O.cess)},{Title:"Total Tax",Value:v(O.totalTax)},{Title:"Total Value",Value:v(O.taxableValue+O.totalTax)}],D=`gst-${n}-summary-${qt(new Date,"yyyy-MM-dd")}.xlsx`;bwe(U,"GST Summary",D),Ce.success("Excel report generated successfully")}catch(U){console.error("Error generating Excel:",U),Ce.error("Failed to generate Excel report")}},S=()=>{var M,z;const O=n==="sales"?(M=m.current)==null?void 0:M.getSummary():(z=y.current)==null?void 0:z.getSummary();if(!O){Ce.error("No data available to export");return}try{const U=new Fr,D=U.internal.pageSize.width,T=U.internal.pageSize.height;let R=20;if(e){U.setFontSize(20),U.setFont("helvetica","bold"),U.text(e.name||"Company",D/2,R,{align:"center"}),R+=10,U.setFontSize(12),U.setFont("helvetica","normal"),e.tax_number&&(U.text(`GSTIN: ${e.tax_number}`,D/2,R,{align:"center"}),R+=6);const L=[];if(e.address_street&&L.push(e.address_street),e.address_city&&L.push(e.address_city),e.address_state&&L.push(e.address_state),e.address_postal_code&&L.push(e.address_postal_code),L.length>0){const K=L.join(", ");U.text(K,D/2,R,{align:"center"}),R+=8}}U.setFontSize(16),U.setFont("helvetica","bold"),U.text(`GST ${n==="sales"?"Sales":"Purchase"} Summary Report`,D/2,R,{align:"center"}),R+=8,U.setFontSize(12),U.setFont("helvetica","normal"),U.text(`Period: ${O.period}`,D/2,R,{align:"center"}),R+=15;const C=[["Component","Amount (Rs.)"]],N=[["Taxable Value",b(O.taxableValue)],["CGST",b(O.cgst)],["SGST",b(O.sgst)],["IGST",b(O.igst)],["CESS",b(O.cess)],["Total Tax",b(O.totalTax)],["Total Value (Taxable + Tax)",b(O.taxableValue+O.totalTax)]];Ic(U,{startY:R,head:C,body:N,theme:"grid",headStyles:{fillColor:[22,160,133],textColor:[255,255,255],fontStyle:"bold",fontSize:11},bodyStyles:{textColor:[0,0,0],fontSize:10},columnStyles:{0:{cellWidth:70},1:{cellWidth:50,halign:"right",fontStyle:"bold"}},styles:{cellPadding:3},didDrawPage:function(L){const K=U.getNumberOfPages();U.setFontSize(10),U.setTextColor(100),U.text(`Page ${L.pageNumber} of ${K}`,D-20,T-10,{align:"right"})}});const E=U.lastAutoTable.finalY+15;U.setFontSize(10),U.setTextColor(100),U.text(`Generated on: ${qt(new Date,"dd MMM yyyy hh:mm a")}`,15,E),U.text(`Report Type: GST ${n==="sales"?"Sales":"Purchase"} Summary`,D-15,E,{align:"right"});const k=E+12;U.setFontSize(9),U.setTextColor(0),U.setFont("helvetica","italic"),U.text("Notes:",15,k);const P=[" CGST and SGST apply to intra-state transactions (same state)"," IGST applies to inter-state transactions (different states)"," CESS is an additional tax on luxury or sin goods (28% GST category)",` This report represents ${n==="sales"?"sales":"purchase"} data for GST filing purposes`," Values are calculated based on taxable amounts and applicable GST rates"];P.forEach((L,K)=>{U.text(L,20,k+5+K*5)});const q=k+10+P.length*5;U.setFontSize(8),U.setTextColor(100),U.setFont("helvetica","normal"),U.text("This is a computer-generated document and does not require a signature.",D/2,q,{align:"center"});const H=`gst-${n}-summary-${qt(new Date,"yyyy-MM-dd")}.pdf`;U.save(H),Ce.success("PDF report generated successfully")}catch(U){console.error("Error generating PDF:",U),Ce.error("Failed to generate PDF report")}},_=()=>{var M,z;const O=n==="sales"?(M=m.current)==null?void 0:M.getSummary():(z=y.current)==null?void 0:z.getSummary();if(!O){Ce.error("No data available to export");return}try{const U=n==="sales"?dz(O,p):fz(O,p),D=`gstr3b-${n}-${qt(new Date,"yyyy-MM-dd")}.json`;Rg(U,D),Ce.success("GSTR 3B JSON file generated successfully")}catch(U){console.error("Error generating GSTR 3B JSON:",U),Ce.error("Failed to generate GSTR 3B JSON file")}},I=async()=>{var O,M;try{console.log("Starting consolidated export...");const z=(O=m.current)==null?void 0:O.getSummary();console.log("Sales data:",z);let U=(M=y.current)==null?void 0:M.getSummary();if(console.log("Purchase data from ref:",U),U||(U=f,console.log("Purchase data from state:",U)),!U){console.log("No purchase data available, fetching from database..."),u(!0),Ce.loading("Fetching purchase data...");try{console.log("Fetching purchase data for period:",i,"to",o);const{data:R,error:C}=await De.from("purchase_entries").select(`
              id,
              subtotal,
              tax,
              total,
              tax_type,
              cgst,
              sgst,
              igst,
              cess,
              created_at,
              purchase_items (
                quantity,
                purchase_price,
                discount_amount,
                discount_percentage
              )
            `).eq("company_id",(e==null?void 0:e.id)||"").gte("created_at",zc(new Date(i)).toISOString()).lte("created_at",hf(new Date(o)).toISOString()),N=R;if(C)throw console.error("Supabase error:",C),C;if(console.log("Fetched purchase data:",N),N&&N.length>0){const E=`${qt(new Date(i),"dd MMM yyyy")} - ${qt(new Date(o),"dd MMM yyyy")}`;console.log("Purchase period:",E);let k=0;if(N)for(const P of N){let q=0;for(const L of P.purchase_items){const K=(L.purchase_price||0)*(L.quantity||0),Y=L.discount_amount||0;q+=K-Y}k+=q}U={period:E,taxableValue:k,cgst:N?N.reduce((P,q)=>P+(q.cgst||0),0):0,sgst:N?N.reduce((P,q)=>P+(q.sgst||0),0):0,igst:N?N.reduce((P,q)=>P+(q.igst||0),0):0,cess:N?N.reduce((P,q)=>P+(q.cess||0),0):0,totalTax:N?N.reduce((P,q)=>P+(q.tax||0),0):0},console.log("Calculated purchase summary:",U),h(U)}else console.log("No purchase data found for the selected period")}catch(R){console.error("Error fetching purchase data:",R),Ce.error("Failed to fetch purchase data"),u(!1);return}finally{Ce.dismiss(),u(!1)}}console.log("Preparing combined data for GSTR 3B JSON...");const D={period:`${qt(new Date(i),"dd MMM yyyy")} - ${qt(new Date(o),"dd MMM yyyy")}`,taxableValue:0,cgst:0,sgst:0,igst:0,cess:0,totalTax:0},T={salesSummary:z||D,purchaseSummary:U||D};console.log("Combined data:",T),console.log("GSTIN:",p);try{const R=hz(T,p);console.log("Generated JSON data:",R);const C=`gstr3b-consolidated-${qt(new Date,"yyyy-MM-dd")}.json`;console.log("Downloading file:",C),Rg(R,C),Ce.success("Consolidated GSTR 3B JSON file generated successfully")}catch(R){console.error("Error in generateConsolidatedGSTR3BJson:",R),Ce.error("Error generating consolidated JSON: "+(R.message||"Unknown error"))}}catch(z){console.error("Error generating consolidated GSTR 3B JSON:",z),Ce.error("Failed to generate consolidated GSTR 3B JSON file")}},A=async()=>{try{if(!e){Ce.error("Please select a company first");return}u(!0),Ce.loading("Generating company-specific GSTR 3B report...");const{data:O,error:M}=await De.from("sales").select(`
          id,
          subtotal,
          tax,
          total,
          tax_type,
          cgst,
          sgst,
          igst,
          cess,
          created_at,
          sale_items (
            quantity,
            price,
            discount_amount,
            discount_percentage
          )
        `).eq("company_id",e.id).gte("created_at",zc(new Date(i)).toISOString()).lte("created_at",hf(new Date(o)).toISOString()),z=O;if(M)throw M;const{data:U,error:D}=await De.from("purchase_entries").select(`
          id,
          subtotal,
          tax,
          total,
          tax_type,
          cgst,
          sgst,
          igst,
          cess,
          created_at,
          purchase_items (
            quantity,
            purchase_price,
            discount_amount,
            discount_percentage
          )
        `).eq("company_id",e.id).gte("created_at",zc(new Date(i)).toISOString()).lte("created_at",hf(new Date(o)).toISOString()),T=U;if(D)throw D;const R=`${qt(new Date(i),"dd MMM yyyy")} - ${qt(new Date(o),"dd MMM yyyy")}`;let C=0;if(z)for(const L of z){let K=0;for(const Z of L.sale_items){const V=(Z.price||0)*(Z.quantity||0),ee=Z.discount_amount||0;K+=V-ee}C+=K}const N={period:R,taxableValue:C,cgst:z?z.reduce((L,K)=>L+(K.cgst||0),0):0,sgst:z?z.reduce((L,K)=>L+(K.sgst||0),0):0,igst:z?z.reduce((L,K)=>L+(K.igst||0),0):0,cess:z?z.reduce((L,K)=>L+(K.cess||0),0):0,totalTax:z?z.reduce((L,K)=>L+(K.tax||0),0):0};let E=0;if(T)for(const L of T){let K=0;for(const Z of L.purchase_items){const V=(Z.purchase_price||0)*(Z.quantity||0),ee=Z.discount_amount||0;K+=V-ee}E+=K}const k={period:R,taxableValue:E,cgst:T?T.reduce((L,K)=>L+(K.cgst||0),0):0,sgst:T?T.reduce((L,K)=>L+(K.sgst||0),0):0,igst:T?T.reduce((L,K)=>L+(K.igst||0),0):0,cess:T?T.reduce((L,K)=>L+(K.cess||0),0):0,totalTax:T?T.reduce((L,K)=>L+(K.tax||0),0):0},P={salesSummary:N,purchaseSummary:k},{data:q,fileName:H}=xwe(P,p||e.tax_number||"",e.name);Rg(q,H),Ce.success(`GSTR 3B JSON file for ${e.name} generated successfully`)}catch(O){console.error("Error generating company-specific GSTR 3B JSON:",O),Ce.error("Failed to generate company GSTR 3B JSON: "+(O.message||"Unknown error"))}finally{u(!1),Ce.dismiss()}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"GST Reports"}),d.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[d.jsxs(lt,{variant:"secondary",size:"sm",onClick:x,disabled:c,children:[d.jsx("span",{className:"mr-2 h-4 w-4 font-bold",children:"XLS"}),"Export Excel"]}),d.jsxs(lt,{variant:"secondary",size:"sm",onClick:_,disabled:c,children:[d.jsx(wg,{className:"mr-2 h-4 w-4"}),"Export GSTR 3B JSON"]}),d.jsxs(lt,{variant:"secondary",size:"sm",onClick:I,disabled:c,children:[d.jsx(wg,{className:"mr-2 h-4 w-4"}),"Export Consolidated GSTR 3B JSON"]}),d.jsxs(lt,{variant:"secondary",size:"sm",onClick:A,disabled:c||!e,children:[d.jsx(wg,{className:"mr-2 h-4 w-4"}),"Export Company GSTR 3B"]}),d.jsxs(lt,{variant:"secondary",size:"sm",onClick:S,disabled:c,children:[d.jsx(pD,{className:"mr-2 h-4 w-4"}),"Export PDF"]})]})]}),e&&d.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"} flex items-center`,children:[d.jsx(Pi,{className:"w-5 h-5 mr-3 text-gray-400"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:e.name}),d.jsxs("div",{className:"flex flex-wrap gap-x-4 text-sm mt-1",children:[e.tax_number&&d.jsxs("span",{className:t?"text-gray-300":"text-gray-600",children:["GSTIN: ",e.tax_number]}),e.address_city&&e.address_state&&d.jsxs("span",{className:t?"text-gray-300":"text-gray-600",children:[e.address_city,", ",e.address_state]})]})]})]})]}),d.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("button",{className:`py-2 px-4 font-medium flex items-center ${n==="sales"?`border-b-2 border-blue-500 text-blue-600 ${t?"dark:text-blue-400":""}`:`text-gray-500 hover:text-gray-700 ${t?"dark:text-gray-400 dark:hover:text-gray-300":""}`}`,onClick:()=>a("sales"),children:[d.jsx(ui,{className:"w-4 h-4 mr-2"}),"Sales GST"]}),d.jsxs("button",{className:`py-2 px-4 font-medium flex items-center ${n==="purchases"?`border-b-2 border-blue-500 text-blue-600 ${t?"dark:text-blue-400":""}`:`text-gray-500 hover:text-gray-700 ${t?"dark:text-gray-400 dark:hover:text-gray-300":""}`}`,onClick:()=>a("purchases"),children:[d.jsx(Tp,{className:"w-4 h-4 mr-2"}),"Purchase GST"]})]}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4 mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx($g,{className:"w-5 h-5"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"date",value:i,onChange:O=>s(O.target.value),className:`px-3 py-1 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{children:"to"}),d.jsx("input",{type:"date",value:o,onChange:O=>l(O.target.value),className:`px-3 py-1 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),e!=null&&e.tax_number?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"GSTIN:"}),d.jsx("span",{className:`px-3 py-1 rounded-md ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:p})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"gstin",className:"text-sm font-medium",children:"GSTIN:"}),d.jsx("input",{id:"gstin",type:"text",value:p,onChange:O=>g(O.target.value),placeholder:"Enter GSTIN",className:`px-3 py-1 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),n==="sales"?d.jsx(Nwe,{ref:m,startDate:i,endDate:o}):d.jsx(_we,{ref:y,startDate:i,endDate:o})]})]})},rR=()=>{const{theme:r}=zr(),{selectedCompany:t}=ln(),e=r==="dark",[n,a]=ie.useState(null),[,i]=ie.useState([]),[s,o]=ie.useState(!0),[l,c]=ie.useState(!1),[u,f]=ie.useState(null),[h,p]=ie.useState(!1);ie.useEffect(()=>{g()},[t]);const g=async()=>{o(!0);try{let v=[];try{v=await jN(t==null?void 0:t.id),i(v)}catch(b){console.error("Error loading tax rates:",b),Ce.error(`Failed to load tax rates: ${b.message||"Unknown error"}`),i([])}try{let b=null;if(t!=null&&t.id&&(b=await NN(t.id)),b)a(b),f(JSON.parse(JSON.stringify(b))),p(!1),console.log("Successfully loaded tax settings:",b);else{const x={tax_type:"split",tax_inclusive:!1,cess_enabled:!1,company_id:(t==null?void 0:t.id)||""};a(x),f(x),p(!1)}}catch(b){console.error("Error loading tax settings:",b),Ce.error(`Failed to load GST settings: ${b.message||"Unknown error"}`);const x={tax_type:"split",tax_inclusive:!1,cess_enabled:!1,company_id:(t==null?void 0:t.id)||""};a(x),f(x),p(!1)}}catch(v){console.error("Unexpected error in loadSettings:",v),Ce.error(`An unexpected error occurred: ${v.message||"Unknown error"}`);const b={tax_type:"split",tax_inclusive:!1,cess_enabled:!1,company_id:(t==null?void 0:t.id)||""};a(b),f(b),p(!1)}finally{o(!1)}},y=async()=>{if(console.log("Save button clicked. Settings:",n,"hasChanges:",h),!n||!h){console.log("Not saving because settings is null or hasChanges is false");return}if(!window.confirm(`Are you sure you want to save these GST settings?

These changes will affect GST calculations for current and future sales and purchases.

Click OK to save changes.`)){console.log("User cancelled save operation");return}c(!0),console.log("Saving settings with ID:",n.id);try{if(!n.company_id&&(t!=null&&t.id)&&(n.company_id=t.id,console.log("Using selected company ID:",n.company_id)),!n.company_id)throw new Error("No company selected. Please select a company first.");const v={...n,company_id:n.company_id,updated_at:new Date().toISOString()};console.log("Saving tax settings with data:",v);let b;if(n.id){const{data:S,error:_}=await De.from("tax_settings").update(v).eq("id",n.id).select();if(_)throw _;b=S}else{const{data:S,error:_}=await De.from("tax_settings").insert(v).select();if(_)throw _;b=S}console.log("Save operation result:",b),!b||b.length===0?console.warn("No data returned after save operation, but no error occurred. Assuming success."):(console.log("Save successful:",b),a(b[0]));const x=[];n.tax_type!==(u==null?void 0:u.tax_type)&&x.push(`Tax type changed to ${n.tax_type==="split"?"CGST + SGST":"IGST"}`),n.tax_inclusive!==(u==null?void 0:u.tax_inclusive)&&x.push(`GST pricing changed to ${n.tax_inclusive?"inclusive":"exclusive"}`),n.cess_enabled!==(u==null?void 0:u.cess_enabled)&&x.push(`CESS ${n.cess_enabled?"enabled":"disabled"}`),Ce.success(d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:"GST settings updated successfully"}),d.jsx("p",{className:"text-sm mt-1",children:"Changes will apply to current and future sales and purchases."}),x.length>0&&d.jsx("ul",{className:"mt-1 text-sm",children:x.map((S,_)=>d.jsxs("li",{children:[" ",S]},_))})]}),{duration:6e3}),p(!1),b&&b[0]&&f(JSON.parse(JSON.stringify(b[0]))),await g()}catch(v){console.error("Error saving GST settings:",v);const b=v.message||v.details||v.hint||"Failed to save GST settings. Please try again.";Ce.error(b)}finally{c(!1)}},m=()=>{try{const v=Aa.book_new(),b=n?[["GST Configuration"],["Setting","Value"],["Tax Type",n.tax_type==="split"?"CGST + SGST":"IGST"],["Tax Inclusive",n.tax_inclusive?"Yes":"No"],["CESS Enabled",n.cess_enabled?"Yes":"No"]]:[],x=Aa.aoa_to_sheet(b);Aa.book_append_sheet(v,x,"Tax Settings"),N2(v,`gst-settings-${new Date().toISOString().split("T")[0]}.xlsx`),Ce.success("Settings exported successfully")}catch(v){console.error("Error exporting settings:",v),Ce.error("Failed to export settings")}};return s?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"GST Settings"}),d.jsx("p",{className:`mt-1 ${e?"text-gray-400":"text-gray-500"}`,children:"Configure GST tax rates and calculation preferences"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[h&&d.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-2 rounded-md flex items-center animate-pulse",children:[d.jsx("span",{className:"inline-block w-3 h-3 bg-yellow-500 rounded-full mr-2"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:"Unsaved changes"}),d.jsx("p",{className:"text-xs",children:"Changes will affect GST calculations in sales and purchases"})]})]}),d.jsx(lt,{variant:"secondary",onClick:m,leftIcon:d.jsx(hD,{className:"w-4 h-4"}),children:"Export Settings"}),d.jsx(lt,{variant:"primary",onClick:y,disabled:!h||l,leftIcon:h?d.jsx(bN,{className:"w-5 h-5"}):d.jsx(bD,{className:"w-4 h-4"}),className:`transition-all duration-200 ${h?"opacity-100 transform scale-100 bg-green-600 hover:bg-green-700 font-bold text-lg px-6 py-3 border-2 border-green-400":"opacity-50 transform scale-95"}`,isLoading:l,children:h?"SAVE GST SETTINGS":"Save GST Settings"})]})]}),d.jsx("div",{className:"grid grid-cols-1 gap-6",children:d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Tax Configuration"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax Calculation Type"}),d.jsxs("select",{value:n==null?void 0:n.tax_type,onChange:v=>{const b=v.target.value;console.log("Tax type changed to:",b),p(!0),console.log("hasChanges set to true"),a(x=>x?{...x,tax_type:b}:null)},className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"split",children:"CGST + SGST (Same State)"}),d.jsx("option",{value:"integrated",children:"IGST (Interstate)"}),d.jsx("option",{value:"none",children:"Nill Tax"})]}),d.jsx("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Choose CGST + SGST for intra-state transactions, IGST for inter-state transactions"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:n==null?void 0:n.tax_inclusive,onChange:v=>{const b=v.target.checked;p(!0),a(x=>x?{...x,tax_inclusive:b}:null)},className:"rounded border-gray-300"}),d.jsx("span",{children:"GST Inclusive Pricing"})]}),d.jsx("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"When enabled, product prices will include GST"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:n==null?void 0:n.cess_enabled,onChange:v=>{const b=v.target.checked;p(!0),a(x=>x?{...x,cess_enabled:b}:null)},className:"rounded border-gray-300"}),d.jsx("span",{children:"Enable CESS"})]}),d.jsx("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Apply CESS for applicable products (28% GST category)"})]}),d.jsx("div",{className:`p-4 rounded-md ${e?"bg-blue-900/20":"bg-blue-50"} border border-blue-200`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(kp,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-blue-700 dark:text-blue-400",children:"GST Calculation Rules"}),d.jsxs("ul",{className:`mt-2 text-sm space-y-1 ${e?"text-gray-300":"text-gray-600"}`,children:[d.jsx("li",{children:" CGST + SGST: Equal split of tax rate for intra-state transactions"}),d.jsx("li",{children:" IGST: Full tax rate for inter-state transactions"}),d.jsx("li",{children:" CESS: Additional 15% for 28% GST category (if enabled)"})]})]})]})})]})]})})]})},kwe=({templateType:r,initialTemplate:t,onSave:e,onCancel:n})=>{const{theme:a}=zr(),i=a==="dark",{selectedCompany:s}=ln(),[o,l]=ie.useState(""),[c,u]=ie.useState("UTILITY"),[f,h]=ie.useState("en"),[p,g]=ie.useState([{type:"body",text:"",variables:[]}]),[y,m]=ie.useState(!1),[v,b]=ie.useState(!1);ie.useEffect(()=>{t?(l(t.name),u(t.category),h(t.language),g(t.components)):(l(r),S(r)),x()},[t,r]);const x=async()=>{if(s!=null&&s.id){b(!0);try{const D=await HF(r,s.id);D&&(l(D.name),u(D.category),h(D.language),g(D.components))}catch(D){console.error("Error loading template:",D)}finally{b(!1)}}},S=D=>{switch(D){case"sales_invoice":g([{type:"body",text:` New Invoice from {{business_name}}! 

Invoice #: {{invoice_number}}
Date: {{invoice_date}}
Total Amount: {{total_amount}}

View your invoice: [Invoice Link]

Thank you for your purchase!`,variables:[{type:"text",key:"business_name",label:"Business Name",defaultValue:"{{business_name}}"},{type:"text",key:"invoice_number",label:"Invoice Number",defaultValue:"{{invoice_number}}"},{type:"text",key:"invoice_date",label:"Invoice Date",defaultValue:"{{invoice_date}}"},{type:"text",key:"total_amount",label:"Total Amount",defaultValue:"{{total_amount}}"}]}]);break;case"payment_receipt":g([{type:"body",text:` Payment Received! 

Dear {{customer_name}},

We've received your payment of {{amount}} on {{payment_date}}.

Transaction ID: {{transaction_id}}
Payment Method: {{payment_method}}

Thank you for your payment!

{{footer_message}}`,variables:[{type:"text",key:"customer_name",label:"Customer Name",defaultValue:"{{customer_name}}"},{type:"text",key:"amount",label:"Amount",defaultValue:"{{amount}}"},{type:"text",key:"payment_date",label:"Payment Date",defaultValue:"{{payment_date}}"},{type:"text",key:"transaction_id",label:"Transaction ID",defaultValue:"{{transaction_id}}"},{type:"text",key:"payment_method",label:"Payment Method",defaultValue:"{{payment_method}}"},{type:"text",key:"footer_message",label:"Footer Message",defaultValue:"{{footer_message}}"}]}]);break;case"outstanding_payment":g([{type:"body",text:` Outstanding Payment Reminder 

Dear {{customer_name}},

This is a friendly reminder that you have an outstanding balance of {{outstanding_amount}} with {{business_name}}.

Due Date: {{due_date}}

Please settle your account at your earliest convenience to avoid any inconvenience.

{{footer_message}}`,variables:[{type:"text",key:"customer_name",label:"Customer Name",defaultValue:"{{customer_name}}"},{type:"text",key:"outstanding_amount",label:"Outstanding Amount",defaultValue:"{{outstanding_amount}}"},{type:"text",key:"business_name",label:"Business Name",defaultValue:"{{business_name}}"},{type:"text",key:"due_date",label:"Due Date",defaultValue:"{{due_date}}"},{type:"text",key:"footer_message",label:"Footer Message",defaultValue:"{{footer_message}}"}]}]);break;default:g([{type:"body",text:"Hello from {{business_name}}!",variables:[{type:"text",key:"business_name",label:"Business Name",defaultValue:"{{business_name}}"}]}])}},_=(D,T,R)=>{const C=[...p];C[D]={...C[D],[T]:R},g(C)},I=(D,T,R,C)=>{const N=[...p];if(N[D].variables){const E=[...N[D].variables];E[T]={...E[T],[R]:C},N[D]={...N[D],variables:E},g(N)}},A=D=>{const T=[...p];T[D].variables||(T[D].variables=[]);const R={type:"text",key:`variable_${Date.now()}`,label:"New Variable",defaultValue:"{{new_variable}}"};T[D].variables.push(R),g(T)},O=(D,T)=>{const R=[...p];R[D].variables&&(R[D].variables.splice(T,1),g(R))},M=(D,T)=>{const R=[...p],C=`{{${T}}}`,N=R[D].text||"",E=document.getElementById(`template-text-${D}`);if(E&&document.activeElement===E){const k=E.selectionStart,P=E.selectionEnd,q=N.substring(0,k)+C+N.substring(P);R[D].text=q}else R[D].text=N+C;g(R)},z=async()=>{if(!(s!=null&&s.id)){Ce.error("No company selected");return}if(!o.trim()){Ce.error("Template name is required");return}if(p.some(D=>{var T;return!((T=D.text)!=null&&T.trim())})){Ce.error("All template components must have content");return}m(!0);try{console.log(" Preparing to save template:",{name:o,category:c,language:f,componentsCount:p.length,companyId:s.id});const D={id:"",name:o,category:c,language:f,components:p,status:"APPROVED"};console.log(" Calling saveWhatsAppTemplate..."),await WF(D,s.id)?(console.log(" Template saved successfully"),e({name:o,category:c,language:f,components:p}),Ce.success("Template saved successfully!")):(console.error(" saveWhatsAppTemplate returned false"),Ce.error("Failed to save template. Check console for details."))}catch(D){console.error(" Exception in handleSave:",D),D instanceof Error?Ce.error(`Failed to save template: ${D.message}`):Ce.error("Failed to save template. Check console for details.")}finally{m(!1)}},U=D=>({sales_invoice:"Sales Invoice",payment_receipt:"Payment Receipt",outstanding_payment:"Outstanding Payment",discount_offer:"Discount Offer",festival_offer:"Festival Offer",new_stock:"New Stock Arrival",feedback_request:"Feedback Request",birthday_wish:"Birthday Wish",sales_return:"Sales Return",monthly_summary:"Monthly Summary",daily_summary:"Daily Summary",purchase_created:"Purchase Created",customer_created:"Customer Created"})[D]||D;return v?d.jsx("div",{className:`rounded-lg shadow-lg ${i?"bg-gray-800":"bg-white"} p-6 flex justify-center items-center`,children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d.jsxs("div",{className:`rounded-lg shadow-lg ${i?"bg-gray-800":"bg-white"} p-6`,children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:t?"Edit Template":"Create New Template"}),d.jsxs("p",{className:`${i?"text-gray-300":"text-gray-600"}`,children:["Editing template for ",U(r)]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Template Name"}),d.jsx("input",{type:"text",value:o,onChange:D=>l(D.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter template name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),d.jsxs("select",{value:c,onChange:D=>u(D.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"UTILITY",children:"Utility"}),d.jsx("option",{value:"MARKETING",children:"Marketing"}),d.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),d.jsxs("select",{value:f,onChange:D=>h(D.target.value),className:`w-full p-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"en",children:"English"}),d.jsx("option",{value:"hi",children:"Hindi"}),d.jsx("option",{value:"es",children:"Spanish"}),d.jsx("option",{value:"fr",children:"French"})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Template Content"}),p.map((D,T)=>d.jsxs("div",{className:`mb-4 p-4 rounded-lg border ${i?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("div",{className:"flex justify-between items-center mb-3",children:d.jsxs("h4",{className:"font-medium capitalize",children:[D.type," Content"]})}),d.jsxs("div",{className:"mb-3",children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Message Text"}),d.jsx("textarea",{id:`template-text-${T}`,value:D.text||"",onChange:R=>_(T,"text",R.target.value),rows:6,className:`w-full p-2 rounded-md border ${i?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300"}`,placeholder:"Enter your message template..."}),d.jsxs("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:["Use double curly braces to insert variables (e.g., ","{{variable_name}}",")"]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h5",{className:"font-medium text-sm",children:"Variables"}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>A(T),children:"Add Variable"})]}),D.variables&&D.variables.length>0?d.jsx("div",{className:"space-y-2",children:D.variables.map((R,C)=>d.jsxs("div",{className:`p-3 rounded-md ${i?"bg-gray-600":"bg-white"}`,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mb-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium mb-1",children:"Key"}),d.jsx("input",{type:"text",value:R.key,onChange:N=>I(T,C,"key",N.target.value),className:`w-full p-1 text-sm rounded border ${i?"bg-gray-500 border-gray-400 text-white":"bg-gray-100 border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium mb-1",children:"Label"}),d.jsx("input",{type:"text",value:R.label,onChange:N=>I(T,C,"label",N.target.value),className:`w-full p-1 text-sm rounded border ${i?"bg-gray-500 border-gray-400 text-white":"bg-gray-100 border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium mb-1",children:"Default Value"}),d.jsx("input",{type:"text",value:R.defaultValue,onChange:N=>I(T,C,"defaultValue",N.target.value),className:`w-full p-1 text-sm rounded border ${i?"bg-gray-500 border-gray-400 text-white":"bg-gray-100 border-gray-300"}`})]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>M(T,R.key),children:"Insert into Text"}),d.jsx(lt,{variant:"ghost",size:"sm",onClick:()=>O(T,C),className:"text-red-500 hover:text-red-700",children:"Remove"})]})]},C))}):d.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:'No variables added yet. Click "Add Variable" to create one.'})]})]},T))]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:n,disabled:y,children:"Cancel"}),d.jsx(lt,{variant:"primary",onClick:z,disabled:y,children:y?"Saving...":"Save Template"})]})]})},Ewe=()=>{const{theme:r}=zr(),t=r==="dark",{selectedCompany:e}=ln(),[n,a]=ie.useState(!0),[i,s]=ie.useState(!1),[o,l]=ie.useState({business_name:"",business_number:"",access_token:"",phone_number_id:"",business_account_id:"",auto_send_enabled:!1,footer_message:"",business_logo_url:"",business_address:"",gemini_api_key:""}),[c,u]=ie.useState([]),[f,h]=ie.useState(!1),[p,g]=ie.useState(!1),[y,m]=ie.useState(""),[v,b]=ie.useState(""),[x,S]=ie.useState(!1),[_,I]=ie.useState(""),[A,O]=ie.useState(!1),[M,z]=ie.useState(null);ie.useEffect(()=>{U()},[e]);const U=async()=>{if(e!=null&&e.id){a(!0);try{const q=await Wh(e.id);l(q||{business_name:e.name,business_number:"",access_token:"",phone_number_id:"",business_account_id:"",auto_send_enabled:!1,footer_message:`Thank you for choosing ${e.name}!`,business_logo_url:e.logo_url||"",business_address:[e.address_street,e.address_city,e.address_state,e.address_postal_code].filter(Boolean).join(", ")||"",gemini_api_key:""})}catch(q){console.error("Error loading WhatsApp settings:",q),Ce.error("Failed to load WhatsApp settings")}finally{a(!1)}}},D=async()=>{if(!(e!=null&&e.id)){Ce.error("No company selected");return}s(!0);try{const q={...o,company_id:e.id,updated_at:new Date().toISOString()};await zF(q)?Ce.success("WhatsApp settings saved successfully"):Ce.error("Failed to save WhatsApp settings")}catch(q){console.error("Error saving WhatsApp settings:",q),Ce.error("Failed to save WhatsApp settings")}finally{s(!1)}},T=(q,H)=>{l(L=>({...L,[q]:H}))},R=async()=>{if(e!=null&&e.id)try{const q=await XF(e.id);u(q),h(!0)}catch(q){console.error("Error generating AI suggestions:",q),Ce.error("Failed to generate AI suggestions")}},C=async()=>{if(!(!(e!=null&&e.id)||!y.trim())){S(!0);try{const q=await tD(y,e.id);b(q)}catch(q){console.error("Error generating AI message:",q),Ce.error("Failed to generate AI message")}finally{S(!1)}}},N=async()=>{if(!_.trim()){Ce.error("Please enter a phone number");return}if(!o.access_token||!o.phone_number_id){Ce.error("Please configure access token and phone number ID first");return}O(!0);try{const q=await VF(_,o);if(q.success)Ce.success("Test message sent successfully! Check the recipient WhatsApp.");else{let H=q.error||"Failed to send test message";(H.includes("not in allowed list")||H.includes("not whitelisted"))&&(H="Recipient phone number not in allowed list. In development mode, this number must be added to your allowed list in Meta Business Manager. Please check your WhatsApp settings and try again."),Ce.error(H)}}catch(q){console.error("Error sending test message:",q),Ce.error("Failed to send test message")}finally{O(!1)}},E=q=>{z(q)},k=async q=>{console.log("Saving template:",q),Ce.success(`Template for ${M} saved successfully!`),z(null)},P=()=>{z(null)};return n?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex justify-between items-center",children:d.jsx("h1",{className:"text-2xl font-bold",children:"WhatsApp Settings"})}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Business Information"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Name"}),d.jsx("input",{type:"text",value:o.business_name||"",onChange:q=>T("business_name",q.target.value),className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Phone Number"}),d.jsx("input",{type:"text",value:o.business_number||"",onChange:q=>T("business_number",q.target.value),placeholder:"WhatsApp business number",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Token"}),d.jsx("input",{type:"password",value:o.access_token||"",onChange:q=>T("access_token",q.target.value),placeholder:"Permanent access token from Meta",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number ID"}),d.jsx("input",{type:"text",value:o.phone_number_id||"",onChange:q=>T("phone_number_id",q.target.value),placeholder:"Phone Number ID from Meta Business Manager",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Find this in Meta Business Manager  WhatsApp  API Setup"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"WhatsApp Business Account ID"}),d.jsx("input",{type:"text",value:o.business_account_id||"",onChange:q=>T("business_account_id",q.target.value),placeholder:"Business Account ID from Meta",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Your WhatsApp Business Account ID from Meta"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Messaging Settings"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"autoSend",checked:o.auto_send_enabled||!1,onChange:q=>T("auto_send_enabled",q.target.checked),className:"h-4 w-4 text-blue-600 rounded"}),d.jsx("label",{htmlFor:"autoSend",className:"ml-2 block text-sm",children:"Auto-send messages for new invoices"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Footer Message"}),d.jsx("textarea",{value:o.footer_message||"",onChange:q=>T("footer_message",q.target.value),rows:3,placeholder:"Message footer for all outgoing messages",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Logo URL"}),d.jsx("input",{type:"text",value:o.business_logo_url||"",onChange:q=>T("business_logo_url",q.target.value),placeholder:"URL to your business logo",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Address"}),d.jsx("textarea",{value:o.business_address||"",onChange:q=>T("business_address",q.target.value),rows:3,placeholder:"Full business address",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Google Gemini API Key"}),d.jsx("input",{type:"password",value:o.gemini_api_key||"",onChange:q=>T("gemini_api_key",q.target.value),placeholder:"Enter your Gemini API key for AI message generation",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsxs("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:["Get your free API key from"," ",d.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Google AI Studio"})]})]})]})]}),d.jsx("div",{className:"mt-8 flex justify-end",children:d.jsx(lt,{variant:"primary",onClick:D,disabled:i,children:i?"Saving...":"Save Settings"})})]}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Configuration"}),d.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} mb-4`,children:"Send a test message using the hello_world template to verify your WhatsApp API setup."}),d.jsxs("div",{className:"max-w-md",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Test Phone Number"}),d.jsx("input",{type:"text",value:_,onChange:q=>I(q.target.value),placeholder:"+919876543210",className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Enter phone number with country code (e.g., +919876543210)"}),d.jsx("p",{className:`text-xs mt-1 ${t?"text-yellow-400":"text-yellow-600"}`,children:" Note: In development mode, this number must be added to your allowed list in Meta Business Manager"}),d.jsx(lt,{variant:"primary",onClick:N,disabled:A||!_.trim(),className:"mt-4",children:A?"Sending...":"Send Test Message"})]})]}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Message Templates"}),d.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} mb-4`,children:"Manage your WhatsApp message templates for different scenarios."}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Sales Invoice",type:"sales_invoice"},{name:"Payment Receipt",type:"payment_receipt"},{name:"Outstanding Payment",type:"outstanding_payment"},{name:"Discount Offer",type:"discount_offer"},{name:"Festival Offer",type:"festival_offer"},{name:"New Stock Arrival",type:"new_stock"},{name:"Feedback Request",type:"feedback_request"},{name:"Birthday Wish",type:"birthday_wish"}].map(q=>d.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("h3",{className:"font-medium",children:q.name}),d.jsxs("p",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:["Template for ",q.name.toLowerCase()," messages"]}),d.jsx(lt,{variant:"secondary",size:"sm",className:"mt-3",onClick:()=>E(q.type),children:"Edit Template"})]},q.type))})]}),M&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:d.jsx(kwe,{templateType:M,onSave:k,onCancel:P})})}),d.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"AI-Powered Features"}),d.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} mb-4`,children:"Leverage artificial intelligence for smarter customer engagement."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("h3",{className:"font-medium",children:"Campaign Suggestions"}),d.jsx("p",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"AI analyzes sales data to suggest targeted campaigns"}),d.jsx(lt,{variant:"secondary",size:"sm",className:"mt-3",onClick:R,children:"View Suggestions"})]}),d.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("h3",{className:"font-medium",children:"Custom AI Messages"}),d.jsx("p",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Generate personalized messages with AI assistance"}),d.jsx(lt,{variant:"secondary",size:"sm",className:"mt-3",onClick:()=>g(!0),children:"Generate Message"})]})]})]}),f&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsx("div",{className:`w-full max-w-2xl rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto`,children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"AI Campaign Suggestions"}),d.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700",children:d.jsx(va,{className:"w-6 h-6"})})]}),d.jsx("div",{className:"space-y-4",children:c.map((q,H)=>d.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("h4",{className:"font-medium text-lg",children:q.subject}),d.jsx("p",{className:`mt-2 ${t?"text-gray-300":"text-gray-600"}`,children:q.message}),d.jsxs("div",{className:`mt-3 text-sm px-3 py-2 rounded ${t?"bg-blue-900/30 text-blue-300":"bg-blue-100 text-blue-800"}`,children:["Suggested Action: ",q.suggested_action]})]},H))}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx(lt,{variant:"primary",onClick:()=>h(!1),children:"Close"})})]})})}),p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsx("div",{className:`w-full max-w-2xl rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"AI Message Generator"}),d.jsx("button",{onClick:()=>{g(!1),m(""),b("")},className:"text-gray-500 hover:text-gray-700",children:d.jsx(va,{className:"w-6 h-6"})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:'Describe your message (e.g., "Create a festive Diwali offer message")'}),d.jsx("textarea",{value:y,onChange:q=>m(q.target.value),rows:3,className:`w-full px-3 py-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Enter your prompt for the AI message generator..."})]}),d.jsx(lt,{variant:"primary",onClick:C,disabled:x||!y.trim(),children:x?"Generating...":"Generate Message"}),v&&d.jsxs("div",{className:`mt-4 p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("h4",{className:"font-medium mb-2",children:"Generated Message:"}),d.jsx("div",{className:`p-3 rounded whitespace-pre-wrap ${t?"bg-gray-600":"bg-white"}`,children:v}),d.jsx("div",{className:"mt-3 flex justify-end",children:d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>navigator.clipboard.writeText(v),children:"Copy to Clipboard"})})]})]})]})})})]})},Awe=()=>{const{theme:r}=zr(),{selectedCompany:t}=ln(),e=r==="dark",[n,a]=ie.useState(""),[i,s]=ie.useState([]),[o,l]=ie.useState([]),[c,u]=ie.useState(null),[f,h]=ie.useState([]),[p,g]=ie.useState(!1),[y,m]=ie.useState(!1),[v,b]=ie.useState("cash");ie.useEffect(()=>{t!=null&&t.id&&x()},[t]),ie.useEffect(()=>{if(n){const M=i.filter(z=>z.invoice_number.toLowerCase().includes(n.toLowerCase())||z.customer_name&&z.customer_name.toLowerCase().includes(n.toLowerCase()));l(M)}else l(i)},[n,i]);const x=async()=>{if(t!=null&&t.id){g(!0);try{const{data:M,error:z}=await De.from("sales").select(`
          id,
          invoice_number,
          customer_id,
          customer_name,
          customer_phone,
          total,
          created_at,
          items
        `).eq("company_id",t.id).order("created_at",{ascending:!1}).limit(50);if(z)throw z;const U=(M||[]).map(D=>({...D,items:typeof D.items=="string"?JSON.parse(D.items):D.items||[]}));s(U),l(U)}catch(M){console.error("Error loading sales:",M),Ce.error("Failed to load sales")}finally{g(!1)}}},S=M=>{u(M);const z=M.items.map(U=>({sale_item_id:U.id,product_id:U.product_id,product_name:U.product_name||"Unknown Product",quantity:U.quantity,price:U.price,return_quantity:0,return_amount:0}));h(z)},_=(M,z)=>{const U=[...f],D=U[M],T=D.quantity,R=Math.min(Math.max(0,z),T);U[M]={...D,return_quantity:R,return_amount:R*D.price},h(U)},I=()=>f.reduce((M,z)=>M+z.return_amount,0),A=async()=>{if(!c||!(t!=null&&t.id))return;if(!f.some(z=>z.return_quantity>0)){Ce.error("Please select at least one item to return");return}m(!0);try{const z=I(),{data:U,error:D}=await De.from("sales_returns").insert({sale_id:c.id,company_id:t.id,customer_id:c.customer_id,refund_amount:z,refund_method:v,items:f.filter(T=>T.return_quantity>0),status:"processed"}).select().single();if(D)throw D;Ce.success("Return processed successfully!"),c.customer_phone,u(null),h([]),x()}catch(z){console.error("Error processing return:",z),Ce.error("Failed to process return")}finally{m(!1)}},O=()=>{u(null),h([])};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Sales Return"}),c&&d.jsx(lt,{variant:"secondary",onClick:O,leftIcon:d.jsx(hN,{className:"w-4 h-4"}),children:"Back to Sales"})]}),c?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-semibold",children:["Return for Invoice #",c.invoice_number]}),d.jsxs("div",{className:"mt-2 text-gray-500",children:[new Date(c.created_at).toLocaleDateString(),"  Customer: ",c.customer_name||"Walk-in Customer"]})]}),c.customer_phone&&d.jsx(Tx,{phoneNumber:c.customer_phone,messageType:"sales_return",messageData:{invoice_number:c.invoice_number,customer_name:c.customer_name||"Customer",refund_amount:I(),refund_method:v},companyId:t.id,customerId:c.customer_id||"",variant:"secondary",size:"sm"})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${e?"text-gray-300":"text-gray-600"}`,children:[d.jsx("th",{className:"pb-4 text-left",children:"Product"}),d.jsx("th",{className:"pb-4 text-center",children:"Quantity"}),d.jsx("th",{className:"pb-4 text-right",children:"Price"}),d.jsx("th",{className:"pb-4 text-center",children:"Return Qty"}),d.jsx("th",{className:"pb-4 text-right",children:"Return Amount"})]})}),d.jsx("tbody",{className:e?"text-gray-300":"text-gray-800",children:f.map((M,z)=>{var U,D;return d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"py-4",children:d.jsx("div",{className:"font-medium",children:M.product_name})}),d.jsx("td",{className:"py-4 text-center",children:M.quantity}),d.jsxs("td",{className:"py-4 text-right",children:["",(U=M.price)==null?void 0:U.toFixed(2)]}),d.jsx("td",{className:"py-4 text-center",children:d.jsx("input",{type:"number",min:"0",max:M.quantity,value:M.return_quantity,onChange:T=>_(z,parseInt(T.target.value)||0),className:`w-20 px-2 py-1 rounded border text-center ${e?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})}),d.jsxs("td",{className:"py-4 text-right",children:["",(D=M.return_amount)==null?void 0:D.toFixed(2)]})]},M.sale_item_id)})})]})}),d.jsxs("div",{className:"mt-6 pt-6 border-t flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Refund Method"}),d.jsxs("select",{value:v,onChange:M=>b(M.target.value),className:`px-3 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"cash",children:"Cash"}),d.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),d.jsx("option",{value:"credit_note",children:"Credit Note"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-lg font-semibold",children:["Total Refund: ",I().toFixed(2)]}),d.jsxs("div",{className:"mt-4 flex space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:O,disabled:y,children:"Cancel"}),d.jsx(lt,{variant:"primary",onClick:A,disabled:y,isLoading:y,children:"Process Return"})]})]})]})]})}):d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",placeholder:"Search by invoice number or customer name...",value:n,onChange:M=>a(M.target.value),className:`w-full pl-10 pr-4 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx(nd,{className:`absolute left-3 top-2.5 w-5 h-5 ${e?"text-gray-400":"text-gray-500"}`})]}),d.jsx(lt,{variant:"secondary",onClick:x,leftIcon:d.jsx(nc,{className:"w-4 h-4"}),children:"Refresh"})]}),p?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Hn,{className:"mx-auto h-12 w-12 text-gray-400"}),d.jsx("h3",{className:"mt-2 text-sm font-medium",children:"No sales found"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n?"No sales match your search.":"Get started by processing a sale."})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${e?"text-gray-300":"text-gray-600"}`,children:[d.jsx("th",{className:"pb-4 text-left",children:"Invoice"}),d.jsx("th",{className:"pb-4 text-left",children:"Customer"}),d.jsx("th",{className:"pb-4 text-left",children:"Date"}),d.jsx("th",{className:"pb-4 text-right",children:"Total"}),d.jsx("th",{className:"pb-4 text-right",children:"Actions"})]})}),d.jsx("tbody",{className:e?"text-gray-300":"text-gray-800",children:o.map(M=>{var z;return d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"py-4",children:d.jsxs("div",{className:"font-medium",children:["#",M.invoice_number]})}),d.jsxs("td",{className:"py-4",children:[d.jsx("div",{children:M.customer_name||"Walk-in Customer"}),M.customer_phone&&d.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[d.jsx(jx,{className:"w-4 h-4 mr-1"}),M.customer_phone]})]}),d.jsx("td",{className:"py-4",children:new Date(M.created_at).toLocaleDateString()}),d.jsxs("td",{className:"py-4 text-right",children:["",(z=M.total)==null?void 0:z.toFixed(2)]}),d.jsx("td",{className:"py-4 text-right",children:d.jsx(lt,{variant:"primary",size:"sm",onClick:()=>S(M),children:"Process Return"})})]},M.id)})})]})})]})]})},Twe=()=>{const{theme:r}=zr(),{selectedCompany:t}=ln(),e=r==="dark",[n,a]=ie.useState([{id:"1",title:"Summer Sale",description:"Get 20% off on all products",discountType:"percentage",discountValue:20,startDate:"2023-06-01",endDate:"2023-06-30",targetType:"all",status:"active"},{id:"2",title:"Festival Special",description:"Flat 500 off on purchases above 5000",discountType:"fixed",discountValue:500,startDate:"2023-07-15",endDate:"2023-07-22",targetType:"all",status:"scheduled"}]),[i,s]=ie.useState(!1),[o,l]=ie.useState(null),[c,u]=ie.useState([]),[f,h]=ie.useState(!1),[p,g]=ie.useState(!1),[y,m]=ie.useState(null),[v,b]=ie.useState([]),[x,S]=ie.useState({title:"",description:"",discountType:"percentage",discountValue:0,startDate:"",endDate:"",targetType:"all"}),_=()=>{s(!0)},I=D=>{l(D)},A=(D,T)=>{S(R=>({...R,[D]:T}))},O=async()=>{if(!x.title.trim()){Ce.error("Please enter an offer title");return}if(!x.description.trim()){Ce.error("Please enter an offer description");return}if(x.discountValue<=0){Ce.error("Discount value must be greater than 0");return}if(!x.startDate||!x.endDate){Ce.error("Please select both start and end dates");return}const D=new Date,T=new Date(x.startDate),R=new Date(x.endDate);let C="scheduled";D>=T&&D<=R?C="active":D>R&&(C="expired");const N={id:`offer_${Date.now()}`,title:x.title,description:x.description,discountType:x.discountType,discountValue:Number(x.discountValue),startDate:x.startDate,endDate:x.endDate,targetType:x.targetType,status:C};a(E=>[N,...E]),Ce.success("Offer created successfully!"),S({title:"",description:"",discountType:"percentage",discountValue:0,startDate:"",endDate:"",targetType:"all"}),s(!1)},M=()=>{S({title:"",description:"",discountType:"percentage",discountValue:0,startDate:"",endDate:"",targetType:"all"}),s(!1)},z=D=>{switch(D){case"active":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=async()=>{if(t){h(!0);try{const{data:D,error:T}=await De.from("customers").select("*").eq("company_id",t.id);if(T)throw T;if(D){const R=D.map(C=>({id:C.id,name:C.name,email:C.email,phone:C.phone,alternatePhone:C.alternate_phone||null,addressStreet:C.addressStreet||null,addressCity:C.address_city||null,addressState:C.address_state||null,addressPostalCode:C.address_postal_code||null,addressCountry:C.address_country||null,creditLimit:C.creditLimit||0,currentBalance:C.currentBalance||0,customerType:C.customerType||"regular",gstNumber:C.gst_number||null,date_of_birth:C.date_of_birth||null,createdAt:C.createdAt||null,updatedAt:C.updatedAt||null,company_id:C.company_id||null}));u(R)}}catch(D){console.error("Error loading customers:",D),Ce.error("Failed to load customers")}finally{h(!1)}}};return ie.useEffect(()=>{t&&U()},[t]),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Offers & Promotions"}),d.jsx(lt,{variant:"primary",onClick:_,leftIcon:d.jsx(pN,{className:"w-4 h-4"}),children:"Create Offer"})]}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(D=>d.jsxs("div",{className:`p-6 rounded-lg border ${e?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold",children:D.title}),d.jsx("p",{className:`mt-2 text-sm ${e?"text-gray-300":"text-gray-600"}`,children:D.description})]}),d.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z(D.status)}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})]}),d.jsxs("div",{className:"mt-4 flex items-center",children:[d.jsx(Xi,{className:"w-4 h-4 mr-2"}),d.jsx("span",{children:D.discountType==="percentage"?`${D.discountValue}% OFF`:`${D.discountValue} OFF`})]}),d.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[d.jsx($g,{className:"w-4 h-4 mr-2"}),d.jsxs("span",{children:[new Date(D.startDate).toLocaleDateString()," - ",new Date(D.endDate).toLocaleDateString()]})]}),d.jsxs("div",{className:"mt-4 flex justify-between",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>I(D),children:"View Details"}),d.jsx(lt,{variant:"secondary",size:"sm",iconOnly:!0,onClick:()=>{m(D),g(!0)},children:d.jsx(By,{className:"w-4 h-4"})})]})]},D.id))})}),p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsx("div",{className:`w-full max-w-3xl rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"Select Customers for Offer"}),d.jsx("button",{onClick:()=>{g(!1),b([])},className:"text-gray-500 hover:text-gray-700",children:d.jsx(va,{className:"w-6 h-6"})})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("p",{className:`mb-4 ${e?"text-gray-300":"text-gray-600"}`,children:["Selected Offer: ",d.jsx("strong",{children:y==null?void 0:y.title})]}),d.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:v.map(D=>{const T=c.find(R=>R.id===D);return d.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-3 py-1 rounded-full text-sm",children:[T==null?void 0:T.name,d.jsx("button",{onClick:()=>b(R=>R.filter(C=>C!==D)),className:"ml-2",children:d.jsx(va,{className:"w-3 h-3"})})]},D)})}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:`${e?"text-gray-300":"text-gray-600"}`,children:[v.length," customer",v.length!==1?"s":""," selected"]})})]}),d.jsx("div",{className:"mb-6 max-h-80 overflow-y-auto",children:f?d.jsx("div",{className:"flex justify-center items-center h-32",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d.jsx("div",{className:"space-y-2",children:c.map(D=>{const T=v.includes(D.id),R=!!D.phone;return d.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${e?T?"bg-blue-900/30 border-blue-700":"bg-gray-700 border-gray-600":T?"bg-blue-50 border-blue-300":"bg-white border-gray-200"} ${R?"":"opacity-60"}`,children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:D.name}),d.jsx("div",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.phone||"No phone number"})]}),d.jsx("div",{children:R?d.jsx("input",{type:"checkbox",checked:T,onChange:C=>{C.target.checked?b(N=>[...N,D.id]):b(N=>N.filter(E=>E!==D.id))},className:"h-4 w-4 text-blue-600 rounded"}):d.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"No phone"})})]},D.id)})})}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:()=>{g(!1),b([])},children:"Cancel"}),d.jsxs(lt,{variant:"primary",onClick:()=>{if(v.length===0){Ce.error("Please select at least one customer");return}v.forEach(D=>{const T=c.find(R=>R.id===D);T&&T.phone&&(y==null||y.discountValue,y==null||y.title,y==null||y.endDate,yo(async()=>{const{sendWhatsAppMessage:R,getWhatsAppSettings:C}=await Promise.resolve().then(()=>rp);return{sendWhatsAppMessage:R,getWhatsAppSettings:C}},void 0).then(({sendWhatsAppMessage:R,getWhatsAppSettings:C})=>{(async()=>{try{const E=await C((t==null?void 0:t.id)||"");if(!E){Ce.error("WhatsApp not configured. Please configure WhatsApp settings first.");return}if(!T.phone){Ce.error(`Customer ${T.name} has no phone number`);return}const k={to:T.phone,type:"text",text:{body:` *Special Offer from ${E.business_name}*

 *${y==null?void 0:y.title}*
${y==null?void 0:y.description}

Discount: ${(y==null?void 0:y.discountType)==="percentage"?`${y==null?void 0:y.discountValue}% OFF`:`${y==null?void 0:y.discountValue} OFF`}
Valid till: ${new Date((y==null?void 0:y.endDate)||"").toLocaleDateString()}

Use code: ${y==null?void 0:y.title.replace(/\s+/g,"").toUpperCase()}

${E.footer_message||"Visit us again!"}`}},P=await R(T.phone,k,E.access_token,E.phone_number_id||E.business_number);if(P.success){Ce.success(`Offer sent to ${T.name}`);try{const H=await De.from("whatsapp_messages").insert([{company_id:(t==null?void 0:t.id)||null,customer_id:T.id,message_type:"discount_offer",message_content:k,status:"sent",sent_at:new Date().toISOString()}]);H.error&&console.error("Error logging WhatsApp message:",H.error)}catch(q){console.error("Error logging WhatsApp message:",q)}}else{let q=P.error||"Failed to send message";q.includes("not in allowed list")||q.includes("not whitelisted")?(q=`Recipient phone number for ${T.name} not in allowed list. In development mode, customer phone numbers must be added to your Meta Business Manager allowed list.`,Ce.error(q,{duration:1e4,icon:""})):Ce.error(`Failed to send offer to ${T.name}: ${q}`)}}catch(E){console.error("Error sending WhatsApp message:",E),Ce.error(`Failed to send offer to ${T.name}`)}})()}))}),g(!1),b([])},disabled:v.length===0,children:["Send to ",v.length," Customer",v.length!==1?"s":""]})]})]})})}),o&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsx("div",{className:`w-full max-w-2xl rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:o.title}),d.jsx("button",{onClick:()=>l(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Description"}),d.jsx("p",{className:`mt-1 ${e?"text-gray-300":"text-gray-600"}`,children:o.description})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Discount"}),d.jsx("p",{className:`mt-1 ${e?"text-gray-300":"text-gray-600"}`,children:o.discountType==="percentage"?`${o.discountValue}% OFF`:`${o.discountValue} OFF`})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Target"}),d.jsx("p",{className:`mt-1 ${e?"text-gray-300":"text-gray-600"}`,children:o.targetType==="all"?"All Customers":"Specific Customers"})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Start Date"}),d.jsx("p",{className:`mt-1 ${e?"text-gray-300":"text-gray-600"}`,children:new Date(o.startDate).toLocaleDateString()})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"End Date"}),d.jsx("p",{className:`mt-1 ${e?"text-gray-300":"text-gray-600"}`,children:new Date(o.endDate).toLocaleDateString()})]})]}),d.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:()=>l(null),children:"Close"}),d.jsx(lt,{variant:"primary",leftIcon:d.jsx(EK,{className:"w-4 h-4"}),onClick:()=>{o&&(m(o),g(!0),l(null))},children:"Send to Customers"})]})]})]})})}),i&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsx("div",{className:`w-full max-w-2xl rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"Create New Offer"}),d.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Offer Title"}),d.jsx("input",{type:"text",className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"e.g., Summer Sale",value:x.title,onChange:D=>A("title",D.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),d.jsx("textarea",{rows:3,className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Describe your offer...",value:x.description,onChange:D=>A("description",D.target.value)})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Discount Type"}),d.jsxs("select",{className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,value:x.discountType,onChange:D=>A("discountType",D.target.value),children:[d.jsx("option",{value:"percentage",children:"Percentage"}),d.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Discount Value"}),d.jsx("input",{type:"number",className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"e.g., 20",value:x.discountValue,onChange:D=>A("discountValue",Number(D.target.value))})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),d.jsx("input",{type:"date",className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,value:x.startDate,onChange:D=>A("startDate",D.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),d.jsx("input",{type:"date",className:`w-full p-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,value:x.endDate,onChange:D=>A("endDate",D.target.value)})]})]}),d.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[d.jsx(lt,{variant:"secondary",onClick:M,children:"Cancel"}),d.jsx(lt,{variant:"primary",onClick:O,children:"Create Offer"})]})]})]})})})]})},Cwe=({isOpen:r,onClose:t,user:e,onUserUpdated:n})=>{const{selectedCompany:a}=ln(),[i,s]=ie.useState({display_name:"",role:"",is_active:!0}),[o,l]=ie.useState(!1),[c,u]=ie.useState(null);ie.useEffect(()=>{e&&s({display_name:e.display_name||"",role:e.role||"manager",is_active:e.is_active!==!1})},[e]);const f=g=>{const{name:y,value:m}=g.target;s(v=>({...v,[y]:m}))},h=g=>{const{name:y,checked:m}=g.target;s(v=>({...v,[y]:m}))},p=async g=>{if(g.preventDefault(),u(null),!e||!a){u("Missing user or company information");return}l(!0);try{const{error:y}=await De.from("auth_users").update({display_name:i.display_name,updated_at:new Date().toISOString()}).eq("id",e.id);if(y)throw console.error("Error updating user profile:",y),new Error("Failed to update user profile");const{error:m}=await De.from("company_users").update({role:i.role,is_active:i.is_active,updated_at:new Date().toISOString()}).eq("user_id",e.id).eq("company_id",a.id);if(m)throw console.error("Error updating user role:",m),new Error("Failed to update user role");try{const{error:v}=await De.from("users").select("id").limit(1);if(!v||v.code!=="42P01"){const{error:b}=await De.from("users").update({display_name:i.display_name,role:i.role,is_active:i.is_active,updated_at:new Date().toISOString()}).eq("id",e.id).eq("company_id",a.id);b&&console.error("Error updating users record:",b)}}catch(v){console.log("Note: users table may not exist or another error occurred, skipping update"),console.error(v)}Ce.success("User updated successfully"),n(),t()}catch(y){console.error("Error updating user:",y),u(y instanceof Error?y.message:"Failed to update user"),Ce.error("Failed to update user")}finally{l(!1)}};return!r||!e?null:d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit User"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:d.jsx(va,{className:"h-5 w-5"})})]}),d.jsxs("div",{className:"p-4",children:[c&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded",children:d.jsx("p",{children:c})}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[d.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]})}),d.jsxs("form",{onSubmit:p,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"display_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ax,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"display_name",name:"display_name",type:"text",value:i.display_name,onChange:f,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Display name",disabled:o})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ap,{className:"h-5 w-5 text-gray-400"})}),d.jsxs("select",{id:"role",name:"role",value:i.role,onChange:f,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:o,children:[d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"manager",children:"Manager"}),d.jsx("option",{value:"cashier",children:"Cashier"}),d.jsx("option",{value:"salesperson",children:"Salesperson"})]})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:i.is_active,onChange:h,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:o}),d.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(lt,{type:"button",variant:"secondary",onClick:t,disabled:o,children:"Cancel"}),d.jsx(lt,{type:"submit",variant:"primary",isLoading:o,children:"Save Changes"})]})]})]})]})})},Pwe=({isOpen:r,onClose:t,onUserCreated:e})=>{const{selectedCompany:n}=ln(),a={email:"",password:"",confirmPassword:"",role:"manager",displayName:""},[i,s]=ie.useState(a),[o,l]=ie.useState(!1),[c,u]=ie.useState(!1),[f,h]=ie.useState(!1),[p,g]=ie.useState(null),y=v=>{const{name:b,value:x}=v.target;s(S=>({...S,[b]:x}))},m=async v=>{var b,x;if(v.preventDefault(),g(null),!n){g("No company selected. Please select a company first.");return}if(!i.email||!i.password||!i.confirmPassword||!i.displayName){g("All fields are required");return}if(i.password.length<8){g("Password must be at least 8 characters long");return}if(i.password!==i.confirmPassword){g("Passwords do not match");return}h(!0);try{const{data:S,error:_}=await De.auth.signUp({email:i.email,password:i.password,options:{data:{role:i.role,display_name:i.displayName}}});if(_)throw _;if(!S.user)throw new Error("Failed to create user account");const I=S.user.id;await new Promise(U=>setTimeout(U,100));const{data:A,error:O}=await De.from("auth_users").select("id, display_name, email").eq("id",I).single();if(O){console.error("Error checking auth_users record:",O);const{error:U}=await De.from("auth_users").insert({id:I,display_name:i.displayName,email:i.email,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});U&&U.code!=="23505"&&console.error("Error manually creating auth_users record:",U)}else if(!(A!=null&&A.display_name)){const{error:U}=await De.from("auth_users").update({display_name:i.displayName,updated_at:new Date().toISOString()}).eq("id",I);U&&console.error("Error updating auth_users display_name:",U)}const{data:M}=await De.from("company_users").select("id").eq("company_id",n.id).eq("user_id",I).single();let z=null;if(M){const{error:U}=await De.from("company_users").update({role:i.role,is_active:!0,updated_at:new Date().toISOString()}).eq("company_id",n.id).eq("user_id",I);z=U}else{const{error:U}=await De.from("company_users").insert({company_id:n.id,user_id:I,role:i.role,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});z=U}if(z)throw console.error("Error creating company_users record:",z),z.code==="23505"?new Error("User is already assigned to this company"):z.code==="23503"?new Error("Invalid company or user ID"):(b=z.message)!=null&&b.includes("role")||(x=z.message)!=null&&x.includes("check")?new Error("Invalid role selected. Please choose a valid role."):new Error(`Failed to assign user to company: ${z.message}`);try{const{error:U}=await De.from("users").select("id").limit(1);if(!U||U.code!=="42P01"){const{error:D}=await De.from("users").insert({id:I,email:i.email,display_name:i.displayName,role:i.role,company_id:n.id,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});D&&console.error("Error creating users record:",D)}}catch(U){console.log("Note: users table may not exist or another error occurred, skipping insert"),console.error(U)}Ce.success(`Successfully created ${i.role} account for ${i.email}`),s(a),e(),t()}catch(S){console.error("Error creating user account:",S),g(S instanceof Error?S.message:"Failed to create account"),Ce.error(S instanceof Error?S.message:"Failed to create account")}finally{h(!1)}};return r?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New User"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:d.jsx(va,{className:"h-5 w-5"})})]}),d.jsx("div",{className:"p-4",children:n?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md text-blue-800 dark:text-blue-300 mb-4",children:d.jsxs("p",{children:["Users created here will be automatically assigned to ",d.jsx("strong",{children:n.name}),"."]})}),p&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded",children:d.jsx("p",{children:p})}),d.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ax,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"displayName",name:"displayName",type:"text",value:i.displayName,onChange:y,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Full name",disabled:f})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ep,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"email",name:"email",type:"email",value:i.email,onChange:y,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Email address",disabled:f})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ap,{className:"h-5 w-5 text-gray-400"})}),d.jsxs("select",{id:"role",name:"role",value:i.role,onChange:y,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:f,children:[d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"manager",children:"Manager"}),d.jsx("option",{value:"cashier",children:"Cashier"}),d.jsx("option",{value:"salesperson",children:"Salesperson"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(qv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"password",name:"password",type:o?"text":"password",value:i.password,onChange:y,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Password (min 8 characters)",disabled:f}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),tabIndex:-1,children:o?d.jsx(Uv,{className:"h-5 w-5 text-gray-400"}):d.jsx(Ug,{className:"h-5 w-5 text-gray-400"})})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(qv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",value:i.confirmPassword,onChange:y,className:"appearance-none block w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Confirm password",disabled:f}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!c),tabIndex:-1,children:c?d.jsx(Uv,{className:"h-5 w-5 text-gray-400"}):d.jsx(Ug,{className:"h-5 w-5 text-gray-400"})})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(lt,{type:"button",variant:"secondary",onClick:t,disabled:f,children:"Cancel"}),d.jsx(lt,{type:"submit",variant:"primary",isLoading:f,children:"Create User"})]})]})]}):d.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md text-yellow-800 dark:text-yellow-300",children:d.jsx("p",{children:"Please select a company first to create users within that company."})})})]})}):null},Owe=({isOpen:r,onClose:t,onRoleUpdated:e})=>{const{theme:n}=zr(),{selectedCompany:a}=ln(),i=n==="dark",[s,o]=ie.useState("roles"),[l,c]=ie.useState([]),[u,f]=ie.useState([]),[h,p]=ie.useState(!1),[g,y]=ie.useState(null),[m,v]=ie.useState(!1),b=[{id:"admin",name:"Administrator",description:"Full system access and management capabilities",permissions:{users:{view:!0,create:!0,edit:!0,delete:!0},products:{view:!0,create:!0,edit:!0,delete:!0},sales:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0}}}],x=async()=>{if(a)try{const{data:_,error:I}=await De.from("company_users").select(`
          user_id,
          role,
          auth_users (
            id,
            email,
            display_name
          )
        `).eq("company_id",a.id);if(I){console.error("Error fetching users:",I);return}const A=(_==null?void 0:_.map(O=>{const M=Array.isArray(O.auth_users)?O.auth_users[0]:O.auth_users;return{id:O.user_id,email:(M==null?void 0:M.email)||`user_${O.user_id.substring(0,6)}@example.com`,display_name:(M==null?void 0:M.display_name)||`User ${O.user_id.substring(0,6)}`,role:O.role}}))||[];f(A)}catch(_){console.error("Error fetching users:",_)}},S=async(_,I)=>{if(!a){Ce.error("Please select a company first");return}p(!0);try{const{error:A}=await De.from("company_users").update({role:I,updated_at:new Date().toISOString()}).eq("user_id",_).eq("company_id",a.id);A?(console.error("Error updating user role:",A),Ce.error("Failed to update user role")):(Ce.success("User role updated successfully"),x(),e==null||e())}catch(A){console.error("Error updating user role:",A),Ce.error("Failed to update user role")}finally{p(!1)}};return ie.useEffect(()=>{r&&(c(b),x())},[r,a]),r?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden`,children:[d.jsxs("div",{className:`px-6 py-4 border-b ${i?"border-gray-700":"border-gray-200"} flex items-center justify-between`,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ap,{className:"w-6 h-6 text-purple-600 mr-2"}),d.jsx("h2",{className:`text-xl font-semibold ${i?"text-white":"text-gray-900"}`,children:"Role Management"})]}),d.jsx("button",{onClick:t,className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${i?"text-gray-400":"text-gray-500"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsx("div",{className:`px-6 py-2 border-b ${i?"border-gray-700":"border-gray-200"}`,children:d.jsxs("div",{className:"flex space-x-4",children:[d.jsxs("button",{onClick:()=>o("roles"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="roles"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-700"}`,children:[d.jsx(Ap,{className:"w-4 h-4 inline mr-1"}),"Roles & Permissions"]}),d.jsxs("button",{onClick:()=>o("assignments"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="assignments"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-700"}`,children:[d.jsx(wn,{className:"w-4 h-4 inline mr-1"}),"User Assignments"]})]})}),d.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s==="roles"&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:`text-lg font-medium ${i?"text-white":"text-gray-900"}`,children:"System Roles"}),d.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center",children:[d.jsx(ml,{className:"w-4 h-4 mr-1"}),"Add Role"]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(_=>d.jsxs("div",{className:`p-4 rounded-lg border ${i?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{children:[d.jsx("h4",{className:`font-medium ${i?"text-white":"text-gray-900"}`,children:_.name}),d.jsx("p",{className:`text-sm ${i?"text-gray-300":"text-gray-600"}`,children:_.description})]}),d.jsx("button",{onClick:()=>y(_),className:`p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 ${i?"text-gray-400":"text-gray-500"}`,children:d.jsx(Ih,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h5",{className:`text-sm font-medium ${i?"text-gray-300":"text-gray-700"}`,children:"Permissions:"}),d.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(_.permissions).map(([I,A])=>d.jsxs("div",{className:`p-2 rounded ${i?"bg-gray-600":"bg-white"}`,children:[d.jsx("div",{className:`font-medium capitalize ${i?"text-gray-200":"text-gray-800"}`,children:I}),d.jsxs("div",{className:"flex space-x-1 mt-1",children:[A.view&&d.jsx("span",{className:"px-1 bg-green-100 text-green-800 rounded",children:"V"}),A.create&&d.jsx("span",{className:"px-1 bg-blue-100 text-blue-800 rounded",children:"C"}),A.edit&&d.jsx("span",{className:"px-1 bg-yellow-100 text-yellow-800 rounded",children:"E"}),A.delete&&d.jsx("span",{className:"px-1 bg-red-100 text-red-800 rounded",children:"D"})]})]},I))})]})]},_.id))})]}),s==="assignments"&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:`text-lg font-medium ${i?"text-white":"text-gray-900"}`,children:"User Role Assignments"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:[u.length," user",u.length!==1?"s":""," found"]}),d.jsx("button",{onClick:x,disabled:h,className:`px-3 py-1 text-xs rounded-md border transition-colors ${i?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Refreshing...":"Refresh"})]})]}),a?u.length===0?d.jsxs("div",{className:`text-center py-8 ${i?"text-gray-400":"text-gray-600"}`,children:[d.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),d.jsx("p",{children:"No users found for this company"}),d.jsx("p",{className:"text-sm mt-1",children:"Users will appear here once they join the company"})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:`min-w-full ${i?"text-gray-300":"text-gray-600"}`,children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${i?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"User"}),d.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Email"}),d.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Current Role"}),d.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Actions"})]})}),d.jsx("tbody",{children:u.map(_=>d.jsxs("tr",{className:`${i?"border-gray-700":"border-gray-200"} border-b hover:${i?"bg-gray-700":"bg-gray-50"} transition-colors`,children:[d.jsx("td",{className:"py-3 px-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium mr-3 ${i?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-700"}`,children:(_.display_name||_.email||"U").charAt(0).toUpperCase()}),d.jsx("span",{className:"font-medium",children:_.display_name||"Unknown User"})]})}),d.jsx("td",{className:"py-3 px-4",children:_.email}),d.jsx("td",{className:"py-3 px-4",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${_.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:_.role||"No Role"})}),d.jsx("td",{className:"py-3 px-4",children:d.jsxs("select",{value:_.role||"",onChange:I=>S(_.id,I.target.value),disabled:h,className:`px-3 py-1 rounded border text-sm min-w-[140px] ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-purple-500 ${h?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[d.jsx("option",{value:"",children:"Select Role"}),l.map(I=>d.jsx("option",{value:I.id,children:I.name},I.id))]})})]},_.id))})]})}):d.jsxs("div",{className:`text-center py-8 ${i?"text-gray-400":"text-gray-600"}`,children:[d.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),d.jsx("p",{children:"Please select a company to view user assignments"})]})]})]}),m&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-xl w-full max-w-2xl`,children:[d.jsxs("div",{className:`px-6 py-4 border-b ${i?"border-gray-700":"border-gray-200"} flex items-center justify-between`,children:[d.jsx("h3",{className:`text-lg font-semibold ${i?"text-white":"text-gray-900"}`,children:"Add New Role"}),d.jsx("button",{onClick:()=>v(!1),className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${i?"text-gray-400":"text-gray-500"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:`text-sm ${i?"text-gray-300":"text-gray-600"} mb-4`,children:"Custom role creation is not yet implemented. Currently, the system uses predefined roles (Administrator, Manager, Cashier, Salesperson) that cover most business needs."}),d.jsx("div",{className:"flex justify-end space-x-3",children:d.jsx("button",{onClick:()=>v(!1),className:`px-4 py-2 rounded-md border ${i?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} transition-colors`,children:"Close"})})]})]})}),g&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:d.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden`,children:[d.jsxs("div",{className:`px-6 py-4 border-b ${i?"border-gray-700":"border-gray-200"} flex items-center justify-between`,children:[d.jsxs("h3",{className:`text-lg font-semibold ${i?"text-white":"text-gray-900"}`,children:["Edit Role: ",g.name]}),d.jsx("button",{onClick:()=>y(null),className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${i?"text-gray-400":"text-gray-500"}`,children:d.jsx(va,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:`block text-sm font-medium ${i?"text-gray-300":"text-gray-700"} mb-2`,children:"Role Name"}),d.jsx("input",{type:"text",value:g.name,readOnly:!0,className:`w-full px-3 py-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-gray-300":"bg-gray-100 border-gray-300 text-gray-700"} cursor-not-allowed`})]}),d.jsxs("div",{children:[d.jsx("label",{className:`block text-sm font-medium ${i?"text-gray-300":"text-gray-700"} mb-2`,children:"Description"}),d.jsx("textarea",{value:g.description,readOnly:!0,rows:3,className:`w-full px-3 py-2 rounded-md border ${i?"bg-gray-700 border-gray-600 text-gray-300":"bg-gray-100 border-gray-300 text-gray-700"} cursor-not-allowed`})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`text-sm font-medium ${i?"text-gray-300":"text-gray-700"} mb-4`,children:"Permissions (Read-only)"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(g.permissions).map(([_,I])=>d.jsxs("div",{className:`p-4 rounded-lg border ${i?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[d.jsx("h5",{className:`font-medium capitalize mb-3 ${i?"text-gray-200":"text-gray-800"}`,children:_}),d.jsx("div",{className:"space-y-2",children:Object.entries(I).map(([A,O])=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:O,readOnly:!0,className:"mr-2 cursor-not-allowed"}),d.jsx("span",{className:`text-sm capitalize ${i?"text-gray-300":"text-gray-600"}`,children:A})]},A))})]},_))})]}),d.jsx("div",{className:`p-4 rounded-lg ${i?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:d.jsxs("p",{className:`text-sm ${i?"text-blue-300":"text-blue-700"}`,children:[d.jsx("strong",{children:"Note:"})," Role permissions are currently read-only. These predefined roles are designed to cover most business scenarios. Contact your system administrator if you need custom role configurations."]})})]})}),d.jsx("div",{className:`px-6 py-4 border-t ${i?"border-gray-700":"border-gray-200"} flex justify-end`,children:d.jsx("button",{onClick:()=>y(null),className:`px-4 py-2 rounded-md border ${i?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} transition-colors`,children:"Close"})})]})}),d.jsx("div",{className:`px-6 py-4 border-t ${i?"border-gray-700":"border-gray-200"} flex justify-end space-x-3`,children:d.jsx("button",{onClick:t,className:`px-4 py-2 rounded-md border ${i?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} transition-colors`,children:"Close"})})]})}):null},Iwe="https://pdxyqlxbucoghoetyzmv.supabase.co",Mwe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeHlxbHhidWNvZ2hvZXR5em12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0MjMyODAsImV4cCI6MjA1NDk5OTI4MH0.HlFAMTnjM-Uxlxu_VbhmZt_6dLgYsVyGRy_lu1foASc",nR=dN(Iwe,Mwe,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});let IS=!1;function Rwe(){if(IS)return()=>{};IS=!0,console.log("Initializing tab focus handler");const r=async()=>{if(document.visibilityState==="visible")try{const{data:{session:t},error:e}=await nR.auth.getSession();if(e)throw e;if(t){console.log("Refreshing session on tab focus");const{error:n}=await nR.auth.refreshSession();if(n)throw n}}catch(t){console.error("Error refreshing session:",t)}};return document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r),IS=!1}}const pz=({children:r})=>{var x,S;const t=vl(),e=pi(),{theme:n,toggleTheme:a}=zr(),{signOut:i}=Jc(),{userRole:s}=ts(),[o,l]=ie.useState(()=>{const _=localStorage.getItem("sidebarCollapsed");return window.innerWidth<768&&_===null?!0:_?JSON.parse(_):!1}),[c,u]=ie.useState(!1),[f,h]=ie.useState(window.innerWidth<768),p=()=>{const _=!o;l(_),localStorage.setItem("sidebarCollapsed",JSON.stringify(_))},g=()=>{u(!c)};ie.useEffect(()=>{const _=()=>{h(window.innerWidth<768),window.innerWidth<768&&!o&&(l(!0),localStorage.setItem("sidebarCollapsed",JSON.stringify(!0)))};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[o]),ie.useEffect(()=>{const _=Rwe();return()=>{_()}},[]),ie.useEffect(()=>{console.log("Current user role:",s)},[s]);const m=(()=>{const _=[{name:"Dashboard",href:"/role-selection",icon:Pu}];return s==="manager"||s==="admin"||s==="owner"?[{name:"Dashboard",href:"/role-selection",icon:Pu},{name:"Products",href:"/products",icon:Hn},{name:"Barcode Printing",href:"/barcode-printing",icon:Uc},{name:"Sales",href:"/sales",icon:ui},{name:"Purchase",href:"/purchase",icon:Tp},{name:"Customers",href:"/customers",icon:wn},{name:"Reports",href:"/reports",icon:Np},{name:"GST Settings",href:"/gst-settings",icon:tc},{name:"GST Reports",href:"/gst-reports",icon:lD},{name:"User Management",href:"/users",icon:wn}]:s==="cashier"?[{name:"Dashboard",href:"/role-selection",icon:Pu},{name:"Sales",href:"/sales",icon:ui},{name:"Products",href:"/products",icon:Hn},{name:"Barcode Printing",href:"/barcode-printing",icon:Uc},{name:"Customers",href:"/customers",icon:wn}]:s==="salesperson"?[{name:"Dashboard",href:"/role-selection",icon:Pu},{name:"Products",href:"/products",icon:Hn},{name:"Barcode Printing",href:"/barcode-printing",icon:Uc},{name:"Create Quotation",href:"/sales",icon:ui},{name:"Customers",href:"/customers",icon:wn}]:_})(),v=async()=>{await i(),e("/login")},b=_=>{e(_),f&&u(!1)};return d.jsx("div",{className:`min-h-screen ${n==="dark"?"dark bg-gray-900":"bg-gray-50"}`,children:d.jsxs("div",{className:"flex flex-col md:flex-row h-screen",children:[d.jsxs("header",{className:`md:hidden h-16 ${n==="dark"?"bg-gray-800":"bg-white"} shadow-sm flex items-center justify-between px-4 z-30`,children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:g,className:`p-2 rounded-md ${n==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,"aria-label":"Toggle menu",children:c?d.jsx(va,{className:"h-6 w-6"}):d.jsx(yD,{className:"h-6 w-6"})}),d.jsx("h1",{className:`font-bold text-lg ${n==="dark"?"text-white":"text-gray-900"}`,children:"Tallybooks"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:a,className:`p-2 rounded-md ${n==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,"aria-label":n==="dark"?"Switch to light mode":"Switch to dark mode",children:n==="dark"?d.jsx(Wv,{className:"h-5 w-5"}):d.jsx(zv,{className:"h-5 w-5"})}),d.jsx("button",{onClick:v,className:`p-2 rounded-md ${n==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,"aria-label":"Sign out",children:d.jsx(a6,{className:"h-5 w-5"})})]})]}),f&&c&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:g}),d.jsxs("div",{className:`
              ${f?`fixed top-16 bottom-0 left-0 z-40 ${c?"translate-x-0":"-translate-x-full"}`:"relative"}
              ${o?"w-20":"w-64"} 
              ${n==="dark"?"bg-gray-800":"bg-white"} 
              shadow-lg flex flex-col overflow-hidden transition-all duration-300 ease-in-out
            `,children:[!f&&d.jsx("button",{onClick:p,className:`absolute top-4 right-2 p-1.5 rounded-full ${n==="dark"?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"} z-10 transition-all duration-300 ${o?"rotate-180":""}`,"aria-label":o?"Expand sidebar":"Collapse sidebar",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:d.jsx("path",{d:"m15 18-6-6 6-6"})})}),!f&&d.jsxs("div",{className:`flex flex-col h-16 justify-center ${o?"px-2 items-center":"px-6"}`,children:[d.jsx("h1",{className:`font-bold ${o?"text-lg":"text-xl"} ${n==="dark"?"text-white":"text-gray-900"} truncate`,children:o?"TB":"Tallybooks"}),!o&&d.jsx("p",{className:`text-xs ${n==="dark"?"text-blue-400":"text-blue-500"}`,children:s?`${s.charAt(0).toUpperCase()+s.slice(1)} Dashboard`:"Dashboard"})]}),d.jsx("div",{className:`px-3 py-2 ${f?"block":"hidden"} md:block`,children:d.jsx(rm,{})}),d.jsx("nav",{className:`space-y-1 ${o&&!f?"px-2":"px-3"} flex-1 overflow-y-auto py-2`,children:m.map(_=>{const I=_.icon,A=t.pathname===_.href;return _.href==="/barcode-printing"&&console.log("Layout - Barcode Printing item:",{name:_.name,href:_.href,currentPath:t.pathname,isActive:A}),d.jsxs(Oa,{to:_.href,title:_.name,onClick:O=>{O.preventDefault(),b(_.href)},className:`
                      flex items-center ${o&&!f?"justify-center":""} 
                      px-3 py-3 rounded-md text-sm font-medium
                      ${A?"bg-blue-600 text-white":`${n==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`}
                    `,children:[d.jsx(I,{className:`${o&&!f?"":"mr-3"} h-5 w-5`}),(!o||f)&&_.name]},_.name)})})]}),d.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ease-in-out  ${f?"mt-16":""}`,children:[d.jsxs("header",{className:`hidden md:flex h-16 ${n==="dark"?"bg-gray-800":"bg-white"} shadow-sm items-center justify-between px-6`,children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(B8,{}),d.jsx("h2",{className:`text-lg font-semibold ${n==="dark"?"text-white":"text-gray-900"} truncate`,children:((x=m.find(_=>_.href===t.pathname))==null?void 0:x.name)||"Dashboard"})]}),d.jsx(rm,{})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:a,className:`p-2 rounded-md ${n==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,"aria-label":n==="dark"?"Switch to light mode":"Switch to dark mode",children:n==="dark"?d.jsx(Wv,{className:"h-5 w-5"}):d.jsx(zv,{className:"h-5 w-5"})}),d.jsx("button",{onClick:v,className:`p-2 rounded-md ${n==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,"aria-label":"Sign out",children:d.jsx(a6,{className:"h-5 w-5"})})]})]}),d.jsx("div",{className:`md:hidden px-4 py-3 ${n==="dark"?"bg-gray-800":"bg-white"} border-b ${n==="dark"?"border-gray-700":"border-gray-200"}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(B8,{}),d.jsx("h2",{className:`text-lg font-semibold ${n==="dark"?"text-white":"text-gray-900"} truncate`,children:((S=m.find(_=>_.href===t.pathname))==null?void 0:S.name)||"Dashboard"})]})}),d.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-6 ${n==="dark"?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:r})]})]})})},Fwe=()=>d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg flex items-center space-x-4",children:[d.jsx(mN,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 animate-spin"}),d.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Loading..."})]})}),Dwe=()=>{const{theme:r}=zr(),{userRole:t,permissions:e}=ts(),{selectedCompany:n}=ln(),a=r==="dark",[i,s]=ie.useState([]),[o,l]=ie.useState(!1),[c,u]=ie.useState(!1),[f,h]=ie.useState(!1),[,p]=ie.useState(null),[g,y]=ie.useState(!1),[m,v]=ie.useState(!1),[b,x]=ie.useState(null),[S,_]=ie.useState(!1),[I,A]=ie.useState(!1),[O,M]=ie.useState(!1),[z,U]=ie.useState(""),[,D]=ie.useState(!1),[T,R]=ie.useState(null),[C,N]=ie.useState(null),E=Z=>Z?d.jsxs("span",{className:"flex items-center text-green-500",children:[d.jsx(xK,{className:"w-4 h-4 mr-1"}),"Yes"]}):d.jsxs("span",{className:"flex items-center text-red-500",children:[d.jsx(va,{className:"w-4 h-4 mr-1"}),"No"]}),k=async()=>{if(!n){Ce.error("Please select a company first");return}l(!0),u(!0),p(null);try{console.log("Fetching users for company:",n.id);let Z,V;try{const B=await De.from("company_users").select(`
            user_id,
            role,
            is_active,
            created_at,
            auth_users (
              id,
              email,
              display_name,
              avatar_url,
              created_at
            )
          `).eq("company_id",n.id);if(Z=B.data,V=B.error,V)throw console.log("JOIN query failed, trying fallback approach:",V),V}catch(B){console.log("JOIN approach failed, using fallback method:",B);const{data:F,error:X}=await De.from("company_users").select("user_id, role, is_active, created_at").eq("company_id",n.id);if(X)throw console.error("Error fetching basic company users:",X),new Error("Failed to fetch company users");if(!F||F.length===0){s([]);return}const te=F.map(ue=>ue.user_id);let se=[];try{const{data:ue,error:oe}=await De.from("auth_users").select("id, email, display_name, avatar_url, created_at").in("id",te);!oe&&ue&&(se=ue)}catch(ue){console.log("Auth users table not accessible:",ue)}const ce=F.map(ue=>{const oe=se.find(le=>le.id===ue.user_id);return{id:ue.user_id,email:(oe==null?void 0:oe.email)||`user_${ue.user_id.substring(0,6)}@example.com`,display_name:(oe==null?void 0:oe.display_name)||`User ${ue.user_id.substring(0,6)}`,avatar_url:oe==null?void 0:oe.avatar_url,role:ue.role||"staff",is_active:ue.is_active!==!1,created_at:(oe==null?void 0:oe.created_at)||ue.created_at,last_sign_in_at:void 0}});s(ce);return}if(!Z||Z.length===0){s([]);return}const ee=Z.map(B=>{const F=Array.isArray(B.auth_users)?B.auth_users[0]:B.auth_users;return{id:B.user_id,email:(F==null?void 0:F.email)||`user_${B.user_id.substring(0,6)}@example.com`,display_name:(F==null?void 0:F.display_name)||`User ${B.user_id.substring(0,6)}`,avatar_url:F==null?void 0:F.avatar_url,role:B.role||"staff",is_active:B.is_active!==!1,created_at:(F==null?void 0:F.created_at)||B.created_at,last_sign_in_at:void 0}});s(ee),console.log("Successfully loaded users:",ee.length)}catch(Z){console.error("Error fetching users:",Z),p("Failed to load users"),Ce.error("Failed to load users. Please check the console for details.")}finally{l(!1),u(!1)}},P=()=>{k(),Ce.success("User data refreshed")},q=()=>{y(!0)},H=()=>{v(!0)},L=async()=>{if(!b||!n){Ce.error("Missing user or company information");return}M(!0),h(!0);try{const{error:Z}=await De.from("company_users").delete().eq("user_id",b.id).eq("company_id",n.id);if(Z)throw console.error("Error removing user from company_users:",Z),new Error("Failed to remove user from company");try{const{error:B}=await De.from("users").select("id").limit(1);if(!B||B.code!=="42P01"){const{error:F}=await De.from("users").delete().eq("id",b.id).eq("company_id",n.id);F&&console.error("Error removing from users table:",F)}}catch(B){console.log("Note: users table may not exist or another error occurred, skipping delete"),console.error(B)}const{data:V,error:ee}=await De.from("company_users").select("company_id").eq("user_id",b.id);if(ee&&console.error("Error checking remaining companies:",ee),!V||V.length===0){console.log("User is not associated with any companies anymore");const{error:B}=await De.from("auth_users").update({updated_at:new Date().toISOString()}).eq("id",b.id);B&&console.error("Error updating auth_users:",B)}Ce.success(`User ${b.display_name||b.email} removed from company`),A(!1),k()}catch(Z){console.error("Error deleting user:",Z),Ce.error(Z instanceof Error?Z.message:"Failed to delete user")}finally{M(!1),h(!1)}},K=i.filter(Z=>{var ee,B;if(!z)return!0;const V=z.toLowerCase();return((ee=Z.display_name)==null?void 0:ee.toLowerCase().includes(V))||!1||Z.email.toLowerCase().includes(V)||((B=Z.role)==null?void 0:B.toLowerCase().includes(V))||!1}),Y=Z=>{U(Z.target.value)};return ie.useEffect(()=>{k()},[]),ie.useEffect(()=>{n&&k()},[n]),d.jsx(pz,{children:d.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[(c||f)&&d.jsx(Fwe,{}),d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsx(Cwe,{isOpen:S,onClose:()=>_(!1),user:b,onUserUpdated:k}),d.jsx(uz,{isOpen:I,onClose:()=>A(!1),onConfirm:L,title:"Remove User",message:`Are you sure you want to remove ${(b==null?void 0:b.display_name)||(b==null?void 0:b.email)||"this user"} from ${(n==null?void 0:n.name)||"the company"}? This action cannot be undone.`,confirmText:"Remove User",cancelText:"Cancel",isLoading:O}),d.jsx(Pwe,{isOpen:g,onClose:()=>y(!1),onUserCreated:k}),d.jsx(Owe,{isOpen:m,onClose:()=>v(!1),onRoleUpdated:k}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold mb-2",children:"User Management"}),d.jsx("p",{className:`${a?"text-gray-300":"text-gray-600"}`,children:"Manage users, roles, and permissions for your organization"}),n&&d.jsx("div",{className:`mt-4 p-4 rounded-lg border ${a?"bg-gray-700 border-gray-600":"bg-blue-50 border-blue-200"}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Pi,{className:`w-5 h-5 ${a?"text-blue-400":"text-blue-600"}`}),d.jsxs("div",{children:[d.jsxs("h3",{className:`font-semibold ${a?"text-blue-400":"text-blue-800"}`,children:["Managing users for: ",n.name]}),d.jsxs("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:["Company ID: ",n.id]})]})]}),d.jsxs(Oa,{to:`/companies/${n.id}`,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700",children:[d.jsx("span",{children:"View Company"}),d.jsx(tA,{className:"w-4 h-4"})]})]})}),d.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4 transition-all duration-300",children:[d.jsxs("div",{className:"relative transform hover:scale-105 transition-transform",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(nd,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{type:"text",placeholder:"Search users...",value:z,onChange:Y,className:`pl-10 pr-4 py-2 w-full rounded-md border ${a?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300`})]}),d.jsxs("div",{className:"md:col-span-3 flex justify-end space-x-2",children:[d.jsxs("button",{onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center",children:[d.jsx(xD,{className:"w-4 h-4 mr-1"}),"Add User"]}),d.jsxs("button",{onClick:H,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center",children:[d.jsx(Ap,{className:"w-4 h-4 mr-1"}),"Manage Roles"]})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[d.jsxs("div",{className:`lg:col-span-2 p-6 rounded-lg shadow-md ${a?"bg-gray-800":"bg-white"}`,children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600 mr-3",children:d.jsx(wn,{className:"h-6 w-6"})}),d.jsx("h2",{className:"text-xl font-semibold",children:"User List"})]}),d.jsx("p",{className:`mb-4 ${a?"text-gray-300":"text-gray-600"}`,children:"View and manage all users in your organization"}),d.jsxs("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(nc,{className:"w-4 h-4 mr-1 inline"}),"Refresh Users"]}),K.length>0?d.jsx("div",{className:"mt-4 overflow-x-auto",children:d.jsxs("table",{className:`min-w-full ${a?"text-gray-300":"text-gray-600"}`,children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Email"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Role"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Company"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Status"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),d.jsx("tbody",{children:K.map(Z=>d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b hover:bg-gray-50 dark:hover:bg-gray-700`,children:[d.jsx("td",{className:"py-3 px-4 font-medium",children:Z.display_name||"Unknown"}),d.jsx("td",{className:"py-3 px-4",children:Z.email}),d.jsx("td",{className:"py-3 px-4 capitalize",children:Z.role||"Not assigned"}),d.jsx("td",{className:"py-3 px-4",children:n&&d.jsxs(Oa,{to:`/companies/${n.id}`,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"View Company Details",children:[d.jsx(Pi,{className:"w-4 h-4"}),d.jsx("span",{className:"truncate max-w-24",children:n.name}),d.jsx(tA,{className:"w-3 h-3"})]})}),d.jsx("td",{className:"py-3 px-4",children:d.jsx("button",{onClick:async V=>{if(V.stopPropagation(),!n){Ce.error("Please select a company first");return}N(Z.id);try{const ee=!Z.is_active,{error:B}=await De.from("company_users").update({is_active:ee,updated_at:new Date().toISOString()}).eq("user_id",Z.id).eq("company_id",n.id);B?(console.error("Error updating user status:",B),Ce.error("Failed to update user status")):(Ce.success(`User ${ee?"activated":"deactivated"} successfully`),k())}catch(ee){console.error("Error updating user status:",ee),Ce.error("Failed to update user status")}finally{N(null)}},disabled:C===Z.id,className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full transition-colors hover:opacity-80 ${C===Z.id?"opacity-50 cursor-not-allowed":Z.is_active!==!1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 hover:bg-green-200 dark:hover:bg-green-800":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 hover:bg-red-200 dark:hover:bg-red-800"}`,title:`Click to ${Z.is_active!==!1?"deactivate":"activate"} user`,children:C===Z.id?d.jsxs("div",{className:"flex items-center",children:[d.jsx(nc,{className:"w-3 h-3 mr-1 animate-spin"}),"Updating..."]}):Z.is_active!==!1?"Active":"Inactive"})}),d.jsx("td",{className:"py-3 px-4",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:V=>{V.stopPropagation(),x(Z),_(!0),D(!0),R(Z.id)},className:`text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 ${T===Z.id?"opacity-50":""}`,title:"Edit User",children:d.jsx(Ih,{className:"h-4 w-4"})}),d.jsx("button",{onClick:V=>{V.stopPropagation(),x(Z),A(!0)},className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Remove User",children:d.jsx(Xu,{className:"h-4 w-4"})})]})})]},Z.id))})]})}):d.jsx("div",{className:`mt-4 p-6 text-center rounded-lg ${a?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:z?d.jsxs("p",{children:['No users found matching "',z,'". Try a different search term or clear the search.']}):d.jsx("p",{children:"No users found. Add users to get started."})}),o&&d.jsx("div",{className:"flex justify-center items-center p-4 mt-4",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white"})})]}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${a?"bg-gray-800":"bg-white"}`,children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"p-2 rounded-full bg-purple-100 text-purple-600 mr-3",children:d.jsx(CK,{className:"h-6 w-6"})}),d.jsx("h2",{className:"text-xl font-semibold",children:"Role Management"})]}),d.jsx("p",{className:`mb-4 ${a?"text-gray-300":"text-gray-600"}`,children:"Manage roles and permissions"}),d.jsx("button",{onClick:H,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Manage Roles"})]})]}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${a?"bg-gray-800":"bg-white"} mb-8`,children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"p-2 rounded-full bg-orange-100 text-orange-600 mr-3",children:d.jsx(Vc,{className:"h-6 w-6"})}),d.jsx("h2",{className:"text-xl font-semibold",children:"User Settings"})]}),d.jsx("p",{className:`mb-4 ${a?"text-gray-300":"text-gray-600"}`,children:"Configure default user settings and permissions"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:`p-4 rounded-md ${a?"bg-gray-700":"bg-gray-100"}`,children:[d.jsx("h3",{className:"font-medium mb-2",children:"Default Permissions"}),d.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:"Set default permissions for new users"})]}),d.jsxs("div",{className:`p-4 rounded-md ${a?"bg-gray-700":"bg-gray-100"}`,children:[d.jsx("h3",{className:"font-medium mb-2",children:"Password Policy"}),d.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:"Configure password requirements and expiration"})]})]})]}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${a?"bg-gray-800":"bg-white"} mb-8`,children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600 mr-3",children:d.jsx(Ap,{className:"h-6 w-6"})}),d.jsx("h2",{className:"text-xl font-semibold",children:"Your Permissions"})]}),d.jsxs("p",{className:`mb-4 ${a?"text-gray-300":"text-gray-600"}`,children:["Current role: ",d.jsx("span",{className:"font-semibold",children:t?t.charAt(0).toUpperCase()+t.slice(1):"Not assigned"})]}),e&&d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:`min-w-full ${a?"text-gray-300":"text-gray-600"}`,children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("th",{className:"py-3 px-4 text-left",children:"Module"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"View"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Create"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Edit"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Delete"})]})}),d.jsx("tbody",{children:Object.entries(e).map(([Z,V])=>d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"py-3 px-4 font-medium capitalize",children:Z}),d.jsx("td",{className:"py-3 px-4",children:E(V.view)}),d.jsx("td",{className:"py-3 px-4",children:E(V.create)}),d.jsx("td",{className:"py-3 px-4",children:E(V.edit)}),d.jsx("td",{className:"py-3 px-4",children:E(V.delete)})]},Z))})]})}),!e&&d.jsx("div",{className:`p-4 rounded-md ${a?"bg-gray-700":"bg-gray-100"}`,children:d.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:"No permissions data available. Please contact your administrator."})})]}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${a?"bg-gray-800":"bg-white"}`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Activity"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:`min-w-full ${a?"text-gray-300":"text-gray-600"}`,children:[d.jsx("thead",{children:d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Action"}),d.jsx("th",{className:"py-3 px-4 text-left",children:"Date & Time"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"py-3 px-4",children:"Admin User"}),d.jsx("td",{className:"py-3 px-4",children:"Logged in"}),d.jsx("td",{className:"py-3 px-4",children:"Today, 10:30 AM"})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"py-3 px-4",children:"Manager User"}),d.jsx("td",{className:"py-3 px-4",children:"Updated profile"}),d.jsx("td",{className:"py-3 px-4",children:"Today, 9:15 AM"})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"py-3 px-4",children:"Cashier User"}),d.jsx("td",{className:"py-3 px-4",children:"Password changed"}),d.jsx("td",{className:"py-3 px-4",children:"Yesterday, 4:45 PM"})]}),d.jsxs("tr",{className:`${a?"border-gray-700":"border-gray-200"} border-b`,children:[d.jsx("td",{className:"py-3 px-4",children:"Salesperson User"}),d.jsx("td",{className:"py-3 px-4",children:"Password changed"}),d.jsx("td",{className:"py-3 px-4",children:"Yesterday, 4:45 PM"})]})]})]})})]})]})})};async function Lwe(){try{console.log("Starting company settings initialization...");const{data:{user:r},error:t}=await De.auth.getUser();if(t)return console.error("Auth error:",t),!1;if(!r)return console.error("No authenticated user found"),!1;console.log("Current user:",r.id);const{data:e,error:n}=await De.from("companies").select(`
        *,
        company_users!inner (
          role,
          is_active
        )
      `).eq("company_users.user_id",r.id).eq("company_users.is_active",!0);if(n)return console.error("Error fetching companies:",n),!1;if(console.log(`Found ${(e==null?void 0:e.length)||0} companies for user`),!e||e.length===0){console.log("Creating a default company for the user...");const{data:a,error:i}=await De.rpc("create_company_and_link_admin",{company_name:"My Company",p_legal_name:"My Legal Company Name",p_tax_number:"",p_email:r.email||"",p_phone:"",p_website:"",p_address_street:"",p_address_city:"",p_address_state:"",p_address_postal_code:"",p_address_country:"India"});if(i)return console.error("Error creating company:",i),!1;console.log("Created default company with ID:",a);const{data:s,error:o}=await De.from("company_settings").select("*").eq("company_id",a).single();if(o&&o.code!=="PGRST116"&&console.error("Error checking company settings:",o),!s){console.log("Creating default company settings...");const{error:u}=await De.from("company_settings").insert({company_id:a,currency:"INR",timezone:"Asia/Kolkata",fiscal_year_start:"04-01",enable_multi_branch:!1,enable_stock_alerts:!0,low_stock_threshold:10,invoice_prefix:"INV",invoice_starting_number:1,app_lock_enabled:!1,auto_logout_timer:30});if(u)return console.error("Error creating company settings:",u),!1;console.log("Created default company settings")}const{data:l,error:c}=await De.from("tax_settings").select("*").eq("company_id",a).single();if(c&&c.code!=="PGRST116"&&console.error("Error checking tax settings:",c),!l){console.log("Creating default tax settings...");const{error:u}=await De.from("tax_settings").insert({company_id:a,tax_type:"split",tax_inclusive:!1,cess_enabled:!1});if(u)return console.error("Error creating tax settings:",u),!1;console.log("Created default tax settings")}return!0}for(const a of e){const i=a.id;console.log(`Checking settings for company: ${a.name} (${i})`);const{data:s,error:o}=await De.from("company_settings").select("*").eq("company_id",i).single();if(o&&o.code!=="PGRST116"&&console.error("Error checking company settings:",o),s)console.log(`Found existing settings for company ${i}`);else{console.log(`No settings found for company ${i}, creating default settings...`);const{error:u}=await De.from("company_settings").insert({company_id:i,currency:"INR",timezone:"Asia/Kolkata",fiscal_year_start:"04-01",enable_multi_branch:!1,enable_stock_alerts:!0,low_stock_threshold:10,invoice_prefix:"INV",invoice_starting_number:1,app_lock_enabled:!1,auto_logout_timer:30});u?console.error("Error creating company settings:",u):console.log(`Created settings for company ${i}`)}const{data:l,error:c}=await De.from("tax_settings").select("*").eq("company_id",i).single();if(c&&c.code!=="PGRST116"&&console.error("Error checking tax settings:",c),l)console.log(`Found existing tax settings for company ${i}`);else{console.log(`No tax settings found for company ${i}, creating default tax settings...`);const{error:u}=await De.from("tax_settings").insert({company_id:i,tax_type:"split",tax_inclusive:!1,cess_enabled:!1});u?console.error("Error creating tax settings:",u):console.log(`Created tax settings for company ${i}`)}}return!0}catch(r){return console.error("Error in createDefaultCompanySettings:",r),!1}}const Bwe=({isOpen:r,onClose:t,companyId:e})=>{const{theme:n}=zr(),a=n==="dark",[i,s]=ie.useState(null),[o,l]=ie.useState(null),[c,u]=ie.useState(!0),[f,h]=ie.useState(!1),[p,g]=ie.useState(!1),[y,m]=ie.useState(null);ie.useEffect(()=>{r&&v()},[r,e]);const v=async()=>{if(console.log("Loading company settings for company ID:",e),!e){console.error("No company ID provided for settings load"),Ce.error("Invalid company ID");return}u(!0);try{const{data:_,error:I}=await De.from("company_settings").select("*").eq("company_id",e).single();if(I)if(console.error("Error loading company settings:",I),I.code==="PGRST116"||I.code==="42P01"){console.log("No settings found, creating minimal settings for company:",e);const U={company_id:e,currency:"INR",timezone:"Asia/Kolkata",fiscal_year_start:"04-01",default_tax_rate:null,enable_multi_branch:!1,enable_stock_alerts:!0,low_stock_threshold:10,invoice_prefix:"INV",invoice_starting_number:1},{error:D}=await De.from("company_settings").insert(U);if(D)if(console.error("Error creating company settings:",D),D.code==="23505"){console.log("Settings already exist, fetching existing settings...");const{data:T,error:R}=await De.from("company_settings").select("*").eq("company_id",e).single();if(R)throw R;const C=T||{};(C.enable_barcode===void 0||C.enable_barcode===null)&&(C.enable_barcode=!0);const{data:N,error:E}=await De.from("companies").select("business_type").eq("id",e).single();let k=null;N&&!E&&(k=(N==null?void 0:N.business_type)??null),s(C),m({settings:C,businessType:k}),g(!1),u(!1);return}else throw new Error("Failed to create company settings: "+D.message);else{const T={...U,enable_barcode:!0},{data:R,error:C}=await De.from("companies").select("business_type").eq("id",e).single();let N=null;R&&!C&&(N=(R==null?void 0:R.business_type)??null),s(T),m({settings:T,businessType:N}),g(!1),u(!1);return}}else throw I;const A=_||{};(A.enable_barcode===void 0||A.enable_barcode===null)&&(A.enable_barcode=!0);const{data:O,error:M}=await De.from("companies").select("business_type").eq("id",e).single();let z=null;O&&!M?z=(O==null?void 0:O.business_type)??null:M&&console.warn("Could not load business_type (may not exist yet):",M.message),s(A),l(z),m({settings:A,businessType:z}),g(!1)}catch(_){console.error("Error loading company settings:",_),Ce.error("Failed to load company settings: "+_.message)}finally{u(!1)}},b=(_,I)=>{if(!y){g(!0);return}g(JSON.stringify(_)!==JSON.stringify(y.settings)||I!==y.businessType)},x=(_,I)=>{if(!i)return;if(_==="app_lock_pin"){const O=I.toString().replace(/\D/g,"").slice(0,4),M={...i,[_]:O};s(M),b(M,o);return}const A={...i,[_]:I};s(A),b(A,o)},S=async()=>{if(i){h(!0);try{const{data:_}=await De.from("company_settings").select("id").eq("company_id",e).single();let I;if(_){const A={...i};delete A.id;const{error:O}=await De.from("company_settings").update(A).eq("company_id",e);I=O}else{const A={...i,company_id:e},{error:O}=await De.from("company_settings").insert(A);I=O}if(I){const A=I.code,O=I.message||I.toString();if(A==="42703"||O.toLowerCase().includes("column")&&O.toLowerCase().includes("does not exist")){let M={...i,company_id:e};["enable_barcode","purchase_invoice_prefix","purchase_invoice_starting_number","default_print_format","app_lock_enabled","app_lock_pin","auto_logout_timer"].forEach(D=>{M.hasOwnProperty(D)&&delete M[D]});let U;if(_){delete M.id;const{error:D}=await De.from("company_settings").update(M).eq("company_id",e);U=D}else{const{error:D}=await De.from("company_settings").insert(M);U=D}if(U)throw U;console.warn("Saved company_settings with reduced schema (missing columns).")}else throw I}try{const{error:A}=await De.from("companies").update({business_type:o}).eq("id",e);if(A){const O=A.code,M=A.message||A.toString();if(O==="42703"||O==="42P01")console.warn("Skipping business_type update (schema not ready):",M);else if(M!=null&&M.toLowerCase().includes("permission")||M!=null&&M.toLowerCase().includes("rls")||O==="401")console.warn("Skipping business_type update due to permissions/RLS:",M);else throw A}}catch(A){if(A&&typeof A=="object"){const O=A.code,M=A.message||String(A);if(!(O==="42703"||O==="42P01"||M.toLowerCase().includes("permission")||M.toLowerCase().includes("rls")))throw A}else throw A}Ce.success("Settings saved successfully"),m({settings:i,businessType:o}),g(!1),t()}catch(_){console.error("Error saving settings:",_);const I=_&&typeof _=="object"&&_.message?_.message:"Failed to save settings";Ce.error(I)}finally{h(!1)}}};return r?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),d.jsxs("div",{className:`relative w-full max-w-4xl transform rounded-lg ${a?"bg-gray-800":"bg-white"} p-6 shadow-xl transition-all`,children:[d.jsx("div",{className:"flex items-center justify-between mb-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(bD,{className:"w-6 h-6 mr-2"}),d.jsx("h2",{className:"text-xl font-semibold",children:"Company Settings"})]})}),c?d.jsx("div",{className:"flex justify-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"border-b pb-6",children:[d.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[d.jsx(Pi,{className:"w-5 h-5 mr-2"}),"General Settings"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Currency"}),d.jsxs("select",{value:i.currency,onChange:_=>x("currency",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[d.jsx("option",{value:"INR",children:"Indian Rupee ()"}),d.jsx("option",{value:"USD",children:"US Dollar ($)"}),d.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timezone"}),d.jsxs("select",{value:i.timezone,onChange:_=>x("timezone",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[d.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"}),d.jsx("option",{value:"America/New_York",children:"America/New_York"}),d.jsx("option",{value:"Europe/London",children:"Europe/London"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fiscal Year Start"}),d.jsx("input",{type:"text",value:i.fiscal_year_start,onChange:_=>x("fiscal_year_start",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"MM-DD"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Type"}),d.jsxs("select",{value:o||"",onChange:_=>l(_.target.value||null),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[d.jsx("option",{value:"",children:"Select Business Type"}),d.jsx("option",{value:"Garments",children:"Garments"}),d.jsx("option",{value:"Footwear",children:"Footwear"}),d.jsx("option",{value:"Food",children:"Food"}),d.jsx("option",{value:"Bakery",children:"Bakery"}),d.jsx("option",{value:"Kirana",children:"Kirana"}),d.jsx("option",{value:"Confectionery",children:"Confectionery"}),d.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),d.jsxs("div",{className:"border-b pb-6",children:[d.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[d.jsx(jp,{className:"w-5 h-5 mr-2"}),"Invoice Settings"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sales Invoice Prefix"}),d.jsx("input",{type:"text",value:i.invoice_prefix,onChange:_=>x("invoice_prefix",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"INV"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sales Starting Number"}),d.jsx("input",{type:"number",value:i.invoice_starting_number,onChange:_=>x("invoice_starting_number",parseInt(_.target.value)||1),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purchase Invoice Prefix"}),d.jsx("input",{type:"text",value:i.purchase_invoice_prefix||"PUR",onChange:_=>x("purchase_invoice_prefix",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"PUR"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purchase Starting Number"}),d.jsx("input",{type:"number",value:i.purchase_invoice_starting_number||1,onChange:_=>x("purchase_invoice_starting_number",parseInt(_.target.value)||1),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Print Format"}),d.jsxs("select",{value:i.default_print_format||"a4",onChange:_=>x("default_print_format",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[d.jsx("option",{value:"a4",children:"A4 Paper (Standard Invoice)"}),d.jsx("option",{value:"thermal",children:"36 Roll Thermal Paper"})]})]})]})]}),d.jsxs("div",{className:"border-b pb-6",children:[d.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[d.jsx(Xi,{className:"w-5 h-5 mr-2"}),"Inventory Settings"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:i.enable_stock_alerts,onChange:_=>x("enable_stock_alerts",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("label",{className:"ml-2 block text-sm",children:"Enable Stock Alerts"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Low Stock Threshold"}),d.jsx("input",{type:"number",value:i.low_stock_threshold,onChange:_=>x("low_stock_threshold",parseInt(_.target.value)||0),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,min:"0"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:i.enable_barcode??!0,onChange:_=>x("enable_barcode",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("label",{className:"ml-2 block text-sm",children:"Enable Barcode"})]})]})]}),d.jsxs("div",{className:"border-b pb-6",children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:"Security"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:i.app_lock_enabled??!1,onChange:_=>x("app_lock_enabled",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("label",{className:"ml-2 block text-sm",children:"App Lock"})]}),i.app_lock_enabled&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"PIN"}),d.jsx("input",{type:"password",value:i.app_lock_pin||"",onChange:_=>x("app_lock_pin",_.target.value),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Enter 4-digit PIN"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Auto Logout Timer (minutes)"}),d.jsx("input",{type:"number",value:i.auto_logout_timer||30,onChange:_=>x("auto_logout_timer",parseInt(_.target.value)||30),className:`w-full rounded-md border px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,min:"1",max:"120"})]}),d.jsx("div",{children:d.jsx(lt,{variant:"secondary",size:"sm",children:"View Logs"})})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(lt,{variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(lt,{variant:"primary",onClick:S,disabled:!p||f,children:f?"Saving...":"Save Changes"})]})]}):d.jsxs("div",{className:"py-8 text-center",children:[d.jsx("p",{className:"text-red-500",children:"Failed to load company settings"}),d.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[d.jsx(lt,{variant:"secondary",size:"sm",onClick:v,children:"Retry"}),d.jsx(lt,{variant:"primary",size:"sm",onClick:async()=>{u(!0);try{if(await Lwe())Ce.success("Company settings initialized successfully"),await v();else{console.log("Manual creation of company settings...");const{error:I}=await De.from("company_settings").insert({company_id:e,currency:"INR",timezone:"Asia/Kolkata",fiscal_year_start:"04-01",default_tax_rate:null,enable_multi_branch:!1,enable_stock_alerts:!0,low_stock_threshold:10,invoice_prefix:"INV",invoice_starting_number:1,purchase_invoice_prefix:"PUR",purchase_invoice_starting_number:1,enable_barcode:!0,app_lock_enabled:!1,auto_logout_timer:30});if(I)throw I;Ce.success("Company settings created successfully"),await v()}}catch(_){console.error("Error creating company settings:",_),Ce.error("Failed to create company settings")}finally{u(!1)}},children:"Create Settings"})]})]})]})]})}):null},aR=({openAddModal:r=!1})=>{const{theme:t}=zr(),e=t==="dark",{refresh:n,companies:a,loading:i,error:s,fetchCompanies:o,setSelectedCompany:l}=uK(),[c,u]=ie.useState(r),[f,h]=ie.useState(null),[p,g]=ie.useState(null),[y,m]=ie.useState(null),[v,b]=ie.useState(""),[x,S]=ie.useState("grid"),[_,I]=ie.useState("all"),A=pi();ie.useEffect(()=>{console.log("Companies component state:",{loading:i,error:s,companiesCount:a.length})},[i,s,a]),ie.useEffect(()=>{u(r)},[r]);const O=a.filter(T=>{var N,E,k;const R=T.name.toLowerCase().includes(v.toLowerCase())||((N=T.legal_name)==null?void 0:N.toLowerCase().includes(v.toLowerCase()))||((E=T.tax_number)==null?void 0:E.toLowerCase().includes(v.toLowerCase()))||((k=T.email)==null?void 0:k.toLowerCase().includes(v.toLowerCase())),C=_==="all"||T.subscription_status===_;return R&&C}),M=T=>{switch(T){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 border-green-200 dark:border-green-800";case"trial":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 border-blue-200 dark:border-blue-800";case"expired":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 border-red-200 dark:border-red-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400 border-gray-200 dark:border-gray-800"}},z=T=>{switch(T){case"active":return d.jsx(dD,{className:"w-4 h-4"});case"trial":return d.jsx(K0,{className:"w-4 h-4"});case"expired":return d.jsx(Wn,{className:"w-4 h-4"});default:return null}},U=({company:T})=>d.jsxs("div",{className:`rounded-xl border shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden group flex flex-col justify-between min-h-[240px] ${e?"bg-gray-800 border-gray-700 text-gray-100":"bg-white border-gray-900 text-gray-900"}`,style:{padding:"1rem",gap:"0.5rem"},children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[T.logo_url?d.jsx("img",{src:T.logo_url,alt:`${T.name} logo`,className:"h-10 w-10 object-contain rounded",style:{maxHeight:"40px",maxWidth:"40px"},onError:R=>{var E;const C=R.target;C.onerror=null,C.style.display="none";const N=(E=C.parentElement)==null?void 0:E.querySelector(".logo-fallback");N&&(N.style.display="flex")}}):d.jsx("div",{className:"logo-fallback flex items-center justify-center text-gray-400 h-10 w-10",children:d.jsx(Pi,{className:"w-7 h-7"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-base font-semibold line-clamp-1 mb-0.5",children:T.name}),d.jsx("span",{className:`text-xs font-medium capitalize ${T.subscription_status==="active"?"text-green-500":"text-gray-400"}`,children:T.subscription_status})]})]}),d.jsx("div",{className:"flex items-center gap-1",children:z(T.subscription_status)})]}),d.jsxs("div",{className:"flex-1 text-xs space-y-1 mb-2",children:[T.tax_number&&d.jsxs("div",{className:"flex items-center",children:[d.jsx(n6,{className:"w-3 h-3 mr-2 text-gray-400"}),d.jsxs("span",{className:"truncate",children:["GST: ",T.tax_number]})]}),(T.address_street||T.address_city||T.address_state)&&d.jsxs("div",{className:"flex items-start",children:[d.jsx(gN,{className:"w-3 h-3 mr-2 mt-0.5 text-gray-400"}),d.jsx("span",{className:"truncate",children:[T.address_street,T.address_city,T.address_state,T.address_postal_code].filter(Boolean).join(", ")})]}),T.phone&&d.jsxs("div",{className:"flex items-center",children:[d.jsx(jx,{className:"w-3 h-3 mr-2 text-gray-400"}),d.jsx("span",{className:"truncate",children:T.phone})]}),T.email&&d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ep,{className:"w-3 h-3 mr-2 text-gray-400"}),d.jsx("span",{className:"truncate",children:T.email})]})]}),d.jsxs("div",{className:`flex items-center justify-center gap-3 mt-2 rounded-lg px-2 py-2 ${e?"bg-gray-700":"bg-gray-100"}`,children:[d.jsx(lt,{variant:"primary",size:"sm",leftIcon:d.jsx(Np,{className:"w-5 h-5"}),onClick:()=>{l(T),window.location.href="/"},className:"min-w-[110px]",children:"Dashboard"}),T.role&&["owner","admin"].includes(T.role)&&d.jsxs(d.Fragment,{children:[d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(Ih,{className:"w-5 h-5"}),onClick:()=>m({id:T.id,name:T.name}),className:"min-w-[90px]",children:"Edit"}),d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(Vc,{className:"w-5 h-5"}),onClick:()=>{if(console.log("Opening settings for company:",T.id),!T.id){Ce.error("Invalid company ID");return}g({id:T.id,name:T.name})},className:"min-w-[110px]",children:"Settings"}),T.role==="owner"&&d.jsx(lt,{variant:"danger",size:"sm",onClick:()=>h({id:T.id,name:T.name}),className:"min-w-[40px]",children:d.jsx(Xu,{className:"w-5 h-5"})})]})]})]}),D=({company:T})=>d.jsx("div",{className:`rounded-lg border p-6 hover:shadow-md transition-all duration-200
  ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:`w-16 h-16 ${e?"bg-gray-700":"bg-gray-100"} rounded-lg flex items-center justify-center flex-shrink-0`,children:[T.logo_url?d.jsx("img",{src:T.logo_url,alt:`${T.name} logo`,className:"w-full h-full object-cover rounded-lg",onError:R=>{var E;const C=R.target;C.onerror=null,C.style.display="none";const N=(E=C.parentElement)==null?void 0:E.querySelector(".logo-fallback");N&&(N.style.display="flex")}}):d.jsx("div",{className:"logo-fallback flex flex-col items-center justify-center text-gray-400",children:d.jsx(Pi,{className:"w-8 h-8"})}),T.logo_url&&d.jsx("div",{className:"logo-fallback hidden items-center justify-center text-gray-400 absolute inset-0 bg-gray-100 dark:bg-gray-700 rounded-lg",children:d.jsx(Pi,{className:"w-8 h-8"})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h3",{className:"text-lg font-semibold truncate",children:T.name}),d.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 border ml-4 ${M(T.subscription_status)}`,children:[z(T.subscription_status),d.jsx("span",{className:"capitalize",children:T.subscription_status})]})]}),T.legal_name&&d.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"} mb-2`,children:T.legal_name}),d.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[T.tax_number&&d.jsxs("div",{className:"flex items-center",children:[d.jsx(n6,{className:"w-4 h-4 mr-2 text-gray-400"}),d.jsxs("span",{children:["GST: ",T.tax_number]})]}),T.email&&d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ep,{className:"w-4 h-4 mr-2 text-gray-400"}),d.jsx("span",{className:"truncate",children:T.email})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(wn,{className:"w-4 h-4 mr-2 text-gray-400"}),d.jsx("span",{children:T.role})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[d.jsx(lt,{variant:"primary",size:"sm",leftIcon:d.jsx(Np,{className:"w-4 h-4"}),onClick:()=>{l(T),window.location.href="/"},children:"Dashboard"}),T.role&&["owner","admin"].includes(T.role)&&d.jsxs(d.Fragment,{children:[d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(Ih,{className:"w-4 h-4"}),onClick:()=>m({id:T.id,name:T.name}),children:"Edit"}),d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(Vc,{className:"w-4 h-4"}),onClick:()=>{if(console.log("Opening settings for company (list view):",T.id),!T.id){Ce.error("Invalid company ID");return}g({id:T.id,name:T.name})},children:"Settings"}),T.role==="owner"&&d.jsx(lt,{variant:"danger",size:"sm",onClick:()=>h({id:T.id,name:T.name}),children:d.jsx(Xu,{className:"w-4 h-4"})})]})]})]})});return d.jsx("div",{className:`min-h-screen w-full bg-gray-900 py-8 px-4 ${e?"text-gray-100":"text-gray-900"}`,children:d.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[d.jsx(lt,{variant:"secondary",onClick:()=>A(-1),leftIcon:d.jsx(hN,{className:"w-4 h-4"}),className:"mb-4",children:"Back"}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Companies"}),d.jsx("p",{className:`mt-2 ${e?"text-gray-400":"text-gray-500"}`,children:"Manage your companies and their settings"})]}),d.jsx(lt,{variant:"primary",onClick:()=>u(!0),leftIcon:d.jsx(ml,{className:"w-4 h-4"}),className:"w-full sm:w-auto",children:"Add Company"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(nd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Search companies...",value:v,onChange:T=>b(T.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${e?"bg-gray-800 border-gray-700 text-gray-100 placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("select",{value:_,onChange:T=>I(T.target.value),className:`px-3 py-2 rounded-lg border ${e?"bg-gray-800 border-gray-700 text-gray-100":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"trial",children:"Trial"}),d.jsx("option",{value:"expired",children:"Expired"})]}),d.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[d.jsx("button",{onClick:()=>S("grid"),className:`p-2 ${x==="grid"?"bg-blue-500 text-white":e?"bg-gray-800 text-gray-400":"bg-white text-gray-600"}`,children:d.jsx(mD,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>S("list"),className:`p-2 ${x==="list"?"bg-blue-500 text-white":e?"bg-gray-800 text-gray-400":"bg-white text-gray-600"}`,children:d.jsx(gD,{className:"w-4 h-4"})})]})]})]}),d.jsxs("div",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:[O.length," of ",a.length," companies"]}),s&&d.jsx("div",{className:`p-4 rounded-lg border ${e?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Wn,{className:"w-5 h-5 text-red-500 mr-3"}),d.jsx("p",{className:"text-red-600 dark:text-red-400",children:s})]})}),i?d.jsx("div",{className:x==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:[1,2,3].map(T=>d.jsxs("div",{className:`animate-pulse ${e?"bg-gray-800":"bg-white"} rounded-lg p-6 shadow-sm`,children:[d.jsx("div",{className:"h-6 bg-gray-400 rounded w-3/4 mb-4"}),d.jsx("div",{className:"h-4 bg-gray-400 rounded w-1/2 mb-2"}),d.jsx("div",{className:"h-4 bg-gray-400 rounded w-2/3"})]},T))}):O.length===0?d.jsxs("div",{className:"text-center py-16",children:[d.jsx(Pi,{className:"w-20 h-20 mx-auto mb-6 text-gray-400"}),d.jsx("h2",{className:"text-2xl font-semibold mb-3",children:a.length===0?"No Companies Yet":"No Companies Found"}),d.jsx("p",{className:`${e?"text-gray-400":"text-gray-500"} max-w-md mx-auto mb-8`,children:a.length===0?"Get started by creating your first company to manage inventory, sales, and more.":"Try adjusting your search or filter criteria."}),a.length===0&&d.jsx(lt,{variant:"primary",onClick:()=>u(!0),leftIcon:d.jsx(ml,{className:"w-4 h-4"}),children:"Create Company"})]}):d.jsx("div",{className:x==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:O.map(T=>x==="grid"?d.jsx(U,{company:T},T.id):d.jsx(D,{company:T},T.id))}),d.jsx(Jb,{isOpen:c,onClose:()=>u(!1),onSuccess:()=>{o(),n()},title:"Create New Company"}),y&&d.jsx(IU,{isOpen:!0,onClose:()=>m(null),companyId:y.id,onCompanyUpdated:()=>{o(),n()}}),p&&d.jsx(Bwe,{isOpen:!0,onClose:()=>g(null),companyId:p.id}),f&&d.jsx(MU,{isOpen:!0,onClose:()=>h(null),companyId:f.id,companyName:f.name,onRemoved:n})]})})},$we=({title:r,description:t,icon:e,role:n,onSelect:a,isSelected:i,permissions:s})=>{const{theme:o}=zr(),[l,c]=ie.useState(!1);return d.jsx("div",{className:`p-4 md:p-6 rounded-lg shadow-md cursor-pointer transition-all duration-200 ${i?"bg-blue-50 dark:bg-blue-900 border-2 border-blue-500 dark:border-blue-400 transform scale-102":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 border-2 border-transparent"}`,onClick:()=>a(n),children:d.jsxs("div",{className:"flex flex-col items-center text-center",children:[d.jsxs("div",{className:"flex items-center w-full",children:[d.jsx("div",{className:`p-3 rounded-full ${i?"bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:e}),d.jsxs("div",{className:"ml-4 text-left flex-1",children:[d.jsx("h3",{className:"text-lg md:text-xl font-medium text-gray-900 dark:text-white",children:r}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]})]}),d.jsxs("button",{onClick:u=>{u.stopPropagation(),c(!l)},className:`mt-3 w-full flex items-center justify-between px-3 py-2 rounded-md text-sm font-medium ${o==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:"Permissions"}),l?d.jsx(uD,{className:"h-4 w-4"}):d.jsx(Oh,{className:"h-4 w-4"})]}),l&&d.jsx("div",{className:"mt-3 w-full",children:d.jsx("ul",{className:"text-left text-sm space-y-1",children:s.map((u,f)=>d.jsxs("li",{className:"flex items-center",children:[d.jsx(cD,{className:"h-3 w-3 mr-1 flex-shrink-0 text-blue-500"}),d.jsx("span",{className:`${o==="dark"?"text-gray-300":"text-gray-600"}`,children:u})]},f))})})]})})},Uwe=()=>{const r=pi(),{user:t}=Jc(),{refreshUserRole:e}=ts(),{theme:n}=zr(),[a,i]=ie.useState(null),[s,o]=ie.useState(!1),[l,c]=ie.useState(!0),[u,f]=ie.useState(null),[h,p]=ie.useState(null),g={admin:["Full system administration","Access to Super Admin Dashboard","Manage all companies and users","System-wide configuration","Complete access to all features"],owner:["Full system access","Manage company settings","View all reports","Manage users and roles","Complete access to all features"],manager:["Business management","Access to reports","Manage products and inventory","View sales and purchase data","Manage staff assignments"],cashier:["Process sales transactions","Handle payments and refunds","View product information","Generate receipts","Access to sales dashboard"],salesperson:["View products and inventory","Create sales orders","Access customer information","View sales history","Basic dashboard access"],staff:["Limited system access","View assigned tasks","Basic dashboard access","View product information"]};ie.useEffect(()=>{(async()=>{if(!t){Ce.error("Please log in to access role selection"),r("/login");return}try{const{data:x,error:S}=await De.rpc("get_user_roles",{p_user_id:t.id});if(S){console.error("Error fetching user roles:",S),p("Failed to fetch your assigned roles"),Ce.error("Failed to fetch your assigned roles"),r("/login");return}if(x&&x.length>0){const M=x[0].role;switch(f(M),i(M),c(!1),M){case"admin":r("/super-admin-dashboard");break;case"manager":r("/manager-dashboard");break;case"cashier":r("/cashier-dashboard");break;case"salesperson":r("/salesperson-dashboard");break;default:r("/")}return}const{data:_,error:I}=await De.rpc("user_has_companies",{p_user_id:t.id});if(I){console.error("Error checking user companies:",I),p("Failed to check your company assignments"),Ce.error("Failed to check your company assignments"),r("/login");return}if(!_){console.log("No companies linked to user, redirecting to create company page"),r("/create-company");return}const{data:A,error:O}=await De.rpc("has_any_company_users");if(O){console.error("Error checking existing users:",O),p("Failed to check system status"),Ce.error("Failed to check system status"),r("/login");return}if(A){console.log("Existing system detected, checking user company assignments");const{data:M,error:z}=await De.from("company_users").select("company_id").eq("user_id",t.id);if(z){console.error("Error checking user companies:",z),p("Failed to check your company assignments"),Ce.error("Failed to check your company assignments"),r("/login");return}if(!M||M.length===0){console.log("No companies linked to user, redirecting to create company page"),r("/create-company");return}console.log("User has companies but no role assigned, assigning admin role as fallback");const U=M[0].company_id,{error:D}=await De.from("company_users").insert({user_id:t.id,company_id:U,role:"admin",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(D){console.warn("User record already exists, attempting update:",D);const{error:R}=await De.from("company_users").update({role:"admin",is_active:!0,updated_at:new Date().toISOString()}).eq("user_id",t.id);if(R){console.error("Error updating user record:",R),p("Failed to assign role to user"),Ce.error("Failed to assign role to user"),r("/login");return}}const{error:T}=await De.auth.updateUser({data:{role:"admin"}});T&&(console.error("Error updating user metadata:",T),console.warn("User metadata update failed, but role was set successfully")),f("admin"),i("admin")}else{console.log("First user detected - setting up as admin...");const{data:M,error:z}=await De.from("companies").insert({name:"Default Company",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(z){console.error("Error creating default company:",z),p("Failed to create default company"),Ce.error("Failed to create default company"),r("/login");return}const{error:U}=await De.from("company_users").insert({user_id:t.id,company_id:M.id,role:"admin",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(U){console.error("Error creating admin user:",U),p("Failed to create admin user"),Ce.error("Failed to create admin user"),r("/login");return}const{error:D}=await De.auth.updateUser({data:{role:"admin"}});D&&(console.error("Error updating user metadata:",D),console.warn("User metadata update failed, but role was set successfully")),f("admin"),i("admin")}}catch(x){console.error("Error in role check:",x),p("An error occurred while checking your role"),Ce.error("An error occurred while checking your role"),r("/login");return}c(!1)})()},[t,r]);const y=b=>{i(b)},m=async()=>{if(!a){Ce.error("Please select a role to continue");return}o(!0),p(null);try{console.log("Setting user role to:",a),console.log("User ID:",t==null?void 0:t.id);const{error:b}=await De.from("company_users").update({role:a,is_active:!0,updated_at:new Date().toISOString()}).eq("user_id",t==null?void 0:t.id);if(b){console.error("Error updating company_users, attempting to create new record:",b);const{data:S,error:_}=await De.from("companies").select("id").eq("is_active",!0).limit(1);if(_||!S||S.length===0)throw console.error("Error fetching companies:",_),new Error("No company found. Please contact administrator.");const{error:I}=await De.from("company_users").insert({user_id:t==null?void 0:t.id,company_id:S[0].id,role:a,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(I)throw console.error("Error inserting company_users:",I),new Error(`Failed to create user role: ${I.message}`)}const{error:x}=await De.auth.updateUser({data:{role:a}});switch(x&&(console.error("Error updating user metadata:",x),console.warn("User metadata update failed, but role was set successfully")),await e(),a){case"admin":r("/super-admin-dashboard");break;case"manager":r("/manager-dashboard");break;case"cashier":r("/cashier-dashboard");break;case"salesperson":r("/salesperson-dashboard");break;default:r("/")}Ce.success(`You are now using the application as ${a}`)}catch(b){console.error("Error setting user role:",b);const x=b.message||"Failed to set user role";p(x),Ce.error(x)}finally{o(!1)}};if(l)return d.jsx("div",{className:`min-h-screen flex items-center justify-center ${n==="dark"?"bg-gradient-to-br from-gray-900 to-gray-800":"bg-gradient-to-br from-blue-50 to-indigo-50"} py-6 px-4`,children:d.jsxs("div",{className:`text-center ${n==="dark"?"text-white":"text-gray-900"}`,children:[d.jsx(Pw,{className:`h-10 w-10 mx-auto mb-3 ${n==="dark"?"text-blue-400":"text-blue-600"}`}),d.jsx("p",{className:"text-base",children:"Checking authentication..."})]})});if(!t)return d.jsx(Gi,{to:"/login",replace:!0});const v=b=>{switch(b){case"admin":return d.jsx(Vc,{className:"w-6 h-6 md:w-7 md:h-7"});default:return d.jsx(Pw,{className:"w-6 h-6 md:w-7 md:h-7"})}};return d.jsx("div",{className:`min-h-screen flex items-center justify-center ${n==="dark"?"bg-gradient-to-br from-gray-900 to-gray-800":"bg-gradient-to-br from-blue-50 to-indigo-50"} py-4 px-3 md:py-12 md:px-6`,children:d.jsxs("div",{className:`max-w-md md:max-w-lg w-full space-y-4 md:space-y-6 ${n==="dark"?"bg-gray-800":"bg-white"} p-4 md:p-6 rounded-xl shadow-lg`,children:[d.jsxs("div",{className:"text-center",children:[d.jsx(Pw,{className:`h-10 w-10 md:h-12 md:w-12 mx-auto ${n==="dark"?"text-blue-400":"text-blue-600"}`}),d.jsx("h2",{className:`mt-2 md:mt-4 text-2xl md:text-3xl font-bold ${n==="dark"?"text-white":"text-gray-900"}`,children:"Tallybooks POS"}),d.jsxs("div",{className:`mt-2 inline-flex items-center px-2 py-1 rounded-full text-xs md:text-sm font-medium ${n==="dark"?"bg-green-900 text-green-200 border border-green-700":"bg-green-100 text-green-800 border border-green-200"}`,children:[d.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-green-500 rounded-full mr-1 md:mr-2"}),d.jsx("span",{className:"truncate max-w-[200px] md:max-w-full",children:t.email})]}),d.jsx("p",{className:`mt-2 md:mt-4 text-sm md:text-base ${n==="dark"?"text-gray-300":"text-gray-600"}`,children:"Your assigned role is displayed below"})]}),h&&d.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(Wn,{className:"h-5 w-5 text-red-400"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),d.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:d.jsx("p",{children:h})})]})]})}),d.jsx("div",{className:"mt-4",children:u&&d.jsx($we,{title:u.charAt(0).toUpperCase()+u.slice(1),description:`You have been assigned the ${u} role`,icon:v(u),role:u,onSelect:y,isSelected:a===u,permissions:g[u]})}),d.jsx("div",{className:"mt-4 md:mt-6",children:d.jsx(lt,{variant:"primary",size:"lg",onClick:m,isLoading:s,disabled:!a||s,className:"w-full py-3 text-base md:text-lg rounded-lg",children:a?`Continue as ${a.charAt(0).toUpperCase()+a.slice(1)}`:"Select a Role to Continue"})})]})})},Zn=({children:r,requiredRole:t,redirectTo:e="/login",noLayout:n=!1})=>{const{isAuthenticated:a,isLoading:i}=Jc(),{userRole:s,isRoleLoading:o}=ts(),l=vl();if(i||o)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(!a)return d.jsx(Gi,{to:e,state:{from:l},replace:!0});if(l.pathname==="/role-selection")return d.jsx(d.Fragment,{children:r});if(a&&!s)return d.jsx(Gi,{to:"/role-selection",state:{from:l},replace:!0});if(t&&s){let u=!1;if(t==="admin"&&s==="owner"?u=!0:u=Array.isArray(t)?t.includes(s):s===t,!u){let f="/";switch(s){case"manager":f="/manager-dashboard";break;case"cashier":f="/cashier-dashboard";break;case"salesperson":f="/salesperson-dashboard";break;case"owner":f="/owner-dashboard";break;case"admin":f="/super-admin-dashboard";break}return d.jsx(Gi,{to:f,state:{from:l},replace:!0})}}const c=l.pathname==="/super-admin-dashboard"||l.pathname==="/admin-dashboard"||l.pathname==="/manager-dashboard"||l.pathname==="/cashier-dashboard"||l.pathname==="/salesperson-dashboard"||l.pathname==="/owner-dashboard"||l.pathname==="/"||l.pathname==="/dashboard"||l.pathname==="/database"||l.pathname==="/barcode-printing";return l.pathname==="/barcode-printing"&&console.log("AuthRoute - Barcode Printing page:",{path:l.pathname,isDashboardPage:c,noLayout:n}),c||n?d.jsx(d.Fragment,{children:r}):d.jsx(pz,{children:r})},qwe=()=>{const{isAuthenticated:r,isLoading:t}=Jc(),{selectedCompany:e,companies:n,loading:a,isAdminWithNoCompanies:i}=ln(),{userRole:s,isRoleLoading:o}=ts(),[,l]=ie.useState(!0),c=vl();if(ie.useEffect(()=>{!t&&!o&&!a&&l(!1)},[t,o,a]),t||r&&(o||a))return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),d.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})});if(!r&&c.pathname!=="/login")return d.jsx(Gi,{to:"/login",replace:!0});if(!e)return s==="admin"&&i?(console.log("RoleBasedRouter - Admin with 0 companies detected. Redirecting to /create-company"),c.pathname!=="/create-company"?d.jsx(Gi,{to:"/create-company",replace:!0}):null):!i&&n.length>0?(console.log("RoleBasedRouter - Companies available but none selected. Redirecting to /role-selection"),c.pathname!=="/role-selection"?d.jsx(Gi,{to:"/role-selection",replace:!0}):null):c.pathname!=="/role-selection"?d.jsx(Gi,{to:"/role-selection",replace:!0}):null;if(!s)return c.pathname!=="/role-selection"?d.jsx(Gi,{to:"/role-selection",replace:!0}):null;switch(console.log("RoleBasedRouter - Redirecting based on role:",s),s){case"manager":return console.log("RoleBasedRouter - Redirecting to /manager-dashboard"),d.jsx(Gi,{to:"/manager-dashboard",replace:!0});case"admin":return console.log("RoleBasedRouter - Redirecting to /super-admin-dashboard (admin)"),d.jsx(Gi,{to:"/super-admin-dashboard",replace:!0});case"owner":return console.log("RoleBasedRouter - Redirecting to /super-admin-dashboard (owner)"),d.jsx(Gi,{to:"/super-admin-dashboard",replace:!0});case"cashier":return console.log("RoleBasedRouter - Redirecting to /cashier-dashboard"),d.jsx(Gi,{to:"/cashier-dashboard",replace:!0});case"salesperson":return console.log("RoleBasedRouter - Redirecting to /salesperson-dashboard"),d.jsx(Gi,{to:"/salesperson-dashboard",replace:!0});default:return console.log("RoleBasedRouter - Redirecting to /role-selection (default case)"),d.jsx(Gi,{to:"/role-selection",replace:!0})}},zwe=()=>{const r=pi(),{userRole:t}=ts(),{addCompanyToState:e}=ln(),[n,a]=ie.useState(!1),[i,s]=ie.useState(!1),[o,l]=ie.useState(null),[c,u]=ie.useState(null),f=ie.useRef(null),[h,p]=ie.useState({name:"",legal_name:"",gst_number:"",website:"",email:"",phone:"",street_address:"",city:"",state:"",postal_code:"",country:"",business_type:""}),g=b=>{var _;const x=(_=b.target.files)==null?void 0:_[0];if(!x)return;if(!x.type.startsWith("image/")){Ce.error("Please upload an image file");return}if(x.size>2*1024*1024){Ce.error("File size should be less than 2MB");return}l(x);const S=new FileReader;S.onloadend=()=>{u(S.result)},S.readAsDataURL(x)},y=async()=>{if(!o)return null;try{s(!0);const b=o.name.split(".").pop(),S=`company-logos/${`${Gy()}.${b}`}`,{error:_}=await De.storage.from("company-logos").upload(S,o,{cacheControl:"3600",upsert:!1});if(_)throw _;const{data:{publicUrl:I}}=De.storage.from("company-logos").getPublicUrl(S);return I}catch(b){return console.error("Error uploading logo:",b),Ce.error("Failed to upload logo"),null}finally{s(!1)}},m=b=>{const{name:x,value:S}=b.target;p(_=>({..._,[x]:S}))},v=async b=>{if(b.preventDefault(),!(n||i)){if(!h.name.trim()){Ce.error("Company name is required");return}a(!0);try{let x=null;o&&(x=await y());const{data:{user:S},error:_}=await De.auth.getUser();if(_||!S)throw new Error("Failed to get current user");const{data:I,error:A}=await De.from("companies").insert({name:h.name,legal_name:h.legal_name,gst_number:h.gst_number,website:h.website,email:h.email,phone:h.phone,address_street:h.street_address,address_city:h.city,address_state:h.state,address_postal_code:h.postal_code,address_country:h.country,business_type:h.business_type||null,logo_url:x,is_active:!0}).select().single();if(A)throw new Error(A.message||"Failed to create company");const{error:O}=await De.from("company_users").insert({company_id:I.id,user_id:S.id,role:"admin",is_active:!0});if(O)throw new Error(O.message||"Failed to link user to company");e({...I,role:"admin"}),Ce.success(`${h.name} has been created successfully!`),r("/super-admin-dashboard")}catch(x){console.error("Error creating company:",x),Ce.error(x instanceof Error?x.message:"Failed to create company")}finally{a(!1)}}};return t!=="admin"?null:d.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:d.jsx("div",{className:"max-w-3xl mx-auto",children:d.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-white",children:"Create New Company"}),d.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Fill in the company details below"})]}),d.jsxs("form",{onSubmit:v,className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"relative w-32 h-32 mb-4 rounded-full overflow-hidden bg-gray-700 flex items-center justify-center",children:c?d.jsx("img",{src:c,alt:"Logo preview",className:"w-full h-full object-cover"}):d.jsx("div",{className:"text-gray-400",children:d.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),d.jsx("input",{type:"file",ref:f,onChange:g,accept:"image/*",className:"hidden"}),d.jsx(lt,{type:"button",onClick:()=>{var b;return(b=f.current)==null?void 0:b.click()},variant:"secondary",size:"sm",disabled:i,children:i?"Uploading...":"Upload Logo"}),d.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"JPG, PNG (max 2MB)"})]}),d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:["Company Name ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:m,required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter company name"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"legal_name",className:"block text-sm font-medium text-gray-300",children:"Legal Name"}),d.jsx("input",{type:"text",id:"legal_name",name:"legal_name",value:h.legal_name,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"gst_number",className:"block text-sm font-medium text-gray-300",children:"GST Number"}),d.jsx("input",{type:"text",id:"gst_number",name:"gst_number",value:h.gst_number,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300",children:"Website"}),d.jsx("input",{type:"url",id:"website",name:"website",value:h.website,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"business_type",className:"block text-sm font-medium text-gray-300",children:"Business Type (optional)"}),d.jsxs("select",{id:"business_type",name:"business_type",value:h.business_type,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Select (optional)"}),Pj.map(b=>d.jsx("option",{value:b,children:b},b))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-300",children:"Phone"}),d.jsx("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"street_address",className:"block text-sm font-medium text-gray-300",children:"Street Address"}),d.jsx("input",{type:"text",id:"street_address",name:"street_address",value:h.street_address,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-300",children:"City"}),d.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-300",children:"State"}),d.jsx("input",{type:"text",id:"state",name:"state",value:h.state,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-300",children:"Postal Code"}),d.jsx("input",{type:"text",id:"postal_code",name:"postal_code",value:h.postal_code,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-300",children:"Country"}),d.jsx("input",{type:"text",id:"country",name:"country",value:h.country,onChange:m,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[d.jsx(lt,{type:"button",variant:"secondary",onClick:()=>r("/super-admin-dashboard"),disabled:n,className:"px-6 py-2",children:"Cancel"}),d.jsx(lt,{type:"submit",variant:"primary",isLoading:n,disabled:n,className:"px-6 py-2",children:"Add Company"})]})]})]})})})},Wwe=()=>{const{selectedCompany:r}=ln(),{userRole:t}=ts(),{theme:e}=zr(),n=e==="dark",[a,i]=ie.useState([]),[s,o]=ie.useState(!1),[l,c]=ie.useState(null),[u,f]=ie.useState("30d"),[h,p]=ie.useState(qt(dl(new Date,30),"yyyy-MM-dd")),[g,y]=ie.useState(qt(new Date,"yyyy-MM-dd")),m=a.reduce((A,O)=>A+(O.purchase_in_qty||0),0),v=a.reduce((A,O)=>A+(O.purchase_in_amount_excl_gst||0),0),b=a.reduce((A,O)=>A+(O.sales_out_qty||0),0),x=a.reduce((A,O)=>A+(O.current_qty||0),0),S=a.reduce((A,O)=>A+(O.current_amount||0),0);ie.useEffect(()=>{r&&I()},[r,u,h,g]);const _=A=>{const M=A.toFixed(2).split("."),z=M[0],U=M[1];let D="",T=0;for(let R=z.length-1;R>=0;R--)T>0&&T%3===0&&(D=","+D),D=z[R]+D,T++;return`Rs. ${D}.${U}`},I=async()=>{o(!0),c(null);try{if(!r)throw new Error("No company selected");let A,O=new Date;u==="custom"?(A=new Date(h),O=new Date(g)):A=dl(O,u==="7d"?7:u==="30d"?30:90);const{data:M,error:z}=await De.from("products").select("id, name, sku, art_no, color, size, category, unit, stock, purchase_price").eq("company_id",r.id).order("name");if(z)throw new Error(z.message);if(!M||M.length===0){i([]),o(!1);return}const{data:U,error:D}=await De.from("purchase_items").select(`
          product_id,
          quantity,
          purchase_price,
          total
        `).gte("created_at",A.toISOString()).lte("created_at",O.toISOString()).in("product_id",M.map(N=>N.id));if(D)throw new Error(D.message);const{data:T,error:R}=await De.from("sale_items").select(`
          product_id,
          quantity,
          price,
          total
        `).gte("created_at",A.toISOString()).lte("created_at",O.toISOString()).in("product_id",M.map(N=>N.id));if(R)throw new Error(R.message);const C=M.map(N=>{const E=(U==null?void 0:U.filter(V=>V.product_id===N.id))||[],k=E.reduce((V,ee)=>V+(ee.quantity||0),0),P=E.reduce((V,ee)=>V+(ee.purchase_price||0)*(ee.quantity||0),0),H=((T==null?void 0:T.filter(V=>V.product_id===N.id))||[]).reduce((V,ee)=>V+(ee.quantity||0),0),L=k-H,K=Math.max(0,L);let Y=0;k>0?Y=P/k:N.purchase_price&&(Y=N.purchase_price);const Z=K*Y;return{id:N.id,name:N.name,sku:N.sku,art_no:N.art_no||void 0,color:N.color||void 0,size:N.size||void 0,category:N.category,unit:N.unit,purchase_in_qty:k,purchase_in_amount_excl_gst:P,sales_out_qty:H,current_qty:K,average_cost_excl_gst:Y,current_amount:Z}});i(C),o(!1)}catch(A){c(A instanceof Error?A.message:"An error occurred"),o(!1)}};return t==="admin"||t==="manager"||t==="owner"?d.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Stock Report"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:"flex items-center space-x-2 mr-4",children:[d.jsx(lt,{variant:u==="7d"?"primary":"secondary",size:"sm",onClick:()=>{f("7d"),p(qt(dl(new Date,7),"yyyy-MM-dd")),y(qt(new Date,"yyyy-MM-dd"))},children:"7 Days"}),d.jsx(lt,{variant:u==="30d"?"primary":"secondary",size:"sm",onClick:()=>{f("30d"),p(qt(dl(new Date,30),"yyyy-MM-dd")),y(qt(new Date,"yyyy-MM-dd"))},children:"30 Days"}),d.jsx(lt,{variant:u==="90d"?"primary":"secondary",size:"sm",onClick:()=>{f("90d"),p(qt(dl(new Date,90),"yyyy-MM-dd")),y(qt(new Date,"yyyy-MM-dd"))},children:"90 Days"})]}),d.jsxs("div",{className:"flex items-center space-x-2 mr-4",children:[d.jsx("input",{type:"date",value:h,onChange:A=>{f("custom"),p(A.target.value)},className:`px-3 py-1 rounded-md border ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{children:"to"}),d.jsx("input",{type:"date",value:g,onChange:A=>{f("custom"),y(A.target.value)},className:`px-3 py-1 rounded-md border ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>{const A=a.map(z=>({Name:z.name,SKU:z.sku,"Art No":z.art_no||"",Color:z.color||"",Size:z.size||"",Category:z.category,"Purchase In Qty":z.purchase_in_qty,"Purchase In Amount":z.purchase_in_amount_excl_gst,"Sales Out Qty":z.sales_out_qty,"Current Qty":z.current_qty,"Average Cost":z.average_cost_excl_gst,"Current Amount":z.current_amount}));A.push({Name:"",SKU:"","Art No":"",Color:"",Size:"",Category:"Total","Purchase In Qty":m,"Purchase In Amount":v,"Sales Out Qty":b,"Current Qty":x,"Average Cost":0,"Current Amount":S});const O=Aa.json_to_sheet(A),M=Aa.book_new();Aa.book_append_sheet(M,O,"Stock Report"),N2(M,`stock-report-${new Date().toISOString().slice(0,10)}.xlsx`)},children:"Export to Excel"}),d.jsx(lt,{variant:"secondary",size:"sm",onClick:()=>{const A=new Fr;A.setFontSize(16),A.text("Stock Report",14,18);const O=a.map(M=>[M.name,M.sku,M.art_no||"",M.color||"",M.size||"",M.category,M.purchase_in_qty.toString(),_(M.purchase_in_amount_excl_gst),M.sales_out_qty.toString(),M.current_qty.toString(),_(M.average_cost_excl_gst),_(M.current_amount)]);O.push(["","","","","","Total",m.toString(),_(v),b.toString(),x.toString(),"",_(S)]),Ic(A,{startY:24,head:[["Name","SKU","Art No","Color","Size","Category","Purchase In Qty","Purchase In Amount","Sales Out Qty","Current Qty","Average Cost","Current Amount"]],body:O,theme:"striped",headStyles:{fillColor:[59,130,246]},didParseCell:function(M){M.row.index===O.length-1&&M.cell.section==="body"&&(M.cell.styles={...M.cell.styles,fillColor:[220,220,220],fontStyle:"bold"})}}),A.save(`stock-report-${new Date().toISOString().slice(0,10)}.pdf`)},children:"Export to PDF"})]})]}),l&&d.jsx("div",{className:"text-red-500 mb-4",children:l}),d.jsx("div",{className:`overflow-x-auto rounded-lg shadow ${n?"bg-gray-800":"bg-white"}`,children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:n?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2",children:"Name"}),d.jsx("th",{className:"px-4 py-2",children:"SKU"}),d.jsx("th",{className:"px-4 py-2",children:"Art No"}),d.jsx("th",{className:"px-4 py-2",children:"Color"}),d.jsx("th",{className:"px-4 py-2",children:"Size"}),d.jsx("th",{className:"px-4 py-2",children:"Category"}),d.jsx("th",{className:"px-4 py-2",children:"Purchase In Qty"}),d.jsx("th",{className:"px-4 py-2",children:"Purchase In Amount"}),d.jsx("th",{className:"px-4 py-2",children:"Sales Out Qty"}),d.jsx("th",{className:"px-4 py-2",children:"Current Qty"}),d.jsx("th",{className:"px-4 py-2",children:"Average Cost"}),d.jsx("th",{className:"px-4 py-2",children:"Current Amount"})]})}),d.jsx("tbody",{className:n?"bg-gray-900 text-gray-100":"bg-white text-gray-900",children:s?d.jsx("tr",{children:d.jsx("td",{colSpan:15,className:"text-center py-8",children:"Loading..."})}):a.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:15,className:"text-center py-8",children:"No products found."})}):d.jsxs(d.Fragment,{children:[a.map(A=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-2 font-medium",children:A.name}),d.jsx("td",{className:"px-4 py-2",children:A.sku}),d.jsx("td",{className:"px-4 py-2",children:A.art_no||""}),d.jsx("td",{className:"px-4 py-2",children:A.color||""}),d.jsx("td",{className:"px-4 py-2",children:A.size||""}),d.jsx("td",{className:"px-4 py-2",children:A.category}),d.jsx("td",{className:"px-4 py-2",children:A.purchase_in_qty}),d.jsx("td",{className:"px-4 py-2",children:A.purchase_in_amount_excl_gst.toFixed(2)}),d.jsx("td",{className:"px-4 py-2",children:A.sales_out_qty}),d.jsx("td",{className:"px-4 py-2",children:A.current_qty}),d.jsx("td",{className:"px-4 py-2",children:A.average_cost_excl_gst.toFixed(2)}),d.jsx("td",{className:"px-4 py-2",children:A.current_amount.toFixed(2)})]},A.id)),d.jsxs("tr",{className:n?"bg-gray-700 font-bold":"bg-gray-200 font-bold",children:[d.jsx("td",{className:"px-4 py-2",colSpan:6,children:"Total"}),d.jsx("td",{className:"px-4 py-2",children:m}),d.jsx("td",{className:"px-4 py-2",children:v.toFixed(2)}),d.jsx("td",{className:"px-4 py-2",children:b}),d.jsx("td",{className:"px-4 py-2",children:x}),d.jsx("td",{className:"px-4 py-2"}),d.jsx("td",{className:"px-4 py-2",children:S.toFixed(2)})]})]})})]})})]}):d.jsx(Gi,{to:"/",replace:!0})},Hwe=()=>{const{theme:r}=zr(),t=r==="dark",{companies:e,selectedCompany:n}=Cj(),a=n||(e&&e.length>0?e[0]:null),[i,s]=ie.useState(!1),[o,l]=ie.useState(null),[c,u]=ie.useState("thisMonth"),[f,h]=ie.useState(""),[p,g]=ie.useState(""),[y,m]=ie.useState("weighted_average"),v=I=>{if(!I)return"Unknown error";if(typeof I=="string")return I;if(I instanceof Error||typeof I.message=="string")return I.message;if(typeof I.error_description=="string")return I.error_description;if(typeof I.details=="string")return I.details;try{return JSON.stringify(I)}catch{return String(I)}};ie.useEffect(()=>{a&&x()},[a,c,f,p,y]);const b=()=>{const I=new Date;switch(c){case"thisMonth":return{start:wh(I),end:xh(I)};case"lastMonth":const A=fL(I,1);return{start:wh(A),end:xh(A)};case"thisYear":return{start:Jv(I),end:b6(I)};case"custom":return{start:f?new Date(f):wh(I),end:p?new Date(p):xh(I)};default:return{start:wh(I),end:xh(I)}}},x=async()=>{var I,A,O,M;if(a){s(!0);try{const{start:z,end:U}=b(),D=new Date(z);D.setHours(0,0,0,0);const T=new Date(U);T.setHours(0,0,0,0),T.setDate(T.getDate()+1);const R=D.toISOString(),C=T.toISOString(),{data:N,error:E}=await De.from("sales").select(`
          id,
          total,
          subtotal,
          tax,
          cgst,
          sgst,
          igst,
          cess,
          created_at,
          sale_items (
            quantity,
            price,
            product_id,
            product:products (
              name,
              purchase_price,
              mrp
            )
          )
        `).eq("company_id",a.id).gte("created_at",R).lt("created_at",C);if(E)throw E;console.log("Sales data fetched:",{count:(N==null?void 0:N.length)||0,sample:N==null?void 0:N[0],hasItems:((A=(I=N==null?void 0:N[0])==null?void 0:I.sale_items)==null?void 0:A.length)||0});const{data:k,error:P}=await De.from("purchase_entries").select(`
          id,
          total,
          subtotal,
          tax,
          cgst,
          sgst,
          igst,
          cess,
          created_at,
          purchase_items (
            quantity,
            purchase_price,
            product_id,
            product:products (
              name
            )
          )
        `).eq("company_id",a.id).gte("created_at",R).lt("created_at",C);if(P)throw P;console.log("Purchase data fetched:",{count:(k==null?void 0:k.length)||0,sample:k==null?void 0:k[0],hasItems:((M=(O=k==null?void 0:k[0])==null?void 0:O.purchase_items)==null?void 0:M.length)||0});const{data:q,error:H}=await De.from("expenses").select("amount").eq("company_id",a.id).gte("date",qt(D,"yyyy-MM-dd")).lte("date",qt(T,"yyyy-MM-dd"));if(H)throw H;console.log("Expense data fetched:",{count:(q==null?void 0:q.length)||0,sample:q==null?void 0:q[0]});const L=S(N||[],k||[],q||[]);l(L)}catch(z){const U=v(z);console.error("Error fetching profit-loss data:",U,z),console.error("Error context:",{activeCompany:a==null?void 0:a.id}),Ce.error(`Failed to load profit-loss data: ${U}`)}finally{s(!1)}}},S=(I,A,O)=>{const M=I.reduce((Y,Z)=>Y+(Z.total||0),0),z=I.length,U=A.reduce((Y,Z)=>Y+(Z.total||0),0);let D=0;I.forEach(Y=>{const Z=Y.cgst||0,V=Y.sgst||0,ee=Y.igst||0,B=Y.cess||0;D+=Z+V+ee+B});const T=M-D;let R=0;if(y==="weighted_average"){const Y=[];A.forEach(Z=>{var V;(V=Z.purchase_items)==null||V.forEach(ee=>{const B=ee.purchase_price||0;Y.push({productId:ee.product_id,quantity:ee.quantity||0,purchasePriceExclGST:B})})}),I.forEach(Z=>{var V;(V=Z.sale_items)==null||V.forEach(ee=>{var te;const B=ee.product_id,F=ee.quantity||0,X=Y.filter(se=>se.productId===B);if(X.length>0){let se=0,ce=0;X.forEach(le=>{se+=le.quantity,ce+=le.quantity*le.purchasePriceExclGST});const ue=se>0?ce/se:0,oe=F*ue;R+=oe}else{const se=((te=ee.product)==null?void 0:te.purchase_price)||0,ce=F*se;R+=ce}})})}else A.length>0&&(R=T*.6);const C=O.reduce((Y,Z)=>Y+(Z.amount||0),0),N=T-R,E=T>0?N/T*100:0,k=N-C,P=T>0?k/T*100:0,q=z>0?M/z:0,H={};I.forEach(Y=>{var Z;(Z=Y.sale_items)==null||Z.forEach(V=>{var F,X,te;let ee=0;if(y==="weighted_average"){const se=V.quantity||0,ce=((F=V.product)==null?void 0:F.purchase_price)||0;ee=se*ce}else{const se=((X=V.product)==null?void 0:X.purchase_price)||0;ee=(V.quantity||0)*se}const B=V.product_id;H[B]||(H[B]={name:((te=V.product)==null?void 0:te.name)||"Unknown Product",quantity:0,revenue:0,cost:0}),H[B].quantity+=V.quantity,H[B].revenue+=V.price*V.quantity||0,H[B].cost+=ee})});const L=Object.values(H).map(Y=>({...Y,profit:Y.revenue-Y.cost})).sort((Y,Z)=>Z.revenue-Y.revenue).slice(0,10),K=[{month:qt(new Date,"MMM yyyy"),revenue:M,cost:R,profit:N}];return{totalRevenue:M,totalRevenueExclGST:T,totalGSTCollected:D,totalCost:R,totalExpenses:C,grossProfit:N,grossProfitMargin:E,netProfit:k,netProfitMargin:P,totalSales:z,totalPurchases:U,averageOrderValue:q,topSellingProducts:L,monthlyData:K}},_=()=>{if(!o)return;const A=[["Profit & Loss Report"],["Company",(a==null?void 0:a.name)||""],["Period",`${qt(b().start,"dd/MM/yyyy")} - ${qt(b().end,"dd/MM/yyyy")}`],["COGS Method",y==="weighted_average"?"Weighted Average (Recommended)":"Average Purchase Total (Legacy)"],[""],["Metric","Value"],["Total Revenue (Incl. GST)",`${o.totalRevenue.toFixed(2)}`],["Total Revenue (Excl. GST)",`${o.totalRevenueExclGST.toFixed(2)}`],["GST Collected",`${o.totalGSTCollected.toFixed(2)}`],["Cost of Goods Sold",`${o.totalCost.toFixed(2)}`],["Total Expenses",`${o.totalExpenses.toFixed(2)}`],["Gross Profit",`${o.grossProfit.toFixed(2)}`],["Gross Profit Margin",`${o.grossProfitMargin.toFixed(2)}%`],["Net Profit",`${o.netProfit.toFixed(2)}`],["Net Profit Margin",`${o.netProfitMargin.toFixed(2)}%`],["Total Sales",o.totalSales.toString()],["Average Order Value",`${o.averageOrderValue.toFixed(2)}`],[""],["Top Selling Products"],["Product Name","Quantity Sold","Revenue","COGS","Profit"],...o.topSellingProducts.map(U=>[U.name,U.quantity.toString(),`${U.revenue.toFixed(2)}`,`${U.cost.toFixed(2)}`,`${U.profit.toFixed(2)}`])].map(U=>U.join(",")).join(`
`),O=new Blob([A],{type:"text/csv"}),M=window.URL.createObjectURL(O),z=document.createElement("a");z.href=M,z.download=`profit-loss-report-${qt(new Date,"yyyy-MM-dd")}.csv`,z.click(),window.URL.revokeObjectURL(M)};return d.jsx("div",{className:"container mx-auto px-4 py-6",children:a?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-end",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Report Period"}),d.jsxs("select",{value:c,onChange:I=>u(I.target.value),className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"thisMonth",children:"This Month"}),d.jsx("option",{value:"lastMonth",children:"Last Month"}),d.jsx("option",{value:"thisYear",children:"This Year"}),d.jsx("option",{value:"custom",children:"Custom Range"})]})]}),c==="custom"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),d.jsx("input",{type:"date",value:f,onChange:I=>h(I.target.value),className:`p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),d.jsx("input",{type:"date",value:p,onChange:I=>g(I.target.value),className:`p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Compute COGS by"}),d.jsxs("select",{value:y,onChange:I=>m(I.target.value),className:`w-full p-2 rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"weighted_average",children:"Weighted Average (recommended)"}),d.jsx("option",{value:"avg_purchase_total",children:"Avg Purchase Total Amount (legacy)"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(lt,{variant:"secondary",size:"sm",leftIcon:d.jsx(nc,{className:"w-4 h-4"}),onClick:x,disabled:i,children:"Refresh"}),d.jsx(lt,{variant:"primary",size:"sm",leftIcon:d.jsx(Nx,{className:"w-4 h-4"}),onClick:_,disabled:!o,children:"Export CSV"})]})]}),i?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[d.jsx("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:d.jsx(Eh,{className:"w-6 h-6 text-green-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Sales (Excl. GST)"}),d.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",o.totalRevenueExclGST.toLocaleString()]})]})]})}),d.jsx("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:d.jsx(bg,{className:"w-6 h-6 text-blue-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"GST Collected"}),d.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",o.totalGSTCollected.toLocaleString()]})]})]})}),d.jsx("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:d.jsx(Eh,{className:"w-6 h-6 text-purple-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Sales (Incl. GST)"}),d.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",o.totalRevenue.toLocaleString()]})]})]})}),d.jsx("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`p-2 rounded-lg ${o.grossProfit>=0?"bg-green-100":"bg-red-100"}`,children:d.jsx(Du,{className:`w-6 h-6 ${o.grossProfit>=0?"text-green-600":"text-red-600"}`})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Gross Profit"}),d.jsxs("p",{className:`text-2xl font-bold ${o.grossProfit>=0?"text-green-600":"text-red-600"}`,children:["",o.grossProfit.toLocaleString()]}),d.jsxs("p",{className:"text-sm text-gray-500",children:[o.grossProfitMargin.toFixed(1),"% margin"]})]})]})}),d.jsx("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`p-2 rounded-lg ${o.netProfit>=0?"bg-blue-100":"bg-red-100"}`,children:d.jsx(bg,{className:`w-6 h-6 ${o.netProfit>=0?"text-blue-600":"text-red-600"}`})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Net Profit"}),d.jsxs("p",{className:`text-2xl font-bold ${o.netProfit>=0?"text-blue-600":"text-red-600"}`,children:["",o.netProfit.toLocaleString()]}),d.jsxs("p",{className:"text-sm text-gray-500",children:[o.netProfitMargin.toFixed(1),"% margin"]})]})]})})]}),d.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sales Breakdown"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Sales (Excl. GST)"}),d.jsxs("p",{className:"text-xl font-bold",children:["",o.totalRevenueExclGST.toLocaleString()]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("p",{className:"text-sm text-gray-500",children:"GST Collected"}),d.jsxs("p",{className:"text-xl font-bold",children:["",o.totalGSTCollected.toLocaleString()]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Sales (Incl. GST)"}),d.jsxs("p",{className:"text-xl font-bold",children:["",o.totalRevenue.toLocaleString()]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sales Overview"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Total Sales:"}),d.jsx("span",{className:"font-medium",children:o.totalSales})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Avg Order Value:"}),d.jsxs("span",{className:"font-medium",children:["",o.averageOrderValue.toFixed(2)]})]})]})]}),d.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cost Analysis"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"COGS Method:"}),d.jsx("span",{className:"font-medium",children:y==="weighted_average"?"Weighted Average":"Avg Purchase Total"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Cost of Goods:"}),d.jsxs("span",{className:"font-medium text-red-600",children:["",o.totalCost.toLocaleString()]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Total Expenses:"}),d.jsxs("span",{className:"font-medium text-amber-600",children:["",o.totalExpenses.toLocaleString()]})]})]})]}),d.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Profitability"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Gross Margin:"}),d.jsxs("span",{className:`font-medium ${o.grossProfit>=0?"text-green-600":"text-red-600"}`,children:[o.grossProfitMargin.toFixed(1),"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Net Margin:"}),d.jsxs("span",{className:`font-medium ${o.netProfit>=0?"text-blue-600":"text-red-600"}`,children:[o.netProfitMargin.toFixed(1),"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Total Purchases:"}),d.jsxs("span",{className:"font-medium",children:["",o.totalPurchases.toLocaleString()]})]})]})]})]}),o.topSellingProducts.length>0&&d.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm border`,children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[d.jsx(bK,{className:"w-5 h-5 mr-2"}),"Top Selling Products"]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:`min-w-full divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:[d.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Product"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Qty Sold"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Revenue"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"COGS"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Profit"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Margin"})]})}),d.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:o.topSellingProducts.map((I,A)=>d.jsxs("tr",{className:t?"hover:bg-gray-700":"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:I.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:I.quantity}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["",I.revenue.toLocaleString()]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:["",I.cost.toLocaleString()]}),d.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${I.profit>=0?"text-green-600":"text-red-600"}`,children:["",I.profit.toLocaleString()]}),d.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${I.profit>=0?"text-green-600":"text-red-600"}`,children:[I.revenue>0?(I.profit/I.revenue*100).toFixed(1):0,"%"]})]},A))}),d.jsx("tfoot",{className:t?"bg-gray-700":"bg-gray-50",children:(()=>{const I=o.topSellingProducts.reduce((U,D)=>U+(D.quantity||0),0),A=o.topSellingProducts.reduce((U,D)=>U+(D.revenue||0),0),O=o.topSellingProducts.reduce((U,D)=>U+(D.cost||0),0),M=A-O,z=A>0?M/A*100:0;return d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-3 text-right text-sm font-semibold",children:"Totals:"}),d.jsx("td",{className:"px-6 py-3 text-sm font-semibold",children:I.toLocaleString()}),d.jsxs("td",{className:"px-6 py-3 text-sm font-semibold",children:["",A.toLocaleString()]}),d.jsxs("td",{className:"px-6 py-3 text-sm font-semibold",children:["",O.toLocaleString()]}),d.jsxs("td",{className:"px-6 py-3 text-sm font-semibold",children:["",M.toLocaleString()]}),d.jsxs("td",{className:"px-6 py-3 text-sm font-semibold",children:[z.toFixed(1),"%"]})]})})()})]})})]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(bg,{className:"mx-auto h-12 w-12 text-gray-400"}),d.jsx("h3",{className:"mt-2 text-lg font-medium",children:"No Data Available"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No sales or purchase data found for the selected period."})]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(ec,{className:"mx-auto h-12 w-12 text-gray-400"}),d.jsx("h3",{className:"mt-2 text-lg font-medium",children:"No Company Selected"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Please select a company to view profit & loss reports."})]})})},Vwe=()=>{const{selectedCompany:r}=ln(),{theme:t}=zr(),e=t==="dark",n=pi(),[a,i]=ie.useState({category:"",amount:"",date:qt(new Date,"yyyy-MM-dd"),description:""}),[s,o]=ie.useState(!1),l=["Rent","Utilities","Salaries","Office Supplies","Marketing","Travel","Meals & Entertainment","Insurance","Maintenance","Taxes","Salesman's Commission","Electricity Bill","Other"],c=f=>{const{name:h,value:p}=f.target;i(g=>({...g,[h]:p}))},u=async f=>{f.preventDefault(),o(!0);try{if(!r){Ce.error("Please select a company first");return}const{error:h}=await De.from("expenses").insert({category:a.category,amount:parseFloat(a.amount),date:a.date,description:a.description,company_id:r.id});if(h)throw h;Ce.success("Expense added successfully!"),i({category:"",amount:"",date:qt(new Date,"yyyy-MM-dd"),description:""})}catch(h){console.error("Error adding expense:",h),Ce.error("Failed to add expense")}finally{o(!1)}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Add Daily Expense"}),d.jsx(lt,{variant:"secondary",onClick:()=>n(-1),children:"Back"})]}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"category",className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Expense Category *"}),d.jsxs("select",{id:"category",name:"category",value:a.category,onChange:c,required:!0,className:`w-full px-3 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,children:[d.jsx("option",{value:"",children:"Select a category"}),l.map(f=>d.jsx("option",{value:f,children:f},f))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"amount",className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Amount () *"}),d.jsx("input",{type:"number",id:"amount",name:"amount",value:a.amount,onChange:c,required:!0,min:"0",step:"0.01",className:`w-full px-3 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"date",className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Date *"}),d.jsx("input",{type:"date",id:"date",name:"date",value:a.date,onChange:c,required:!0,className:`w-full px-3 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-blue-500`})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"description",className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Description"}),d.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:c,rows:4,className:`w-full px-3 py-2 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Enter expense details..."})]}),d.jsxs("div",{className:"flex justify-end space-x-4",children:[d.jsx(lt,{variant:"secondary",onClick:()=>n(-1),children:"Cancel"}),d.jsx(lt,{type:"submit",disabled:s,children:s?"Saving...":"Save Expense"})]})]})})]})},Gwe=()=>{const{selectedCompany:r}=ln(),{theme:t}=zr(),e=t==="dark",[n,a]=ie.useState(!0),[,i]=ie.useState([]),[s,o]=ie.useState([]),[l,c]=ie.useState([]),[u,f]=ie.useState([]),[h,p]=ie.useState([]),g=async()=>{if(r){a(!0);try{const{data:v,error:b}=await De.from("expenses").select("*").eq("company_id",r.id).order("date",{ascending:!1});if(b)throw b;i(v||[]),y(v||[])}catch(v){console.error("Error fetching expenses:",v),Ce.error("Failed to load expenses")}finally{a(!1)}}},y=v=>{const b=[];for(let A=6;A>=0;A--){const O=dl(new Date,A),M=qt(O,"yyyy-MM-dd"),z=v.filter(D=>D.date===M),U=z.reduce((D,T)=>D+T.amount,0);b.push({period:qt(O,"EEE, MMM dd"),total:U,count:z.length})}o(b);const x=[];for(let A=3;A>=0;A--){const O=zc(DJ(new Date,A)),M=hf(dl(O,-6)),z=v.filter(D=>{const T=new Date(D.date);return T>=O&&T<=M}),U=z.reduce((D,T)=>D+T.amount,0);x.push({period:`Week ${qt(O,"MM/dd")} - ${qt(M,"MM/dd")}`,total:U,count:z.length})}c(x);const S=[];for(let A=11;A>=0;A--){const O=fL(new Date,A),M=qt(O,"yyyy-MM"),z=v.filter(D=>D.date.startsWith(M)),U=z.reduce((D,T)=>D+T.amount,0);S.push({period:qt(O,"MMM yyyy"),total:U,count:z.length})}f(S);const _=[],I=new Date().getFullYear();for(let A=4;A>=0;A--){const O=I-A,M=v.filter(U=>U.date.startsWith(O.toString())),z=M.reduce((U,D)=>U+D.amount,0);_.push({period:O.toString(),total:z,count:M.length})}p(_)};ie.useEffect(()=>{g()},[r]);const m=v=>`${v.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Expense Reports"}),d.jsx(lt,{variant:"secondary",onClick:g,children:"Refresh"})]}),n?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Daily Expenses (Last 7 Days)"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:e?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Day"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Total Expenses"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Transactions"})]})}),d.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${e?"bg-gray-800":"bg-white"}`,children:s.map((v,b)=>d.jsxs("tr",{className:b%2===0?e?"bg-gray-800":"bg-white":e?"bg-gray-900":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:v.period}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:m(v.total)}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:v.count})]},b))}),d.jsx("tfoot",{className:e?"bg-gray-700 font-semibold":"bg-gray-100 font-semibold",children:d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm",children:"Total"}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:m(s.reduce((v,b)=>v+b.total,0))}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:s.reduce((v,b)=>v+b.count,0)})]})})]})})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Weekly Expenses (Last 4 Weeks)"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:e?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Week"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Total Expenses"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Transactions"})]})}),d.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${e?"bg-gray-800":"bg-white"}`,children:l.map((v,b)=>d.jsxs("tr",{className:b%2===0?e?"bg-gray-800":"bg-white":e?"bg-gray-900":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:v.period}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:m(v.total)}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:v.count})]},b))}),d.jsx("tfoot",{className:e?"bg-gray-700 font-semibold":"bg-gray-100 font-semibold",children:d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm",children:"Total"}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:m(l.reduce((v,b)=>v+b.total,0))}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:l.reduce((v,b)=>v+b.count,0)})]})})]})})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Monthly Expenses (Last 12 Months)"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:e?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Month"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Total Expenses"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Transactions"})]})}),d.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${e?"bg-gray-800":"bg-white"}`,children:u.map((v,b)=>d.jsxs("tr",{className:b%2===0?e?"bg-gray-800":"bg-white":e?"bg-gray-900":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:v.period}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:m(v.total)}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:v.count})]},b))}),d.jsx("tfoot",{className:e?"bg-gray-700 font-semibold":"bg-gray-100 font-semibold",children:d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm",children:"Total"}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:m(u.reduce((v,b)=>v+b.total,0))}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:u.reduce((v,b)=>v+b.count,0)})]})})]})})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Yearly Expenses (Last 5 Years)"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsx("thead",{className:e?"bg-gray-700":"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Year"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Total Expenses"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Transactions"})]})}),d.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${e?"bg-gray-800":"bg-white"}`,children:h.map((v,b)=>d.jsxs("tr",{className:b%2===0?e?"bg-gray-800":"bg-white":e?"bg-gray-900":"bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:v.period}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:m(v.total)}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:v.count})]},b))}),d.jsx("tfoot",{className:e?"bg-gray-700 font-semibold":"bg-gray-100 font-semibold",children:d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm",children:"Total"}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:m(h.reduce((v,b)=>v+b.total,0))}),d.jsx("td",{className:"px-4 py-3 text-sm text-right",children:h.reduce((v,b)=>v+b.count,0)})]})})]})})]})]})]})},Kwe=()=>{const{selectedCompany:r}=ln(),{theme:t}=zr(),e=t==="dark",[n,a]=ie.useState(!0),[i,s]=ie.useState("this_month"),[o,l]=ie.useState(qt(wh(new Date),"yyyy-MM-dd")),[c,u]=ie.useState(qt(xh(new Date),"yyyy-MM-dd")),[f,h]=ie.useState("weighted_average"),[p,g]=ie.useState({totalSalesInclGST:0,totalSalesExclGST:0,totalGSTCollected:0,totalOrders:0,totalCOGS:0}),[y,m]=ie.useState({totalExpenses:0,expenseCount:0}),[v,b]=ie.useState(0),[x,S]=ie.useState(0),_=async()=>{if(r){a(!0);try{let O,M;i==="custom"?(O=new Date(o),M=new Date(c)):i==="today"?(O=new Date,M=new Date):i==="this_month"?(O=wh(new Date),M=xh(new Date)):(O=Jv(new Date),M=b6(new Date));const{data:z,error:U}=await De.from("sales").select(`
          total,
          subtotal,
          tax,
          cgst,
          sgst,
          igst,
          cess,
          sale_items (
            quantity,
            price,
            product_id,
            product:products (
              purchase_price
            )
          )
        `).eq("company_id",r.id).gte("created_at",O.toISOString()).lte("created_at",M.toISOString());if(U)throw U;const D=z||[],{data:T,error:R}=await De.from("purchase_entries").select(`
          total,
          subtotal,
          tax,
          cgst,
          sgst,
          igst,
          cess,
          purchase_items (
            quantity,
            purchase_price,
            product_id
          )
        `).eq("company_id",r.id).gte("created_at",O.toISOString()).lte("created_at",M.toISOString());if(R)throw R;const C=T||[],N=D.reduce((ee,B)=>ee+(B.total||0),0)||0,E=D.length||0;let k=0;D.forEach(ee=>{const B=ee.cgst||0,F=ee.sgst||0,X=ee.igst||0,te=ee.cess||0;k+=B+F+X+te});const P=N-k;let q=0;if(f==="weighted_average"){const ee=[];C.forEach(B=>{var F;(F=B.purchase_items)==null||F.forEach(X=>{const te=X.purchase_price||0;ee.push({productId:X.product_id,quantity:X.quantity||0,purchasePriceExclGST:te})})}),D.forEach(B=>{var F;(F=B.sale_items)==null||F.forEach(X=>{var ue;const te=X.product_id,se=X.quantity||0,ce=ee.filter(oe=>oe.productId===te);if(ce.length>0){let oe=0,le=0;ce.forEach(be=>{oe+=be.quantity,le+=be.quantity*be.purchasePriceExclGST});const pe=oe>0?le/oe:0,ye=se*pe;q+=ye}else{const oe=((ue=X.product)==null?void 0:ue.purchase_price)||0,le=se*oe;q+=le}})})}else C&&C.length>0&&(q=P*.6);g({totalSalesInclGST:N,totalSalesExclGST:P,totalGSTCollected:k,totalOrders:E,totalCOGS:q});const{data:H,error:L}=await De.from("expenses").select("amount").eq("company_id",r.id).gte("date",qt(O,"yyyy-MM-dd")).lte("date",qt(M,"yyyy-MM-dd"));if(L)throw L;const K=(H==null?void 0:H.reduce((ee,B)=>ee+(B.amount||0),0))||0,Y=(H==null?void 0:H.length)||0;m({totalExpenses:K,expenseCount:Y});const Z=P-q,V=Z-K;b(Z),S(V)}catch(O){console.error("Error fetching profit/loss data:",O),Ce.error("Failed to load profit/loss data")}finally{a(!1)}}};ie.useEffect(()=>{_()},[r,i,o,c,f]);const I=O=>{if(s(O),O==="today"){const M=new Date;l(qt(M,"yyyy-MM-dd")),u(qt(M,"yyyy-MM-dd"))}else if(O==="this_month"){const M=wh(new Date),z=xh(new Date);l(qt(M,"yyyy-MM-dd")),u(qt(z,"yyyy-MM-dd"))}else if(O==="this_year"){const M=Jv(new Date),z=b6(new Date);l(qt(M,"yyyy-MM-dd")),u(qt(z,"yyyy-MM-dd"))}},A=O=>`${O.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Profit & Loss Statement"}),d.jsx(lt,{variant:"secondary",onClick:_,children:"Refresh"})]}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(lt,{variant:i==="today"?"primary":"secondary",size:"sm",onClick:()=>I("today"),children:"Today"}),d.jsx(lt,{variant:i==="this_month"?"primary":"secondary",size:"sm",onClick:()=>I("this_month"),children:"This Month"}),d.jsx(lt,{variant:i==="this_year"?"primary":"secondary",size:"sm",onClick:()=>I("this_year"),children:"This Year"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{children:"Custom:"}),d.jsx("input",{type:"date",value:o,onChange:O=>{s("custom"),l(O.target.value)},className:`px-3 py-1 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),d.jsx("span",{children:"to"}),d.jsx("input",{type:"date",value:c,onChange:O=>{s("custom"),u(O.target.value)},className:`px-3 py-1 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{children:"COGS Method:"}),d.jsxs("select",{value:f,onChange:O=>h(O.target.value),className:`px-3 py-1 rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[d.jsx("option",{value:"weighted_average",children:"Weighted Average"}),d.jsx("option",{value:"avg_purchase_total",children:"Avg Purchase Total"})]})]})]})}),n?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Total Sales (Excl. GST)"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold",children:A(p.totalSalesExclGST)})]}),d.jsx("div",{className:`p-3 rounded-full ${e?"bg-blue-900/20":"bg-blue-100"}`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"GST Collected"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold",children:A(p.totalGSTCollected)})]}),d.jsx("div",{className:`p-3 rounded-full ${e?"bg-green-900/20":"bg-green-100"}`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Cost of Goods Sold"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold",children:A(p.totalCOGS)})]}),d.jsx("div",{className:`p-3 rounded-full ${e?"bg-orange-900/20":"bg-orange-100"}`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Total Expenses"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold",children:A(y.totalExpenses)})]}),d.jsx("div",{className:`p-3 rounded-full ${e?"bg-red-900/20":"bg-red-100"}`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),d.jsx("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm border-2 ${x>=0?"border-green-500":"border-red-500"}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Net Profit"}),d.jsx("p",{className:`mt-2 text-2xl font-semibold ${x>=0?"text-green-500":"text-red-500"}`,children:A(x)})]}),d.jsx("div",{className:`p-3 rounded-full ${x>=0?e?"bg-green-900/20":"bg-green-100":e?"bg-red-900/20":"bg-red-100"}`,children:x>=0?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"})})})]})})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sales Breakdown"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Sales (Excl. GST)"}),d.jsx("p",{className:"text-xl font-bold",children:A(p.totalSalesExclGST)})]}),d.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("p",{className:"text-sm text-gray-500",children:"GST Collected"}),d.jsx("p",{className:"text-xl font-bold",children:A(p.totalGSTCollected)})]}),d.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"}`,children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Sales (Incl. GST)"}),d.jsx("p",{className:"text-xl font-bold",children:A(p.totalSalesInclGST)})]})]})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Financial Summary"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("span",{children:"Total Sales (Excl. GST)"}),d.jsx("span",{className:"font-medium",children:A(p.totalSalesExclGST)})]}),d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("span",{children:"GST Collected"}),d.jsxs("span",{className:"font-medium text-green-500",children:["+",A(p.totalGSTCollected)]})]}),d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("span",{children:"Total Sales (Incl. GST)"}),d.jsx("span",{className:"font-medium",children:A(p.totalSalesInclGST)})]}),d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("span",{children:"Cost of Goods Sold"}),d.jsxs("span",{className:"font-medium text-orange-500",children:["-",A(p.totalCOGS)]})]}),d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("span",{children:"Gross Profit"}),d.jsx("span",{className:"font-medium",children:A(v)})]}),d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("span",{children:"Total Business Expenses"}),d.jsxs("span",{className:"font-medium text-red-500",children:["-",A(y.totalExpenses)]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700 font-semibold",children:[d.jsx("span",{children:"Net Profit/Loss"}),d.jsx("span",{className:x>=0?"text-green-500":"text-red-500",children:A(x)})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h3",{className:"text-lg font-medium mb-3",children:"Sales Information"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Total Orders:"}),d.jsx("span",{children:p.totalOrders})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"COGS Method:"}),d.jsx("span",{children:f==="weighted_average"?"Weighted Average":"Avg Purchase Total"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Average Order Value:"}),d.jsx("span",{children:p.totalOrders>0?A(p.totalSalesInclGST/p.totalOrders):A(0)})]})]})]}),d.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-sm`,children:[d.jsx("h3",{className:"text-lg font-medium mb-3",children:"Expense Information"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Total Expense Entries:"}),d.jsx("span",{children:y.expenseCount})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Average Expense:"}),d.jsx("span",{children:y.expenseCount>0?A(y.totalExpenses/y.expenseCount):A(0)})]})]})]})]})]})]})},Xwe=()=>{const r=pi();return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800 py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Application Test"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"If you can see this page, the application is working correctly."})]}),d.jsxs("div",{className:"mt-8 space-y-4",children:[d.jsx(lt,{variant:"primary",className:"w-full",onClick:()=>r("/login"),children:"Go to Login Page"}),d.jsx(lt,{variant:"secondary",className:"w-full",onClick:()=>r("/"),children:"Go to Home Page"})]})]})})},ih={legal_name:"ABC Enterprises Pvt Ltd",name:"ABC Stores",tax_number:"27AABCCDDEEFFG",email:"info@abcstores.com",phone:"+91 9876543210",website:"www.abcstores.com",address_street:"123 Business Avenue",address_city:"Mumbai",address_state:"Maharashtra",address_postal_code:"400001",address_country:"India",state_code:"27"},$s={id:"INV-001",invoiceNumber:"INV-2023-001",date:"2023-12-01",time:"14:30:00",customer:{name:"John Doe",email:"john@example.com",phone:"+91 9876543210",gstNumber:"27AABBCCDDEEFF",address:"456 Customer Street, Mumbai, Maharashtra 400002"},items:[{id:"1",name:"Premium Sports Shoes",brand:"Nike",quantity:2,rate:2500,grossAmount:5e3,discountPercentage:10,discountAmount:500,taxableValue:4500,gstPercentage:18,gstAmount:810,cessPercentage:0,cessAmount:0,netAmount:5310},{id:"2",name:"Luxury Perfume",brand:"Chanel",quantity:1,rate:8e3,grossAmount:8e3,discountPercentage:5,discountAmount:400,taxableValue:7600,gstPercentage:28,gstAmount:2128,cessPercentage:1,cessAmount:76,netAmount:9804},{id:"3",name:"Designer Sunglasses",brand:"Ray Ban",quantity:1,rate:3500,grossAmount:3500,discountPercentage:0,discountAmount:0,taxableValue:3500,gstPercentage:18,gstAmount:630,cessPercentage:0,cessAmount:0,netAmount:4130}],totalGrossAmount:16500,totalDiscount:900,totalTaxableValue:15600,totalGST:3568,totalCESS:76,roundOff:0,grandTotal:19244,totalCGST:1784,totalSGST:1784,taxType:"split"},Ywe=()=>{const[r,t]=ie.useState(!1),e=async()=>{t(!0);try{await cz(ih,$s)}catch(a){console.error("Error generating A4 invoice:",a),alert("Failed to generate A4 invoice. Please check console for details.")}finally{t(!1)}},n=async()=>{t(!0);try{await owe(ih,$s)}catch(a){console.error("Error generating thermal invoice:",a),alert("Failed to generate thermal invoice. Please check console for details.")}finally{t(!1)}};return d.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Professional Sales Invoice Generator"}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Invoice Preview"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium mb-2",children:"Company Details"}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Name:"})," ",ih.legal_name]}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Trade Name:"})," ",ih.name]}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"GSTIN:"})," ",ih.tax_number]}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Address:"})," ",ih.address_street,", ",ih.address_city]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium mb-2",children:"Invoice Details"}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Invoice No:"})," ",$s.invoiceNumber]}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Date:"})," ",$s.date]}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Total Items:"})," ",$s.items.length]}),d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Grand Total:"})," ",co($s.grandTotal)]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Items"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Rate"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Taxable"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"GST"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"CESS"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Net"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$s.items.map(a=>d.jsxs("tr",{children:[d.jsxs("td",{className:"px-4 py-2 text-sm",children:[d.jsx("div",{className:"font-medium",children:a.name}),d.jsx("div",{className:"text-gray-500",children:a.brand})]}),d.jsx("td",{className:"px-4 py-2 text-sm",children:a.quantity}),d.jsxs("td",{className:"px-4 py-2 text-sm",children:["",co(a.rate)]}),d.jsxs("td",{className:"px-4 py-2 text-sm",children:["",co(a.taxableValue)]}),d.jsxs("td",{className:"px-4 py-2 text-sm",children:["",co(a.gstAmount)," (",a.gstPercentage,"%)"]}),d.jsxs("td",{className:"px-4 py-2 text-sm",children:["",co(a.cessAmount)," (",a.cessPercentage,"%)"]}),d.jsxs("td",{className:"px-4 py-2 text-sm",children:["",co(a.netAmount)]})]},a.id))})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[d.jsx("h3",{className:"font-medium mb-2",children:"GST Summary"}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Taxable Value:"}),d.jsxs("span",{children:["",co($s.totalTaxableValue)]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"CGST:"}),d.jsxs("span",{children:["",co($s.totalCGST||0)]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"SGST:"}),d.jsxs("span",{children:["",co($s.totalSGST||0)]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"CESS:"}),d.jsxs("span",{children:["",co($s.totalCESS)]})]}),d.jsxs("div",{className:"flex justify-between font-medium border-t pt-1 mt-1",children:[d.jsx("span",{children:"Total GST:"}),d.jsxs("span",{children:["",co($s.totalGST)]})]})]})]}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Bill Summary"}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Total Discount:"}),d.jsxs("span",{children:["",co($s.totalDiscount)]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Round-off:"}),d.jsxs("span",{children:["",co($s.roundOff)]})]}),d.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-1 mt-1",children:[d.jsx("span",{children:"Grand Total:"}),d.jsxs("span",{children:["",co($s.grandTotal)]})]})]})]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsx("button",{onClick:e,disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:r?"Generating...":"Generate A4 Invoice"}),d.jsx("button",{onClick:n,disabled:r,className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors",children:r?"Generating...":"Generate Thermal Invoice"})]}),d.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[d.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"Implementation Notes"}),d.jsxs("ul",{className:"text-sm text-yellow-700 list-disc pl-5 space-y-1",children:[d.jsx("li",{children:"The A4 invoice generates a PDF file ready for professional printing"}),d.jsx("li",{children:"The thermal invoice opens in a new window optimized for 80mm thermal printers"}),d.jsx("li",{children:"Both invoices include QR codes with invoice details for easy scanning"}),d.jsx("li",{children:"All calculations follow the specified GST and CESS rules"}),d.jsx("li",{children:"Supports both inclusive and exclusive tax calculations"})]})]})]})},Jwe=()=>d.jsx("div",{className:"min-h-screen bg-gray-50",children:d.jsx(Ywe,{})}),Zwe=()=>{const[r,t]=ie.useState(!0),[e,n]=ie.useState(null);return ie.useEffect(()=>{const a=setTimeout(()=>{t(!1)},1e3);return()=>clearTimeout(a)},[]),r?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:d.jsx("div",{className:"text-2xl font-bold",children:"Loading Login Component..."})}):e?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-100",children:d.jsxs("div",{className:"text-2xl font-bold text-red-800",children:["Error: ",e]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"p-4 bg-blue-500 text-white",children:d.jsx("h1",{className:"text-xl font-bold",children:"Test Login Page"})}),d.jsx("div",{className:"p-4",children:d.jsx(RU,{})})]})};let Qwe=class extends ie.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Uncaught error:",t,e)}render(){var t;return this.state.hasError?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:d.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-700 mb-4",children:"We're sorry, but an error occurred while loading the application."}),d.jsxs("details",{className:"bg-gray-100 p-4 rounded mb-4",children:[d.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error details"}),d.jsx("pre",{className:"mt-2 text-sm text-red-500 whitespace-pre-wrap",children:(t=this.state.error)==null?void 0:t.toString()})]}),d.jsx("button",{className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",onClick:()=>window.location.reload(),children:"Reload Page"})]})}):this.props.children}};function e_e(){return ie.useEffect(()=>{const r=pK();return()=>{r()}},[]),d.jsxs(d.Fragment,{children:[d.jsx(HH,{position:"top-center",toastOptions:{duration:6e3,style:{background:"#333",color:"#fff",padding:"16px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:9999}}}),d.jsx(eH,{children:d.jsx(Qwe,{children:d.jsx(dK,{children:d.jsxs(GW,{children:[d.jsx(pn,{path:"/login",element:d.jsx(RU,{})}),d.jsx(pn,{path:"/test-login",element:d.jsx(Zwe,{})}),d.jsx(pn,{path:"/role-selection",element:d.jsx(Uwe,{})}),d.jsx(pn,{path:"/test",element:d.jsx(Xwe,{})}),d.jsx(pn,{path:"/",element:d.jsx(Gi,{to:"/login",replace:!0})}),d.jsx(pn,{path:"/super-admin-dashboard",element:d.jsx(Zn,{requiredRole:"admin",children:d.jsx(Ppe,{})})}),d.jsx(pn,{path:"/create-company",element:d.jsx(Zn,{requiredRole:"admin",children:d.jsx(zwe,{})})}),d.jsx(pn,{path:"/manager-dashboard",element:d.jsx(Zn,{requiredRole:"manager",children:d.jsx(Epe,{})})}),d.jsx(pn,{path:"/cashier-dashboard",element:d.jsx(Zn,{requiredRole:"cashier",children:d.jsx(Ape,{})})}),d.jsx(pn,{path:"/salesperson-dashboard",element:d.jsx(Zn,{requiredRole:"salesperson",children:d.jsx(Tpe,{})})}),d.jsx(pn,{path:"/products",element:d.jsx(Zn,{children:d.jsx(nwe,{})})}),d.jsx(pn,{path:"/sales",element:d.jsx(Zn,{children:d.jsx(vZ,{})})}),d.jsx(pn,{path:"/sales-return",element:d.jsx(Zn,{children:d.jsx(Awe,{})})}),d.jsx(pn,{path:"/offers-promotions",element:d.jsx(Zn,{children:d.jsx(Twe,{})})}),d.jsx(pn,{path:"/purchase",element:d.jsx(Zn,{children:d.jsx(cwe,{})})}),d.jsx(pn,{path:"/customers",element:d.jsx(Zn,{children:d.jsx(hwe,{})})}),d.jsx(pn,{path:"/reports",element:d.jsx(Zn,{children:d.jsx(mwe,{})})}),d.jsx(pn,{path:"/gst-reports",element:d.jsx(Zn,{children:d.jsx(jwe,{})})}),d.jsx(pn,{path:"/gst-settings",element:d.jsx(Zn,{requiredRole:["admin","owner"],children:d.jsx(rR,{})})}),d.jsx(pn,{path:"/whatsapp-settings",element:d.jsx(Zn,{requiredRole:["admin","manager","owner"],children:d.jsx(Ewe,{})})}),d.jsx(pn,{path:"/users",element:d.jsx(Zn,{requiredRole:"admin",noLayout:!0,children:d.jsx(Dwe,{})})}),d.jsx(pn,{path:"/companies",element:d.jsx(aR,{})}),d.jsx(pn,{path:"/companies/:id",element:d.jsx(aR,{})}),d.jsx(pn,{path:"/settings",element:d.jsx(Zn,{requiredRole:"admin",children:d.jsx(rR,{})})}),d.jsx(pn,{path:"/admin-dashboard",element:d.jsx(Zn,{requiredRole:"admin",children:d.jsx(sM,{})})}),d.jsx(pn,{path:"/database",element:d.jsx(Zn,{requiredRole:"admin",children:d.jsx(sM,{})})}),d.jsx(pn,{path:"/stock-report",element:d.jsx(Zn,{children:d.jsx(Wwe,{})})}),d.jsx(pn,{path:"/profit-loss-reports",element:d.jsx(Zn,{requiredRole:["admin","manager","owner"],children:d.jsx(Hwe,{})})}),d.jsx(pn,{path:"/expenses/add",element:d.jsx(Zn,{requiredRole:["admin","manager","owner"],children:d.jsx(Vwe,{})})}),d.jsx(pn,{path:"/expenses/reports",element:d.jsx(Zn,{requiredRole:["admin","manager","owner"],children:d.jsx(Gwe,{})})}),d.jsx(pn,{path:"/profit-loss",element:d.jsx(Zn,{requiredRole:["admin","manager","owner"],children:d.jsx(Kwe,{})})}),d.jsx(pn,{path:"/professional-invoice-demo",element:d.jsx(Zn,{requiredRole:"admin",children:d.jsx(Jwe,{})})}),d.jsx(pn,{path:"*",element:d.jsx(Zn,{children:d.jsx(qwe,{})})})]})})})})]})}console.log("main.tsx is executing");console.log("About to render app...");class t_e extends ie.Component{constructor(t){super(t),this.state={hasError:!1,error:null},console.log("ErrorBoundary constructed")}static getDerivedStateFromError(t){return console.error("ErrorBoundary caught error:",t),{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Uncaught error:",t,e)}render(){var t;return console.log("ErrorBoundary rendering, hasError:",this.state.hasError),this.state.hasError?d.jsxs("div",{style:{padding:20,color:"red"},children:[d.jsx("h1",{children:"Something went wrong."}),d.jsx("pre",{children:(t=this.state.error)==null?void 0:t.toString()})]}):this.props.children}}console.log("Creating root element...");const K8=document.getElementById("root");console.log("Root element:",K8);K8?(tW.createRoot(K8).render(d.jsx(ie.StrictMode,{children:d.jsx(t_e,{children:d.jsx(oK,{children:d.jsx(cK,{children:d.jsx(PK,{children:d.jsx(e_e,{})})})})})})),console.log("App rendered!")):console.error("Root element not found!");export{$n as _,rn as c,fg as e,In as g,De as s,Ce as z};
